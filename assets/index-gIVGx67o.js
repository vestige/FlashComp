(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var _m={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function mS(){if(Ov)return ql;Ov=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return ql.Fragment=e,ql.jsx=n,ql.jsxs=n,ql}var kv;function pS(){return kv||(kv=1,_m.exports=mS()),_m.exports}var f=pS(),xm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function gS(){if(Mv)return Fe;Mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,U={};function j(M,ne,he){this.props=M,this.context=ne,this.refs=U,this.updater=he||D}j.prototype.isReactComponent={},j.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function z(){}z.prototype=j.prototype;function B(M,ne,he){this.props=M,this.context=ne,this.refs=U,this.updater=he||D}var X=B.prototype=new z;X.constructor=B,C(X,j.prototype),X.isPureReactComponent=!0;var te=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function O(M,ne,he,k,Q,ge){return he=ge.ref,{$$typeof:s,type:M,key:ne,ref:he!==void 0?he:null,props:ge}}function S(M,ne){return O(M.type,ne,void 0,void 0,void 0,M.props)}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function P(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return ne[he]})}var L=/\/+/g;function q(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):ne.toString(36)}function A(){}function ve(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(A,A):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function _e(M,ne,he,k,Q){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var pe=!1;if(M===null)pe=!0;else switch(ge){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(M.$$typeof){case s:case e:pe=!0;break;case _:return pe=M._init,_e(pe(M._payload),ne,he,k,Q)}}if(pe)return Q=Q(M),pe=k===""?"."+q(M,0):k,te(Q)?(he="",pe!=null&&(he=pe.replace(L,"$&/")+"/"),_e(Q,ne,he,"",function(xe){return xe})):Q!=null&&(I(Q)&&(Q=S(Q,he+(Q.key==null||M&&M.key===Q.key?"":(""+Q.key).replace(L,"$&/")+"/")+pe)),ne.push(Q)),1;pe=0;var ie=k===""?".":k+":";if(te(M))for(var ue=0;ue<M.length;ue++)k=M[ue],ge=ie+q(k,ue),pe+=_e(k,ne,he,ge,Q);else if(ue=E(M),typeof ue=="function")for(M=ue.call(M),ue=0;!(k=M.next()).done;)k=k.value,ge=ie+q(k,ue++),pe+=_e(k,ne,he,ge,Q);else if(ge==="object"){if(typeof M.then=="function")return _e(ve(M),ne,he,k,Q);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return pe}function $(M,ne,he){if(M==null)return M;var k=[],Q=0;return _e(M,k,"","",function(ge){return ne.call(he,ge,Q++)}),k}function ee(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var me=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function fe(){}return Fe.Children={map:$,forEach:function(M,ne,he){$(M,function(){ne.apply(this,arguments)},he)},count:function(M){var ne=0;return $(M,function(){ne++}),ne},toArray:function(M){return $(M,function(ne){return ne})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Fe.Component=j,Fe.Fragment=n,Fe.Profiler=o,Fe.PureComponent=B,Fe.StrictMode=i,Fe.Suspense=g,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return W.H.useMemoCache(M)}},Fe.cache=function(M){return function(){return M.apply(null,arguments)}},Fe.cloneElement=function(M,ne,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var k=C({},M.props),Q=M.key,ge=void 0;if(ne!=null)for(pe in ne.ref!==void 0&&(ge=void 0),ne.key!==void 0&&(Q=""+ne.key),ne)!re.call(ne,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ne.ref===void 0||(k[pe]=ne[pe]);var pe=arguments.length-2;if(pe===1)k.children=he;else if(1<pe){for(var ie=Array(pe),ue=0;ue<pe;ue++)ie[ue]=arguments[ue+2];k.children=ie}return O(M.type,Q,void 0,void 0,ge,k)},Fe.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Fe.createElement=function(M,ne,he){var k,Q={},ge=null;if(ne!=null)for(k in ne.key!==void 0&&(ge=""+ne.key),ne)re.call(ne,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(Q[k]=ne[k]);var pe=arguments.length-2;if(pe===1)Q.children=he;else if(1<pe){for(var ie=Array(pe),ue=0;ue<pe;ue++)ie[ue]=arguments[ue+2];Q.children=ie}if(M&&M.defaultProps)for(k in pe=M.defaultProps,pe)Q[k]===void 0&&(Q[k]=pe[k]);return O(M,ge,void 0,void 0,null,Q)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(M){return{$$typeof:m,render:M}},Fe.isValidElement=I,Fe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:ee}},Fe.memo=function(M,ne){return{$$typeof:y,type:M,compare:ne===void 0?null:ne}},Fe.startTransition=function(M){var ne=W.T,he={};W.T=he;try{var k=M(),Q=W.S;Q!==null&&Q(he,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(fe,me)}catch(ge){me(ge)}finally{W.T=ne}},Fe.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Fe.use=function(M){return W.H.use(M)},Fe.useActionState=function(M,ne,he){return W.H.useActionState(M,ne,he)},Fe.useCallback=function(M,ne){return W.H.useCallback(M,ne)},Fe.useContext=function(M){return W.H.useContext(M)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(M,ne){return W.H.useDeferredValue(M,ne)},Fe.useEffect=function(M,ne,he){var k=W.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(M,ne)},Fe.useId=function(){return W.H.useId()},Fe.useImperativeHandle=function(M,ne,he){return W.H.useImperativeHandle(M,ne,he)},Fe.useInsertionEffect=function(M,ne){return W.H.useInsertionEffect(M,ne)},Fe.useLayoutEffect=function(M,ne){return W.H.useLayoutEffect(M,ne)},Fe.useMemo=function(M,ne){return W.H.useMemo(M,ne)},Fe.useOptimistic=function(M,ne){return W.H.useOptimistic(M,ne)},Fe.useReducer=function(M,ne,he){return W.H.useReducer(M,ne,he)},Fe.useRef=function(M){return W.H.useRef(M)},Fe.useState=function(M){return W.H.useState(M)},Fe.useSyncExternalStore=function(M,ne,he){return W.H.useSyncExternalStore(M,ne,he)},Fe.useTransition=function(){return W.H.useTransition()},Fe.version="19.1.0",Fe}var Pv;function bp(){return Pv||(Pv=1,xm.exports=gS()),xm.exports}var N=bp(),bm={exports:{}},Hl={},Em={exports:{}},Tm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function yS(){return Vv||(Vv=1,function(s){function e($,ee){var me=$.length;$.push(ee);e:for(;0<me;){var fe=me-1>>>1,M=$[fe];if(0<o(M,ee))$[fe]=ee,$[me]=M,me=fe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ee=$[0],me=$.pop();if(me!==ee){$[0]=me;e:for(var fe=0,M=$.length,ne=M>>>1;fe<ne;){var he=2*(fe+1)-1,k=$[he],Q=he+1,ge=$[Q];if(0>o(k,me))Q<M&&0>o(ge,k)?($[fe]=ge,$[Q]=me,fe=Q):($[fe]=k,$[he]=me,fe=he);else if(Q<M&&0>o(ge,me))$[fe]=ge,$[Q]=me,fe=Q;else break e}}return ee}function o($,ee){var me=$.sortIndex-ee.sortIndex;return me!==0?me:$.id-ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],y=[],_=1,T=null,E=3,D=!1,C=!1,U=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function te($){for(var ee=n(y);ee!==null;){if(ee.callback===null)i(y);else if(ee.startTime<=$)i(y),ee.sortIndex=ee.expirationTime,e(g,ee);else break;ee=n(y)}}function W($){if(U=!1,te($),!C)if(n(g)!==null)C=!0,re||(re=!0,q());else{var ee=n(y);ee!==null&&_e(W,ee.startTime-$)}}var re=!1,O=-1,S=5,I=-1;function P(){return j?!0:!(s.unstable_now()-I<S)}function L(){if(j=!1,re){var $=s.unstable_now();I=$;var ee=!0;try{e:{C=!1,U&&(U=!1,B(O),O=-1),D=!0;var me=E;try{t:{for(te($),T=n(g);T!==null&&!(T.expirationTime>$&&P());){var fe=T.callback;if(typeof fe=="function"){T.callback=null,E=T.priorityLevel;var M=fe(T.expirationTime<=$);if($=s.unstable_now(),typeof M=="function"){T.callback=M,te($),ee=!0;break t}T===n(g)&&i(g),te($)}else i(g);T=n(g)}if(T!==null)ee=!0;else{var ne=n(y);ne!==null&&_e(W,ne.startTime-$),ee=!1}}break e}finally{T=null,E=me,D=!1}ee=void 0}}finally{ee?q():re=!1}}}var q;if(typeof X=="function")q=function(){X(L)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ve=A.port2;A.port1.onmessage=L,q=function(){ve.postMessage(null)}}else q=function(){z(L,0)};function _e($,ee){O=z(function(){$(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function($){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var me=E;E=ee;try{return $()}finally{E=me}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=E;E=$;try{return ee()}finally{E=me}},s.unstable_scheduleCallback=function($,ee,me){var fe=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?fe+me:fe):me=fe,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=me+M,$={id:_++,callback:ee,priorityLevel:$,startTime:me,expirationTime:M,sortIndex:-1},me>fe?($.sortIndex=me,e(y,$),n(g)===null&&$===n(y)&&(U?(B(O),O=-1):U=!0,_e(W,me-fe))):($.sortIndex=M,e(g,$),C||D||(C=!0,re||(re=!0,q()))),$},s.unstable_shouldYield=P,s.unstable_wrapCallback=function($){var ee=E;return function(){var me=E;E=ee;try{return $.apply(this,arguments)}finally{E=me}}}}(Tm)),Tm}var Lv;function vS(){return Lv||(Lv=1,Em.exports=yS()),Em.exports}var wm={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function _S(){if(Uv)return mn;Uv=1;var s=bp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:y,implementation:_}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},mn.flushSync=function(g){var y=h.T,_=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=_,i.d.f()}},mn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},mn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},mn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,T=m(_,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:D}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:E,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},mn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=m(_,y.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},mn.requestFormReset=function(g){i.d.r(g)},mn.unstable_batchedUpdates=function(g,y){return g(y)},mn.useFormState=function(g,y,_){return h.H.useFormState(g,y,_)},mn.useFormStatus=function(){return h.H.useHostTransitionStatus()},mn.version="19.1.0",mn}var Bv;function xS(){if(Bv)return wm.exports;Bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wm.exports=_S(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function bS(){if(zv)return Hl;zv=1;var s=vS(),e=bp(),n=xS();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(i(188))}function g(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return m(d),t;if(p===l)return m(d),r;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=p;else{for(var b=!1,w=d.child;w;){if(w===a){b=!0,a=d,l=p;break}if(w===l){b=!0,l=d,a=p;break}w=w.sibling}if(!b){for(w=p.child;w;){if(w===a){b=!0,a=p,l=d;break}if(w===l){b=!0,l=p,a=d;break}w=w.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),X=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case re:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case X:return(t.displayName||"Context")+".Provider";case B:return(t._context.displayName||"Context")+".Consumer";case te:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return r=t.displayName||null,r!==null?r:ve(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return ve(t(r))}catch{}}return null}var _e=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},fe=[],M=-1;function ne(t){return{current:t}}function he(t){0>M||(t.current=fe[M],fe[M]=null,M--)}function k(t,r){M++,fe[M]=t.current,t.current=r}var Q=ne(null),ge=ne(null),pe=ne(null),ie=ne(null);function ue(t,r){switch(k(pe,r),k(ge,t),k(Q,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?ov(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=ov(r),t=lv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}he(Q),k(Q,t)}function xe(){he(Q),he(ge),he(pe)}function ye(t){t.memoizedState!==null&&k(ie,t);var r=Q.current,a=lv(r,t.type);r!==a&&(k(ge,t),k(Q,a))}function Te(t){ge.current===t&&(he(Q),he(ge)),ie.current===t&&(he(ie),Vl._currentValue=me)}var Ae=Object.prototype.hasOwnProperty,Ie=s.unstable_scheduleCallback,Ue=s.unstable_cancelCallback,ht=s.unstable_shouldYield,Ge=s.unstable_requestPaint,Ye=s.unstable_now,It=s.unstable_getCurrentPriorityLevel,lt=s.unstable_ImmediatePriority,Lt=s.unstable_UserBlockingPriority,Tt=s.unstable_NormalPriority,Nn=s.unstable_LowPriority,Ot=s.unstable_IdlePriority,Rn=s.log,Be=s.unstable_setDisableYieldValue,Le=null,ke=null;function it(t){if(typeof Rn=="function"&&Be(t),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Le,t)}catch{}}var _t=Math.clz32?Math.clz32:Hs,os=Math.log,fa=Math.LN2;function Hs(t){return t>>>=0,t===0?32:31-(os(t)/fa|0)|0}var Cn=256,xs=4194304;function ls(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ma(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,p=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~p,l!==0?d=ls(l):(b&=w,b!==0?d=ls(b):a||(a=w&~t,a!==0&&(d=ls(a))))):(w=l&~p,w!==0?d=ls(w):b!==0?d=ls(b):a||(a=l&~t,a!==0&&(d=ls(a)))),d===0?0:r!==0&&r!==d&&(r&p)===0&&(p=d&-d,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:d}function Ai(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Vo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lo(){var t=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),t}function Uo(){var t=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),t}function Fs(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Gs(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Bo(t,r,a,l,d,p){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,V=t.expirationTimes,Y=t.hiddenUpdates;for(a=b&~a;0<a;){var ae=31-_t(a),le=1<<ae;w[ae]=0,V[ae]=-1;var Z=Y[ae];if(Z!==null)for(Y[ae]=null,ae=0;ae<Z.length;ae++){var J=Z[ae];J!==null&&(J.lane&=-536870913)}a&=~le}l!==0&&bs(t,l,0),p!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=p&~(b&~r))}function bs(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-_t(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function zo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-_t(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function Ar(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Nr(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Nv(t.type))}function kc(t,r){var a=ee.p;try{return ee.p=t,r()}finally{ee.p=a}}var St=Math.random().toString(36).slice(2),$t="__reactFiber$"+St,Ut="__reactProps$"+St,$n="__reactContainer$"+St,qo="__reactEvents$"+St,bh="__reactListeners$"+St,Rr="__reactHandles$"+St,Mc="__reactResources$"+St,Ni="__reactMarker$"+St;function Cr(t){delete t[$t],delete t[Ut],delete t[qo],delete t[bh],delete t[Rr]}function $s(t){var r=t[$t];if(r)return r;for(var a=t.parentNode;a;){if(r=a[$n]||a[$t]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=hv(t);t!==null;){if(a=t[$t])return a;t=hv(t)}return r}t=a,a=t.parentNode}return null}function Es(t){if(t=t[$t]||t[$n]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ts(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function xn(t){var r=t[Mc];return r||(r=t[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function kt(t){t[Ni]=!0}var Ho=new Set,ga={};function cs(t,r){Ks(t,r),Ks(t+"Capture",r)}function Ks(t,r){for(ga[t]=r,t=0;t<r.length;t++)Ho.add(r[t])}var Pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vc={},Ri={};function Lc(t){return Ae.call(Ri,t)?!0:Ae.call(Vc,t)?!1:Pc.test(t)?Ri[t]=!0:(Vc[t]=!0,!1)}function Ir(t,r,a){if(Lc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ws(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function rn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ci,Uc;function Qs(t){if(Ci===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ci=r&&r[1]||"",Uc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ci+t+Uc}var ya=!1;function va(t,r){if(!t||ya)return"";ya=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var Z=J}Reflect.construct(t,[],le)}else{try{le.call()}catch(J){Z=J}t.call(le.prototype)}}else{try{throw Error()}catch(J){Z=J}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],w=p[1];if(b&&w){var V=b.split(`
`),Y=w.split(`
`);for(d=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(l===V.length||d===Y.length)for(l=V.length-1,d=Y.length-1;1<=l&&0<=d&&V[l]!==Y[d];)d--;for(;1<=l&&0<=d;l--,d--)if(V[l]!==Y[d]){if(l!==1||d!==1)do if(l--,d--,0>d||V[l]!==Y[d]){var ae=`
`+V[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=d);break}}}finally{ya=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Qs(a):""}function Fo(t){switch(t.tag){case 26:case 27:case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return va(t.type,!1);case 11:return va(t.type.render,!1);case 1:return va(t.type,!0);case 31:return Qs("Activity");default:return""}}function _a(t){try{var r="";do r+=Fo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Go(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Eh(t){var r=Go(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){l=""+b,p.call(this,b)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function xa(t){t._valueTracker||(t._valueTracker=Eh(t))}function $o(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Go(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Th=/[\n"\\]/g;function Bt(t){return t.replace(Th,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Mn(t,r,a,l,d,p,b,w){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+bn(r)):t.value!==""+bn(r)&&(t.value=""+bn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Dr(t,b,bn(r)):a!=null?Dr(t,b,bn(a)):l!=null&&t.removeAttribute("value"),d==null&&p!=null&&(t.defaultChecked=!!p),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+bn(w):t.removeAttribute("name")}function Di(t,r,a,l,d,p,b,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+bn(a):"",r=r!=null?""+bn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Dr(t,r,a){r==="number"&&Ii(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ys(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function pt(t,r,a){if(r!=null&&(r=""+bn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+bn(a):""}function ji(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(_e(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=bn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Kn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Oi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bc(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Oi.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Ko(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Bc(t,d,l)}else for(var p in r)r.hasOwnProperty(p)&&Bc(t,p,r[p])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(t){return Sh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Xs=null;function Qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zs=null,Ws=null;function Yo(t){var r=Es(t);if(r&&(t=r.stateNode)){var a=t[Ut]||null;e:switch(t=r.stateNode,r.type){case"input":if(Mn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Bt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[Ut]||null;if(!d)throw Error(i(90));Mn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&$o(l)}break e;case"textarea":pt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ys(t,!!a.multiple,r,!1)}}}var Ss=!1;function zc(t,r,a){if(Ss)return t(r,a);Ss=!0;try{var l=t(r);return l}finally{if(Ss=!1,(Zs!==null||Ws!==null)&&(ku(),Zs&&(r=Zs,t=Ws,Ws=Zs=null,Yo(r),t)))for(r=0;r<t.length;r++)Yo(t[r])}}function ki(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Ut]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(us)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Yn=!1}var As=null,jr=null,Js=null;function Xo(){if(Js)return Js;var t,r=jr,a=r.length,l,d="value"in As?As.value:As.textContent,p=d.length;for(t=0;t<a&&r[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===d[p-l];l++);return Js=d.slice(t,1<l?1-l:void 0)}function Ns(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Rs(){return!0}function Zo(){return!1}function Wt(t){function r(a,l,d,p,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Rs:Zo,this.isPropagationStopped=Zo,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),r}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=Wt(ct),Pi=_({},ct,{view:0,detail:0}),qc=Wt(Pi),Ta,wa,Cs,Vi=_({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cs&&(Cs&&t.type==="mousemove"?(Ta=t.screenX-Cs.screenX,wa=t.screenY-Cs.screenY):wa=Ta=0,Cs=t),Ta)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Xn=Wt(Vi),Hc=_({},Vi,{dataTransfer:0}),Ah=Wt(Hc),Li=_({},Pi,{relatedTarget:0}),Sa=Wt(Li),Wo=_({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Wt(Wo),Fc=_({},ct,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Na=Wt(Fc),Nh=_({},ct,{data:0}),Jo=Wt(Nh),Ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=$c[t])?!!r[t]:!1}function Bi(){return el}var Kc=_({},Pi,{key:function(t){if(t.key){var r=Ui[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ns(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bi,charCode:function(t){return t.type==="keypress"?Ns(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ns(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ra=Wt(Kc),Qc=_({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Wt(Qc),er=_({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bi}),Yc=Wt(er),Xc=_({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zc=Wt(Xc),Wc=_({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ca=Wt(Wc),En=_({},ct,{newState:0,oldState:0}),Jc=Wt(En),eu=[9,13,27,32],Is=us&&"CompositionEvent"in window,u=null;us&&"documentMode"in document&&(u=document.documentMode);var v=us&&"TextEvent"in window&&!u,x=us&&(!Is||u&&8<u&&11>=u),R=" ",G=!1;function se(t,r){switch(t){case"keyup":return eu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tt=!1;function Kt(t,r){switch(t){case"compositionend":return be(r);case"keypress":return r.which!==32?null:(G=!0,R);case"textInput":return t=r.data,t===R&&G?null:t;default:return null}}function nt(t,r){if(tt)return t==="compositionend"||!Is&&se(t,r)?(t=Xo(),Js=jr=As=null,tt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return x&&r.locale!=="ko"?null:r.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Jt[t.type]:r==="textarea"}function tr(t,r,a,l){Zs?Ws?Ws.push(l):Ws=[l]:Zs=l,r=Bu(r,"onChange"),0<r.length&&(a=new Ea("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var an=null,Ds=null;function nl(t){nv(t,0)}function tu(t){var r=Ts(t);if($o(r))return t}function Tg(t,r){if(t==="change")return r}var wg=!1;if(us){var Rh;if(us){var Ch="oninput"in document;if(!Ch){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),Ch=typeof Sg.oninput=="function"}Rh=Ch}else Rh=!1;wg=Rh&&(!document.documentMode||9<document.documentMode)}function Ag(){an&&(an.detachEvent("onpropertychange",Ng),Ds=an=null)}function Ng(t){if(t.propertyName==="value"&&tu(Ds)){var r=[];tr(r,Ds,t,Qn(t)),zc(nl,r)}}function FT(t,r,a){t==="focusin"?(Ag(),an=r,Ds=a,an.attachEvent("onpropertychange",Ng)):t==="focusout"&&Ag()}function GT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(Ds)}function $T(t,r){if(t==="click")return tu(r)}function KT(t,r){if(t==="input"||t==="change")return tu(r)}function QT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pn=typeof Object.is=="function"?Object.is:QT;function sl(t,r){if(Pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ae.call(r,d)||!Pn(t[d],r[d]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,r){var a=Rg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rg(a)}}function Ig(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ig(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Dg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ii(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ii(t.document)}return r}function Ih(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var YT=us&&"documentMode"in document&&11>=document.documentMode,Ia=null,Dh=null,rl=null,jh=!1;function jg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jh||Ia==null||Ia!==Ii(l)||(l=Ia,"selectionStart"in l&&Ih(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&sl(rl,l)||(rl=l,l=Bu(Dh,"onSelect"),0<l.length&&(r=new Ea("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ia)))}function zi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Da={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionrun:zi("Transition","TransitionRun"),transitionstart:zi("Transition","TransitionStart"),transitioncancel:zi("Transition","TransitionCancel"),transitionend:zi("Transition","TransitionEnd")},Oh={},Og={};us&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function qi(t){if(Oh[t])return Oh[t];if(!Da[t])return t;var r=Da[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Og)return Oh[t]=r[a];return t}var kg=qi("animationend"),Mg=qi("animationiteration"),Pg=qi("animationstart"),XT=qi("transitionrun"),ZT=qi("transitionstart"),WT=qi("transitioncancel"),Vg=qi("transitionend"),Lg=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function ds(t,r){Lg.set(t,r),cs(r,[t])}var Ug=new WeakMap;function Zn(t,r){if(typeof t=="object"&&t!==null){var a=Ug.get(t);return a!==void 0?a:(r={value:t,source:r,stack:_a(r)},Ug.set(t,r),r)}return{value:t,source:r,stack:_a(r)}}var Wn=[],ja=0,Mh=0;function nu(){for(var t=ja,r=Mh=ja=0;r<t;){var a=Wn[r];Wn[r++]=null;var l=Wn[r];Wn[r++]=null;var d=Wn[r];Wn[r++]=null;var p=Wn[r];if(Wn[r++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}p!==0&&Bg(a,d,p)}}function su(t,r,a,l){Wn[ja++]=t,Wn[ja++]=r,Wn[ja++]=a,Wn[ja++]=l,Mh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ph(t,r,a,l){return su(t,r,a,l),ru(t)}function Oa(t,r){return su(t,null,null,r),ru(t)}function Bg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,p=t.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(d=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,d&&r!==null&&(d=31-_t(a),t=p.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),p):null}function ru(t){if(50<Cl)throw Cl=0,Hf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ka={};function JT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,r,a,l){return new JT(t,r,a,l)}function Vh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nr(t,r){var a=t.alternate;return a===null?(a=Vn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function zg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function iu(t,r,a,l,d,p){var b=0;if(l=t,typeof t=="function")Vh(t)&&(b=1);else if(typeof t=="string")b=tS(t,a,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Vn(31,a,r,d),t.elementType=I,t.lanes=p,t;case C:return Hi(a.children,d,p,r);case U:b=8,d|=24;break;case j:return t=Vn(12,a,r,d|2),t.elementType=j,t.lanes=p,t;case W:return t=Vn(13,a,r,d),t.elementType=W,t.lanes=p,t;case re:return t=Vn(19,a,r,d),t.elementType=re,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:case X:b=10;break e;case B:b=9;break e;case te:b=11;break e;case O:b=14;break e;case S:b=16,l=null;break e}b=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Vn(b,a,r,d),r.elementType=t,r.type=l,r.lanes=p,r}function Hi(t,r,a,l){return t=Vn(7,t,l,r),t.lanes=a,t}function Lh(t,r,a){return t=Vn(6,t,null,r),t.lanes=a,t}function Uh(t,r,a){return r=Vn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ma=[],Pa=0,au=null,ou=0,Jn=[],es=0,Fi=null,sr=1,rr="";function Gi(t,r){Ma[Pa++]=ou,Ma[Pa++]=au,au=t,ou=r}function qg(t,r,a){Jn[es++]=sr,Jn[es++]=rr,Jn[es++]=Fi,Fi=t;var l=sr;t=rr;var d=32-_t(l)-1;l&=~(1<<d),a+=1;var p=32-_t(r)+d;if(30<p){var b=d-d%5;p=(l&(1<<b)-1).toString(32),l>>=b,d-=b,sr=1<<32-_t(r)+d|a<<d|l,rr=p+t}else sr=1<<p|a<<d|l,rr=t}function Bh(t){t.return!==null&&(Gi(t,1),qg(t,1,0))}function zh(t){for(;t===au;)au=Ma[--Pa],Ma[Pa]=null,ou=Ma[--Pa],Ma[Pa]=null;for(;t===Fi;)Fi=Jn[--es],Jn[es]=null,rr=Jn[--es],Jn[es]=null,sr=Jn[--es],Jn[es]=null}var Tn=null,Dt=null,ot=!1,$i=null,js=!1,qh=Error(i(519));function Ki(t){var r=Error(i(418,""));throw ol(Zn(r,t)),qh}function Hg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[$t]=t,r[Ut]=l,a){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Ze(Dl[a],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":Ze("invalid",r),Di(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xa(r);break;case"select":Ze("invalid",r);break;case"textarea":Ze("invalid",r),ji(r,l.value,l.defaultValue,l.children),xa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||av(r.textContent,a)?(l.popover!=null&&(Ze("beforetoggle",r),Ze("toggle",r)),l.onScroll!=null&&Ze("scroll",r),l.onScrollEnd!=null&&Ze("scrollend",r),l.onClick!=null&&(r.onclick=zu),r=!0):r=!1,r||Ki(t)}function Fg(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:js=!1;return;case 27:case 3:js=!0;return;default:Tn=Tn.return}}function il(t){if(t!==Tn)return!1;if(!ot)return Fg(t),ot=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||im(t.type,t.memoizedProps)),a=!a),a&&Dt&&Ki(t),Fg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Dt=fs(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Dt=null}}else r===27?(r=Dt,Qr(t.type)?(t=cm,cm=null,Dt=t):Dt=r):Dt=Tn?fs(t.stateNode.nextSibling):null;return!0}function al(){Dt=Tn=null,ot=!1}function Gg(){var t=$i;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),$i=null),t}function ol(t){$i===null?$i=[t]:$i.push(t)}var Hh=ne(null),Qi=null,ir=null;function Or(t,r,a){k(Hh,r._currentValue),r._currentValue=a}function ar(t){t._currentValue=Hh.current,he(Hh)}function Fh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Gh(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var p=d.dependencies;if(p!==null){var b=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var V=0;V<r.length;V++)if(w.context===r[V]){p.lanes|=a,w=p.alternate,w!==null&&(w.lanes|=a),Fh(p.return,a,t),l||(b=null);break e}p=w.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),Fh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function ll(t,r,a,l){t=null;for(var d=r,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var w=d.type;Pn(d.pendingProps.value,b.value)||(t!==null?t.push(w):t=[w])}}else if(d===ie.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}d=d.return}t!==null&&Gh(r,t,a,l),r.flags|=262144}function lu(t){for(t=t.firstContext;t!==null;){if(!Pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Yi(t){Qi=t,ir=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return $g(Qi,t)}function cu(t,r){return Qi===null&&Yi(t),$g(t,r)}function $g(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ir===null){if(t===null)throw Error(i(308));ir=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ir=ir.next=r;return a}var ew=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},tw=s.unstable_scheduleCallback,nw=s.unstable_NormalPriority,Yt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $h(){return{controller:new ew,data:new Map,refCount:0}}function cl(t){t.refCount--,t.refCount===0&&tw(nw,function(){t.controller.abort()})}var ul=null,Kh=0,Va=0,La=null;function sw(t,r){if(ul===null){var a=ul=[];Kh=0,Va=Xf(),La={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kh++,r.then(Kg,Kg),r}function Kg(){if(--Kh===0&&ul!==null){La!==null&&(La.status="fulfilled");var t=ul;ul=null,Va=0,La=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function rw(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Qg=$.S;$.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&sw(t,r),Qg!==null&&Qg(t,r)};var Xi=ne(null);function Qh(){var t=Xi.current;return t!==null?t:Et.pooledCache}function uu(t,r){r===null?k(Xi,Xi.current):k(Xi,r.pool)}function Yg(){var t=Qh();return t===null?null:{parent:Yt._currentValue,pool:t}}var dl=Error(i(460)),Xg=Error(i(474)),du=Error(i(542)),Yh={then:function(){}};function Zg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hu(){}function Wg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(hu,hu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ey(t),t;default:if(typeof r.status=="string")r.then(hu,hu);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ey(t),t}throw hl=r,dl}}var hl=null;function Jg(){if(hl===null)throw Error(i(459));var t=hl;return hl=null,t}function ey(t){if(t===dl||t===du)throw Error(i(483))}var kr=!1;function Xh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Pr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ft&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=ru(t),Bg(t,null,a),r}return su(t,l,r,a),ru(t)}function fl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,zo(t,a)}}function Wh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?d=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Jh=!1;function ml(){if(Jh){var t=La;if(t!==null)throw t}}function pl(t,r,a,l){Jh=!1;var d=t.updateQueue;kr=!1;var p=d.firstBaseUpdate,b=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var V=w,Y=V.next;V.next=null,b===null?p=Y:b.next=Y,b=V;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==b&&(w===null?ae.firstBaseUpdate=Y:w.next=Y,ae.lastBaseUpdate=V))}if(p!==null){var le=d.baseState;b=0,ae=Y=V=null,w=p;do{var Z=w.lane&-536870913,J=Z!==w.lane;if(J?(st&Z)===Z:(l&Z)===Z){Z!==0&&Z===Va&&(Jh=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ve=t,De=w;Z=r;var vt=a;switch(De.tag){case 1:if(Ve=De.payload,typeof Ve=="function"){le=Ve.call(vt,le,Z);break e}le=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=De.payload,Z=typeof Ve=="function"?Ve.call(vt,le,Z):Ve,Z==null)break e;le=_({},le,Z);break e;case 2:kr=!0}}Z=w.callback,Z!==null&&(t.flags|=64,J&&(t.flags|=8192),J=d.callbacks,J===null?d.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(Y=ae=J,V=le):ae=ae.next=J,b|=Z;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;J=w,w=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ae===null&&(V=le),d.baseState=V,d.firstBaseUpdate=Y,d.lastBaseUpdate=ae,p===null&&(d.shared.lanes=0),Fr|=b,t.lanes=b,t.memoizedState=le}}function ty(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function ny(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ty(a[t],r)}var Ua=ne(null),fu=ne(0);function sy(t,r){t=fr,k(fu,t),k(Ua,r),fr=t|r.baseLanes}function ef(){k(fu,fr),k(Ua,Ua.current)}function tf(){fr=fu.current,he(Ua),he(fu)}var Vr=0,$e=null,gt=null,zt=null,mu=!1,Ba=!1,Zi=!1,pu=0,gl=0,za=null,iw=0;function Mt(){throw Error(i(321))}function nf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Pn(t[a],r[a]))return!1;return!0}function sf(t,r,a,l,d,p){return Vr=p,$e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?By:zy,Zi=!1,p=a(l,d),Zi=!1,Ba&&(p=iy(r,a,l,d)),ry(t),p}function ry(t){$.H=bu;var r=gt!==null&&gt.next!==null;if(Vr=0,zt=gt=$e=null,mu=!1,gl=0,za=null,r)throw Error(i(300));t===null||en||(t=t.dependencies,t!==null&&lu(t)&&(en=!0))}function iy(t,r,a,l){$e=t;var d=0;do{if(Ba&&(za=null),gl=0,Ba=!1,25<=d)throw Error(i(301));if(d+=1,zt=gt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=hw,p=r(a,l)}while(Ba);return p}function aw(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?yl(r):r,t=t.useState()[0],(gt!==null?gt.memoizedState:null)!==t&&($e.flags|=1024),r}function rf(){var t=pu!==0;return pu=0,t}function af(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function of(t){if(mu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mu=!1}Vr=0,zt=gt=$e=null,Ba=!1,gl=pu=0,za=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?$e.memoizedState=zt=t:zt=zt.next=t,zt}function qt(){if(gt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var r=zt===null?$e.memoizedState:zt.next;if(r!==null)zt=r,gt=t;else{if(t===null)throw $e.alternate===null?Error(i(467)):Error(i(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},zt===null?$e.memoizedState=zt=t:zt=zt.next=t}return zt}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var r=gl;return gl+=1,za===null&&(za=[]),t=Wg(za,t,r),r=$e,(zt===null?r.memoizedState:zt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?By:zy),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===X)return fn(t)}throw Error(i(438,String(t)))}function cf(t){var r=null,a=$e.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=$e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=lf(),$e.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=P;return r.index++,a}function or(t,r){return typeof r=="function"?r(t):r}function yu(t){var r=qt();return uf(r,gt,t)}function uf(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,p=l.pending;if(p!==null){if(d!==null){var b=d.next;d.next=p.next,p.next=b}r.baseQueue=d=p,l.pending=null}if(p=t.baseState,d===null)t.memoizedState=p;else{r=d.next;var w=b=null,V=null,Y=r,ae=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(st&le)===le:(Vr&le)===le){var Z=Y.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===Va&&(ae=!0);else if((Vr&Z)===Z){Y=Y.next,Z===Va&&(ae=!0);continue}else le={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=le,b=p):V=V.next=le,$e.lanes|=Z,Fr|=Z;le=Y.action,Zi&&a(p,le),p=Y.hasEagerState?Y.eagerState:a(p,le)}else Z={lane:le,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=Z,b=p):V=V.next=Z,$e.lanes|=le,Fr|=le;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?b=p:V.next=w,!Pn(p,t.memoizedState)&&(en=!0,ae&&(a=La,a!==null)))throw a;t.memoizedState=p,t.baseState=b,t.baseQueue=V,l.lastRenderedState=p}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function df(t){var r=qt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do p=t(p,b.action),b=b.next;while(b!==d);Pn(p,r.memoizedState)||(en=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function ay(t,r,a){var l=$e,d=qt(),p=ot;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=r();var b=!Pn((gt||d).memoizedState,a);b&&(d.memoizedState=a,en=!0),d=d.queue;var w=cy.bind(null,l,d,t);if(vl(2048,8,w,[t]),d.getSnapshot!==r||b||zt!==null&&zt.memoizedState.tag&1){if(l.flags|=2048,qa(9,vu(),ly.bind(null,l,d,a,r),null),Et===null)throw Error(i(349));p||(Vr&124)!==0||oy(l,r,a)}return a}function oy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=$e.updateQueue,r===null?(r=lf(),$e.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ly(t,r,a,l){r.value=a,r.getSnapshot=l,uy(r)&&dy(t)}function cy(t,r,a){return a(function(){uy(r)&&dy(t)})}function uy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Pn(t,a)}catch{return!0}}function dy(t){var r=Oa(t,2);r!==null&&qn(r,t,2)}function hf(t){var r=In();if(typeof t=="function"){var a=t;if(t=a(),Zi){it(!0);try{a()}finally{it(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:t},r}function hy(t,r,a,l){return t.baseState=a,uf(t,gt,typeof l=="function"?l:or)}function ow(t,r,a,l,d){if(xu(t))throw Error(i(485));if(t=r.action,t!==null){var p={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};$.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,fy(r,p)):(p.next=a.next,r.pending=a.next=p)}}function fy(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var p=$.T,b={};$.T=b;try{var w=a(d,l),V=$.S;V!==null&&V(b,w),my(t,r,w)}catch(Y){ff(t,r,Y)}finally{$.T=p}}else try{p=a(d,l),my(t,r,p)}catch(Y){ff(t,r,Y)}}function my(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){py(t,r,l)},function(l){return ff(t,r,l)}):py(t,r,a)}function py(t,r,a){r.status="fulfilled",r.value=a,gy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,fy(t,a)))}function ff(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,gy(r),r=r.next;while(r!==l)}t.action=null}function gy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function yy(t,r){return r}function vy(t,r){if(ot){var a=Et.formState;if(a!==null){e:{var l=$e;if(ot){if(Dt){t:{for(var d=Dt,p=js;d.nodeType!==8;){if(!p){d=null;break t}if(d=fs(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Dt=fs(d.nextSibling),l=d.data==="F!";break e}}Ki(l)}l=!1}l&&(r=a[0])}}return a=In(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yy,lastRenderedState:r},a.queue=l,a=Vy.bind(null,$e,l),l.dispatch=a,l=hf(!1),p=vf.bind(null,$e,!1,l.queue),l=In(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=ow.bind(null,$e,d,p,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function _y(t){var r=qt();return xy(r,gt,t)}function xy(t,r,a){if(r=uf(t,r,yy)[0],t=yu(or)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=yl(r)}catch(b){throw b===dl?du:b}else l=r;r=qt();var d=r.queue,p=d.dispatch;return a!==r.memoizedState&&($e.flags|=2048,qa(9,vu(),lw.bind(null,d,a),null)),[l,p,t]}function lw(t,r){t.action=r}function by(t){var r=qt(),a=gt;if(a!==null)return xy(r,a,t);qt(),r=r.memoizedState,a=qt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function qa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=$e.updateQueue,r===null&&(r=lf(),$e.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vu(){return{destroy:void 0,resource:void 0}}function Ey(){return qt().memoizedState}function _u(t,r,a,l){var d=In();l=l===void 0?null:l,$e.flags|=t,d.memoizedState=qa(1|r,vu(),a,l)}function vl(t,r,a,l){var d=qt();l=l===void 0?null:l;var p=d.memoizedState.inst;gt!==null&&l!==null&&nf(l,gt.memoizedState.deps)?d.memoizedState=qa(r,p,a,l):($e.flags|=t,d.memoizedState=qa(1|r,p,a,l))}function Ty(t,r){_u(8390656,8,t,r)}function wy(t,r){vl(2048,8,t,r)}function Sy(t,r){return vl(4,2,t,r)}function Ay(t,r){return vl(4,4,t,r)}function Ny(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ry(t,r,a){a=a!=null?a.concat([t]):null,vl(4,4,Ny.bind(null,r,t),a)}function mf(){}function Cy(t,r){var a=qt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&nf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Iy(t,r){var a=qt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&nf(r,l[1]))return l[0];if(l=t(),Zi){it(!0);try{t()}finally{it(!1)}}return a.memoizedState=[l,r],l}function pf(t,r,a){return a===void 0||(Vr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=O0(),$e.lanes|=t,Fr|=t,a)}function Dy(t,r,a,l){return Pn(a,r)?a:Ua.current!==null?(t=pf(t,a,l),Pn(t,r)||(en=!0),t):(Vr&42)===0?(en=!0,t.memoizedState=a):(t=O0(),$e.lanes|=t,Fr|=t,r)}function jy(t,r,a,l,d){var p=ee.p;ee.p=p!==0&&8>p?p:8;var b=$.T,w={};$.T=w,vf(t,!1,r,a);try{var V=d(),Y=$.S;if(Y!==null&&Y(w,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=rw(V,l);_l(t,r,ae,zn(t))}else _l(t,r,l,zn(t))}catch(le){_l(t,r,{then:function(){},status:"rejected",reason:le},zn())}finally{ee.p=p,$.T=b}}function cw(){}function gf(t,r,a,l){if(t.tag!==5)throw Error(i(476));var d=Oy(t).queue;jy(t,d,r,me,a===null?cw:function(){return ky(t),a(l)})}function Oy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:me},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ky(t){var r=Oy(t).next.queue;_l(t,r,{},zn())}function yf(){return fn(Vl)}function My(){return qt().memoizedState}function Py(){return qt().memoizedState}function uw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=zn();t=Mr(a);var l=Pr(r,t,a);l!==null&&(qn(l,r,a),fl(l,r,a)),r={cache:$h()},t.payload=r;return}r=r.return}}function dw(t,r,a){var l=zn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xu(t)?Ly(r,a):(a=Ph(t,r,a,l),a!==null&&(qn(a,t,l),Uy(a,r,l)))}function Vy(t,r,a){var l=zn();_l(t,r,a,l)}function _l(t,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(t))Ly(r,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var b=r.lastRenderedState,w=p(b,a);if(d.hasEagerState=!0,d.eagerState=w,Pn(w,b))return su(t,r,d,0),Et===null&&nu(),!1}catch{}finally{}if(a=Ph(t,r,d,l),a!==null)return qn(a,t,l),Uy(a,r,l),!0}return!1}function vf(t,r,a,l){if(l={lane:2,revertLane:Xf(),action:l,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(r)throw Error(i(479))}else r=Ph(t,a,l,2),r!==null&&qn(r,t,2)}function xu(t){var r=t.alternate;return t===$e||r!==null&&r===$e}function Ly(t,r){Ba=mu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Uy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,zo(t,a)}}var bu={readContext:fn,use:gu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},By={readContext:fn,use:gu,useCallback:function(t,r){return In().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:Ty,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_u(4194308,4,Ny.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _u(4194308,4,t,r)},useInsertionEffect:function(t,r){_u(4,2,t,r)},useMemo:function(t,r){var a=In();r=r===void 0?null:r;var l=t();if(Zi){it(!0);try{t()}finally{it(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=In();if(a!==void 0){var d=a(r);if(Zi){it(!0);try{a(r)}finally{it(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=dw.bind(null,$e,t),[l.memoizedState,t]},useRef:function(t){var r=In();return t={current:t},r.memoizedState=t},useState:function(t){t=hf(t);var r=t.queue,a=Vy.bind(null,$e,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:mf,useDeferredValue:function(t,r){var a=In();return pf(a,t,r)},useTransition:function(){var t=hf(!1);return t=jy.bind(null,$e,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=$e,d=In();if(ot){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),Et===null)throw Error(i(349));(st&124)!==0||oy(l,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Ty(cy.bind(null,l,p,t),[t]),l.flags|=2048,qa(9,vu(),ly.bind(null,l,p,a,r),null),a},useId:function(){var t=In(),r=Et.identifierPrefix;if(ot){var a=rr,l=sr;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,r=""+r+"R"+a,a=pu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=iw++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:yf,useFormState:vy,useActionState:vy,useOptimistic:function(t){var r=In();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=vf.bind(null,$e,!0,a),a.dispatch=r,[t,r]},useMemoCache:cf,useCacheRefresh:function(){return In().memoizedState=uw.bind(null,$e)}},zy={readContext:fn,use:gu,useCallback:Cy,useContext:fn,useEffect:wy,useImperativeHandle:Ry,useInsertionEffect:Sy,useLayoutEffect:Ay,useMemo:Iy,useReducer:yu,useRef:Ey,useState:function(){return yu(or)},useDebugValue:mf,useDeferredValue:function(t,r){var a=qt();return Dy(a,gt.memoizedState,t,r)},useTransition:function(){var t=yu(or)[0],r=qt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:ay,useId:My,useHostTransitionStatus:yf,useFormState:_y,useActionState:_y,useOptimistic:function(t,r){var a=qt();return hy(a,gt,t,r)},useMemoCache:cf,useCacheRefresh:Py},hw={readContext:fn,use:gu,useCallback:Cy,useContext:fn,useEffect:wy,useImperativeHandle:Ry,useInsertionEffect:Sy,useLayoutEffect:Ay,useMemo:Iy,useReducer:df,useRef:Ey,useState:function(){return df(or)},useDebugValue:mf,useDeferredValue:function(t,r){var a=qt();return gt===null?pf(a,t,r):Dy(a,gt.memoizedState,t,r)},useTransition:function(){var t=df(or)[0],r=qt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:ay,useId:My,useHostTransitionStatus:yf,useFormState:by,useActionState:by,useOptimistic:function(t,r){var a=qt();return gt!==null?hy(a,gt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:cf,useCacheRefresh:Py},Ha=null,xl=0;function Eu(t){var r=xl;return xl+=1,Ha===null&&(Ha=[]),Wg(Ha,t,r)}function bl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Tu(t,r){throw r.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function qy(t){var r=t._init;return r(t._payload)}function Hy(t){function r(F,H){if(t){var K=F.deletions;K===null?(F.deletions=[H],F.flags|=16):K.push(H)}}function a(F,H){if(!t)return null;for(;H!==null;)r(F,H),H=H.sibling;return null}function l(F){for(var H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function d(F,H){return F=nr(F,H),F.index=0,F.sibling=null,F}function p(F,H,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<H?(F.flags|=67108866,H):K):(F.flags|=67108866,H)):(F.flags|=1048576,H)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function w(F,H,K,oe){return H===null||H.tag!==6?(H=Lh(K,F.mode,oe),H.return=F,H):(H=d(H,K),H.return=F,H)}function V(F,H,K,oe){var Ne=K.type;return Ne===C?ae(F,H,K.props.children,oe,K.key):H!==null&&(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&qy(Ne)===H.type)?(H=d(H,K.props),bl(H,K),H.return=F,H):(H=iu(K.type,K.key,K.props,null,F.mode,oe),bl(H,K),H.return=F,H)}function Y(F,H,K,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=Uh(K,F.mode,oe),H.return=F,H):(H=d(H,K.children||[]),H.return=F,H)}function ae(F,H,K,oe,Ne){return H===null||H.tag!==7?(H=Hi(K,F.mode,oe,Ne),H.return=F,H):(H=d(H,K),H.return=F,H)}function le(F,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Lh(""+H,F.mode,K),H.return=F,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return K=iu(H.type,H.key,H.props,null,F.mode,K),bl(K,H),K.return=F,K;case D:return H=Uh(H,F.mode,K),H.return=F,H;case S:var oe=H._init;return H=oe(H._payload),le(F,H,K)}if(_e(H)||q(H))return H=Hi(H,F.mode,K,null),H.return=F,H;if(typeof H.then=="function")return le(F,Eu(H),K);if(H.$$typeof===X)return le(F,cu(F,H),K);Tu(F,H)}return null}function Z(F,H,K,oe){var Ne=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ne!==null?null:w(F,H,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return K.key===Ne?V(F,H,K,oe):null;case D:return K.key===Ne?Y(F,H,K,oe):null;case S:return Ne=K._init,K=Ne(K._payload),Z(F,H,K,oe)}if(_e(K)||q(K))return Ne!==null?null:ae(F,H,K,oe,null);if(typeof K.then=="function")return Z(F,H,Eu(K),oe);if(K.$$typeof===X)return Z(F,H,cu(F,K),oe);Tu(F,K)}return null}function J(F,H,K,oe,Ne){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(K)||null,w(H,F,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case E:return F=F.get(oe.key===null?K:oe.key)||null,V(H,F,oe,Ne);case D:return F=F.get(oe.key===null?K:oe.key)||null,Y(H,F,oe,Ne);case S:var Qe=oe._init;return oe=Qe(oe._payload),J(F,H,K,oe,Ne)}if(_e(oe)||q(oe))return F=F.get(K)||null,ae(H,F,oe,Ne,null);if(typeof oe.then=="function")return J(F,H,K,Eu(oe),Ne);if(oe.$$typeof===X)return J(F,H,K,cu(H,oe),Ne);Tu(H,oe)}return null}function Ve(F,H,K,oe){for(var Ne=null,Qe=null,Re=H,Oe=H=0,nn=null;Re!==null&&Oe<K.length;Oe++){Re.index>Oe?(nn=Re,Re=null):nn=Re.sibling;var at=Z(F,Re,K[Oe],oe);if(at===null){Re===null&&(Re=nn);break}t&&Re&&at.alternate===null&&r(F,Re),H=p(at,H,Oe),Qe===null?Ne=at:Qe.sibling=at,Qe=at,Re=nn}if(Oe===K.length)return a(F,Re),ot&&Gi(F,Oe),Ne;if(Re===null){for(;Oe<K.length;Oe++)Re=le(F,K[Oe],oe),Re!==null&&(H=p(Re,H,Oe),Qe===null?Ne=Re:Qe.sibling=Re,Qe=Re);return ot&&Gi(F,Oe),Ne}for(Re=l(Re);Oe<K.length;Oe++)nn=J(Re,F,Oe,K[Oe],oe),nn!==null&&(t&&nn.alternate!==null&&Re.delete(nn.key===null?Oe:nn.key),H=p(nn,H,Oe),Qe===null?Ne=nn:Qe.sibling=nn,Qe=nn);return t&&Re.forEach(function(Jr){return r(F,Jr)}),ot&&Gi(F,Oe),Ne}function De(F,H,K,oe){if(K==null)throw Error(i(151));for(var Ne=null,Qe=null,Re=H,Oe=H=0,nn=null,at=K.next();Re!==null&&!at.done;Oe++,at=K.next()){Re.index>Oe?(nn=Re,Re=null):nn=Re.sibling;var Jr=Z(F,Re,at.value,oe);if(Jr===null){Re===null&&(Re=nn);break}t&&Re&&Jr.alternate===null&&r(F,Re),H=p(Jr,H,Oe),Qe===null?Ne=Jr:Qe.sibling=Jr,Qe=Jr,Re=nn}if(at.done)return a(F,Re),ot&&Gi(F,Oe),Ne;if(Re===null){for(;!at.done;Oe++,at=K.next())at=le(F,at.value,oe),at!==null&&(H=p(at,H,Oe),Qe===null?Ne=at:Qe.sibling=at,Qe=at);return ot&&Gi(F,Oe),Ne}for(Re=l(Re);!at.done;Oe++,at=K.next())at=J(Re,F,Oe,at.value,oe),at!==null&&(t&&at.alternate!==null&&Re.delete(at.key===null?Oe:at.key),H=p(at,H,Oe),Qe===null?Ne=at:Qe.sibling=at,Qe=at);return t&&Re.forEach(function(fS){return r(F,fS)}),ot&&Gi(F,Oe),Ne}function vt(F,H,K,oe){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case E:e:{for(var Ne=K.key;H!==null;){if(H.key===Ne){if(Ne=K.type,Ne===C){if(H.tag===7){a(F,H.sibling),oe=d(H,K.props.children),oe.return=F,F=oe;break e}}else if(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&qy(Ne)===H.type){a(F,H.sibling),oe=d(H,K.props),bl(oe,K),oe.return=F,F=oe;break e}a(F,H);break}else r(F,H);H=H.sibling}K.type===C?(oe=Hi(K.props.children,F.mode,oe,K.key),oe.return=F,F=oe):(oe=iu(K.type,K.key,K.props,null,F.mode,oe),bl(oe,K),oe.return=F,F=oe)}return b(F);case D:e:{for(Ne=K.key;H!==null;){if(H.key===Ne)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){a(F,H.sibling),oe=d(H,K.children||[]),oe.return=F,F=oe;break e}else{a(F,H);break}else r(F,H);H=H.sibling}oe=Uh(K,F.mode,oe),oe.return=F,F=oe}return b(F);case S:return Ne=K._init,K=Ne(K._payload),vt(F,H,K,oe)}if(_e(K))return Ve(F,H,K,oe);if(q(K)){if(Ne=q(K),typeof Ne!="function")throw Error(i(150));return K=Ne.call(K),De(F,H,K,oe)}if(typeof K.then=="function")return vt(F,H,Eu(K),oe);if(K.$$typeof===X)return vt(F,H,cu(F,K),oe);Tu(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(a(F,H.sibling),oe=d(H,K),oe.return=F,F=oe):(a(F,H),oe=Lh(K,F.mode,oe),oe.return=F,F=oe),b(F)):a(F,H)}return function(F,H,K,oe){try{xl=0;var Ne=vt(F,H,K,oe);return Ha=null,Ne}catch(Re){if(Re===dl||Re===du)throw Re;var Qe=Vn(29,Re,null,F.mode);return Qe.lanes=oe,Qe.return=F,Qe}finally{}}}var Fa=Hy(!0),Fy=Hy(!1),ts=ne(null),Os=null;function Lr(t){var r=t.alternate;k(Xt,Xt.current&1),k(ts,t),Os===null&&(r===null||Ua.current!==null||r.memoizedState!==null)&&(Os=t)}function Gy(t){if(t.tag===22){if(k(Xt,Xt.current),k(ts,t),Os===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Os=t)}}else Ur()}function Ur(){k(Xt,Xt.current),k(ts,ts.current)}function lr(t){he(ts),Os===t&&(Os=null),he(Xt)}var Xt=ne(0);function wu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _f(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var xf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=zn(),d=Mr(l);d.payload=r,a!=null&&(d.callback=a),r=Pr(t,d,l),r!==null&&(qn(r,t,l),fl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=zn(),d=Mr(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Pr(t,d,l),r!==null&&(qn(r,t,l),fl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=zn(),l=Mr(a);l.tag=2,r!=null&&(l.callback=r),r=Pr(t,l,a),r!==null&&(qn(r,t,a),fl(r,t,a))}};function $y(t,r,a,l,d,p,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,b):r.prototype&&r.prototype.isPureReactComponent?!sl(a,l)||!sl(d,p):!0}function Ky(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&xf.enqueueReplaceState(r,r.state,null)}function Wi(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Su=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Qy(t){Su(t)}function Yy(t){console.error(t)}function Xy(t){Su(t)}function Au(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function bf(t,r,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,r)},a}function Wy(t){return t=Mr(t),t.tag=3,t}function Jy(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var p=l.value;t.payload=function(){return d(p)},t.callback=function(){Zy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Zy(r,a,l),typeof d!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function fw(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ll(r,a,d,!0),a=ts.current,a!==null){switch(a.tag){case 13:return Os===null?Gf():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Yh?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Kf(t,l,d)),!1;case 22:return a.flags|=65536,l===Yh?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Kf(t,l,d)),!1}throw Error(i(435,a.tag))}return Kf(t,l,d),Gf(),!1}if(ot)return r=ts.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==qh&&(t=Error(i(422),{cause:l}),ol(Zn(t,a)))):(l!==qh&&(r=Error(i(423),{cause:l}),ol(Zn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Zn(l,a),d=bf(t.stateNode,l,d),Wh(t,d),jt!==4&&(jt=2)),!1;var p=Error(i(520),{cause:l});if(p=Zn(p,a),Rl===null?Rl=[p]:Rl.push(p),jt!==4&&(jt=2),r===null)return!0;l=Zn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=bf(a.stateNode,l,t),Wh(a,t),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gr===null||!Gr.has(p))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Wy(d),Jy(d,t,a,l),Wh(a,d),!1}a=a.return}while(a!==null);return!1}var e0=Error(i(461)),en=!1;function on(t,r,a,l){r.child=t===null?Fy(r,null,a,l):Fa(r,t.child,a,l)}function t0(t,r,a,l,d){a=a.render;var p=r.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return Yi(r),l=sf(t,r,a,b,p,d),w=rf(),t!==null&&!en?(af(t,r,d),cr(t,r,d)):(ot&&w&&Bh(r),r.flags|=1,on(t,r,l,d),r.child)}function n0(t,r,a,l,d){if(t===null){var p=a.type;return typeof p=="function"&&!Vh(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,s0(t,r,p,l,d)):(t=iu(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!Cf(t,d)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(b,l)&&t.ref===r.ref)return cr(t,r,d)}return r.flags|=1,t=nr(p,l),t.ref=r.ref,t.return=r,r.child=t}function s0(t,r,a,l,d){if(t!==null){var p=t.memoizedProps;if(sl(p,l)&&t.ref===r.ref)if(en=!1,r.pendingProps=l=p,Cf(t,d))(t.flags&131072)!==0&&(en=!0);else return r.lanes=t.lanes,cr(t,r,d)}return Ef(t,r,a,l,d)}function r0(t,r,a){var l=r.pendingProps,d=l.children,p=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,t!==null){for(d=r.child=t.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;r.childLanes=p&~l}else r.childLanes=0,r.child=null;return i0(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uu(r,p!==null?p.cachePool:null),p!==null?sy(r,p):ef(),Gy(r);else return r.lanes=r.childLanes=536870912,i0(t,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(uu(r,p.cachePool),sy(r,p),Ur(),r.memoizedState=null):(t!==null&&uu(r,null),ef(),Ur());return on(t,r,d,a),r.child}function i0(t,r,a,l){var d=Qh();return d=d===null?null:{parent:Yt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&uu(r,null),ef(),Gy(r),t!==null&&ll(t,r,l,!0),null}function Nu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,d){return Yi(r),a=sf(t,r,a,l,void 0,d),l=rf(),t!==null&&!en?(af(t,r,d),cr(t,r,d)):(ot&&l&&Bh(r),r.flags|=1,on(t,r,a,d),r.child)}function a0(t,r,a,l,d,p){return Yi(r),r.updateQueue=null,a=iy(r,l,a,d),ry(t),l=rf(),t!==null&&!en?(af(t,r,p),cr(t,r,p)):(ot&&l&&Bh(r),r.flags|=1,on(t,r,a,p),r.child)}function o0(t,r,a,l,d){if(Yi(r),r.stateNode===null){var p=ka,b=a.contextType;typeof b=="object"&&b!==null&&(p=fn(b)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=xf,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},Xh(r),b=a.contextType,p.context=typeof b=="object"&&b!==null?fn(b):ka,p.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(_f(r,a,b,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&xf.enqueueReplaceState(p,p.state,null),pl(r,l,p,d),ml(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){p=r.stateNode;var w=r.memoizedProps,V=Wi(a,w);p.props=V;var Y=p.context,ae=a.contextType;b=ka,typeof ae=="object"&&ae!==null&&(b=fn(ae));var le=a.getDerivedStateFromProps;ae=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,ae||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||Y!==b)&&Ky(r,p,l,b),kr=!1;var Z=r.memoizedState;p.state=Z,pl(r,l,p,d),ml(),Y=r.memoizedState,w||Z!==Y||kr?(typeof le=="function"&&(_f(r,a,le,l),Y=r.memoizedState),(V=kr||$y(r,a,V,l,Z,Y,b))?(ae||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Y),p.props=l,p.state=Y,p.context=b,l=V):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,Zh(t,r),b=r.memoizedProps,ae=Wi(a,b),p.props=ae,le=r.pendingProps,Z=p.context,Y=a.contextType,V=ka,typeof Y=="object"&&Y!==null&&(V=fn(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==le||Z!==V)&&Ky(r,p,l,V),kr=!1,Z=r.memoizedState,p.state=Z,pl(r,l,p,d),ml();var J=r.memoizedState;b!==le||Z!==J||kr||t!==null&&t.dependencies!==null&&lu(t.dependencies)?(typeof w=="function"&&(_f(r,a,w,l),J=r.memoizedState),(ae=kr||$y(r,a,ae,l,Z,J,V)||t!==null&&t.dependencies!==null&&lu(t.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,J,V),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,J,V)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=J),p.props=l,p.state=J,p.context=V,l=ae):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),l=!1)}return p=l,Nu(t,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,t!==null&&l?(r.child=Fa(r,t.child,null,d),r.child=Fa(r,null,a,d)):on(t,r,a,d),r.memoizedState=p.state,t=r.child):t=cr(t,r,d),t}function l0(t,r,a,l){return al(),r.flags|=256,on(t,r,a,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wf(t){return{baseLanes:t,cachePool:Yg()}}function Sf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=ns),t}function c0(t,r,a){var l=r.pendingProps,d=!1,p=(r.flags&128)!==0,b;if((b=p)||(b=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(ot){if(d?Lr(r):Ur(),ot){var w=Dt,V;if(V=w){e:{for(V=w,w=js;V.nodeType!==8;){if(!w){w=null;break e}if(V=fs(V.nextSibling),V===null){w=null;break e}}w=V}w!==null?(r.memoizedState={dehydrated:w,treeContext:Fi!==null?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},V=Vn(18,null,null,0),V.stateNode=w,V.return=r,r.child=V,Tn=r,Dt=null,V=!0):V=!1}V||Ki(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return lm(w)?r.lanes=32:r.lanes=536870912,null;lr(r)}return w=l.children,l=l.fallback,d?(Ur(),d=r.mode,w=Ru({mode:"hidden",children:w},d),l=Hi(l,d,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,d=r.child,d.memoizedState=wf(a),d.childLanes=Sf(t,b,a),r.memoizedState=Tf,l):(Lr(r),Af(r,w))}if(V=t.memoizedState,V!==null&&(w=V.dehydrated,w!==null)){if(p)r.flags&256?(Lr(r),r.flags&=-257,r=Nf(t,r,a)):r.memoizedState!==null?(Ur(),r.child=t.child,r.flags|=128,r=null):(Ur(),d=l.fallback,w=r.mode,l=Ru({mode:"visible",children:l.children},w),d=Hi(d,w,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,Fa(r,t.child,null,a),l=r.child,l.memoizedState=wf(a),l.childLanes=Sf(t,b,a),r.memoizedState=Tf,r=d);else if(Lr(r),lm(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var Y=b.dgst;b=Y,l=Error(i(419)),l.stack="",l.digest=b,ol({value:l,source:null,stack:null}),r=Nf(t,r,a)}else if(en||ll(t,r,a,!1),b=(a&t.childLanes)!==0,en||b){if(b=Et,b!==null&&(l=a&-a,l=(l&42)!==0?1:Ar(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Oa(t,l),qn(b,t,l),e0;w.data==="$?"||Gf(),r=Nf(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,Dt=fs(w.nextSibling),Tn=r,ot=!0,$i=null,js=!1,t!==null&&(Jn[es++]=sr,Jn[es++]=rr,Jn[es++]=Fi,sr=t.id,rr=t.overflow,Fi=r),r=Af(r,l.children),r.flags|=4096);return r}return d?(Ur(),d=l.fallback,w=r.mode,V=t.child,Y=V.sibling,l=nr(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,Y!==null?d=nr(Y,d):(d=Hi(d,w,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,w=t.child.memoizedState,w===null?w=wf(a):(V=w.cachePool,V!==null?(Y=Yt._currentValue,V=V.parent!==Y?{parent:Y,pool:Y}:V):V=Yg(),w={baseLanes:w.baseLanes|a,cachePool:V}),d.memoizedState=w,d.childLanes=Sf(t,b,a),r.memoizedState=Tf,l):(Lr(r),a=t.child,t=a.sibling,a=nr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Af(t,r){return r=Ru({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ru(t,r){return t=Vn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,r,a){return Fa(r,t.child,null,a),t=Af(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function u0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Fh(t.return,r,a)}function Rf(t,r,a,l,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=d)}function d0(t,r,a){var l=r.pendingProps,d=l.revealOrder,p=l.tail;if(on(t,r,l.children,a),l=Xt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u0(t,a,r);else if(t.tag===19)u0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(k(Xt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&wu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Rf(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&wu(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Rf(r,!0,a,null,p);break;case"together":Rf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function cr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Fr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ll(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=nr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=nr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Cf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lu(t)))}function mw(t,r,a){switch(r.tag){case 3:ue(r,r.stateNode.containerInfo),Or(r,Yt,t.memoizedState.cache),al();break;case 27:case 5:ye(r);break;case 4:ue(r,r.stateNode.containerInfo);break;case 10:Or(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Lr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?c0(t,r,a):(Lr(r),t=cr(t,r,a),t!==null?t.sibling:null);Lr(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ll(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return d0(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),k(Xt,Xt.current),l)break;return null;case 22:case 23:return r.lanes=0,r0(t,r,a);case 24:Or(r,Yt,t.memoizedState.cache)}return cr(t,r,a)}function h0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)en=!0;else{if(!Cf(t,a)&&(r.flags&128)===0)return en=!1,mw(t,r,a);en=(t.flags&131072)!==0}else en=!1,ot&&(r.flags&1048576)!==0&&qg(r,ou,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")Vh(l)?(t=Wi(l,t),r.tag=1,r=o0(null,r,l,t,a)):(r.tag=0,r=Ef(null,r,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===te){r.tag=11,r=t0(null,r,l,t,a);break e}else if(d===O){r.tag=14,r=n0(null,r,l,t,a);break e}}throw r=ve(l)||l,Error(i(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=Wi(l,r.pendingProps),o0(t,r,l,d,a);case 3:e:{if(ue(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var p=r.memoizedState;d=p.element,Zh(t,r),pl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Or(r,Yt,l),l!==p.cache&&Gh(r,[Yt],a,!0),ml(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=l0(t,r,l,a);break e}else if(l!==d){d=Zn(Error(i(424)),r),ol(d),r=l0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Dt=fs(t.firstChild),Tn=r,ot=!0,$i=null,js=!0,a=Fy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(al(),l===d){r=cr(t,r,a);break e}on(t,r,l,a)}r=r.child}return r;case 26:return Nu(t,r),t===null?(a=gv(r.type,null,r.pendingProps,null))?r.memoizedState=a:ot||(a=r.type,t=r.pendingProps,l=qu(pe.current).createElement(a),l[$t]=r,l[Ut]=t,cn(l,a,t),kt(l),r.stateNode=l):r.memoizedState=gv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ye(r),t===null&&ot&&(l=r.stateNode=fv(r.type,r.pendingProps,pe.current),Tn=r,js=!0,d=Dt,Qr(r.type)?(cm=d,Dt=fs(l.firstChild)):Dt=d),on(t,r,r.pendingProps.children,a),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&ot&&((d=l=Dt)&&(l=qw(l,r.type,r.pendingProps,js),l!==null?(r.stateNode=l,Tn=r,Dt=fs(l.firstChild),js=!1,d=!0):d=!1),d||Ki(r)),ye(r),d=r.type,p=r.pendingProps,b=t!==null?t.memoizedProps:null,l=p.children,im(d,p)?l=null:b!==null&&im(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=sf(t,r,aw,null,null,a),Vl._currentValue=d),Nu(t,r),on(t,r,l,a),r.child;case 6:return t===null&&ot&&((t=a=Dt)&&(a=Hw(a,r.pendingProps,js),a!==null?(r.stateNode=a,Tn=r,Dt=null,t=!0):t=!1),t||Ki(r)),null;case 13:return c0(t,r,a);case 4:return ue(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Fa(r,null,l,a):on(t,r,l,a),r.child;case 11:return t0(t,r,r.type,r.pendingProps,a);case 7:return on(t,r,r.pendingProps,a),r.child;case 8:return on(t,r,r.pendingProps.children,a),r.child;case 12:return on(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Or(r,r.type,l.value),on(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Yi(r),d=fn(d),l=l(d),r.flags|=1,on(t,r,l,a),r.child;case 14:return n0(t,r,r.type,r.pendingProps,a);case 15:return s0(t,r,r.type,r.pendingProps,a);case 19:return d0(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ru(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=nr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return r0(t,r,a);case 24:return Yi(r),l=fn(Yt),t===null?(d=Qh(),d===null&&(d=Et,p=$h(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=a),d=p),r.memoizedState={parent:l,cache:d},Xh(r),Or(r,Yt,d)):((t.lanes&a)!==0&&(Zh(t,r),pl(r,null,null,a),ml()),d=t.memoizedState,p=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Or(r,Yt,l)):(l=p.cache,Or(r,Yt,l),l!==d.cache&&Gh(r,[Yt],a,!0))),on(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ur(t){t.flags|=4}function f0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!bv(r)){if(r=ts.current,r!==null&&((st&4194048)===st?Os!==null:(st&62914560)!==st&&(st&536870912)===0||r!==Os))throw hl=Yh,Xg;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Uo():536870912,t.lanes|=r,Qa|=r)}function El(t,r){if(!ot)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Rt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function pw(t,r,a){var l=r.pendingProps;switch(zh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(r),null;case 1:return Rt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ar(Yt),xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(il(r)?ur(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gg())),Rt(r),null;case 26:return a=r.memoizedState,t===null?(ur(r),a!==null?(Rt(r),f0(r,a)):(Rt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ur(r),Rt(r),f0(r,a)):(Rt(r),r.flags&=-16777217):(t.memoizedProps!==l&&ur(r),Rt(r),r.flags&=-16777217),null;case 27:Te(r),a=pe.current;var d=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Rt(r),null}t=Q.current,il(r)?Hg(r):(t=fv(d,l,a),r.stateNode=t,ur(r))}return Rt(r),null;case 5:if(Te(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Rt(r),null}if(t=Q.current,il(r))Hg(r);else{switch(d=qu(pe.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[$t]=r,t[Ut]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=t;e:switch(cn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ur(r)}}return Rt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=pe.current,il(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Tn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[$t]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||av(t.nodeValue,a)),t||Ki(r)}else t=qu(t).createTextNode(l),t[$t]=r,r.stateNode=t}return Rt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=il(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[$t]=r}else al(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Rt(r),d=!1}else d=Gg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(lr(r),r):(lr(r),null)}if(lr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Cu(r,r.updateQueue),Rt(r),null;case 4:return xe(),t===null&&em(r.stateNode.containerInfo),Rt(r),null;case 10:return ar(r.type),Rt(r),null;case 19:if(he(Xt),d=r.memoizedState,d===null)return Rt(r),null;if(l=(r.flags&128)!==0,p=d.rendering,p===null)if(l)El(d,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(p=wu(t),p!==null){for(r.flags|=128,El(d,!1),t=p.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)zg(a,t),a=a.sibling;return k(Xt,Xt.current&1|2),r.child}t=t.sibling}d.tail!==null&&Ye()>ju&&(r.flags|=128,l=!0,El(d,!1),r.lanes=4194304)}else{if(!l)if(t=wu(p),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),El(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!ot)return Rt(r),null}else 2*Ye()-d.renderingStartTime>ju&&a!==536870912&&(r.flags|=128,l=!0,El(d,!1),r.lanes=4194304);d.isBackwards?(p.sibling=r.child,r.child=p):(t=d.last,t!==null?t.sibling=p:r.child=p,d.last=p)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ye(),r.sibling=null,t=Xt.current,k(Xt,l?t&1|2:t&1),r):(Rt(r),null);case 22:case 23:return lr(r),tf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Rt(r),r.subtreeFlags&6&&(r.flags|=8192)):Rt(r),a=r.updateQueue,a!==null&&Cu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&he(Xi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ar(Yt),Rt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function gw(t,r){switch(zh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ar(Yt),xe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Te(r),null;case 13:if(lr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));al()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return he(Xt),null;case 4:return xe(),null;case 10:return ar(r.type),null;case 22:case 23:return lr(r),tf(),t!==null&&he(Xi),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ar(Yt),null;case 25:return null;default:return null}}function m0(t,r){switch(zh(r),r.tag){case 3:ar(Yt),xe();break;case 26:case 27:case 5:Te(r);break;case 4:xe();break;case 13:lr(r);break;case 19:he(Xt);break;case 10:ar(r.type);break;case 22:case 23:lr(r),tf(),t!==null&&he(Xi);break;case 24:ar(Yt)}}function Tl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var p=a.create,b=a.inst;l=p(),b.destroy=l}a=a.next}while(a!==d)}}catch(w){xt(r,r.return,w)}}function Br(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&t)===t){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,d=r;var V=a,Y=w;try{Y()}catch(ae){xt(d,V,ae)}}}l=l.next}while(l!==p)}}catch(ae){xt(r,r.return,ae)}}function p0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ny(r,a)}catch(l){xt(t,t.return,l)}}}function g0(t,r,a){a.props=Wi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){xt(t,r,l)}}function wl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){xt(t,r,d)}}function ks(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){xt(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){xt(t,r,d)}else a.current=null}function y0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){xt(t,t.return,d)}}function If(t,r,a){try{var l=t.stateNode;Vw(l,t.type,a,r),l[Ut]=r}catch(d){xt(t,t.return,d)}}function v0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=zu));else if(l!==4&&(l===27&&Qr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(jf(t,r,a),t=t.sibling;t!==null;)jf(t,r,a),t=t.sibling}function Iu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Qr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,r,a),t=t.sibling;t!==null;)Iu(t,r,a),t=t.sibling}function _0(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);cn(r,l,a),r[$t]=t,r[Ut]=a}catch(p){xt(t,t.return,p)}}var dr=!1,Pt=!1,Of=!1,x0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function yw(t,r){if(t=t.containerInfo,sm=Qu,t=Dg(t),Ih(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var b=0,w=-1,V=-1,Y=0,ae=0,le=t,Z=null;t:for(;;){for(var J;le!==a||d!==0&&le.nodeType!==3||(w=b+d),le!==p||l!==0&&le.nodeType!==3||(V=b+l),le.nodeType===3&&(b+=le.nodeValue.length),(J=le.firstChild)!==null;)Z=le,le=J;for(;;){if(le===t)break t;if(Z===a&&++Y===d&&(w=b),Z===p&&++ae===l&&(V=b),(J=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=J}a=w===-1||V===-1?null:{start:w,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Qu=!1,tn=r;tn!==null;)if(r=tn,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,tn=t;else for(;tn!==null;){switch(r=tn,p=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=r,d=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Ve=Wi(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ve,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){xt(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,tn=t;break}tn=r.return}}function b0(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:zr(t,a),l&4&&Tl(5,a);break;case 1:if(zr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){xt(a,a.return,b)}else{var d=Wi(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){xt(a,a.return,b)}}l&64&&p0(a),l&512&&wl(a,a.return);break;case 3:if(zr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ny(t,r)}catch(b){xt(a,a.return,b)}}break;case 27:r===null&&l&4&&_0(a);case 26:case 5:zr(t,a),r===null&&l&4&&y0(a),l&512&&wl(a,a.return);break;case 12:zr(t,a);break;case 13:zr(t,a),l&4&&w0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Aw.bind(null,a),Fw(t,a))));break;case 22:if(l=a.memoizedState!==null||dr,!l){r=r!==null&&r.memoizedState!==null||Pt,d=dr;var p=Pt;dr=l,(Pt=r)&&!p?qr(t,a,(a.subtreeFlags&8772)!==0):zr(t,a),dr=d,Pt=p}break;case 30:break;default:zr(t,a)}}function E0(t){var r=t.alternate;r!==null&&(t.alternate=null,E0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Cr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var At=null,Dn=!1;function hr(t,r,a){for(a=a.child;a!==null;)T0(t,r,a),a=a.sibling}function T0(t,r,a){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Le,a)}catch{}switch(a.tag){case 26:Pt||ks(a,r),hr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||ks(a,r);var l=At,d=Dn;Qr(a.type)&&(At=a.stateNode,Dn=!1),hr(t,r,a),Ol(a.stateNode),At=l,Dn=d;break;case 5:Pt||ks(a,r);case 6:if(l=At,d=Dn,At=null,hr(t,r,a),At=l,Dn=d,At!==null)if(Dn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(a.stateNode)}catch(p){xt(a,r,p)}else try{At.removeChild(a.stateNode)}catch(p){xt(a,r,p)}break;case 18:At!==null&&(Dn?(t=At,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),zl(t)):dv(At,a.stateNode));break;case 4:l=At,d=Dn,At=a.stateNode.containerInfo,Dn=!0,hr(t,r,a),At=l,Dn=d;break;case 0:case 11:case 14:case 15:Pt||Br(2,a,r),Pt||Br(4,a,r),hr(t,r,a);break;case 1:Pt||(ks(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&g0(a,r,l)),hr(t,r,a);break;case 21:hr(t,r,a);break;case 22:Pt=(l=Pt)||a.memoizedState!==null,hr(t,r,a),Pt=l;break;default:hr(t,r,a)}}function w0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(a){xt(r,r.return,a)}}function vw(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new x0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new x0),r;default:throw Error(i(435,t.tag))}}function kf(t,r){var a=vw(t);r.forEach(function(l){var d=Nw.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function Ln(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],p=t,b=r,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Qr(w.type)){At=w.stateNode,Dn=!1;break e}break;case 5:At=w.stateNode,Dn=!1;break e;case 3:case 4:At=w.stateNode.containerInfo,Dn=!0;break e}w=w.return}if(At===null)throw Error(i(160));T0(p,b,d),At=null,Dn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)S0(r,t),r=r.sibling}var hs=null;function S0(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(r,t),Un(t),l&4&&(Br(3,t,t.return),Tl(3,t),Br(5,t,t.return));break;case 1:Ln(r,t),Un(t),l&512&&(Pt||a===null||ks(a,a.return)),l&64&&dr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=hs;if(Ln(r,t),Un(t),l&512&&(Pt||a===null||ks(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ni]||p[$t]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(l),d.head.insertBefore(p,d.querySelector("head > title"))),cn(p,l,a),p[$t]=t,kt(p),l=p;break e;case"link":var b=_v("link","href",d).get(l+(a.href||""));if(b){for(var w=0;w<b.length;w++)if(p=b[w],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(w,1);break t}}p=d.createElement(l),cn(p,l,a),d.head.appendChild(p);break;case"meta":if(b=_v("meta","content",d).get(l+(a.content||""))){for(w=0;w<b.length;w++)if(p=b[w],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(w,1);break t}}p=d.createElement(l),cn(p,l,a),d.head.appendChild(p);break;default:throw Error(i(468,l))}p[$t]=t,kt(p),l=p}t.stateNode=l}else xv(d,t.type,t.stateNode);else t.stateNode=vv(d,l,t.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?xv(d,t.type,t.stateNode):vv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&If(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ln(r,t),Un(t),l&512&&(Pt||a===null||ks(a,a.return)),a!==null&&l&4&&If(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ln(r,t),Un(t),l&512&&(Pt||a===null||ks(a,a.return)),t.flags&32){d=t.stateNode;try{Kn(d,"")}catch(J){xt(t,t.return,J)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,If(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Of=!0);break;case 6:if(Ln(r,t),Un(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(J){xt(t,t.return,J)}}break;case 3:if(Gu=null,d=hs,hs=Hu(r.containerInfo),Ln(r,t),hs=d,Un(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{zl(r.containerInfo)}catch(J){xt(t,t.return,J)}Of&&(Of=!1,A0(t));break;case 4:l=hs,hs=Hu(t.stateNode.containerInfo),Ln(r,t),Un(t),hs=l;break;case 12:Ln(r,t),Un(t);break;case 13:Ln(r,t),Un(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bf=Ye()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kf(t,l)));break;case 22:d=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=dr,ae=Pt;if(dr=Y||d,Pt=ae||V,Ln(r,t),Pt=ae,dr=Y,Un(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||V||dr||Pt||Ji(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(p=V.stateNode,d)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=V.stateNode;var le=V.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;w.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){xt(V,V.return,J)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=d?"":V.memoizedProps}catch(J){xt(V,V.return,J)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,kf(t,a))));break;case 19:Ln(r,t),Un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kf(t,l)));break;case 30:break;case 21:break;default:Ln(r,t),Un(t)}}function Un(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(v0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,p=Df(t);Iu(t,p,d);break;case 5:var b=a.stateNode;a.flags&32&&(Kn(b,""),a.flags&=-33);var w=Df(t);Iu(t,w,b);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=Df(t);jf(t,Y,V);break;default:throw Error(i(161))}}catch(ae){xt(t,t.return,ae)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function A0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;A0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function zr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)b0(t,r.alternate,r),r=r.sibling}function Ji(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Br(4,r,r.return),Ji(r);break;case 1:ks(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&g0(r,r.return,a),Ji(r);break;case 27:Ol(r.stateNode);case 26:case 5:ks(r,r.return),Ji(r);break;case 22:r.memoizedState===null&&Ji(r);break;case 30:Ji(r);break;default:Ji(r)}t=t.sibling}}function qr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,p=r,b=p.flags;switch(p.tag){case 0:case 11:case 15:qr(d,p,a),Tl(4,p);break;case 1:if(qr(d,p,a),l=p,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){xt(l,l.return,Y)}if(l=p,d=l.updateQueue,d!==null){var w=l.stateNode;try{var V=d.shared.hiddenCallbacks;if(V!==null)for(d.shared.hiddenCallbacks=null,d=0;d<V.length;d++)ty(V[d],w)}catch(Y){xt(l,l.return,Y)}}a&&b&64&&p0(p),wl(p,p.return);break;case 27:_0(p);case 26:case 5:qr(d,p,a),a&&l===null&&b&4&&y0(p),wl(p,p.return);break;case 12:qr(d,p,a);break;case 13:qr(d,p,a),a&&b&4&&w0(d,p);break;case 22:p.memoizedState===null&&qr(d,p,a),wl(p,p.return);break;case 30:break;default:qr(d,p,a)}r=r.sibling}}function Mf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&cl(a))}function Pf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cl(t))}function Ms(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)N0(t,r,a,l),r=r.sibling}function N0(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Ms(t,r,a,l),d&2048&&Tl(9,r);break;case 1:Ms(t,r,a,l);break;case 3:Ms(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cl(t)));break;case 12:if(d&2048){Ms(t,r,a,l),t=r.stateNode;try{var p=r.memoizedProps,b=p.id,w=p.onPostCommit;typeof w=="function"&&w(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){xt(r,r.return,V)}}else Ms(t,r,a,l);break;case 13:Ms(t,r,a,l);break;case 23:break;case 22:p=r.stateNode,b=r.alternate,r.memoizedState!==null?p._visibility&2?Ms(t,r,a,l):Sl(t,r):p._visibility&2?Ms(t,r,a,l):(p._visibility|=2,Ga(t,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&Mf(b,r);break;case 24:Ms(t,r,a,l),d&2048&&Pf(r.alternate,r);break;default:Ms(t,r,a,l)}}function Ga(t,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=t,b=r,w=a,V=l,Y=b.flags;switch(b.tag){case 0:case 11:case 15:Ga(p,b,w,V,d),Tl(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?Ga(p,b,w,V,d):Sl(p,b):(ae._visibility|=2,Ga(p,b,w,V,d)),d&&Y&2048&&Mf(b.alternate,b);break;case 24:Ga(p,b,w,V,d),d&&Y&2048&&Pf(b.alternate,b);break;default:Ga(p,b,w,V,d)}r=r.sibling}}function Sl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Sl(a,l),d&2048&&Mf(l.alternate,l);break;case 24:Sl(a,l),d&2048&&Pf(l.alternate,l);break;default:Sl(a,l)}r=r.sibling}}var Al=8192;function $a(t){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)R0(t),t=t.sibling}function R0(t){switch(t.tag){case 26:$a(t),t.flags&Al&&t.memoizedState!==null&&sS(hs,t.memoizedState,t.memoizedProps);break;case 5:$a(t);break;case 3:case 4:var r=hs;hs=Hu(t.stateNode.containerInfo),$a(t),hs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Al,Al=16777216,$a(t),Al=r):$a(t));break;default:$a(t)}}function C0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Nl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];tn=l,D0(l,t)}C0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)I0(t),t=t.sibling}function I0(t){switch(t.tag){case 0:case 11:case 15:Nl(t),t.flags&2048&&Br(9,t,t.return);break;case 3:Nl(t);break;case 12:Nl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Du(t)):Nl(t);break;default:Nl(t)}}function Du(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];tn=l,D0(l,t)}C0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Br(8,r,r.return),Du(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Du(r));break;default:Du(r)}t=t.sibling}}function D0(t,r){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:Br(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,tn=l;else e:for(a=t;tn!==null;){l=tn;var d=l.sibling,p=l.return;if(E0(l),l===a){tn=null;break e}if(d!==null){d.return=p,tn=d;break e}tn=p}}}var _w={getCacheForType:function(t){var r=fn(Yt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},xw=typeof WeakMap=="function"?WeakMap:Map,ft=0,Et=null,Xe=null,st=0,mt=0,Bn=null,Hr=!1,Ka=!1,Vf=!1,fr=0,jt=0,Fr=0,ea=0,Lf=0,ns=0,Qa=0,Rl=null,jn=null,Uf=!1,Bf=0,ju=1/0,Ou=null,Gr=null,ln=0,$r=null,Ya=null,Xa=0,zf=0,qf=null,j0=null,Cl=0,Hf=null;function zn(){if((ft&2)!==0&&st!==0)return st&-st;if($.T!==null){var t=Va;return t!==0?t:Xf()}return Nr()}function O0(){ns===0&&(ns=(st&536870912)===0||ot?Lo():536870912);var t=ts.current;return t!==null&&(t.flags|=32),ns}function qn(t,r,a){(t===Et&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(Za(t,0),Kr(t,st,ns,!1)),Gs(t,a),((ft&2)===0||t!==Et)&&(t===Et&&((ft&2)===0&&(ea|=a),jt===4&&Kr(t,st,ns,!1)),Ps(t))}function k0(t,r,a){if((ft&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Ai(t,r),d=l?Tw(t,r):$f(t,r,!0),p=l;do{if(d===0){Ka&&!l&&Kr(t,r,0,!1);break}else{if(a=t.current.alternate,p&&!bw(a)){d=$f(t,r,!1),p=!1;continue}if(d===2){if(p=r,t.errorRecoveryDisabledLanes&p)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var w=t;d=Rl;var V=w.current.memoizedState.isDehydrated;if(V&&(Za(w,b).flags|=256),b=$f(w,b,!1),b!==2){if(Vf&&!V){w.errorRecoveryDisabledLanes|=p,ea|=p,d=4;break e}p=jn,jn=d,p!==null&&(jn===null?jn=p:jn.push.apply(jn,p))}d=b}if(p=!1,d!==2)continue}}if(d===1){Za(t,0),Kr(t,r,0,!0);break}e:{switch(l=t,p=d,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Kr(l,r,ns,!Hr);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Bf+300-Ye(),10<d)){if(Kr(l,r,ns,!Hr),ma(l,0,!0)!==0)break e;l.timeoutHandle=cv(M0.bind(null,l,a,jn,Ou,Uf,r,ns,ea,Qa,Hr,p,2,-0,0),d);break e}M0(l,a,jn,Ou,Uf,r,ns,ea,Qa,Hr,p,0,-0,0)}}break}while(!0);Ps(t)}function M0(t,r,a,l,d,p,b,w,V,Y,ae,le,Z,J){if(t.timeoutHandle=-1,le=r.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:nS},R0(r),le=rS(),le!==null)){t.cancelPendingCommit=le(q0.bind(null,t,r,p,a,l,d,b,w,V,ae,1,Z,J)),Kr(t,p,b,!Y);return}q0(t,r,p,a,l,d,b,w,V)}function bw(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],p=d.getSnapshot;d=d.value;try{if(!Pn(p(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(t,r,a,l){r&=~Lf,r&=~ea,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var p=31-_t(d),b=1<<p;l[p]=-1,d&=~b}a!==0&&bs(t,a,r)}function ku(){return(ft&6)===0?(Il(0),!1):!0}function Ff(){if(Xe!==null){if(mt===0)var t=Xe.return;else t=Xe,ir=Qi=null,of(t),Ha=null,xl=0,t=Xe;for(;t!==null;)m0(t.alternate,t),t=t.return;Xe=null}}function Za(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Uw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ff(),Et=t,Xe=a=nr(t.current,null),st=r,mt=0,Bn=null,Hr=!1,Ka=Ai(t,r),Vf=!1,Qa=ns=Lf=ea=Fr=jt=0,jn=Rl=null,Uf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-_t(l),p=1<<d;r|=t[d],l&=~p}return fr=r,nu(),a}function P0(t,r){$e=null,$.H=bu,r===dl||r===du?(r=Jg(),mt=3):r===Xg?(r=Jg(),mt=4):mt=r===e0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Bn=r,Xe===null&&(jt=1,Au(t,Zn(r,t.current)))}function V0(){var t=$.H;return $.H=bu,t===null?bu:t}function L0(){var t=$.A;return $.A=_w,t}function Gf(){jt=4,Hr||(st&4194048)!==st&&ts.current!==null||(Ka=!0),(Fr&134217727)===0&&(ea&134217727)===0||Et===null||Kr(Et,st,ns,!1)}function $f(t,r,a){var l=ft;ft|=2;var d=V0(),p=L0();(Et!==t||st!==r)&&(Ou=null,Za(t,r)),r=!1;var b=jt;e:do try{if(mt!==0&&Xe!==null){var w=Xe,V=Bn;switch(mt){case 8:Ff(),b=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(r=!0);var Y=mt;if(mt=0,Bn=null,Wa(t,w,V,Y),a&&Ka){b=0;break e}break;default:Y=mt,mt=0,Bn=null,Wa(t,w,V,Y)}}Ew(),b=jt;break}catch(ae){P0(t,ae)}while(!0);return r&&t.shellSuspendCounter++,ir=Qi=null,ft=l,$.H=d,$.A=p,Xe===null&&(Et=null,st=0,nu()),b}function Ew(){for(;Xe!==null;)U0(Xe)}function Tw(t,r){var a=ft;ft|=2;var l=V0(),d=L0();Et!==t||st!==r?(Ou=null,ju=Ye()+500,Za(t,r)):Ka=Ai(t,r);e:do try{if(mt!==0&&Xe!==null){r=Xe;var p=Bn;t:switch(mt){case 1:mt=0,Bn=null,Wa(t,r,p,1);break;case 2:case 9:if(Zg(p)){mt=0,Bn=null,B0(r);break}r=function(){mt!==2&&mt!==9||Et!==t||(mt=7),Ps(t)},p.then(r,r);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Zg(p)?(mt=0,Bn=null,B0(r)):(mt=0,Bn=null,Wa(t,r,p,7));break;case 5:var b=null;switch(Xe.tag){case 26:b=Xe.memoizedState;case 5:case 27:var w=Xe;if(!b||bv(b)){mt=0,Bn=null;var V=w.sibling;if(V!==null)Xe=V;else{var Y=w.return;Y!==null?(Xe=Y,Mu(Y)):Xe=null}break t}}mt=0,Bn=null,Wa(t,r,p,5);break;case 6:mt=0,Bn=null,Wa(t,r,p,6);break;case 8:Ff(),jt=6;break e;default:throw Error(i(462))}}ww();break}catch(ae){P0(t,ae)}while(!0);return ir=Qi=null,$.H=l,$.A=d,ft=a,Xe!==null?0:(Et=null,st=0,nu(),jt)}function ww(){for(;Xe!==null&&!ht();)U0(Xe)}function U0(t){var r=h0(t.alternate,t,fr);t.memoizedProps=t.pendingProps,r===null?Mu(t):Xe=r}function B0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=a0(a,r,r.pendingProps,r.type,void 0,st);break;case 11:r=a0(a,r,r.pendingProps,r.type.render,r.ref,st);break;case 5:of(r);default:m0(a,r),r=Xe=zg(r,fr),r=h0(a,r,fr)}t.memoizedProps=t.pendingProps,r===null?Mu(t):Xe=r}function Wa(t,r,a,l){ir=Qi=null,of(r),Ha=null,xl=0;var d=r.return;try{if(fw(t,d,r,a,st)){jt=1,Au(t,Zn(a,t.current)),Xe=null;return}}catch(p){if(d!==null)throw Xe=d,p;jt=1,Au(t,Zn(a,t.current)),Xe=null;return}r.flags&32768?(ot||l===1?t=!0:Ka||(st&536870912)!==0?t=!1:(Hr=t=!0,(l===2||l===9||l===3||l===6)&&(l=ts.current,l!==null&&l.tag===13&&(l.flags|=16384))),z0(r,t)):Mu(r)}function Mu(t){var r=t;do{if((r.flags&32768)!==0){z0(r,Hr);return}t=r.return;var a=pw(r.alternate,r,fr);if(a!==null){Xe=a;return}if(r=r.sibling,r!==null){Xe=r;return}Xe=r=t}while(r!==null);jt===0&&(jt=5)}function z0(t,r){do{var a=gw(t.alternate,t);if(a!==null){a.flags&=32767,Xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Xe=t;return}Xe=t=a}while(t!==null);jt=6,Xe=null}function q0(t,r,a,l,d,p,b,w,V){t.cancelPendingCommit=null;do Pu();while(ln!==0);if((ft&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Mh,Bo(t,a,p,b,w,V),t===Et&&(Xe=Et=null,st=0),Ya=r,$r=t,Xa=a,zf=p,qf=d,j0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Rw(Tt,function(){return K0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,d=ee.p,ee.p=2,b=ft,ft|=4;try{yw(t,r,a)}finally{ft=b,ee.p=d,$.T=l}}ln=1,H0(),F0(),G0()}}function H0(){if(ln===1){ln=0;var t=$r,r=Ya,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ee.p;ee.p=2;var d=ft;ft|=4;try{S0(r,t);var p=rm,b=Dg(t.containerInfo),w=p.focusedElem,V=p.selectionRange;if(b!==w&&w&&w.ownerDocument&&Ig(w.ownerDocument.documentElement,w)){if(V!==null&&Ih(w)){var Y=V.start,ae=V.end;if(ae===void 0&&(ae=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(ae,w.value.length);else{var le=w.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),Ve=w.textContent.length,De=Math.min(V.start,Ve),vt=V.end===void 0?De:Math.min(V.end,Ve);!J.extend&&De>vt&&(b=vt,vt=De,De=b);var F=Cg(w,De),H=Cg(w,vt);if(F&&H&&(J.rangeCount!==1||J.anchorNode!==F.node||J.anchorOffset!==F.offset||J.focusNode!==H.node||J.focusOffset!==H.offset)){var K=le.createRange();K.setStart(F.node,F.offset),J.removeAllRanges(),De>vt?(J.addRange(K),J.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),J.addRange(K))}}}}for(le=[],J=w;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<le.length;w++){var oe=le[w];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Qu=!!sm,rm=sm=null}finally{ft=d,ee.p=l,$.T=a}}t.current=r,ln=2}}function F0(){if(ln===2){ln=0;var t=$r,r=Ya,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ee.p;ee.p=2;var d=ft;ft|=4;try{b0(t,r.alternate,r)}finally{ft=d,ee.p=l,$.T=a}}ln=3}}function G0(){if(ln===4||ln===3){ln=0,Ge();var t=$r,r=Ya,a=Xa,l=j0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ln=5:(ln=0,Ya=$r=null,$0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Gr=null),pa(a),r=r.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Le,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=$.T,d=ee.p,ee.p=2,$.T=null;try{for(var p=t.onRecoverableError,b=0;b<l.length;b++){var w=l[b];p(w.value,{componentStack:w.stack})}}finally{$.T=r,ee.p=d}}(Xa&3)!==0&&Pu(),Ps(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Hf?Cl++:(Cl=0,Hf=t):Cl=0,Il(0)}}function $0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,cl(r)))}function Pu(t){return H0(),F0(),G0(),K0()}function K0(){if(ln!==5)return!1;var t=$r,r=zf;zf=0;var a=pa(Xa),l=$.T,d=ee.p;try{ee.p=32>a?32:a,$.T=null,a=qf,qf=null;var p=$r,b=Xa;if(ln=0,Ya=$r=null,Xa=0,(ft&6)!==0)throw Error(i(331));var w=ft;if(ft|=4,I0(p.current),N0(p,p.current,b,a),ft=w,Il(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Le,p)}catch{}return!0}finally{ee.p=d,$.T=l,$0(t,r)}}function Q0(t,r,a){r=Zn(a,r),r=bf(t.stateNode,r,2),t=Pr(t,r,2),t!==null&&(Gs(t,2),Ps(t))}function xt(t,r,a){if(t.tag===3)Q0(t,t,a);else for(;r!==null;){if(r.tag===3){Q0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){t=Zn(a,t),a=Wy(2),l=Pr(r,a,2),l!==null&&(Jy(a,l,r,t),Gs(l,2),Ps(l));break}}r=r.return}}function Kf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new xw;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Vf=!0,d.add(a),t=Sw.bind(null,t,r,a),r.then(t,t))}function Sw(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(st&a)===a&&(jt===4||jt===3&&(st&62914560)===st&&300>Ye()-Bf?(ft&2)===0&&Za(t,0):Lf|=a,Qa===st&&(Qa=0)),Ps(t)}function Y0(t,r){r===0&&(r=Uo()),t=Oa(t,r),t!==null&&(Gs(t,r),Ps(t))}function Aw(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Y0(t,a)}function Nw(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),Y0(t,a)}function Rw(t,r){return Ie(t,r)}var Vu=null,Ja=null,Qf=!1,Lu=!1,Yf=!1,ta=0;function Ps(t){t!==Ja&&t.next===null&&(Ja===null?Vu=Ja=t:Ja=Ja.next=t),Lu=!0,Qf||(Qf=!0,Iw())}function Il(t,r){if(!Yf&&Lu){Yf=!0;do for(var a=!1,l=Vu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var p=0;else{var b=l.suspendedLanes,w=l.pingedLanes;p=(1<<31-_t(42|t)+1)-1,p&=d&~(b&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,J0(l,p))}else p=st,p=ma(l,l===Et?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Ai(l,p)||(a=!0,J0(l,p));l=l.next}while(a);Yf=!1}}function Cw(){X0()}function X0(){Lu=Qf=!1;var t=0;ta!==0&&(Lw()&&(t=ta),ta=0);for(var r=Ye(),a=null,l=Vu;l!==null;){var d=l.next,p=Z0(l,r);p===0?(l.next=null,a===null?Vu=d:a.next=d,d===null&&(Ja=a)):(a=l,(t!==0||(p&3)!==0)&&(Lu=!0)),l=d}Il(t)}function Z0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var b=31-_t(p),w=1<<b,V=d[b];V===-1?((w&a)===0||(w&l)!==0)&&(d[b]=Vo(w,r)):V<=r&&(t.expiredLanes|=w),p&=~w}if(r=Et,a=st,a=ma(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ue(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ai(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ue(l),pa(a)){case 2:case 8:a=Lt;break;case 32:a=Tt;break;case 268435456:a=Ot;break;default:a=Tt}return l=W0.bind(null,t),a=Ie(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ue(l),t.callbackPriority=2,t.callbackNode=null,2}function W0(t,r){if(ln!==0&&ln!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pu()&&t.callbackNode!==a)return null;var l=st;return l=ma(t,t===Et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(k0(t,l,r),Z0(t,Ye()),t.callbackNode!=null&&t.callbackNode===a?W0.bind(null,t):null)}function J0(t,r){if(Pu())return null;k0(t,r,!0)}function Iw(){Bw(function(){(ft&6)!==0?Ie(lt,Cw):X0()})}function Xf(){return ta===0&&(ta=Lo()),ta}function ev(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ba(""+t)}function tv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Dw(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var p=ev((d[Ut]||null).action),b=l.submitter;b&&(r=(r=b[Ut]||null)?ev(r.formAction):b.getAttribute("formAction"),r!==null&&(p=r,b=null));var w=new Ea("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ta!==0){var V=b?tv(d,b):new FormData(d);gf(a,{pending:!0,data:V,method:d.method,action:p},null,V)}}else typeof p=="function"&&(w.preventDefault(),V=b?tv(d,b):new FormData(d),gf(a,{pending:!0,data:V,method:d.method,action:p},p,V))},currentTarget:d}]})}}for(var Zf=0;Zf<kh.length;Zf++){var Wf=kh[Zf],jw=Wf.toLowerCase(),Ow=Wf[0].toUpperCase()+Wf.slice(1);ds(jw,"on"+Ow)}ds(kg,"onAnimationEnd"),ds(Mg,"onAnimationIteration"),ds(Pg,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(XT,"onTransitionRun"),ds(ZT,"onTransitionStart"),ds(WT,"onTransitionCancel"),ds(Vg,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function nv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var b=l.length-1;0<=b;b--){var w=l[b],V=w.instance,Y=w.currentTarget;if(w=w.listener,V!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=Y;try{p(d)}catch(ae){Su(ae)}d.currentTarget=null,p=V}else for(b=0;b<l.length;b++){if(w=l[b],V=w.instance,Y=w.currentTarget,w=w.listener,V!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=Y;try{p(d)}catch(ae){Su(ae)}d.currentTarget=null,p=V}}}}function Ze(t,r){var a=r[qo];a===void 0&&(a=r[qo]=new Set);var l=t+"__bubble";a.has(l)||(sv(r,t,2,!1),a.add(l))}function Jf(t,r,a){var l=0;r&&(l|=4),sv(a,t,l,r)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[Uu]){t[Uu]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(kw.has(a)||Jf(a,!1,t),Jf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Uu]||(r[Uu]=!0,Jf("selectionchange",!1,r))}}function sv(t,r,a,l){switch(Nv(r)){case 2:var d=oS;break;case 8:d=lS;break;default:d=mm}a=d.bind(null,r,a,t),d=void 0,!Yn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function tm(t,r,a,l,d){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===d)break;if(b===4)for(b=l.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;w!==null;){if(b=$s(w),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){l=p=b;continue e}w=w.parentNode}}l=l.return}zc(function(){var Y=p,ae=Qn(a),le=[];e:{var Z=Lg.get(t);if(Z!==void 0){var J=Ea,Ve=t;switch(t){case"keypress":if(Ns(a)===0)break e;case"keydown":case"keyup":J=Ra;break;case"focusin":Ve="focus",J=Sa;break;case"focusout":Ve="blur",J=Sa;break;case"beforeblur":case"afterblur":J=Sa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Yc;break;case kg:case Mg:case Pg:J=Aa;break;case Vg:J=Zc;break;case"scroll":case"scrollend":J=qc;break;case"wheel":J=Ca;break;case"copy":case"cut":case"paste":J=Na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=tl;break;case"toggle":case"beforetoggle":J=Jc}var De=(r&4)!==0,vt=!De&&(t==="scroll"||t==="scrollend"),F=De?Z!==null?Z+"Capture":null:Z;De=[];for(var H=Y,K;H!==null;){var oe=H;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||F===null||(oe=ki(H,F),oe!=null&&De.push(jl(H,oe,K))),vt)break;H=H.return}0<De.length&&(Z=new J(Z,Ve,null,a,ae),le.push({event:Z,listeners:De}))}}if((r&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",Z&&a!==Xs&&(Ve=a.relatedTarget||a.fromElement)&&($s(Ve)||Ve[$n]))break e;if((J||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(Ve=a.relatedTarget||a.toElement,J=Y,Ve=Ve?$s(Ve):null,Ve!==null&&(vt=c(Ve),De=Ve.tag,Ve!==vt||De!==5&&De!==27&&De!==6)&&(Ve=null)):(J=null,Ve=Y),J!==Ve)){if(De=Xn,oe="onMouseLeave",F="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(De=tl,oe="onPointerLeave",F="onPointerEnter",H="pointer"),vt=J==null?Z:Ts(J),K=Ve==null?Z:Ts(Ve),Z=new De(oe,H+"leave",J,a,ae),Z.target=vt,Z.relatedTarget=K,oe=null,$s(ae)===Y&&(De=new De(F,H+"enter",Ve,a,ae),De.target=K,De.relatedTarget=vt,oe=De),vt=oe,J&&Ve)t:{for(De=J,F=Ve,H=0,K=De;K;K=eo(K))H++;for(K=0,oe=F;oe;oe=eo(oe))K++;for(;0<H-K;)De=eo(De),H--;for(;0<K-H;)F=eo(F),K--;for(;H--;){if(De===F||F!==null&&De===F.alternate)break t;De=eo(De),F=eo(F)}De=null}else De=null;J!==null&&rv(le,Z,J,De,!1),Ve!==null&&vt!==null&&rv(le,vt,Ve,De,!0)}}e:{if(Z=Y?Ts(Y):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var Ne=Tg;else if(Qt(Z))if(wg)Ne=KT;else{Ne=GT;var Qe=FT}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Y&&Qo(Y.elementType)&&(Ne=Tg):Ne=$T;if(Ne&&(Ne=Ne(t,Y))){tr(le,Ne,a,ae);break e}Qe&&Qe(t,Z,Y),t==="focusout"&&Y&&Z.type==="number"&&Y.memoizedProps.value!=null&&Dr(Z,"number",Z.value)}switch(Qe=Y?Ts(Y):window,t){case"focusin":(Qt(Qe)||Qe.contentEditable==="true")&&(Ia=Qe,Dh=Y,rl=null);break;case"focusout":rl=Dh=Ia=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,jg(le,a,ae);break;case"selectionchange":if(YT)break;case"keydown":case"keyup":jg(le,a,ae)}var Re;if(Is)e:{switch(t){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else tt?se(t,a)&&(Oe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(x&&a.locale!=="ko"&&(tt||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&tt&&(Re=Xo()):(As=ae,jr="value"in As?As.value:As.textContent,tt=!0)),Qe=Bu(Y,Oe),0<Qe.length&&(Oe=new Jo(Oe,t,null,a,ae),le.push({event:Oe,listeners:Qe}),Re?Oe.data=Re:(Re=be(a),Re!==null&&(Oe.data=Re)))),(Re=v?Kt(t,a):nt(t,a))&&(Oe=Bu(Y,"onBeforeInput"),0<Oe.length&&(Qe=new Jo("onBeforeInput","beforeinput",null,a,ae),le.push({event:Qe,listeners:Oe}),Qe.data=Re)),Dw(le,t,Y,a,ae)}nv(le,r)})}function jl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Bu(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=ki(t,a),d!=null&&l.unshift(jl(t,d,p)),d=ki(t,r),d!=null&&l.push(jl(t,d,p))),t.tag===3)return l;t=t.return}return[]}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function rv(t,r,a,l,d){for(var p=r._reactName,b=[];a!==null&&a!==l;){var w=a,V=w.alternate,Y=w.stateNode;if(w=w.tag,V!==null&&V===l)break;w!==5&&w!==26&&w!==27||Y===null||(V=Y,d?(Y=ki(a,p),Y!=null&&b.unshift(jl(a,Y,V))):d||(Y=ki(a,p),Y!=null&&b.push(jl(a,Y,V)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var Mw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function iv(t){return(typeof t=="string"?t:""+t).replace(Mw,`
`).replace(Pw,"")}function av(t,r){return r=iv(r),iv(t)===r}function zu(){}function yt(t,r,a,l,d,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Kn(t,""+l);break;case"className":ws(t,"class",l);break;case"tabIndex":ws(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(t,a,l);break;case"style":Ko(t,l,p);break;case"data":if(r!=="object"){ws(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&yt(t,r,"name",d.name,d,null),yt(t,r,"formEncType",d.formEncType,d,null),yt(t,r,"formMethod",d.formMethod,d,null),yt(t,r,"formTarget",d.formTarget,d,null)):(yt(t,r,"encType",d.encType,d,null),yt(t,r,"method",d.method,d,null),yt(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=zu);break;case"onScroll":l!=null&&Ze("scroll",t);break;case"onScrollEnd":l!=null&&Ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ba(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ze("beforetoggle",t),Ze("toggle",t),Ir(t,"popover",l);break;case"xlinkActuate":rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":rn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":rn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":rn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":rn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ir(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wh.get(a)||a,Ir(t,a,l))}}function nm(t,r,a,l,d,p){switch(a){case"style":Ko(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&Kn(t,""+l);break;case"onScroll":l!=null&&Ze("scroll",t);break;case"onScrollEnd":l!=null&&Ze("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),p=t[Ut]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(r,p,d),typeof l=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ir(t,a,l)}}}function cn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",t),Ze("load",t);var l=!1,d=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yt(t,r,p,b,a,null)}}d&&yt(t,r,"srcSet",a.srcSet,a,null),l&&yt(t,r,"src",a.src,a,null);return;case"input":Ze("invalid",t);var w=p=b=d=null,V=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":d=ae;break;case"type":b=ae;break;case"checked":V=ae;break;case"defaultChecked":Y=ae;break;case"value":p=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,r));break;default:yt(t,r,l,ae,a,null)}}Di(t,p,w,V,Y,b,d,!1),xa(t);return;case"select":Ze("invalid",t),l=b=p=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:yt(t,r,d,w,a,null)}r=p,a=b,t.multiple=!!l,r!=null?Ys(t,!!l,r,!1):a!=null&&Ys(t,!!l,a,!0);return;case"textarea":Ze("invalid",t),p=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(w=a[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:yt(t,r,b,w,a,null)}ji(t,l,d,p),xa(t);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:yt(t,r,V,l,a,null)}return;case"dialog":Ze("beforetoggle",t),Ze("toggle",t),Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":Ze("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Ze(Dl[l],t);break;case"image":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"embed":case"source":case"link":Ze("error",t),Ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yt(t,r,Y,l,a,null)}return;default:if(Qo(r)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&nm(t,r,ae,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&yt(t,r,w,l,a,null))}function Vw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,b=null,w=null,V=null,Y=null,ae=null;for(J in a){var le=a[J];if(a.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":V=le;default:l.hasOwnProperty(J)||yt(t,r,J,null,l,le)}}for(var Z in l){var J=l[Z];if(le=a[Z],l.hasOwnProperty(Z)&&(J!=null||le!=null))switch(Z){case"type":p=J;break;case"name":d=J;break;case"checked":Y=J;break;case"defaultChecked":ae=J;break;case"value":b=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:J!==le&&yt(t,r,Z,J,l,le)}}Mn(t,b,w,V,Y,ae,p,d);return;case"select":J=b=w=Z=null;for(p in a)if(V=a[p],a.hasOwnProperty(p)&&V!=null)switch(p){case"value":break;case"multiple":J=V;default:l.hasOwnProperty(p)||yt(t,r,p,null,l,V)}for(d in l)if(p=l[d],V=a[d],l.hasOwnProperty(d)&&(p!=null||V!=null))switch(d){case"value":Z=p;break;case"defaultValue":w=p;break;case"multiple":b=p;default:p!==V&&yt(t,r,d,p,l,V)}r=w,a=b,l=J,Z!=null?Ys(t,!!a,Z,!1):!!l!=!!a&&(r!=null?Ys(t,!!a,r,!0):Ys(t,!!a,a?[]:"",!1));return;case"textarea":J=Z=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:yt(t,r,w,null,l,d)}for(b in l)if(d=l[b],p=a[b],l.hasOwnProperty(b)&&(d!=null||p!=null))switch(b){case"value":Z=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==p&&yt(t,r,b,d,l,p)}pt(t,Z,J);return;case"option":for(var Ve in a)if(Z=a[Ve],a.hasOwnProperty(Ve)&&Z!=null&&!l.hasOwnProperty(Ve))switch(Ve){case"selected":t.selected=!1;break;default:yt(t,r,Ve,null,l,Z)}for(V in l)if(Z=l[V],J=a[V],l.hasOwnProperty(V)&&Z!==J&&(Z!=null||J!=null))switch(V){case"selected":t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:yt(t,r,V,Z,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)Z=a[De],a.hasOwnProperty(De)&&Z!=null&&!l.hasOwnProperty(De)&&yt(t,r,De,null,l,Z);for(Y in l)if(Z=l[Y],J=a[Y],l.hasOwnProperty(Y)&&Z!==J&&(Z!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:yt(t,r,Y,Z,l,J)}return;default:if(Qo(r)){for(var vt in a)Z=a[vt],a.hasOwnProperty(vt)&&Z!==void 0&&!l.hasOwnProperty(vt)&&nm(t,r,vt,void 0,l,Z);for(ae in l)Z=l[ae],J=a[ae],!l.hasOwnProperty(ae)||Z===J||Z===void 0&&J===void 0||nm(t,r,ae,Z,l,J);return}}for(var F in a)Z=a[F],a.hasOwnProperty(F)&&Z!=null&&!l.hasOwnProperty(F)&&yt(t,r,F,null,l,Z);for(le in l)Z=l[le],J=a[le],!l.hasOwnProperty(le)||Z===J||Z==null&&J==null||yt(t,r,le,Z,l,J)}var sm=null,rm=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function ov(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function im(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var am=null;function Lw(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var cv=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(t){return uv.resolve(null).then(t).catch(zw)}:cv;function zw(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function dv(t,r){var a=r,l=0,d=0;do{var p=a.nextSibling;if(t.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Ol(b.documentElement),a&2&&Ol(b.body),a&4)for(a=b.head,Ol(a),b=a.firstChild;b;){var w=b.nextSibling,V=b.nodeName;b[Ni]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=w}}if(d===0){t.removeChild(p),zl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);zl(r)}function om(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Cr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function qw(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ni])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function Hw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=fs(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Fw(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function fs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var cm=null;function hv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function fv(t,r,a){switch(r=qu(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ol(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Cr(t)}var ss=new Map,mv=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mr=ee.d;ee.d={f:Gw,r:$w,D:Kw,C:Qw,L:Yw,m:Xw,X:Ww,S:Zw,M:Jw};function Gw(){var t=mr.f(),r=ku();return t||r}function $w(t){var r=Es(t);r!==null&&r.tag===5&&r.type==="form"?ky(r):mr.r(t)}var to=typeof document>"u"?null:document;function pv(t,r,a){var l=to;if(l&&typeof r=="string"&&r){var d=Bt(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),mv.has(d)||(mv.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),cn(r,"link",t),kt(r),l.head.appendChild(r)))}}function Kw(t){mr.D(t),pv("dns-prefetch",t,null)}function Qw(t,r){mr.C(t,r),pv("preconnect",t,r)}function Yw(t,r,a){mr.L(t,r,a);var l=to;if(l&&t&&r){var d='link[rel="preload"][as="'+Bt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Bt(a.imageSizes)+'"]')):d+='[href="'+Bt(t)+'"]';var p=d;switch(r){case"style":p=no(t);break;case"script":p=so(t)}ss.has(p)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ss.set(p,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(kl(p))||r==="script"&&l.querySelector(Ml(p))||(r=l.createElement("link"),cn(r,"link",t),kt(r),l.head.appendChild(r)))}}function Xw(t,r){mr.m(t,r);var a=to;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Bt(l)+'"][href="'+Bt(t)+'"]',p=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=so(t)}if(!ss.has(p)&&(t=_({rel:"modulepreload",href:t},r),ss.set(p,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(p)))return}l=a.createElement("link"),cn(l,"link",t),kt(l),a.head.appendChild(l)}}}function Zw(t,r,a){mr.S(t,r,a);var l=to;if(l&&t){var d=xn(l).hoistableStyles,p=no(t);r=r||"default";var b=d.get(p);if(!b){var w={loading:0,preload:null};if(b=l.querySelector(kl(p)))w.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ss.get(p))&&um(t,a);var V=b=l.createElement("link");kt(V),cn(V,"link",t),V._p=new Promise(function(Y,ae){V.onload=Y,V.onerror=ae}),V.addEventListener("load",function(){w.loading|=1}),V.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Fu(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:w},d.set(p,b)}}}function Ww(t,r){mr.X(t,r);var a=to;if(a&&t){var l=xn(a).hoistableScripts,d=so(t),p=l.get(d);p||(p=a.querySelector(Ml(d)),p||(t=_({src:t,async:!0},r),(r=ss.get(d))&&dm(t,r),p=a.createElement("script"),kt(p),cn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function Jw(t,r){mr.M(t,r);var a=to;if(a&&t){var l=xn(a).hoistableScripts,d=so(t),p=l.get(d);p||(p=a.querySelector(Ml(d)),p||(t=_({src:t,async:!0,type:"module"},r),(r=ss.get(d))&&dm(t,r),p=a.createElement("script"),kt(p),cn(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function gv(t,r,a,l){var d=(d=pe.current)?Hu(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=no(a.href),a=xn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var p=xn(d).hoistableStyles,b=p.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,b),(p=d.querySelector(kl(t)))&&!p._p&&(b.instance=p,b.state.loading=5),ss.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ss.set(t,a),p||eS(d,t,a,b.state))),r&&l===null)throw Error(i(528,""));return b}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=so(a),a=xn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function no(t){return'href="'+Bt(t)+'"'}function kl(t){return'link[rel="stylesheet"]['+t+"]"}function yv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function eS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),cn(r,"link",a),kt(r),t.head.appendChild(r))}function so(t){return'[src="'+Bt(t)+'"]'}function Ml(t){return"script[async]"+t}function vv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Bt(a.href)+'"]');if(l)return r.instance=l,kt(l),l;var d=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),kt(l),cn(l,"style",d),Fu(l,a.precedence,t),r.instance=l;case"stylesheet":d=no(a.href);var p=t.querySelector(kl(d));if(p)return r.state.loading|=4,r.instance=p,kt(p),p;l=yv(a),(d=ss.get(d))&&um(l,d),p=(t.ownerDocument||t).createElement("link"),kt(p);var b=p;return b._p=new Promise(function(w,V){b.onload=w,b.onerror=V}),cn(p,"link",l),r.state.loading|=4,Fu(p,a.precedence,t),r.instance=p;case"script":return p=so(a.src),(d=t.querySelector(Ml(p)))?(r.instance=d,kt(d),d):(l=a,(d=ss.get(p))&&(l=_({},a),dm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),kt(d),cn(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Fu(l,a.precedence,t));return r.instance}function Fu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,p=d,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===r)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(t,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gu=null;function _v(t,r,a){if(Gu===null){var l=new Map,d=Gu=new Map;d.set(a,l)}else d=Gu,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var p=a[d];if(!(p[Ni]||p[$t]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(r)||"";b=t+b;var w=l.get(b);w?w.push(p):l.set(b,[p])}}return l}function xv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function tS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function bv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function nS(){}function sS(t,r,a){if(Pl===null)throw Error(i(475));var l=Pl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=no(a.href),p=t.querySelector(kl(d));if(p){t=p._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=$u.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=p,kt(p);return}p=t.ownerDocument||t,a=yv(a),(d=ss.get(d))&&um(a,d),p=p.createElement("link"),kt(p);var b=p;b._p=new Promise(function(w,V){b.onload=w,b.onerror=V}),cn(p,"link",a),r.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=$u.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function rS(){if(Pl===null)throw Error(i(475));var t=Pl;return t.stylesheets&&t.count===0&&hm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&hm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function $u(){if(this.count--,this.count===0){if(this.stylesheets)hm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ku=null;function hm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ku=new Map,r.forEach(iS,t),Ku=null,$u.call(t))}function iS(t,r){if(!(r.state.loading&4)){var a=Ku.get(t);if(a)var l=a.get(null);else{a=new Map,Ku.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var b=d[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=r.instance,b=d.getAttribute("data-precedence"),p=a.get(b)||l,p===l&&a.set(null,d),a.set(b,d),this.count++,l=$u.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),p?p.parentNode.insertBefore(d,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Vl={$$typeof:X,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function aS(t,r,a,l,d,p,b,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.hiddenUpdates=Fs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Ev(t,r,a,l,d,p,b,w,V,Y,ae,le){return t=new aS(t,r,a,b,w,V,Y,le),r=1,p===!0&&(r|=24),p=Vn(3,null,null,r),t.current=p,p.stateNode=t,r=$h(),r.refCount++,t.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},Xh(p),t}function Tv(t){return t?(t=ka,t):ka}function wv(t,r,a,l,d,p){d=Tv(d),l.context===null?l.context=d:l.pendingContext=d,l=Mr(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Pr(t,l,r),a!==null&&(qn(a,t,r),fl(a,t,r))}function Sv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function fm(t,r){Sv(t,r),(t=t.alternate)&&Sv(t,r)}function Av(t){if(t.tag===13){var r=Oa(t,67108864);r!==null&&qn(r,t,67108864),fm(t,67108864)}}var Qu=!0;function oS(t,r,a,l){var d=$.T;$.T=null;var p=ee.p;try{ee.p=2,mm(t,r,a,l)}finally{ee.p=p,$.T=d}}function lS(t,r,a,l){var d=$.T;$.T=null;var p=ee.p;try{ee.p=8,mm(t,r,a,l)}finally{ee.p=p,$.T=d}}function mm(t,r,a,l){if(Qu){var d=pm(l);if(d===null)tm(t,r,l,Yu,a),Rv(t,l);else if(uS(d,t,r,a,l))l.stopPropagation();else if(Rv(t,l),r&4&&-1<cS.indexOf(t)){for(;d!==null;){var p=Es(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=ls(p.pendingLanes);if(b!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var V=1<<31-_t(b);w.entanglements[1]|=V,b&=~V}Ps(p),(ft&6)===0&&(ju=Ye()+500,Il(0))}}break;case 13:w=Oa(p,2),w!==null&&qn(w,p,2),ku(),fm(p,2)}if(p=pm(l),p===null&&tm(t,r,l,Yu,a),p===d)break;d=p}d!==null&&l.stopPropagation()}else tm(t,r,l,null,a)}}function pm(t){return t=Qn(t),gm(t)}var Yu=null;function gm(t){if(Yu=null,t=$s(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yu=t,null}function Nv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case lt:return 2;case Lt:return 8;case Tt:case Nn:return 32;case Ot:return 268435456;default:return 32}default:return 32}}var ym=!1,Yr=null,Xr=null,Zr=null,Ll=new Map,Ul=new Map,Wr=[],cS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(t,r){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ll.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(r.pointerId)}}function Bl(t,r,a,l,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},r!==null&&(r=Es(r),r!==null&&Av(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function uS(t,r,a,l,d){switch(r){case"focusin":return Yr=Bl(Yr,t,r,a,l,d),!0;case"dragenter":return Xr=Bl(Xr,t,r,a,l,d),!0;case"mouseover":return Zr=Bl(Zr,t,r,a,l,d),!0;case"pointerover":var p=d.pointerId;return Ll.set(p,Bl(Ll.get(p)||null,t,r,a,l,d)),!0;case"gotpointercapture":return p=d.pointerId,Ul.set(p,Bl(Ul.get(p)||null,t,r,a,l,d)),!0}return!1}function Cv(t){var r=$s(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,kc(t.priority,function(){if(a.tag===13){var l=zn();l=Ar(l);var d=Oa(a,l);d!==null&&qn(d,a,l),fm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=pm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xs=l,a.target.dispatchEvent(l),Xs=null}else return r=Es(a),r!==null&&Av(r),t.blockedOn=a,!1;r.shift()}return!0}function Iv(t,r,a){Xu(t)&&a.delete(r)}function dS(){ym=!1,Yr!==null&&Xu(Yr)&&(Yr=null),Xr!==null&&Xu(Xr)&&(Xr=null),Zr!==null&&Xu(Zr)&&(Zr=null),Ll.forEach(Iv),Ul.forEach(Iv)}function Zu(t,r){t.blockedOn===r&&(t.blockedOn=null,ym||(ym=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,dS)))}var Wu=null;function Dv(t){Wu!==t&&(Wu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(gm(l||a)===null)continue;break}var p=Es(a);p!==null&&(t.splice(r,3),r-=3,gf(p,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function zl(t){function r(V){return Zu(V,t)}Yr!==null&&Zu(Yr,t),Xr!==null&&Zu(Xr,t),Zr!==null&&Zu(Zr,t),Ll.forEach(r),Ul.forEach(r);for(var a=0;a<Wr.length;a++){var l=Wr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)Cv(a),a.blockedOn===null&&Wr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],b=d[Ut]||null;if(typeof p=="function")b||Dv(a);else if(b){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,b=p[Ut]||null)w=b.formAction;else if(gm(d)!==null)continue}else w=b.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Dv(a)}}}function vm(t){this._internalRoot=t}Ju.prototype.render=vm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=zn();wv(a,l,t,r,null,null)},Ju.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;wv(t.current,2,null,t,null,null),ku(),r[$n]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var r=Nr();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Wr.length&&r!==0&&r<Wr[a].priority;a++);Wr.splice(a,0,t),a===0&&Cv(t)}};var jv=e.version;if(jv!=="19.1.0")throw Error(i(527,jv,"19.1.0"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var hS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Le=ed.inject(hS),ke=ed}catch{}}return Hl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",d=Qy,p=Yy,b=Xy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=Ev(t,1,!1,null,null,a,l,d,p,b,w,null),t[$n]=r.current,em(t),new vm(r)},Hl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,d="",p=Qy,b=Yy,w=Xy,V=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=Ev(t,1,!0,r,a??null,l,d,p,b,w,V,Y),r.context=Tv(null),a=r.current,l=zn(),l=Ar(l),d=Mr(l),d.callback=null,Pr(a,d,l),a=l,r.current.lanes=a,Gs(r,a),Ps(r),t[$n]=r.current,em(t),new Ju(r)},Hl.version="19.1.0",Hl}var qv;function ES(){if(qv)return bm.exports;qv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bm.exports=bS(),bm.exports}var TS=ES(),Fl={},Hv;function wS(){if(Hv)return Fl;Hv=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.parse=h,Fl.serialize=y;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function h(E,D){const C=new c,U=E.length;if(U<2)return C;const j=(D==null?void 0:D.decode)||_;let z=0;do{const B=E.indexOf("=",z);if(B===-1)break;const X=E.indexOf(";",z),te=X===-1?U:X;if(B>te){z=E.lastIndexOf(";",B-1)+1;continue}const W=m(E,z,B),re=g(E,B,W),O=E.slice(W,re);if(C[O]===void 0){let S=m(E,B+1,te),I=g(E,te,S);const P=j(E.slice(S,I));C[O]=P}z=te+1}while(z<U);return C}function m(E,D,C){do{const U=E.charCodeAt(D);if(U!==32&&U!==9)return D}while(++D<C);return C}function g(E,D,C){for(;D>C;){const U=E.charCodeAt(--D);if(U!==32&&U!==9)return D+1}return C}function y(E,D,C){const U=(C==null?void 0:C.encode)||encodeURIComponent;if(!s.test(E))throw new TypeError(`argument name is invalid: ${E}`);const j=U(D);if(!e.test(j))throw new TypeError(`argument val is invalid: ${D}`);let z=E+"="+j;if(!C)return z;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);z+="; Max-Age="+C.maxAge}if(C.domain){if(!n.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);z+="; Domain="+C.domain}if(C.path){if(!i.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);z+="; Path="+C.path}if(C.expires){if(!T(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);z+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(z+="; HttpOnly"),C.secure&&(z+="; Secure"),C.partitioned&&(z+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return z}function _(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function T(E){return o.call(E)==="[object Date]"}return Fl}wS();var Fv="popstate";function SS(s={}){function e(i,o){let{pathname:c,search:h,hash:m}=i.location;return Hm("",{pathname:c,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:oc(o)}return NS(e,n,null,s)}function Nt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function rs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substring(2,10)}function Gv(s,e){return{usr:s.state,key:s.key,idx:e}}function Hm(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:n,key:e&&e.key||i||AS()}}function oc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function So(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function NS(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,h=o.history,m="POP",g=null,y=_();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function _(){return(h.state||{idx:null}).idx}function T(){m="POP";let j=_(),z=j==null?null:j-y;y=j,g&&g({action:m,location:U.location,delta:z})}function E(j,z){m="PUSH";let B=Hm(U.location,j,z);y=_()+1;let X=Gv(B,y),te=U.createHref(B);try{h.pushState(X,"",te)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;o.location.assign(te)}c&&g&&g({action:m,location:U.location,delta:1})}function D(j,z){m="REPLACE";let B=Hm(U.location,j,z);y=_();let X=Gv(B,y),te=U.createHref(B);h.replaceState(X,"",te),c&&g&&g({action:m,location:U.location,delta:0})}function C(j){return RS(j)}let U={get action(){return m},get location(){return s(o,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Fv,T),g=j,()=>{o.removeEventListener(Fv,T),g=null}},createHref(j){return e(o,j)},createURL:C,encodeLocation(j){let z=C(j);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:E,replace:D,go(j){return h.go(j)}};return U}function RS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:oc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Qx(s,e,n="/"){return CS(s,e,n,!1)}function CS(s,e,n,i){let o=typeof e=="string"?So(e):e,c=xr(o.pathname||"/",n);if(c==null)return null;let h=Yx(s);IS(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let y=zS(c);m=US(h[g],y,i)}return m}function Yx(s,e=[],n=[],i=""){let o=(c,h,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(Nt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let y=yr([i,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(Nt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Yx(c.children,e,_,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:VS(y,c.index),routesMeta:_})};return s.forEach((c,h)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,h);else for(let g of Xx(c.path))o(c,h,g)}),e}function Xx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let h=Xx(i.join("/")),m=[];return m.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...h),m.map(g=>s.startsWith("/")&&g===""?"/":g)}function IS(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:LS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var DS=/^:[\w-]+$/,jS=3,OS=2,kS=1,MS=10,PS=-2,$v=s=>s==="*";function VS(s,e){let n=s.split("/"),i=n.length;return n.some($v)&&(i+=PS),e&&(i+=OS),n.filter(o=>!$v(o)).reduce((o,c)=>o+(DS.test(c)?jS:c===""?kS:MS),i)}function LS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function US(s,e,n=!1){let{routesMeta:i}=s,o={},c="/",h=[];for(let m=0;m<i.length;++m){let g=i[m],y=m===i.length-1,_=c==="/"?e:e.slice(c.length)||"/",T=Ed({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),E=g.route;if(!T&&y&&n&&!i[i.length-1].route.index&&(T=Ed({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:yr([c,T.pathname]),pathnameBase:GS(yr([c,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(c=yr([c,T.pathnameBase]))}return h}function Ed(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=BS(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:T},E)=>{if(_==="*"){let C=m[E]||"";h=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const D=m[E];return T&&!D?y[_]=void 0:y[_]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:s}}function BS(s,e=!1,n=!0){rs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(i.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function zS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function xr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function qS(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?So(s):s;return{pathname:n?n.startsWith("/")?n:HS(n,e):e,search:$S(i),hash:KS(o)}}function HS(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Sm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ep(s){let e=FS(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Tp(s,e,n,i=!1){let o;typeof s=="string"?o=So(s):(o={...s},Nt(!o.pathname||!o.pathname.includes("?"),Sm("?","pathname","search",o)),Nt(!o.pathname||!o.pathname.includes("#"),Sm("#","pathname","hash",o)),Nt(!o.search||!o.search.includes("#"),Sm("#","search","hash",o)));let c=s===""||o.pathname==="",h=c?"/":o.pathname,m;if(h==null)m=n;else{let T=e.length-1;if(!i&&h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),T-=1;o.pathname=E.join("/")}m=T>=0?e[T]:"/"}let g=qS(o,m),y=h&&h!=="/"&&h.endsWith("/"),_=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var yr=s=>s.join("/").replace(/\/\/+/g,"/"),GS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),$S=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,KS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function QS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Zx=["POST","PUT","PATCH","DELETE"];new Set(Zx);var YS=["GET",...Zx];new Set(YS);var Ao=N.createContext(null);Ao.displayName="DataRouter";var Hd=N.createContext(null);Hd.displayName="DataRouterState";var Wx=N.createContext({isTransitioning:!1});Wx.displayName="ViewTransition";var XS=N.createContext(new Map);XS.displayName="Fetchers";var ZS=N.createContext(null);ZS.displayName="Await";var _s=N.createContext(null);_s.displayName="Navigation";var vc=N.createContext(null);vc.displayName="Location";var as=N.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var wp=N.createContext(null);wp.displayName="RouteError";function WS(s,{relative:e}={}){Nt(No(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=N.useContext(_s),{hash:o,pathname:c,search:h}=_c(s,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:yr([n,c])),i.createHref({pathname:m,search:h,hash:o})}function No(){return N.useContext(vc)!=null}function Fn(){return Nt(No(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(vc).location}var Jx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eb(s){N.useContext(_s).static||N.useLayoutEffect(s)}function _i(){let{isDataRoute:s}=N.useContext(as);return s?f1():JS()}function JS(){Nt(No(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(Ao),{basename:e,navigator:n}=N.useContext(_s),{matches:i}=N.useContext(as),{pathname:o}=Fn(),c=JSON.stringify(Ep(i)),h=N.useRef(!1);return eb(()=>{h.current=!0}),N.useCallback((g,y={})=>{if(rs(h.current,Jx),!h.current)return;if(typeof g=="number"){n.go(g);return}let _=Tp(g,JSON.parse(c),o,y.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:yr([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,c,o,s])}var e1=N.createContext(null);function t1(s){let e=N.useContext(as).outlet;return e&&N.createElement(e1.Provider,{value:s},e)}function xi(){let{matches:s}=N.useContext(as),e=s[s.length-1];return e?e.params:{}}function _c(s,{relative:e}={}){let{matches:n}=N.useContext(as),{pathname:i}=Fn(),o=JSON.stringify(Ep(n));return N.useMemo(()=>Tp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function n1(s,e){return tb(s,e)}function tb(s,e,n,i){var z;Nt(No(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(_s),{matches:c}=N.useContext(as),h=c[c.length-1],m=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let B=_&&_.path||"";nb(g,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=Fn(),E;if(e){let B=typeof e=="string"?So(e):e;Nt(y==="/"||((z=B.pathname)==null?void 0:z.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),E=B}else E=T;let D=E.pathname||"/",C=D;if(y!=="/"){let B=y.replace(/^\//,"").split("/");C="/"+D.replace(/^\//,"").split("/").slice(B.length).join("/")}let U=Qx(s,{pathname:C});rs(_||U!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),rs(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=o1(U&&U.map(B=>Object.assign({},B,{params:Object.assign({},m,B.params),pathname:yr([y,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:yr([y,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),c,n,i);return e&&j?N.createElement(vc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},j):j}function s1(){let s=h1(),e=QS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:c},"ErrorBoundary")," or"," ",N.createElement("code",{style:c},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:o},n):null,h)}var r1=N.createElement(s1,null),i1=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?N.createElement(as.Provider,{value:this.props.routeContext},N.createElement(wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function a1({routeContext:s,match:e,children:n}){let i=N.useContext(Ao);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(as.Provider,{value:s},n)}function o1(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,c=n==null?void 0:n.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Nt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,m=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:_,errors:T}=n,E=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||E){h=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let T,E=!1,D=null,C=null;n&&(T=c&&y.route.id?c[y.route.id]:void 0,D=y.route.errorElement||r1,h&&(m<0&&_===0?(nb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,C=null):m===_&&(E=!0,C=y.route.hydrateFallbackElement||null)));let U=e.concat(o.slice(0,_+1)),j=()=>{let z;return T?z=D:E?z=C:y.route.Component?z=N.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=g,N.createElement(a1,{match:y,routeContext:{outlet:g,matches:U,isDataRoute:n!=null},children:z})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?N.createElement(i1,{location:n.location,revalidation:n.revalidation,component:D,error:T,children:j(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):j()},null)}function Sp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l1(s){let e=N.useContext(Ao);return Nt(e,Sp(s)),e}function c1(s){let e=N.useContext(Hd);return Nt(e,Sp(s)),e}function u1(s){let e=N.useContext(as);return Nt(e,Sp(s)),e}function Ap(s){let e=u1(s),n=e.matches[e.matches.length-1];return Nt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function d1(){return Ap("useRouteId")}function h1(){var i;let s=N.useContext(wp),e=c1("useRouteError"),n=Ap("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[n]}function f1(){let{router:s}=l1("useNavigate"),e=Ap("useNavigate"),n=N.useRef(!1);return eb(()=>{n.current=!0}),N.useCallback(async(o,c={})=>{rs(n.current,Jx),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Kv={};function nb(s,e,n){!e&&!Kv[s]&&(Kv[s]=!0,rs(!1,n))}N.memo(m1);function m1({routes:s,future:e,state:n}){return tb(s,void 0,n,e)}function p1({to:s,replace:e,state:n,relative:i}){Nt(No(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(_s);rs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=N.useContext(as),{pathname:h}=Fn(),m=_i(),g=Tp(s,Ep(c),h,i==="path"),y=JSON.stringify(g);return N.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:i})},[m,y,i,e,n]),null}function g1(s){return t1(s.context)}function wn(s){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function y1({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:c=!1}){Nt(!No(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=So(n));let{pathname:g="/",search:y="",hash:_="",state:T=null,key:E="default"}=n,D=N.useMemo(()=>{let C=xr(g,h);return C==null?null:{location:{pathname:C,search:y,hash:_,state:T,key:E},navigationType:i}},[h,g,y,_,T,E,i]);return rs(D!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:N.createElement(_s.Provider,{value:m},N.createElement(vc.Provider,{children:e,value:D}))}function v1({children:s,location:e}){return n1(Fm(s),e)}function Fm(s,e=[]){let n=[];return N.Children.forEach(s,(i,o)=>{if(!N.isValidElement(i))return;let c=[...e,o];if(i.type===N.Fragment){n.push.apply(n,Fm(i.props.children,c));return}Nt(i.type===wn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Fm(i.props.children,c)),n.push(h)}),n}var ud="get",dd="application/x-www-form-urlencoded";function Fd(s){return s!=null&&typeof s.tagName=="string"}function _1(s){return Fd(s)&&s.tagName.toLowerCase()==="button"}function x1(s){return Fd(s)&&s.tagName.toLowerCase()==="form"}function b1(s){return Fd(s)&&s.tagName.toLowerCase()==="input"}function E1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function T1(s,e){return s.button===0&&(!e||e==="_self")&&!E1(s)}function Gm(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function w1(s,e){let n=Gm(s);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(c=>{n.append(o,c)})}),n}var td=null;function S1(){if(td===null)try{new FormData(document.createElement("form"),0),td=!1}catch{td=!0}return td}var A1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Am(s){return s!=null&&!A1.has(s)?(rs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):s}function N1(s,e){let n,i,o,c,h;if(x1(s)){let m=s.getAttribute("action");i=m?xr(m,e):null,n=s.getAttribute("method")||ud,o=Am(s.getAttribute("enctype"))||dd,c=new FormData(s)}else if(_1(s)||b1(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||m.getAttribute("action");if(i=g?xr(g,e):null,n=s.getAttribute("formmethod")||m.getAttribute("method")||ud,o=Am(s.getAttribute("formenctype"))||Am(m.getAttribute("enctype"))||dd,c=new FormData(m,s),!S1()){let{name:y,type:_,value:T}=s;if(_==="image"){let E=y?`${y}.`:"";c.append(`${E}x`,"0"),c.append(`${E}y`,"0")}else y&&c.append(y,T)}}else{if(Fd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ud,i=null,o=dd,h=s}return c&&o==="text/plain"&&(h=c,c=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:c,body:h}}function Np(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function R1(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function C1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function I1(s,e,n){let i=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await R1(c,n);return h.links?h.links():[]}return[]}));return k1(i.flat(1).filter(C1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Qv(s,e,n,i,o,c){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,m=(g,y)=>{var _;return n[y].pathname!==g.pathname||((_=n[y].route.path)==null?void 0:_.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>h(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{var T;let _=i.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(h(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=n[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function D1(s,e,{includeHydrateFallback:n}={}){return j1(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function j1(s){return[...new Set(s)]}function O1(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function k1(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let c=JSON.stringify(O1(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var M1=new Set([100,101,204,205]);function P1(s,e){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname="_root.data":e&&xr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function sb(){let s=N.useContext(Ao);return Np(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function V1(){let s=N.useContext(Hd);return Np(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Rp=N.createContext(void 0);Rp.displayName="FrameworkContext";function rb(){let s=N.useContext(Rp);return Np(s,"You must render this element inside a <HydratedRouter> element"),s}function L1(s,e){let n=N.useContext(Rp),[i,o]=N.useState(!1),[c,h]=N.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:T}=e,E=N.useRef(null);N.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=z=>{z.forEach(B=>{h(B.isIntersecting)})},j=new IntersectionObserver(U,{threshold:.5});return E.current&&j.observe(E.current),()=>{j.disconnect()}}},[s]),N.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let D=()=>{o(!0)},C=()=>{o(!1),h(!1)};return n?s!=="intent"?[c,E,{}]:[c,E,{onFocus:Gl(m,D),onBlur:Gl(g,C),onMouseEnter:Gl(y,D),onMouseLeave:Gl(_,C),onTouchStart:Gl(T,D)}]:[!1,E,{}]}function Gl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function U1({page:s,...e}){let{router:n}=sb(),i=N.useMemo(()=>Qx(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?N.createElement(z1,{page:s,matches:i,...e}):null}function B1(s){let{manifest:e,routeModules:n}=rb(),[i,o]=N.useState([]);return N.useEffect(()=>{let c=!1;return I1(s,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[s,e,n]),i}function z1({page:s,matches:e,...n}){let i=Fn(),{manifest:o,routeModules:c}=rb(),{basename:h}=sb(),{loaderData:m,matches:g}=V1(),y=N.useMemo(()=>Qv(s,e,g,o,i,"data"),[s,e,g,o,i]),_=N.useMemo(()=>Qv(s,e,g,o,i,"assets"),[s,e,g,o,i]),T=N.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let C=new Set,U=!1;if(e.forEach(z=>{var X;let B=o.routes[z.route.id];!B||!B.hasLoader||(!y.some(te=>te.route.id===z.route.id)&&z.route.id in m&&((X=c[z.route.id])!=null&&X.shouldRevalidate)||B.hasClientLoader?U=!0:C.add(z.route.id))}),C.size===0)return[];let j=P1(s,h);return U&&C.size>0&&j.searchParams.set("_routes",e.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[j.pathname+j.search]},[h,m,i,o,y,e,s,c]),E=N.useMemo(()=>D1(_,o),[_,o]),D=B1(_);return N.createElement(N.Fragment,null,T.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),E.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),D.map(({key:C,link:U})=>N.createElement("link",{key:C,...U})))}function q1(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ib=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ib&&(window.__reactRouterVersion="7.6.2")}catch{}function H1({basename:s,children:e,window:n}){let i=N.useRef();i.current==null&&(i.current=SS({window:n,v5Compat:!0}));let o=i.current,[c,h]=N.useState({action:o.action,location:o.location}),m=N.useCallback(g=>{N.startTransition(()=>h(g))},[h]);return N.useLayoutEffect(()=>o.listen(m),[o,m]),N.createElement(y1,{basename:s,children:e,location:c.location,navigationType:c.action,navigator:o})}var ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=N.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:c,replace:h,state:m,target:g,to:y,preventScrollReset:_,viewTransition:T,...E},D){let{basename:C}=N.useContext(_s),U=typeof y=="string"&&ab.test(y),j,z=!1;if(typeof y=="string"&&U&&(j=y,ib))try{let I=new URL(window.location.href),P=y.startsWith("//")?new URL(I.protocol+y):new URL(y),L=xr(P.pathname,C);P.origin===I.origin&&L!=null?y=L+P.search+P.hash:z=!0}catch{rs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=WS(y,{relative:o}),[X,te,W]=L1(i,E),re=K1(y,{replace:h,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:T});function O(I){e&&e(I),I.defaultPrevented||re(I)}let S=N.createElement("a",{...E,...W,href:j||B,onClick:z||c?e:O,ref:q1(D,te),target:g,"data-discover":!U&&n==="render"?"true":void 0});return X&&!U?N.createElement(N.Fragment,null,S,N.createElement(U1,{page:B})):S});je.displayName="Link";var F1=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:h,viewTransition:m,children:g,...y},_){let T=_c(h,{relative:y.relative}),E=Fn(),D=N.useContext(Hd),{navigator:C,basename:U}=N.useContext(_s),j=D!=null&&W1(T)&&m===!0,z=C.encodeLocation?C.encodeLocation(T).pathname:T.pathname,B=E.pathname,X=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(B=B.toLowerCase(),X=X?X.toLowerCase():null,z=z.toLowerCase()),X&&U&&(X=xr(X,U)||X);const te=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let W=B===z||!o&&B.startsWith(z)&&B.charAt(te)==="/",re=X!=null&&(X===z||!o&&X.startsWith(z)&&X.charAt(z.length)==="/"),O={isActive:W,isPending:re,isTransitioning:j},S=W?e:void 0,I;typeof i=="function"?I=i(O):I=[i,W?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let P=typeof c=="function"?c(O):c;return N.createElement(je,{...y,"aria-current":S,className:I,ref:_,style:P,to:h,viewTransition:m},typeof g=="function"?g(O):g)});F1.displayName="NavLink";var G1=N.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:c,method:h=ud,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:T,...E},D)=>{let C=X1(),U=Z1(m,{relative:y}),j=h.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&ab.test(m),B=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let te=X.nativeEvent.submitter,W=(te==null?void 0:te.getAttribute("formmethod"))||h;C(te||X.currentTarget,{fetcherKey:e,method:W,navigate:n,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:T})};return N.createElement("form",{ref:D,method:j,action:U,onSubmit:i?g:B,...E,"data-discover":!z&&s==="render"?"true":void 0})});G1.displayName="Form";function $1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ob(s){let e=N.useContext(Ao);return Nt(e,$1(s)),e}function K1(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:h}={}){let m=_i(),g=Fn(),y=_c(s,{relative:c});return N.useCallback(_=>{if(T1(_,e)){_.preventDefault();let T=n!==void 0?n:oc(g)===oc(y);m(s,{replace:T,state:i,preventScrollReset:o,relative:c,viewTransition:h})}},[g,m,y,n,i,e,s,o,c,h])}function Gd(s){rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(Gm(s)),n=N.useRef(!1),i=Fn(),o=N.useMemo(()=>w1(i.search,n.current?null:e.current),[i.search]),c=_i(),h=N.useCallback((m,g)=>{const y=Gm(typeof m=="function"?m(o):m);n.current=!0,c("?"+y,g)},[c,o]);return[o,h]}var Q1=0,Y1=()=>`__${String(++Q1)}__`;function X1(){let{router:s}=ob("useSubmit"),{basename:e}=N.useContext(_s),n=d1();return N.useCallback(async(i,o={})=>{let{action:c,method:h,encType:m,formData:g,body:y}=N1(i,e);if(o.navigate===!1){let _=o.fetcherKey||Y1();await s.fetch(_,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function Z1(s,{relative:e}={}){let{basename:n}=N.useContext(_s),i=N.useContext(as);Nt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={..._c(s||".",{relative:e})},h=Fn();if(s==null){c.search=h.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(T=>T).forEach(T=>m.append("index",T));let _=m.toString();c.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:yr([n,c.pathname])),oc(c)}function W1(s,e={}){let n=N.useContext(Wx);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ob("useViewTransitionState"),o=_c(s,{relative:e.relative});if(!n.isTransitioning)return!1;let c=xr(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=xr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ed(o.pathname,h)!=null||Ed(o.pathname,c)!=null}[...M1];const J1=()=>{};var Yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},eA=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],m=s[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],h=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},cb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,_=c>>2,T=(c&3)<<4|m>>4;let E=(m&15)<<2|y>>6,D=y&63;g||(D=64,h||(E=64)),i.push(n[_],n[T],n[E],n[D])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(lb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):eA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||m==null||y==null||T==null)throw new tA;const E=c<<2|m>>4;if(i.push(E),y!==64){const D=m<<4&240|y>>2;if(i.push(D),T!==64){const C=y<<6&192|T;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class tA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(s){const e=lb(s);return cb.encodeByteArray(e,!0)},Td=function(s){return nA(s).replace(/\./g,"")},ub=function(s){try{return cb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=()=>sA().__FIREBASE_DEFAULTS__,iA=()=>{if(typeof process>"u"||typeof Yv>"u")return;const s=Yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},aA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&ub(s[1]);return e&&JSON.parse(e)},$d=()=>{try{return J1()||rA()||iA()||aA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},db=s=>{var e,n;return(n=(e=$d())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},oA=s=>{const e=db(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},hb=()=>{var s;return(s=$d())===null||s===void 0?void 0:s.config},fb=s=>{var e;return(e=$d())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(s){return s.endsWith(".cloudworkstations.dev")}async function mb(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Td(JSON.stringify(n)),Td(JSON.stringify(h)),""].join(".")}const ec={};function uA(){const s={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?s.emulator.push(e):s.prod.push(e);return s}function dA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Xv=!1;function pb(s,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||ec[s]===e||ec[s]||Xv)return;ec[s]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",c=uA().prod.length>0;function h(){const E=document.getElementById(i);E&&E.remove()}function m(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,D){E.setAttribute("width","24"),E.setAttribute("id",D),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Xv=!0,h()},E}function _(E,D){E.setAttribute("id",D),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=dA(i),D=n("text"),C=document.getElementById(D)||document.createElement("span"),U=n("learnmore"),j=document.getElementById(U)||document.createElement("a"),z=n("preprendIcon"),B=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const X=E.element;m(X),_(j,U);const te=y();g(B,z),X.append(B,C,j,te),document.body.appendChild(X)}c?(C.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function fA(){var s;const e=(s=$d())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const s=_n();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function vA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=bA,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?EA(c,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Sr(o,m,i)}}function EA(s,e){return s.replace(TA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const TA=/\{\$([^}]+)}/g;function wA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ra(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(Zv(c)&&Zv(h)){if(!ra(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Zv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Yl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function SA(s,e){const n=new AA(s,e);return n.subscribe.bind(n)}class AA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");NA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Nm),o.error===void 0&&(o.error=Nm),o.complete===void 0&&(o.complete=Nm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(s){return s&&s._delegate?s._delegate:s}class ia{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new lA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IA(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&h.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const h=this.instances.get(o);return h&&e(h,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CA(s){return s===na?void 0:s}function IA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Je||(Je={}));const jA={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},OA=Je.INFO,kA={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},MA=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=kA[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=OA,this._logHandler=MA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const PA=(s,e)=>e.some(n=>s instanceof n);let Wv,Jv;function VA(){return Wv||(Wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LA(){return Jv||(Jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gb=new WeakMap,$m=new WeakMap,yb=new WeakMap,Rm=new WeakMap,Ip=new WeakMap;function UA(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(ai(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&gb.set(n,s)}).catch(()=>{}),Ip.set(e,s),e}function BA(s){if($m.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});$m.set(s,e)}let Km={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return $m.get(s);if(e==="objectStoreNames")return s.objectStoreNames||yb.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function zA(s){Km=s(Km)}function qA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Cm(this),e,...n);return yb.set(i,e.sort?e.sort():[e]),ai(i)}:LA().includes(s)?function(...e){return s.apply(Cm(this),e),ai(gb.get(this))}:function(...e){return ai(s.apply(Cm(this),e))}}function HA(s){return typeof s=="function"?qA(s):(s instanceof IDBTransaction&&BA(s),PA(s,VA())?new Proxy(s,Km):s)}function ai(s){if(s instanceof IDBRequest)return UA(s);if(Rm.has(s))return Rm.get(s);const e=HA(s);return e!==s&&(Rm.set(s,e),Ip.set(e,s)),e}const Cm=s=>Ip.get(s);function FA(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),m=ai(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ai(h.result),g.oldVersion,g.newVersion,ai(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const GA=["get","getKey","getAll","getAllKeys","count"],$A=["put","add","delete","clear"],Im=new Map;function e_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Im.get(e))return Im.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=$A.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||GA.includes(n)))return;const c=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Im.set(e,c),c}zA(s=>({...s,get:(e,n,i)=>e_(e,n)||s.get(e,n,i),has:(e,n)=>!!e_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function QA(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",t_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Cp("@firebase/app"),YA="@firebase/app-compat",XA="@firebase/analytics-compat",ZA="@firebase/analytics",WA="@firebase/app-check-compat",JA="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",sN="@firebase/data-connect",rN="@firebase/database-compat",iN="@firebase/functions",aN="@firebase/functions-compat",oN="@firebase/installations",lN="@firebase/installations-compat",cN="@firebase/messaging",uN="@firebase/messaging-compat",dN="@firebase/performance",hN="@firebase/performance-compat",fN="@firebase/remote-config",mN="@firebase/remote-config-compat",pN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/ai",_N="@firebase/firestore-compat",xN="firebase",bN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",EN={[Qm]:"fire-core",[YA]:"fire-core-compat",[ZA]:"fire-analytics",[XA]:"fire-analytics-compat",[JA]:"fire-app-check",[WA]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[sN]:"fire-data-connect",[rN]:"fire-rtdb-compat",[iN]:"fire-fn",[aN]:"fire-fn-compat",[oN]:"fire-iid",[lN]:"fire-iid-compat",[cN]:"fire-fcm",[uN]:"fire-fcm-compat",[dN]:"fire-perf",[hN]:"fire-perf-compat",[fN]:"fire-rc",[mN]:"fire-rc-compat",[pN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[_N]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,TN=new Map,Xm=new Map;function n_(s,e){try{s.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function po(s){const e=s.name;if(Xm.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,s);for(const n of wd.values())n_(n,s);for(const n of TN.values())n_(n,s);return!0}function Dp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ms(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new xc("app","Firebase",wN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=bN;function vb(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ym,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw oi.create("bad-app-name",{appName:String(o)});if(n||(n=hb()),!n)throw oi.create("no-options");const c=wd.get(o);if(c){if(ra(n,c.options)&&ra(i,c.config))return c;throw oi.create("duplicate-app",{appName:o})}const h=new DA(o);for(const g of Xm.values())h.addComponent(g);const m=new SN(n,i,h);return wd.set(o,m),m}function _b(s=Ym){const e=wd.get(s);if(!e&&s===Ym&&hb())return vb();if(!e)throw oi.create("no-app",{appName:s});return e}function li(s,e,n){var i;let o=(i=EN[s])!==null&&i!==void 0?i:s;n&&(o+=`-${n}`);const c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}po(new ia(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="firebase-heartbeat-database",NN=1,lc="firebase-heartbeat-store";let Dm=null;function xb(){return Dm||(Dm=FA(AN,NN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(s=>{throw oi.create("idb-open",{originalErrorMessage:s.message})})),Dm}async function RN(s){try{const n=(await xb()).transaction(lc),i=await n.objectStore(lc).get(bb(s));return await n.done,i}catch(e){if(e instanceof Sr)br.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(n.message)}}}async function s_(s,e){try{const i=(await xb()).transaction(lc,"readwrite");await i.objectStore(lc).put(e,bb(s)),await i.done}catch(n){if(n instanceof Sr)br.warn(n.message);else{const i=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});br.warn(i.message)}}}function bb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=1024,IN=30;class DN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ON(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=r_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>IN){const h=kN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r_(),{heartbeatsToSend:i,unsentEntries:o}=jN(this._heartbeatsCache.heartbeats),c=Td(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return br.warn(n),""}}}function r_(){return new Date().toISOString().substring(0,10)}function jN(s,e=CN){const n=[];let i=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),i_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),i_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _A()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return s_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return s_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function i_(s){return Td(JSON.stringify({version:2,heartbeats:s})).length}function kN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(s){po(new ia("platform-logger",e=>new KA(e),"PRIVATE")),po(new ia("heartbeat",e=>new DN(e),"PRIVATE")),li(Qm,t_,s),li(Qm,t_,"esm2017"),li("fire-js","")}MN("");function jp(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(n[i[o]]=s[i[o]]);return n}function Eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PN=Eb,Tb=new xc("auth","Firebase",Eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Cp("@firebase/auth");function VN(s,...e){Sd.logLevel<=Je.WARN&&Sd.warn(`Auth (${Co}): ${s}`,...e)}function hd(s,...e){Sd.logLevel<=Je.ERROR&&Sd.error(`Auth (${Co}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(s,...e){throw Op(s,...e)}function Ls(s,...e){return Op(s,...e)}function wb(s,e,n){const i=Object.assign(Object.assign({},PN()),{[e]:n});return new xc("auth","Firebase",i).create(e,{appName:s.name})}function ci(s){return wb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Tb.create(s,...e)}function Me(s,e,...n){if(!s)throw Op(e,...n)}function pr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hd(e),new Error(e)}function Er(s,e){s||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function LN(){return a_()==="http:"||a_()==="https:"}function a_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LN()||pA()||"connection"in navigator)?navigator.onLine:!0}function BN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(s,e){Er(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HN=new Ec(3e4,6e4);function ua(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function bi(s,e,n,i,o={}){return Ab(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const m=bc(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:g},c);return mA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ro(s.emulatorConfig.host)&&(y.credentials="include"),Sb.fetch()(await Nb(s,s.config.apiHost,n,m),y)})}async function Ab(s,e,n){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},zN),e);try{const o=new GN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw nd(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw nd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw nd(s,"user-disabled",h);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw wb(s,_,y);ys(s,_)}}catch(o){if(o instanceof Sr)throw o;ys(s,"network-request-failed",{message:String(o)})}}async function Kd(s,e,n,i,o={}){const c=await bi(s,e,n,i,o);return"mfaPendingCredential"in c&&ys(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Nb(s,e,n,i){const o=`${e}${n}?${i}`,c=s,h=c.config.emulator?kp(s.config,o):`${s.config.apiScheme}://${o}`;return qN.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function FN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ls(this.auth,"network-request-failed")),HN.get())})}}function nd(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ls(s,e,i);return o.customData._tokenResponse=n,o}function o_(s){return s!==void 0&&s.enterprise!==void 0}class $N{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return FN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KN(s,e){return bi(s,"GET","/v2/recaptchaConfig",ua(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(s,e){return bi(s,"POST","/v1/accounts:delete",e)}async function Ad(s,e){return bi(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YN(s,e=!1){const n=Gt(s),i=await n.getIdToken(e),o=Mp(i);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:tc(jm(o.auth_time)),issuedAtTime:tc(jm(o.iat)),expirationTime:tc(jm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function jm(s){return Number(s)*1e3}function Mp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{const o=ub(n);return o?JSON.parse(o):(hd("Failed to decode base64 JWT payload"),null)}catch(o){return hd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function l_(s){const e=Mp(s);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&XN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function XN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(s){var e;const n=s.auth,i=await s.getIdToken(),o=await cc(s,Ad(n,{idToken:i}));Me(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const h=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Rb(c.providerUserInfo):[],m=JN(s.providerData,h),g=s.isAnonymous,y=!(s.email&&c.passwordHash)&&!(m!=null&&m.length),_=g?y:!1,T={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new Wm(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(s,T)}async function WN(s){const e=Gt(s);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Rb(s){return s.map(e=>{var{providerId:n}=e,i=jp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(s,e){const n=await Ab(s,{},async()=>{const i=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await Nb(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&Ro(s.emulatorConfig.host)&&(g.credentials="include"),Sb.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tR(s,e){return bi(s,"POST","/v2/accounts:revokeToken",ua(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=l_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await eR(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,h=new uo;return i&&(Me(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Me(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(s,e){Me(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ps{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,c=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Wm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YN(this,e)}reload(){return WN(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ps(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await cc(this,QN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,c,h,m,g,y,_;const T=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,D=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,C=(h=n.photoURL)!==null&&h!==void 0?h:void 0,U=(m=n.tenantId)!==null&&m!==void 0?m:void 0,j=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,z=(y=n.createdAt)!==null&&y!==void 0?y:void 0,B=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:X,emailVerified:te,isAnonymous:W,providerData:re,stsTokenManager:O}=n;Me(X&&O,e,"internal-error");const S=uo.fromJSON(this.name,O);Me(typeof X=="string",e,"internal-error"),ei(T,e.name),ei(E,e.name),Me(typeof te=="boolean",e,"internal-error"),Me(typeof W=="boolean",e,"internal-error"),ei(D,e.name),ei(C,e.name),ei(U,e.name),ei(j,e.name),ei(z,e.name),ei(B,e.name);const I=new ps({uid:X,auth:e,email:E,emailVerified:te,displayName:T,isAnonymous:W,photoURL:C,phoneNumber:D,tenantId:U,stsTokenManager:S,createdAt:z,lastLoginAt:B});return re&&Array.isArray(re)&&(I.providerData=re.map(P=>Object.assign({},P))),j&&(I._redirectEventId=j),I}static async _fromIdTokenResponse(e,n,i=!1){const o=new uo;o.updateFromServerResponse(n);const c=new ps({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Nd(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Rb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new uo;m.updateFromIdToken(i);const g=new ps({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Wm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map;function gr(s){Er(s instanceof Function,"Expected a class definition");let e=c_.get(s);return e?(Er(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,c_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Cb.type="NONE";const u_=Cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(s,e,n){return`firebase:${s}:${e}:${n}`}class ho{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=fd(this.userKey,o.apiKey,c),this.fullPersistenceKey=fd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ad(this.auth,{idToken:e}).catch(()=>{});return n?ps._fromGetAccountInfoResponse(this.auth,n,e):null}return ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ho(gr(u_),e,i);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||gr(u_);const h=fd(i,e.config.apiKey,e.name);let m=null;for(const y of n)try{const _=await y._get(h);if(_){let T;if(typeof _=="string"){const E=await Ad(e,{idToken:_}).catch(()=>{});if(!E)break;T=await ps._fromGetAccountInfoResponse(e,E,_)}else T=ps._fromJSON(e,_);y!==c&&(m=T),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new ho(c,e,i):(c=g[0],m&&await c._set(h,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new ho(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if(Pb(e))return"Webos";if(Db(e))return"Safari";if((e.includes("chrome/")||jb(e))&&!e.includes("edge/"))return"Chrome";if(kb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ib(s=_n()){return/firefox\//i.test(s)}function Db(s=_n()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jb(s=_n()){return/crios\//i.test(s)}function Ob(s=_n()){return/iemobile/i.test(s)}function kb(s=_n()){return/android/i.test(s)}function Mb(s=_n()){return/blackberry/i.test(s)}function Pb(s=_n()){return/webos/i.test(s)}function Pp(s=_n()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function nR(s=_n()){var e;return Pp(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sR(){return yA()&&document.documentMode===10}function Vb(s=_n()){return Pp(s)||kb(s)||Pb(s)||Mb(s)||/windows phone/i.test(s)||Ob(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(s,e=[]){let n;switch(s){case"Browser":n=d_(_n());break;case"Worker":n=`${d_(_n())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((h,m)=>{try{const g=e(c);h(g)}catch(g){m(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(s,e={}){return bi(s,"GET","/v2/passwordPolicy",ua(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=6;class oR{constructor(e){var n,i,o,c;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:aR,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,c,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h_(this),this.idTokenSubscription=new h_(this),this.beforeStateQueue=new rR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ad(this,{idToken:e}),i=await ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ms(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ms(this.app))return Promise.reject(ci(this));const n=e?Gt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ms(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iR(this),n=new oR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await tR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Io(s){return Gt(s)}class h_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(s){Qd=s}function Ub(s){return Qd.loadJS(s)}function uR(){return Qd.recaptchaEnterpriseScript}function dR(){return Qd.gapiScript}function hR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class fR{constructor(){this.enterprise=new mR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class mR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const pR="recaptcha-enterprise",Bb="NO_RECAPTCHA";class gR{constructor(e){this.type=pR,this.auth=Io(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{KN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new $N(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,h,m){const g=window.grecaptcha;o_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(Bb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fR().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(m=>{if(!n&&o_(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uR();g.length!==0&&(g+=m),Ub(g).then(()=>{o(m,c,h)}).catch(y=>{h(y)})}}).catch(m=>{h(m)})})}}async function f_(s,e,n,i=!1,o=!1){const c=new gR(s);let h;if(o)h=Bb;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function m_(s,e,n,i,o){var c;if(!((c=s._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await f_(s,e,n,n==="getOobCode");return i(s,h)}else return i(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await f_(s,e,n,n==="getOobCode");return i(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(s,e){const n=Dp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ra(c,e??{}))return o;ys(o,"already-initialized")}return n.initialize({options:e})}function vR(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _R(s,e,n){const i=Io(s);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=zb(e),{host:h,port:m}=xR(e),g=m===null?"":`:${m}`,y={url:`${c}//${h}${g}/`},_=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(ra(y,i.config.emulator)&&ra(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ro(h)?(mb(`${c}//${h}${g}`),pb("Auth",!0)):bR()}function zb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function xR(s){const e=zb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:p_(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:p_(h)}}}function p_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function bR(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function ER(s,e){return bi(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(s,e){return Kd(s,"POST","/v1/accounts:signInWithPassword",ua(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(s,e){return Kd(s,"POST","/v1/accounts:signInWithEmailLink",ua(s,e))}async function SR(s,e){return Kd(s,"POST","/v1/accounts:signInWithEmailLink",ua(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Vp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new uc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return m_(e,n,"signInWithPassword",TR);case"emailLink":return wR(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return m_(e,i,"signUpPassword",ER);case"emailLink":return SR(e,{idToken:n,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(s,e){return Kd(s,"POST","/v1/accounts:signInWithIdp",ua(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="http://localhost";class aa extends Vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ys("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,c=jp(n,["providerId","signInMethod"]);if(!i||!o)return null;const h=new aa(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:AR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RR(s){const e=Ql(Yl(s)).link,n=e?Ql(Yl(e)).deep_link_id:null,i=Ql(Yl(s)).deep_link_id;return(i?Ql(Yl(i)).link:null)||i||n||e||s}class Lp{constructor(e){var n,i,o,c,h,m;const g=Ql(Yl(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,_=(i=g.oobCode)!==null&&i!==void 0?i:null,T=NR((o=g.mode)!==null&&o!==void 0?o:null);Me(y&&_&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=_,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=RR(e);try{return new Lp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Lp.parseLink(n);return Me(i,"argument-error"),uc._fromEmailAndCode(e,i.code,i.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends qb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Tc{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aa._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ni.credential(n,i)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Tc{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.GITHUB_SIGN_IN_METHOD="github.com";si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Tc{constructor(){super("twitter.com")}static credential(e,n){return aa._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ri.credential(n,i)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await ps._fromIdTokenResponse(e,i,o),h=g_(i);return new go({user:c,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=g_(i);return new go({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function g_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Sr{constructor(e,n,i,o){var c;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Rd(e,n,i,o)}}function Hb(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(s,c,e,i):c})}async function CR(s,e,n=!1){const i=await cc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return go._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(s,e,n=!1){const{auth:i}=s;if(ms(i.app))return Promise.reject(ci(i));const o="reauthenticate";try{const c=await cc(s,Hb(i,o,e,s),n);Me(c.idToken,i,"internal-error");const h=Mp(c.idToken);Me(h,i,"internal-error");const{sub:m}=h;return Me(s.uid===m,i,"user-mismatch"),go._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ys(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(s,e,n=!1){if(ms(s.app))return Promise.reject(ci(s));const i="signIn",o=await Hb(s,i,e),c=await go._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function DR(s,e){return Fb(Io(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(s){const e=Io(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function OR(s,e,n){return ms(s.app)?Promise.reject(ci(s)):DR(Gt(s),Do.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jR(s),i})}function kR(s,e,n,i){return Gt(s).onIdTokenChanged(e,n,i)}function MR(s,e,n){return Gt(s).beforeAuthStateChanged(e,n)}function Yd(s,e,n,i){return Gt(s).onAuthStateChanged(e,n,i)}function Gb(s){return Gt(s).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=1e3,VR=10;class Kb extends $b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);sR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VR):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kb.type="LOCAL";const LR=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends $b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qb.type="SESSION";const Yb=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Xd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async y=>y(n.origin,c)),g=await UR(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,g)=>{const y=Up("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const E=T;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(E.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function zR(s){Us().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function qR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function FR(){return Xb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firebaseLocalStorageDb",GR=1,Id="firebaseLocalStorage",Wb="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zd(s,e){return s.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function $R(){const s=indexedDB.deleteDatabase(Zb);return new wc(s).toPromise()}function Jm(){const s=indexedDB.open(Zb,GR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Id,{keyPath:Wb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await $R(),e(await Jm()))})})}async function y_(s,e,n){const i=Zd(s,!0).put({[Wb]:e,value:n});return new wc(i).toPromise()}async function KR(s,e){const n=Zd(s,!1).get(e),i=await new wc(n).toPromise();return i===void 0?null:i.value}function v_(s,e){const n=Zd(s,!0).delete(e);return new wc(n).toPromise()}const QR=800,YR=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>YR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xd._getInstance(FR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qR(),!this.activeServiceWorker)return;this.sender=new BR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jm();return await y_(e,Cd,"1"),await v_(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>y_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>KR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Zd(o,!1).getAll();return new wc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const XR=Jb;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(s,e){return e?gr(e):(Me(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WR(s){return Fb(s.auth,new Bp(s),s.bypassAuthState)}function JR(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),IR(n,new Bp(s),s.bypassAuthState)}async function e2(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),CR(n,new Bp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WR;case"linkViaPopup":case"linkViaRedirect":return e2;case"reauthViaPopup":case"reauthViaRedirect":return JR;default:ys(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new Ec(2e3,1e4);class lo extends eE{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t2.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="pendingRedirect",md=new Map;class s2 extends eE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=md.get(this.auth._key());if(!e){try{const i=await r2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}md.set(this.auth._key(),e)}return this.bypassAuthState||md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r2(s,e){const n=o2(e),i=a2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function i2(s,e){md.set(s._key(),e)}function a2(s){return gr(s._redirectPersistence)}function o2(s){return fd(n2,s.config.apiKey,s.name)}async function l2(s,e,n=!1){if(ms(s.app))return Promise.reject(ci(s));const i=Io(s),o=ZR(i,e),h=await new s2(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=10*60*1e3;class u2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!tE(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ls(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c2&&this.cachedEventUids.clear(),this.cachedEventUids.has(__(e))}saveEventToCache(e){this.cachedEventUids.add(__(e)),this.lastProcessedEventTime=Date.now()}}function __(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function tE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function d2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(s,e={}){return bi(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m2=/^https?/;async function p2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await h2(s);for(const n of e)try{if(g2(n))return}catch{}ys(s,"unauthorized-domain")}function g2(s){const e=Zm(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!m2.test(n))return!1;if(f2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Ec(3e4,6e4);function x_(){const s=Us().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function v2(s){return new Promise((e,n)=>{var i,o,c;function h(){x_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x_(),n(Ls(s,"network-request-failed"))},timeout:y2.get()})}if(!((o=(i=Us().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Us().gapi)===null||c===void 0)&&c.load)h();else{const m=hR("iframefcb");return Us()[m]=()=>{gapi.load?h():n(Ls(s,"network-request-failed"))},Ub(`${dR()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw pd=null,e})}let pd=null;function _2(s){return pd=pd||v2(s),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Ec(5e3,15e3),b2="__/auth/iframe",E2="emulator/auth/iframe",T2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S2(s){const e=s.config;Me(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?kp(e,E2):`https://${s.config.authDomain}/${b2}`,i={apiKey:e.apiKey,appName:s.name,v:Co},o=w2.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${bc(i).slice(1)}`}async function A2(s){const e=await _2(s),n=Us().gapi;return Me(n,s,"internal-error"),e.open({where:document.body,url:S2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=Ls(s,"network-request-failed"),m=Us().setTimeout(()=>{c(h)},x2.get());function g(){Us().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R2=500,C2=600,I2="_blank",D2="http://localhost";class b_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j2(s,e,n,i=R2,o=C2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},N2),{width:i.toString(),height:o.toString(),top:c,left:h}),y=_n().toLowerCase();n&&(m=jb(y)?I2:n),Ib(y)&&(e=e||D2,g.scrollbars="yes");const _=Object.entries(g).reduce((E,[D,C])=>`${E}${D}=${C},`,"");if(nR(y)&&m!=="_self")return O2(e||"",m),new b_(null);const T=window.open(e||"",m,_);Me(T,s,"popup-blocked");try{T.focus()}catch{}return new b_(T)}function O2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__/auth/handler",M2="emulator/auth/handler",P2=encodeURIComponent("fac");async function E_(s,e,n,i,o,c){Me(s.config.authDomain,s,"auth-domain-config-required"),Me(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Co,eventId:o};if(e instanceof qb){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",wA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))h[_]=T}if(e instanceof Tc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(h.scopes=_.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await s._getAppCheckToken(),y=g?`#${P2}=${encodeURIComponent(g)}`:"";return`${V2(s)}?${bc(m).slice(1)}${y}`}function V2({config:s}){return s.emulator?kp(s,M2):`https://${s.authDomain}/${k2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class L2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=l2,this._overrideRedirectResult=i2}async _openPopup(e,n,i,o){var c;Er((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await E_(e,n,i,Zm(),o);return j2(e,h,Up())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await E_(e,n,i,Zm(),o);return zR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Er(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await A2(e),i=new u2(e);return n.register("authEvent",o=>(Me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Om,{type:Om},o=>{var c;const h=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Om];h!==void 0&&n(!!h),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vb()||Db()||Pp()}}const U2=L2;var T_="@firebase/auth",w_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q2(s){po(new ia("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Me(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lb(s)},y=new lR(i,o,c,g);return vR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),po(new ia("auth-internal",e=>{const n=Io(e.getProvider("auth").getImmediate());return(i=>new B2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(T_,w_,z2(s)),li(T_,w_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=5*60,F2=fb("authIdTokenMaxAge")||H2;let S_=null;const G2=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>F2)return;const o=n==null?void 0:n.token;S_!==o&&(S_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $2(s=_b()){const e=Dp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=yR(s,{popupRedirectResolver:U2,persistence:[XR,LR,Yb]}),i=fb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=G2(c.toString());MR(n,h,()=>h(n.currentUser)),kR(n,m=>h(m))}}const o=db("auth");return o&&_R(n,`http://${o}`),n}function K2(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}cR({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Ls("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",K2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q2("Browser");const A_="FLASH FLASH ";function Gn(s){N.useEffect(()=>{const e=s?`${s} | ${A_}`:A_;document.title=e},[s])}var Q2="firebase",Y2="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(Q2,Y2,"app");var N_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,nE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,S){function I(){}I.prototype=S.prototype,O.D=S.prototype,O.prototype=new I,O.prototype.constructor=O,O.C=function(P,L,q){for(var A=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)A[ve-2]=arguments[ve];return S.prototype[L].apply(P,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,S,I){I||(I=0);var P=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)P[L]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(L=0;16>L;++L)P[L]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=O.g[0],I=O.g[1],L=O.g[2];var q=O.g[3],A=S+(q^I&(L^q))+P[0]+3614090360&4294967295;S=I+(A<<7&4294967295|A>>>25),A=q+(L^S&(I^L))+P[1]+3905402710&4294967295,q=S+(A<<12&4294967295|A>>>20),A=L+(I^q&(S^I))+P[2]+606105819&4294967295,L=q+(A<<17&4294967295|A>>>15),A=I+(S^L&(q^S))+P[3]+3250441966&4294967295,I=L+(A<<22&4294967295|A>>>10),A=S+(q^I&(L^q))+P[4]+4118548399&4294967295,S=I+(A<<7&4294967295|A>>>25),A=q+(L^S&(I^L))+P[5]+1200080426&4294967295,q=S+(A<<12&4294967295|A>>>20),A=L+(I^q&(S^I))+P[6]+2821735955&4294967295,L=q+(A<<17&4294967295|A>>>15),A=I+(S^L&(q^S))+P[7]+4249261313&4294967295,I=L+(A<<22&4294967295|A>>>10),A=S+(q^I&(L^q))+P[8]+1770035416&4294967295,S=I+(A<<7&4294967295|A>>>25),A=q+(L^S&(I^L))+P[9]+2336552879&4294967295,q=S+(A<<12&4294967295|A>>>20),A=L+(I^q&(S^I))+P[10]+4294925233&4294967295,L=q+(A<<17&4294967295|A>>>15),A=I+(S^L&(q^S))+P[11]+2304563134&4294967295,I=L+(A<<22&4294967295|A>>>10),A=S+(q^I&(L^q))+P[12]+1804603682&4294967295,S=I+(A<<7&4294967295|A>>>25),A=q+(L^S&(I^L))+P[13]+4254626195&4294967295,q=S+(A<<12&4294967295|A>>>20),A=L+(I^q&(S^I))+P[14]+2792965006&4294967295,L=q+(A<<17&4294967295|A>>>15),A=I+(S^L&(q^S))+P[15]+1236535329&4294967295,I=L+(A<<22&4294967295|A>>>10),A=S+(L^q&(I^L))+P[1]+4129170786&4294967295,S=I+(A<<5&4294967295|A>>>27),A=q+(I^L&(S^I))+P[6]+3225465664&4294967295,q=S+(A<<9&4294967295|A>>>23),A=L+(S^I&(q^S))+P[11]+643717713&4294967295,L=q+(A<<14&4294967295|A>>>18),A=I+(q^S&(L^q))+P[0]+3921069994&4294967295,I=L+(A<<20&4294967295|A>>>12),A=S+(L^q&(I^L))+P[5]+3593408605&4294967295,S=I+(A<<5&4294967295|A>>>27),A=q+(I^L&(S^I))+P[10]+38016083&4294967295,q=S+(A<<9&4294967295|A>>>23),A=L+(S^I&(q^S))+P[15]+3634488961&4294967295,L=q+(A<<14&4294967295|A>>>18),A=I+(q^S&(L^q))+P[4]+3889429448&4294967295,I=L+(A<<20&4294967295|A>>>12),A=S+(L^q&(I^L))+P[9]+568446438&4294967295,S=I+(A<<5&4294967295|A>>>27),A=q+(I^L&(S^I))+P[14]+3275163606&4294967295,q=S+(A<<9&4294967295|A>>>23),A=L+(S^I&(q^S))+P[3]+4107603335&4294967295,L=q+(A<<14&4294967295|A>>>18),A=I+(q^S&(L^q))+P[8]+1163531501&4294967295,I=L+(A<<20&4294967295|A>>>12),A=S+(L^q&(I^L))+P[13]+2850285829&4294967295,S=I+(A<<5&4294967295|A>>>27),A=q+(I^L&(S^I))+P[2]+4243563512&4294967295,q=S+(A<<9&4294967295|A>>>23),A=L+(S^I&(q^S))+P[7]+1735328473&4294967295,L=q+(A<<14&4294967295|A>>>18),A=I+(q^S&(L^q))+P[12]+2368359562&4294967295,I=L+(A<<20&4294967295|A>>>12),A=S+(I^L^q)+P[5]+4294588738&4294967295,S=I+(A<<4&4294967295|A>>>28),A=q+(S^I^L)+P[8]+2272392833&4294967295,q=S+(A<<11&4294967295|A>>>21),A=L+(q^S^I)+P[11]+1839030562&4294967295,L=q+(A<<16&4294967295|A>>>16),A=I+(L^q^S)+P[14]+4259657740&4294967295,I=L+(A<<23&4294967295|A>>>9),A=S+(I^L^q)+P[1]+2763975236&4294967295,S=I+(A<<4&4294967295|A>>>28),A=q+(S^I^L)+P[4]+1272893353&4294967295,q=S+(A<<11&4294967295|A>>>21),A=L+(q^S^I)+P[7]+4139469664&4294967295,L=q+(A<<16&4294967295|A>>>16),A=I+(L^q^S)+P[10]+3200236656&4294967295,I=L+(A<<23&4294967295|A>>>9),A=S+(I^L^q)+P[13]+681279174&4294967295,S=I+(A<<4&4294967295|A>>>28),A=q+(S^I^L)+P[0]+3936430074&4294967295,q=S+(A<<11&4294967295|A>>>21),A=L+(q^S^I)+P[3]+3572445317&4294967295,L=q+(A<<16&4294967295|A>>>16),A=I+(L^q^S)+P[6]+76029189&4294967295,I=L+(A<<23&4294967295|A>>>9),A=S+(I^L^q)+P[9]+3654602809&4294967295,S=I+(A<<4&4294967295|A>>>28),A=q+(S^I^L)+P[12]+3873151461&4294967295,q=S+(A<<11&4294967295|A>>>21),A=L+(q^S^I)+P[15]+530742520&4294967295,L=q+(A<<16&4294967295|A>>>16),A=I+(L^q^S)+P[2]+3299628645&4294967295,I=L+(A<<23&4294967295|A>>>9),A=S+(L^(I|~q))+P[0]+4096336452&4294967295,S=I+(A<<6&4294967295|A>>>26),A=q+(I^(S|~L))+P[7]+1126891415&4294967295,q=S+(A<<10&4294967295|A>>>22),A=L+(S^(q|~I))+P[14]+2878612391&4294967295,L=q+(A<<15&4294967295|A>>>17),A=I+(q^(L|~S))+P[5]+4237533241&4294967295,I=L+(A<<21&4294967295|A>>>11),A=S+(L^(I|~q))+P[12]+1700485571&4294967295,S=I+(A<<6&4294967295|A>>>26),A=q+(I^(S|~L))+P[3]+2399980690&4294967295,q=S+(A<<10&4294967295|A>>>22),A=L+(S^(q|~I))+P[10]+4293915773&4294967295,L=q+(A<<15&4294967295|A>>>17),A=I+(q^(L|~S))+P[1]+2240044497&4294967295,I=L+(A<<21&4294967295|A>>>11),A=S+(L^(I|~q))+P[8]+1873313359&4294967295,S=I+(A<<6&4294967295|A>>>26),A=q+(I^(S|~L))+P[15]+4264355552&4294967295,q=S+(A<<10&4294967295|A>>>22),A=L+(S^(q|~I))+P[6]+2734768916&4294967295,L=q+(A<<15&4294967295|A>>>17),A=I+(q^(L|~S))+P[13]+1309151649&4294967295,I=L+(A<<21&4294967295|A>>>11),A=S+(L^(I|~q))+P[4]+4149444226&4294967295,S=I+(A<<6&4294967295|A>>>26),A=q+(I^(S|~L))+P[11]+3174756917&4294967295,q=S+(A<<10&4294967295|A>>>22),A=L+(S^(q|~I))+P[2]+718787259&4294967295,L=q+(A<<15&4294967295|A>>>17),A=I+(q^(L|~S))+P[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(L+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+q&4294967295}i.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var I=S-this.blockSize,P=this.B,L=this.h,q=0;q<S;){if(L==0)for(;q<=I;)o(this,O,q),q+=this.blockSize;if(typeof O=="string"){for(;q<S;)if(P[L++]=O.charCodeAt(q++),L==this.blockSize){o(this,P),L=0;break}}else for(;q<S;)if(P[L++]=O[q++],L==this.blockSize){o(this,P),L=0;break}}this.h=L,this.o+=S},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var I=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=I&255,I/=256;for(this.u(O),O=Array(16),S=I=0;4>S;++S)for(var P=0;32>P;P+=8)O[I++]=this.g[S]>>>P&255;return O};function c(O,S){var I=m;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=S(O)}function h(O,S){this.h=S;for(var I=[],P=!0,L=O.length-1;0<=L;L--){var q=O[L]|0;P&&q==S||(I[L]=q,P=!1)}this.g=I}var m={};function g(O){return-128<=O&&128>O?c(O,function(S){return new h([S|0],0>S?-1:0)}):new h([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return j(y(-O));for(var S=[],I=1,P=0;O>=I;P++)S[P]=O/I|0,I*=4294967296;return new h(S,0)}function _(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return j(_(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(S,8)),P=T,L=0;L<O.length;L+=8){var q=Math.min(8,O.length-L),A=parseInt(O.substring(L,L+q),S);8>q?(q=y(Math.pow(S,q)),P=P.j(q).add(y(A))):(P=P.j(I),P=P.add(y(A)))}return P}var T=g(0),E=g(1),D=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-j(this).m();for(var O=0,S=1,I=0;I<this.g.length;I++){var P=this.i(I);O+=(0<=P?P:4294967296+P)*S,S*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(U(this))return"-"+j(this).toString(O);for(var S=y(Math.pow(O,6)),I=this,P="";;){var L=te(I,S).g;I=z(I,L.j(S));var q=((0<I.g.length?I.g[0]:I.h)>>>0).toString(O);if(I=L,C(I))return q+P;for(;6>q.length;)q="0"+q;P=q+P}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function U(O){return O.h==-1}s.l=function(O){return O=z(this,O),U(O)?-1:C(O)?0:1};function j(O){for(var S=O.g.length,I=[],P=0;P<S;P++)I[P]=~O.g[P];return new h(I,~O.h).add(E)}s.abs=function(){return U(this)?j(this):this},s.add=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],P=0,L=0;L<=S;L++){var q=P+(this.i(L)&65535)+(O.i(L)&65535),A=(q>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);P=A>>>16,q&=65535,A&=65535,I[L]=A<<16|q}return new h(I,I[I.length-1]&-2147483648?-1:0)};function z(O,S){return O.add(j(S))}s.j=function(O){if(C(this)||C(O))return T;if(U(this))return U(O)?j(this).j(j(O)):j(j(this).j(O));if(U(O))return j(this.j(j(O)));if(0>this.l(D)&&0>O.l(D))return y(this.m()*O.m());for(var S=this.g.length+O.g.length,I=[],P=0;P<2*S;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<O.g.length;L++){var q=this.i(P)>>>16,A=this.i(P)&65535,ve=O.i(L)>>>16,_e=O.i(L)&65535;I[2*P+2*L]+=A*_e,B(I,2*P+2*L),I[2*P+2*L+1]+=q*_e,B(I,2*P+2*L+1),I[2*P+2*L+1]+=A*ve,B(I,2*P+2*L+1),I[2*P+2*L+2]+=q*ve,B(I,2*P+2*L+2)}for(P=0;P<S;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=S;P<2*S;P++)I[P]=0;return new h(I,0)};function B(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function X(O,S){this.g=O,this.h=S}function te(O,S){if(C(S))throw Error("division by zero");if(C(O))return new X(T,T);if(U(O))return S=te(j(O),S),new X(j(S.g),j(S.h));if(U(S))return S=te(O,j(S)),new X(j(S.g),S.h);if(30<O.g.length){if(U(O)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var I=E,P=S;0>=P.l(O);)I=W(I),P=W(P);var L=re(I,1),q=re(P,1);for(P=re(P,2),I=re(I,2);!C(P);){var A=q.add(P);0>=A.l(O)&&(L=L.add(I),q=A),P=re(P,1),I=re(I,1)}return S=z(O,L.j(S)),new X(L,S)}for(L=T;0<=O.l(S);){for(I=Math.max(1,Math.floor(O.m()/S.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),q=y(I),A=q.j(S);U(A)||0<A.l(O);)I-=P,q=y(I),A=q.j(S);C(q)&&(q=E),L=L.add(q),O=z(O,A)}return new X(L,O)}s.A=function(O){return te(this,O).h},s.and=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)&O.i(P);return new h(I,this.h&O.h)},s.or=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)|O.i(P);return new h(I,this.h|O.h)},s.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)^O.i(P);return new h(I,this.h^O.h)};function W(O){for(var S=O.g.length+1,I=[],P=0;P<S;P++)I[P]=O.i(P)<<1|O.i(P-1)>>>31;return new h(I,O.h)}function re(O,S){var I=S>>5;S%=32;for(var P=O.g.length-I,L=[],q=0;q<P;q++)L[q]=0<S?O.i(q+I)>>>S|O.i(q+I+1)<<32-S:O.i(q+I);return new h(L,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,nE=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,ui=h}).apply(typeof N_<"u"?N_:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sE,Xl,rE,gd,ep,iE,aE,oE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,x){return u==Array.prototype||u==Object.prototype||(u[v]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function o(u,v){if(v)e:{var x=i;u=u.split(".");for(var R=0;R<u.length-1;R++){var G=u[R];if(!(G in x))break e;x=x[G]}u=u[u.length-1],R=x[u],v=v(R),v!=R&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var x=0,R=!1,G={next:function(){if(!R&&x<u.length){var se=x++;return{value:v(se,u[se]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function _(u,v,x){return u.call.apply(u.bind,arguments)}function T(u,v,x){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),u.apply(v,G)}}return function(){return u.apply(v,arguments)}}function E(u,v,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,E.apply(null,arguments)}function D(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function C(u,v){function x(){}x.prototype=v.prototype,u.aa=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(R,G,se){for(var be=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)be[tt-2]=arguments[tt];return v.prototype[G].apply(R,be)}}function U(u){const v=u.length;if(0<v){const x=Array(v);for(let R=0;R<v;R++)x[R]=u[R];return x}return[]}function j(u,v){for(let x=1;x<arguments.length;x++){const R=arguments[x];if(g(R)){const G=u.length||0,se=R.length||0;u.length=G+se;for(let be=0;be<se;be++)u[G+be]=R[be]}else u.push(R)}}class z{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var W=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function re(u,v,x){for(const R in u)v.call(x,u[R],R,u)}function O(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function S(u){const v={};for(const x in u)v[x]=u[x];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,v){let x,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(x in R)u[x]=R[x];for(let se=0;se<I.length;se++)x=I[se],Object.prototype.hasOwnProperty.call(R,x)&&(u[x]=R[x])}}function L(u){var v=1;u=u.split(":");const x=[];for(;0<v&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function q(u){m.setTimeout(()=>{throw u},0)}function A(){var u=fe;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class ve{constructor(){this.h=this.g=null}add(v,x){const R=_e.get();R.set(v,x),this.h?this.h.next=R:this.g=R,this.h=R}}var _e=new z(()=>new $,u=>u.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,me=!1,fe=new ve,M=()=>{const u=m.Promise.resolve(void 0);ee=()=>{u.then(ne)}};var ne=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(x){q(x)}var v=_e;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}me=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};m.addEventListener("test",x,v),m.removeEventListener("test",x,v)}catch{}return u}();function ge(u,v){if(k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(W){e:{try{te(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement);this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ge.aa.h.call(this)}}C(ge,k);var pe={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ue=0;function xe(u,v,x,R,G){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!R,this.ha=G,this.key=++ue,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,v,x,R,G){var se=u.toString();u=this.g[se],u||(u=this.g[se]=[],this.h++);var be=Ie(u,v,R,G);return-1<be?(v=u[be],x||(v.fa=!1)):(v=new xe(v,this.src,se,!!R,G),v.fa=x,u.push(v)),v};function Ae(u,v){var x=v.type;if(x in u.g){var R=u.g[x],G=Array.prototype.indexOf.call(R,v,void 0),se;(se=0<=G)&&Array.prototype.splice.call(R,G,1),se&&(ye(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Ie(u,v,x,R){for(var G=0;G<u.length;++G){var se=u[G];if(!se.da&&se.listener==v&&se.capture==!!x&&se.ha==R)return G}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),ht={};function Ge(u,v,x,R,G){if(Array.isArray(v)){for(var se=0;se<v.length;se++)Ge(u,v[se],x,R,G);return null}return x=Be(x),u&&u[ie]?u.K(v,x,y(R)?!!R.capture:!1,G):Ye(u,v,x,!1,R,G)}function Ye(u,v,x,R,G,se){if(!v)throw Error("Invalid event type");var be=y(G)?!!G.capture:!!G,tt=Ot(u);if(tt||(u[Ue]=tt=new Te(u)),x=tt.add(v,x,R,be,se),x.proxy)return x;if(R=It(),x.proxy=R,R.src=u,R.listener=x,u.addEventListener)Q||(G=be),G===void 0&&(G=!1),u.addEventListener(v.toString(),R,G);else if(u.attachEvent)u.attachEvent(Tt(v.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function It(){function u(x){return v.call(u.src,u.listener,x)}const v=Nn;return u}function lt(u,v,x,R,G){if(Array.isArray(v))for(var se=0;se<v.length;se++)lt(u,v[se],x,R,G);else R=y(R)?!!R.capture:!!R,x=Be(x),u&&u[ie]?(u=u.i,v=String(v).toString(),v in u.g&&(se=u.g[v],x=Ie(se,x,R,G),-1<x&&(ye(se[x]),Array.prototype.splice.call(se,x,1),se.length==0&&(delete u.g[v],u.h--)))):u&&(u=Ot(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ie(v,x,R,G)),(x=-1<u?v[u]:null)&&Lt(x))}function Lt(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[ie])Ae(v.i,u);else{var x=u.type,R=u.proxy;v.removeEventListener?v.removeEventListener(x,R,u.capture):v.detachEvent?v.detachEvent(Tt(x),R):v.addListener&&v.removeListener&&v.removeListener(R),(x=Ot(v))?(Ae(x,u),x.h==0&&(x.src=null,v[Ue]=null)):ye(u)}}}function Tt(u){return u in ht?ht[u]:ht[u]="on"+u}function Nn(u,v){if(u.da)u=!0;else{v=new ge(v,this);var x=u.listener,R=u.ha||u.src;u.fa&&Lt(u),u=x.call(R,v)}return u}function Ot(u){return u=u[Ue],u instanceof Te?u:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(u){return typeof u=="function"?u:(u[Rn]||(u[Rn]=function(v){return u.handleEvent(v)}),u[Rn])}function Le(){he.call(this),this.i=new Te(this),this.M=this,this.F=null}C(Le,he),Le.prototype[ie]=!0,Le.prototype.removeEventListener=function(u,v,x,R){lt(this,u,v,x,R)};function ke(u,v){var x,R=u.F;if(R)for(x=[];R;R=R.F)x.push(R);if(u=u.M,R=v.type||v,typeof v=="string")v=new k(v,u);else if(v instanceof k)v.target=v.target||u;else{var G=v;v=new k(R,u),P(v,G)}if(G=!0,x)for(var se=x.length-1;0<=se;se--){var be=v.g=x[se];G=it(be,R,!0,v)&&G}if(be=v.g=u,G=it(be,R,!0,v)&&G,G=it(be,R,!1,v)&&G,x)for(se=0;se<x.length;se++)be=v.g=x[se],G=it(be,R,!1,v)&&G}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var x=u.g[v],R=0;R<x.length;R++)ye(x[R]);delete u.g[v],u.h--}}this.F=null},Le.prototype.K=function(u,v,x,R){return this.i.add(String(u),v,!1,x,R)},Le.prototype.L=function(u,v,x,R){return this.i.add(String(u),v,!0,x,R)};function it(u,v,x,R){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,se=0;se<v.length;++se){var be=v[se];if(be&&!be.da&&be.capture==x){var tt=be.listener,Kt=be.ha||be.src;be.fa&&Ae(u.i,be),G=tt.call(Kt,R)!==!1&&G}}return G&&!R.defaultPrevented}function _t(u,v,x){if(typeof u=="function")x&&(u=E(u,x));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(u,v||0)}function os(u){u.g=_t(()=>{u.g=null,u.i&&(u.i=!1,os(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class fa extends he{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:os(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(u){he.call(this),this.h=u,this.g={}}C(Hs,he);var Cn=[];function xs(u){re(u.g,function(v,x){this.g.hasOwnProperty(x)&&Lt(v)},u),u.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),xs(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ls=m.JSON.stringify,ma=m.JSON.parse,Ai=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Vo(){}Vo.prototype.h=null;function Lo(u){return u.h||(u.h=u.i())}function Uo(){}var Fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gs(){k.call(this,"d")}C(Gs,k);function Bo(){k.call(this,"c")}C(Bo,k);var bs={},zo=null;function Ar(){return zo=zo||new Le}bs.La="serverreachability";function pa(u){k.call(this,bs.La,u)}C(pa,k);function Nr(u){const v=Ar();ke(v,new pa(v))}bs.STAT_EVENT="statevent";function kc(u,v){k.call(this,bs.STAT_EVENT,u),this.stat=v}C(kc,k);function St(u){const v=Ar();ke(v,new kc(v,u))}bs.Ma="timingevent";function $t(u,v){k.call(this,bs.Ma,u),this.size=v}C($t,k);function Ut(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},v)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function qo(u,v,x,R,G,se){u.info(function(){if(u.g)if(se)for(var be="",tt=se.split("&"),Kt=0;Kt<tt.length;Kt++){var nt=tt[Kt].split("=");if(1<nt.length){var Jt=nt[0];nt=nt[1];var Qt=Jt.split("_");be=2<=Qt.length&&Qt[1]=="type"?be+(Jt+"="+nt+"&"):be+(Jt+"=redacted&")}}else be=null;else be=se;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+v+`
`+x+`
`+be})}function bh(u,v,x,R,G,se,be){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+v+`
`+x+`
`+se+" "+be})}function Rr(u,v,x,R){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ni(u,x)+(R?" "+R:"")})}function Mc(u,v){u.info(function(){return"TIMEOUT: "+v})}$n.prototype.info=function(){};function Ni(u,v){if(!u.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var R=x[u];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var se=G[0];if(se!="noop"&&se!="stop"&&se!="close")for(var be=1;be<G.length;be++)G[be]=""}}}}return ls(x)}catch{return v}}var Cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$s={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Es;function Ts(){}C(Ts,Vo),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},Es=new Ts;function xn(u,v,x,R){this.j=u,this.i=v,this.l=x,this.R=R||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kt}function kt(){this.i=null,this.g="",this.h=!1}var Ho={},ga={};function cs(u,v,x){u.L=1,u.v=ji(Mn(v)),u.m=x,u.P=!0,Ks(u,null)}function Ks(u,v){u.F=Date.now(),Ri(u),u.A=Mn(u.v);var x=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Yo(x.i,"t",R),u.C=0,x=u.j.J,u.h=new kt,u.g=Zc(u.j,x?v:null,!u.m),0<u.O&&(u.M=new fa(E(u.Y,u,u.g),u.O)),v=u.U,x=u.g,R=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(Cn[0]=G.toString()),G=Cn);for(var se=0;se<G.length;se++){var be=Ge(x,G[se],R||v.handleEvent,!1,v.h||v);if(!be)break;v.g[be.key]=be}v=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Nr(),qo(u.i,u.u,u.A,u.l,u.R,u.m)}xn.prototype.ca=function(u){u=u.target;const v=this.M;v&&Xn(u)==3?v.j():this.Y(u)},xn.prototype.Y=function(u){try{if(u==this.g)e:{const Qt=Xn(this.g);var v=this.g.Ba();const tr=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Hc(this.g)))){this.J||Qt!=4||v==7||(v==8||0>=tr?Nr(3):Nr(2)),Ir(this);var x=this.g.Z();this.X=x;t:if(Pc(this)){var R=Hc(this.g);u="";var G=R.length,se=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),ws(this);var be="";break t}this.h.i=new m.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,u+=this.h.i.decode(R[v],{stream:!(se&&v==G-1)});R.length=0,this.h.g+=u,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=x==200,bh(this.i,this.u,this.A,this.l,this.R,Qt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Kt=this.g;if((tt=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(tt)){var nt=tt;break t}}nt=null}if(x=nt)Rr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,x);else{this.o=!1,this.s=3,St(12),rn(this),ws(this);break e}}if(this.P){x=!0;let an;for(;!this.J&&this.C<be.length;)if(an=Vc(this,be),an==ga){Qt==4&&(this.s=4,St(14),x=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Ho){this.s=4,St(15),Rr(this.i,this.l,be,"[Invalid Chunk]"),x=!1;break}else Rr(this.i,this.l,an,null),Ci(this,an);if(Pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||be.length!=0||this.h.h||(this.s=1,St(16),x=!1),this.o=this.o&&x,!x)Rr(this.i,this.l,be,"[Invalid Chunked Response]"),rn(this),ws(this);else if(0<be.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Bi(Jt),Jt.M=!0,St(11))}}else Rr(this.i,this.l,be,null),Ci(this,be);Qt==4&&rn(this),this.o&&!this.J&&(Qt==4?Qc(this.j,this):(this.o=!1,Ri(this)))}else Ah(this.g),x==400&&0<be.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),rn(this),ws(this)}}}catch{}finally{}};function Pc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Vc(u,v){var x=u.C,R=v.indexOf(`
`,x);return R==-1?ga:(x=Number(v.substring(x,R)),isNaN(x)?Ho:(R+=1,R+x>v.length?ga:(v=v.slice(R,R+x),u.C=R+x,v)))}xn.prototype.cancel=function(){this.J=!0,rn(this)};function Ri(u){u.S=Date.now()+u.I,Lc(u,u.I)}function Lc(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ut(E(u.ba,u),v)}function Ir(u){u.B&&(m.clearTimeout(u.B),u.B=null)}xn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Mc(this.i,this.A),this.L!=2&&(Nr(),St(17)),rn(this),this.s=2,ws(this)):Lc(this,this.S-u)};function ws(u){u.j.G==0||u.J||Qc(u.j,u)}function rn(u){Ir(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,xs(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function Ci(u,v){try{var x=u.j;if(x.G!=0&&(x.g==u||Fo(x.h,u))){if(!u.K&&Fo(x.h,u)&&x.G==3){try{var R=x.Da.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)Ra(x),Aa(x);else break e;el(x),St(18)}}else x.za=G[1],0<x.za-x.T&&37500>G[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ut(E(x.Za,x),6e3));if(1>=va(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else er(x,11)}else if((u.K||x.g==u)&&Ra(x),!B(v))for(G=x.Da.g.parse(v),v=0;v<G.length;v++){let nt=G[v];if(x.T=nt[0],nt=nt[1],x.G==2)if(nt[0]=="c"){x.K=nt[1],x.ia=nt[2];const Jt=nt[3];Jt!=null&&(x.la=Jt,x.j.info("VER="+x.la));const Qt=nt[4];Qt!=null&&(x.Aa=Qt,x.j.info("SVER="+x.Aa));const tr=nt[5];tr!=null&&typeof tr=="number"&&0<tr&&(R=1.5*tr,x.L=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const an=u.g;if(an){const Ds=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var se=R.h;se.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(_a(se,se.h),se.h=null))}if(R.D){const nl=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(R.ya=nl,pt(R.I,R.D,nl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),R=x;var be=u;if(R.qa=Xc(R,R.J?R.ia:null,R.W),be.K){bn(R.h,be);var tt=be,Kt=R.L;Kt&&(tt.I=Kt),tt.B&&(Ir(tt),Ri(tt)),R.g=be}else $c(R);0<x.i.length&&Na(x)}else nt[0]!="stop"&&nt[0]!="close"||er(x,7);else x.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?er(x,7):Wo(x):nt[0]!="noop"&&x.l&&x.l.ta(nt),x.v=0)}}Nr(4)}catch{}}var Uc=class{constructor(u,v){this.g=u,this.map=v}};function Qs(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ya(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function va(u){return u.h?1:u.g?u.g.size:0}function Fo(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function _a(u,v){u.g?u.g.add(v):u.h=v}function bn(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Qs.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Go(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.D);return v}return U(u.i)}function Eh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],x=u.length,R=0;R<x;R++)v.push(u[R]);return v}v=[],x=0;for(R in u)v[x++]=u[R];return v}function xa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var x=0;x<u;x++)v.push(x);return v}v=[],x=0;for(const R in u)v[x++]=R;return v}}}function $o(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var x=xa(u),R=Eh(u),G=R.length,se=0;se<G;se++)v.call(void 0,R[se],x&&x[se],u)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Th(u,v){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var R=u[x].indexOf("="),G=null;if(0<=R){var se=u[x].substring(0,R);G=u[x].substring(R+1)}else se=u[x];v(se,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Bt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bt){this.h=u.h,Di(this,u.j),this.o=u.o,this.g=u.g,Dr(this,u.s),this.l=u.l;var v=u.i,x=new Xs;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),Ys(this,x),this.m=u.m}else u&&(v=String(u).match(Ii))?(this.h=!1,Di(this,v[1]||"",!0),this.o=Kn(v[2]||""),this.g=Kn(v[3]||"",!0),Dr(this,v[4]),this.l=Kn(v[5]||"",!0),Ys(this,v[6]||"",!0),this.m=Kn(v[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}Bt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(Oi(v,Ko,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Oi(v,Ko,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Oi(x,x.charAt(0)=="/"?wh:Qo,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Oi(x,ba)),u.join("")};function Mn(u){return new Bt(u)}function Di(u,v,x){u.j=x?Kn(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Dr(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Ys(u,v,x){v instanceof Xs?(u.i=v,zc(u.i,u.h)):(x||(v=Oi(v,Sh)),u.i=new Xs(v,u.h))}function pt(u,v,x){u.i.set(v,x)}function ji(u){return pt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Kn(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oi(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,Bc),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ko=/[#\/\?@]/g,Qo=/[#\?:]/g,wh=/[#\?]/g,Sh=/[#\?@]/g,ba=/#/g;function Xs(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Qn(u){u.g||(u.g=new Map,u.h=0,u.i&&Th(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Xs.prototype,s.add=function(u,v){Qn(this),this.i=null,u=Ss(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function Zs(u,v){Qn(u),v=Ss(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function Ws(u,v){return Qn(u),v=Ss(u,v),u.g.has(v)}s.forEach=function(u,v){Qn(this),this.g.forEach(function(x,R){x.forEach(function(G){u.call(v,G,R,this)},this)},this)},s.na=function(){Qn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let R=0;R<v.length;R++){const G=u[R];for(let se=0;se<G.length;se++)x.push(v[R])}return x},s.V=function(u){Qn(this);let v=[];if(typeof u=="string")Ws(this,u)&&(v=v.concat(this.g.get(Ss(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)v=v.concat(u[x])}return v},s.set=function(u,v){return Qn(this),this.i=null,u=Ss(this,u),Ws(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},s.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function Yo(u,v,x){Zs(u,v),0<x.length&&(u.i=null,u.g.set(Ss(u,v),U(x)),u.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var R=v[x];const se=encodeURIComponent(String(R)),be=this.V(R);for(R=0;R<be.length;R++){var G=se;be[R]!==""&&(G+="="+encodeURIComponent(String(be[R]))),u.push(G)}}return this.i=u.join("&")};function Ss(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function zc(u,v){v&&!u.j&&(Qn(u),u.i=null,u.g.forEach(function(x,R){var G=R.toLowerCase();R!=G&&(Zs(this,R),Yo(this,G,x))},u)),u.j=v}function ki(u,v){const x=new $n;if(m.Image){const R=new Image;R.onload=D(Yn,x,"TestLoadImage: loaded",!0,v,R),R.onerror=D(Yn,x,"TestLoadImage: error",!1,v,R),R.onabort=D(Yn,x,"TestLoadImage: abort",!1,v,R),R.ontimeout=D(Yn,x,"TestLoadImage: timeout",!1,v,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else v(!1)}function us(u,v){const x=new $n,R=new AbortController,G=setTimeout(()=>{R.abort(),Yn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:R.signal}).then(se=>{clearTimeout(G),se.ok?Yn(x,"TestPingServer: ok",!0,v):Yn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Yn(x,"TestPingServer: error",!1,v)})}function Yn(u,v,x,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(x)}catch{}}function Mi(){this.g=new Ai}function As(u,v,x){const R=x||"";try{$o(u,function(G,se){let be=G;y(G)&&(be=ls(G)),v.push(R+se+"="+encodeURIComponent(be))})}catch(G){throw v.push(R+"type="+encodeURIComponent("_badmap")),G}}function jr(u){this.l=u.Ub||null,this.j=u.eb||!1}C(jr,Vo),jr.prototype.g=function(){return new Js(this.l,this.j)},jr.prototype.i=function(u){return function(){return u}}({});function Js(u,v){Le.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Js,Le),s=Js.prototype,s.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Rs(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Ns(this):Rs(this),this.readyState==3&&Xo(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Ns(this))},s.Qa=function(u){this.g&&(this.response=u,Ns(this))},s.ga=function(){this.g&&Ns(this)};function Ns(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Rs(u)}s.setRequestHeader=function(u,v){this.u.append(u,v)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function Rs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Zo(u){let v="";return re(u,function(x,R){v+=R,v+=":",v+=x,v+=`\r
`}),v}function Wt(u,v,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=Zo(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):pt(u,v,x))}function ct(u){Le.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ct,Le);var Ea=/^https?$/i,Pi=["POST","PUT"];s=ct.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,v,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Es.g(),this.v=this.o?Lo(this.o):Lo(Es),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(se){qc(this,se);return}if(u=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)x.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const se of R.keys())x.set(se,R.get(se));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find(se=>se.toLowerCase()=="content-type"),G=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Pi,v,void 0))||R||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,be]of x)this.g.setRequestHeader(se,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vi(this),this.u=!0,this.g.send(u),this.u=!1}catch(se){qc(this,se)}};function qc(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Ta(u),Cs(u)}function Ta(u){u.A||(u.A=!0,ke(u,"complete"),ke(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ke(this,"complete"),ke(this,"abort"),Cs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),ct.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?wa(this):this.bb())},s.bb=function(){wa(this)};function wa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xn(u)!=4||u.Z()!=2)){if(u.u&&Xn(u)==4)_t(u.Ea,0,u);else if(ke(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const be=u.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var R;if(R=be===0){var G=String(u.D).match(Ii)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),R=!Ea.test(G?G.toLowerCase():"")}x=R}if(x)ke(u,"complete"),ke(u,"success");else{u.m=6;try{var se=2<Xn(u)?u.g.statusText:""}catch{se=""}u.l=se+" ["+u.Z()+"]",Ta(u)}}finally{Cs(u)}}}}function Cs(u,v){if(u.g){Vi(u);const x=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||ke(u,"ready");try{x.onreadystatechange=R}catch{}}}function Vi(u){u.I&&(m.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),ma(v)}};function Hc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ah(u){const v={};u=(u.g&&2<=Xn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(B(u[R]))continue;var x=L(u[R]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const se=v[G]||[];v[G]=se,se.push(x)}O(v,function(R){return R.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Sa(u){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,u),this.cb=Li("retryDelaySeedMs",1e4,u),this.Wa=Li("forwardChannelMaxRetries",2,u),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(u&&u.concurrentRequestLimit),this.Da=new Mi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Sa.prototype,s.la=8,s.G=1,s.connect=function(u,v,x,R){St(0),this.W=u,this.H=v||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.I=Xc(this,null,this.W),Na(this)};function Wo(u){if(Fc(u),u.G==3){var v=u.U++,x=Mn(u.I);if(pt(x,"SID",u.K),pt(x,"RID",v),pt(x,"TYPE","terminate"),Ui(u,x),v=new xn(u,u.j,v),v.L=2,v.v=ji(Mn(x)),x=!1,m.navigator&&m.navigator.sendBeacon)try{x=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&m.Image&&(new Image().src=v.v,x=!0),x||(v.g=Zc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ri(v)}Yc(u)}function Aa(u){u.g&&(Bi(u),u.g.cancel(),u.g=null)}function Fc(u){Aa(u),u.u&&(m.clearTimeout(u.u),u.u=null),Ra(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Na(u){if(!ya(u.h)&&!u.s){u.s=!0;var v=u.Ga;ee||M(),me||(ee(),me=!0),fe.add(v,u),u.B=0}}function Nh(u,v){return va(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ut(E(u.Ga,u,v),tl(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new xn(this,this.j,u);let se=this.o;if(this.S&&(se?(se=S(se),P(se,this.S)):se=this.S),this.m!==null||this.O||(G.H=se,se=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Gc(this,G,v),x=Mn(this.I),pt(x,"RID",u),pt(x,"CVER",22),this.D&&pt(x,"X-HTTP-Session-Id",this.D),Ui(this,x),se&&(this.O?v="headers="+encodeURIComponent(String(Zo(se)))+"&"+v:this.m&&Wt(x,this.m,se)),_a(this.h,G),this.Ua&&pt(x,"TYPE","init"),this.P?(pt(x,"$req",v),pt(x,"SID","null"),G.T=!0,cs(G,x,null)):cs(G,x,v),this.G=2}}else this.G==3&&(u?Jo(this,u):this.i.length==0||ya(this.h)||Jo(this))};function Jo(u,v){var x;v?x=v.l:x=u.U++;const R=Mn(u.I);pt(R,"SID",u.K),pt(R,"RID",x),pt(R,"AID",u.T),Ui(u,R),u.m&&u.o&&Wt(R,u.m,u.o),x=new xn(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Gc(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),_a(u.h,x),cs(x,R,v)}function Ui(u,v){u.H&&re(u.H,function(x,R){pt(v,R,x)}),u.l&&$o({},function(x,R){pt(v,R,x)})}function Gc(u,v,x){x=Math.min(u.i.length,x);var R=u.l?E(u.l.Na,u.l,u):null;e:{var G=u.i;let se=-1;for(;;){const be=["count="+x];se==-1?0<x?(se=G[0].g,be.push("ofs="+se)):se=0:be.push("ofs="+se);let tt=!0;for(let Kt=0;Kt<x;Kt++){let nt=G[Kt].g;const Jt=G[Kt].map;if(nt-=se,0>nt)se=Math.max(0,G[Kt].g-100),tt=!1;else try{As(Jt,be,"req"+nt+"_")}catch{R&&R(Jt)}}if(tt){R=be.join("&");break e}}}return u=u.i.splice(0,x),v.D=u,R}function $c(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;ee||M(),me||(ee(),me=!0),fe.add(v,u),u.v=0}}function el(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ut(E(u.Fa,u),tl(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ut(E(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Aa(this),Kc(this))};function Bi(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Kc(u){u.g=new xn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Mn(u.qa);pt(v,"RID","rpc"),pt(v,"SID",u.K),pt(v,"AID",u.T),pt(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&pt(v,"TO",u.ja),pt(v,"TYPE","xmlhttp"),Ui(u,v),u.m&&u.o&&Wt(v,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=ji(Mn(v)),x.m=null,x.P=!0,Ks(x,u)}s.Za=function(){this.C!=null&&(this.C=null,Aa(this),el(this),St(19))};function Ra(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Qc(u,v){var x=null;if(u.g==v){Ra(u),Bi(u),u.g=null;var R=2}else if(Fo(u.h,v))x=v.D,bn(u.h,v),R=1;else return;if(u.G!=0){if(v.o)if(R==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var G=u.B;R=Ar(),ke(R,new $t(R,x)),Na(u)}else $c(u);else if(G=v.s,G==3||G==0&&0<v.X||!(R==1&&Nh(u,v)||R==2&&el(u)))switch(x&&0<x.length&&(v=u.h,v.i=v.i.concat(x)),G){case 1:er(u,5);break;case 4:er(u,10);break;case 3:er(u,6);break;default:er(u,2)}}}function tl(u,v){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*v}function er(u,v){if(u.j.info("Error code "+v),v==2){var x=E(u.fb,u),R=u.Xa;const G=!R;R=new Bt(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Di(R,"https"),ji(R),G?ki(R.toString(),x):us(R.toString(),x)}else St(2);u.G=0,u.l&&u.l.sa(v),Yc(u),Fc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Yc(u){if(u.G=0,u.ka=[],u.l){const v=Go(u.h);(v.length!=0||u.i.length!=0)&&(j(u.ka,v),j(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function Xc(u,v,x){var R=x instanceof Bt?Mn(x):new Bt(x);if(R.g!="")v&&(R.g=v+"."+R.g),Dr(R,R.s);else{var G=m.location;R=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var se=new Bt(null);R&&Di(se,R),v&&(se.g=v),G&&Dr(se,G),x&&(se.l=x),R=se}return x=u.D,v=u.ya,x&&v&&pt(R,x,v),pt(R,"VER",u.la),Ui(u,R),R}function Zc(u,v,x){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new ct(new jr({eb:x})):new ct(u.pa),v.Ha(u.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}s=Wc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ca(){}Ca.prototype.g=function(u,v){return new En(u,v)};function En(u,v){Le.call(this),this.g=new Sa(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!B(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Is(this)}C(En,Le),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Wo(this.g)},En.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=ls(u),u=x);v.i.push(new Uc(v.Ya++,u)),v.G==3&&Na(v)},En.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,En.aa.N.call(this)};function Jc(u){Gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}C(Jc,Gs);function eu(){Bo.call(this),this.status=1}C(eu,Bo);function Is(u){this.g=u}C(Is,Wc),Is.prototype.ua=function(){ke(this.g,"a")},Is.prototype.ta=function(u){ke(this.g,new Jc(u))},Is.prototype.sa=function(u){ke(this.g,new eu)},Is.prototype.ra=function(){ke(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,oE=function(){return new Ca},aE=function(){return Ar()},iE=bs,ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,gd=Cr,$s.COMPLETE="complete",rE=$s,Uo.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",Le.prototype.listen=Le.prototype.K,Xl=Uo,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,sE=ct}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const R_="@firebase/firestore",C_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Cp("@firebase/firestore");function ro(){return oa.logLevel}function we(s,...e){if(oa.logLevel<=Je.DEBUG){const n=e.map(zp);oa.debug(`Firestore (${jo}): ${s}`,...n)}}function Tr(s,...e){if(oa.logLevel<=Je.ERROR){const n=e.map(zp);oa.error(`Firestore (${jo}): ${s}`,...n)}}function yo(s,...e){if(oa.logLevel<=Je.WARN){const n=e.map(zp);oa.warn(`Firestore (${jo}): ${s}`,...n)}}function zp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,lE(s,i,n)}function lE(s,e,n){let i=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Tr(i),new Error(i)}function dt(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||lE(e,o,i)}function qe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class Z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class W2{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new vr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new vr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new cE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class J2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new J2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const i=c=>{c.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,we("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const o=c=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=nC(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Ke(s,e){return s<e?-1:s>e?1:0}function tp(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),o=e.codePointAt(n);if(i!==o){if(i<128&&o<128)return Ke(i,o);{const c=uE(),h=sC(c.encode(D_(s,n)),c.encode(D_(e,n)));return h!==0?h:Ke(i,o)}}n+=i>65535?2:1}return Ke(s.length,e.length)}function D_(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function sC(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Ke(s[n],e[n]);return Ke(s.length,e.length)}function vo(s,e,n){return s.length===e.length&&s.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=-62135596800,O_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*O_);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<j_)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-j_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new bt(0,0))}static max(){return new ze(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="__name__";class Vs{constructor(e,n,i){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Pe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Vs.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const i=Vs.isNumericId(e),o=Vs.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Vs.extractNumericId(e).compare(Vs.extractNumericId(n)):tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class wt extends Vs{construct(e,n,i){return new wt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const rC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Vs{construct(e,n,i){return new dn(e,n,i)}static isValidIdentifier(e){return rC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k_}static keyField(){return new dn([k_])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Se(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Se(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(c(),o++)}if(c(),h)throw new Se(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(wt.fromString(e))}static fromName(e){return new Ce(wt.fromString(e).popFirst(5))}static empty(){return new Ce(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function iC(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=ze.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new fi(o,Ce.empty(),e)}function aC(s){return new fi(s.readTime,s.key,dc)}class fi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new fi(ze.min(),Ce.empty(),dc)}static max(){return new fi(ze.max(),Ce.empty(),dc)}}function oC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(s.documentKey,e.documentKey),n!==0?n:Ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(s){if(s.code!==ce.FAILED_PRECONDITION||s.message!==lC)throw s;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,i)=>{n(e)})}static reject(e){return new de((n,i)=>{i(e)})}static waitFor(e){return new de((n,i)=>{let o=0,c=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++c,h&&c===o&&n()},g=>i(g))}),h=!0,c===o&&n()})}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next(o=>o?de.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,c)=>{i.push(n.call(this,o,c))}),this.waitFor(i)}static mapArray(e,n){return new de((i,o)=>{const c=e.length,h=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(_=>{h[y]=_,++m,m===c&&i(h)},_=>o(_))}})}static doWhile(e,n){return new de((i,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):i()};c()})}}function uC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Wd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function Jd(s){return s==null}function Dd(s){return s===0&&1/s==-1/0}function dC(s){return typeof s=="number"&&Number.isInteger(s)&&!Dd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="";function hC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=M_(e)),e=fC(s.get(n),e);return M_(e)}function fC(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case hE:n+="";break;default:n+=c}}return n}function M_(s){return s+hE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ei(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function fE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??un.RED,this.left=o??un.EMPTY,this.right=c??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new un(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V_(this.data.getIterator())}getIteratorFrom(e){return new V_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class V_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Zt(dn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mE("Invalid base64 string: "+c):c}}(e);return new hn(n)}static fromUint8Array(e){const n=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const mC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(s){if(dt(!!s,39018),typeof s=="string"){let e=0;const n=mC.exec(s);if(dt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(s.seconds),nanos:Vt(s.nanos)}}function Vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pi(s){return typeof s=="string"?hn.fromBase64String(s):hn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="server_timestamp",gE="__type__",yE="__previous_value__",vE="__local_write_time__";function Hp(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[gE])===null||n===void 0?void 0:n.stringValue)===pE}function eh(s){const e=s.mapValue.fields[yE];return Hp(e)?eh(e):e}function hc(s){const e=mi(s.mapValue.fields[vE].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,i,o,c,h,m,g,y,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_}}const jd="(default)";class fc{constructor(e,n){this.projectId=e,this.database=n||jd}static empty(){return new fc("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__type__",gC="__max__",id={mapValue:{}},xE="__vector__",Od="value";function gi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Hp(s)?4:vC(s)?9007199254740991:yC(s)?10:11:Pe(28295,{value:s})}function qs(s,e){if(s===e)return!0;const n=gi(s);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return hc(s).isEqual(hc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=mi(o.timestampValue),m=mi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,c){return pi(o.bytesValue).isEqual(pi(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,c){return Vt(o.geoPointValue.latitude)===Vt(c.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(c.geoPointValue.longitude)}(s,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Vt(o.integerValue)===Vt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Vt(o.doubleValue),m=Vt(c.doubleValue);return h===m?Dd(h)===Dd(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return vo(s.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(P_(h)!==P_(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!qs(h[g],m[g])))return!1;return!0}(s,e);default:return Pe(52216,{left:s})}}function mc(s,e){return(s.values||[]).find(n=>qs(n,e))!==void 0}function _o(s,e){if(s===e)return 0;const n=gi(s),i=gi(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return function(c,h){const m=Vt(c.integerValue||c.doubleValue),g=Vt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return L_(s.timestampValue,e.timestampValue);case 4:return L_(hc(s),hc(e));case 5:return tp(s.stringValue,e.stringValue);case 6:return function(c,h){const m=pi(c),g=pi(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(c,h){const m=c.split("/"),g=h.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=Ke(m[y],g[y]);if(_!==0)return _}return Ke(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,h){const m=Ke(Vt(c.latitude),Vt(h.latitude));return m!==0?m:Ke(Vt(c.longitude),Vt(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return U_(s.arrayValue,e.arrayValue);case 10:return function(c,h){var m,g,y,_;const T=c.fields||{},E=h.fields||{},D=(m=T[Od])===null||m===void 0?void 0:m.arrayValue,C=(g=E[Od])===null||g===void 0?void 0:g.arrayValue,U=Ke(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:U_(D,C)}(s.mapValue,e.mapValue);case 11:return function(c,h){if(c===id.mapValue&&h===id.mapValue)return 0;if(c===id.mapValue)return 1;if(h===id.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=h.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const E=tp(g[T],_[T]);if(E!==0)return E;const D=_o(m[g[T]],y[_[T]]);if(D!==0)return D}return Ke(g.length,_.length)}(s.mapValue,e.mapValue);default:throw Pe(23264,{Pe:n})}}function L_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const n=mi(s),i=mi(e),o=Ke(n.seconds,i.seconds);return o!==0?o:Ke(n.nanos,i.nanos)}function U_(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=_o(n[o],i[o]);if(c)return c}return Ke(n.length,i.length)}function xo(s){return np(s)}function np(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const i=mi(n);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return pi(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Ce.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=np(c);return i+"]"}(s.arrayValue):"mapValue"in s?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${np(n.fields[h])}`;return o+"}"}(s.mapValue):Pe(61005,{value:s})}function yd(s){switch(gi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(s);return e?16+yd(e):16;case 5:return 2*s.stringValue.length;case 6:return pi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,c)=>o+yd(c),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return Ei(i.fields,(c,h)=>{o+=c.length+yd(h)}),o}(s.mapValue);default:throw Pe(13486,{value:s})}}function B_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function sp(s){return!!s&&"integerValue"in s}function Fp(s){return!!s&&"arrayValue"in s}function z_(s){return!!s&&"nullValue"in s}function q_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vd(s){return!!s&&"mapValue"in s}function yC(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[_E])===null||n===void 0?void 0:n.stringValue)===xE}function nc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Ei(s.mapValue.fields,(n,i)=>e.mapValue.fields[n]=nc(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(s.arrayValue.values[n]);return e}return Object.assign({},s)}function vC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===gC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=dn.emptyPath(),i={},o=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=m.popLast()}h?i[m.lastSegment()]=nc(h):o.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];vd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ei(n,(o,c)=>e[o]=c);for(const o of i)delete e[o]}clone(){return new kn(nc(this.value))}}function bE(s){const e=[];return Ei(s.fields,(n,i)=>{const o=new dn([n]);if(vd(i)){const c=bE(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,i,o,c,h,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,ze.min(),ze.min(),ze.min(),kn.empty(),0)}static newFoundDocument(e,n,i,o){return new yn(e,1,n,ze.min(),i,o,0)}static newNoDocument(e,n){return new yn(e,2,n,ze.min(),ze.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new yn(e,3,n,ze.min(),ze.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.position=e,this.inclusive=n}}function H_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Ce.comparator(Ce.fromName(h.referenceValue),n.key):i=_o(h,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function F_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!qs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function _C(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class Ft extends EE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new bC(e,n,i):n==="array-contains"?new wC(e,i):n==="in"?new SC(e,i):n==="not-in"?new AC(e,i):n==="array-contains-any"?new NC(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new EC(e,i):new TC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends EE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new vs(e,n)}matches(e){return TE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function TE(s){return s.op==="and"}function wE(s){return xC(s)&&TE(s)}function xC(s){for(const e of s.filters)if(e instanceof vs)return!1;return!0}function rp(s){if(s instanceof Ft)return s.field.canonicalString()+s.op.toString()+xo(s.value);if(wE(s))return s.filters.map(e=>rp(e)).join(",");{const e=s.filters.map(n=>rp(n)).join(",");return`${s.op}(${e})`}}function SE(s,e){return s instanceof Ft?function(i,o){return o instanceof Ft&&i.op===o.op&&i.field.isEqual(o.field)&&qs(i.value,o.value)}(s,e):s instanceof vs?function(i,o){return o instanceof vs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((c,h,m)=>c&&SE(h,o.filters[m]),!0):!1}(s,e):void Pe(19439)}function AE(s){return s instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`}(s):s instanceof vs?function(n){return n.op.toString()+" {"+n.getFilters().map(AE).join(" ,")+"}"}(s):"Filter"}class bC extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class EC extends Ft{constructor(e,n){super(e,"in",n),this.keys=NE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TC extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=NE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NE(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class wC extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&mc(n.arrayValue,this.value)}}class SC extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class AC extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class NC extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>mc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n=null,i=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Ie=null}}function G_(s,e=null,n=[],i=[],o=null,c=null,h=null){return new RC(s,e,n,i,o,c,h)}function Gp(s){const e=qe(s);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>rp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(c){return c.field.canonicalString()+c.dir}(i)).join(","),Jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>xo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>xo(i)).join(",")),e.Ie=n}return e.Ie}function $p(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!_C(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!SE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!F_(s.startAt,e.startAt)&&F_(s.endAt,e.endAt)}function ip(s){return Ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n=null,i=[],o=[],c=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function CC(s,e,n,i,o,c,h,m){return new Sc(s,e,n,i,o,c,h,m)}function Kp(s){return new Sc(s)}function $_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function RE(s){return s.collectionGroup!==null}function sc(s){const e=qe(s);if(e.Ee===null){e.Ee=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Zt(dn.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Md(c,i))}),n.has(dn.keyField().canonicalString())||e.Ee.push(new Md(dn.keyField(),i))}return e.Ee}function Bs(s){const e=qe(s);return e.de||(e.de=IC(e,sc(s))),e.de}function IC(s,e){if(s.limitType==="F")return G_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Md(o.field,c)});const n=s.endAt?new kd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new kd(s.startAt.position,s.startAt.inclusive):null;return G_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ap(s,e){const n=s.filters.concat([e]);return new Sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function op(s,e,n){return new Sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function th(s,e){return $p(Bs(s),Bs(e))&&s.limitType===e.limitType}function CE(s){return`${Gp(Bs(s))}|lt:${s.limitType}`}function io(s){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>AE(o)).join(", ")}]`),Jd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>xo(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>xo(o)).join(",")),`Target(${i})`}(Bs(s))}; limitType=${s.limitType})`}function nh(s,e){return e.isFoundDocument()&&function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ce.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)}(s,e)&&function(i,o){for(const c of sc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,m,g){const y=H_(h,m,g);return h.inclusive?y<=0:y<0}(i.startAt,sc(i),o)||i.endAt&&!function(h,m,g){const y=H_(h,m,g);return h.inclusive?y>=0:y>0}(i.endAt,sc(i),o))}(s,e)}function DC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function IE(s){return(e,n)=>{let i=!1;for(const o of sc(s)){const c=jC(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function jC(s,e,n){const i=s.field.isKeyField()?Ce.comparator(e.key,n.key):function(c,h,m){const g=h.data.field(c),y=m.data.field(c);return g!==null&&y!==null?_o(g,y):Pe(42886)}(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Pe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,i)=>{for(const[o,c]of i)e(o,c)})}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Ct(Ce.comparator);function wr(){return OC}const DE=new Ct(Ce.comparator);function Zl(...s){let e=DE;for(const n of s)e=e.insert(n.key,n);return e}function jE(s){let e=DE;return s.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function sa(){return rc()}function OE(){return rc()}function rc(){return new da(s=>s.toString(),(s,e)=>s.isEqual(e))}const kC=new Ct(Ce.comparator),MC=new Zt(Ce.comparator);function et(...s){let e=MC;for(const n of s)e=e.add(n);return e}const PC=new Zt(Ke);function VC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function kE(s){return{integerValue:""+s}}function LC(s,e){return dC(e)?kE(e):Qp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function UC(s,e,n){return s instanceof pc?function(o,c){const h={fields:{[gE]:{stringValue:pE},[vE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Hp(c)&&(c=eh(c)),c&&(h.fields[yE]=c),{mapValue:h}}(n,e):s instanceof gc?PE(s,e):s instanceof yc?VE(s,e):function(o,c){const h=ME(o,c),m=K_(h)+K_(o.Re);return sp(h)&&sp(o.Re)?kE(m):Qp(o.serializer,m)}(s,e)}function BC(s,e,n){return s instanceof gc?PE(s,e):s instanceof yc?VE(s,e):n}function ME(s,e){return s instanceof Pd?function(i){return sp(i)||function(c){return!!c&&"doubleValue"in c}(i)}(e)?e:{integerValue:0}:null}class pc extends sh{}class gc extends sh{constructor(e){super(),this.elements=e}}function PE(s,e){const n=LE(e);for(const i of s.elements)n.some(o=>qs(o,i))||n.push(i);return{arrayValue:{values:n}}}class yc extends sh{constructor(e){super(),this.elements=e}}function VE(s,e){let n=LE(e);for(const i of s.elements)n=n.filter(o=>!qs(o,i));return{arrayValue:{values:n}}}class Pd extends sh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function K_(s){return Vt(s.integerValue||s.doubleValue)}function LE(s){return Fp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.field=e,this.transform=n}}function qC(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof gc&&o instanceof gc||i instanceof yc&&o instanceof yc?vo(i.elements,o.elements,qs):i instanceof Pd&&o instanceof Pd?qs(i.Re,o.Re):i instanceof pc&&o instanceof pc}(s.transform,e.transform)}class HC{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rh{}function UE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ih(s.key,Sn.none()):new Ac(s.key,s.data,Sn.none());{const n=s.data,i=kn.empty();let o=new Zt(dn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Ti(s.key,i,new Hn(o.toArray()),Sn.none())}}function FC(s,e,n){s instanceof Ac?function(o,c,h){const m=o.value.clone(),g=Y_(o.fieldTransforms,c,h.transformResults);m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,n):s instanceof Ti?function(o,c,h){if(!_d(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=Y_(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(BE(o)),g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,n):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function ic(s,e,n,i){return s instanceof Ac?function(c,h,m,g){if(!_d(c.precondition,h))return m;const y=c.value.clone(),_=X_(c.fieldTransforms,g,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(s,e,n,i):s instanceof Ti?function(c,h,m,g){if(!_d(c.precondition,h))return m;const y=X_(c.fieldTransforms,g,h),_=h.data;return _.setAll(BE(c)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(T=>T.field))}(s,e,n,i):function(c,h,m){return _d(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,n)}function GC(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=ME(i.transform,o||null);c!=null&&(n===null&&(n=kn.empty()),n.set(i.field,c))}return n||null}function Q_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&vo(i,o,(c,h)=>qC(c,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ac extends rh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends rh{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function BE(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}}),e}function Y_(s,e,n){const i=new Map;dt(s.length===n.length,32656,{Ve:n.length,me:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,m=e.data.field(c.field);i.set(c.field,BC(h,m,n[o]))}return i}function X_(s,e,n){const i=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);i.set(o.field,UC(c,h,e))}return i}class ih extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $C extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&FC(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ic(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ic(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=OE();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=n.has(o.key)?null:m;const g=UE(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,i)=>Q_(n,i))&&vo(this.baseMutations,e.baseMutations,(n,i)=>Q_(n,i))}}class Yp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){dt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return kC}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new Yp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,rt;function XC(s){switch(s){case ce.OK:return Pe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Pe(15467,{code:s})}}function zE(s){if(s===void 0)return Tr("GRPC error has no .code"),ce.UNKNOWN;switch(s){case Ht.OK:return ce.OK;case Ht.CANCELLED:return ce.CANCELLED;case Ht.UNKNOWN:return ce.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ce.INTERNAL;case Ht.UNAVAILABLE:return ce.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ce.NOT_FOUND;case Ht.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ht.ABORTED:return ce.ABORTED;case Ht.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ht.DATA_LOSS:return ce.DATA_LOSS;default:return Pe(39323,{code:s})}}(rt=Ht||(Ht={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new ui([4294967295,4294967295],0);function Z_(s){const e=uE().encode(s),n=new nE;return n.update(e),new Uint8Array(n.digest())}function W_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ui([n,i],0),new ui([o,c],0)]}class Xp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(i<0)throw new Wl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ui.fromNumber(this.pe)}we(e,n,i){let o=e.add(n.multiply(ui.fromNumber(i)));return o.compare(ZC)===1&&(o=new ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Z_(e),[i,o]=W_(n);for(let c=0;c<this.hashCount;c++){const h=this.we(i,o,c);if(!this.be(h))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Xp(c,o,n);return i.forEach(m=>h.insert(m)),h}insert(e){if(this.pe===0)return;const n=Z_(e),[i,o]=W_(n);for(let c=0;c<this.hashCount;c++){const h=this.we(i,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ah(ze.min(),o,new Ct(Ke),wr(),et())}}class Nc{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nc(i,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,i,o){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=o}}class qE{constructor(e,n){this.targetId=e,this.Ce=n}}class HE{constructor(e,n,i=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class J_{constructor(){this.Fe=0,this.Me=ex(),this.xe=hn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=et(),n=et(),i=et();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Pe(38017,{changeType:c})}}),new Nc(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=ex()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class WC{constructor(e){this.ze=e,this.je=new Map,this.He=wr(),this.Je=ad(),this.Ye=ad(),this.Ze=new Ct(Ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,i=e.Ce.count,o=this._t(n);if(o){const c=o.target;if(ip(c))if(i===0){const h=new Ce(c.path);this.tt(n,h,yn.newNoDocument(h,ze.min()))}else dt(i===1,20013,{expectedCount:i});else{const h=this.ut(n);if(h!==i){const m=this.ct(e),g=m?this.lt(m,e,h):1;if(g!==0){this.st(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let h,m;try{h=pi(i).toUint8Array()}catch(g){if(g instanceof mE)return yo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Xp(h,o,c)}catch(g){return yo(g instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let o=0;return i.forEach(c=>{const h=this.ze.Pt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,c,null),o++)}),o}It(e){const n=new Map;this.je.forEach((c,h)=>{const m=this._t(h);if(m){if(c.current&&ip(m.target)){const g=new Ce(m.target.path);this.Et(g).has(h)||this.dt(h,g)||this.tt(h,g,yn.newNoDocument(g,e))}c.Le&&(n.set(h,c.qe()),c.Qe())}});let i=et();this.Ye.forEach((c,h)=>{let m=!0;h.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(c))}),this.He.forEach((c,h)=>h.setReadTime(e));const o=new ah(e,n,this.Ze,this.He,i);return this.He=wr(),this.Je=ad(),this.Ye=ad(),this.Ze=new Ct(Ke),o}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new J_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(Ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(Ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new J_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ad(){return new Ct(Ce.comparator)}function ex(){return new Ct(Ce.comparator)}const JC={asc:"ASCENDING",desc:"DESCENDING"},eI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tI={and:"AND",or:"OR"};class nI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(s,e){return s.useProto3Json||Jd(e)?e:{value:e}}function Vd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function sI(s,e){return Vd(s,e.toTimestamp())}function zs(s){return dt(!!s,49232),ze.fromTimestamp(function(n){const i=mi(n);return new bt(i.seconds,i.nanos)}(s))}function Zp(s,e){return cp(s,e).canonicalString()}function cp(s,e){const n=function(o){return new wt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function GE(s){const e=wt.fromString(s);return dt(XE(e),10190,{key:e.toString()}),e}function up(s,e){return Zp(s.databaseId,e.path)}function km(s,e){const n=GE(e);if(n.get(1)!==s.databaseId.projectId)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ce(KE(n))}function $E(s,e){return Zp(s.databaseId,e)}function rI(s){const e=GE(s);return e.length===4?wt.emptyPath():KE(e)}function dp(s){return new wt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function KE(s){return dt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function tx(s,e,n){return{name:up(s,e),fields:n.value.mapValue.fields}}function iI(s,e){let n;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pe(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,_){return y.useProto3Json?(dt(_===void 0||typeof _=="string",58123),hn.fromBase64String(_||"")):(dt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),hn.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(y){const _=y.code===void 0?ce.UNKNOWN:zE(y.code);return new Se(_,y.message||"")}(h);n=new HE(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=km(s,i.document.name),c=zs(i.document.updateTime),h=i.document.createTime?zs(i.document.createTime):ze.min(),m=new kn({mapValue:{fields:i.document.fields}}),g=yn.newFoundDocument(o,c,h,m),y=i.targetIds||[],_=i.removedTargetIds||[];n=new xd(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=km(s,i.document),c=i.readTime?zs(i.readTime):ze.min(),h=yn.newNoDocument(o,c),m=i.removedTargetIds||[];n=new xd([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=km(s,i.document),c=i.removedTargetIds||[];n=new xd([],c,o,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new YC(o,c),m=i.targetId;n=new qE(m,h)}}return n}function aI(s,e){let n;if(e instanceof Ac)n={update:tx(s,e.key,e.value)};else if(e instanceof ih)n={delete:up(s,e.key)};else if(e instanceof Ti)n={update:tx(s,e.key,e.data),updateMask:pI(e.fieldMask)};else{if(!(e instanceof $C))return Pe(16599,{ft:e.type});n={verify:up(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(c,h){const m=h.transform;if(m instanceof pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Pd)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw Pe(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:sI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)}(s,e.precondition)),n}function oI(s,e){return s&&s.length>0?(dt(e!==void 0,14353),s.map(n=>function(o,c){let h=o.updateTime?zs(o.updateTime):zs(c);return h.isEqual(ze.min())&&(h=zs(c)),new HC(h,o.transformResults||[])}(n,e))):[]}function lI(s,e){return{documents:[$E(s,e.path)]}}function cI(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$E(s,o);const c=function(y){if(y.length!==0)return YE(vs.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(_=>function(E){return{field:ao(E.field),direction:hI(E.dir)}}(_))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=lp(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function uI(s){let e=rI(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){dt(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=function(T){const E=QE(T);return E instanceof vs&&wE(E)?E.getFilters():[E]}(n.where));let h=[];n.orderBy&&(h=function(T){return T.map(E=>function(C){return new Md(oo(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(E))}(n.orderBy));let m=null;n.limit&&(m=function(T){let E;return E=typeof T=="object"?T.value:T,Jd(E)?null:E}(n.limit));let g=null;n.startAt&&(g=function(T){const E=!!T.before,D=T.values||[];return new kd(D,E)}(n.startAt));let y=null;return n.endAt&&(y=function(T){const E=!T.before,D=T.values||[];return new kd(D,E)}(n.endAt)),CC(e,o,h,c,m,"F",g,y)}function dI(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QE(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=oo(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(n.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=oo(n.unaryFilter.field);return Ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=oo(n.unaryFilter.field);return Ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(s):s.fieldFilter!==void 0?function(n){return Ft.create(oo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return vs.create(n.compositeFilter.filters.map(i=>QE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(s):Pe(30097,{filter:s})}function hI(s){return JC[s]}function fI(s){return eI[s]}function mI(s){return tI[s]}function ao(s){return{fieldPath:s.canonicalString()}}function oo(s){return dn.fromServerFormat(s.fieldPath)}function YE(s){return s instanceof Ft?function(n){if(n.op==="=="){if(q_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(z_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(z_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:fI(n.op),value:n.value}}}(s):s instanceof vs?function(n){const i=n.getFilters().map(o=>YE(o));return i.length===1?i[0]:{compositeFilter:{op:mI(n.op),filters:i}}}(s):Pe(54877,{filter:s})}function pI(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,i,o,c=ze.min(),h=ze.min(),m=hn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.wt=e}}function yI(s){const e=uI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Cn=new _I}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(fi.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class _I{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Zt(wt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Zt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZE=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(ZE,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new bo(0)}static lr(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="LruGarbageCollector",xI=1048576;function rx([s,e],[n,i]){const o=Ke(s,n);return o===0?Ke(e,i):o}class bI{constructor(e){this.Er=e,this.buffer=new Zt(rx),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();rx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(sx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?we(sx,"Ignoring IndexedDB error during garbage collection: ",n):await Oo(n)}await this.mr(3e5)})}}class TI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Wd.le);const i=new bI(n);return this.gr.forEachTarget(e,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(nx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nx):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,o,c,h,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,m=Date.now(),this.removeTargets(e,i,n))).next(T=>(c=T,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),ro()<=Je.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T})))}}function wI(s,e){return new TI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.changes=new da(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&ic(i.mutation,o,Hn.empty(),bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,et()).next(()=>i))}getLocalViewOfDocuments(e,n,i=et()){const o=sa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(c=>{let h=Zl();return c.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const i=sa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,et()))}populateOverlays(e,n,i){const o=[];return i.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,i,o){let c=wr();const h=rc(),m=function(){return rc()}();return n.forEach((g,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ti)?c=c.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),ic(_.mutation,y,_.mutation.getFieldMask(),bt.now())):h.set(y.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,_)=>h.set(y,_)),n.forEach((y,_)=>{var T;return m.set(y,new AI(_,(T=h.get(y))!==null&&T!==void 0?T:null))}),m))}recalculateAndSaveOverlays(e,n){const i=rc();let o=new Ct((h,m)=>h-m),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let _=i.get(g)||Hn.empty();_=m.applyToLocalView(y,_),i.set(g,_);const T=(o.get(m.batchId)||et()).add(g);o=o.insert(m.batchId,T)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,T=OE();_.forEach(E=>{if(!c.has(E)){const D=UE(n.get(E),i.get(E));D!==null&&T.set(E,D),c=c.add(E)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return de.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(h){return Ce.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):de.resolve(sa());let m=dc,g=c;return h.next(y=>de.forEach(y,(_,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),c.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{g=g.insert(_,E)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,et())).next(_=>({batchId:m,changes:jE(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let o=Zl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let h=Zl();return this.indexManager.getCollectionParents(e,c).next(m=>de.forEach(m,g=>{const y=function(T,E){return new Sc(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((T,E)=>{h=h.insert(T,E)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o))).next(h=>{c.forEach((g,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,yn.newInvalidDocument(_)))});let m=Zl();return h.forEach((g,y)=>{const _=c.get(g);_!==void 0&&ic(_.mutation,y,Hn.empty(),bt.now()),nh(n,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return de.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:zs(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:yI(o.bundledQuery),readTime:zs(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.overlays=new Ct(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=sa();return de.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&i.set(o,c)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,c)=>{this.St(e,n,c)}),de.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const o=sa(),c=n.length+1,h=new Ce(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new Ct((y,_)=>y-_);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let _=c.get(y.largestBatchId);_===null&&(_=sa(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=sa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,_)=>m.set(y,_)),!(m.size()>=o)););return de.resolve(m)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new QC(n,i));let c=this.Qr.get(n);c===void 0&&(c=et(),this.Qr.set(n,c)),this.Qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.$r=new Zt(sn.Ur),this.Kr=new Zt(sn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new sn(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new sn(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new wt([])),i=new sn(n,e),o=new sn(n,e+1),c=[];return this.Kr.forEachInRange([i,o],h=>{this.zr(h),c.push(h.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new wt([])),i=new sn(n,e),o=new sn(n,e+1);let c=et();return this.Kr.forEachInRange([i,o],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new sn(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||Ke(e.Zr,n.Zr)}static Wr(e,n){return Ke(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(sn.Ur)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new KC(c,n,i,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new sn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,n){return de.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ti(i),c=o<0?0:o;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?qp:this.nr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([i,o],h=>{const m=this.ei(h.Zr);c.push(m)}),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(Ke);return n.forEach(o=>{const c=new sn(o,0),h=new sn(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,h],m=>{i=i.add(m.Zr)})}),de.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Ce.isDocumentKey(c)||(c=c.child(""));const h=new sn(new Ce(c),0);let m=new Zt(Ke);return this.Xr.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Zr)),!0)},h),de.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(i=>{const o=this.ei(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){dt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return de.forEach(n.mutations,o=>{const c=new sn(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new sn(n,0),o=this.Xr.firstAfterOrEqual(i);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.ii=e,this.docs=function(){return new Ct(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,h=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():yn.newInvalidDocument(o))}),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=wr();const h=n.path,m=new Ce(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||oC(aC(_),i)<=0||(o.has(_.key)||nh(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,n,i,o){Pe(9500)}si(e,n){return de.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new OI(this)}getSize(e){return de.resolve(this.size)}}class OI extends SI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(i)}),de.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.persistence=e,this.oi=new da(n=>Gp(n),$p),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new Wp,this.targetCount=0,this.ui=bo.cr()}forEachTarget(e,n){return this.oi.forEach((i,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),de.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new bo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Tr(n),de.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.oi.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(c).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),de.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.ci={},this.overlays={},this.li=new Wd(0),this.hi=!1,this.hi=!0,this.Pi=new II,this.referenceDelegate=e(this),this.Ti=new kI(this),this.indexManager=new vI,this.remoteDocumentCache=function(o){return new jI(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new gI(n),this.Ei=new RI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new DI(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const o=new MI(this.li.next());return this.referenceDelegate.di(),i(o).next(c=>this.referenceDelegate.Ai(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ri(e,n){return de.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class MI extends cC{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Vi=new Wp,this.mi=null}static fi(e){return new Jp(e)}get gi(){if(this.mi)return this.mi;throw Pe(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.gi.add(c.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.gi,i=>{const o=Ce.fromPath(i);return this.pi(e,o).next(c=>{c||n.removeEntry(o,ze.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return de.or([()=>de.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ld{constructor(e,n){this.persistence=e,this.yi=new da(i=>hC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=wI(this,n)}static fi(e,n){return new Ld(e,n)}di(){}Ai(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return de.forEach(this.yi,(i,o)=>this.Dr(e,i,o).next(c=>c?de.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,n).next(m=>{m||(i++,c.removeEntry(h,ze.min()))})).next(()=>c.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yd(e.data.value)),n}Dr(e,n,i){return de.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return de.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.ds=i,this.As=o}static Rs(e,n){let i=et(),o=et();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new eg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return vA()?8:uC(_n())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ws(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.bs(e,n,o,i).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new PI;return this.Ss(e,n,h).next(m=>{if(c.result=m,this.fs)return this.Ds(e,n,h,m.size)})}).next(()=>c.result)}Ds(e,n,i,o){return i.documentReadCount<this.gs?(ro()<=Je.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),de.resolve()):(ro()<=Je.DEBUG&&we("QueryEngine","Query:",io(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(ro()<=Je.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(n))):de.resolve())}ws(e,n){if($_(n))return de.resolve(null);let i=Bs(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=op(n,null,"F"),i=Bs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const h=et(...c);return this.ys.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,i).next(g=>{const y=this.vs(n,m);return this.Cs(n,y,h,g.readTime)?this.ws(e,op(n,null,"F")):this.Fs(e,y,n,g)}))})))}bs(e,n,i,o){return $_(n)||o.isEqual(ze.min())?de.resolve(null):this.ys.getDocuments(e,i).next(c=>{const h=this.vs(n,c);return this.Cs(n,h,i,o)?de.resolve(null):(ro()<=Je.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.Fs(e,h,n,iC(o,dc)).next(m=>m))})}vs(e,n){let i=new Zt(IE(e));return n.forEach((o,c)=>{nh(e,c)&&(i=i.add(c))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return ro()<=Je.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",io(n)),this.ys.getDocumentsMatchingQuery(e,n,fi.min(),i)}Fs(e,n,i,o){return this.ys.getDocumentsMatchingQuery(e,i,o).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",LI=3e8;class UI{constructor(e,n,i,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new Ct(Ke),this.Os=new da(c=>Gp(c),$p),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function BI(s,e,n,i){return new UI(s,e,n,i)}async function JE(s,e){const n=qe(s);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(c=>(o=c,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(c=>{const h=[],m=[];let g=et();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(i,g).next(y=>({ks:y,removedBatchIds:h,addedBatchIds:m}))})})}function zI(s,e){const n=qe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,y,_){const T=y.batch,E=T.keys();let D=de.resolve();return E.forEach(C=>{D=D.next(()=>_.getEntry(g,C)).next(U=>{const j=y.docVersions.get(C);dt(j!==null,48541),U.version.compareTo(j)<0&&(T.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),_.addEntry(U)))})}),D.next(()=>m.mutationQueue.removeMutationBatch(g,T))}(n,i,e,c).next(()=>c.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let g=et();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function eT(s){const e=qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function qI(s,e){const n=qe(s),i=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((_,T)=>{const E=o.get(T);if(!E)return;m.push(n.Ti.removeMatchingKeys(c,_.removedDocuments,T).next(()=>n.Ti.addMatchingKeys(c,_.addedDocuments,T)));let D=E.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(hn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,i)),o=o.insert(T,D),function(U,j,z){return U.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=LI?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(E,D,_)&&m.push(n.Ti.updateTargetData(c,D))});let g=wr(),y=et();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(HI(c,h,e.documentUpdates).next(_=>{g=_.qs,y=_.Qs})),!i.isEqual(ze.min())){const _=n.Ti.getLastRemoteSnapshotVersion(c).next(T=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,i));m.push(_)}return de.waitFor(m).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.xs=o,c))}function HI(s,e,n){let i=et(),o=et();return n.forEach(c=>i=i.add(c)),e.getEntries(s,i).next(c=>{let h=wr();return n.forEach((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ze.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):we(tg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{qs:h,Qs:o}})}function FI(s,e){const n=qe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=qp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function GI(s,e){const n=qe(s);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ti.getTargetData(i,e).next(c=>c?(o=c,de.resolve(o)):n.Ti.allocateTargetId(i).next(h=>(o=new ii(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function hp(s,e,n){const i=qe(s),o=i.xs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ko(h))throw h;we(tg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.xs=i.xs.remove(e),i.Os.delete(o.target)}function ix(s,e,n){const i=qe(s);let o=ze.min(),c=et();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,_){const T=qe(g),E=T.Os.get(_);return E!==void 0?de.resolve(T.xs.get(E)):T.Ti.getTargetData(y,_)}(i,h,Bs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(h,m.targetId).next(g=>{c=g})}).next(()=>i.Ms.getDocumentsMatchingQuery(h,e,n?o:ze.min(),n?c:et())).next(m=>($I(i,DC(e),m),{documents:m,$s:c})))}function $I(s,e,n){let i=s.Ns.get(e)||ze.min();n.forEach((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),s.Ns.set(e,i)}class ax{constructor(){this.activeTargetIds=VC()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.xo=new ax,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new ax,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="ConnectivityMonitor";class lx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(ox,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(ox,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function fp(){return od===null?od=function(){return 268435456+Math.round(2147483648*Math.random())}():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XI{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===jd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(e,n,i,o,c){const h=fp(),m=this.jo(e,n.toUriEncodedString());we(Mm,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,c);const{host:y}=new URL(m),_=Ro(y);return this.Jo(e,m,g,i,_).then(T=>(we(Mm,`Received RPC '${e}' ${h}: `,T),T),T=>{throw yo(Mm,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",i),T})}Yo(e,n,i,o,c,h){return this.zo(e,n,i,o,c)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),i&&i.headers.forEach((o,c)=>e[c]=o)}jo(e,n){const i=YI[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class WI extends XI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const h=fp();return new Promise((m,g)=>{const y=new sE;y.setWithCredentials(!0),y.listenOnce(rE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case gd.NO_ERROR:const T=y.getResponseJson();we(pn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case gd.TIMEOUT:we(pn,`RPC '${e}' ${h} timed out`),g(new Se(ce.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const E=y.getStatus();if(we(pn,`RPC '${e}' ${h} failed with status:`,E,"response text:",y.getResponseText()),E>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const C=D==null?void 0:D.error;if(C&&C.status&&C.message){const U=function(z){const B=z.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(B)>=0?B:ce.UNKNOWN}(C.status);g(new Se(U,C.message))}else g(new Se(ce.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Se(ce.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{h_:e,streamId:h,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{we(pn,`RPC '${e}' ${h} completed.`)}});const _=JSON.stringify(o);we(pn,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",_,i,15)})}I_(e,n,i){const o=fp(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=oE(),m=aE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const _=c.join("");we(pn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const T=h.createWebChannel(_,g);this.E_(T);let E=!1,D=!1;const C=new ZI({Zo:j=>{D?we(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(E||(we(pn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),E=!0),we(pn,`RPC '${e}' stream ${o} sending:`,j),T.send(j))},Xo:()=>T.close()}),U=(j,z,B)=>{j.listen(z,X=>{try{B(X)}catch(te){setTimeout(()=>{throw te},0)}})};return U(T,Xl.EventType.OPEN,()=>{D||(we(pn,`RPC '${e}' stream ${o} transport opened.`),C.__())}),U(T,Xl.EventType.CLOSE,()=>{D||(D=!0,we(pn,`RPC '${e}' stream ${o} transport closed`),C.u_(),this.d_(T))}),U(T,Xl.EventType.ERROR,j=>{D||(D=!0,yo(pn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),C.u_(new Se(ce.UNAVAILABLE,"The operation could not be completed")))}),U(T,Xl.EventType.MESSAGE,j=>{var z;if(!D){const B=j.data[0];dt(!!B,16349);const X=B,te=(X==null?void 0:X.error)||((z=X[0])===null||z===void 0?void 0:z.error);if(te){we(pn,`RPC '${e}' stream ${o} received error:`,te);const W=te.status;let re=function(I){const P=Ht[I];if(P!==void 0)return zE(P)}(W),O=te.message;re===void 0&&(re=ce.INTERNAL,O="Unknown error status: "+W+" with message "+te.message),D=!0,C.u_(new Se(re,O)),T.close()}else we(pn,`RPC '${e}' stream ${o} received:`,B),C.c_(B)}}),U(m,iE.STAT_EVENT,j=>{j.stat===ep.PROXY?we(pn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===ep.NOPROXY&&we(pn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(s){return new nI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,i=1e3,o=1.5,c=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=o,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-i);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="PersistentStream";class nT{constructor(e,n,i,o,c,h,m,g){this.xi=e,this.S_=i,this.D_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new tT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.v_===n&&this.z_(i,o)},i=>{e(()=>{const o=new Se(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(o)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.j_(o))}),this.stream.onMessage(o=>{i(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(cx,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(cx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JI extends nT{constructor(e,n,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=iI(this.serializer,e),i=function(c){if(!("targetChange"in c))return ze.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?ze.min():h.readTime?zs(h.readTime):ze.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=dp(this.serializer),n.addTarget=function(c,h){let m;const g=h.target;if(m=ip(g)?{documents:lI(c,g)}:{query:cI(c,g).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=FE(c,h.resumeToken);const y=lp(c,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(ze.min())>0){m.readTime=Vd(c,h.snapshotVersion.toTimestamp());const y=lp(c,h.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const i=dI(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.Q_(n)}}class eD extends nT{constructor(e,n,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=oI(e.writeResults,e.commitTime),i=zs(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=dp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>aI(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{}class nD extends tD{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.zo(e,cp(n,i),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ce.UNKNOWN,c.toString())})}Yo(e,n,i,o,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(e,cp(n,i),o,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Se(ce.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class sD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Tr(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class rD{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(h=>{i.enqueueAndForget(async()=>{ha(this)&&(we(la,"Restarting streams for network reachability change."),await async function(g){const y=qe(g);y.da.add(4),await Rc(y),y.Va.set("Unknown"),y.da.delete(4),await lh(y)}(this))})}),this.Va=new sD(i,o)}}async function lh(s){if(ha(s))for(const e of s.Aa)await e(!0)}async function Rc(s){for(const e of s.Aa)await e(!1)}function sT(s,e){const n=qe(s);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ig(n)?rg(n):Mo(n).N_()&&sg(n,e))}function ng(s,e){const n=qe(s),i=Mo(n);n.Ea.delete(e),i.N_()&&rT(n,e),n.Ea.size===0&&(i.N_()?i.k_():ha(n)&&n.Va.set("Unknown"))}function sg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(s).Z_(e)}function rT(s,e){s.ma.Ke(e),Mo(s).X_(e)}function rg(s){s.ma=new WC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Mo(s).start(),s.Va.ca()}function ig(s){return ha(s)&&!Mo(s).O_()&&s.Ea.size>0}function ha(s){return qe(s).da.size===0}function iT(s){s.ma=void 0}async function iD(s){s.Va.set("Online")}async function aD(s){s.Ea.forEach((e,n)=>{sg(s,e)})}async function oD(s,e){iT(s),ig(s)?(s.Va.Pa(e),rg(s)):s.Va.set("Unknown")}async function lD(s,e,n){if(s.Va.set("Online"),e instanceof HE&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(i){we(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(s,i)}else if(e instanceof xd?s.ma.Xe(e):e instanceof qE?s.ma.ot(e):s.ma.nt(e),!n.isEqual(ze.min()))try{const i=await eT(s.localStore);n.compareTo(i)>=0&&await function(c,h){const m=c.ma.It(h);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ea.get(y);_&&c.Ea.set(y,_.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,y)=>{const _=c.Ea.get(g);if(!_)return;c.Ea.set(g,_.withResumeToken(hn.EMPTY_BYTE_STRING,_.snapshotVersion)),rT(c,g);const T=new ii(_.target,g,y,_.sequenceNumber);sg(c,T)}),c.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(i){we(la,"Failed to raise snapshot:",i),await Ud(s,i)}}async function Ud(s,e,n){if(!ko(e))throw e;s.da.add(1),await Rc(s),s.Va.set("Offline"),n||(n=()=>eT(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{we(la,"Retrying IndexedDB access"),await n(),s.da.delete(1),await lh(s)})}function aT(s,e){return e().catch(n=>Ud(s,n,e))}async function ch(s){const e=qe(s),n=yi(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:qp;for(;cD(e);)try{const o=await FI(e.localStore,i);if(o===null){e.Ia.length===0&&n.k_();break}i=o.batchId,uD(e,o)}catch(o){await Ud(e,o)}oT(e)&&lT(e)}function cD(s){return ha(s)&&s.Ia.length<10}function uD(s,e){s.Ia.push(e);const n=yi(s);n.N_()&&n.ea&&n.ta(e.mutations)}function oT(s){return ha(s)&&!yi(s).O_()&&s.Ia.length>0}function lT(s){yi(s).start()}async function dD(s){yi(s).ia()}async function hD(s){const e=yi(s);for(const n of s.Ia)e.ta(n.mutations)}async function fD(s,e,n){const i=s.Ia.shift(),o=Yp.from(i,e,n);await aT(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await ch(s)}async function mD(s,e){e&&yi(s).ea&&await async function(i,o){if(function(h){return XC(h)&&h!==ce.ABORTED}(o.code)){const c=i.Ia.shift();yi(i).L_(),await aT(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o)),await ch(i)}}(s,e),oT(s)&&lT(s)}async function ux(s,e){const n=qe(s);n.asyncQueue.verifyOperationInProgress(),we(la,"RemoteStore received new credentials");const i=ha(n);n.da.add(3),await Rc(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await lh(n)}async function pD(s,e){const n=qe(s);e?(n.da.delete(2),await lh(n)):e||(n.da.add(2),await Rc(n),n.Va.set("Unknown"))}function Mo(s){return s.fa||(s.fa=function(n,i,o){const c=qe(n);return c.oa(),new JI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:iD.bind(null,s),n_:aD.bind(null,s),i_:oD.bind(null,s),Y_:lD.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),ig(s)?rg(s):s.Va.set("Unknown")):(await s.fa.stop(),iT(s))})),s.fa}function yi(s){return s.ga||(s.ga=function(n,i,o){const c=qe(n);return c.oa(),new eD(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:dD.bind(null,s),i_:mD.bind(null,s),na:hD.bind(null,s),ra:fD.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await ch(s)):(await s.ga.stop(),s.Ia.length>0&&(we(la,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const h=Date.now()+i,m=new ag(e,n,h,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(s,e){if(Tr("AsyncQueue",`${e}: ${s}`),ko(s))return new Se(ce.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=Zl(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.pa=new Ct(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Eo{constructor(e,n,i,o,c,h,m,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,o,c){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Eo(e,n,mo.emptySet(n),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class yD{constructor(){this.queries=hx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=qe(n),c=o.queries;o.queries=hx(),c.forEach((h,m)=>{for(const g of m.Sa)g.onError(i)})})(this,new Se(ce.ABORTED,"Firestore shutting down"))}}function hx(){return new da(s=>CE(s),th)}async function cT(s,e){const n=qe(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.Da()&&e.va()&&(i=2):(c=new gD,i=e.va()?0:1);try{switch(i){case 0:c.ba=await n.onListen(o,!0);break;case 1:c.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=og(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.Fa(n.onlineState),c.ba&&e.Ma(c.ba)&&lg(n)}async function uT(s,e){const n=qe(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.va()?0:1:!c.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function vD(s,e){const n=qe(s);let i=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const m of h.Sa)m.Ma(o)&&(i=!0);h.ba=o}}i&&lg(n)}function _D(s,e,n){const i=qe(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function lg(s){s.Ca.forEach(e=>{e.next()})}var mp,fx;(fx=mp||(mp={})).xa="default",fx.Cache="cache";class dT{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Eo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.key=e}}class fT{constructor(e){this.key=e}}class xD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=et(),this.mutatedKeys=et(),this.Za=IE(e),this.Xa=new mo(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new dx,o=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,T)=>{const E=o.get(_),D=nh(this.query,T)?T:null,C=!!E&&this.mutatedKeys.has(E.key),U=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let j=!1;E&&D?E.data.isEqual(D.data)?C!==U&&(i.track({type:3,doc:D}),j=!0):this.ru(E,D)||(i.track({type:2,doc:D}),j=!0,(g&&this.Za(D,g)>0||y&&this.Za(D,y)<0)&&(m=!0)):!E&&D?(i.track({type:0,doc:D}),j=!0):E&&!D&&(i.track({type:1,doc:E}),j=!0,(g||y)&&(m=!0)),j&&(D?(h=h.add(D),c=U?c.add(_):c.delete(_)):(h=h.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),c=c.delete(_.key),i.track({type:1,doc:_})}return{Xa:h,nu:i,Cs:m,mutatedKeys:c}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((_,T)=>function(D,C){const U=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:j})}};return U(D)-U(C)}(_.type,T.type)||this.Za(_.doc,T.doc)),this.iu(i),o=o!=null&&o;const m=n&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Ja;return this.Ja=g,h.length!==0||y?{snapshot:new Eo(this.query,e.Xa,c,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new dx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=et(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new fT(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new hT(i))}),n}au(e){this.Ha=e.$s,this.Ya=et();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Eo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const cg="SyncEngine";class bD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ED{constructor(e){this.key=e,this.cu=!1}}class TD{constructor(e,n,i,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new da(m=>CE(m),th),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ct(Ce.comparator),this.Eu=new Map,this.du=new Wp,this.Au={},this.Ru=new Map,this.Vu=bo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function wD(s,e,n=!0){const i=_T(s);let o;const c=i.hu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.uu()):o=await mT(i,e,n,!0),o}async function SD(s,e){const n=_T(s);await mT(n,e,!0,!1)}async function mT(s,e,n,i){const o=await GI(s.localStore,Bs(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let m;return i&&(m=await AD(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&sT(s.remoteStore,o),m}async function AD(s,e,n,i,o){s.fu=(T,E,D)=>async function(U,j,z,B){let X=j.view.tu(z);X.Cs&&(X=await ix(U.localStore,j.query,!1).then(({documents:O})=>j.view.tu(O,X)));const te=B&&B.targetChanges.get(j.targetId),W=B&&B.targetMismatches.get(j.targetId)!=null,re=j.view.applyChanges(X,U.isPrimaryClient,te,W);return px(U,j.targetId,re.ou),re.snapshot}(s,T,E,D);const c=await ix(s.localStore,e,!0),h=new xD(e,c.$s),m=h.tu(c.documents),g=Nc.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),y=h.applyChanges(m,s.isPrimaryClient,g);px(s,n,y.ou);const _=new bD(e,n,h);return s.hu.set(e,_),s.Pu.has(n)?s.Pu.get(n).push(e):s.Pu.set(n,[e]),y.snapshot}async function ND(s,e,n){const i=qe(s),o=i.hu.get(e),c=i.Pu.get(o.targetId);if(c.length>1)return i.Pu.set(o.targetId,c.filter(h=>!th(h,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&ng(i.remoteStore,o.targetId),pp(i,o.targetId)}).catch(Oo)):(pp(i,o.targetId),await hp(i.localStore,o.targetId,!0))}async function RD(s,e){const n=qe(s),i=n.hu.get(e),o=n.Pu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ng(n.remoteStore,i.targetId))}async function CD(s,e,n){const i=PD(s);try{const o=await function(h,m){const g=qe(h),y=bt.now(),_=m.reduce((D,C)=>D.add(C.key),et());let T,E;return g.persistence.runTransaction("Locally write mutations","readwrite",D=>{let C=wr(),U=et();return g.Bs.getEntries(D,_).next(j=>{C=j,C.forEach((z,B)=>{B.isValidDocument()||(U=U.add(z))})}).next(()=>g.localDocuments.getOverlayedDocuments(D,C)).next(j=>{T=j;const z=[];for(const B of m){const X=GC(B,T.get(B.key).overlayedDocument);X!=null&&z.push(new Ti(B.key,X,bE(X.value.mapValue),Sn.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,z,m)}).next(j=>{E=j;const z=j.applyToLocalDocumentSet(T,U);return g.documentOverlayCache.saveOverlays(D,j.batchId,z)})}).then(()=>({batchId:E.batchId,changes:jE(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let y=h.Au[h.currentUser.toKey()];y||(y=new Ct(Ke)),y=y.insert(m,g),h.Au[h.currentUser.toKey()]=y}(i,o.batchId,n),await Cc(i,o.changes),await ch(i.remoteStore)}catch(o){const c=og(o,"Failed to persist write");n.reject(c)}}async function pT(s,e){const n=qe(s);try{const i=await qI(n.localStore,e);e.targetChanges.forEach((o,c)=>{const h=n.Eu.get(c);h&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?dt(h.cu,14607):o.removedDocuments.size>0&&(dt(h.cu,42227),h.cu=!1))}),await Cc(n,i,e)}catch(i){await Oo(i)}}function mx(s,e,n){const i=qe(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.hu.forEach((c,h)=>{const m=h.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=qe(h);g.onlineState=m;let y=!1;g.queries.forEach((_,T)=>{for(const E of T.Sa)E.Fa(m)&&(y=!0)}),y&&lg(g)}(i.eventManager,e),o.length&&i.lu.Y_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ID(s,e,n){const i=qe(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Eu.get(e),c=o&&o.key;if(c){let h=new Ct(Ce.comparator);h=h.insert(c,yn.newNoDocument(c,ze.min()));const m=et().add(c),g=new ah(ze.min(),new Map,new Ct(Ke),h,m);await pT(i,g),i.Iu=i.Iu.remove(c),i.Eu.delete(e),ug(i)}else await hp(i.localStore,e,!1).then(()=>pp(i,e,n)).catch(Oo)}async function DD(s,e){const n=qe(s),i=e.batch.batchId;try{const o=await zI(n.localStore,e);yT(n,i,null),gT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cc(n,o)}catch(o){await Oo(o)}}async function jD(s,e,n){const i=qe(s);try{const o=await function(h,m){const g=qe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next(T=>(dt(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(y,T))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>g.localDocuments.getDocuments(y,_))})}(i.localStore,e);yT(i,e,n),gT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cc(i,o)}catch(o){await Oo(o)}}function gT(s,e){(s.Ru.get(e)||[]).forEach(n=>{n.resolve()}),s.Ru.delete(e)}function yT(s,e,n){const i=qe(s);let o=i.Au[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Au[i.currentUser.toKey()]=o}}function pp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Pu.get(e))s.hu.delete(i),n&&s.lu.gu(i,n);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(i=>{s.du.containsKey(i)||vT(s,i)})}function vT(s,e){s.Tu.delete(e.path.canonicalString());const n=s.Iu.get(e);n!==null&&(ng(s.remoteStore,n),s.Iu=s.Iu.remove(e),s.Eu.delete(n),ug(s))}function px(s,e,n){for(const i of n)i instanceof hT?(s.du.addReference(i.key,e),OD(s,i)):i instanceof fT?(we(cg,"Document no longer in limbo: "+i.key),s.du.removeReference(i.key,e),s.du.containsKey(i.key)||vT(s,i.key)):Pe(19791,{pu:i})}function OD(s,e){const n=e.key,i=n.path.canonicalString();s.Iu.get(n)||s.Tu.has(i)||(we(cg,"New document in limbo: "+n),s.Tu.add(i),ug(s))}function ug(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const n=new Ce(wt.fromString(e)),i=s.Vu.next();s.Eu.set(i,new ED(n)),s.Iu=s.Iu.insert(n,i),sT(s.remoteStore,new ii(Bs(Kp(n.path)),i,"TargetPurposeLimboResolution",Wd.le))}}async function Cc(s,e,n){const i=qe(s),o=[],c=[],h=[];i.hu.isEmpty()||(i.hu.forEach((m,g)=>{h.push(i.fu(g,e,n).then(y=>{var _;if((y||n)&&i.isPrimaryClient){const T=y?!y.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=eg.Rs(g.targetId,y);c.push(T)}}))}),await Promise.all(h),i.lu.Y_(o),await async function(g,y){const _=qe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>de.forEach(y,E=>de.forEach(E.ds,D=>_.persistence.referenceDelegate.addReference(T,E.targetId,D)).next(()=>de.forEach(E.As,D=>_.persistence.referenceDelegate.removeReference(T,E.targetId,D)))))}catch(T){if(!ko(T))throw T;we(tg,"Failed to update sequence numbers: "+T)}for(const T of y){const E=T.targetId;if(!T.fromCache){const D=_.xs.get(E),C=D.snapshotVersion,U=D.withLastLimboFreeSnapshotVersion(C);_.xs=_.xs.insert(E,U)}}}(i.localStore,c))}async function kD(s,e){const n=qe(s);if(!n.currentUser.isEqual(e)){we(cg,"User change. New user:",e.toKey());const i=await JE(n.localStore,e);n.currentUser=e,function(c,h){c.Ru.forEach(m=>{m.forEach(g=>{g.reject(new Se(ce.CANCELLED,h))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cc(n,i.ks)}}function MD(s,e){const n=qe(s),i=n.Eu.get(e);if(i&&i.cu)return et().add(i.key);{let o=et();const c=n.Pu.get(e);if(!c)return o;for(const h of c){const m=n.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function _T(s){const e=qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ID.bind(null,e),e.lu.Y_=vD.bind(null,e.eventManager),e.lu.gu=_D.bind(null,e.eventManager),e}function PD(s){const e=qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jD.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return BI(this.persistence,new VI,e.initialUser,this.serializer)}Su(e){return new WE(Jp.fi,this.serializer)}bu(e){return new KI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class VD extends Bd{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){dt(this.persistence.referenceDelegate instanceof Ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new EI(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new WE(i=>Ld.fi(i,n),this.serializer)}}class gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kD.bind(null,this.syncEngine),await pD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yD}()}createDatastore(e){const n=oh(e.databaseInfo.databaseId),i=function(c){return new WI(c)}(e.databaseInfo);return function(c,h,m,g){return new nD(c,h,m,g)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,c,h,m){return new rD(i,o,c,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>mx(this.syncEngine,n,0),function(){return lx.C()?new lx:new QI}())}createSyncEngine(e,n){return function(o,c,h,m,g,y,_){const T=new TD(o,c,h,m,g,y);return _&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=qe(o);we(la,"RemoteStore shutting down."),c.da.add(5),await Rc(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gp.provider={build:()=>new gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class LD{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=gn.UNAUTHENTICATED,this.clientId=dE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,async h=>{we(vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(we(vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=og(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Vm(s,e){s.asyncQueue.verifyOperationInProgress(),we(vi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await JE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function gx(s,e){s.asyncQueue.verifyOperationInProgress();const n=await UD(s);we(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(i=>ux(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>ux(e.remoteStore,o)),s._onlineComponents=e}async function UD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){we(vi,"Using user provided OfflineComponentProvider");try{await Vm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await Vm(s,new Bd)}}else we(vi,"Using default OfflineComponentProvider"),await Vm(s,new VD(void 0));return s._offlineComponents}async function bT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(we(vi,"Using user provided OnlineComponentProvider"),await gx(s,s._uninitializedComponentsProvider._online)):(we(vi,"Using default OnlineComponentProvider"),await gx(s,new gp))),s._onlineComponents}function BD(s){return bT(s).then(e=>e.syncEngine)}async function ET(s){const e=await bT(s),n=e.eventManager;return n.onListen=wD.bind(null,e.syncEngine),n.onUnlisten=ND.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RD.bind(null,e.syncEngine),n}function zD(s,e,n={}){const i=new vr;return s.asyncQueue.enqueueAndForget(async()=>function(c,h,m,g,y){const _=new xT({next:E=>{_.xu(),h.enqueueAndForget(()=>uT(c,T));const D=E.docs.has(m);!D&&E.fromCache?y.reject(new Se(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&E.fromCache&&g&&g.source==="server"?y.reject(new Se(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new dT(Kp(m.path),_,{includeMetadataChanges:!0,Qa:!0});return cT(c,T)}(await ET(s),s.asyncQueue,e,n,i)),i.promise}function qD(s,e,n={}){const i=new vr;return s.asyncQueue.enqueueAndForget(async()=>function(c,h,m,g,y){const _=new xT({next:E=>{_.xu(),h.enqueueAndForget(()=>uT(c,T)),E.fromCache&&g.source==="server"?y.reject(new Se(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new dT(m,_,{includeMetadataChanges:!0,Qa:!0});return cT(c,T)}(await ET(s),s.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s,e,n){if(!n)throw new Se(ce.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function HD(s,e,n,i){if(e===!0&&i===!0)throw new Se(ce.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function vx(s){if(!Ce.isDocumentKey(s))throw new Se(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function _x(s){if(Ce.isDocumentKey(s))throw new Se(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function uh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Pe(12329,{type:typeof s})}function is(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Se(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uh(s);throw new Se(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firestore.googleapis.com",xx=!0;class bx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ST,this.ssl=xx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:xx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xI)throw new Se(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new X2;switch(i.type){case"firstParty":return new eC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=yx.get(n);i&&(we("ComponentProvider","Removing Datastore"),yx.delete(n),i.terminate())}(this),Promise.resolve()}}function FD(s,e,n,i={}){var o;s=is(s,dh);const c=Ro(e),h=s._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:s._getEmulatorOptions()}),g=`${e}:${n}`;c&&(mb(`https://${g}`),pb("Firestore",!0)),h.host!==ST&&h.host!==g&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:g,ssl:c,emulatorOptions:i});if(!ra(y,m)&&(s._setSettings(y),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=gn.MOCK_USER;else{_=cA(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Se(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new gn(E)}s._authCredentials=new Z2(new cE(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class An{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class di extends Po{constructor(e,n,i){super(e,n,Kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Ce(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function He(s,e,...n){if(s=Gt(s),wT("collection","path",e),s instanceof dh){const i=wt.fromString(e,...n);return _x(i),new di(s,null,i)}{if(!(s instanceof An||s instanceof di))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(wt.fromString(e,...n));return _x(i),new di(s.firestore,null,i)}}function ut(s,e,...n){if(s=Gt(s),arguments.length===1&&(e=dE.newId()),wT("doc","path",e),s instanceof dh){const i=wt.fromString(e,...n);return vx(i),new An(s,null,new Ce(i))}{if(!(s instanceof An||s instanceof di))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(wt.fromString(e,...n));return vx(i),new An(s.firestore,s instanceof di?s.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="AsyncQueue";class Tx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new tT(this,"async_queue_retry"),this.rc=()=>{const i=Pm();i&&we(Ex,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new vr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!ko(e))throw e;we(Ex,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Tr("INTERNAL UNHANDLED ERROR: ",wx(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=ag.createAndSchedule(this,e,n,i,c=>this.uc(c));return this.Zu.push(o),o}oc(){this.Xu&&Pe(47125,{cc:wx(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function wx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class wi extends dh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Tx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tx(e),this._firestoreClient=void 0,await e}}}function GD(s,e){const n=typeof s=="object"?s:_b(),i=typeof s=="string"?s:jd,o=Dp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=oA("firestore");c&&FD(o,...c)}return o}function hh(s){if(s._terminated)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||$D(s),s._firestoreClient}function $D(s){var e,n,i;const o=s._freezeSettings(),c=function(m,g,y,_){return new pC(m,g,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,TT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new LD(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(hn.fromBase64String(e))}catch(n){throw new Se(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^__.*__$/;class QD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ac(e,this.data,n,this.fieldTransforms)}}class AT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ic:s})}}class fg{constructor(e,n,i,o,c,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Vc(e),o}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return zd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(NT(this.Ic)&&KD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class YD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||oh(e)}bc(e,n,i,o=!1){return new fg({Ic:e,methodName:n,wc:i,path:dn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dc(s){const e=s._freezeSettings(),n=oh(s._databaseId);return new YD(s._databaseId,!!e.ignoreUndefinedProperties,n)}function mg(s,e,n,i,o,c={}){const h=s.bc(c.merge||c.mergeFields?2:0,e,n,o);gg("Data must be an object, but it was:",h,i);const m=IT(i,h);let g,y;if(c.merge)g=new Hn(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const _=[];for(const T of c.mergeFields){const E=yp(e,T,n);if(!h.contains(E))throw new Se(ce.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);jT(_,E)||_.push(E)}g=new Hn(_),y=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=h.fieldTransforms;return new QD(new kn(m),g,y)}class mh extends fh{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}class pg extends fh{_toFieldTransform(e){return new zC(e.path,new pc)}isEqual(e){return e instanceof pg}}function RT(s,e,n,i){const o=s.bc(1,e,n);gg("Data must be an object, but it was:",o,i);const c=[],h=kn.empty();Ei(i,(g,y)=>{const _=yg(e,g,n);y=Gt(y);const T=o.mc(_);if(y instanceof mh)c.push(_);else{const E=jc(y,T);E!=null&&(c.push(_),h.set(_,E))}});const m=new Hn(c);return new AT(h,m,o.fieldTransforms)}function CT(s,e,n,i,o,c){const h=s.bc(1,e,n),m=[yp(e,i,n)],g=[o];if(c.length%2!=0)throw new Se(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)m.push(yp(e,c[E])),g.push(c[E+1]);const y=[],_=kn.empty();for(let E=m.length-1;E>=0;--E)if(!jT(y,m[E])){const D=m[E];let C=g[E];C=Gt(C);const U=h.mc(D);if(C instanceof mh)y.push(D);else{const j=jc(C,U);j!=null&&(y.push(D),_.set(D,j))}}const T=new Hn(y);return new AT(_,T,h.fieldTransforms)}function XD(s,e,n,i=!1){return jc(n,s.bc(i?4:3,e))}function jc(s,e){if(DT(s=Gt(s)))return gg("Unsupported field value:",e,s),IT(s,e);if(s instanceof fh)return function(i,o){if(!NT(o.Ic))throw o.gc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,o){const c=[];let h=0;for(const m of i){let g=jc(m,o.fc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}}(s,e)}return function(i,o){if((i=Gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=bt.fromDate(i);return{timestampValue:Vd(o.serializer,c)}}if(i instanceof bt){const c=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(o.serializer,c)}}if(i instanceof dg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:FE(o.serializer,i._byteString)};if(i instanceof An){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Zp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof hg)return function(h,m){return{mapValue:{fields:{[_E]:{stringValue:xE},[Od]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.gc("VectorValues must only contain numeric values.");return Qp(m.serializer,y)})}}}}}}(i,o);throw o.gc(`Unsupported field value: ${uh(i)}`)}(s,e)}function IT(s,e){const n={};return fE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(s,(i,o)=>{const c=jc(o,e.Ac(i));c!=null&&(n[i]=c)}),{mapValue:{fields:n}}}function DT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof dg||s instanceof To||s instanceof An||s instanceof fh||s instanceof hg)}function gg(s,e,n){if(!DT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=uh(n);throw i==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+i)}}function yp(s,e,n){if((e=Gt(e))instanceof Ic)return e._internalPath;if(typeof e=="string")return yg(s,e);throw zd("Field path arguments must be of type string or ",s,!1,void 0,n)}const ZD=new RegExp("[~\\*/\\[\\]]");function yg(s,e,n){if(e.search(ZD)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ic(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function zd(s,e,n,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new Se(ce.INVALID_ARGUMENT,m+s+g)}function jT(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WD extends OT{data(){return super.data()}}function vg(s,e){return typeof e=="string"?yg(s,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Se(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class e4 extends _g{}function kT(s,e,...n){let i=[];e instanceof _g&&i.push(e),i=i.concat(n),function(c){const h=c.filter(g=>g instanceof xg).length,m=c.filter(g=>g instanceof ph).length;if(h>1||h>0&&m>0)throw new Se(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class ph extends e4{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ph(e,n,i)}_apply(e){const n=this._parse(e);return PT(e._query,n),new Po(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=Dc(e.firestore);return function(c,h,m,g,y,_,T){let E;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ax(T,_);const C=[];for(const U of T)C.push(Sx(g,c,U));E={arrayValue:{values:C}}}else E=Sx(g,c,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ax(T,_),E=XD(m,h,T,_==="in"||_==="not-in");return Ft.create(y,_,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function MT(s,e,n){const i=e,o=vg("where",s);return ph._create(o,i,n)}class xg extends _g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,c){let h=o;const m=c.getFlattenedFilters();for(const g of m)PT(h,g),h=ap(h,g)}(e._query,n),new Po(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Sx(s,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new Se(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&n.indexOf("/")!==-1)throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(wt.fromString(n));if(!Ce.isDocumentKey(i))throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return B_(s,new Ce(i))}if(n instanceof An)return B_(s,n._key);throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uh(n)}.`)}function Ax(s,e){if(!Array.isArray(s)||s.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PT(s,e){const n=function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class t4{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ei(e,(o,c)=>{i[o]=this.convertValue(c,n)}),i}convertVectorValue(e){var n,i,o;const c=(o=(i=(n=e.fields)===null||n===void 0?void 0:n[Od].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>Vt(h.doubleValue));return new hg(c)}convertGeoPoint(e){return new dg(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=mi(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=wt.fromString(e);dt(XE(i),9688,{name:e});const o=new fc(i.get(1),i.get(3)),c=new Ce(i.popFirst(5));return o.isEqual(n)||Tr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VT extends OT{constructor(e,n,i,o,c,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class bd extends VT{data(e={}){return super.data(e)}}class n4{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new bd(this._firestore,this._userDataWriter,i.key,i,new Jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new bd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new bd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:s4(m.type),doc:g,oldIndex:y,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function s4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(s){s=is(s,An);const e=is(s.firestore,wi);return zD(hh(e),s._key).then(n=>r4(e,s,n))}class LT extends t4{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}function We(s){s=is(s,Po);const e=is(s.firestore,wi),n=hh(e),i=new LT(e);return JD(s._query),qD(n,s._query).then(o=>new n4(e,i,s,o))}function hi(s,e,n){s=is(s,An);const i=is(s.firestore,wi),o=bg(s.converter,e,n);return Oc(i,[mg(Dc(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Sn.none())])}function gh(s,e,n,...i){s=is(s,An);const o=is(s.firestore,wi),c=Dc(o);let h;return h=typeof(e=Gt(e))=="string"||e instanceof Ic?CT(c,"updateDoc",s._key,e,n,i):RT(c,"updateDoc",s._key,e),Oc(o,[h.toMutation(s._key,Sn.exists(!0))])}function _r(s){return Oc(is(s.firestore,wi),[new ih(s._key,Sn.none())])}function yh(s,e){const n=is(s.firestore,wi),i=ut(s),o=bg(s.converter,e);return Oc(n,[mg(Dc(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Sn.exists(!1))]).then(()=>i)}function Oc(s,e){return function(i,o){const c=new vr;return i.asyncQueue.enqueueAndForget(async()=>CD(await BD(i),o,c)),c.promise}(hh(s),e)}function r4(s,e,n){const i=n.docs.get(e._key),o=new LT(s);return new VT(s,o,e._key,i,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,n,i){this._verifyNotCommitted();const o=Lm(e,this._firestore),c=bg(o.converter,n,i),h=mg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,Sn.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const c=Lm(e,this._firestore);let h;return h=typeof(n=Gt(n))=="string"||n instanceof Ic?CT(this._dataReader,"WriteBatch.update",c._key,n,i,o):RT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(h.toMutation(c._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Lm(e,this._firestore);return this._mutations=this._mutations.concat(new ih(n._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lm(s,e){if((s=Gt(s)).firestore!==e)throw new Se(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function vn(){return new pg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s){return hh(s=is(s,wi)),new i4(s,e=>Oc(s,e))}(function(e,n=!0){(function(o){jo=o})(Co),po(new ia("firestore",(i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),m=new wi(new W2(i.getProvider("auth-internal")),new tC(h,i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Se(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(y.options.projectId,_)}(h,o),h);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),li(R_,C_,e),li(R_,C_,"esm2017")})();const a4={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},UT=vb(a4),ca=$2(UT),Ee=GD(UT),Rx=({className:s=""})=>f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:s,"aria-hidden":"true",children:[f.jsx("path",{d:"M3 19h18"}),f.jsx("path",{d:"m6 19 5.5-9.5L14 14l4-7 3 12"}),f.jsx("path",{d:"m10.8 10.7 1.2-2 1.5 2.6"})]}),o4=()=>{Gn("Home");const s=_i(),[e,n]=N.useState(!1),[i,o]=N.useState(!1),[c,h]=N.useState(null),m=N.useRef(null),g="group flex flex-col rounded-2xl border border-slate-200 bg-white p-7 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",y="mt-2 text-sm leading-relaxed text-slate-600",_="mt-4 flex-1 space-y-2 text-sm text-slate-700",T="inline-flex w-full items-center justify-center rounded-full border border-emerald-700 bg-emerald-700 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-800 hover:shadow-lg hover:shadow-emerald-700/20",E="inline-flex w-full items-center justify-center rounded-full border border-emerald-400 bg-emerald-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-500/20",D="inline-flex w-full items-center justify-center rounded-full border border-sky-300 bg-sky-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-sky-600 hover:shadow-lg hover:shadow-sky-500/20",C=(c==null?void 0:c.displayName)||(c==null?void 0:c.email)||"User",U=C.trim().charAt(0).toUpperCase()||"U";N.useEffect(()=>{const B=Yd(ca,X=>{h(X),X||o(!1)});return()=>B()},[]),N.useEffect(()=>{const B=X=>{m.current&&!m.current.contains(X.target)&&o(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]);const j=async()=>{await Gb(ca),o(!1),s("/",{replace:!0})},z=(B,X)=>{if(n(!1),X&&!c){s("/login",{state:{from:{pathname:X}}});return}s(B)};return f.jsxs("div",{className:"min-h-screen scroll-smooth bg-white text-slate-900",children:[f.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-100 bg-white/90 px-4 py-4 backdrop-blur sm:px-6 lg:px-10",children:f.jsxs("div",{className:"mx-auto flex w-full max-w-7xl items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-700 text-white",children:f.jsx(Rx,{className:"h-6 w-6"})}),f.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-emerald-700",children:"Climbing Competition"})]}),f.jsxs("div",{className:"relative flex items-center gap-2",children:[!c&&f.jsx(je,{to:"/login",className:"inline-flex h-10 items-center justify-center rounded-lg border border-emerald-300 bg-emerald-50 px-3 text-sm font-semibold text-emerald-800 transition hover:bg-emerald-100",children:""}),c&&f.jsxs("div",{className:"relative",ref:m,children:[f.jsx("button",{type:"button",onClick:()=>o(B=>!B),className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-300 bg-white text-sm font-semibold text-slate-700 transition hover:bg-slate-50","aria-label":"user menu","aria-expanded":i,children:U}),i&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-sm",children:[f.jsx("p",{className:"truncate px-2 py-1 text-xs text-slate-500",children:C}),f.jsx("button",{type:"button",onClick:j,className:"mt-1 block w-full rounded-lg px-2 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),f.jsx("button",{type:"button",onClick:()=>n(B=>!B),className:"inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-700 transition hover:bg-slate-50","aria-label":"menu","aria-expanded":e,children:f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:f.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})})}),e&&f.jsxs("div",{className:"absolute right-0 top-12 z-50 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-lg",children:[f.jsx("button",{type:"button",onClick:()=>z("/dashboard","/dashboard"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),f.jsx("button",{type:"button",onClick:()=>z("/score-summary"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),f.jsx("button",{type:"button",onClick:()=>z("/system-admin","/system-admin"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]})]})}),f.jsxs("main",{className:"relative",children:[f.jsxs("section",{className:"relative overflow-hidden px-6 py-16 lg:py-24",children:[f.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[radial-gradient(45%_45%_at_50%_50%,rgba(82,183,136,0.15)_0%,rgba(255,255,255,0)_100%)]"}),f.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[radial-gradient(45%_45%_at_50%_50%,rgba(54,179,242,0.05)_0%,rgba(255,255,255,0)_100%)]"}),f.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[f.jsxs("h2",{className:"mb-6 bg-gradient-to-r from-[#2D6A4F] via-[#52B788] to-[#36b3f2] bg-clip-text text-5xl font-bold tracking-tight text-transparent lg:text-7xl",children:["Push Your Limits.",f.jsx("br",{}),"Track Your Flash."]}),f.jsx("p",{className:"mx-auto max-w-2xl text-lg leading-relaxed text-slate-600 lg:text-xl",children:"The ultimate climbing competition management platform designed for speed, fairness, and the community. Choose your portal to begin."})]})]}),f.jsx("section",{className:"mx-auto max-w-7xl px-4 pb-20 sm:px-6 lg:px-10",children:f.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[f.jsxs("section",{id:"portal-owner",className:`${g} hover:shadow-emerald-600/10`,children:[f.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-700 transition group-hover:bg-emerald-700 group-hover:text-white",children:""}),f.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),f.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Gym Owners"}),f.jsx("p",{className:y,children:""}),f.jsxs("ul",{className:_,children:[f.jsx("li",{children:""}),f.jsx("li",{children:""}),f.jsx("li",{children:""})]}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:"/dashboard",className:T,children:""})})]}),f.jsxs("section",{id:"portal-climber",className:`${g} hover:shadow-emerald-500/10`,children:[f.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-600 transition group-hover:bg-emerald-500 group-hover:text-white",children:""}),f.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),f.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Climbers"}),f.jsx("p",{className:y,children:""}),f.jsxs("ul",{className:_,children:[f.jsx("li",{children:""}),f.jsx("li",{children:""}),f.jsx("li",{children:""})]}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:"/score-summary",className:E,children:""})})]}),f.jsxs("section",{id:"portal-admin",className:`${g} hover:shadow-sky-500/10`,children:[f.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-sky-100 text-2xl text-sky-600 transition group-hover:bg-sky-500 group-hover:text-white",children:""}),f.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),f.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For System Admins"}),f.jsx("p",{className:y,children:""}),f.jsxs("ul",{className:_,children:[f.jsx("li",{children:""}),f.jsx("li",{children:""}),f.jsx("li",{children:""})]}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:"/system-admin",className:D,children:""})})]})]})})]}),f.jsx("footer",{className:"border-t border-slate-100 bg-white py-10",children:f.jsxs("div",{className:"mx-auto max-w-7xl px-4 text-center sm:px-6 lg:px-10",children:[f.jsxs("div",{className:"mb-3 flex items-center justify-center gap-2",children:[f.jsx("span",{className:"flex h-6 w-6 items-center justify-center text-emerald-700",children:f.jsx(Rx,{className:"h-5 w-5"})}),f.jsx("span",{className:"font-bold text-slate-900",children:"Climbing Competition"})]}),f.jsx("p",{className:"text-sm text-slate-500",children:" 2026 Climbing Competition Systems. All rights reserved."}),f.jsx("div",{className:"mt-4 flex justify-center text-sm text-slate-500",children:f.jsx("a",{href:"https://github.com/vestige/FlashComp/issues/new/choose",target:"_blank",rel:"noreferrer",className:"transition-colors hover:text-emerald-700",children:"Contact"})})]})})]})},l4=()=>{Gn("");const[s,e]=N.useState(""),[n,i]=N.useState(""),[o,c]=N.useState(""),h=_i(),m=Fn(),g=async()=>{var T,E;const _=((E=(T=m.state)==null?void 0:T.from)==null?void 0:E.pathname)||"/dashboard";try{await OR(ca,s,n),c(" ..."),setTimeout(()=>h(_,{replace:!0}),600)}catch(D){c(" : "+D.message)}},y=async _=>{_.preventDefault(),await g()};return f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_50%,_#eef2ff_100%)] px-4 py-10",children:f.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[f.jsx(je,{to:"/",className:"inline-flex items-center text-sm font-medium text-slate-600 transition hover:text-slate-900",children:" Home"}),f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),f.jsxs("form",{className:"mt-4 grid gap-3",onSubmit:y,children:[f.jsx("input",{type:"email",placeholder:"",value:s,onChange:_=>e(_.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),f.jsx("input",{type:"password",placeholder:"",value:n,onChange:_=>i(_.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),f.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]}),o&&f.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:o})]})})},Cx=s=>Array.isArray(s)?s.filter(e=>typeof e=="string"&&e.trim().length>0):[],c4=new Set(["owner.multi@example.com","vestige_sync@me.com"]),Si=()=>{const[s,e]=N.useState(null),[n,i]=N.useState(null),[o,c]=N.useState(!0),[h,m]=N.useState("");N.useEffect(()=>{let E=!1;const D=Yd(ca,async C=>{if(!C){E||(e(null),i(null),m(""),c(!1));return}E||(e(C),c(!0),m(""));try{const U=ut(Ee,"users",C.uid),j=await gs(U);if(j.exists()){E||(i({id:j.id,...j.data()}),c(!1));return}const z=C.email?await We(kT(He(Ee,"users"),MT("email","==",C.email))):null;if(!E){if(z&&!z.empty){const B=z.docs[0],X={...B.data(),uid:C.uid,email:C.email||B.data().email||"",gymIds:Cx(B.data().gymIds),migratedFromProfileId:B.id,updatedAt:vn()};try{await hi(U,X,{merge:!0})}catch(te){console.error("users/{uid} :",te)}i({id:C.uid,...X,updatedAt:B.data().updatedAt})}else{const B=(C.email||"").toLowerCase();if(c4.has(B)){const te={uid:C.uid,email:C.email||"",role:"admin",gymIds:["*"],createdAt:vn(),updatedAt:vn()};try{await hi(U,te,{merge:!0})}catch(W){console.error("users/{uid} :",W)}i({id:C.uid,uid:C.uid,email:C.email||"",role:"admin",gymIds:["*"]})}else i({id:C.uid,uid:C.uid,email:C.email||"",role:"owner",gymIds:[]})}c(!1)}}catch(U){console.error(":",U),E||(m(""),i(null),c(!1))}});return()=>{E=!0,D()}},[]);const g=N.useMemo(()=>Cx(n==null?void 0:n.gymIds),[n]),y=typeof(n==null?void 0:n.role)=="string"?n.role:"",_=N.useMemo(()=>y==="admin"||g.includes("*"),[y,g]);return{authUser:s,profile:n,gymIds:g,role:y,hasAllGymAccess:_,canAccessGym:E=>_||g.includes(E),loading:o,error:h}},Ix={upcoming:"settings",live:"scores",completed:"ranking",unknown:"settings"},u4=["settings","climbers","scores","ranking"],d4=s=>Ix[s]||Ix.unknown,h4=({status:s,isCompleted:e})=>{const n=u4.filter(c=>c==="climbers"?!e:c==="scores"?s==="live":!0),i=d4(s),o=n.includes(i)?i:n[0]||"settings";return{primary:o,secondary:n.filter(c=>c!==o)}},BT=({name:s,gymId:e,startDate:n,endDate:i})=>{if(!s||!s.trim())return"";if(!e)return"";if(!n||!i)return"";const o=new Date(n),c=new Date(i);return Number.isNaN(o.getTime())||Number.isNaN(c.getTime())?"":o>c?"":""},zT=({gyms:s,ownerUid:e,onCreated:n,onCancel:i,submitLabel:o="Create Event"})=>{const[c,h]=N.useState(""),[m,g]=N.useState(""),[y,_]=N.useState(""),[T,E]=N.useState(""),[D,C]=N.useState(""),[U,j]=N.useState(!1);N.useEffect(()=>{if(s.length===0){g("");return}g(B=>B&&s.some(X=>X.id===B)?B:s[0].id)},[s]);const z=async B=>{B.preventDefault();const X=BT({name:c,gymId:m,startDate:y,endDate:T});if(X){C(` ${X}`);return}j(!0),C("");try{const te=bt.fromDate(new Date(y)),W=bt.fromDate(new Date(T)),O={id:(await yh(He(Ee,"events"),{name:c.trim(),gymId:m,ownerUid:e||"",startDate:te,endDate:W,createdAt:vn()})).id,name:c.trim(),gymId:m,ownerUid:e||"",startDate:te,endDate:W};C(" "),h(""),_(""),E(""),n&&n(O)}catch(te){console.error(":",te),C(" ")}finally{j(!1)}};return s.length===0?f.jsx("p",{className:"text-sm text-slate-600",children:""}):f.jsxs("form",{onSubmit:z,className:"grid gap-4",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"text",placeholder:": FlashComp Live 2026",value:c,onChange:B=>h(B.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("select",{value:m,onChange:B=>g(B.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100",children:s.map(B=>f.jsx("option",{value:B.id,children:B.name||B.id},B.id))})]}),f.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"date",value:y,onChange:B=>_(B.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"date",value:T,onChange:B=>E(B.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[f.jsx("button",{type:"submit",disabled:U,className:"inline-flex items-center rounded-xl bg-emerald-800 px-5 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-900/15 transition hover:bg-emerald-900 disabled:cursor-not-allowed disabled:opacity-60",children:U?"...":o}),i&&f.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100",children:""})]}),D&&f.jsx("p",{className:`rounded-lg px-3 py-2 text-sm ${D.startsWith("")?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:D})]})},wo=s=>{if(!s)return null;if(typeof s.toDate=="function")return s.toDate();if(typeof s.seconds=="number")return new Date(s.seconds*1e3);const e=new Date(s);return Number.isNaN(e.getTime())?null:e},Um=s=>{const e=wo(s);return e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):null},Dx=s=>{const e=wo(s);return e?e.toLocaleDateString("ja-JP"):"-"},f4=s=>{const e=wo(s);return e?e.toLocaleDateString("en-US",{month:"short"}).toUpperCase():"---"},m4=s=>{const e=wo(s);return e?String(e.getDate()):"--"},p4=s=>{const e=Um(s.startDate),n=Um(s.endDate),i=Um(new Date);return!e||!n||!i?"unknown":i<e?"upcoming":i>n?"completed":"live"},jx={live:"bg-red-50 text-red-600 border border-red-200",upcoming:"bg-sky-50 text-sky-700 border border-sky-200",completed:"bg-slate-100 text-slate-600 border border-slate-200",unknown:"bg-amber-50 text-amber-700 border border-amber-200"},Ox={live:"LIVE",upcoming:"UPCOMING",completed:"Completed",unknown:"Unknown"},kx={settings:{label:"Event Settings",buildPath:s=>`/events/${s}/edit`,icon:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M4 20h4l10-10-4-4L4 16v4Z"}),f.jsx("path",{d:"M12 6l4 4"})]})},climbers:{label:"Climbers",buildPath:s=>`/events/${s}/climbers`,icon:f.jsxs(f.Fragment,{children:[f.jsx("circle",{cx:"9",cy:"8",r:"2.5"}),f.jsx("circle",{cx:"16",cy:"9",r:"2"}),f.jsx("path",{d:"M4 19c0-2.7 2.2-5 5-5s5 2.3 5 5"}),f.jsx("path",{d:"M14 19c0-1.9 1.6-3.5 3.5-3.5S21 17.1 21 19"})]})},scores:{label:"Scores",buildPath:s=>`/events/${s}/scores`,icon:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M4 19h16"}),f.jsx("path",{d:"M7 16V9"}),f.jsx("path",{d:"M12 16V5"}),f.jsx("path",{d:"M17 16v-6"})]})},ranking:{label:"Public Ranking",buildPath:s=>`/score-summary/${s}`,icon:f.jsxs(f.Fragment,{children:[f.jsx("path",{d:"M5 19h14"}),f.jsx("path",{d:"M8 17V9l4-3 4 3v8"}),f.jsx("path",{d:"M10.5 13h3"})]})}},$l=({children:s,className:e="h-4 w-4"})=>f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":"true",children:s}),g4=()=>{Gn("");const[s,e]=N.useState([]),[n,i]=N.useState([]),[o,c]=N.useState(!1),[h,m]=N.useState("active"),[g,y]=N.useState(!0),[_,T]=N.useState(""),{authUser:E,gymIds:D,hasAllGymAccess:C,loading:U,error:j}=Si();N.useEffect(()=>{if(U)return;if(j){T(j),y(!1);return}(async()=>{y(!0),T("");try{const[I,P]=await Promise.all([We(He(Ee,"events")),We(He(Ee,"gyms"))]),L=I.docs.map(A=>({id:A.id,...A.data()})).filter(A=>C||D.includes(A.gymId)),q=P.docs.map(A=>({id:A.id,...A.data()})).filter(A=>C||D.includes(A.id)).sort((A,ve)=>(A.name||"").localeCompare(ve.name||"","ja"));e(L),i(q)}catch(I){console.error(":",I),T("")}finally{y(!1)}})()},[U,j,D,C]),N.useEffect(()=>{if(!o)return;const S=I=>{I.key==="Escape"&&c(!1)};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[o]);const z=new Map(n.map(S=>[S.id,S.name||S.id])),B=C?"":n.length>0?n.map(S=>S.name||S.id).join(" / "):"",X=N.useMemo(()=>{const S=s.map(L=>({...L,status:p4(L)})),I=h==="active"?S.filter(L=>L.status==="live"||L.status==="upcoming"):S,P={live:0,upcoming:1,completed:2,unknown:3};return I.sort((L,q)=>{var $,ee;const A=P[L.status]-P[q.status];if(A!==0)return A;const ve=(($=wo(L.startDate))==null?void 0:$.getTime())||0;return(((ee=wo(q.startDate))==null?void 0:ee.getTime())||0)-ve})},[s,h]),te="rounded-xl border border-slate-200 bg-white p-6 shadow-sm",W="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100",re={upcoming:"inline-flex items-center gap-2 rounded-lg border border-sky-300 bg-sky-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-700",live:"inline-flex items-center gap-2 rounded-lg border border-emerald-300 bg-emerald-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-800",completed:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-slate-800 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-900",unknown:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-slate-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-800"},O="inline-flex items-center gap-2 rounded-xl bg-emerald-800 px-5 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-900/15 transition hover:bg-emerald-900";return g||U?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):_||j?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:_||j})}):f.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:[f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"mb-8 flex flex-wrap items-end justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-900 sm:text-4xl",children:"Gym Owner Console"}),f.jsx("p",{className:"mt-2 text-base text-slate-600",children:""}),f.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:[": ",B]})]}),f.jsx(je,{to:"/",className:W,children:" Back to TOP"})]}),f.jsxs("section",{className:"mb-8",children:[f.jsxs("h2",{className:"mb-4 flex items-center gap-2 text-2xl font-bold text-slate-900",children:[f.jsxs($l,{className:"h-5 w-5 text-emerald-700",children:[f.jsx("circle",{cx:"12",cy:"12",r:"3.2"}),f.jsx("path",{d:"M19.4 15a1 1 0 0 0 .2 1.1l.1.1a2 2 0 0 1-2.8 2.8l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9V20a2 2 0 0 1-4 0v-.2a1 1 0 0 0-.6-.9 1 1 0 0 0-1.1.2l-.1.1a2 2 0 0 1-2.8-2.8l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H4a2 2 0 0 1 0-4h.2a1 1 0 0 0 .9-.6 1 1 0 0 0-.2-1.1l-.1-.1a2 2 0 0 1 2.8-2.8l.1.1a1 1 0 0 0 1.1.2h.1a1 1 0 0 0 .6-.9V4a2 2 0 0 1 4 0v.2a1 1 0 0 0 .6.9h.1a1 1 0 0 0 1.1-.2l.1-.1a2 2 0 0 1 2.8 2.8l-.1.1a1 1 0 0 0-.2 1.1v.1a1 1 0 0 0 .9.6H20a2 2 0 0 1 0 4h-.2a1 1 0 0 0-.9.6Z"})]}),"Settings"]}),f.jsx("div",{className:te,children:f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[f.jsx("div",{className:"max-w-xl",children:f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"/"})}),C||D.length>0?f.jsxs("button",{type:"button",onClick:()=>c(!0),className:O,children:[f.jsx($l,{className:"h-4 w-4",children:f.jsx("path",{d:"M12 5v14M5 12h14"})}),"Create New Event"]}):f.jsx("p",{className:"text-sm text-slate-600",children:""})]})})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-4",children:[f.jsxs("h2",{className:"flex items-center gap-2 text-2xl font-bold text-slate-900",children:[f.jsxs($l,{className:"h-5 w-5 text-sky-600",children:[f.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),f.jsx("path",{d:"M16 3v4M8 3v4M3 11h18"})]}),"Registered Events"]}),f.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white p-1",children:[f.jsx("button",{type:"button",onClick:()=>m("active"),className:`rounded-full px-3 py-1 text-xs font-bold transition ${h==="active"?"bg-emerald-800 text-white":"text-slate-500 hover:bg-slate-100"}`,children:"ACTIVE"}),f.jsx("button",{type:"button",onClick:()=>m("all"),className:`rounded-full px-3 py-1 text-xs font-bold transition ${h==="all"?"bg-slate-900 text-white":"text-slate-500 hover:bg-slate-100"}`,children:"ALL"})]})]}),!C&&D.length===0?f.jsx("p",{className:"text-sm text-slate-600",children:""}):X.length===0?f.jsx("p",{className:"text-sm text-slate-600",children:""}):f.jsx("div",{className:"grid gap-4",children:X.map(S=>{const I=S.status,P=I==="completed",L=I==="upcoming",{primary:q,secondary:A}=h4({status:I,isCompleted:P}),ve=kx[q],_e=jx[I]||jx.unknown,$=Ox[I]||Ox.unknown;return f.jsx("article",{className:`group rounded-xl border p-5 shadow-sm transition ${P?"border-slate-200 bg-slate-50/80 opacity-80 hover:opacity-100":L?"border-sky-200 bg-sky-50/40 hover:border-sky-400":"border-slate-200 bg-white hover:border-emerald-300"}`,children:f.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:`h-16 w-16 shrink-0 rounded-lg text-center ${P?"bg-slate-200 text-slate-600":L?"bg-sky-100 text-sky-800":"bg-emerald-50 text-emerald-800"}`,children:[f.jsx("p",{className:"pt-1 text-[10px] font-bold tracking-wide",children:f4(S.startDate)}),f.jsx("p",{className:"text-2xl font-black",children:m4(S.startDate)})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[f.jsx("h3",{className:`text-lg font-bold ${P?"text-slate-600":"text-slate-900"}`,children:S.name}),f.jsx("span",{className:`rounded-md px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider ${_e}`,children:$})]}),f.jsxs("p",{className:`mt-1 text-sm ${P?"text-slate-400":"text-slate-500"}`,children:[": ",z.get(S.gymId)||""]}),f.jsxs("p",{className:`mt-1 text-sm ${P?"text-slate-400":"text-slate-500"}`,children:[Dx(S.startDate)," - ",Dx(S.endDate)]})]})]}),f.jsxs("div",{className:"flex flex-wrap gap-2 lg:justify-end",children:[f.jsxs(je,{to:ve.buildPath(S.id),className:re[I]||re.unknown,children:[f.jsx($l,{children:ve.icon}),ve.label]}),A.map(ee=>{const me=kx[ee];return f.jsxs(je,{to:me.buildPath(S.id),className:W,children:[f.jsx($l,{children:me.icon}),me.label]},ee)})]})]})},S.id)})})]})]}),o&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/45 px-4 py-8",role:"dialog","aria-modal":"true","aria-label":"",onClick:S=>{S.target===S.currentTarget&&c(!1)},children:f.jsxs("section",{className:"w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-5 shadow-xl sm:p-6",children:[f.jsxs("div",{className:"mb-4 flex items-start justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Create New Event"}),f.jsx("p",{className:"mt-1 text-sm text-slate-600",children:""})]}),f.jsx("button",{type:"button",onClick:()=>c(!1),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-600 transition hover:bg-slate-50","aria-label":"close event create modal",children:""})]}),f.jsx(zT,{gyms:n,ownerUid:(E==null?void 0:E.uid)||"",submitLabel:"Create Event",onCancel:()=>c(!1),onCreated:S=>{e(I=>[S,...I.filter(P=>P.id!==S.id)]),c(!1)}})]})})]})};function y4(){Gn("");const[s,e]=N.useState([]),[n,i]=N.useState(!0),[o,c]=N.useState(""),h=_i(),{authUser:m,gymIds:g,hasAllGymAccess:y,loading:_,error:T}=Si();return N.useEffect(()=>{if(_)return;if(T){c(T),i(!1);return}(async()=>{i(!0),c("");try{const C=(await We(He(Ee,"gyms"))).docs.map(U=>({id:U.id,...U.data()})).filter(U=>y||g.includes(U.id)).sort((U,j)=>(U.name||"").localeCompare(j.name||"","ja"));e(C)}catch(D){console.error(":",D),c("")}finally{i(!1)}})()},[_,T,g,y]),n||_?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):o||T?f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:o||T}),f.jsx(je,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-200 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100",children:" "})]})}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"mb-8 flex flex-wrap items-end justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-900 sm:text-4xl",children:"Create New Event"}),f.jsx("p",{className:"mt-2 text-base text-slate-600",children:""})]}),f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-200 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100",children:" "})]}),f.jsx("section",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:f.jsx(zT,{gyms:s,ownerUid:(m==null?void 0:m.uid)||"",submitLabel:"Create Event",onCreated:()=>h("/dashboard")})})]})})}const Mx=s=>{if(!s)return"";const e=typeof s.toDate=="function"?s.toDate():new Date(s);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${i}-${o}`},v4=({eventId:s})=>{const[e,n]=N.useState(""),[i,o]=N.useState(""),[c,h]=N.useState(""),[m,g]=N.useState(""),[y,_]=N.useState([]),[T,E]=N.useState(""),[D,C]=N.useState({name:"",startDate:"",endDate:""}),U=N.useCallback(async()=>{try{const re=(await We(He(Ee,"events",s,"seasons"))).docs.map(O=>({id:O.id,...O.data()}));_(re)}catch(W){console.error(":",W)}},[s]);N.useEffect(()=>{U()},[U]);const j=async W=>{W.preventDefault();try{await yh(He(Ee,"events",s,"seasons"),{name:e,startDate:bt.fromDate(new Date(i)),endDate:bt.fromDate(new Date(c))}),g(" "),n(""),o(""),h(""),U()}catch(re){console.error(re),g(" ")}},z=async W=>{if(window.confirm(""))try{await _r(ut(Ee,"events",s,"seasons",W)),_(O=>O.filter(S=>S.id!==W))}catch(O){console.error(":",O)}},B=W=>{E(W.id),C({name:W.name||"",startDate:Mx(W.startDate),endDate:Mx(W.endDate)})},X=()=>{E(""),C({name:"",startDate:"",endDate:""})},te=async W=>{if(!D.name.trim()||!D.startDate||!D.endDate){alert("");return}try{const re={name:D.name.trim(),startDate:bt.fromDate(new Date(D.startDate)),endDate:bt.fromDate(new Date(D.endDate))};await gh(ut(Ee,"events",s,"seasons",W),re),_(O=>O.map(S=>S.id===W?{...S,...re}:S)),X()}catch(re){console.error(":",re),alert("")}};return f.jsxs("div",{children:[f.jsx("h3",{children:" "}),f.jsxs("form",{onSubmit:j,children:[f.jsx("input",{type:"text",placeholder:"",value:e,onChange:W=>n(W.target.value),required:!0}),f.jsx("input",{type:"date",value:i,onChange:W=>o(W.target.value),required:!0}),f.jsx("input",{type:"date",value:c,onChange:W=>h(W.target.value),required:!0}),f.jsx("button",{type:"submit",children:""})]}),f.jsx("p",{children:m}),f.jsx("ul",{children:y.map(W=>f.jsx("li",{children:T===W.id?f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",value:D.name,onChange:re=>C(O=>({...O,name:re.target.value}))}),f.jsx("input",{type:"date",value:D.startDate,onChange:re=>C(O=>({...O,startDate:re.target.value}))}),f.jsx("input",{type:"date",value:D.endDate,onChange:re=>C(O=>({...O,endDate:re.target.value}))}),f.jsx("button",{type:"button",onClick:()=>te(W.id),children:""}),f.jsx("button",{type:"button",onClick:X,children:""})]}):f.jsxs(f.Fragment,{children:[W.name,"",W.startDate.toDate().toLocaleDateString(),"",W.endDate.toDate().toLocaleDateString(),"",f.jsx("button",{type:"button",onClick:()=>B(W),children:""}),f.jsx("button",{type:"button",onClick:()=>z(W.id),children:""})]})},W.id))})]})},_4=({eventId:s,categories:e,setCategories:n})=>{const[i,o]=N.useState(""),[c,h]=N.useState(""),[m,g]=N.useState(""),y=N.useCallback(async()=>{try{const j=(await We(He(Ee,"events",s,"categories"))).docs.map(z=>({id:z.id,...z.data()}));n(j)}catch(U){console.error(":",U)}},[s,n]);N.useEffect(()=>{y()},[y]);const _=async U=>{if(U.preventDefault(),!!i)try{await yh(He(Ee,"events",s,"categories"),{name:i}),o(""),y()}catch(j){console.error(":",j)}},T=async U=>{if(window.confirm(""))try{await _r(ut(Ee,"events",s,"categories",U)),n(z=>z.filter(B=>B.id!==U))}catch(z){console.error(":",z)}},E=U=>{h(U.id),g(U.name||"")},D=()=>{h(""),g("")},C=async U=>{const j=m.trim();if(!j){alert("");return}try{await gh(ut(Ee,"events",s,"categories",U),{name:j}),n(z=>z.map(B=>B.id===U?{...B,name:j}:B)),D()}catch(z){console.error(":",z),alert("")}};return f.jsxs("div",{children:[f.jsx("h3",{children:" "}),f.jsxs("form",{onSubmit:_,children:[f.jsx("input",{type:"text",placeholder:"",value:i,onChange:U=>o(U.target.value),required:!0}),f.jsx("button",{type:"submit",children:""})]}),f.jsx("ul",{children:e.map(U=>f.jsx("li",{children:c===U.id?f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",value:m,onChange:j=>g(j.target.value)}),f.jsx("button",{type:"button",onClick:()=>C(U.id),children:""}),f.jsx("button",{type:"button",onClick:D,children:""})]}):f.jsxs(f.Fragment,{children:[U.name,f.jsx("button",{type:"button",onClick:()=>E(U),children:""}),f.jsx("button",{type:"button",onClick:()=>T(U.id),children:""})]})},U.id))})]})},x4=["9","8","7","6","5","4","3","2","1","","2"],ac=s=>{if(typeof s.taskNo=="number"&&Number.isFinite(s.taskNo))return s.taskNo;const e=String(s.name||"").match(/(\d+)/);return e?Number(e[1]):Number.MAX_SAFE_INTEGER},Bm=s=>[...s].sort((e,n)=>{const i=ac(e)-ac(n);return i!==0?i:String(e.name||"").localeCompare(String(n.name||""),"ja")}),b4=({eventId:s,categories:e=[]})=>{const n=xi(),i=s||n.eventId,[o,c]=N.useState([]),[h,m]=N.useState(e),[g,y]=N.useState(""),[_,T]=N.useState(""),[E,D]=N.useState([]),[C,U]=N.useState([]),[j,z]=N.useState(""),B=N.useMemo(()=>new Set(C),[C]);N.useEffect(()=>{if(!i)return;(async()=>{const ve=await We(He(Ee,"events",i,"seasons"));if(c(ve.docs.map($=>({id:$.id,...$.data()}))),e.length>0){m(e);return}const _e=await We(He(Ee,"events",i,"categories"));m(_e.docs.map($=>({id:$.id,...$.data()})))})()},[i,e]),N.useEffect(()=>{if(!i||!g){D([]),U([]);return}(async()=>{const _e=(await We(He(Ee,"events",i,"seasons",g,"tasks"))).docs.map($=>({id:$.id,...$.data(),isEditing:!1}));D(Bm(_e))})()},[i,g]),N.useEffect(()=>{if(!i||!g||!_){U([]);return}(async()=>{const ve=await We(He(Ee,"events",i,"seasons",g,"categoryTaskMap",_,"assignments"));U(ve.docs.map(_e=>_e.id))})()},[i,g,_]);const X=()=>{setTimeout(()=>z(""),2e3)},te=A=>ut(Ee,"events",i,"seasons",g,"tasks",A),W=(A,ve)=>ut(Ee,"events",i,"seasons",g,"categoryTaskMap",A,"assignments",ve),re=()=>{const A=new Set(E.map(_e=>ac(_e)).filter(_e=>Number.isFinite(_e)));let ve=1;for(;A.has(ve);)ve+=1;return ve},O=()=>{if(!g){z(" "),X();return}const A=re(),ve=String(A).padStart(2,"0"),_e=`task-${ve}`;D($=>Bm([...$,{id:_e,taskNo:A,name:`No.${ve}`,grade:"",points:1,isBonus:!1,isEditing:!0,isNew:!0}]))},S=(A,ve,_e)=>{D($=>{const ee=[...$],me={...ee[A]};return me[ve]=ve==="isBonus"?_e.target.checked:_e,ee[A]=me,ee})},I=A=>{D(ve=>ve.map((_e,$)=>({..._e,isEditing:$===A?!_e.isEditing:!1})))},P=async A=>{var ee;const ve=E[A];if(!((ee=ve.name)!=null&&ee.trim())){z(" "),X();return}if(!ve.grade){z(" "),X();return}const _e={name:ve.name.trim(),taskNo:Number(ve.taskNo)||ac(ve),grade:ve.grade,points:Number(ve.points)||1,isBonus:!!ve.isBonus,isActive:!0};await hi(te(ve.id),_e,{merge:!0});const $={...ve,..._e,isEditing:!1,isNew:!1};D(me=>{const fe=[...me];return fe[A]=$,Bm(fe)}),z(` ${_e.name} `),X()},L=async A=>{const ve=E[A];await _r(te(ve.id)),await Promise.all(h.map(async _e=>{await _r(W(_e.id,ve.id))})),D(_e=>_e.filter(($,ee)=>ee!==A)),U(_e=>_e.filter($=>$!==ve.id)),z(" "),X()},q=async(A,ve)=>{if(_){if(!A.grade){z(" "),X();return}ve?(await hi(W(_,A.id),{enabled:!0,taskNo:ac(A)}),U(_e=>Array.from(new Set([..._e,A.id]))),z(` ${A.name} `)):(await _r(W(_,A.id)),U(_e=>_e.filter($=>$!==A.id)),z(` ${A.name} `)),X()}};return f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900",children:" "}),f.jsx("p",{className:"mt-1 text-sm text-slate-600",children:""}),j&&f.jsx("p",{className:"mt-2 text-sm text-slate-700",children:j}),f.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[f.jsxs("label",{className:"text-sm text-slate-700",children:["",f.jsxs("select",{value:g,onChange:A=>y(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),o.map(A=>f.jsx("option",{value:A.id,children:A.name},A.id))]})]}),f.jsxs("label",{className:"text-sm text-slate-700",children:["",f.jsxs("select",{value:_,onChange:A=>T(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),h.map(A=>f.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),g&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[f.jsx("button",{type:"button",onClick:O,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),f.jsxs("span",{className:"text-sm text-slate-600",children:[": ",E.length]}),_&&f.jsxs("span",{className:"text-sm text-slate-600",children:[": ",C.length]})]}),f.jsxs("table",{className:"mt-4 w-full border-collapse text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),f.jsxs("tbody",{children:[E.map((A,ve)=>f.jsxs("tr",{children:[f.jsx("td",{className:"py-2",children:A.isEditing?f.jsx("input",{value:A.name||"",onChange:_e=>S(ve,"name",_e.target.value),placeholder:"",className:"w-full rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):A.name}),f.jsx("td",{className:"py-2",children:A.isEditing?f.jsxs("select",{value:A.grade||"",onChange:_e=>S(ve,"grade",_e.target.value),className:"rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),x4.map(_e=>f.jsx("option",{value:_e,children:_e},_e))]}):A.grade||"-"}),f.jsx("td",{className:"py-2",children:A.isEditing?f.jsx("input",{type:"number",min:"1",step:"1",value:Number(A.points)||1,onChange:_e=>S(ve,"points",_e.target.value),className:"w-24 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):Number(A.points)||1}),f.jsx("td",{className:"py-2",children:A.isEditing?f.jsx("input",{type:"checkbox",checked:!!A.isBonus,onChange:_e=>S(ve,"isBonus",_e)}):A.isBonus?"":"-"}),f.jsx("td",{className:"py-2",children:f.jsx("input",{type:"checkbox",disabled:!_||!A.grade,checked:_?B.has(A.id):!1,onChange:_e=>q(A,_e.target.checked)})}),f.jsx("td",{className:"py-2",children:A.isEditing?f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{type:"button",onClick:()=>P(ve),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 transition hover:bg-emerald-100",children:""}),f.jsx("button",{type:"button",onClick:()=>I(ve),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""})]}):f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{type:"button",onClick:()=>I(ve),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""}),f.jsx("button",{type:"button",onClick:()=>L(ve),className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1 text-xs font-medium text-rose-700 transition hover:bg-rose-100",children:""})]})})]},A.id)),E.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"py-4 text-sm text-slate-500",children:" "})})]})]})]})]})},vp=[{id:"seasons",label:" ",hint:""},{id:"categories",label:" ",hint:""},{id:"tasks",label:" ",hint:""}],Px=s=>!s||s==="routes"||s==="participants"||s==="scores"?"seasons":vp.some(e=>e.id===s)?s:"seasons",qT=s=>{if(!s)return null;if(typeof s.toDate=="function")return s.toDate();if(typeof s.seconds=="number")return new Date(s.seconds*1e3);const e=new Date(s);return Number.isNaN(e.getTime())?null:e},ld=s=>{const e=qT(s);if(!e)return"";const n=String(e.getFullYear()),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${i}-${o}`},Vx=s=>{const e=qT(s);return e?e.toLocaleDateString("ja-JP"):"-"},E4=()=>{var Te;const{eventId:s}=xi(),e=_i(),[n,i]=N.useState(""),o=Fn(),[c,h]=Gd(),[m,g]=N.useState(Px(c.get("tab")||((Te=o.state)==null?void 0:Te.tab)||"seasons")),[y,_]=N.useState([]),[T,E]=N.useState(0),[D,C]=N.useState(0),[U,j]=N.useState(""),[z,B]=N.useState({name:"",startDate:"",endDate:""}),[X,te]=N.useState({name:"",startDate:"",endDate:""}),[W,re]=N.useState(!1),[O,S]=N.useState(""),[I,P]=N.useState(!1),[L,q]=N.useState(!0),[A,ve]=N.useState(""),[_e,$]=N.useState(""),[ee,me]=N.useState(!1),[fe,M]=N.useState(!1),{gymIds:ne,hasAllGymAccess:he,loading:k,error:Q}=Si();Gn(n?`: ${n}`:""),N.useEffect(()=>{if(k)return;if(Q){ve(Q),q(!1);return}(async()=>{q(!0),ve(""),M(!1);try{const Ie=ut(Ee,"events",s),Ue=await gs(Ie);if(!Ue.exists()){ve("");return}const ht=Ue.data(),Ge=ht.name||"";if(i(Ge),j(ht.gymId||""),B({name:Ge,startDate:ld(ht.startDate),endDate:ld(ht.endDate)}),te({name:Ge,startDate:ld(ht.startDate),endDate:ld(ht.endDate)}),!he&&!ne.includes(ht.gymId)){M(!0);return}const[Ye,It,lt]=await Promise.all([We(He(Ee,"events",s,"categories")),We(He(Ee,"events",s,"seasons")),We(He(Ee,"events",s,"participants"))]),Lt=Ye.docs.map(Tt=>({id:Tt.id,...Tt.data()}));_(Lt),E(It.size),C(lt.size)}catch(Ie){console.error(":",Ie),ve("")}finally{q(!1)}})()},[s,ne,he,k,Q]),N.useEffect(()=>{const Ae=Px(c.get("tab"));Ae!==m&&g(Ae)},[c]),N.useEffect(()=>{const Ae=new URLSearchParams(c);Ae.get("tab")!==m&&(Ae.set("tab",m),h(Ae,{replace:!0}))},[m,c,h]);const ge=async Ae=>{Ae.preventDefault();const Ie=z.name.trim(),Ue=BT({name:Ie,gymId:U,startDate:z.startDate,endDate:z.endDate});if(Ue){S(` ${Ue}`);return}P(!0),S("");try{const ht={name:Ie,startDate:bt.fromDate(new Date(z.startDate)),endDate:bt.fromDate(new Date(z.endDate)),updatedAt:vn()};await gh(ut(Ee,"events",s),ht),i(Ie);const Ge={name:Ie,startDate:z.startDate,endDate:z.endDate};B(Ge),te(Ge),S(" "),re(!1)}catch(ht){console.error(":",ht),S(" ")}finally{P(!1)}},pe=async()=>{const Ae=n||"";if(window.confirm(`${Ae}
`)){$(""),me(!0);try{await _r(ut(Ee,"events",s)),e("/dashboard",{replace:!0})}catch(Ue){console.error(":",Ue),$("")}finally{me(!1)}}};if(L||k)return f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(A||Q)return f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:A||Q})});if(fe)return f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})});const ie=vp.find(Ae=>Ae.id===m),ue=[{label:"",value:T},{label:"",value:y.length},{label:"",value:D}],xe=Ae=>`rounded-lg border px-3 py-2 text-sm font-medium transition ${Ae?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,ye=Ae=>`inline-flex items-center rounded-lg border px-3 py-2 text-sm font-medium transition ${Ae?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100"}`;return f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-sky-700",children:"Event Settings"}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",n]})]}),f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:" "})]}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:""}),f.jsx("p",{className:"mt-1 text-sm text-slate-600",children:""}),W?f.jsxs("form",{onSubmit:ge,className:"mt-4 grid gap-4",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"text",value:z.name,onChange:Ae=>B(Ie=>({...Ie,name:Ae.target.value})),placeholder:": FlashComp Live 2026",required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]}),f.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"date",value:z.startDate,onChange:Ae=>B(Ie=>({...Ie,startDate:Ae.target.value})),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:""}),f.jsx("input",{type:"date",value:z.endDate,onChange:Ae=>B(Ie=>({...Ie,endDate:Ae.target.value})),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2.5 text-sm outline-none transition focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100"})]})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f.jsx("button",{type:"submit",disabled:I,className:"inline-flex items-center rounded-xl bg-emerald-800 px-5 py-2.5 text-sm font-bold text-white shadow-lg shadow-emerald-900/15 transition hover:bg-emerald-900 disabled:cursor-not-allowed disabled:opacity-60",children:I?"...":""}),f.jsx("button",{type:"button",onClick:()=>{B(X),re(!1),S("")},className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100",children:""})]})]}):f.jsxs("div",{className:"mt-4 space-y-3",children:[f.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[f.jsx("p",{className:"text-xs font-semibold tracking-wide text-slate-500",children:""}),f.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:z.name||"-"})]}),f.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[f.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[f.jsx("p",{className:"text-xs font-semibold tracking-wide text-slate-500",children:""}),f.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Vx(z.startDate)})]}),f.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[f.jsx("p",{className:"text-xs font-semibold tracking-wide text-slate-500",children:""}),f.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Vx(z.endDate)})]})]}),f.jsx("div",{className:"pt-1",children:f.jsx("button",{type:"button",onClick:()=>{B(X),re(!0),S("")},className:"inline-flex items-center rounded-xl bg-slate-900 px-5 py-2.5 text-sm font-bold text-white transition hover:bg-slate-800",children:""})})]}),O&&f.jsx("p",{className:`mt-3 inline-flex rounded-lg px-3 py-2 text-sm ${O.startsWith("")?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:O})]}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("p",{className:"text-sm text-slate-600",children:""}),f.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:ue.map(Ae=>f.jsxs("span",{className:"rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-sm text-slate-700",children:[Ae.label,": ",Ae.value]},Ae.label))}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(je,{to:`/events/${s}/edit`,className:ye(!0),children:" "}),f.jsx(je,{to:`/events/${s}/climbers`,className:ye(!1),children:" "}),f.jsx(je,{to:`/events/${s}/scores`,className:ye(!1),children:" "}),f.jsx(je,{to:`/events/${s}/data-io`,className:ye(!1),children:" CSV"})]})]}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("div",{className:"flex flex-wrap items-center gap-2",children:vp.map(Ae=>f.jsx("button",{type:"button",onClick:()=>g(Ae.id),className:xe(m===Ae.id),children:Ae.label},Ae.id))}),f.jsx("p",{className:"mt-3 text-sm text-slate-600",children:ie==null?void 0:ie.hint})]}),m==="seasons"&&f.jsx(v4,{eventId:s}),m==="categories"&&f.jsx(_4,{eventId:s,categories:y,setCategories:_}),m==="tasks"&&(y.length===0?f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):f.jsx(b4,{eventId:s,categories:y})),f.jsxs("section",{className:"mt-8 rounded-2xl border border-rose-200 bg-rose-50/70 p-4 shadow-sm",children:[f.jsx("h3",{className:"text-sm font-bold text-rose-800",children:"Danger Zone"}),f.jsx("p",{className:"mt-1 text-sm text-rose-700",children:"CSV"}),_e&&f.jsx("p",{className:"mt-2 rounded-lg border border-rose-300 bg-white px-3 py-2 text-sm text-rose-700",children:_e}),f.jsx("div",{className:"mt-3",children:f.jsx("button",{type:"button",onClick:pe,disabled:ee,className:"inline-flex items-center rounded-lg bg-rose-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-rose-800 disabled:cursor-not-allowed disabled:opacity-60",children:ee?"...":""})})]})]})})},cd={name:"",memberNo:"",age:"",gender:"",categoryId:""},T4=s=>s==="male"?"":s==="female"?"":s==="other"?"":"",w4=({eventId:s,categories:e})=>{const[n,i]=N.useState([]),[o,c]=N.useState(cd),[h,m]=N.useState(""),[g,y]=N.useState(cd),_=N.useCallback(async()=>{try{const z=(await We(He(Ee,"events",s,"participants"))).docs.map(B=>({id:B.id,...B.data()}));i(z)}catch(j){console.error(":",j)}},[s]);N.useEffect(()=>{_()},[_]);const T=async j=>{j.preventDefault();try{await yh(He(Ee,"events",s,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:vn()}),c(cd),_()}catch(z){console.error(":",z)}},E=j=>{m(j.id),y({name:j.name||"",memberNo:j.memberNo||"",age:j.age?String(j.age):"",gender:j.gender||"",categoryId:j.categoryId||""})},D=()=>{m(""),y(cd)},C=async j=>{if(!g.name.trim()||!g.memberNo.trim()||!g.age||!g.gender||!g.categoryId){alert("");return}try{const z={name:g.name.trim(),memberNo:g.memberNo.trim(),age:Number(g.age),gender:g.gender,categoryId:g.categoryId,updatedAt:vn()};await gh(ut(Ee,"events",s,"participants",j),z),i(B=>B.map(X=>X.id===j?{...X,...z,updatedAt:new Date}:X)),D()}catch(z){console.error(":",z),alert("")}},U=async j=>{if(window.confirm(""))try{await _r(ut(Ee,"events",s,"participants",j)),i(B=>B.filter(X=>X.id!==j))}catch(B){console.error(":",B)}};return f.jsxs("div",{children:[f.jsx("h3",{children:" "}),f.jsxs("form",{onSubmit:T,children:[f.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:j=>c(z=>({...z,name:j.target.value})),required:!0}),f.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:j=>c(z=>({...z,memberNo:j.target.value})),required:!0}),f.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:j=>c(z=>({...z,age:j.target.value})),required:!0}),f.jsxs("select",{value:o.gender,onChange:j=>c(z=>({...z,gender:j.target.value})),required:!0,children:[f.jsx("option",{value:"",children:"--  --"}),f.jsx("option",{value:"male",children:""}),f.jsx("option",{value:"female",children:""}),f.jsx("option",{value:"other",children:""})]}),f.jsxs("select",{value:o.categoryId,onChange:j=>c(z=>({...z,categoryId:j.target.value})),required:!0,children:[f.jsx("option",{value:"",children:"--  --"}),e.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]}),f.jsx("button",{type:"submit",children:""})]}),f.jsx("ul",{children:n.map(j=>{var X;const z=((X=e.find(te=>te.id===j.categoryId))==null?void 0:X.name)||"",B=h===j.id;return f.jsx("li",{children:B?f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",value:g.name,onChange:te=>y(W=>({...W,name:te.target.value}))}),f.jsx("input",{type:"text",value:g.memberNo,onChange:te=>y(W=>({...W,memberNo:te.target.value}))}),f.jsx("input",{type:"number",min:"1",max:"120",value:g.age,onChange:te=>y(W=>({...W,age:te.target.value}))}),f.jsxs("select",{value:g.gender,onChange:te=>y(W=>({...W,gender:te.target.value})),children:[f.jsx("option",{value:"",children:"--  --"}),f.jsx("option",{value:"male",children:""}),f.jsx("option",{value:"female",children:""}),f.jsx("option",{value:"other",children:""})]}),f.jsxs("select",{value:g.categoryId,onChange:te=>y(W=>({...W,categoryId:te.target.value})),children:[f.jsx("option",{value:"",children:"--  --"}),e.map(te=>f.jsx("option",{value:te.id,children:te.name},te.id))]}),f.jsx("button",{type:"button",onClick:()=>C(j.id),children:""}),f.jsx("button",{type:"button",onClick:D,children:""})]}):f.jsxs(f.Fragment,{children:[j.name," / ",": ",j.memberNo||"-"," / ",": ",j.age||"-"," / ",": ",T4(j.gender)," / ",": ",z,f.jsx("button",{type:"button",onClick:()=>E(j),children:""}),f.jsx("button",{type:"button",onClick:()=>U(j.id),children:""})]})},j.id)})})]})},S4=()=>{const{eventId:s}=xi(),[e,n]=N.useState(""),[i,o]=N.useState([]),[c,h]=N.useState(!0),[m,g]=N.useState(""),[y,_]=N.useState(!1),{gymIds:T,hasAllGymAccess:E,loading:D,error:C}=Si();Gn(e?`: ${e}`:"");const U=j=>`inline-flex items-center rounded-lg border px-3 py-2 text-sm font-medium transition ${j?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100"}`;return N.useEffect(()=>{if(D)return;if(C){g(C),h(!1);return}(async()=>{h(!0),g(""),_(!1);try{const z=await gs(ut(Ee,"events",s));if(!z.exists()){g("");return}const B=z.data();if(n(B.name||""),!E&&!T.includes(B.gymId)){_(!0);return}const X=await We(He(Ee,"events",s,"categories"));o(X.docs.map(te=>({id:te.id,...te.data()})))}catch(z){console.error(":",z),g("")}finally{h(!1)}})()},[s,T,E,D,C]),c||D?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):m||C?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:m||C})}):y?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-sky-700",children:"Climber Management"}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]})]}),f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:" "})]}),f.jsx("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(je,{to:`/events/${s}/edit`,className:U(!1),children:" "}),f.jsx(je,{to:`/events/${s}/climbers`,className:U(!0),children:" "}),f.jsx(je,{to:`/events/${s}/scores`,className:U(!1),children:" "}),f.jsx(je,{to:`/events/${s}/data-io`,className:U(!1),children:" CSV"})]})}),f.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-2 shadow-sm",children:f.jsx(w4,{eventId:s,categories:i})})]})})},A4=({eventId:s})=>{var E,D;const[e,n]=N.useState([]),[i,o]=N.useState([]),[c,h]=N.useState([]),m=Fn(),[g,y]=N.useState(((E=m.state)==null?void 0:E.seasonId)||""),[_,T]=N.useState(((D=m.state)==null?void 0:D.categoryId)||"");return N.useEffect(()=>{const C=async()=>{try{const z=(await We(He(Ee,"events",s,"seasons"))).docs.map(B=>({id:B.id,...B.data()}));n(z)}catch(j){console.error(":",j)}},U=async()=>{try{const z=(await We(He(Ee,"events",s,"categories"))).docs.map(B=>({id:B.id,...B.data()}));o(z)}catch(j){console.error(":",j)}};C(),U()},[s]),N.useEffect(()=>{(async()=>{if(!_){h([]);return}try{const U=kT(He(Ee,"events",s,"participants"),MT("categoryId","==",_)),z=(await We(U)).docs.map(B=>({id:B.id,...B.data()})).sort((B,X)=>(B.name||"").localeCompare(X.name||"","ja"));h(z)}catch(U){console.error(":",U)}})()},[s,_]),N.useEffect(()=>{var C,U;(C=m.state)!=null&&C.seasonId&&y(m.state.seasonId),(U=m.state)!=null&&U.categoryId&&T(m.state.categoryId)},[m.state]),f.jsxs("div",{className:"p-4 sm:p-5",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),f.jsxs("div",{className:"mt-3 mb-4 flex flex-wrap gap-2",children:[f.jsx(je,{to:`/events/${s}/data-io`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"}),f.jsx(je,{to:`/score-summary/${s}`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""})]}),f.jsx("div",{className:"mb-4",children:f.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",f.jsxs("select",{value:g,onChange:C=>y(C.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),e.map(C=>f.jsx("option",{value:C.id,children:C.name},C.id))]})]})}),f.jsx("div",{className:"mb-4",children:f.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",f.jsxs("select",{value:_,onChange:C=>T(C.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),i.map(C=>f.jsx("option",{value:C.id,children:C.name},C.id))]})]})}),g&&_&&f.jsx("ul",{className:"space-y-2",children:c.map(C=>f.jsxs("li",{className:"rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[f.jsx("span",{className:"font-medium",children:C.name}),f.jsx(je,{to:`/events/${s}/scoreinput/${g}/${_}/${C.id}`,className:"ml-3 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-2.5 py-1 text-xs font-semibold text-sky-800 transition hover:bg-sky-100",children:" "})]},C.id))})]})},N4=()=>{const{eventId:s}=xi(),[e,n]=N.useState(""),[i,o]=N.useState(!0),[c,h]=N.useState(""),[m,g]=N.useState(!1),{gymIds:y,hasAllGymAccess:_,loading:T,error:E}=Si();Gn(e?`: ${e}`:"");const D=C=>`inline-flex items-center rounded-lg border px-3 py-2 text-sm font-medium transition ${C?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100"}`;return N.useEffect(()=>{if(T)return;if(E){h(E),o(!1);return}(async()=>{o(!0),h(""),g(!1);try{const U=await gs(ut(Ee,"events",s));if(!U.exists()){h("");return}const j=U.data();if(n(j.name||""),!_&&!y.includes(j.gymId)){g(!0);return}}catch(U){console.error(":",U),h("")}finally{o(!1)}})()},[s,y,_,T,E]),i||T?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):c||E?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:c||E})}):m?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-sky-700",children:"Score Management"}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]})]}),f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:" "})]}),f.jsx("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(je,{to:`/events/${s}/edit`,className:D(!1),children:" "}),f.jsx(je,{to:`/events/${s}/climbers`,className:D(!1),children:" "}),f.jsx(je,{to:`/events/${s}/scores`,className:D(!0),children:" "}),f.jsx(je,{to:`/events/${s}/data-io`,className:D(!1),children:" CSV"})]})}),f.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm sm:p-2",children:f.jsx(A4,{eventId:s})})]})})},R4=Number.MAX_SAFE_INTEGER,_p=s=>{const e=Number(s);return Number.isFinite(e)?e:null},xp=s=>{const e=_p(s==null?void 0:s.taskNo);if(e!=null)return e;const n=String((s==null?void 0:s.name)||"").match(/(\d+)/);return n?Number(n[1]):R4},HT=(s=[])=>[...s].sort((e,n)=>{const i=xp(e)-xp(n);return i!==0?i:String((e==null?void 0:e.name)||"").localeCompare(String((n==null?void 0:n.name)||""),"ja")}),vh=(s=[],e=[])=>{const n=new Map(s.map(o=>[o.id,o])),i=[];for(const o of e){if((o==null?void 0:o.enabled)===!1)continue;const c=n.get(o.id);if(!c)continue;const h=_p(o.taskNo),m=_p(c.taskNo);i.push({...c,taskNo:m??h??xp(c)})}return HT(i)},Eg=(s=[])=>{const e=new Map;for(const n of s)n.id&&e.set(n.id,n),n.name&&e.set(n.name,n);return e},Kl=(s,e)=>!s||!e?!1:e.id&&e.id in s?!!s[e.id]:e.name&&e.name in s?!!s[e.name]:!1,_h=async(s,e)=>{const i=(await We(He(Ee,"events",s,"seasons",e,"tasks"))).docs.map(o=>({id:o.id,...o.data()}));return HT(i)},xh=async(s,e,n)=>(await We(He(Ee,"events",s,"seasons",e,"categoryTaskMap",n,"assignments"))).docs.map(o=>({id:o.id,...o.data()})),C4=async({eventId:s,seasonId:e,categoryId:n,seasonTasks:i})=>{const[o,c]=await Promise.all([i?Promise.resolve(i):_h(s,e),xh(s,e,n)]);return vh(o,c)},I4=()=>{const{eventId:s,seasonId:e,categoryId:n,participantId:i}=xi(),[o,c]=N.useState([]),[h,m]=N.useState(""),[g,y]=N.useState({}),[_,T]=N.useState("simple"),[E,D]=N.useState(!0),[C,U]=N.useState(""),[j,z]=N.useState(""),[B,X]=N.useState(null),[te,W]=N.useState(!0),[re,O]=N.useState(""),[S,I]=N.useState(!1),{gymIds:P,hasAllGymAccess:L,loading:q,error:A}=Si();Gn(h?`: ${h}`:""),N.useEffect(()=>{if(q)return;if(A){O(A),W(!1);return}(async()=>{W(!0),O(""),I(!1);try{const Q=await gs(ut(Ee,"events",s));if(!Q.exists()){O("");return}if(!L&&!P.includes(Q.data().gymId)){I(!0);return}const ge=await gs(ut(Ee,"events",s,"participants",i));ge.exists()&&m(ge.data().name||"");const pe=await C4({eventId:s,seasonId:e,categoryId:n});c(pe);const ie=await gs(ut(Ee,"events",s,"seasons",e,"categories",n,"participants",i));if(ie.exists()){const ue=ie.data();ue.scores&&y(ue.scores),ue.updatedAt&&X(ue.updatedAt.toDate())}}catch(Q){console.error(":",Q),O("")}finally{W(!1)}})()},[s,e,n,i,P,L,q,A]);const ve=(k,Q={})=>k!=null&&k.id&&k.id in Q?k.id:k!=null&&k.name&&k.name in Q?k.name:(k==null?void 0:k.name)||(k==null?void 0:k.id)||"",_e=k=>{y(Q=>{const ge=ve(k,Q);return ge?{...Q,[ge]:!Kl(Q,k)}:Q})},$=C.trim().toLowerCase(),ee=o.filter(k=>Kl(g,k)).length,me=o.length-ee,fe=o.filter(k=>$.length===0||String(k.name||"").toLowerCase().includes($)?E?!Kl(g,k):!0:!1),M=k=>{y(Q=>{const ge={...Q};for(const pe of fe){const ie=ve(pe,Q);ie&&(ge[ie]=k)}return ge})},ne=async()=>{if(!S)try{await hi(ut(Ee,"events",s,"seasons",e,"categories",n,"participants",i),{scores:g,updatedAt:vn()},{merge:!0}),z(" "),setTimeout(()=>z(""),2e3)}catch(k){console.error(":",k),z(" ")}},he=j.startsWith("")?"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700":"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700";return te||q?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):re||A?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:re||A})}):S?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[f.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Score Input"}),f.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:" "}),f.jsx("div",{className:"mt-4",children:f.jsx(je,{to:`/events/${s}/scores`,state:{seasonId:e,categoryId:n},className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),f.jsxs("p",{className:"mt-4 text-sm text-slate-700",children:[": ",h]}),f.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[" ",ee," / ",o.length," ",me,""]}),B&&f.jsxs("p",{className:"mt-1 text-xs italic text-slate-500",children:[": ",B.toLocaleString()]})]}),f.jsxs("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[f.jsx("button",{type:"button",onClick:()=>T("simple"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="simple"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),f.jsx("button",{type:"button",onClick:()=>T("detail"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="detail"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),f.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[f.jsx("input",{type:"checkbox",checked:E,onChange:k=>D(k.target.checked),className:"size-4 rounded border-slate-300"}),""]}),f.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[":",f.jsx("input",{type:"text",value:C,onChange:k=>U(k.target.value),placeholder:"No.01",className:"w-32 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]})]}),f.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[f.jsx("button",{type:"button",onClick:()=>M(!0),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm font-medium text-emerald-700 transition hover:bg-emerald-100",children:""}),f.jsx("button",{type:"button",onClick:()=>M(!1),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),f.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:fe.length===0?f.jsx("p",{className:"text-sm text-slate-600",children:""}):_==="simple"?f.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:fe.map(k=>{const Q=Kl(g,k);return f.jsxs("button",{type:"button",onClick:()=>_e(k),className:`min-h-[96px] rounded-xl border p-3 text-left transition ${Q?"border-emerald-300 bg-emerald-50":"border-slate-300 bg-white hover:bg-slate-50"}`,children:[f.jsx("div",{className:"font-semibold text-slate-900",children:k.name||k.id}),f.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:[": ",k.grade||"-"," / : ",k.points??"-"]}),f.jsx("div",{className:`mt-2 text-sm font-semibold ${Q?"text-emerald-700":"text-slate-700"}`,children:Q?"":""})]},k.id||k.name)})}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-[520px] w-full border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),f.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),f.jsx("th",{className:"border-b border-slate-200 pb-2 text-right text-sm font-semibold text-slate-700",children:""}),f.jsx("th",{className:"border-b border-slate-200 pb-2 text-center text-sm font-semibold text-slate-700",children:""})]})}),f.jsx("tbody",{children:fe.map(k=>f.jsxs("tr",{children:[f.jsx("td",{className:"py-2 text-sm text-slate-800",children:k.name||k.id}),f.jsx("td",{className:"py-2 text-sm text-slate-700",children:k.grade||"-"}),f.jsx("td",{className:"py-2 text-right text-sm text-slate-700",children:k.points??"-"}),f.jsx("td",{className:"py-2 text-center",children:f.jsx("input",{type:"checkbox",checked:Kl(g,k),onChange:()=>_e(k),className:"size-4 rounded border-slate-300"})})]},k.id||k.name))})]})})}),f.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:[f.jsx("button",{type:"button",onClick:ne,className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),j&&f.jsx("span",{className:he,children:j})]})]})})},D4=["name","memberNo","age","gender"],j4=s=>{const e=String(s||"").trim().toLowerCase();return e?e==="male"||e==="m"||e==="man"||e===""?"male":e==="female"||e==="f"||e==="woman"||e===""?"female":e==="other"||e===""?"other":"":""},Lx=s=>{const e=s==null?"":String(s);return/[",\r\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},O4=(s,e)=>{const n=[s.map(Lx).join(",")];for(const i of e)n.push(s.map(o=>Lx(i[o]??"")).join(","));return`${n.join(`\r
`)}\r
`},zm=(s,e,n)=>{const i=O4(e,n),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(o),h=document.createElement("a");h.href=c,h.download=s,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c)},k4=s=>{const e=[];let n="",i=[],o=!1;for(let m=0;m<s.length;m+=1){const g=s[m],y=s[m+1];if(o){g==='"'&&y==='"'?(n+='"',m+=1):g==='"'?o=!1:n+=g;continue}if(g==='"'){o=!0;continue}if(g===","){i.push(n),n="";continue}if(g===`
`){i.push(n.replace(/\r$/,"")),n="",i.some(_=>_!=="")&&e.push(i),i=[];continue}n+=g}if((n.length>0||i.length>0)&&(i.push(n.replace(/\r$/,"")),i.some(m=>m!=="")&&e.push(i)),e.length===0)return{headers:[],records:[]};const c=e[0].map(m=>String(m||"").trim()),h=e.slice(1).map(m=>{const g={};return c.forEach((y,_)=>{g[y]=m[_]??""}),g});return{headers:c,records:h}},M4=s=>s?typeof s.toMillis=="function"?s.toMillis():typeof s.seconds=="number"?s.seconds*1e3:0:0,P4=(s,e)=>{const n={};for(const i of s){const o=new Map;for(const c of e.filter(h=>h.categoryId===i.id))o.set(c.id,{participantId:c.id,name:c.name||"",memberNo:c.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},V4=s=>{const e={};for(const[n,i]of Object.entries(s)){const o=Array.from(i.values()).sort((g,y)=>y.totalPoints!==g.totalPoints?y.totalPoints-g.totalPoints:y.clearCount!==g.clearCount?y.clearCount-g.clearCount:g.name.localeCompare(y.name,"ja"));let c=null,h=null,m=0;e[n]=o.map((g,y)=>((g.totalPoints!==c||g.clearCount!==h)&&(m=y+1),c=g.totalPoints,h=g.clearCount,{...g,rank:m}))}return e},L4=()=>{const{eventId:s}=xi(),{gymIds:e,hasAllGymAccess:n,loading:i,error:o}=Si();Gn("CSV");const[c,h]=N.useState(null),[m,g]=N.useState([]),[y,_]=N.useState([]),[T,E]=N.useState([]),[D,C]=N.useState("all"),[U,j]=N.useState(!0),[z,B]=N.useState(!1),[X,te]=N.useState(""),[W,re]=N.useState(""),[O,S]=N.useState(!1),[I,P]=N.useState(!1),L=fe=>`inline-flex items-center rounded-lg border px-3 py-2 text-sm font-medium transition ${fe?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100"}`,q=N.useMemo(()=>new Map(y.map(fe=>[fe.id,fe])),[y]),A=async()=>{j(!0),te(""),B(!1);try{const fe=await gs(ut(Ee,"events",s));if(!fe.exists()){te("");return}const M=fe.data();if(!n&&!e.includes(M.gymId)){B(!0);return}const[ne,he,k]=await Promise.all([We(He(Ee,"events",s,"seasons")),We(He(Ee,"events",s,"categories")),We(He(Ee,"events",s,"participants"))]);h({id:fe.id,...M}),g(ne.docs.map(Q=>({id:Q.id,...Q.data()})).sort((Q,ge)=>(Q.name||"").localeCompare(ge.name||"","ja"))),_(he.docs.map(Q=>({id:Q.id,...Q.data()})).sort((Q,ge)=>(Q.name||"").localeCompare(ge.name||"","ja"))),E(k.docs.map(Q=>({id:Q.id,...Q.data()})).sort((Q,ge)=>(Q.name||"").localeCompare(ge.name||"","ja")))}catch(fe){console.error("CSV:",fe),te("CSV")}finally{j(!1)}};N.useEffect(()=>{if(!i){if(o){te(o),j(!1);return}A()}},[i,o,s,n,e.join(",")]),N.useEffect(()=>{if(D==="all")return;m.some(M=>M.id===D)||C("all")},[D,m]);const ve=()=>{if(!c)return;const fe=["id","name","memberNo","age","gender","categoryId","categoryName","entrySeasonId","participatingSeasonIds"],M=T.map(ne=>{var he;return{id:ne.id,name:ne.name||"",memberNo:ne.memberNo||"",age:ne.age??"",gender:ne.gender||"",categoryId:ne.categoryId||"",categoryName:((he=q.get(ne.categoryId))==null?void 0:he.name)||"",entrySeasonId:ne.entrySeasonId||"",participatingSeasonIds:Array.isArray(ne.participatingSeasonIds)?ne.participatingSeasonIds.join("|"):""}});zm(`${c.id}-participants.csv`,fe,M),re(` CSV${M.length}`)},_e=()=>{if(!c)return;const fe=["scope","categoryId","categoryName","male","female","other","unknown","total","maleRatioPct","femaleRatioPct"],M=he=>{let k=0,Q=0,ge=0,pe=0;for(const ye of he)ye.gender==="male"?k+=1:ye.gender==="female"?Q+=1:ye.gender==="other"?ge+=1:pe+=1;const ie=k+Q+ge+pe,ue=ie>0?(k/ie*100).toFixed(1):"0.0",xe=ie>0?(Q/ie*100).toFixed(1):"0.0";return{male:k,female:Q,other:ge,unknown:pe,total:ie,maleRatioPct:ue,femaleRatioPct:xe}},ne=[];ne.push({scope:"overall",categoryId:"all",categoryName:"",...M(T)});for(const he of y){const k=T.filter(Q=>Q.categoryId===he.id);ne.push({scope:"category",categoryId:he.id,categoryName:he.name||he.id,...M(k)})}zm(`${c.id}-gender-ratio.csv`,fe,ne),re(" CSV")},$=async()=>{var ue;const fe=D==="all"?m.map(xe=>xe.id):[D].filter(Boolean);if(fe.length===0)return[];const M=P4(y,T),ne=new Map(T.map(xe=>[xe.id,xe])),he=new Map(await Promise.all(fe.map(async xe=>[xe,await _h(s,xe)]))),k=fe.flatMap(xe=>y.map(async ye=>{const[Te,Ae]=await Promise.all([xh(s,xe,ye.id),We(He(Ee,"events",s,"seasons",xe,"categories",ye.id,"participants"))]);return{categoryId:ye.id,assignedTasks:vh(he.get(xe)||[],Te),scoreSnap:Ae}})),Q=await Promise.all(k);for(const{categoryId:xe,assignedTasks:ye,scoreSnap:Te}of Q){const Ae=Eg(ye);for(const Ie of Te.docs){const Ue=Ie.data(),ht=Ue.scores||{},Ge=Ie.id;if(!M[xe].has(Ge)){const lt=ne.get(Ge);M[xe].set(Ge,{participantId:Ge,name:(lt==null?void 0:lt.name)||Ue.participantName||`ID:${Ge}`,memberNo:(lt==null?void 0:lt.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Ye=M[xe].get(Ge),It=new Set;for(const[lt,Lt]of Object.entries(ht)){if(!Lt)continue;const Tt=Ae.get(lt),Nn=(Tt==null?void 0:Tt.id)||lt;It.has(Nn)||(It.add(Nn),Ye.totalPoints+=Number(Tt==null?void 0:Tt.points)||1,Ye.clearCount+=1)}Ye.latestUpdatedAt=Math.max(Ye.latestUpdatedAt,M4(Ue.updatedAt))}}const ge=V4(M),pe=D==="all"?"all":((ue=m.find(xe=>xe.id===D))==null?void 0:ue.name)||D,ie=[];for(const xe of y){const ye=ge[xe.id]||[];for(const Te of ye)ie.push({seasonScope:pe,categoryId:xe.id,categoryName:xe.name||xe.id,rank:Te.rank,participantId:Te.participantId,participantName:Te.name,memberNo:Te.memberNo,totalPoints:Te.totalPoints,clearCount:Te.clearCount})}return ie},ee=async()=>{if(c){P(!0),re("");try{const fe=await $(),M=["seasonScope","categoryId","categoryName","rank","participantId","participantName","memberNo","totalPoints","clearCount"];zm(`${c.id}-ranking.csv`,M,fe),re(` CSV${fe.length}`)}catch(fe){console.error("CSV:",fe),re(" CSV")}finally{P(!1)}}},me=async fe=>{var ne;const M=(ne=fe.target.files)==null?void 0:ne[0];if(fe.target.value="",!!M){S(!0),re("");try{const he=await M.text(),{headers:k,records:Q}=k4(he);if(k.length===0){re(" CSV");return}const ge=new Map(k.map(Ue=>[Ue.toLowerCase(),Ue])),pe=D4.filter(Ue=>!ge.has(Ue.toLowerCase()));if(pe.length>0){re(` : ${pe.join(", ")}`);return}const ie=new Map(y.map(Ue=>[Ue.name,Ue.id])),ue=[],xe=[];if(Q.forEach((Ue,ht)=>{const Ge=ht+2,Ye=os=>Ue[ge.get(os.toLowerCase())||""]||"",It=String(Ye("id")).trim(),lt=String(Ye("name")).trim(),Lt=String(Ye("memberNo")).trim(),Tt=String(Ye("age")).trim(),Nn=j4(Ye("gender")),Ot=String(Ye("categoryId")).trim(),Rn=String(Ye("categoryName")).trim(),Be=Ot||ie.get(Rn)||"",Le=String(Ye("entrySeasonId")).trim(),ke=String(Ye("participatingSeasonIds")).trim(),it=ke?ke.split("|").map(os=>os.trim()).filter(Boolean):[],_t=Number(Tt);if(!lt||!Lt||!Number.isFinite(_t)||_t<=0||!Nn||!Be){xe.push(`line ${Ge}: name/memberNo/age/gender/categoryId `);return}if(!q.has(Be)){xe.push(`line ${Ge}: categoryId "${Be}" `);return}ue.push({id:It,payload:{name:lt,memberNo:Lt,age:_t,gender:Nn,categoryId:Be,entrySeasonId:Le||null,participatingSeasonIds:it}})}),xe.length>0){re(` CSV: ${xe.slice(0,5).join(" / ")}`);return}if(ue.length===0){re(" ");return}let ye=Nx(Ee),Te=0;const Ae=He(Ee,"events",s,"participants"),Ie=async(Ue=!1)=>{(Te>=400||Ue&&Te>0)&&(await ye.commit(),ye=Nx(Ee),Te=0)};for(const Ue of ue){const ht=Ue.id?ut(Ee,"events",s,"participants",Ue.id):ut(Ae);Ue.id?ye.set(ht,{...Ue.payload,updatedAt:vn()},{merge:!0}):ye.set(ht,{...Ue.payload,createdAt:vn(),updatedAt:vn()}),Te+=1,await Ie()}await Ie(!0),await A(),re(` CSV${ue.length}`)}catch(he){console.error("CSV:",he),re(" CSV")}finally{S(!1)}}};return U||i?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"CSV..."})}):X||o?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:X||o})}):z?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:"CSV"})}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-sky-700",children:"Data IO"}),f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" CSV",(c==null?void 0:c.name)||s]})]}),f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:" "})]}),f.jsx("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(je,{to:`/events/${s}/edit`,className:L(!1),children:" "}),f.jsx(je,{to:`/events/${s}/climbers`,className:L(!1),children:" "}),f.jsx(je,{to:`/events/${s}/scores`,className:L(!1),children:" "}),f.jsx(je,{to:`/events/${s}/data-io`,className:L(!0),children:" CSV"})]})}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"CSV: `name,memberNo,age,gender,categoryId`"}),f.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[f.jsx("button",{type:"button",onClick:ve,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:"CSV"}),f.jsx("label",{className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700",children:f.jsx("input",{type:"file",accept:".csv,text/csv",onChange:me,disabled:O,className:"text-sm"})}),f.jsx("span",{className:"text-sm text-slate-600",children:O?"...":`: ${T.length}`})]})]}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),f.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:D,onChange:fe=>C(fe.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),m.map(fe=>f.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),f.jsx("button",{type:"button",onClick:ee,disabled:I,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-60",children:I?"...":"CSV"}),f.jsx("button",{type:"button",onClick:_e,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"})]})]}),W&&f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:W})]})})},Ux=s=>s?typeof s.toDate=="function"?s.toDate().toLocaleDateString():typeof s.seconds=="number"?new Date(s.seconds*1e3).toLocaleDateString():String(s):"-",co=s=>s?typeof s.toDate=="function"?s.toDate().getTime():typeof s.seconds=="number"?s.seconds*1e3:0:0,qd=(s,e)=>{const n=co(s.startDate),i=co(s.endDate);return n&&i&&n<=e&&e<=i?"ongoing":n&&e<n?"upcoming":"ended"},U4={ongoing:"",upcoming:"",ended:""},Bx={ongoing:0,upcoming:1,ended:2},B4=(s,e,n)=>{const i=qd(s,n),o=qd(e,n),c=Bx[i]??99,h=Bx[o]??99;if(c!==h)return c-h;const m=co(s.startDate),g=co(e.startDate),y=co(s.endDate),_=co(e.endDate);return i==="ongoing"?y!==_?y-_:m!==g?g-m:(s.name||"").localeCompare(e.name||"","ja"):i==="upcoming"?m!==g?m-g:y!==_?y-_:(s.name||"").localeCompare(e.name||"","ja"):y!==_?_-y:m!==g?g-m:(s.name||"").localeCompare(e.name||"","ja")},z4=()=>{Gn("");const[s,e]=Gd(),n=s.get("q")||"",i=s.get("status")||"all",o=s.get("gym")||"all",[c,h]=N.useState([]),[m,g]=N.useState([]),[y,_]=N.useState(n),[T,E]=N.useState(i),[D,C]=N.useState(o),[U,j]=N.useState(!0),[z,B]=N.useState("");N.useEffect(()=>{(async()=>{try{B("");const[O,S]=await Promise.all([We(He(Ee,"events")),We(He(Ee,"gyms"))]),I=O.docs.map(L=>({id:L.id,...L.data()})),P=S.docs.map(L=>({id:L.id,...L.data()})).sort((L,q)=>(L.name||"").localeCompare(q.name||"","ja"));h(I),g(P)}catch(O){console.error(":",O),B("")}finally{j(!1)}})()},[]),N.useEffect(()=>{const re=new URLSearchParams,O=y.trim();O&&re.set("q",O),T!=="all"&&re.set("status",T),D!=="all"&&re.set("gym",D),re.toString()!==s.toString()&&e(re,{replace:!0})},[y,T,D,s,e]),N.useEffect(()=>{if(D==="all"||m.length===0)return;m.some(O=>O.id===D)||C("all")},[D,m]);const X=N.useMemo(()=>{const re=Date.now(),O=y.trim().toLowerCase();return[...c].sort((S,I)=>B4(S,I,re)).filter(S=>{const I=(S.name||"").toLowerCase(),P=qd(S,re),L=O?I.includes(O):!0,q=T==="all"?!0:P===T,A=D==="all"?!0:S.gymId===D;return L&&q&&A})},[c,y,T,D]),te=N.useMemo(()=>new Map(m.map(re=>[re.id,re.name||re.id])),[m]),W=()=>{_(""),E("all"),C("all")};return U?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):z?f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:z}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),f.jsxs("ol",{className:"mt-2 list-decimal space-y-1 pl-5 text-sm text-slate-700",children:[f.jsx("li",{children:""}),f.jsx("li",{children:""}),f.jsx("li",{children:""})]}),f.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsx("input",{type:"text",value:y,onChange:re=>_(re.target.value),placeholder:": Spring",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:T,onChange:re=>E(re.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),f.jsx("option",{value:"ongoing",children:""}),f.jsx("option",{value:"upcoming",children:""}),f.jsx("option",{value:"ended",children:""})]})]}),f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:D,onChange:re=>C(re.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),m.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),f.jsx("button",{type:"button",onClick:W,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),f.jsxs("span",{className:"ml-auto text-sm text-slate-600",children:[" ",X.length," / ",c.length," "]})]}),c.length===0?f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):X.length===0?f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):f.jsx("div",{className:"mt-4 grid gap-3",children:X.map(re=>{const O=qd(re,Date.now());return f.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[re.name,f.jsx("span",{className:"ml-2 rounded-full border border-slate-300 bg-slate-50 px-2 py-0.5 text-xs text-slate-600",children:U4[O]})]}),f.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:[": ",Ux(re.startDate),"  ",Ux(re.endDate)]}),f.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[": ",te.get(re.gymId)||""]}),f.jsx(je,{to:`/score-summary/${re.id}`,className:"mt-2 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]},re.id)})}),f.jsx("div",{className:"mt-8",children:f.jsx(je,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]})})},q4=s=>s?typeof s.toMillis=="function"?s.toMillis():typeof s.seconds=="number"?s.seconds*1e3:0:0,zx=(s,e)=>{const n={};for(const i of s){const o=new Map;for(const c of e.filter(h=>h.categoryId===i.id))o.set(c.id,{participantId:c.id,name:c.name||"",memberNo:c.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},qx=s=>{const e={};for(const[n,i]of Object.entries(s)){const o=Array.from(i.values()).sort((g,y)=>y.totalPoints!==g.totalPoints?y.totalPoints-g.totalPoints:y.clearCount!==g.clearCount?y.clearCount-g.clearCount:g.name.localeCompare(y.name,"ja"));let c=null,h=null,m=0;e[n]=o.map((g,y)=>((g.totalPoints!==c||g.clearCount!==h)&&(m=y+1),c=g.totalPoints,h=g.clearCount,{...g,rank:m}))}return e},H4=()=>{const{eventId:s}=xi(),[e,n]=Gd(),i=e.get("season")||"all",o=e.get("category")||"all",c=e.get("q")||"",h=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[g,y]=N.useState(null),[_,T]=N.useState([]),[E,D]=N.useState([]),[C,U]=N.useState([]),[j,z]=N.useState(i),[B,X]=N.useState(o),[te,W]=N.useState(h),[re,O]=N.useState(m),[S,I]=N.useState(c),[P,L]=N.useState({}),[q,A]=N.useState(!0),[ve,_e]=N.useState(!1),[$,ee]=N.useState("");Gn(g!=null&&g.name?`: ${g.name}`:""),N.useEffect(()=>{let ie=!1;return(async()=>{A(!0),ee("");try{const xe=await gs(ut(Ee,"events",s));if(!xe.exists()){ie||ee("");return}const[ye,Te,Ae]=await Promise.all([We(He(Ee,"events",s,"seasons")),We(He(Ee,"events",s,"categories")),We(He(Ee,"events",s,"participants"))]);if(ie)return;y({id:xe.id,...xe.data()}),T(ye.docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,Ue)=>Ie.name.localeCompare(Ue.name,"ja"))),D(Te.docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,Ue)=>Ie.name.localeCompare(Ue.name,"ja"))),U(Ae.docs.map(Ie=>({id:Ie.id,...Ie.data()})))}catch(xe){console.error(":",xe),ie||ee("")}finally{ie||A(!1)}})(),()=>{ie=!0}},[s]),N.useEffect(()=>{let ie=!1;return(async()=>{if(q||!g||E.length===0)return;ee("");const xe=B==="all"?E:E.filter(Te=>Te.id===B);if(xe.length===0){L({});return}const ye=j==="all"?_.map(Te=>Te.id):[j].filter(Boolean);if(ye.length===0){L(qx(zx(xe,C)));return}_e(!0);try{const Te=zx(xe,C),Ae=new Map(C.map(Ge=>[Ge.id,Ge])),Ie=new Map(await Promise.all(ye.map(async Ge=>[Ge,await _h(s,Ge)]))),Ue=ye.flatMap(Ge=>xe.map(async Ye=>{const[It,lt]=await Promise.all([xh(s,Ge,Ye.id),We(He(Ee,"events",s,"seasons",Ge,"categories",Ye.id,"participants"))]);return{categoryId:Ye.id,assignedTasks:vh(Ie.get(Ge)||[],It),scoreSnap:lt}})),ht=await Promise.all(Ue);for(const{categoryId:Ge,assignedTasks:Ye,scoreSnap:It}of ht){const lt=Eg(Ye);for(const Lt of It.docs){const Tt=Lt.data(),Nn=Tt.scores||{},Ot=Lt.id;if(!Te[Ge].has(Ot)){const Le=Ae.get(Ot);Te[Ge].set(Ot,{participantId:Ot,name:(Le==null?void 0:Le.name)||Tt.participantName||`ID:${Ot}`,memberNo:(Le==null?void 0:Le.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Rn=Te[Ge].get(Ot),Be=new Set;for(const[Le,ke]of Object.entries(Nn)){if(!ke)continue;const it=lt.get(Le),_t=(it==null?void 0:it.id)||Le;Be.has(_t)||(Be.add(_t),Rn.totalPoints+=Number(it==null?void 0:it.points)||1,Rn.clearCount+=1)}Rn.latestUpdatedAt=Math.max(Rn.latestUpdatedAt,q4(Tt.updatedAt))}}ie||L(qx(Te))}catch(Te){console.error(":",Te),ie||ee("")}finally{ie||_e(!1)}})(),()=>{ie=!0}},[q,g,E,C,_,j,B,s]);const me=N.useMemo(()=>B==="all"?E:E.filter(ie=>ie.id===B),[E,B]),fe=N.useMemo(()=>[...B==="all"?C:C.filter(ue=>ue.categoryId===B)].sort((ue,xe)=>(ue.name||"").localeCompare(xe.name||"","ja")),[C,B]);N.useEffect(()=>{if(!te||fe.length===0)return;fe.some(ue=>ue.id===te)||W("")},[fe,te]),N.useEffect(()=>{re&&!te&&O(!1)},[re,te]),N.useEffect(()=>{_.length!==0&&j!=="all"&&!_.some(ie=>ie.id===j)&&z("all")},[_,j]),N.useEffect(()=>{E.length!==0&&B!=="all"&&!E.some(ie=>ie.id===B)&&X("all")},[E,B]),N.useEffect(()=>{const ie=new URLSearchParams;j!=="all"&&ie.set("season",j),B!=="all"&&ie.set("category",B);const ue=S.trim();ue&&ie.set("q",ue),te&&ie.set("pid",te),re&&te&&ie.set("self","1"),ie.toString()!==e.toString()&&n(ie,{replace:!0})},[j,B,S,te,re,e,n]);const M=S.trim().toLowerCase(),ne=M.length>0,he=C.find(ie=>ie.id===te)||null,k=N.useMemo(()=>{if(!te)return[];const ie=[];for(const ue of me){const xe=(P[ue.id]||[]).find(ye=>ye.participantId===te);xe&&ie.push({...xe,categoryName:ue.name})}return ie},[te,me,P]),Q=ie=>{const ue=new URLSearchParams;j!=="all"&&ue.set("season",j),B!=="all"&&ue.set("category",B),S.trim()&&ue.set("q",S.trim()),te&&ue.set("pid",te),re&&te&&ue.set("self","1");const xe=ue.toString();return`/score-summary/${s}/participants/${ie}${xe?`?${xe}`:""}`},ge=()=>{X("all"),W(""),O(!1),I("")},pe=me.reduce((ie,ue)=>{const xe=P[ue.id]||[];return ie+xe.filter(ye=>{const Te=(ye.name||"").toLowerCase(),Ae=(ye.memberNo||"").toLowerCase();return Te.includes(M)||Ae.includes(M)}).length},0);return q?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):$?f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:$}),f.jsx("div",{className:"mt-8",children:f.jsx(je,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[g==null?void 0:g.name," - "]}),f.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:j,onChange:ie=>z(ie.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),_.map(ie=>f.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]})}),f.jsxs("div",{className:"mt-3",children:[f.jsxs("label",{className:"text-sm text-slate-700",children:["/:",f.jsx("input",{type:"text",value:S,onChange:ie=>I(ie.target.value),placeholder:":  / M-1001",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),ne&&f.jsxs("span",{className:"ml-3 text-sm text-slate-600",children:[" ",pe," "]})]}),f.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("p",{className:"text-sm font-medium text-slate-700",children:""}),f.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:B,onChange:ie=>X(ie.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),E.map(ie=>f.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:te,onChange:ie=>W(ie.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"",children:"--  --"}),fe.map(ie=>f.jsxs("option",{value:ie.id,children:[ie.name," (",ie.memberNo||"-",")"]},ie.id))]})]}),f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[f.jsx("input",{type:"checkbox",checked:re,onChange:ie=>O(ie.target.checked),disabled:!te,className:"size-4 rounded border-slate-300"}),""]}),f.jsx("button",{type:"button",onClick:ge,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),te&&f.jsx(je,{to:Q(te),className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]})]}),he&&f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[": ",he.name," (",he.memberNo||"-",")"]}),k.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):f.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-700",children:k.map(ie=>f.jsxs("li",{children:[ie.categoryName,": ",ie.rank," /  ",ie.totalPoints," /  ",ie.clearCount]},`${ie.categoryName}-${ie.participantId}`))})]}),ve&&f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),me.length===0?f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):re&&!te?f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):me.map(ie=>{const xe=(P[ie.id]||[]).filter(ye=>{if(re&&te&&ye.participantId!==te)return!1;if(!ne)return!0;const Te=(ye.name||"").toLowerCase(),Ae=(ye.memberNo||"").toLowerCase();return Te.includes(M)||Ae.includes(M)});return f.jsxs("section",{className:"mt-6",children:[f.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[": ",ie.name]}),xe.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:ne?"":""}):f.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:f.jsxs("table",{className:"min-w-[650px] w-full border-collapse text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),f.jsx("tbody",{children:xe.map(ye=>f.jsxs("tr",{children:[f.jsx("td",{className:"py-2",children:ye.rank}),f.jsxs("td",{className:"py-2",children:[ye.name,te===ye.participantId&&f.jsx("strong",{className:"ml-2 text-xs text-slate-500",children:"()"})]}),f.jsx("td",{className:"py-2",children:ye.memberNo}),f.jsx("td",{className:"py-2 text-right",children:ye.totalPoints}),f.jsx("td",{className:"py-2 text-right",children:ye.clearCount}),f.jsx("td",{className:"py-2",children:f.jsx(je,{to:Q(ye.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-100",children:""})})]},ye.participantId))})]})})]},ie.id)}),f.jsx("div",{className:"mt-8",children:f.jsx(je,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},F4=s=>s?typeof s.toDate=="function"?s.toDate().toLocaleString():typeof s.seconds=="number"?new Date(s.seconds*1e3).toLocaleString():"-":"-",Hx=s=>{const e=[...s].sort((c,h)=>h.totalPoints!==c.totalPoints?h.totalPoints-c.totalPoints:h.clearCount!==c.clearCount?h.clearCount-c.clearCount:c.name.localeCompare(h.name,"ja"));let n=null,i=null,o=0;return e.map((c,h)=>((c.totalPoints!==n||c.clearCount!==i)&&(o=h+1),n=c.totalPoints,i=c.clearCount,{...c,rank:o}))},G4=()=>{var $;const{eventId:s,participantId:e}=xi(),[n]=Gd(),i=n.get("category")||"",o=n.get("q")||"",[c,h]=N.useState(null),[m,g]=N.useState(null),[y,_]=N.useState([]),[T,E]=N.useState([]),[D,C]=N.useState([]),[U,j]=N.useState(n.get("season")||"all"),[z,B]=N.useState([]),[X,te]=N.useState(null),[W,re]=N.useState({prev:null,next:null}),[O,S]=N.useState(!0),[I,P]=N.useState(!1),[L,q]=N.useState("");Gn(m!=null&&m.name?`: ${m.name}`:"");const A=ee=>{const me=new URLSearchParams;U!=="all"&&me.set("season",U),i&&me.set("category",i),o&&me.set("q",o);const fe=me.toString();return`/score-summary/${s}/participants/${ee}${fe?`?${fe}`:""}`},ve=N.useMemo(()=>{const ee=new URLSearchParams;U!=="all"&&ee.set("season",U),i&&ee.set("category",i),o&&ee.set("q",o);const me=ee.toString();return`/score-summary/${s}${me?`?${me}`:""}`},[s,U,i,o]);N.useEffect(()=>{let ee=!1;return(async()=>{S(!0),q("");try{const[fe,M,ne,he,k]=await Promise.all([gs(ut(Ee,"events",s)),gs(ut(Ee,"events",s,"participants",e)),We(He(Ee,"events",s,"participants")),We(He(Ee,"events",s,"seasons")),We(He(Ee,"events",s,"categories"))]);if(!fe.exists()){ee||q("");return}if(!M.exists()){ee||q("");return}const Q=he.docs.map(ue=>({id:ue.id,...ue.data()})).sort((ue,xe)=>ue.name.localeCompare(xe.name,"ja")),ge=k.docs.map(ue=>({id:ue.id,...ue.data()})).sort((ue,xe)=>ue.name.localeCompare(xe.name,"ja"));if(ee)return;const pe=n.get("season"),ie=pe&&(pe==="all"||Q.some(ue=>ue.id===pe))?pe:"all";h({id:fe.id,...fe.data()}),g({id:M.id,...M.data()}),_(ne.docs.map(ue=>({id:ue.id,...ue.data()}))),E(Q),C(ge),j(ie)}catch(fe){console.error(":",fe),ee||q("")}finally{ee||S(!1)}})(),()=>{ee=!0}},[s,e,n]),N.useEffect(()=>{let ee=!1;return(async()=>{if(!(O||!m||T.length===0||D.length===0)){P(!0);try{const fe=U==="all"?T:T.filter(pe=>pe.id===U),M=m.categoryId?[m.categoryId]:D.map(pe=>pe.id),ne=new Map(D.map(pe=>[pe.id,pe.name])),he=new Map(y.map(pe=>[pe.id,pe.name||""])),k=new Map(y.map(pe=>[pe.id,pe.memberNo||"-"])),Q=[],ge={};for(const pe of fe){const ie=await _h(s,pe.id),ue=[],xe=M.map(async Te=>{const[Ae,Ie]=await Promise.all([xh(s,pe.id,Te),We(He(Ee,"events",s,"seasons",pe.id,"categories",Te,"participants"))]),Ue=vh(ie,Ae),ht=Eg(Ue),Ge=new Map,Ye=y.filter(Be=>Be.categoryId===Te);for(const Be of Ye)Ge.set(Be.id,{participantId:Be.id,name:Be.name||"",memberNo:Be.memberNo||"-",totalPoints:0,clearCount:0});let It=null;for(const Be of Ie.docs){const Le=Be.data(),ke=Le.scores||{},it=Be.id;it===m.id&&(It=Le);const _t=Ge.get(it)||{participantId:it,name:he.get(it)||`ID:${it}`,memberNo:k.get(it)||"-",totalPoints:0,clearCount:0},os=new Set;for(const[fa,Hs]of Object.entries(ke)){if(!Hs)continue;const Cn=ht.get(fa),xs=(Cn==null?void 0:Cn.id)||fa;os.has(xs)||(os.add(xs),_t.totalPoints+=Number(Cn==null?void 0:Cn.points)||1,_t.clearCount+=1)}Ge.set(it,_t)}const lt=Hx(Array.from(Ge.values())),Lt=lt.find(Be=>Be.participantId===m.id);ge[Te]||(ge[Te]=new Map(lt.map(Be=>[Be.participantId,{participantId:Be.participantId,name:Be.name,memberNo:Be.memberNo,totalPoints:0,clearCount:0}])));for(const Be of lt){const Le=ge[Te].get(Be.participantId)||{participantId:Be.participantId,name:Be.name,memberNo:Be.memberNo,totalPoints:0,clearCount:0};Le.totalPoints+=Be.totalPoints,Le.clearCount+=Be.clearCount,ge[Te].set(Be.participantId,Le)}const Tt=(It==null?void 0:It.scores)||{},Nn=new Set,Ot=[];for(const[Be,Le]of Object.entries(Tt)){if(!Le)continue;const ke=ht.get(Be),it=(ke==null?void 0:ke.id)||Be;Nn.has(it)||(Nn.add(it),Ot.push({routeName:(ke==null?void 0:ke.name)||Be,points:Number(ke==null?void 0:ke.points)||1,grade:(ke==null?void 0:ke.grade)||"-"}))}Ot.sort((Be,Le)=>Be.routeName.localeCompare(Le.routeName,"ja"));const Rn=Ot.reduce((Be,Le)=>Be+Le.points,0);return{categoryId:Te,categoryName:ne.get(Te)||Te,clearCount:Ot.length,totalPoints:Rn,rank:(Lt==null?void 0:Lt.rank)||lt.length,totalParticipants:lt.length,updatedAtText:F4(It==null?void 0:It.updatedAt),clearedRoutes:Ot}}),ye=(await Promise.all(xe)).filter(Boolean);for(const Te of ye)ue.push(Te);Q.push({seasonId:pe.id,seasonName:pe.name,categorySummaries:ue,totalPoints:ue.reduce((Te,Ae)=>Te+Ae.totalPoints,0),totalClears:ue.reduce((Te,Ae)=>Te+Ae.clearCount,0)})}if(!ee){const pe=m.categoryId||M[0],ie=pe?Array.from((ge[pe]||new Map).values()):[],ue=Hx(ie),xe=ue.find(ye=>ye.participantId===m.id);if(te(xe?{categoryName:ne.get(pe)||"",rank:xe.rank,totalParticipants:ue.length,totalPoints:xe.totalPoints,totalClears:xe.clearCount}:null),xe){const ye=ue.findIndex(Ie=>Ie.participantId===m.id),Te=ye>0?ue[ye-1]:null,Ae=ye>=0&&ye<ue.length-1?ue[ye+1]:null;re({prev:Te,next:Ae})}else re({prev:null,next:null});B(Q)}}catch(fe){console.error(":",fe),ee||q("")}finally{ee||P(!1)}}})(),()=>{ee=!0}},[O,m,y,T,D,U,s]);const _e=N.useMemo(()=>({totalPoints:z.reduce((ee,me)=>ee+me.totalPoints,0),totalClears:z.reduce((ee,me)=>ee+me.totalClears,0)}),[z]);return O?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):L?f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:L}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:ve,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[c==null?void 0:c.name," - "]}),f.jsxs("p",{className:"mt-3 text-sm text-slate-700",children:[": ",f.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),f.jsxs("p",{className:"mt-1 text-sm text-slate-700",children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",(($=D.find(ee=>ee.id===(m==null?void 0:m.categoryId)))==null?void 0:$.name)||""]}),f.jsx("div",{className:"mt-4",children:f.jsxs("label",{className:"text-sm text-slate-700",children:[":",f.jsxs("select",{value:U,onChange:ee=>j(ee.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[f.jsx("option",{value:"all",children:""}),T.map(ee=>f.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})}),f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),f.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-slate-700",children:[f.jsxs("p",{children:[": ",f.jsx("strong",{children:_e.totalPoints})]}),f.jsxs("p",{children:[": ",f.jsx("strong",{children:_e.totalClears})]})]}),X&&f.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["",X.categoryName,":"," ",f.jsx("strong",{children:X.rank})," / ",X.totalParticipants," "," ",X.totalPoints," /  ",X.totalClears,""]})]}),(W.prev||W.next)&&f.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),f.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:[W.prev?f.jsxs(je,{to:A(W.prev.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",W.prev.rank," ",W.prev.name]}):f.jsx("span",{className:"text-slate-600",children:""}),W.next?f.jsxs(je,{to:A(W.next.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",W.next.rank," ",W.next.name]}):f.jsx("span",{className:"text-slate-600",children:""})]})]}),I&&f.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),f.jsx("div",{className:"mt-5",children:z.length===0?f.jsx("p",{className:"text-sm text-slate-600",children:""}):z.map(ee=>f.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[f.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[ee.seasonName," /  ",ee.totalPoints," /  ",ee.totalClears]}),ee.categorySummaries.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):ee.categorySummaries.map(me=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("h4",{className:"text-sm font-semibold text-slate-800",children:[": ",me.categoryName," /  ",me.rank,"/",me.totalParticipants," / "," ",me.totalPoints," /  ",me.clearCount]}),f.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[": ",me.updatedAtText]}),me.clearedRoutes.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):f.jsx("div",{className:"mt-2 overflow-x-auto",children:f.jsxs("table",{className:"min-w-[360px] w-full border-collapse text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),f.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""})]})}),f.jsx("tbody",{children:me.clearedRoutes.map(fe=>f.jsxs("tr",{children:[f.jsx("td",{className:"py-2",children:fe.routeName}),f.jsx("td",{className:"py-2",children:fe.grade}),f.jsx("td",{className:"py-2 text-right",children:fe.points})]},fe.routeName))})]})})]},`${ee.seasonId}-${me.categoryId}`))]},ee.seasonId))}),f.jsx("div",{className:"mt-6",children:f.jsx(je,{to:ve,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},qm=s=>Array.isArray(s)?s.filter(e=>typeof e=="string"&&e.trim().length>0):[],Fx={id:"",name:"",city:"",prefecture:""},Gx={id:"",email:"",name:"",role:"owner",gymIds:[]},$4=s=>(s||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),K4=()=>{Gn("");const{authUser:s,role:e,loading:n,error:i}=Si(),[o,c]=N.useState(!0),[h,m]=N.useState(""),[g,y]=N.useState(""),[_,T]=N.useState([]),[E,D]=N.useState([]),[C,U]=N.useState([]),[j,z]=N.useState(Fx),[B,X]=N.useState({}),[te,W]=N.useState(Gx),[re,O]=N.useState(""),S=N.useMemo(()=>{const k=new Map;for(const Q of E){const ge=Q.gymId||"";ge&&k.set(ge,(k.get(ge)||0)+1)}return k},[E]),I=async()=>{c(!0),m("");try{const[k,Q,ge]=await Promise.all([We(He(Ee,"gyms")),We(He(Ee,"events")),We(He(Ee,"users"))]),pe=k.docs.map(ye=>({id:ye.id,...ye.data()})).sort((ye,Te)=>(ye.name||"").localeCompare(Te.name||"","ja")),ie=Q.docs.map(ye=>({id:ye.id,...ye.data()})),ue=ge.docs.map(ye=>({id:ye.id,...ye.data()})).sort((ye,Te)=>{const Ae=ye.role||"",Ie=Te.role||"";return Ae!==Ie?Ae.localeCompare(Ie,"ja"):(ye.email||ye.id||"").localeCompare(Te.email||Te.id||"","ja")});T(pe),D(ie),U(ue);const xe={};for(const ye of pe)xe[ye.id]={name:ye.name||"",city:ye.city||"",prefecture:ye.prefecture||""};X(xe)}catch(k){console.error(":",k),m("")}finally{c(!1)}};N.useEffect(()=>{if(!n){if(i){m(i),c(!1);return}if(e!=="admin"){c(!1);return}I()}},[n,i,e]);const P=()=>{W(Gx),O("")},L=async k=>{k.preventDefault();const Q=j.id.trim();if(!Q||!j.name.trim()){y(" ID");return}if(_.some(ge=>ge.id===Q)){y(" ID");return}try{await hi(ut(Ee,"gyms",Q),{name:j.name.trim(),city:j.city.trim(),prefecture:j.prefecture.trim(),createdAt:vn(),updatedAt:vn()}),z(Fx),y(" "),await I()}catch(ge){console.error(":",ge),y(" ")}},q=async k=>{const Q=B[k];if(!Q||!Q.name.trim()){y(" ");return}try{await hi(ut(Ee,"gyms",k),{name:Q.name.trim(),city:Q.city.trim(),prefecture:Q.prefecture.trim(),updatedAt:vn()},{merge:!0}),y(` (${k})`),await I()}catch(ge){console.error(":",ge),y(" ")}},A=async k=>{const Q=S.get(k)||0;if(Q>0){y(`  ${Q} `);return}if(window.confirm(`(${k})`))try{await _r(ut(Ee,"gyms",k)),y(` (${k})`),await I()}catch(ge){console.error(":",ge),y(" ")}},ve=k=>{O(k.id),W({id:k.id,email:k.email||"",name:k.name||"",role:k.role==="admin"?"admin":"owner",gymIds:qm(k.gymIds)})},_e=k=>{W(Q=>{const ge=Q.gymIds.includes(k);return{...Q,gymIds:ge?Q.gymIds.filter(pe=>pe!==k):[...Q.gymIds,k]}})},$=async k=>{k.preventDefault();const Q=te.email.trim().toLowerCase();if(!Q){y(" ");return}const ge=te.id.trim()||$4(Q);if(!ge){y(" ID");return}const pe=te.role==="admin"?"admin":"owner",ie=pe==="admin"?["*"]:qm(te.gymIds);if(pe==="owner"&&ie.length===0){y(" owner 1");return}const ue=C.find(ye=>ye.id===ge),xe={email:Q,name:te.name.trim(),role:pe,gymIds:ie,updatedAt:vn()};ue!=null&&ue.uid&&(xe.uid=ue.uid),ue||(xe.createdAt=vn());try{await hi(ut(Ee,"users",ge),xe,{merge:!0}),y(` (${ge})`),O(ge),W(ye=>({...ye,id:ge})),await I()}catch(ye){console.error(":",ye),y(" ")}},ee=async k=>{if(k.id===(s==null?void 0:s.uid)){y(" ");return}if(window.confirm(`(${k.id})`))try{await _r(ut(Ee,"users",k.id)),re===k.id&&P(),y(` (${k.id})`),await I()}catch(Q){console.error(":",Q),y(" ")}};if(n||o)return f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(h||i)return f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:h||i}),f.jsx(je,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});if(e!=="admin")return f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""}),f.jsx(je,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});const me="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",fe="w-full max-w-[560px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",M="rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",ne="rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",he="rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm font-medium text-rose-700 transition hover:bg-rose-100";return f.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:f.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),f.jsx("p",{className:"mt-2",children:f.jsx(je,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),g&&f.jsx("p",{className:"mt-4 text-sm text-slate-700",children:g}),f.jsxs("section",{className:`${me} mt-4`,children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),f.jsxs("form",{onSubmit:L,className:"mt-3 grid gap-2",children:[f.jsx("input",{type:"text",placeholder:"ID (: gym-shibuya)",value:j.id,onChange:k=>z(Q=>({...Q,id:k.target.value})),required:!0,className:fe}),f.jsx("input",{type:"text",placeholder:"",value:j.name,onChange:k=>z(Q=>({...Q,name:k.target.value})),required:!0,className:fe}),f.jsx("input",{type:"text",placeholder:"",value:j.city,onChange:k=>z(Q=>({...Q,city:k.target.value})),className:fe}),f.jsx("input",{type:"text",placeholder:"",value:j.prefecture,onChange:k=>z(Q=>({...Q,prefecture:k.target.value})),className:fe}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:ne,children:""})})]})]}),f.jsxs("section",{className:`${me} mt-4`,children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),_.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):f.jsx("div",{className:"mt-3 grid gap-3",children:_.map(k=>{var Q,ge,pe;return f.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[f.jsx("p",{className:"font-semibold text-slate-800",children:k.id}),f.jsxs("div",{className:"mt-2 grid gap-2",children:[f.jsx("input",{type:"text",value:((Q=B[k.id])==null?void 0:Q.name)||"",onChange:ie=>X(ue=>({...ue,[k.id]:{...ue[k.id],name:ie.target.value}})),placeholder:"",className:fe}),f.jsx("input",{type:"text",value:((ge=B[k.id])==null?void 0:ge.city)||"",onChange:ie=>X(ue=>({...ue,[k.id]:{...ue[k.id],city:ie.target.value}})),placeholder:"",className:fe}),f.jsx("input",{type:"text",value:((pe=B[k.id])==null?void 0:pe.prefecture)||"",onChange:ie=>X(ue=>({...ue,[k.id]:{...ue[k.id],prefecture:ie.target.value}})),placeholder:"",className:fe})]}),f.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:[": ",S.get(k.id)||0]}),f.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[f.jsx("button",{type:"button",onClick:()=>q(k.id),className:M,children:""}),f.jsx("button",{type:"button",onClick:()=>A(k.id),className:he,children:""})]})]},k.id)})})]}),f.jsxs("section",{className:`${me} mt-4`,children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),f.jsxs("form",{onSubmit:$,className:"mt-3 grid gap-2",children:[f.jsx("input",{type:"text",placeholder:"ID",value:te.id,onChange:k=>W(Q=>({...Q,id:k.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),f.jsx("input",{type:"email",placeholder:"",value:te.email,onChange:k=>W(Q=>({...Q,email:k.target.value})),required:!0,className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),f.jsx("input",{type:"text",placeholder:"",value:te.name,onChange:k=>W(Q=>({...Q,name:k.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),f.jsxs("div",{className:"flex flex-wrap gap-4",children:[f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[f.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="owner",onChange:()=>W(k=>({...k,role:"owner"}))}),"owner"]}),f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[f.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="admin",onChange:()=>W(k=>({...k,role:"admin",gymIds:["*"]}))}),"admin"]})]}),te.role==="owner"&&f.jsxs("div",{children:[f.jsx("p",{className:"mb-2 text-sm text-slate-700",children:""}),f.jsx("div",{className:"flex flex-wrap gap-3",children:_.map(k=>f.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[f.jsx("input",{type:"checkbox",checked:te.gymIds.includes(k.id),onChange:()=>_e(k.id)}),k.name||k.id]},k.id))})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{type:"submit",className:ne,children:re?` (${re})`:""}),f.jsx("button",{type:"button",onClick:P,className:M,children:""})]})]}),f.jsx("h4",{className:"mt-5 text-base font-semibold text-slate-900",children:""}),C.length===0?f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):f.jsx("div",{className:"mt-3 grid gap-3",children:C.map(k=>f.jsxs("div",{className:`rounded-xl border p-4 ${re===k.id?"border-sky-200 bg-sky-50":"border-slate-200 bg-white"}`,children:[f.jsxs("p",{className:"text-sm text-slate-800",children:[f.jsx("strong",{children:k.email||"(no email)"})," / role: ",k.role||"-"]}),f.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:["profileId: ",k.id," / gymIds: ",JSON.stringify(qm(k.gymIds))]}),f.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[f.jsx("button",{type:"button",onClick:()=>ve(k),className:M,children:""}),f.jsx("button",{type:"button",onClick:()=>ee(k),className:he,children:""})]})]},k.id))})]})]})})},$x=({children:s})=>{const[e,n]=N.useState(!0),[i,o]=N.useState(!1),c=Fn();return N.useEffect(()=>{const h=Yd(ca,m=>{o(!!m),n(!1)});return()=>h()},[]),e?f.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:f.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):i?s:f.jsx(p1,{to:"/login",replace:!0,state:{from:c}})},Kx=({className:s=""})=>f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:s,"aria-hidden":"true",children:[f.jsx("path",{d:"M3 19h18"}),f.jsx("path",{d:"m6 19 5.5-9.5L14 14l4-7 3 12"}),f.jsx("path",{d:"m10.8 10.7 1.2-2 1.5 2.6"})]}),Q4=()=>{const[s,e]=N.useState(null),[n,i]=N.useState(!1),[o,c]=N.useState(!1),h=N.useRef(null),m=_i(),g=(s==null?void 0:s.displayName)||(s==null?void 0:s.email)||"User",y=g.trim().charAt(0).toUpperCase()||"U";N.useEffect(()=>{const E=Yd(ca,D=>{e(D),D||c(!1)});return()=>E()},[]),N.useEffect(()=>{const E=D=>{h.current&&!h.current.contains(D.target)&&(i(!1),c(!1))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const _=async()=>{await Gb(ca),c(!1),i(!1),m("/",{replace:!0})},T=E=>{i(!1),m(E)};return f.jsxs("div",{className:"text-slate-900",children:[f.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-100 bg-white/90 px-4 py-3 backdrop-blur sm:px-6 lg:px-10",children:f.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-700 text-white",children:f.jsx(Kx,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:"Climbing Competition"}),f.jsx("p",{className:"text-xs text-slate-500",children:"Gym Management"})]})]}),f.jsxs("div",{className:"relative flex items-center gap-2",ref:h,children:[!s&&f.jsx(je,{to:"/login",className:"inline-flex h-10 items-center justify-center rounded-lg border border-emerald-300 bg-emerald-50 px-3 text-sm font-semibold text-emerald-800 transition hover:bg-emerald-100",children:""}),s&&f.jsxs("div",{className:"relative",children:[f.jsx("button",{type:"button",onClick:()=>c(E=>!E),className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-300 bg-white text-sm font-semibold text-slate-700 transition hover:bg-slate-50","aria-label":"user menu","aria-expanded":o,children:y}),o&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-sm",children:[f.jsx("p",{className:"truncate px-2 py-1 text-xs text-slate-500",children:g}),f.jsx("button",{type:"button",onClick:_,className:"mt-1 block w-full rounded-lg px-2 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),f.jsx("button",{type:"button",onClick:()=>i(E=>!E),className:"inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-700 transition hover:bg-slate-50","aria-label":"menu","aria-expanded":n,children:f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:f.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})})}),n&&f.jsxs("div",{className:"absolute right-0 top-12 z-50 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-lg",children:[f.jsx("button",{type:"button",onClick:()=>T("/"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:"TOP"}),f.jsx("button",{type:"button",onClick:()=>T("/dashboard"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),f.jsx("button",{type:"button",onClick:()=>T("/score-summary"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),f.jsx("button",{type:"button",onClick:()=>T("/system-admin"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]})]})}),f.jsx(g1,{}),f.jsx("footer",{className:"border-t border-slate-100 bg-white py-8",children:f.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[f.jsx(Kx,{className:"h-5 w-5 text-emerald-700"}),f.jsx("span",{className:"text-sm font-semibold",children:"Climbing Competition"})]}),f.jsx("p",{className:"text-xs text-slate-500",children:" 2026 Climbing Competition Systems. All rights reserved."})]})})]})};function Y4(){return f.jsx(H1,{basename:"/FlashComp",children:f.jsxs(v1,{children:[f.jsx(wn,{path:"/",element:f.jsx(o4,{})}),f.jsx(wn,{path:"/login",element:f.jsx(l4,{})}),f.jsxs(wn,{element:f.jsx($x,{children:f.jsx(Q4,{})}),children:[f.jsx(wn,{path:"/dashboard",element:f.jsx(g4,{})}),f.jsx(wn,{path:"/create-event",element:f.jsx(y4,{})}),f.jsx(wn,{path:"/events/:eventId/edit",element:f.jsx(E4,{})}),f.jsx(wn,{path:"/events/:eventId/climbers",element:f.jsx(S4,{})}),f.jsx(wn,{path:"/events/:eventId/scores",element:f.jsx(N4,{})}),f.jsx(wn,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:f.jsx(I4,{})}),f.jsx(wn,{path:"/events/:eventId/data-io",element:f.jsx(L4,{})})]}),f.jsx(wn,{path:"/system-admin",element:f.jsx($x,{children:f.jsx(K4,{})})}),f.jsx(wn,{path:"/score-summary",element:f.jsx(z4,{})}),f.jsx(wn,{path:"/score-summary/:eventId",element:f.jsx(H4,{})}),f.jsx(wn,{path:"/score-summary/:eventId/participants/:participantId",element:f.jsx(G4,{})})]})})}TS.createRoot(document.getElementById("root")).render(f.jsx(N.StrictMode,{children:f.jsx(Y4,{})}));
