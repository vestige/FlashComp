(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var pm={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function WS(){if(Iv)return zl;Iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var Nv;function JS(){return Nv||(Nv=1,pm.exports=WS()),pm.exports}var y=JS(),gm={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function ew(){if(Dv)return ze;Dv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,B={};function M(P,re,fe){this.props=P,this.context=re,this.refs=B,this.updater=fe||k}M.prototype.isReactComponent={},M.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},M.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function z(){}z.prototype=M.prototype;function H(P,re,fe){this.props=P,this.context=re,this.refs=B,this.updater=fe||k}var Z=H.prototype=new z;Z.constructor=H,N(Z,M.prototype),Z.isPureReactComponent=!0;var te=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function C(P,re,fe,O,J,ge){return fe=ge.ref,{$$typeof:r,type:P,key:re,ref:fe!==void 0?fe:null,props:ge}}function R(P,re){return C(P.type,re,void 0,void 0,void 0,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function V(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return re[fe]})}var U=/\/+/g;function L(P,re){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):re.toString(36)}function A(){}function Ee(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(A,A):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ye(P,re,fe,O,J){var ge=typeof P;(ge==="undefined"||ge==="boolean")&&(P=null);var me=!1;if(P===null)me=!0;else switch(ge){case"bigint":case"string":case"number":me=!0;break;case"object":switch(P.$$typeof){case r:case e:me=!0;break;case _:return me=P._init,ye(me(P._payload),re,fe,O,J)}}if(me)return J=J(P),me=O===""?"."+L(P,0):O,te(J)?(fe="",me!=null&&(fe=me.replace(U,"$&/")+"/"),ye(J,re,fe,"",function(xe){return xe})):J!=null&&(D(J)&&(J=R(J,fe+(J.key==null||P&&P.key===J.key?"":(""+J.key).replace(U,"$&/")+"/")+me)),re.push(J)),1;me=0;var le=O===""?".":O+":";if(te(P))for(var ae=0;ae<P.length;ae++)O=P[ae],ge=le+L(O,ae),me+=ye(O,re,fe,ge,J);else if(ae=x(P),typeof ae=="function")for(P=ae.call(P),ae=0;!(O=P.next()).done;)O=O.value,ge=le+L(O,ae++),me+=ye(O,re,fe,ge,J);else if(ge==="object"){if(typeof P.then=="function")return ye(Ee(P),re,fe,O,J);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return me}function Q(P,re,fe){if(P==null)return P;var O=[],J=0;return ye(P,O,"","",function(ge){return re.call(fe,ge,J++)}),O}function ee(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var ie=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function pe(){}return ze.Children={map:Q,forEach:function(P,re,fe){Q(P,function(){re.apply(this,arguments)},fe)},count:function(P){var re=0;return Q(P,function(){re++}),re},toArray:function(P){return Q(P,function(re){return re})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ze.Component=M,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=H,ze.StrictMode=i,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,ze.__COMPILER_RUNTIME={__proto__:null,c:function(P){return Y.H.useMemoCache(P)}},ze.cache=function(P){return function(){return P.apply(null,arguments)}},ze.cloneElement=function(P,re,fe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var O=N({},P.props),J=P.key,ge=void 0;if(re!=null)for(me in re.ref!==void 0&&(ge=void 0),re.key!==void 0&&(J=""+re.key),re)!se.call(re,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&re.ref===void 0||(O[me]=re[me]);var me=arguments.length-2;if(me===1)O.children=fe;else if(1<me){for(var le=Array(me),ae=0;ae<me;ae++)le[ae]=arguments[ae+2];O.children=le}return C(P.type,J,void 0,void 0,ge,O)},ze.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},ze.createElement=function(P,re,fe){var O,J={},ge=null;if(re!=null)for(O in re.key!==void 0&&(ge=""+re.key),re)se.call(re,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(J[O]=re[O]);var me=arguments.length-2;if(me===1)J.children=fe;else if(1<me){for(var le=Array(me),ae=0;ae<me;ae++)le[ae]=arguments[ae+2];J.children=le}if(P&&P.defaultProps)for(O in me=P.defaultProps,me)J[O]===void 0&&(J[O]=me[O]);return C(P,ge,void 0,void 0,null,J)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(P){return{$$typeof:m,render:P}},ze.isValidElement=D,ze.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:ee}},ze.memo=function(P,re){return{$$typeof:g,type:P,compare:re===void 0?null:re}},ze.startTransition=function(P){var re=Y.T,fe={};Y.T=fe;try{var O=P(),J=Y.S;J!==null&&J(fe,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(pe,ie)}catch(ge){ie(ge)}finally{Y.T=re}},ze.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},ze.use=function(P){return Y.H.use(P)},ze.useActionState=function(P,re,fe){return Y.H.useActionState(P,re,fe)},ze.useCallback=function(P,re){return Y.H.useCallback(P,re)},ze.useContext=function(P){return Y.H.useContext(P)},ze.useDebugValue=function(){},ze.useDeferredValue=function(P,re){return Y.H.useDeferredValue(P,re)},ze.useEffect=function(P,re,fe){var O=Y.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return O.useEffect(P,re)},ze.useId=function(){return Y.H.useId()},ze.useImperativeHandle=function(P,re,fe){return Y.H.useImperativeHandle(P,re,fe)},ze.useInsertionEffect=function(P,re){return Y.H.useInsertionEffect(P,re)},ze.useLayoutEffect=function(P,re){return Y.H.useLayoutEffect(P,re)},ze.useMemo=function(P,re){return Y.H.useMemo(P,re)},ze.useOptimistic=function(P,re){return Y.H.useOptimistic(P,re)},ze.useReducer=function(P,re,fe){return Y.H.useReducer(P,re,fe)},ze.useRef=function(P){return Y.H.useRef(P)},ze.useState=function(P){return Y.H.useState(P)},ze.useSyncExternalStore=function(P,re,fe){return Y.H.useSyncExternalStore(P,re,fe)},ze.useTransition=function(){return Y.H.useTransition()},ze.version="19.1.0",ze}var Ov;function gp(){return Ov||(Ov=1,gm.exports=ew()),gm.exports}var I=gp(),ym={exports:{}},ql={},vm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function tw(){return Mv||(Mv=1,function(r){function e(Q,ee){var ie=Q.length;Q.push(ee);e:for(;0<ie;){var pe=ie-1>>>1,P=Q[pe];if(0<o(P,ee))Q[pe]=ee,Q[ie]=P,ie=pe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ee=Q[0],ie=Q.pop();if(ie!==ee){Q[0]=ie;e:for(var pe=0,P=Q.length,re=P>>>1;pe<re;){var fe=2*(pe+1)-1,O=Q[fe],J=fe+1,ge=Q[J];if(0>o(O,ie))J<P&&0>o(ge,O)?(Q[pe]=ge,Q[J]=ie,pe=J):(Q[pe]=O,Q[fe]=ie,pe=fe);else if(J<P&&0>o(ge,ie))Q[pe]=ge,Q[J]=ie,pe=J;else break e}}return ee}function o(Q,ee){var ie=Q.sortIndex-ee.sortIndex;return ie!==0?ie:Q.id-ee.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],g=[],_=1,S=null,x=3,k=!1,N=!1,B=!1,M=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function te(Q){for(var ee=n(g);ee!==null;){if(ee.callback===null)i(g);else if(ee.startTime<=Q)i(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function Y(Q){if(B=!1,te(Q),!N)if(n(p)!==null)N=!0,se||(se=!0,L());else{var ee=n(g);ee!==null&&ye(Y,ee.startTime-Q)}}var se=!1,C=-1,R=5,D=-1;function V(){return M?!0:!(r.unstable_now()-D<R)}function U(){if(M=!1,se){var Q=r.unstable_now();D=Q;var ee=!0;try{e:{N=!1,B&&(B=!1,H(C),C=-1),k=!0;var ie=x;try{t:{for(te(Q),S=n(p);S!==null&&!(S.expirationTime>Q&&V());){var pe=S.callback;if(typeof pe=="function"){S.callback=null,x=S.priorityLevel;var P=pe(S.expirationTime<=Q);if(Q=r.unstable_now(),typeof P=="function"){S.callback=P,te(Q),ee=!0;break t}S===n(p)&&i(p),te(Q)}else i(p);S=n(p)}if(S!==null)ee=!0;else{var re=n(g);re!==null&&ye(Y,re.startTime-Q),ee=!1}}break e}finally{S=null,x=ie,k=!1}ee=void 0}}finally{ee?L():se=!1}}}var L;if(typeof Z=="function")L=function(){Z(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Ee=A.port2;A.port1.onmessage=U,L=function(){Ee.postMessage(null)}}else L=function(){z(U,0)};function ye(Q,ee){C=z(function(){Q(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var ie=x;x=ee;try{return Q()}finally{x=ie}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ie=x;x=Q;try{return ee()}finally{x=ie}},r.unstable_scheduleCallback=function(Q,ee,ie){var pe=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?pe+ie:pe):ie=pe,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ie+P,Q={id:_++,callback:ee,priorityLevel:Q,startTime:ie,expirationTime:P,sortIndex:-1},ie>pe?(Q.sortIndex=ie,e(g,Q),n(p)===null&&Q===n(g)&&(B?(H(C),C=-1):B=!0,ye(Y,ie-pe))):(Q.sortIndex=P,e(p,Q),N||k||(N=!0,se||(se=!0,L()))),Q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(Q){var ee=x;return function(){var ie=x;x=ee;try{return Q.apply(this,arguments)}finally{x=ie}}}}(_m)),_m}var kv;function nw(){return kv||(kv=1,vm.exports=tw()),vm.exports}var Em={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function rw(){if(Pv)return pn;Pv=1;var r=gp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:_}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},pn.flushSync=function(p){var g=d.T,_=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=g,i.p=_,i.d.f()}},pn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},pn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},pn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,S=m(_,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:x,fetchPriority:k}):_==="script"&&i.d.X(p,{crossOrigin:S,integrity:x,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},pn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},pn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,S=m(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},pn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},pn.requestFormReset=function(p){i.d.r(p)},pn.unstable_batchedUpdates=function(p,g){return p(g)},pn.useFormState=function(p,g,_){return d.H.useFormState(p,g,_)},pn.useFormStatus=function(){return d.H.useHostTransitionStatus()},pn.version="19.1.0",pn}var Vv;function sw(){if(Vv)return Em.exports;Vv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Em.exports=rw(),Em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function iw(){if(jv)return ql;jv=1;var r=nw(),e=gp(),n=sw();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(i(188))}function p(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),s;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function g(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=g(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function Ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case M:return"Profiler";case B:return"StrictMode";case Y:return"Suspense";case se:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case Z:return(t.displayName||"Context")+".Provider";case H:return(t._context.displayName||"Context")+".Consumer";case te:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:Ee(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return Ee(t(s))}catch{}}return null}var ye=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},pe=[],P=-1;function re(t){return{current:t}}function fe(t){0>P||(t.current=pe[P],pe[P]=null,P--)}function O(t,s){P++,pe[P]=t.current,t.current=s}var J=re(null),ge=re(null),me=re(null),le=re(null);function ae(t,s){switch(O(me,s),O(ge,t),O(J,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?rv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=rv(s),t=sv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(J),O(J,t)}function xe(){fe(J),fe(ge),fe(me)}function ve(t){t.memoizedState!==null&&O(le,t);var s=J.current,a=sv(s,t.type);s!==a&&(O(ge,t),O(J,a))}function Ae(t){ge.current===t&&(fe(J),fe(ge)),le.current===t&&(fe(le),Vl._currentValue=ie)}var rt=Object.prototype.hasOwnProperty,Ie=r.unstable_scheduleCallback,Rt=r.unstable_cancelCallback,Vt=r.unstable_shouldYield,Fe=r.unstable_requestPaint,_t=r.unstable_now,ht=r.unstable_getCurrentPriorityLevel,jt=r.unstable_ImmediatePriority,Ct=r.unstable_UserBlockingPriority,Gt=r.unstable_NormalPriority,vr=r.unstable_LowPriority,Dt=r.unstable_IdlePriority,sn=r.log,Ue=r.unstable_setDisableYieldValue,ke=null,Pe=null;function Ze(t){if(typeof sn=="function"&&Ue(t),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(ke,t)}catch{}}var gt=Math.clz32?Math.clz32:qr,wi=Math.log,da=Math.LN2;function qr(t){return t>>>=0,t===0?32:31-(wi(t)/da|0)|0}var Rn=256,_r=4194304;function ir(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fa(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=ir(l):(b&=T,b!==0?h=ir(b):a||(a=T&~t,a!==0&&(h=ir(a))))):(T=l&~f,T!==0?h=ir(T):b!==0?h=ir(b):a||(a=l&~t,a!==0&&(h=ir(a)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:h}function Ai(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Vo(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(){var t=Rn;return Rn<<=1,(Rn&4194048)===0&&(Rn=256),t}function Lo(){var t=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),t}function Hr(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Fr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uo(t,s,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,j=t.expirationTimes,$=t.hiddenUpdates;for(a=b&~a;0<a;){var oe=31-gt(a),ce=1<<oe;T[oe]=0,j[oe]=-1;var X=$[oe];if(X!==null)for($[oe]=null,oe=0;oe<X.length;oe++){var W=X[oe];W!==null&&(W.lane&=-536870913)}a&=~ce}l!==0&&Er(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~s))}function Er(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-gt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Bo(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-gt(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function ws(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ma(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function As(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Tv(t.type))}function Ou(t,s){var a=ee.p;try{return ee.p=t,s()}finally{ee.p=a}}var xt=Math.random().toString(36).slice(2),Kt="__reactFiber$"+xt,Lt="__reactProps$"+xt,Gn="__reactContainer$"+xt,zo="__reactEvents$"+xt,yd="__reactListeners$"+xt,Rs="__reactHandles$"+xt,Mu="__reactResources$"+xt,Ri="__reactMarker$"+xt;function Cs(t){delete t[Kt],delete t[Lt],delete t[zo],delete t[yd],delete t[Rs]}function Gr(t){var s=t[Kt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Gn]||a[Kt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=lv(t);t!==null;){if(a=t[Kt])return a;t=lv(t)}return s}t=a,a=t.parentNode}return null}function br(t){if(t=t[Kt]||t[Gn]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function xr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function En(t){var s=t[Mu];return s||(s=t[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(t){t[Ri]=!0}var qo=new Set,pa={};function ar(t,s){Kr(t,s),Kr(t+"Capture",s)}function Kr(t,s){for(pa[t]=s,t=0;t<s.length;t++)qo.add(s[t])}var ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},Ci={};function Vu(t){return rt.call(Ci,t)?!0:rt.call(Pu,t)?!1:ku.test(t)?Ci[t]=!0:(Pu[t]=!0,!1)}function Is(t,s,a){if(Vu(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Tr(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function an(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var Ii,ju;function $r(t){if(Ii===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ii=s&&s[1]||"",ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ii+t+ju}var ga=!1;function ya(t,s){if(!t||ga)return"";ga=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(W){var X=W}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(W){X=W}t.call(ce.prototype)}}else{try{throw Error()}catch(W){X=W}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var j=b.split(`
`),$=T.split(`
`);for(h=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===j.length||h===$.length)for(l=j.length-1,h=$.length-1;1<=l&&0<=h&&j[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(j[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||j[l]!==$[h]){var oe=`
`+j[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=h);break}}}finally{ga=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$r(a):""}function Ho(t){switch(t.tag){case 26:case 27:case 5:return $r(t.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return ya(t.type,!1);case 11:return ya(t.type.render,!1);case 1:return ya(t.type,!0);case 31:return $r("Activity");default:return""}}function va(t){try{var s="";do s+=Ho(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fo(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vd(t){var s=Fo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function _a(t){t._valueTracker||(t._valueTracker=vd(t))}function Go(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Fo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _d=/[\n"\\]/g;function Ut(t){return t.replace(_d,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function kn(t,s,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+bn(s)):t.value!==""+bn(s)&&(t.value=""+bn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?Ns(t,b,bn(s)):a!=null?Ns(t,b,bn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+bn(T):t.removeAttribute("name")}function Di(t,s,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+bn(a):"",s=s!=null?""+bn(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Ns(t,s,a){s==="number"&&Ni(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qr(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function dt(t,s,a){if(s!=null&&(s=""+bn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+bn(a):""}function Oi(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(ye(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=bn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Kn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Mi.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Ko(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Lu(t,h,l)}else for(var f in s)s.hasOwnProperty(f)&&Lu(t,f,s[f])}function $o(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(t){return bd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Yr=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xr=null,Zr=null;function Qo(t){var s=br(t);if(s&&(t=s.stateNode)){var a=t[Lt]||null;e:switch(t=s.stateNode,s.type){case"input":if(kn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ut(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Lt]||null;if(!h)throw Error(i(90));kn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Go(l)}break e;case"textarea":dt(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Qr(t,!!a.multiple,s,!1)}}}var Sr=!1;function Uu(t,s,a){if(Sr)return t(s,a);Sr=!0;try{var l=t(s);return l}finally{if(Sr=!1,(Xr!==null||Zr!==null)&&(Oc(),Xr&&(s=Xr,t=Zr,Zr=Xr=null,Qo(s),t)))for(s=0;s<t.length;s++)Qo(t[s])}}function ki(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Lt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=!1;if(or)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Qn=!1}var wr=null,Ds=null,Wr=null;function Yo(){if(Wr)return Wr;var t,s=Ds,a=s.length,l,h="value"in wr?wr.value:wr.textContent,f=h.length;for(t=0;t<a&&s[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&s[a-l]===h[f-l];l++);return Wr=h.slice(t,1<l?1-l:void 0)}function Ar(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Rr(){return!0}function Xo(){return!1}function Wt(t){function s(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Rr:Xo,this.isPropagationStopped=Xo,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),s}var at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ba=Wt(at),Vi=_({},at,{view:0,detail:0}),Bu=Wt(Vi),xa,Ta,Cr,ji=_({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cr&&(Cr&&t.type==="mousemove"?(xa=t.screenX-Cr.screenX,Ta=t.screenY-Cr.screenY):Ta=xa=0,Cr=t),xa)},movementY:function(t){return"movementY"in t?t.movementY:Ta}}),Yn=Wt(ji),zu=_({},ji,{dataTransfer:0}),xd=Wt(zu),Li=_({},Vi,{relatedTarget:0}),Sa=Wt(Li),Zo=_({},at,{animationName:0,elapsedTime:0,pseudoElement:0}),wa=Wt(Zo),qu=_({},at,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aa=Wt(qu),Td=_({},at,{data:0}),Wo=Wt(Td),Ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jo(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Fu[t])?!!s[t]:!1}function Bi(){return Jo}var Gu=_({},Vi,{key:function(t){if(t.key){var s=Ui[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bi,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ra=Wt(Gu),Ku=_({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=Wt(Ku),Jr=_({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bi}),$u=Wt(Jr),Qu=_({},at,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yu=Wt(Qu),Xu=_({},ji,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ca=Wt(Xu),xn=_({},at,{newState:0,oldState:0}),Zu=Wt(xn),Wu=[9,13,27,32],Ir=or&&"CompositionEvent"in window,c=null;or&&"documentMode"in document&&(c=document.documentMode);var v=or&&"TextEvent"in window&&!c,E=or&&(!Ir||c&&8<c&&11>=c),w=" ",G=!1;function ne(t,s){switch(t){case"keyup":return Wu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Je=!1;function $t(t,s){switch(t){case"compositionend":return _e(s);case"keypress":return s.which!==32?null:(G=!0,w);case"textInput":return t=s.data,t===w&&G?null:t;default:return null}}function et(t,s){if(Je)return t==="compositionend"||!Ir&&ne(t,s)?(t=Yo(),Wr=Ds=wr=null,Je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Jt[t.type]:s==="textarea"}function es(t,s,a,l){Xr?Zr?Zr.push(l):Zr=[l]:Xr=l,s=Lc(s,"onChange"),0<s.length&&(a=new ba("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var on=null,Nr=null;function tl(t){W0(t,0)}function Ju(t){var s=xr(t);if(Go(s))return t}function _g(t,s){if(t==="change")return s}var Eg=!1;if(or){var Sd;if(or){var wd="oninput"in document;if(!wd){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),wd=typeof bg.oninput=="function"}Sd=wd}else Sd=!1;Eg=Sd&&(!document.documentMode||9<document.documentMode)}function xg(){on&&(on.detachEvent("onpropertychange",Tg),Nr=on=null)}function Tg(t){if(t.propertyName==="value"&&Ju(Nr)){var s=[];es(s,Nr,t,$n(t)),Uu(tl,s)}}function CT(t,s,a){t==="focusin"?(xg(),on=s,Nr=a,on.attachEvent("onpropertychange",Tg)):t==="focusout"&&xg()}function IT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(Nr)}function NT(t,s){if(t==="click")return Ju(s)}function DT(t,s){if(t==="input"||t==="change")return Ju(s)}function OT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Pn=typeof Object.is=="function"?Object.is:OT;function nl(t,s){if(Pn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!rt.call(s,h)||!Pn(t[h],s[h]))return!1}return!0}function Sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,s){var a=Sg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sg(a)}}function Ag(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ag(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Rg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ni(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Ni(t.document)}return s}function Ad(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var MT=or&&"documentMode"in document&&11>=document.documentMode,Ia=null,Rd=null,rl=null,Cd=!1;function Cg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cd||Ia==null||Ia!==Ni(l)||(l=Ia,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&nl(rl,l)||(rl=l,l=Lc(Rd,"onSelect"),0<l.length&&(s=new ba("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Ia)))}function zi(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Na={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionrun:zi("Transition","TransitionRun"),transitionstart:zi("Transition","TransitionStart"),transitioncancel:zi("Transition","TransitionCancel"),transitionend:zi("Transition","TransitionEnd")},Id={},Ig={};or&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function qi(t){if(Id[t])return Id[t];if(!Na[t])return t;var s=Na[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ig)return Id[t]=s[a];return t}var Ng=qi("animationend"),Dg=qi("animationiteration"),Og=qi("animationstart"),kT=qi("transitionrun"),PT=qi("transitionstart"),VT=qi("transitioncancel"),Mg=qi("transitionend"),kg=new Map,Nd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nd.push("scrollEnd");function lr(t,s){kg.set(t,s),ar(s,[t])}var Pg=new WeakMap;function Xn(t,s){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:va(s)},Pg.set(t,s),s)}return{value:t,source:s,stack:va(s)}}var Zn=[],Da=0,Dd=0;function ec(){for(var t=Da,s=Dd=Da=0;s<t;){var a=Zn[s];Zn[s++]=null;var l=Zn[s];Zn[s++]=null;var h=Zn[s];Zn[s++]=null;var f=Zn[s];if(Zn[s++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Vg(a,h,f)}}function tc(t,s,a,l){Zn[Da++]=t,Zn[Da++]=s,Zn[Da++]=a,Zn[Da++]=l,Dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Od(t,s,a,l){return tc(t,s,a,l),nc(t)}function Oa(t,s){return tc(t,null,null,s),nc(t)}function Vg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&s!==null&&(h=31-gt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),f):null}function nc(t){if(50<Cl)throw Cl=0,Uf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ma={};function jT(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,s,a,l){return new jT(t,s,a,l)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ts(t,s){var a=t.alternate;return a===null?(a=Vn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function jg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function rc(t,s,a,l,h,f){var b=0;if(l=t,typeof t=="function")Md(t)&&(b=1);else if(typeof t=="string")b=US(t,a,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=Vn(31,a,s,h),t.elementType=D,t.lanes=f,t;case N:return Hi(a.children,h,f,s);case B:b=8,h|=24;break;case M:return t=Vn(12,a,s,h|2),t.elementType=M,t.lanes=f,t;case Y:return t=Vn(13,a,s,h),t.elementType=Y,t.lanes=f,t;case se:return t=Vn(19,a,s,h),t.elementType=se,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:case Z:b=10;break e;case H:b=9;break e;case te:b=11;break e;case C:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=Vn(b,a,s,h),s.elementType=t,s.type=l,s.lanes=f,s}function Hi(t,s,a,l){return t=Vn(7,t,l,s),t.lanes=a,t}function kd(t,s,a){return t=Vn(6,t,null,s),t.lanes=a,t}function Pd(t,s,a){return s=Vn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var ka=[],Pa=0,sc=null,ic=0,Wn=[],Jn=0,Fi=null,ns=1,rs="";function Gi(t,s){ka[Pa++]=ic,ka[Pa++]=sc,sc=t,ic=s}function Lg(t,s,a){Wn[Jn++]=ns,Wn[Jn++]=rs,Wn[Jn++]=Fi,Fi=t;var l=ns;t=rs;var h=32-gt(l)-1;l&=~(1<<h),a+=1;var f=32-gt(s)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,ns=1<<32-gt(s)+h|a<<h|l,rs=f+t}else ns=1<<f|a<<h|l,rs=t}function Vd(t){t.return!==null&&(Gi(t,1),Lg(t,1,0))}function jd(t){for(;t===sc;)sc=ka[--Pa],ka[Pa]=null,ic=ka[--Pa],ka[Pa]=null;for(;t===Fi;)Fi=Wn[--Jn],Wn[Jn]=null,rs=Wn[--Jn],Wn[Jn]=null,ns=Wn[--Jn],Wn[Jn]=null}var Tn=null,It=null,it=!1,Ki=null,Dr=!1,Ld=Error(i(519));function $i(t){var s=Error(i(418,""));throw al(Xn(s,t)),Ld}function Ug(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Kt]=t,s[Lt]=l,a){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(a=0;a<Nl.length;a++)$e(Nl[a],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),Di(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),_a(s);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),Oi(s,l.value,l.defaultValue,l.children),_a(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||nv(s.textContent,a)?(l.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),l.onScroll!=null&&$e("scroll",s),l.onScrollEnd!=null&&$e("scrollend",s),l.onClick!=null&&(s.onclick=Uc),s=!0):s=!1,s||$i(t)}function Bg(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Tn=Tn.return}}function sl(t){if(t!==Tn)return!1;if(!it)return Bg(t),it=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&It&&$i(t),Bg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){It=cr(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}It=null}}else s===27?(s=It,$s(t.type)?(t=im,im=null,It=t):It=s):It=Tn?cr(t.stateNode.nextSibling):null;return!0}function il(){It=Tn=null,it=!1}function zg(){var t=Ki;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),Ki=null),t}function al(t){Ki===null?Ki=[t]:Ki.push(t)}var Ud=re(null),Qi=null,ss=null;function Os(t,s,a){O(Ud,s._currentValue),s._currentValue=a}function is(t){t._currentValue=Ud.current,fe(Ud)}function Bd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function zd(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var j=0;j<s.length;j++)if(T.context===s[j]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Bd(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Bd(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function ol(t,s,a,l){t=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var T=h.type;Pn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===le.current){if(b=h.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}h=h.return}t!==null&&zd(s,t,a,l),s.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!Pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Yi(t){Qi=t,ss=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mn(t){return qg(Qi,t)}function oc(t,s){return Qi===null&&Yi(t),qg(t,s)}function qg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ss===null){if(t===null)throw Error(i(308));ss=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ss=ss.next=s;return a}var LT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},UT=r.unstable_scheduleCallback,BT=r.unstable_NormalPriority,Yt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qd(){return{controller:new LT,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&UT(BT,function(){t.controller.abort()})}var ul=null,Hd=0,Va=0,ja=null;function zT(t,s){if(ul===null){var a=ul=[];Hd=0,Va=Kf(),ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Hd++,s.then(Hg,Hg),s}function Hg(){if(--Hd===0&&ul!==null){ja!==null&&(ja.status="fulfilled");var t=ul;ul=null,Va=0,ja=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function qT(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Fg=Q.S;Q.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&zT(t,s),Fg!==null&&Fg(t,s)};var Xi=re(null);function Fd(){var t=Xi.current;return t!==null?t:vt.pooledCache}function lc(t,s){s===null?O(Xi,Xi.current):O(Xi,s.pool)}function Gg(){var t=Fd();return t===null?null:{parent:Yt._currentValue,pool:t}}var cl=Error(i(460)),Kg=Error(i(474)),uc=Error(i(542)),Gd={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cc(){}function Qg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(cc,cc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Xg(t),t;default:if(typeof s.status=="string")s.then(cc,cc);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Xg(t),t}throw hl=s,cl}}var hl=null;function Yg(){if(hl===null)throw Error(i(459));var t=hl;return hl=null,t}function Xg(t){if(t===cl||t===uc)throw Error(i(483))}var Ms=!1;function Kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ks(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(lt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=nc(t),Vg(t,null,a),s}return tc(t,l,s,a),nc(t)}function dl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Bo(t,a)}}function Qd(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=s:f=f.next=s}else h=f=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Yd=!1;function fl(){if(Yd){var t=ja;if(t!==null)throw t}}function ml(t,s,a,l){Yd=!1;var h=t.updateQueue;Ms=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var j=T,$=j.next;j.next=null,b===null?f=$:b.next=$,b=j;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,T=oe.lastBaseUpdate,T!==b&&(T===null?oe.firstBaseUpdate=$:T.next=$,oe.lastBaseUpdate=j))}if(f!==null){var ce=h.baseState;b=0,oe=$=j=null,T=f;do{var X=T.lane&-536870913,W=X!==T.lane;if(W?(tt&X)===X:(l&X)===X){X!==0&&X===Va&&(Yd=!0),oe!==null&&(oe=oe.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ve=t,Ne=T;X=s;var pt=a;switch(Ne.tag){case 1:if(Ve=Ne.payload,typeof Ve=="function"){ce=Ve.call(pt,ce,X);break e}ce=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ne.payload,X=typeof Ve=="function"?Ve.call(pt,ce,X):Ve,X==null)break e;ce=_({},ce,X);break e;case 2:Ms=!0}}X=T.callback,X!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[X]:W.push(X))}else W={lane:X,tag:T.tag,payload:T.payload,callback:T.callback,next:null},oe===null?($=oe=W,j=ce):oe=oe.next=W,b|=X;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;W=T,T=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);oe===null&&(j=ce),h.baseState=j,h.firstBaseUpdate=$,h.lastBaseUpdate=oe,f===null&&(h.shared.lanes=0),Hs|=b,t.lanes=b,t.memoizedState=ce}}function Zg(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Wg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Zg(a[t],s)}var La=re(null),hc=re(0);function Jg(t,s){t=ds,O(hc,t),O(La,s),ds=t|s.baseLanes}function Xd(){O(hc,ds),O(La,La.current)}function Zd(){ds=hc.current,fe(La),fe(hc)}var Vs=0,qe=null,ft=null,Bt=null,dc=!1,Ua=!1,Zi=!1,fc=0,pl=0,Ba=null,HT=0;function Mt(){throw Error(i(321))}function Wd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Pn(t[a],s[a]))return!1;return!0}function Jd(t,s,a,l,h,f){return Vs=f,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=t===null||t.memoizedState===null?Vy:jy,Zi=!1,f=a(l,h),Zi=!1,Ua&&(f=ty(s,a,l,h)),ey(t),f}function ey(t){Q.H=_c;var s=ft!==null&&ft.next!==null;if(Vs=0,Bt=ft=qe=null,dc=!1,pl=0,Ba=null,s)throw Error(i(300));t===null||en||(t=t.dependencies,t!==null&&ac(t)&&(en=!0))}function ty(t,s,a,l){qe=t;var h=0;do{if(Ua&&(Ba=null),pl=0,Ua=!1,25<=h)throw Error(i(301));if(h+=1,Bt=ft=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=XT,f=s(a,l)}while(Ua);return f}function FT(){var t=Q.H,s=t.useState()[0];return s=typeof s.then=="function"?gl(s):s,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(qe.flags|=1024),s}function ef(){var t=fc!==0;return fc=0,t}function tf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function nf(t){if(dc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}dc=!1}Vs=0,Bt=ft=qe=null,Ua=!1,pl=fc=0,Ba=null}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function zt(){if(ft===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var s=Bt===null?qe.memoizedState:Bt.next;if(s!==null)Bt=s,ft=t;else{if(t===null)throw qe.alternate===null?Error(i(467)):Error(i(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var s=pl;return pl+=1,Ba===null&&(Ba=[]),t=Qg(Ba,t,s),s=qe,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Vy:jy),t}function mc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===Z)return mn(t)}throw Error(i(438,String(t)))}function sf(t){var s=null,a=qe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=rf(),qe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=V;return s.index++,a}function as(t,s){return typeof s=="function"?s(t):s}function pc(t){var s=zt();return af(s,ft,t)}function af(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}s.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{s=h.next;var T=b=null,j=null,$=s,oe=!1;do{var ce=$.lane&-536870913;if(ce!==$.lane?(tt&ce)===ce:(Vs&ce)===ce){var X=$.revertLane;if(X===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ce===Va&&(oe=!0);else if((Vs&X)===X){$=$.next,X===Va&&(oe=!0);continue}else ce={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(T=j=ce,b=f):j=j.next=ce,qe.lanes|=X,Hs|=X;ce=$.action,Zi&&a(f,ce),f=$.hasEagerState?$.eagerState:a(f,ce)}else X={lane:ce,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(T=j=X,b=f):j=j.next=X,qe.lanes|=ce,Hs|=ce;$=$.next}while($!==null&&$!==s);if(j===null?b=f:j.next=T,!Pn(f,t.memoizedState)&&(en=!0,oe&&(a=ja,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=j,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var s=zt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=s.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);Pn(f,s.memoizedState)||(en=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,l]}function ny(t,s,a){var l=qe,h=zt(),f=it;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=s();var b=!Pn((ft||h).memoizedState,a);b&&(h.memoizedState=a,en=!0),h=h.queue;var T=iy.bind(null,l,h,t);if(yl(2048,8,T,[t]),h.getSnapshot!==s||b||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,za(9,gc(),sy.bind(null,l,h,a,s),null),vt===null)throw Error(i(349));f||(Vs&124)!==0||ry(l,s,a)}return a}function ry(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=qe.updateQueue,s===null?(s=rf(),qe.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function sy(t,s,a,l){s.value=a,s.getSnapshot=l,ay(s)&&oy(t)}function iy(t,s,a){return a(function(){ay(s)&&oy(t)})}function ay(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Pn(t,a)}catch{return!0}}function oy(t){var s=Oa(t,2);s!==null&&zn(s,t,2)}function lf(t){var s=Cn();if(typeof t=="function"){var a=t;if(t=a(),Zi){Ze(!0);try{a()}finally{Ze(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:t},s}function ly(t,s,a,l){return t.baseState=a,af(t,ft,typeof l=="function"?l:as)}function GT(t,s,a,l,h){if(vc(t))throw Error(i(485));if(t=s.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=s.pending,a===null?(f.next=s.pending=f,uy(s,f)):(f.next=a.next,s.pending=a.next=f)}}function uy(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var f=Q.T,b={};Q.T=b;try{var T=a(h,l),j=Q.S;j!==null&&j(b,T),cy(t,s,T)}catch($){uf(t,s,$)}finally{Q.T=f}}else try{f=a(h,l),cy(t,s,f)}catch($){uf(t,s,$)}}function cy(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hy(t,s,l)},function(l){return uf(t,s,l)}):hy(t,s,a)}function hy(t,s,a){s.status="fulfilled",s.value=a,dy(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,uy(t,a)))}function uf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,dy(s),s=s.next;while(s!==l)}t.action=null}function dy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function fy(t,s){return s}function my(t,s){if(it){var a=vt.formState;if(a!==null){e:{var l=qe;if(it){if(It){t:{for(var h=It,f=Dr;h.nodeType!==8;){if(!f){h=null;break t}if(h=cr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){It=cr(h.nextSibling),l=h.data==="F!";break e}}$i(l)}l=!1}l&&(s=a[0])}}return a=Cn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fy,lastRenderedState:s},a.queue=l,a=My.bind(null,qe,l),l.dispatch=a,l=lf(!1),f=mf.bind(null,qe,!1,l.queue),l=Cn(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=GT.bind(null,qe,h,f,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function py(t){var s=zt();return gy(s,ft,t)}function gy(t,s,a){if(s=af(t,s,fy)[0],t=pc(as)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=gl(s)}catch(b){throw b===cl?uc:b}else l=s;s=zt();var h=s.queue,f=h.dispatch;return a!==s.memoizedState&&(qe.flags|=2048,za(9,gc(),KT.bind(null,h,a),null)),[l,f,t]}function KT(t,s){t.action=s}function yy(t){var s=zt(),a=ft;if(a!==null)return gy(s,a,t);zt(),s=s.memoizedState,a=zt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function za(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=qe.updateQueue,s===null&&(s=rf(),qe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function gc(){return{destroy:void 0,resource:void 0}}function vy(){return zt().memoizedState}function yc(t,s,a,l){var h=Cn();l=l===void 0?null:l,qe.flags|=t,h.memoizedState=za(1|s,gc(),a,l)}function yl(t,s,a,l){var h=zt();l=l===void 0?null:l;var f=h.memoizedState.inst;ft!==null&&l!==null&&Wd(l,ft.memoizedState.deps)?h.memoizedState=za(s,f,a,l):(qe.flags|=t,h.memoizedState=za(1|s,f,a,l))}function _y(t,s){yc(8390656,8,t,s)}function Ey(t,s){yl(2048,8,t,s)}function by(t,s){return yl(4,2,t,s)}function xy(t,s){return yl(4,4,t,s)}function Ty(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Sy(t,s,a){a=a!=null?a.concat([t]):null,yl(4,4,Ty.bind(null,s,t),a)}function cf(){}function wy(t,s){var a=zt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Wd(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Ay(t,s){var a=zt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Wd(s,l[1]))return l[0];if(l=t(),Zi){Ze(!0);try{t()}finally{Ze(!1)}}return a.memoizedState=[l,s],l}function hf(t,s,a){return a===void 0||(Vs&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=I0(),qe.lanes|=t,Hs|=t,a)}function Ry(t,s,a,l){return Pn(a,s)?a:La.current!==null?(t=hf(t,a,l),Pn(t,s)||(en=!0),t):(Vs&42)===0?(en=!0,t.memoizedState=a):(t=I0(),qe.lanes|=t,Hs|=t,s)}function Cy(t,s,a,l,h){var f=ee.p;ee.p=f!==0&&8>f?f:8;var b=Q.T,T={};Q.T=T,mf(t,!1,s,a);try{var j=h(),$=Q.S;if($!==null&&$(T,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var oe=qT(j,l);vl(t,s,oe,Bn(t))}else vl(t,s,l,Bn(t))}catch(ce){vl(t,s,{then:function(){},status:"rejected",reason:ce},Bn())}finally{ee.p=f,Q.T=b}}function $T(){}function df(t,s,a,l){if(t.tag!==5)throw Error(i(476));var h=Iy(t).queue;Cy(t,h,s,ie,a===null?$T:function(){return Ny(t),a(l)})}function Iy(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:ie},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Ny(t){var s=Iy(t).next.queue;vl(t,s,{},Bn())}function ff(){return mn(Vl)}function Dy(){return zt().memoizedState}function Oy(){return zt().memoizedState}function QT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Bn();t=ks(a);var l=Ps(s,t,a);l!==null&&(zn(l,s,a),dl(l,s,a)),s={cache:qd()},t.payload=s;return}s=s.return}}function YT(t,s,a){var l=Bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},vc(t)?ky(s,a):(a=Od(t,s,a,l),a!==null&&(zn(a,t,l),Py(a,s,l)))}function My(t,s,a){var l=Bn();vl(t,s,a,l)}function vl(t,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(vc(t))ky(s,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var b=s.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,Pn(T,b))return tc(t,s,h,0),vt===null&&ec(),!1}catch{}finally{}if(a=Od(t,s,h,l),a!==null)return zn(a,t,l),Py(a,s,l),!0}return!1}function mf(t,s,a,l){if(l={lane:2,revertLane:Kf(),action:l,hasEagerState:!1,eagerState:null,next:null},vc(t)){if(s)throw Error(i(479))}else s=Od(t,a,l,2),s!==null&&zn(s,t,2)}function vc(t){var s=t.alternate;return t===qe||s!==null&&s===qe}function ky(t,s){Ua=dc=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Py(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Bo(t,a)}}var _c={readContext:mn,use:mc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Vy={readContext:mn,use:mc,useCallback:function(t,s){return Cn().memoizedState=[t,s===void 0?null:s],t},useContext:mn,useEffect:_y,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,yc(4194308,4,Ty.bind(null,s,t),a)},useLayoutEffect:function(t,s){return yc(4194308,4,t,s)},useInsertionEffect:function(t,s){yc(4,2,t,s)},useMemo:function(t,s){var a=Cn();s=s===void 0?null:s;var l=t();if(Zi){Ze(!0);try{t()}finally{Ze(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=Cn();if(a!==void 0){var h=a(s);if(Zi){Ze(!0);try{a(s)}finally{Ze(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=YT.bind(null,qe,t),[l.memoizedState,t]},useRef:function(t){var s=Cn();return t={current:t},s.memoizedState=t},useState:function(t){t=lf(t);var s=t.queue,a=My.bind(null,qe,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(t,s){var a=Cn();return hf(a,t,s)},useTransition:function(){var t=lf(!1);return t=Cy.bind(null,qe,t.queue,!0,!1),Cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=qe,h=Cn();if(it){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),vt===null)throw Error(i(349));(tt&124)!==0||ry(l,s,a)}h.memoizedState=a;var f={value:a,getSnapshot:s};return h.queue=f,_y(iy.bind(null,l,f,t),[t]),l.flags|=2048,za(9,gc(),sy.bind(null,l,f,a,s),null),a},useId:function(){var t=Cn(),s=vt.identifierPrefix;if(it){var a=rs,l=ns;a=(l&~(1<<32-gt(l)-1)).toString(32)+a,s=""+s+"R"+a,a=fc++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=HT++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:ff,useFormState:my,useActionState:my,useOptimistic:function(t){var s=Cn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=mf.bind(null,qe,!0,a),a.dispatch=s,[t,s]},useMemoCache:sf,useCacheRefresh:function(){return Cn().memoizedState=QT.bind(null,qe)}},jy={readContext:mn,use:mc,useCallback:wy,useContext:mn,useEffect:Ey,useImperativeHandle:Sy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ay,useReducer:pc,useRef:vy,useState:function(){return pc(as)},useDebugValue:cf,useDeferredValue:function(t,s){var a=zt();return Ry(a,ft.memoizedState,t,s)},useTransition:function(){var t=pc(as)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:gl(t),s]},useSyncExternalStore:ny,useId:Dy,useHostTransitionStatus:ff,useFormState:py,useActionState:py,useOptimistic:function(t,s){var a=zt();return ly(a,ft,t,s)},useMemoCache:sf,useCacheRefresh:Oy},XT={readContext:mn,use:mc,useCallback:wy,useContext:mn,useEffect:Ey,useImperativeHandle:Sy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ay,useReducer:of,useRef:vy,useState:function(){return of(as)},useDebugValue:cf,useDeferredValue:function(t,s){var a=zt();return ft===null?hf(a,t,s):Ry(a,ft.memoizedState,t,s)},useTransition:function(){var t=of(as)[0],s=zt().memoizedState;return[typeof t=="boolean"?t:gl(t),s]},useSyncExternalStore:ny,useId:Dy,useHostTransitionStatus:ff,useFormState:yy,useActionState:yy,useOptimistic:function(t,s){var a=zt();return ft!==null?ly(a,ft,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Oy},qa=null,_l=0;function Ec(t){var s=_l;return _l+=1,qa===null&&(qa=[]),Qg(qa,t,s)}function El(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function bc(t,s){throw s.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ly(t){var s=t._init;return s(t._payload)}function Uy(t){function s(F,q){if(t){var K=F.deletions;K===null?(F.deletions=[q],F.flags|=16):K.push(q)}}function a(F,q){if(!t)return null;for(;q!==null;)s(F,q),q=q.sibling;return null}function l(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function h(F,q){return F=ts(F,q),F.index=0,F.sibling=null,F}function f(F,q,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<q?(F.flags|=67108866,q):K):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function T(F,q,K,ue){return q===null||q.tag!==6?(q=kd(K,F.mode,ue),q.return=F,q):(q=h(q,K),q.return=F,q)}function j(F,q,K,ue){var we=K.type;return we===N?oe(F,q,K.props.children,ue,K.key):q!==null&&(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&Ly(we)===q.type)?(q=h(q,K.props),El(q,K),q.return=F,q):(q=rc(K.type,K.key,K.props,null,F.mode,ue),El(q,K),q.return=F,q)}function $(F,q,K,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=Pd(K,F.mode,ue),q.return=F,q):(q=h(q,K.children||[]),q.return=F,q)}function oe(F,q,K,ue,we){return q===null||q.tag!==7?(q=Hi(K,F.mode,ue,we),q.return=F,q):(q=h(q,K),q.return=F,q)}function ce(F,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=kd(""+q,F.mode,K),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return K=rc(q.type,q.key,q.props,null,F.mode,K),El(K,q),K.return=F,K;case k:return q=Pd(q,F.mode,K),q.return=F,q;case R:var ue=q._init;return q=ue(q._payload),ce(F,q,K)}if(ye(q)||L(q))return q=Hi(q,F.mode,K,null),q.return=F,q;if(typeof q.then=="function")return ce(F,Ec(q),K);if(q.$$typeof===Z)return ce(F,oc(F,q),K);bc(F,q)}return null}function X(F,q,K,ue){var we=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:T(F,q,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return K.key===we?j(F,q,K,ue):null;case k:return K.key===we?$(F,q,K,ue):null;case R:return we=K._init,K=we(K._payload),X(F,q,K,ue)}if(ye(K)||L(K))return we!==null?null:oe(F,q,K,ue,null);if(typeof K.then=="function")return X(F,q,Ec(K),ue);if(K.$$typeof===Z)return X(F,q,oc(F,K),ue);bc(F,K)}return null}function W(F,q,K,ue,we){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(K)||null,T(q,F,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return F=F.get(ue.key===null?K:ue.key)||null,j(q,F,ue,we);case k:return F=F.get(ue.key===null?K:ue.key)||null,$(q,F,ue,we);case R:var Ge=ue._init;return ue=Ge(ue._payload),W(F,q,K,ue,we)}if(ye(ue)||L(ue))return F=F.get(K)||null,oe(q,F,ue,we,null);if(typeof ue.then=="function")return W(F,q,K,Ec(ue),we);if(ue.$$typeof===Z)return W(F,q,K,oc(q,ue),we);bc(q,ue)}return null}function Ve(F,q,K,ue){for(var we=null,Ge=null,Re=q,De=q=0,nn=null;Re!==null&&De<K.length;De++){Re.index>De?(nn=Re,Re=null):nn=Re.sibling;var st=X(F,Re,K[De],ue);if(st===null){Re===null&&(Re=nn);break}t&&Re&&st.alternate===null&&s(F,Re),q=f(st,q,De),Ge===null?we=st:Ge.sibling=st,Ge=st,Re=nn}if(De===K.length)return a(F,Re),it&&Gi(F,De),we;if(Re===null){for(;De<K.length;De++)Re=ce(F,K[De],ue),Re!==null&&(q=f(Re,q,De),Ge===null?we=Re:Ge.sibling=Re,Ge=Re);return it&&Gi(F,De),we}for(Re=l(Re);De<K.length;De++)nn=W(Re,F,De,K[De],ue),nn!==null&&(t&&nn.alternate!==null&&Re.delete(nn.key===null?De:nn.key),q=f(nn,q,De),Ge===null?we=nn:Ge.sibling=nn,Ge=nn);return t&&Re.forEach(function(Ws){return s(F,Ws)}),it&&Gi(F,De),we}function Ne(F,q,K,ue){if(K==null)throw Error(i(151));for(var we=null,Ge=null,Re=q,De=q=0,nn=null,st=K.next();Re!==null&&!st.done;De++,st=K.next()){Re.index>De?(nn=Re,Re=null):nn=Re.sibling;var Ws=X(F,Re,st.value,ue);if(Ws===null){Re===null&&(Re=nn);break}t&&Re&&Ws.alternate===null&&s(F,Re),q=f(Ws,q,De),Ge===null?we=Ws:Ge.sibling=Ws,Ge=Ws,Re=nn}if(st.done)return a(F,Re),it&&Gi(F,De),we;if(Re===null){for(;!st.done;De++,st=K.next())st=ce(F,st.value,ue),st!==null&&(q=f(st,q,De),Ge===null?we=st:Ge.sibling=st,Ge=st);return it&&Gi(F,De),we}for(Re=l(Re);!st.done;De++,st=K.next())st=W(Re,F,De,st.value,ue),st!==null&&(t&&st.alternate!==null&&Re.delete(st.key===null?De:st.key),q=f(st,q,De),Ge===null?we=st:Ge.sibling=st,Ge=st);return t&&Re.forEach(function(ZS){return s(F,ZS)}),it&&Gi(F,De),we}function pt(F,q,K,ue){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case x:e:{for(var we=K.key;q!==null;){if(q.key===we){if(we=K.type,we===N){if(q.tag===7){a(F,q.sibling),ue=h(q,K.props.children),ue.return=F,F=ue;break e}}else if(q.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&Ly(we)===q.type){a(F,q.sibling),ue=h(q,K.props),El(ue,K),ue.return=F,F=ue;break e}a(F,q);break}else s(F,q);q=q.sibling}K.type===N?(ue=Hi(K.props.children,F.mode,ue,K.key),ue.return=F,F=ue):(ue=rc(K.type,K.key,K.props,null,F.mode,ue),El(ue,K),ue.return=F,F=ue)}return b(F);case k:e:{for(we=K.key;q!==null;){if(q.key===we)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){a(F,q.sibling),ue=h(q,K.children||[]),ue.return=F,F=ue;break e}else{a(F,q);break}else s(F,q);q=q.sibling}ue=Pd(K,F.mode,ue),ue.return=F,F=ue}return b(F);case R:return we=K._init,K=we(K._payload),pt(F,q,K,ue)}if(ye(K))return Ve(F,q,K,ue);if(L(K)){if(we=L(K),typeof we!="function")throw Error(i(150));return K=we.call(K),Ne(F,q,K,ue)}if(typeof K.then=="function")return pt(F,q,Ec(K),ue);if(K.$$typeof===Z)return pt(F,q,oc(F,K),ue);bc(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(a(F,q.sibling),ue=h(q,K),ue.return=F,F=ue):(a(F,q),ue=kd(K,F.mode,ue),ue.return=F,F=ue),b(F)):a(F,q)}return function(F,q,K,ue){try{_l=0;var we=pt(F,q,K,ue);return qa=null,we}catch(Re){if(Re===cl||Re===uc)throw Re;var Ge=Vn(29,Re,null,F.mode);return Ge.lanes=ue,Ge.return=F,Ge}finally{}}}var Ha=Uy(!0),By=Uy(!1),er=re(null),Or=null;function js(t){var s=t.alternate;O(Xt,Xt.current&1),O(er,t),Or===null&&(s===null||La.current!==null||s.memoizedState!==null)&&(Or=t)}function zy(t){if(t.tag===22){if(O(Xt,Xt.current),O(er,t),Or===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(Or=t)}}else Ls()}function Ls(){O(Xt,Xt.current),O(er,er.current)}function os(t){fe(er),Or===t&&(Or=null),fe(Xt)}var Xt=re(0);function xc(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||sm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function pf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:_({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Bn(),h=ks(l);h.payload=s,a!=null&&(h.callback=a),s=Ps(t,h,l),s!==null&&(zn(s,t,l),dl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Bn(),h=ks(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ps(t,h,l),s!==null&&(zn(s,t,l),dl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Bn(),l=ks(a);l.tag=2,s!=null&&(l.callback=s),s=Ps(t,l,a),s!==null&&(zn(s,t,a),dl(s,t,a))}};function qy(t,s,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):s.prototype&&s.prototype.isPureReactComponent?!nl(a,l)||!nl(h,f):!0}function Hy(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&gf.enqueueReplaceState(s,s.state,null)}function Wi(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=_({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fy(t){Tc(t)}function Gy(t){console.error(t)}function Ky(t){Tc(t)}function Sc(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function $y(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yf(t,s,a){return a=ks(a),a.tag=3,a.payload={element:null},a.callback=function(){Sc(t,s)},a}function Qy(t){return t=ks(t),t.tag=3,t}function Yy(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){$y(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){$y(s,a,l),typeof h!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ZT(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&ol(s,a,h,!0),a=er.current,a!==null){switch(a.tag){case 13:return Or===null?zf():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Gd?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Hf(t,l,h)),!1;case 22:return a.flags|=65536,l===Gd?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Hf(t,l,h)),!1}throw Error(i(435,a.tag))}return Hf(t,l,h),zf(),!1}if(it)return s=er.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Ld&&(t=Error(i(422),{cause:l}),al(Xn(t,a)))):(l!==Ld&&(s=Error(i(423),{cause:l}),al(Xn(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Xn(l,a),h=yf(t.stateNode,l,h),Qd(t,h),Nt!==4&&(Nt=2)),!1;var f=Error(i(520),{cause:l});if(f=Xn(f,a),Rl===null?Rl=[f]:Rl.push(f),Nt!==4&&(Nt=2),s===null)return!0;l=Xn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=yf(a.stateNode,l,t),Qd(a,t),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Fs===null||!Fs.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Qy(h),Yy(h,t,a,l),Qd(a,h),!1}a=a.return}while(a!==null);return!1}var Xy=Error(i(461)),en=!1;function ln(t,s,a,l){s.child=t===null?By(s,null,a,l):Ha(s,t.child,a,l)}function Zy(t,s,a,l,h){a=a.render;var f=s.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Yi(s),l=Jd(t,s,a,b,f,h),T=ef(),t!==null&&!en?(tf(t,s,h),ls(t,s,h)):(it&&T&&Vd(s),s.flags|=1,ln(t,s,l,h),s.child)}function Wy(t,s,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Md(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,Jy(t,s,f,l,h)):(t=rc(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,!wf(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(b,l)&&t.ref===s.ref)return ls(t,s,h)}return s.flags|=1,t=ts(f,l),t.ref=s.ref,t.return=s,s.child=t}function Jy(t,s,a,l,h){if(t!==null){var f=t.memoizedProps;if(nl(f,l)&&t.ref===s.ref)if(en=!1,s.pendingProps=l=f,wf(t,h))(t.flags&131072)!==0&&(en=!0);else return s.lanes=t.lanes,ls(t,s,h)}return vf(t,s,a,l,h)}function e0(t,s,a){var l=s.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=s.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;s.childLanes=f&~l}else s.childLanes=0,s.child=null;return t0(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&lc(s,f!==null?f.cachePool:null),f!==null?Jg(s,f):Xd(),zy(s);else return s.lanes=s.childLanes=536870912,t0(t,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(lc(s,f.cachePool),Jg(s,f),Ls(),s.memoizedState=null):(t!==null&&lc(s,null),Xd(),Ls());return ln(t,s,h,a),s.child}function t0(t,s,a,l){var h=Fd();return h=h===null?null:{parent:Yt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&lc(s,null),Xd(),zy(s),t!==null&&ol(t,s,l,!0),null}function wc(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function vf(t,s,a,l,h){return Yi(s),a=Jd(t,s,a,l,void 0,h),l=ef(),t!==null&&!en?(tf(t,s,h),ls(t,s,h)):(it&&l&&Vd(s),s.flags|=1,ln(t,s,a,h),s.child)}function n0(t,s,a,l,h,f){return Yi(s),s.updateQueue=null,a=ty(s,l,a,h),ey(t),l=ef(),t!==null&&!en?(tf(t,s,f),ls(t,s,f)):(it&&l&&Vd(s),s.flags|=1,ln(t,s,a,f),s.child)}function r0(t,s,a,l,h){if(Yi(s),s.stateNode===null){var f=Ma,b=a.contextType;typeof b=="object"&&b!==null&&(f=mn(b)),f=new a(l,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=gf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=l,f.state=s.memoizedState,f.refs={},Kd(s),b=a.contextType,f.context=typeof b=="object"&&b!==null?mn(b):Ma,f.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(pf(s,a,b,l),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&gf.enqueueReplaceState(f,f.state,null),ml(s,l,f,h),fl(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){f=s.stateNode;var T=s.memoizedProps,j=Wi(a,T);f.props=j;var $=f.context,oe=a.contextType;b=Ma,typeof oe=="object"&&oe!==null&&(b=mn(oe));var ce=a.getDerivedStateFromProps;oe=typeof ce=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,oe||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||$!==b)&&Hy(s,f,l,b),Ms=!1;var X=s.memoizedState;f.state=X,ml(s,l,f,h),fl(),$=s.memoizedState,T||X!==$||Ms?(typeof ce=="function"&&(pf(s,a,ce,l),$=s.memoizedState),(j=Ms||qy(s,a,j,l,X,$,b))?(oe||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=$),f.props=l,f.state=$,f.context=b,l=j):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{f=s.stateNode,$d(t,s),b=s.memoizedProps,oe=Wi(a,b),f.props=oe,ce=s.pendingProps,X=f.context,$=a.contextType,j=Ma,typeof $=="object"&&$!==null&&(j=mn($)),T=a.getDerivedStateFromProps,($=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ce||X!==j)&&Hy(s,f,l,j),Ms=!1,X=s.memoizedState,f.state=X,ml(s,l,f,h),fl();var W=s.memoizedState;b!==ce||X!==W||Ms||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof T=="function"&&(pf(s,a,T,l),W=s.memoizedState),(oe=Ms||qy(s,a,oe,l,X,W,j)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,j),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,j)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=W),f.props=l,f.state=W,f.context=j,l=oe):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),l=!1)}return f=l,wc(t,s),l=(s.flags&128)!==0,f||l?(f=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,t!==null&&l?(s.child=Ha(s,t.child,null,h),s.child=Ha(s,null,a,h)):ln(t,s,a,h),s.memoizedState=f.state,t=s.child):t=ls(t,s,h),t}function s0(t,s,a,l){return il(),s.flags|=256,ln(t,s,a,l),s.child}var _f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ef(t){return{baseLanes:t,cachePool:Gg()}}function bf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=tr),t}function i0(t,s,a){var l=s.pendingProps,h=!1,f=(s.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),b&&(h=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(it){if(h?js(s):Ls(),it){var T=It,j;if(j=T){e:{for(j=T,T=Dr;j.nodeType!==8;){if(!T){T=null;break e}if(j=cr(j.nextSibling),j===null){T=null;break e}}T=j}T!==null?(s.memoizedState={dehydrated:T,treeContext:Fi!==null?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},j=Vn(18,null,null,0),j.stateNode=T,j.return=s,s.child=j,Tn=s,It=null,j=!0):j=!1}j||$i(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return sm(T)?s.lanes=32:s.lanes=536870912,null;os(s)}return T=l.children,l=l.fallback,h?(Ls(),h=s.mode,T=Ac({mode:"hidden",children:T},h),l=Hi(l,h,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,h=s.child,h.memoizedState=Ef(a),h.childLanes=bf(t,b,a),s.memoizedState=_f,l):(js(s),xf(s,T))}if(j=t.memoizedState,j!==null&&(T=j.dehydrated,T!==null)){if(f)s.flags&256?(js(s),s.flags&=-257,s=Tf(t,s,a)):s.memoizedState!==null?(Ls(),s.child=t.child,s.flags|=128,s=null):(Ls(),h=l.fallback,T=s.mode,l=Ac({mode:"visible",children:l.children},T),h=Hi(h,T,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,Ha(s,t.child,null,a),l=s.child,l.memoizedState=Ef(a),l.childLanes=bf(t,b,a),s.memoizedState=_f,s=h);else if(js(s),sm(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var $=b.dgst;b=$,l=Error(i(419)),l.stack="",l.digest=b,al({value:l,source:null,stack:null}),s=Tf(t,s,a)}else if(en||ol(t,s,a,!1),b=(a&t.childLanes)!==0,en||b){if(b=vt,b!==null&&(l=a&-a,l=(l&42)!==0?1:ws(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,Oa(t,l),zn(b,t,l),Xy;T.data==="$?"||zf(),s=Tf(t,s,a)}else T.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=j.treeContext,It=cr(T.nextSibling),Tn=s,it=!0,Ki=null,Dr=!1,t!==null&&(Wn[Jn++]=ns,Wn[Jn++]=rs,Wn[Jn++]=Fi,ns=t.id,rs=t.overflow,Fi=s),s=xf(s,l.children),s.flags|=4096);return s}return h?(Ls(),h=l.fallback,T=s.mode,j=t.child,$=j.sibling,l=ts(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,$!==null?h=ts($,h):(h=Hi(h,T,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,T=t.child.memoizedState,T===null?T=Ef(a):(j=T.cachePool,j!==null?($=Yt._currentValue,j=j.parent!==$?{parent:$,pool:$}:j):j=Gg(),T={baseLanes:T.baseLanes|a,cachePool:j}),h.memoizedState=T,h.childLanes=bf(t,b,a),s.memoizedState=_f,l):(js(s),a=t.child,t=a.sibling,a=ts(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=a,s.memoizedState=null,a)}function xf(t,s){return s=Ac({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ac(t,s){return t=Vn(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Tf(t,s,a){return Ha(s,t.child,null,a),t=xf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function a0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Bd(t.return,s,a)}function Sf(t,s,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function o0(t,s,a){var l=s.pendingProps,h=l.revealOrder,f=l.tail;if(ln(t,s,l.children,a),l=Xt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a0(t,a,s);else if(t.tag===19)a0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(O(Xt,l),h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Sf(s,!1,h,a,f);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&xc(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Sf(s,!0,a,null,f);break;case"together":Sf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ls(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Hs|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(ol(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=ts(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=ts(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function wf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function WT(t,s,a){switch(s.tag){case 3:ae(s,s.stateNode.containerInfo),Os(s,Yt,t.memoizedState.cache),il();break;case 27:case 5:ve(s);break;case 4:ae(s,s.stateNode.containerInfo);break;case 10:Os(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(js(s),s.flags|=128,null):(a&s.child.childLanes)!==0?i0(t,s,a):(js(s),t=ls(t,s,a),t!==null?t.sibling:null);js(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(ol(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return o0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),O(Xt,Xt.current),l)break;return null;case 22:case 23:return s.lanes=0,e0(t,s,a);case 24:Os(s,Yt,t.memoizedState.cache)}return ls(t,s,a)}function l0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)en=!0;else{if(!wf(t,a)&&(s.flags&128)===0)return en=!1,WT(t,s,a);en=(t.flags&131072)!==0}else en=!1,it&&(s.flags&1048576)!==0&&Lg(s,ic,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Md(l)?(t=Wi(l,t),s.tag=1,s=r0(null,s,l,t,a)):(s.tag=0,s=vf(null,s,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===te){s.tag=11,s=Zy(null,s,l,t,a);break e}else if(h===C){s.tag=14,s=Wy(null,s,l,t,a);break e}}throw s=Ee(l)||l,Error(i(306,s,""))}}return s;case 0:return vf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Wi(l,s.pendingProps),r0(t,s,l,h,a);case 3:e:{if(ae(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var f=s.memoizedState;h=f.element,$d(t,s),ml(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Os(s,Yt,l),l!==f.cache&&zd(s,[Yt],a,!0),fl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=s0(t,s,l,a);break e}else if(l!==h){h=Xn(Error(i(424)),s),al(h),s=s0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(It=cr(t.firstChild),Tn=s,it=!0,Ki=null,Dr=!0,a=By(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(il(),l===h){s=ls(t,s,a);break e}ln(t,s,l,a)}s=s.child}return s;case 26:return wc(t,s),t===null?(a=dv(s.type,null,s.pendingProps,null))?s.memoizedState=a:it||(a=s.type,t=s.pendingProps,l=Bc(me.current).createElement(a),l[Kt]=s,l[Lt]=t,cn(l,a,t),Ot(l),s.stateNode=l):s.memoizedState=dv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ve(s),t===null&&it&&(l=s.stateNode=uv(s.type,s.pendingProps,me.current),Tn=s,Dr=!0,h=It,$s(s.type)?(im=h,It=cr(l.firstChild)):It=h),ln(t,s,s.pendingProps.children,a),wc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&it&&((h=l=It)&&(l=AS(l,s.type,s.pendingProps,Dr),l!==null?(s.stateNode=l,Tn=s,It=cr(l.firstChild),Dr=!1,h=!0):h=!1),h||$i(s)),ve(s),h=s.type,f=s.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,tm(h,f)?l=null:b!==null&&tm(h,b)&&(s.flags|=32),s.memoizedState!==null&&(h=Jd(t,s,FT,null,null,a),Vl._currentValue=h),wc(t,s),ln(t,s,l,a),s.child;case 6:return t===null&&it&&((t=a=It)&&(a=RS(a,s.pendingProps,Dr),a!==null?(s.stateNode=a,Tn=s,It=null,t=!0):t=!1),t||$i(s)),null;case 13:return i0(t,s,a);case 4:return ae(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ha(s,null,l,a):ln(t,s,l,a),s.child;case 11:return Zy(t,s,s.type,s.pendingProps,a);case 7:return ln(t,s,s.pendingProps,a),s.child;case 8:return ln(t,s,s.pendingProps.children,a),s.child;case 12:return ln(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Os(s,s.type,l.value),ln(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Yi(s),h=mn(h),l=l(h),s.flags|=1,ln(t,s,l,a),s.child;case 14:return Wy(t,s,s.type,s.pendingProps,a);case 15:return Jy(t,s,s.type,s.pendingProps,a);case 19:return o0(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=Ac(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=ts(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return e0(t,s,a);case 24:return Yi(s),l=mn(Yt),t===null?(h=Fd(),h===null&&(h=vt,f=qd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),s.memoizedState={parent:l,cache:h},Kd(s),Os(s,Yt,h)):((t.lanes&a)!==0&&($d(t,s),ml(s,null,null,a),fl()),h=t.memoizedState,f=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Os(s,Yt,l)):(l=f.cache,Os(s,Yt,l),l!==h.cache&&zd(s,[Yt],a,!0))),ln(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function us(t){t.flags|=4}function u0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yv(s)){if(s=er.current,s!==null&&((tt&4194048)===tt?Or!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==Or))throw hl=Gd,Kg;t.flags|=8192}}function Rc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Lo():536870912,t.lanes|=s,$a|=s)}function bl(t,s){if(!it)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function wt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function JT(t,s,a){var l=s.pendingProps;switch(jd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return wt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),is(Yt),xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(sl(s)?us(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zg())),wt(s),null;case 26:return a=s.memoizedState,t===null?(us(s),a!==null?(wt(s),u0(s,a)):(wt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(us(s),wt(s),u0(s,a)):(wt(s),s.flags&=-16777217):(t.memoizedProps!==l&&us(s),wt(s),s.flags&=-16777217),null;case 27:Ae(s),a=me.current;var h=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&us(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return wt(s),null}t=J.current,sl(s)?Ug(s):(t=uv(h,l,a),s.stateNode=t,us(s))}return wt(s),null;case 5:if(Ae(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&us(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return wt(s),null}if(t=J.current,sl(s))Ug(s);else{switch(h=Bc(me.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Kt]=s,t[Lt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=t;e:switch(cn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&us(s)}}return wt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&us(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=me.current,sl(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=Tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Kt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||nv(t.nodeValue,a)),t||$i(s)}else t=Bc(t).createTextNode(l),t[Kt]=s,s.stateNode=t}return wt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=sl(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Kt]=s}else il(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),h=!1}else h=zg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(os(s),s):(os(s),null)}if(os(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Rc(s,s.updateQueue),wt(s),null;case 4:return xe(),t===null&&Xf(s.stateNode.containerInfo),wt(s),null;case 10:return is(s.type),wt(s),null;case 19:if(fe(Xt),h=s.memoizedState,h===null)return wt(s),null;if(l=(s.flags&128)!==0,f=h.rendering,f===null)if(l)bl(h,!1);else{if(Nt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(f=xc(t),f!==null){for(s.flags|=128,bl(h,!1),t=f.updateQueue,s.updateQueue=t,Rc(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)jg(a,t),a=a.sibling;return O(Xt,Xt.current&1|2),s.child}t=t.sibling}h.tail!==null&&_t()>Nc&&(s.flags|=128,l=!0,bl(h,!1),s.lanes=4194304)}else{if(!l)if(t=xc(f),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Rc(s,t),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!it)return wt(s),null}else 2*_t()-h.renderingStartTime>Nc&&a!==536870912&&(s.flags|=128,l=!0,bl(h,!1),s.lanes=4194304);h.isBackwards?(f.sibling=s.child,s.child=f):(t=h.last,t!==null?t.sibling=f:s.child=f,h.last=f)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=_t(),s.sibling=null,t=Xt.current,O(Xt,l?t&1|2:t&1),s):(wt(s),null);case 22:case 23:return os(s),Zd(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),a=s.updateQueue,a!==null&&Rc(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&fe(Xi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),is(Yt),wt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function eS(t,s){switch(jd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return is(Yt),xe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 13:if(os(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));il()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return fe(Xt),null;case 4:return xe(),null;case 10:return is(s.type),null;case 22:case 23:return os(s),Zd(),t!==null&&fe(Xi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return is(Yt),null;case 25:return null;default:return null}}function c0(t,s){switch(jd(s),s.tag){case 3:is(Yt),xe();break;case 26:case 27:case 5:Ae(s);break;case 4:xe();break;case 13:os(s);break;case 19:fe(Xt);break;case 10:is(s.type);break;case 22:case 23:os(s),Zd(),t!==null&&fe(Xi);break;case 24:is(Yt)}}function xl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){yt(s,s.return,T)}}function Us(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=s;var j=a,$=T;try{$()}catch(oe){yt(h,j,oe)}}}l=l.next}while(l!==f)}}catch(oe){yt(s,s.return,oe)}}function h0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Wg(s,a)}catch(l){yt(t,t.return,l)}}}function d0(t,s,a){a.props=Wi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){yt(t,s,l)}}function Tl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){yt(t,s,h)}}function Mr(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){yt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){yt(t,s,h)}else a.current=null}function f0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){yt(t,t.return,h)}}function Af(t,s,a){try{var l=t.stateNode;bS(l,t.type,a,s),l[Lt]=s}catch(h){yt(t,t.return,h)}}function m0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$s(t.type)||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Uc));else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Cf(t,s,a),t=t.sibling;t!==null;)Cf(t,s,a),t=t.sibling}function Cc(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cc(t,s,a),t=t.sibling;t!==null;)Cc(t,s,a),t=t.sibling}function p0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);cn(s,l,a),s[Kt]=t,s[Lt]=a}catch(f){yt(t,t.return,f)}}var cs=!1,kt=!1,If=!1,g0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function tS(t,s){if(t=t.containerInfo,Jf=Kc,t=Rg(t),Ad(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,j=-1,$=0,oe=0,ce=t,X=null;t:for(;;){for(var W;ce!==a||h!==0&&ce.nodeType!==3||(T=b+h),ce!==f||l!==0&&ce.nodeType!==3||(j=b+l),ce.nodeType===3&&(b+=ce.nodeValue.length),(W=ce.firstChild)!==null;)X=ce,ce=W;for(;;){if(ce===t)break t;if(X===a&&++$===h&&(T=b),X===f&&++oe===l&&(j=b),(W=ce.nextSibling)!==null)break;ce=X,X=ce.parentNode}ce=W}a=T===-1||j===-1?null:{start:T,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},Kc=!1,tn=s;tn!==null;)if(s=tn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,tn=t;else for(;tn!==null;){switch(s=tn,f=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=s,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ve=Wi(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ve,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ne){yt(a,a.return,Ne)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)rm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,tn=t;break}tn=s.return}}function y0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Bs(t,a),l&4&&xl(5,a);break;case 1:if(Bs(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(b){yt(a,a.return,b)}else{var h=Wi(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(a,a.return,b)}}l&64&&h0(a),l&512&&Tl(a,a.return);break;case 3:if(Bs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Wg(t,s)}catch(b){yt(a,a.return,b)}}break;case 27:s===null&&l&4&&p0(a);case 26:case 5:Bs(t,a),s===null&&l&4&&f0(a),l&512&&Tl(a,a.return);break;case 12:Bs(t,a);break;case 13:Bs(t,a),l&4&&E0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=cS.bind(null,a),CS(t,a))));break;case 22:if(l=a.memoizedState!==null||cs,!l){s=s!==null&&s.memoizedState!==null||kt,h=cs;var f=kt;cs=l,(kt=s)&&!f?zs(t,a,(a.subtreeFlags&8772)!==0):Bs(t,a),cs=h,kt=f}break;case 30:break;default:Bs(t,a)}}function v0(t){var s=t.alternate;s!==null&&(t.alternate=null,v0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Cs(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,In=!1;function hs(t,s,a){for(a=a.child;a!==null;)_0(t,s,a),a=a.sibling}function _0(t,s,a){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(ke,a)}catch{}switch(a.tag){case 26:kt||Mr(a,s),hs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Mr(a,s);var l=Tt,h=In;$s(a.type)&&(Tt=a.stateNode,In=!1),hs(t,s,a),Ol(a.stateNode),Tt=l,In=h;break;case 5:kt||Mr(a,s);case 6:if(l=Tt,h=In,Tt=null,hs(t,s,a),Tt=l,In=h,Tt!==null)if(In)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(f){yt(a,s,f)}else try{Tt.removeChild(a.stateNode)}catch(f){yt(a,s,f)}break;case 18:Tt!==null&&(In?(t=Tt,ov(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Bl(t)):ov(Tt,a.stateNode));break;case 4:l=Tt,h=In,Tt=a.stateNode.containerInfo,In=!0,hs(t,s,a),Tt=l,In=h;break;case 0:case 11:case 14:case 15:kt||Us(2,a,s),kt||Us(4,a,s),hs(t,s,a);break;case 1:kt||(Mr(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&d0(a,s,l)),hs(t,s,a);break;case 21:hs(t,s,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,hs(t,s,a),kt=l;break;default:hs(t,s,a)}}function E0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(a){yt(s,s.return,a)}}function nS(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new g0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new g0),s;default:throw Error(i(435,t.tag))}}function Nf(t,s){var a=nS(t);s.forEach(function(l){var h=hS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function jn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=s,T=b;e:for(;T!==null;){switch(T.tag){case 27:if($s(T.type)){Tt=T.stateNode,In=!1;break e}break;case 5:Tt=T.stateNode,In=!1;break e;case 3:case 4:Tt=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(Tt===null)throw Error(i(160));_0(f,b,h),Tt=null,In=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)b0(s,t),s=s.sibling}var ur=null;function b0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(s,t),Ln(t),l&4&&(Us(3,t,t.return),xl(3,t),Us(5,t,t.return));break;case 1:jn(s,t),Ln(t),l&512&&(kt||a===null||Mr(a,a.return)),l&64&&cs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ur;if(jn(s,t),Ln(t),l&512&&(kt||a===null||Mr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ri]||f[Kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),cn(f,l,a),f[Kt]=t,Ot(f),l=f;break e;case"link":var b=pv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;case"meta":if(b=pv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;default:throw Error(i(468,l))}f[Kt]=t,Ot(f),l=f}t.stateNode=l}else gv(h,t.type,t.stateNode);else t.stateNode=mv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?gv(h,t.type,t.stateNode):mv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(s,t),Ln(t),l&512&&(kt||a===null||Mr(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(s,t),Ln(t),l&512&&(kt||a===null||Mr(a,a.return)),t.flags&32){h=t.stateNode;try{Kn(h,"")}catch(W){yt(t,t.return,W)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Af(t,h,a!==null?a.memoizedProps:h)),l&1024&&(If=!0);break;case 6:if(jn(s,t),Ln(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(W){yt(t,t.return,W)}}break;case 3:if(Hc=null,h=ur,ur=zc(s.containerInfo),jn(s,t),ur=h,Ln(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Bl(s.containerInfo)}catch(W){yt(t,t.return,W)}If&&(If=!1,x0(t));break;case 4:l=ur,ur=zc(t.stateNode.containerInfo),jn(s,t),Ln(t),ur=l;break;case 12:jn(s,t),Ln(t);break;case 13:jn(s,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vf=_t()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nf(t,l)));break;case 22:h=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,$=cs,oe=kt;if(cs=$||h,kt=oe||j,jn(s,t),kt=oe,cs=$,Ln(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||j||cs||kt||Ji(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(f=j.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=j.stateNode;var ce=j.memoizedProps.style,X=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;T.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){yt(j,j.return,W)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(W){yt(j,j.return,W)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nf(t,a))));break;case 19:jn(s,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nf(t,l)));break;case 30:break;case 21:break;default:jn(s,t),Ln(t)}}function Ln(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(m0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,f=Rf(t);Cc(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(Kn(b,""),a.flags&=-33);var T=Rf(t);Cc(t,T,b);break;case 3:case 4:var j=a.stateNode.containerInfo,$=Rf(t);Cf(t,$,j);break;default:throw Error(i(161))}}catch(oe){yt(t,t.return,oe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function x0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;x0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Bs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)y0(t,s.alternate,s),s=s.sibling}function Ji(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Us(4,s,s.return),Ji(s);break;case 1:Mr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&d0(s,s.return,a),Ji(s);break;case 27:Ol(s.stateNode);case 26:case 5:Mr(s,s.return),Ji(s);break;case 22:s.memoizedState===null&&Ji(s);break;case 30:Ji(s);break;default:Ji(s)}t=t.sibling}}function zs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,f=s,b=f.flags;switch(f.tag){case 0:case 11:case 15:zs(h,f,a),xl(4,f);break;case 1:if(zs(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){yt(l,l.return,$)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)Zg(j[h],T)}catch($){yt(l,l.return,$)}}a&&b&64&&h0(f),Tl(f,f.return);break;case 27:p0(f);case 26:case 5:zs(h,f,a),a&&l===null&&b&4&&f0(f),Tl(f,f.return);break;case 12:zs(h,f,a);break;case 13:zs(h,f,a),a&&b&4&&E0(h,f);break;case 22:f.memoizedState===null&&zs(h,f,a),Tl(f,f.return);break;case 30:break;default:zs(h,f,a)}s=s.sibling}}function Df(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function Of(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ll(t))}function kr(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)T0(t,s,a,l),s=s.sibling}function T0(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:kr(t,s,a,l),h&2048&&xl(9,s);break;case 1:kr(t,s,a,l);break;case 3:kr(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ll(t)));break;case 12:if(h&2048){kr(t,s,a,l),t=s.stateNode;try{var f=s.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){yt(s,s.return,j)}}else kr(t,s,a,l);break;case 13:kr(t,s,a,l);break;case 23:break;case 22:f=s.stateNode,b=s.alternate,s.memoizedState!==null?f._visibility&2?kr(t,s,a,l):Sl(t,s):f._visibility&2?kr(t,s,a,l):(f._visibility|=2,Fa(t,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Df(b,s);break;case 24:kr(t,s,a,l),h&2048&&Of(s.alternate,s);break;default:kr(t,s,a,l)}}function Fa(t,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=t,b=s,T=a,j=l,$=b.flags;switch(b.tag){case 0:case 11:case 15:Fa(f,b,T,j,h),xl(8,b);break;case 23:break;case 22:var oe=b.stateNode;b.memoizedState!==null?oe._visibility&2?Fa(f,b,T,j,h):Sl(f,b):(oe._visibility|=2,Fa(f,b,T,j,h)),h&&$&2048&&Df(b.alternate,b);break;case 24:Fa(f,b,T,j,h),h&&$&2048&&Of(b.alternate,b);break;default:Fa(f,b,T,j,h)}s=s.sibling}}function Sl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:Sl(a,l),h&2048&&Df(l.alternate,l);break;case 24:Sl(a,l),h&2048&&Of(l.alternate,l);break;default:Sl(a,l)}s=s.sibling}}var wl=8192;function Ga(t){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)S0(t),t=t.sibling}function S0(t){switch(t.tag){case 26:Ga(t),t.flags&wl&&t.memoizedState!==null&&zS(ur,t.memoizedState,t.memoizedProps);break;case 5:Ga(t);break;case 3:case 4:var s=ur;ur=zc(t.stateNode.containerInfo),Ga(t),ur=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=wl,wl=16777216,Ga(t),wl=s):Ga(t));break;default:Ga(t)}}function w0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Al(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];tn=l,R0(l,t)}w0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)A0(t),t=t.sibling}function A0(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&Us(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ic(t)):Al(t);break;default:Al(t)}}function Ic(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];tn=l,R0(l,t)}w0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Us(8,s,s.return),Ic(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(s));break;default:Ic(s)}t=t.sibling}}function R0(t,s){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:Us(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,tn=l;else e:for(a=t;tn!==null;){l=tn;var h=l.sibling,f=l.return;if(v0(l),l===a){tn=null;break e}if(h!==null){h.return=f,tn=h;break e}tn=f}}}var rS={getCacheForType:function(t){var s=mn(Yt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},sS=typeof WeakMap=="function"?WeakMap:Map,lt=0,vt=null,Ke=null,tt=0,ut=0,Un=null,qs=!1,Ka=!1,Mf=!1,ds=0,Nt=0,Hs=0,ea=0,kf=0,tr=0,$a=0,Rl=null,Nn=null,Pf=!1,Vf=0,Nc=1/0,Dc=null,Fs=null,un=0,Gs=null,Qa=null,Ya=0,jf=0,Lf=null,C0=null,Cl=0,Uf=null;function Bn(){if((lt&2)!==0&&tt!==0)return tt&-tt;if(Q.T!==null){var t=Va;return t!==0?t:Kf()}return As()}function I0(){tr===0&&(tr=(tt&536870912)===0||it?jo():536870912);var t=er.current;return t!==null&&(t.flags|=32),tr}function zn(t,s,a){(t===vt&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),Ks(t,tt,tr,!1)),Fr(t,a),((lt&2)===0||t!==vt)&&(t===vt&&((lt&2)===0&&(ea|=a),Nt===4&&Ks(t,tt,tr,!1)),Pr(t))}function N0(t,s,a){if((lt&6)!==0)throw Error(i(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Ai(t,s),h=l?oS(t,s):qf(t,s,!0),f=l;do{if(h===0){Ka&&!l&&Ks(t,s,0,!1);break}else{if(a=t.current.alternate,f&&!iS(a)){h=qf(t,s,!1),f=!1;continue}if(h===2){if(f=s,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var T=t;h=Rl;var j=T.current.memoizedState.isDehydrated;if(j&&(Xa(T,b).flags|=256),b=qf(T,b,!1),b!==2){if(Mf&&!j){T.errorRecoveryDisabledLanes|=f,ea|=f,h=4;break e}f=Nn,Nn=h,f!==null&&(Nn===null?Nn=f:Nn.push.apply(Nn,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Xa(t,0),Ks(t,s,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ks(l,s,tr,!qs);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Vf+300-_t(),10<h)){if(Ks(l,s,tr,!qs),fa(l,0,!0)!==0)break e;l.timeoutHandle=iv(D0.bind(null,l,a,Nn,Dc,Pf,s,tr,ea,$a,qs,f,2,-0,0),h);break e}D0(l,a,Nn,Dc,Pf,s,tr,ea,$a,qs,f,0,-0,0)}}break}while(!0);Pr(t)}function D0(t,s,a,l,h,f,b,T,j,$,oe,ce,X,W){if(t.timeoutHandle=-1,ce=s.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:BS},S0(s),ce=qS(),ce!==null)){t.cancelPendingCommit=ce(L0.bind(null,t,s,f,a,l,h,b,T,j,oe,1,X,W)),Ks(t,f,b,!$);return}L0(t,s,f,a,l,h,b,T,j)}function iS(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Pn(f(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(t,s,a,l){s&=~kf,s&=~ea,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var f=31-gt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&Er(t,a,s)}function Oc(){return(lt&6)===0?(Il(0),!1):!0}function Bf(){if(Ke!==null){if(ut===0)var t=Ke.return;else t=Ke,ss=Qi=null,nf(t),qa=null,_l=0,t=Ke;for(;t!==null;)c0(t.alternate,t),t=t.return;Ke=null}}function Xa(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,TS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Bf(),vt=t,Ke=a=ts(t.current,null),tt=s,ut=0,Un=null,qs=!1,Ka=Ai(t,s),Mf=!1,$a=tr=kf=ea=Hs=Nt=0,Nn=Rl=null,Pf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-gt(l),f=1<<h;s|=t[h],l&=~f}return ds=s,ec(),a}function O0(t,s){qe=null,Q.H=_c,s===cl||s===uc?(s=Yg(),ut=3):s===Kg?(s=Yg(),ut=4):ut=s===Xy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Un=s,Ke===null&&(Nt=1,Sc(t,Xn(s,t.current)))}function M0(){var t=Q.H;return Q.H=_c,t===null?_c:t}function k0(){var t=Q.A;return Q.A=rS,t}function zf(){Nt=4,qs||(tt&4194048)!==tt&&er.current!==null||(Ka=!0),(Hs&134217727)===0&&(ea&134217727)===0||vt===null||Ks(vt,tt,tr,!1)}function qf(t,s,a){var l=lt;lt|=2;var h=M0(),f=k0();(vt!==t||tt!==s)&&(Dc=null,Xa(t,s)),s=!1;var b=Nt;e:do try{if(ut!==0&&Ke!==null){var T=Ke,j=Un;switch(ut){case 8:Bf(),b=6;break e;case 3:case 2:case 9:case 6:er.current===null&&(s=!0);var $=ut;if(ut=0,Un=null,Za(t,T,j,$),a&&Ka){b=0;break e}break;default:$=ut,ut=0,Un=null,Za(t,T,j,$)}}aS(),b=Nt;break}catch(oe){O0(t,oe)}while(!0);return s&&t.shellSuspendCounter++,ss=Qi=null,lt=l,Q.H=h,Q.A=f,Ke===null&&(vt=null,tt=0,ec()),b}function aS(){for(;Ke!==null;)P0(Ke)}function oS(t,s){var a=lt;lt|=2;var l=M0(),h=k0();vt!==t||tt!==s?(Dc=null,Nc=_t()+500,Xa(t,s)):Ka=Ai(t,s);e:do try{if(ut!==0&&Ke!==null){s=Ke;var f=Un;t:switch(ut){case 1:ut=0,Un=null,Za(t,s,f,1);break;case 2:case 9:if($g(f)){ut=0,Un=null,V0(s);break}s=function(){ut!==2&&ut!==9||vt!==t||(ut=7),Pr(t)},f.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:$g(f)?(ut=0,Un=null,V0(s)):(ut=0,Un=null,Za(t,s,f,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var T=Ke;if(!b||yv(b)){ut=0,Un=null;var j=T.sibling;if(j!==null)Ke=j;else{var $=T.return;$!==null?(Ke=$,Mc($)):Ke=null}break t}}ut=0,Un=null,Za(t,s,f,5);break;case 6:ut=0,Un=null,Za(t,s,f,6);break;case 8:Bf(),Nt=6;break e;default:throw Error(i(462))}}lS();break}catch(oe){O0(t,oe)}while(!0);return ss=Qi=null,Q.H=l,Q.A=h,lt=a,Ke!==null?0:(vt=null,tt=0,ec(),Nt)}function lS(){for(;Ke!==null&&!Vt();)P0(Ke)}function P0(t){var s=l0(t.alternate,t,ds);t.memoizedProps=t.pendingProps,s===null?Mc(t):Ke=s}function V0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=n0(a,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=n0(a,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:nf(s);default:c0(a,s),s=Ke=jg(s,ds),s=l0(a,s,ds)}t.memoizedProps=t.pendingProps,s===null?Mc(t):Ke=s}function Za(t,s,a,l){ss=Qi=null,nf(s),qa=null,_l=0;var h=s.return;try{if(ZT(t,h,s,a,tt)){Nt=1,Sc(t,Xn(a,t.current)),Ke=null;return}}catch(f){if(h!==null)throw Ke=h,f;Nt=1,Sc(t,Xn(a,t.current)),Ke=null;return}s.flags&32768?(it||l===1?t=!0:Ka||(tt&536870912)!==0?t=!1:(qs=t=!0,(l===2||l===9||l===3||l===6)&&(l=er.current,l!==null&&l.tag===13&&(l.flags|=16384))),j0(s,t)):Mc(s)}function Mc(t){var s=t;do{if((s.flags&32768)!==0){j0(s,qs);return}t=s.return;var a=JT(s.alternate,s,ds);if(a!==null){Ke=a;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=t}while(s!==null);Nt===0&&(Nt=5)}function j0(t,s){do{var a=eS(t.alternate,t);if(a!==null){a.flags&=32767,Ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=a}while(t!==null);Nt=6,Ke=null}function L0(t,s,a,l,h,f,b,T,j){t.cancelPendingCommit=null;do kc();while(un!==0);if((lt&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(f=s.lanes|s.childLanes,f|=Dd,Uo(t,a,f,b,T,j),t===vt&&(Ke=vt=null,tt=0),Qa=s,Gs=t,Ya=a,jf=f,Lf=h,C0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dS(Gt,function(){return H0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ee.p,ee.p=2,b=lt,lt|=4;try{tS(t,s,a)}finally{lt=b,ee.p=h,Q.T=l}}un=1,U0(),B0(),z0()}}function U0(){if(un===1){un=0;var t=Gs,s=Qa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ee.p;ee.p=2;var h=lt;lt|=4;try{b0(s,t);var f=em,b=Rg(t.containerInfo),T=f.focusedElem,j=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&Ag(T.ownerDocument.documentElement,T)){if(j!==null&&Ad(T)){var $=j.start,oe=j.end;if(oe===void 0&&(oe=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(oe,T.value.length);else{var ce=T.ownerDocument||document,X=ce&&ce.defaultView||window;if(X.getSelection){var W=X.getSelection(),Ve=T.textContent.length,Ne=Math.min(j.start,Ve),pt=j.end===void 0?Ne:Math.min(j.end,Ve);!W.extend&&Ne>pt&&(b=pt,pt=Ne,Ne=b);var F=wg(T,Ne),q=wg(T,pt);if(F&&q&&(W.rangeCount!==1||W.anchorNode!==F.node||W.anchorOffset!==F.offset||W.focusNode!==q.node||W.focusOffset!==q.offset)){var K=ce.createRange();K.setStart(F.node,F.offset),W.removeAllRanges(),Ne>pt?(W.addRange(K),W.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),W.addRange(K))}}}}for(ce=[],W=T;W=W.parentNode;)W.nodeType===1&&ce.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ce.length;T++){var ue=ce[T];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Kc=!!Jf,em=Jf=null}finally{lt=h,ee.p=l,Q.T=a}}t.current=s,un=2}}function B0(){if(un===2){un=0;var t=Gs,s=Qa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ee.p;ee.p=2;var h=lt;lt|=4;try{y0(t,s.alternate,s)}finally{lt=h,ee.p=l,Q.T=a}}un=3}}function z0(){if(un===4||un===3){un=0,Fe();var t=Gs,s=Qa,a=Ya,l=C0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Qa=Gs=null,q0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Fs=null),ma(a),s=s.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(ke,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,h=ee.p,ee.p=2,Q.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{Q.T=s,ee.p=h}}(Ya&3)!==0&&kc(),Pr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Uf?Cl++:(Cl=0,Uf=t):Cl=0,Il(0)}}function q0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ll(s)))}function kc(t){return U0(),B0(),z0(),H0()}function H0(){if(un!==5)return!1;var t=Gs,s=jf;jf=0;var a=ma(Ya),l=Q.T,h=ee.p;try{ee.p=32>a?32:a,Q.T=null,a=Lf,Lf=null;var f=Gs,b=Ya;if(un=0,Qa=Gs=null,Ya=0,(lt&6)!==0)throw Error(i(331));var T=lt;if(lt|=4,A0(f.current),T0(f,f.current,b,a),lt=T,Il(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(ke,f)}catch{}return!0}finally{ee.p=h,Q.T=l,q0(t,s)}}function F0(t,s,a){s=Xn(a,s),s=yf(t.stateNode,s,2),t=Ps(t,s,2),t!==null&&(Fr(t,2),Pr(t))}function yt(t,s,a){if(t.tag===3)F0(t,t,a);else for(;s!==null;){if(s.tag===3){F0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fs===null||!Fs.has(l))){t=Xn(a,t),a=Qy(2),l=Ps(s,a,2),l!==null&&(Yy(a,l,s,t),Fr(l,2),Pr(l));break}}s=s.return}}function Hf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new sS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Mf=!0,h.add(a),t=uS.bind(null,t,s,a),s.then(t,t))}function uS(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,vt===t&&(tt&a)===a&&(Nt===4||Nt===3&&(tt&62914560)===tt&&300>_t()-Vf?(lt&2)===0&&Xa(t,0):kf|=a,$a===tt&&($a=0)),Pr(t)}function G0(t,s){s===0&&(s=Lo()),t=Oa(t,s),t!==null&&(Fr(t,s),Pr(t))}function cS(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),G0(t,a)}function hS(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),G0(t,a)}function dS(t,s){return Ie(t,s)}var Pc=null,Wa=null,Ff=!1,Vc=!1,Gf=!1,ta=0;function Pr(t){t!==Wa&&t.next===null&&(Wa===null?Pc=Wa=t:Wa=Wa.next=t),Vc=!0,Ff||(Ff=!0,mS())}function Il(t,s){if(!Gf&&Vc){Gf=!0;do for(var a=!1,l=Pc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-gt(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Y0(l,f))}else f=tt,f=fa(l,l===vt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ai(l,f)||(a=!0,Y0(l,f));l=l.next}while(a);Gf=!1}}function fS(){K0()}function K0(){Vc=Ff=!1;var t=0;ta!==0&&(xS()&&(t=ta),ta=0);for(var s=_t(),a=null,l=Pc;l!==null;){var h=l.next,f=$0(l,s);f===0?(l.next=null,a===null?Pc=h:a.next=h,h===null&&(Wa=a)):(a=l,(t!==0||(f&3)!==0)&&(Vc=!0)),l=h}Il(t)}function $0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-gt(f),T=1<<b,j=h[b];j===-1?((T&a)===0||(T&l)!==0)&&(h[b]=Vo(T,s)):j<=s&&(t.expiredLanes|=T),f&=~T}if(s=vt,a=tt,a=fa(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Rt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ai(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Rt(l),ma(a)){case 2:case 8:a=Ct;break;case 32:a=Gt;break;case 268435456:a=Dt;break;default:a=Gt}return l=Q0.bind(null,t),a=Ie(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Rt(l),t.callbackPriority=2,t.callbackNode=null,2}function Q0(t,s){if(un!==0&&un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(kc()&&t.callbackNode!==a)return null;var l=tt;return l=fa(t,t===vt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(N0(t,l,s),$0(t,_t()),t.callbackNode!=null&&t.callbackNode===a?Q0.bind(null,t):null)}function Y0(t,s){if(kc())return null;N0(t,s,!0)}function mS(){SS(function(){(lt&6)!==0?Ie(jt,fS):K0()})}function Kf(){return ta===0&&(ta=jo()),ta}function X0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ea(""+t)}function Z0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function pS(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var f=X0((h[Lt]||null).action),b=l.submitter;b&&(s=(s=b[Lt]||null)?X0(s.formAction):b.getAttribute("formAction"),s!==null&&(f=s,b=null));var T=new ba("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ta!==0){var j=b?Z0(h,b):new FormData(h);df(a,{pending:!0,data:j,method:h.method,action:f},null,j)}}else typeof f=="function"&&(T.preventDefault(),j=b?Z0(h,b):new FormData(h),df(a,{pending:!0,data:j,method:h.method,action:f},f,j))},currentTarget:h}]})}}for(var $f=0;$f<Nd.length;$f++){var Qf=Nd[$f],gS=Qf.toLowerCase(),yS=Qf[0].toUpperCase()+Qf.slice(1);lr(gS,"on"+yS)}lr(Ng,"onAnimationEnd"),lr(Dg,"onAnimationIteration"),lr(Og,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(kT,"onTransitionRun"),lr(PT,"onTransitionStart"),lr(VT,"onTransitionCancel"),lr(Mg,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function W0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(s)for(var b=l.length-1;0<=b;b--){var T=l[b],j=T.instance,$=T.currentTarget;if(T=T.listener,j!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(oe){Tc(oe)}h.currentTarget=null,f=j}else for(b=0;b<l.length;b++){if(T=l[b],j=T.instance,$=T.currentTarget,T=T.listener,j!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(oe){Tc(oe)}h.currentTarget=null,f=j}}}}function $e(t,s){var a=s[zo];a===void 0&&(a=s[zo]=new Set);var l=t+"__bubble";a.has(l)||(J0(s,t,2,!1),a.add(l))}function Yf(t,s,a){var l=0;s&&(l|=4),J0(a,t,l,s)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[jc]){t[jc]=!0,qo.forEach(function(a){a!=="selectionchange"&&(vS.has(a)||Yf(a,!1,t),Yf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[jc]||(s[jc]=!0,Yf("selectionchange",!1,s))}}function J0(t,s,a,l){switch(Tv(s)){case 2:var h=GS;break;case 8:h=KS;break;default:h=cm}a=h.bind(null,s,a,t),h=void 0,!Qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Zf(t,s,a,l,h){var f=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var j=b.tag;if((j===3||j===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=Gr(T),b===null)return;if(j=b.tag,j===5||j===6||j===26||j===27){l=f=b;continue e}T=T.parentNode}}l=l.return}Uu(function(){var $=f,oe=$n(a),ce=[];e:{var X=kg.get(t);if(X!==void 0){var W=ba,Ve=t;switch(t){case"keypress":if(Ar(a)===0)break e;case"keydown":case"keyup":W=Ra;break;case"focusin":Ve="focus",W=Sa;break;case"focusout":Ve="blur",W=Sa;break;case"beforeblur":case"afterblur":W=Sa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=$u;break;case Ng:case Dg:case Og:W=wa;break;case Mg:W=Yu;break;case"scroll":case"scrollend":W=Bu;break;case"wheel":W=Ca;break;case"copy":case"cut":case"paste":W=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=el;break;case"toggle":case"beforetoggle":W=Zu}var Ne=(s&4)!==0,pt=!Ne&&(t==="scroll"||t==="scrollend"),F=Ne?X!==null?X+"Capture":null:X;Ne=[];for(var q=$,K;q!==null;){var ue=q;if(K=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||K===null||F===null||(ue=ki(q,F),ue!=null&&Ne.push(Dl(q,ue,K))),pt)break;q=q.return}0<Ne.length&&(X=new W(X,Ve,null,a,oe),ce.push({event:X,listeners:Ne}))}}if((s&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",X&&a!==Yr&&(Ve=a.relatedTarget||a.fromElement)&&(Gr(Ve)||Ve[Gn]))break e;if((W||X)&&(X=oe.window===oe?oe:(X=oe.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Ve=a.relatedTarget||a.toElement,W=$,Ve=Ve?Gr(Ve):null,Ve!==null&&(pt=u(Ve),Ne=Ve.tag,Ve!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(Ve=null)):(W=null,Ve=$),W!==Ve)){if(Ne=Yn,ue="onMouseLeave",F="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(Ne=el,ue="onPointerLeave",F="onPointerEnter",q="pointer"),pt=W==null?X:xr(W),K=Ve==null?X:xr(Ve),X=new Ne(ue,q+"leave",W,a,oe),X.target=pt,X.relatedTarget=K,ue=null,Gr(oe)===$&&(Ne=new Ne(F,q+"enter",Ve,a,oe),Ne.target=K,Ne.relatedTarget=pt,ue=Ne),pt=ue,W&&Ve)t:{for(Ne=W,F=Ve,q=0,K=Ne;K;K=Ja(K))q++;for(K=0,ue=F;ue;ue=Ja(ue))K++;for(;0<q-K;)Ne=Ja(Ne),q--;for(;0<K-q;)F=Ja(F),K--;for(;q--;){if(Ne===F||F!==null&&Ne===F.alternate)break t;Ne=Ja(Ne),F=Ja(F)}Ne=null}else Ne=null;W!==null&&ev(ce,X,W,Ne,!1),Ve!==null&&pt!==null&&ev(ce,pt,Ve,Ne,!0)}}e:{if(X=$?xr($):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var we=_g;else if(Qt(X))if(Eg)we=DT;else{we=IT;var Ge=CT}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&$o($.elementType)&&(we=_g):we=NT;if(we&&(we=we(t,$))){es(ce,we,a,oe);break e}Ge&&Ge(t,X,$),t==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&Ns(X,"number",X.value)}switch(Ge=$?xr($):window,t){case"focusin":(Qt(Ge)||Ge.contentEditable==="true")&&(Ia=Ge,Rd=$,rl=null);break;case"focusout":rl=Rd=Ia=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Cg(ce,a,oe);break;case"selectionchange":if(MT)break;case"keydown":case"keyup":Cg(ce,a,oe)}var Re;if(Ir)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Je?ne(t,a)&&(De="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(E&&a.locale!=="ko"&&(Je||De!=="onCompositionStart"?De==="onCompositionEnd"&&Je&&(Re=Yo()):(wr=oe,Ds="value"in wr?wr.value:wr.textContent,Je=!0)),Ge=Lc($,De),0<Ge.length&&(De=new Wo(De,t,null,a,oe),ce.push({event:De,listeners:Ge}),Re?De.data=Re:(Re=_e(a),Re!==null&&(De.data=Re)))),(Re=v?$t(t,a):et(t,a))&&(De=Lc($,"onBeforeInput"),0<De.length&&(Ge=new Wo("onBeforeInput","beforeinput",null,a,oe),ce.push({event:Ge,listeners:De}),Ge.data=Re)),pS(ce,t,$,a,oe)}W0(ce,s)})}function Dl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Lc(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ki(t,a),h!=null&&l.unshift(Dl(t,h,f)),h=ki(t,s),h!=null&&l.push(Dl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Ja(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ev(t,s,a,l,h){for(var f=s._reactName,b=[];a!==null&&a!==l;){var T=a,j=T.alternate,$=T.stateNode;if(T=T.tag,j!==null&&j===l)break;T!==5&&T!==26&&T!==27||$===null||(j=$,h?($=ki(a,f),$!=null&&b.unshift(Dl(a,$,j))):h||($=ki(a,f),$!=null&&b.push(Dl(a,$,j)))),a=a.return}b.length!==0&&t.push({event:s,listeners:b})}var _S=/\r\n?/g,ES=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(_S,`
`).replace(ES,"")}function nv(t,s){return s=tv(s),tv(t)===s}function Uc(){}function mt(t,s,a,l,h,f){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Kn(t,""+l);break;case"className":Tr(t,"class",l);break;case"tabIndex":Tr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(t,a,l);break;case"style":Ko(t,l,f);break;case"data":if(s!=="object"){Tr(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ea(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&mt(t,s,"name",h.name,h,null),mt(t,s,"formEncType",h.formEncType,h,null),mt(t,s,"formMethod",h.formMethod,h,null),mt(t,s,"formTarget",h.formTarget,h,null)):(mt(t,s,"encType",h.encType,h,null),mt(t,s,"method",h.method,h,null),mt(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ea(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ea(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":$e("beforetoggle",t),$e("toggle",t),Is(t,"popover",l);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Is(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ed.get(a)||a,Is(t,a,l))}}function Wf(t,s,a,l,h,f){switch(a){case"style":Ko(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&Kn(t,""+l);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),f=t[Lt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(s,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Is(t,a,l)}}}function cn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:mt(t,s,f,b,a,null)}}h&&mt(t,s,"srcSet",a.srcSet,a,null),l&&mt(t,s,"src",a.src,a,null);return;case"input":$e("invalid",t);var T=f=b=h=null,j=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":h=oe;break;case"type":b=oe;break;case"checked":j=oe;break;case"defaultChecked":$=oe;break;case"value":f=oe;break;case"defaultValue":T=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:mt(t,s,l,oe,a,null)}}Di(t,f,T,j,$,b,h,!1),_a(t);return;case"select":$e("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:mt(t,s,h,T,a,null)}s=f,a=b,t.multiple=!!l,s!=null?Qr(t,!!l,s,!1):a!=null&&Qr(t,!!l,a,!0);return;case"textarea":$e("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:mt(t,s,b,T,a,null)}Oi(t,l,h,f),_a(t);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:mt(t,s,j,l,a,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)$e(Nl[l],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:mt(t,s,$,l,a,null)}return;default:if($o(s)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&Wf(t,s,oe,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&mt(t,s,T,l,a,null))}function bS(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,j=null,$=null,oe=null;for(W in a){var ce=a[W];if(a.hasOwnProperty(W)&&ce!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=ce;default:l.hasOwnProperty(W)||mt(t,s,W,null,l,ce)}}for(var X in l){var W=l[X];if(ce=a[X],l.hasOwnProperty(X)&&(W!=null||ce!=null))switch(X){case"type":f=W;break;case"name":h=W;break;case"checked":$=W;break;case"defaultChecked":oe=W;break;case"value":b=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ce&&mt(t,s,X,W,l,ce)}}kn(t,b,T,j,$,oe,f,h);return;case"select":W=b=T=X=null;for(f in a)if(j=a[f],a.hasOwnProperty(f)&&j!=null)switch(f){case"value":break;case"multiple":W=j;default:l.hasOwnProperty(f)||mt(t,s,f,null,l,j)}for(h in l)if(f=l[h],j=a[h],l.hasOwnProperty(h)&&(f!=null||j!=null))switch(h){case"value":X=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==j&&mt(t,s,h,f,l,j)}s=T,a=b,l=W,X!=null?Qr(t,!!a,X,!1):!!l!=!!a&&(s!=null?Qr(t,!!a,s,!0):Qr(t,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:mt(t,s,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":X=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&mt(t,s,b,h,l,f)}dt(t,X,W);return;case"option":for(var Ve in a)if(X=a[Ve],a.hasOwnProperty(Ve)&&X!=null&&!l.hasOwnProperty(Ve))switch(Ve){case"selected":t.selected=!1;break;default:mt(t,s,Ve,null,l,X)}for(j in l)if(X=l[j],W=a[j],l.hasOwnProperty(j)&&X!==W&&(X!=null||W!=null))switch(j){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:mt(t,s,j,X,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)X=a[Ne],a.hasOwnProperty(Ne)&&X!=null&&!l.hasOwnProperty(Ne)&&mt(t,s,Ne,null,l,X);for($ in l)if(X=l[$],W=a[$],l.hasOwnProperty($)&&X!==W&&(X!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:mt(t,s,$,X,l,W)}return;default:if($o(s)){for(var pt in a)X=a[pt],a.hasOwnProperty(pt)&&X!==void 0&&!l.hasOwnProperty(pt)&&Wf(t,s,pt,void 0,l,X);for(oe in l)X=l[oe],W=a[oe],!l.hasOwnProperty(oe)||X===W||X===void 0&&W===void 0||Wf(t,s,oe,X,l,W);return}}for(var F in a)X=a[F],a.hasOwnProperty(F)&&X!=null&&!l.hasOwnProperty(F)&&mt(t,s,F,null,l,X);for(ce in l)X=l[ce],W=a[ce],!l.hasOwnProperty(ce)||X===W||X==null&&W==null||mt(t,s,ce,X,l,W)}var Jf=null,em=null;function Bc(t){return t.nodeType===9?t:t.ownerDocument}function rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function tm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nm=null;function xS(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var iv=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,SS=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(t){return av.resolve(null).then(t).catch(wS)}:iv;function wS(t){setTimeout(function(){throw t})}function $s(t){return t==="head"}function ov(t,s){var a=s,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Ol(b.documentElement),a&2&&Ol(b.body),a&4)for(a=b.head,Ol(a),b=a.firstChild;b;){var T=b.nextSibling,j=b.nodeName;b[Ri]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),Bl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Bl(s)}function rm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rm(a),Cs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function AS(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ri])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=cr(t.nextSibling),t===null)break}return null}function RS(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=cr(t.nextSibling),t===null))return null;return t}function sm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function CS(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function cr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var im=null;function lv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function uv(t,s,a){switch(s=Bc(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ol(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Cs(t)}var nr=new Map,cv=new Set;function zc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fs=ee.d;ee.d={f:IS,r:NS,D:DS,C:OS,L:MS,m:kS,X:VS,S:PS,M:jS};function IS(){var t=fs.f(),s=Oc();return t||s}function NS(t){var s=br(t);s!==null&&s.tag===5&&s.type==="form"?Ny(s):fs.r(t)}var eo=typeof document>"u"?null:document;function hv(t,s,a){var l=eo;if(l&&typeof s=="string"&&s){var h=Ut(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),cv.has(h)||(cv.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),cn(s,"link",t),Ot(s),l.head.appendChild(s)))}}function DS(t){fs.D(t),hv("dns-prefetch",t,null)}function OS(t,s){fs.C(t,s),hv("preconnect",t,s)}function MS(t,s,a){fs.L(t,s,a);var l=eo;if(l&&t&&s){var h='link[rel="preload"][as="'+Ut(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ut(a.imageSizes)+'"]')):h+='[href="'+Ut(t)+'"]';var f=h;switch(s){case"style":f=to(t);break;case"script":f=no(t)}nr.has(f)||(t=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),nr.set(f,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(Ml(f))||s==="script"&&l.querySelector(kl(f))||(s=l.createElement("link"),cn(s,"link",t),Ot(s),l.head.appendChild(s)))}}function kS(t,s){fs.m(t,s);var a=eo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Ut(l)+'"][href="'+Ut(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=no(t)}if(!nr.has(f)&&(t=_({rel:"modulepreload",href:t},s),nr.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(f)))return}l=a.createElement("link"),cn(l,"link",t),Ot(l),a.head.appendChild(l)}}}function PS(t,s,a){fs.S(t,s,a);var l=eo;if(l&&t){var h=En(l).hoistableStyles,f=to(t);s=s||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(Ml(f)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},a),(a=nr.get(f))&&am(t,a);var j=b=l.createElement("link");Ot(j),cn(j,"link",t),j._p=new Promise(function($,oe){j.onload=$,j.onerror=oe}),j.addEventListener("load",function(){T.loading|=1}),j.addEventListener("error",function(){T.loading|=2}),T.loading|=4,qc(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function VS(t,s){fs.X(t,s);var a=eo;if(a&&t){var l=En(a).hoistableScripts,h=no(t),f=l.get(h);f||(f=a.querySelector(kl(h)),f||(t=_({src:t,async:!0},s),(s=nr.get(h))&&om(t,s),f=a.createElement("script"),Ot(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function jS(t,s){fs.M(t,s);var a=eo;if(a&&t){var l=En(a).hoistableScripts,h=no(t),f=l.get(h);f||(f=a.querySelector(kl(h)),f||(t=_({src:t,async:!0,type:"module"},s),(s=nr.get(h))&&om(t,s),f=a.createElement("script"),Ot(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function dv(t,s,a,l){var h=(h=me.current)?zc(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=to(a.href),a=En(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=to(a.href);var f=En(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(Ml(t)))&&!f._p&&(b.instance=f,b.state.loading=5),nr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},nr.set(t,a),f||LS(h,t,a,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=no(a),a=En(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function to(t){return'href="'+Ut(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function fv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function LS(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),cn(s,"link",a),Ot(s),t.head.appendChild(s))}function no(t){return'[src="'+Ut(t)+'"]'}function kl(t){return"script[async]"+t}function mv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Ut(a.href)+'"]');if(l)return s.instance=l,Ot(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ot(l),cn(l,"style",h),qc(l,a.precedence,t),s.instance=l;case"stylesheet":h=to(a.href);var f=t.querySelector(Ml(h));if(f)return s.state.loading|=4,s.instance=f,Ot(f),f;l=fv(a),(h=nr.get(h))&&am(l,h),f=(t.ownerDocument||t).createElement("link"),Ot(f);var b=f;return b._p=new Promise(function(T,j){b.onload=T,b.onerror=j}),cn(f,"link",l),s.state.loading|=4,qc(f,a.precedence,t),s.instance=f;case"script":return f=no(a.src),(h=t.querySelector(kl(f)))?(s.instance=h,Ot(h),h):(l=a,(h=nr.get(f))&&(l=_({},a),om(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ot(h),cn(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,qc(l,a.precedence,t));return s.instance}function qc(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===s)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function am(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function om(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Hc=null;function pv(t,s,a){if(Hc===null){var l=new Map,h=Hc=new Map;h.set(a,l)}else h=Hc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ri]||f[Kt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(s)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function gv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function US(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function yv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function BS(){}function zS(t,s,a){if(Pl===null)throw Error(i(475));var l=Pl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=to(a.href),f=t.querySelector(Ml(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Fc.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=f,Ot(f);return}f=t.ownerDocument||t,a=fv(a),(h=nr.get(h))&&am(a,h),f=f.createElement("link"),Ot(f);var b=f;b._p=new Promise(function(T,j){b.onload=T,b.onerror=j}),cn(f,"link",a),s.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Fc.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function qS(){if(Pl===null)throw Error(i(475));var t=Pl;return t.stylesheets&&t.count===0&&lm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Fc(){if(this.count--,this.count===0){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Gc=null;function lm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Gc=new Map,s.forEach(HS,t),Gc=null,Fc.call(t))}function HS(t,s){if(!(s.state.loading&4)){var a=Gc.get(t);if(a)var l=a.get(null);else{a=new Map,Gc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=s.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=Fc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Vl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function FS(t,s,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function vv(t,s,a,l,h,f,b,T,j,$,oe,ce){return t=new FS(t,s,a,b,T,j,$,ce),s=1,f===!0&&(s|=24),f=Vn(3,null,null,s),t.current=f,f.stateNode=t,s=qd(),s.refCount++,t.pooledCache=s,s.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:s},Kd(f),t}function _v(t){return t?(t=Ma,t):Ma}function Ev(t,s,a,l,h,f){h=_v(h),l.context===null?l.context=h:l.pendingContext=h,l=ks(s),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ps(t,l,s),a!==null&&(zn(a,t,s),dl(a,t,s))}function bv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function um(t,s){bv(t,s),(t=t.alternate)&&bv(t,s)}function xv(t){if(t.tag===13){var s=Oa(t,67108864);s!==null&&zn(s,t,67108864),um(t,67108864)}}var Kc=!0;function GS(t,s,a,l){var h=Q.T;Q.T=null;var f=ee.p;try{ee.p=2,cm(t,s,a,l)}finally{ee.p=f,Q.T=h}}function KS(t,s,a,l){var h=Q.T;Q.T=null;var f=ee.p;try{ee.p=8,cm(t,s,a,l)}finally{ee.p=f,Q.T=h}}function cm(t,s,a,l){if(Kc){var h=hm(l);if(h===null)Zf(t,s,l,$c,a),Sv(t,l);else if(QS(h,t,s,a,l))l.stopPropagation();else if(Sv(t,l),s&4&&-1<$S.indexOf(t)){for(;h!==null;){var f=br(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=ir(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var j=1<<31-gt(b);T.entanglements[1]|=j,b&=~j}Pr(f),(lt&6)===0&&(Nc=_t()+500,Il(0))}}break;case 13:T=Oa(f,2),T!==null&&zn(T,f,2),Oc(),um(f,2)}if(f=hm(l),f===null&&Zf(t,s,l,$c,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Zf(t,s,l,null,a)}}function hm(t){return t=$n(t),dm(t)}var $c=null;function dm(t){if($c=null,t=Gr(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return $c=t,null}function Tv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ht()){case jt:return 2;case Ct:return 8;case Gt:case vr:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var fm=!1,Qs=null,Ys=null,Xs=null,jl=new Map,Ll=new Map,Zs=[],$S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sv(t,s){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":jl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(s.pointerId)}}function Ul(t,s,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},s!==null&&(s=br(s),s!==null&&xv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function QS(t,s,a,l,h){switch(s){case"focusin":return Qs=Ul(Qs,t,s,a,l,h),!0;case"dragenter":return Ys=Ul(Ys,t,s,a,l,h),!0;case"mouseover":return Xs=Ul(Xs,t,s,a,l,h),!0;case"pointerover":var f=h.pointerId;return jl.set(f,Ul(jl.get(f)||null,t,s,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Ll.set(f,Ul(Ll.get(f)||null,t,s,a,l,h)),!0}return!1}function wv(t){var s=Gr(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,Ou(t.priority,function(){if(a.tag===13){var l=Bn();l=ws(l);var h=Oa(a,l);h!==null&&zn(h,a,l),um(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Yr=l,a.target.dispatchEvent(l),Yr=null}else return s=br(a),s!==null&&xv(s),t.blockedOn=a,!1;s.shift()}return!0}function Av(t,s,a){Qc(t)&&a.delete(s)}function YS(){fm=!1,Qs!==null&&Qc(Qs)&&(Qs=null),Ys!==null&&Qc(Ys)&&(Ys=null),Xs!==null&&Qc(Xs)&&(Xs=null),jl.forEach(Av),Ll.forEach(Av)}function Yc(t,s){t.blockedOn===s&&(t.blockedOn=null,fm||(fm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,YS)))}var Xc=null;function Rv(t){Xc!==t&&(Xc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Xc===t&&(Xc=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var f=br(a);f!==null&&(t.splice(s,3),s-=3,df(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Bl(t){function s(j){return Yc(j,t)}Qs!==null&&Yc(Qs,t),Ys!==null&&Yc(Ys,t),Xs!==null&&Yc(Xs,t),jl.forEach(s),Ll.forEach(s);for(var a=0;a<Zs.length;a++){var l=Zs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)wv(a),a.blockedOn===null&&Zs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[Lt]||null;if(typeof f=="function")b||Rv(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[Lt]||null)T=b.formAction;else if(dm(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Rv(a)}}}function mm(t){this._internalRoot=t}Zc.prototype.render=mm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=Bn();Ev(a,l,t,s,null,null)},Zc.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ev(t.current,2,null,t,null,null),Oc(),s[Gn]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var s=As();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Zs.length&&s!==0&&s<Zs[a].priority;a++);Zs.splice(a,0,t),a===0&&wv(t)}};var Cv=e.version;if(Cv!=="19.1.0")throw Error(i(527,Cv,"19.1.0"));ee.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(s),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var XS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{ke=Wc.inject(XS),Pe=Wc}catch{}}return ql.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",h=Fy,f=Gy,b=Ky,T=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=vv(t,1,!1,null,null,a,l,h,f,b,T,null),t[Gn]=s.current,Xf(t),new mm(s)},ql.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,h="",f=Fy,b=Gy,T=Ky,j=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),s=vv(t,1,!0,s,a??null,l,h,f,b,T,j,$),s.context=_v(null),a=s.current,l=Bn(),l=ws(l),h=ks(l),h.callback=null,Ps(a,h,l),a=l,s.current.lanes=a,Fr(s,a),Pr(s),t[Gn]=s.current,Xf(t),new Zc(s)},ql.version="19.1.0",ql}var Lv;function aw(){if(Lv)return ym.exports;Lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ym.exports=iw(),ym.exports}var ow=aw(),Hl={},Uv;function lw(){if(Uv)return Hl;Uv=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.parse=d,Hl.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function d(x,k){const N=new u,B=x.length;if(B<2)return N;const M=(k==null?void 0:k.decode)||_;let z=0;do{const H=x.indexOf("=",z);if(H===-1)break;const Z=x.indexOf(";",z),te=Z===-1?B:Z;if(H>te){z=x.lastIndexOf(";",H-1)+1;continue}const Y=m(x,z,H),se=p(x,H,Y),C=x.slice(Y,se);if(N[C]===void 0){let R=m(x,H+1,te),D=p(x,te,R);const V=M(x.slice(R,D));N[C]=V}z=te+1}while(z<B);return N}function m(x,k,N){do{const B=x.charCodeAt(k);if(B!==32&&B!==9)return k}while(++k<N);return N}function p(x,k,N){for(;k>N;){const B=x.charCodeAt(--k);if(B!==32&&B!==9)return k+1}return N}function g(x,k,N){const B=(N==null?void 0:N.encode)||encodeURIComponent;if(!r.test(x))throw new TypeError(`argument name is invalid: ${x}`);const M=B(k);if(!e.test(M))throw new TypeError(`argument val is invalid: ${k}`);let z=x+"="+M;if(!N)return z;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);z+="; Max-Age="+N.maxAge}if(N.domain){if(!n.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);z+="; Domain="+N.domain}if(N.path){if(!i.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);z+="; Path="+N.path}if(N.expires){if(!S(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);z+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(z+="; HttpOnly"),N.secure&&(z+="; Secure"),N.partitioned&&(z+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return z}function _(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function S(x){return o.call(x)==="[object Date]"}return Hl}lw();var Bv="popstate";function uw(r={}){function e(i,o){let{pathname:u,search:d,hash:m}=i.location;return Lm("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:iu(o)}return hw(e,n,null,r)}function St(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cw(){return Math.random().toString(36).substring(2,10)}function zv(r,e){return{usr:r.state,key:r.key,idx:e}}function Lm(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?To(e):e,state:n,key:e&&e.key||i||cw()}}function iu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function To(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function hw(r,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,m="POP",p=null,g=_();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function _(){return(d.state||{idx:null}).idx}function S(){m="POP";let M=_(),z=M==null?null:M-g;g=M,p&&p({action:m,location:B.location,delta:z})}function x(M,z){m="PUSH";let H=Lm(B.location,M,z);g=_()+1;let Z=zv(H,g),te=B.createHref(H);try{d.pushState(Z,"",te)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(te)}u&&p&&p({action:m,location:B.location,delta:1})}function k(M,z){m="REPLACE";let H=Lm(B.location,M,z);g=_();let Z=zv(H,g),te=B.createHref(H);d.replaceState(Z,"",te),u&&p&&p({action:m,location:B.location,delta:0})}function N(M){return dw(M)}let B={get action(){return m},get location(){return r(o,d)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Bv,S),p=M,()=>{o.removeEventListener(Bv,S),p=null}},createHref(M){return e(o,M)},createURL:N,encodeLocation(M){let z=N(M);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:x,replace:k,go(M){return d.go(M)}};return B}function dw(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:iu(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function PE(r,e,n="/"){return fw(r,e,n,!1)}function fw(r,e,n,i){let o=typeof e=="string"?To(e):e,u=_s(o.pathname||"/",n);if(u==null)return null;let d=VE(r);mw(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=ww(u);m=Tw(d[p],g,i)}return m}function VE(r,e=[],n=[],i=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(St(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=gs([i,p.relativePath]),_=n.concat(p);u.children&&u.children.length>0&&(St(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),VE(u.children,e,_,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:bw(g,u.index),routesMeta:_})};return r.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of jE(u.path))o(u,d,p)}),e}function jE(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=jE(i.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function mw(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:xw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var pw=/^:[\w-]+$/,gw=3,yw=2,vw=1,_w=10,Ew=-2,qv=r=>r==="*";function bw(r,e){let n=r.split("/"),i=n.length;return n.some(qv)&&(i+=Ew),e&&(i+=yw),n.filter(o=>!qv(o)).reduce((o,u)=>o+(pw.test(u)?gw:u===""?vw:_w),i)}function xw(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function Tw(r,e,n=!1){let{routesMeta:i}=r,o={},u="/",d=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",S=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),x=p.route;if(!S&&g&&n&&!i[i.length-1].route.index&&(S=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!S)return null;Object.assign(o,S.params),d.push({params:o,pathname:gs([u,S.pathname]),pathnameBase:Iw(gs([u,S.pathnameBase])),route:x}),S.pathnameBase!=="/"&&(u=gs([u,S.pathnameBase]))}return d}function _h(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=Sw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:S},x)=>{if(_==="*"){let N=m[x]||"";d=u.slice(0,u.length-N.length).replace(/(.)\/+$/,"$1")}const k=m[x];return S&&!k?g[_]=void 0:g[_]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:r}}function Sw(r,e=!1,n=!0){rr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ww(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _s(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function Aw(r,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof r=="string"?To(r):r;return{pathname:n?n.startsWith("/")?n:Rw(n,e):e,search:Nw(i),hash:Dw(o)}}function Rw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yp(r){let e=Cw(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function vp(r,e,n,i=!1){let o;typeof r=="string"?o=To(r):(o={...r},St(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),St(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),St(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=r===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let S=e.length-1;if(!i&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),S-=1;o.pathname=x.join("/")}m=S>=0?e[S]:"/"}let p=Aw(o,m),g=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var gs=r=>r.join("/").replace(/\/\/+/g,"/"),Iw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Nw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Dw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ow(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var LE=["POST","PUT","PATCH","DELETE"];new Set(LE);var Mw=["GET",...LE];new Set(Mw);var So=I.createContext(null);So.displayName="DataRouter";var Bh=I.createContext(null);Bh.displayName="DataRouterState";var UE=I.createContext({isTransitioning:!1});UE.displayName="ViewTransition";var kw=I.createContext(new Map);kw.displayName="Fetchers";var Pw=I.createContext(null);Pw.displayName="Await";var gr=I.createContext(null);gr.displayName="Navigation";var gu=I.createContext(null);gu.displayName="Location";var yr=I.createContext({outlet:null,matches:[],isDataRoute:!1});yr.displayName="Route";var _p=I.createContext(null);_p.displayName="RouteError";function Vw(r,{relative:e}={}){St(wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(gr),{hash:o,pathname:u,search:d}=yu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:gs([n,u])),i.createHref({pathname:m,search:d,hash:o})}function wo(){return I.useContext(gu)!=null}function Hn(){return St(wo(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(gu).location}var BE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zE(r){I.useContext(gr).static||I.useLayoutEffect(r)}function Ao(){let{isDataRoute:r}=I.useContext(yr);return r?Yw():jw()}function jw(){St(wo(),"useNavigate() may be used only in the context of a <Router> component.");let r=I.useContext(So),{basename:e,navigator:n}=I.useContext(gr),{matches:i}=I.useContext(yr),{pathname:o}=Hn(),u=JSON.stringify(yp(i)),d=I.useRef(!1);return zE(()=>{d.current=!0}),I.useCallback((p,g={})=>{if(rr(d.current,BE),!d.current)return;if(typeof p=="number"){n.go(p);return}let _=vp(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:gs([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,r])}I.createContext(null);function _i(){let{matches:r}=I.useContext(yr),e=r[r.length-1];return e?e.params:{}}function yu(r,{relative:e}={}){let{matches:n}=I.useContext(yr),{pathname:i}=Hn(),o=JSON.stringify(yp(n));return I.useMemo(()=>vp(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function Lw(r,e){return qE(r,e)}function qE(r,e,n,i){var z;St(wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(gr),{matches:u}=I.useContext(yr),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",_=d&&d.route;{let H=_&&_.path||"";HE(p,!_||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=Hn(),x;if(e){let H=typeof e=="string"?To(e):e;St(g==="/"||((z=H.pathname)==null?void 0:z.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),x=H}else x=S;let k=x.pathname||"/",N=k;if(g!=="/"){let H=g.replace(/^\//,"").split("/");N="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let B=PE(r,{pathname:N});rr(_||B!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),rr(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=Hw(B&&B.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:gs([g,o.encodeLocation?o.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:gs([g,o.encodeLocation?o.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,n,i);return e&&M?I.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},M):M}function Uw(){let r=Qw(),e=Ow(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var Bw=I.createElement(Uw,null),zw=class extends I.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?I.createElement(yr.Provider,{value:this.props.routeContext},I.createElement(_p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qw({routeContext:r,match:e,children:n}){let i=I.useContext(So);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(yr.Provider,{value:r},n)}function Hw(r,e=[],n=null,i=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);St(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:_,errors:S}=n,x=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||x){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let S,x=!1,k=null,N=null;n&&(S=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||Bw,d&&(m<0&&_===0?(HE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,N=null):m===_&&(x=!0,N=g.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,_+1)),M=()=>{let z;return S?z=k:x?z=N:g.route.Component?z=I.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=p,I.createElement(qw,{match:g,routeContext:{outlet:p,matches:B,isDataRoute:n!=null},children:z})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?I.createElement(zw,{location:n.location,revalidation:n.revalidation,component:k,error:S,children:M(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):M()},null)}function Ep(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fw(r){let e=I.useContext(So);return St(e,Ep(r)),e}function Gw(r){let e=I.useContext(Bh);return St(e,Ep(r)),e}function Kw(r){let e=I.useContext(yr);return St(e,Ep(r)),e}function bp(r){let e=Kw(r),n=e.matches[e.matches.length-1];return St(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function $w(){return bp("useRouteId")}function Qw(){var i;let r=I.useContext(_p),e=Gw("useRouteError"),n=bp("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function Yw(){let{router:r}=Fw("useNavigate"),e=bp("useNavigate"),n=I.useRef(!1);return zE(()=>{n.current=!0}),I.useCallback(async(o,u={})=>{rr(n.current,BE),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var Hv={};function HE(r,e,n){!e&&!Hv[r]&&(Hv[r]=!0,rr(!1,n))}I.memo(Xw);function Xw({routes:r,future:e,state:n}){return qE(r,void 0,n,e)}function Zw({to:r,replace:e,state:n,relative:i}){St(wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(gr);rr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=I.useContext(yr),{pathname:d}=Hn(),m=Ao(),p=vp(r,yp(u),d,i==="path"),g=JSON.stringify(p);return I.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:i})},[m,g,i,e,n]),null}function Dn(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ww({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){St(!wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),m=I.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=To(n));let{pathname:p="/",search:g="",hash:_="",state:S=null,key:x="default"}=n,k=I.useMemo(()=>{let N=_s(p,d);return N==null?null:{location:{pathname:N,search:g,hash:_,state:S,key:x},navigationType:i}},[d,p,g,_,S,x,i]);return rr(k!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:I.createElement(gr.Provider,{value:m},I.createElement(gu.Provider,{children:e,value:k}))}function Jw({children:r,location:e}){return Lw(Um(r),e)}function Um(r,e=[]){let n=[];return I.Children.forEach(r,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){n.push.apply(n,Um(i.props.children,u));return}St(i.type===Dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Um(i.props.children,u)),n.push(d)}),n}var oh="get",lh="application/x-www-form-urlencoded";function zh(r){return r!=null&&typeof r.tagName=="string"}function eA(r){return zh(r)&&r.tagName.toLowerCase()==="button"}function tA(r){return zh(r)&&r.tagName.toLowerCase()==="form"}function nA(r){return zh(r)&&r.tagName.toLowerCase()==="input"}function rA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function sA(r,e){return r.button===0&&(!e||e==="_self")&&!rA(r)}function Bm(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let i=r[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function iA(r,e){let n=Bm(r);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Jc=null;function aA(){if(Jc===null)try{new FormData(document.createElement("form"),0),Jc=!1}catch{Jc=!0}return Jc}var oA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(r){return r!=null&&!oA.has(r)?(rr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):r}function lA(r,e){let n,i,o,u,d;if(tA(r)){let m=r.getAttribute("action");i=m?_s(m,e):null,n=r.getAttribute("method")||oh,o=xm(r.getAttribute("enctype"))||lh,u=new FormData(r)}else if(eA(r)||nA(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(i=p?_s(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||oh,o=xm(r.getAttribute("formenctype"))||xm(m.getAttribute("enctype"))||lh,u=new FormData(m,r),!aA()){let{name:g,type:_,value:S}=r;if(_==="image"){let x=g?`${g}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else g&&u.append(g,S)}}else{if(zh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oh,i=null,o=lh,d=r}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}function xp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function uA(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cA(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function hA(r,e,n){let i=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await uA(u,n);return d.links?d.links():[]}return[]}));return pA(i.flat(1).filter(cA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Fv(r,e,n,i,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var _;return n[g].pathname!==p.pathname||((_=n[g].route.path)==null?void 0:_.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var S;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function dA(r,e,{includeHydrateFallback:n}={}){return fA(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function fA(r){return[...new Set(r)]}function mA(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function pA(r,e){let n=new Set;return new Set(e),r.reduce((i,o)=>{let u=JSON.stringify(mA(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gA=new Set([100,101,204,205]);function yA(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&_s(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function FE(){let r=I.useContext(So);return xp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function vA(){let r=I.useContext(Bh);return xp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Tp=I.createContext(void 0);Tp.displayName="FrameworkContext";function GE(){let r=I.useContext(Tp);return xp(r,"You must render this element inside a <HydratedRouter> element"),r}function _A(r,e){let n=I.useContext(Tp),[i,o]=I.useState(!1),[u,d]=I.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:S}=e,x=I.useRef(null);I.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let B=z=>{z.forEach(H=>{d(H.isIntersecting)})},M=new IntersectionObserver(B,{threshold:.5});return x.current&&M.observe(x.current),()=>{M.disconnect()}}},[r]),I.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let k=()=>{o(!0)},N=()=>{o(!1),d(!1)};return n?r!=="intent"?[u,x,{}]:[u,x,{onFocus:Fl(m,k),onBlur:Fl(p,N),onMouseEnter:Fl(g,k),onMouseLeave:Fl(_,N),onTouchStart:Fl(S,k)}]:[!1,x,{}]}function Fl(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function EA({page:r,...e}){let{router:n}=FE(),i=I.useMemo(()=>PE(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?I.createElement(xA,{page:r,matches:i,...e}):null}function bA(r){let{manifest:e,routeModules:n}=GE(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return hA(r,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[r,e,n]),i}function xA({page:r,matches:e,...n}){let i=Hn(),{manifest:o,routeModules:u}=GE(),{basename:d}=FE(),{loaderData:m,matches:p}=vA(),g=I.useMemo(()=>Fv(r,e,p,o,i,"data"),[r,e,p,o,i]),_=I.useMemo(()=>Fv(r,e,p,o,i,"assets"),[r,e,p,o,i]),S=I.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let N=new Set,B=!1;if(e.forEach(z=>{var Z;let H=o.routes[z.route.id];!H||!H.hasLoader||(!g.some(te=>te.route.id===z.route.id)&&z.route.id in m&&((Z=u[z.route.id])!=null&&Z.shouldRevalidate)||H.hasClientLoader?B=!0:N.add(z.route.id))}),N.size===0)return[];let M=yA(r,d);return B&&N.size>0&&M.searchParams.set("_routes",e.filter(z=>N.has(z.route.id)).map(z=>z.route.id).join(",")),[M.pathname+M.search]},[d,m,i,o,g,e,r,u]),x=I.useMemo(()=>dA(_,o),[_,o]),k=bA(_);return I.createElement(I.Fragment,null,S.map(N=>I.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),x.map(N=>I.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),k.map(({key:N,link:B})=>I.createElement("link",{key:N,...B})))}function TA(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var KE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KE&&(window.__reactRouterVersion="7.6.2")}catch{}function SA({basename:r,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=uw({window:n,v5Compat:!0}));let o=i.current,[u,d]=I.useState({action:o.action,location:o.location}),m=I.useCallback(p=>{I.startTransition(()=>d(p))},[d]);return I.useLayoutEffect(()=>o.listen(m),[o,m]),I.createElement(Ww,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var $E=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:_,viewTransition:S,...x},k){let{basename:N}=I.useContext(gr),B=typeof g=="string"&&$E.test(g),M,z=!1;if(typeof g=="string"&&B&&(M=g,KE))try{let D=new URL(window.location.href),V=g.startsWith("//")?new URL(D.protocol+g):new URL(g),U=_s(V.pathname,N);V.origin===D.origin&&U!=null?g=U+V.search+V.hash:z=!0}catch{rr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=Vw(g,{relative:o}),[Z,te,Y]=_A(i,x),se=CA(g,{replace:d,state:m,target:p,preventScrollReset:_,relative:o,viewTransition:S});function C(D){e&&e(D),D.defaultPrevented||se(D)}let R=I.createElement("a",{...x,...Y,href:M||H,onClick:z||u?e:C,ref:TA(k,te),target:p,"data-discover":!B&&n==="render"?"true":void 0});return Z&&!B?I.createElement(I.Fragment,null,R,I.createElement(EA,{page:H})):R});We.displayName="Link";var wA=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},_){let S=yu(d,{relative:g.relative}),x=Hn(),k=I.useContext(Bh),{navigator:N,basename:B}=I.useContext(gr),M=k!=null&&MA(S)&&m===!0,z=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,H=x.pathname,Z=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(H=H.toLowerCase(),Z=Z?Z.toLowerCase():null,z=z.toLowerCase()),Z&&B&&(Z=_s(Z,B)||Z);const te=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let Y=H===z||!o&&H.startsWith(z)&&H.charAt(te)==="/",se=Z!=null&&(Z===z||!o&&Z.startsWith(z)&&Z.charAt(z.length)==="/"),C={isActive:Y,isPending:se,isTransitioning:M},R=Y?e:void 0,D;typeof i=="function"?D=i(C):D=[i,Y?"active":null,se?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(C):u;return I.createElement(We,{...g,"aria-current":R,className:D,ref:_,style:V,to:d,viewTransition:m},typeof p=="function"?p(C):p)});wA.displayName="NavLink";var AA=I.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=oh,action:m,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:S,...x},k)=>{let N=DA(),B=OA(m,{relative:g}),M=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&$E.test(m),H=Z=>{if(p&&p(Z),Z.defaultPrevented)return;Z.preventDefault();let te=Z.nativeEvent.submitter,Y=(te==null?void 0:te.getAttribute("formmethod"))||d;N(te||Z.currentTarget,{fetcherKey:e,method:Y,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:S})};return I.createElement("form",{ref:k,method:M,action:B,onSubmit:i?p:H,...x,"data-discover":!z&&r==="render"?"true":void 0})});AA.displayName="Form";function RA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QE(r){let e=I.useContext(So);return St(e,RA(r)),e}function CA(r,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=Ao(),p=Hn(),g=yu(r,{relative:u});return I.useCallback(_=>{if(sA(_,e)){_.preventDefault();let S=n!==void 0?n:iu(p)===iu(g);m(r,{replace:S,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,i,e,r,o,u,d])}function qh(r){rr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=I.useRef(Bm(r)),n=I.useRef(!1),i=Hn(),o=I.useMemo(()=>iA(i.search,n.current?null:e.current),[i.search]),u=Ao(),d=I.useCallback((m,p)=>{const g=Bm(typeof m=="function"?m(o):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,d]}var IA=0,NA=()=>`__${String(++IA)}__`;function DA(){let{router:r}=QE("useSubmit"),{basename:e}=I.useContext(gr),n=$w();return I.useCallback(async(i,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=lA(i,e);if(o.navigate===!1){let _=o.fetcherKey||NA();await r.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function OA(r,{relative:e}={}){let{basename:n}=I.useContext(gr),i=I.useContext(yr);St(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...yu(r||".",{relative:e})},d=Hn();if(r==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(_=>_==="")){m.delete("index"),p.filter(S=>S).forEach(S=>m.append("index",S));let _=m.toString();u.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:gs([n,u.pathname])),iu(u)}function MA(r,e={}){let n=I.useContext(UE);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=QE("useViewTransitionState"),o=yu(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=_s(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=_s(n.nextLocation.pathname,i)||n.nextLocation.pathname;return _h(o.pathname,d)!=null||_h(o.pathname,u)!=null}[...gA];const Gv="FLASH FLASH ";function Fn(r){I.useEffect(()=>{const e=r?`${r} | ${Gv}`:Gv;document.title=e},[r])}const kA=()=>{Fn("Home");const r="group flex flex-col rounded-2xl border border-slate-200 bg-white p-7 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl";return y.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[y.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-100 bg-white/90 px-4 py-4 backdrop-blur sm:px-6 lg:px-10",children:y.jsx("div",{className:"mx-auto flex w-full max-w-7xl items-center justify-between",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-700 text-lg text-white",children:""}),y.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-emerald-700",children:"Climbing Competition"})]})})}),y.jsxs("main",{className:"relative",children:[y.jsxs("section",{className:"relative overflow-hidden px-4 pb-16 pt-16 sm:px-6 lg:px-10 lg:pt-24",children:[y.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-[radial-gradient(40%_50%_at_50%_20%,rgba(16,185,129,0.16)_0%,rgba(255,255,255,0)_100%)]"}),y.jsx("div",{className:"mx-auto max-w-4xl text-center",children:y.jsxs("h2",{className:"bg-gradient-to-r from-emerald-800 via-emerald-500 to-sky-500 bg-clip-text text-4xl font-black tracking-tight text-transparent sm:text-5xl lg:text-6xl",children:["Push Your Limits.",y.jsx("br",{}),"Track Your Flash."]})})]}),y.jsx("section",{className:"mx-auto max-w-7xl px-4 pb-20 sm:px-6 lg:px-10",children:y.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[y.jsxs("section",{className:`${r} hover:shadow-emerald-600/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-700 transition group-hover:bg-emerald-700 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Gym Owners"}),y.jsxs("ul",{className:"mt-5 flex-1 space-y-2 text-sm text-slate-700",children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsxs("div",{className:"mt-6 space-y-2",children:[y.jsx(We,{to:"/login",className:"inline-flex w-full items-center justify-center rounded-full border border-emerald-700 bg-emerald-700 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-800 hover:shadow-lg hover:shadow-emerald-700/20",children:""}),y.jsx(We,{to:"/dashboard",className:"inline-flex w-full items-center justify-center rounded-full border border-emerald-300 bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-800 transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-100",children:""})]})]}),y.jsxs("section",{className:`${r} hover:shadow-emerald-500/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-600 transition group-hover:bg-emerald-500 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Climbers"}),y.jsxs("ul",{className:"mt-5 flex-1 space-y-2 text-sm text-slate-700",children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsx("div",{className:"mt-6",children:y.jsx(We,{to:"/score-summary",className:"inline-flex w-full items-center justify-center rounded-full border border-emerald-400 bg-emerald-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-500/20",children:""})})]}),y.jsxs("section",{className:`${r} hover:shadow-sky-500/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-sky-100 text-2xl text-sky-600 transition group-hover:bg-sky-500 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For System Admins"}),y.jsxs("ul",{className:"mt-5 flex-1 space-y-2 text-sm text-slate-700",children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsx("div",{className:"mt-6",children:y.jsx(We,{to:"/system-admin",className:"inline-flex w-full items-center justify-center rounded-full border border-sky-300 bg-sky-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-sky-600 hover:shadow-lg hover:shadow-sky-500/20",children:""})})]})]})})]}),y.jsx("footer",{className:"border-t border-slate-100 bg-white py-10",children:y.jsxs("div",{className:"mx-auto max-w-7xl px-4 text-center sm:px-6 lg:px-10",children:[y.jsxs("div",{className:"mb-3 flex items-center justify-center gap-2",children:[y.jsx("span",{className:"text-emerald-700",children:""}),y.jsx("span",{className:"font-bold text-slate-900",children:"Climbing Competition"})]}),y.jsx("p",{className:"text-sm text-slate-500",children:" 2026 Climbing Competition Systems. All rights reserved."}),y.jsxs("div",{className:"mt-4 flex justify-center gap-6 text-sm text-slate-500",children:[y.jsx("span",{className:"cursor-default transition-colors hover:text-emerald-700",children:"Terms"}),y.jsx("span",{className:"cursor-default transition-colors hover:text-emerald-700",children:"Privacy"}),y.jsx("span",{className:"cursor-default transition-colors hover:text-emerald-700",children:"Contact"})]})]})})]})},PA=()=>{};var Kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},VA=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],d=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},XE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=u>>2,S=(u&3)<<4|m>>4;let x=(m&15)<<2|g>>6,k=g&63;p||(k=64,d||(x=64)),i.push(n[_],n[S],n[x],n[k])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(YE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):VA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new jA;const x=u<<2|m>>4;if(i.push(x),g!==64){const k=m<<4&240|g>>2;if(i.push(k),S!==64){const N=g<<6&192|S;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(r){const e=YE(r);return XE.encodeByteArray(e,!0)},Eh=function(r){return LA(r).replace(/\./g,"")},ZE=function(r){try{return XE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=()=>UA().__FIREBASE_DEFAULTS__,zA=()=>{if(typeof process>"u"||typeof Kv>"u")return;const r=Kv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ZE(r[1]);return e&&JSON.parse(e)},Hh=()=>{try{return PA()||BA()||zA()||qA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},WE=r=>{var e,n;return(n=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},HA=r=>{const e=WE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},JE=()=>{var r;return(r=Hh())===null||r===void 0?void 0:r.config},eb=r=>{var e;return(e=Hh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(r){return r.endsWith(".cloudworkstations.dev")}async function tb(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Eh(JSON.stringify(n)),Eh(JSON.stringify(d)),""].join(".")}const Wl={};function KA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?r.emulator.push(e):r.prod.push(e);return r}function $A(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let $v=!1;function nb(r,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||Wl[r]===e||Wl[r]||$v)return;Wl[r]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",u=KA().prod.length>0;function d(){const x=document.getElementById(i);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{$v=!0,d()},x}function _(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function S(){const x=$A(i),k=n("text"),N=document.getElementById(k)||document.createElement("span"),B=n("learnmore"),M=document.getElementById(B)||document.createElement("a"),z=n("preprendIcon"),H=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Z=x.element;m(Z),_(M,B);const te=g();p(H,z),Z.append(H,N,M,te),document.body.appendChild(Z)}u?(N.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function YA(){var r;const e=(r=Hh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function WA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JA(){const r=_n();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function e1(){return!YA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t1(){try{return typeof indexedDB=="object"}catch{return!1}}function n1(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="FirebaseError";class Ss extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=r1,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?s1(u,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Ss(o,m,i)}}function s1(r,e){return r.replace(i1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const i1=/\{\$([^}]+)}/g;function a1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function sa(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=r[o],d=e[o];if(Qv(u)&&Qv(d)){if(!sa(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Qv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Kl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function $l(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function o1(r,e){const n=new l1(r,e);return n.subscribe.bind(n)}class l1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");u1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Tm),o.error===void 0&&(o.error=Tm),o.complete===void 0&&(o.complete=Tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class ia{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d1(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&d.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:h1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h1(r){return r===na?void 0:r}function d1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ye||(Ye={}));const m1={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},p1=Ye.INFO,g1={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},y1=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=g1[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=p1,this._logHandler=y1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const v1=(r,e)=>e.some(n=>r instanceof n);let Yv,Xv;function _1(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rb=new WeakMap,zm=new WeakMap,sb=new WeakMap,Sm=new WeakMap,wp=new WeakMap;function b1(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(ai(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&rb.set(n,r)}).catch(()=>{}),wp.set(e,r),e}function x1(r){if(zm.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});zm.set(r,e)}let qm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return zm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||sb.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function T1(r){qm=r(qm)}function S1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(wm(this),e,...n);return sb.set(i,e.sort?e.sort():[e]),ai(i)}:E1().includes(r)?function(...e){return r.apply(wm(this),e),ai(rb.get(this))}:function(...e){return ai(r.apply(wm(this),e))}}function w1(r){return typeof r=="function"?S1(r):(r instanceof IDBTransaction&&x1(r),v1(r,_1())?new Proxy(r,qm):r)}function ai(r){if(r instanceof IDBRequest)return b1(r);if(Sm.has(r))return Sm.get(r);const e=w1(r);return e!==r&&(Sm.set(r,e),wp.set(e,r)),e}const wm=r=>wp.get(r);function A1(r,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=ai(d);return i&&d.addEventListener("upgradeneeded",p=>{i(ai(d.result),p.oldVersion,p.newVersion,ai(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const R1=["get","getKey","getAll","getAllKeys","count"],C1=["put","add","delete","clear"],Am=new Map;function Zv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=C1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||R1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Am.set(e,u),u}T1(r=>({...r,get:(e,n,i)=>Zv(e,n)||r.get(e,n,i),has:(e,n)=>!!Zv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function N1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hm="@firebase/app",Wv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Sp("@firebase/app"),D1="@firebase/app-compat",O1="@firebase/analytics-compat",M1="@firebase/analytics",k1="@firebase/app-check-compat",P1="@firebase/app-check",V1="@firebase/auth",j1="@firebase/auth-compat",L1="@firebase/database",U1="@firebase/data-connect",B1="@firebase/database-compat",z1="@firebase/functions",q1="@firebase/functions-compat",H1="@firebase/installations",F1="@firebase/installations-compat",G1="@firebase/messaging",K1="@firebase/messaging-compat",$1="@firebase/performance",Q1="@firebase/performance-compat",Y1="@firebase/remote-config",X1="@firebase/remote-config-compat",Z1="@firebase/storage",W1="@firebase/storage-compat",J1="@firebase/firestore",eR="@firebase/ai",tR="@firebase/firestore-compat",nR="firebase",rR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",sR={[Hm]:"fire-core",[D1]:"fire-core-compat",[M1]:"fire-analytics",[O1]:"fire-analytics-compat",[P1]:"fire-app-check",[k1]:"fire-app-check-compat",[V1]:"fire-auth",[j1]:"fire-auth-compat",[L1]:"fire-rtdb",[U1]:"fire-data-connect",[B1]:"fire-rtdb-compat",[z1]:"fire-fn",[q1]:"fire-fn-compat",[H1]:"fire-iid",[F1]:"fire-iid-compat",[G1]:"fire-fcm",[K1]:"fire-fcm-compat",[$1]:"fire-perf",[Q1]:"fire-perf-compat",[Y1]:"fire-rc",[X1]:"fire-rc-compat",[Z1]:"fire-gcs",[W1]:"fire-gcs-compat",[J1]:"fire-fst",[tR]:"fire-fst-compat",[eR]:"fire-vertex","fire-js":"fire-js",[nR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,iR=new Map,Gm=new Map;function Jv(r,e){try{r.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function mo(r){const e=r.name;if(Gm.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,r);for(const n of bh.values())Jv(n,r);for(const n of iR.values())Jv(n,r);return!0}function Ap(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function hr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new vu("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=rR;function ib(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Fm,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw oi.create("bad-app-name",{appName:String(o)});if(n||(n=JE()),!n)throw oi.create("no-options");const u=bh.get(o);if(u){if(sa(n,u.options)&&sa(i,u.config))return u;throw oi.create("duplicate-app",{appName:o})}const d=new f1(o);for(const p of Gm.values())d.addComponent(p);const m=new oR(n,i,d);return bh.set(o,m),m}function ab(r=Fm){const e=bh.get(r);if(!e&&r===Fm&&JE())return ib();if(!e)throw oi.create("no-app",{appName:r});return e}function li(r,e,n){var i;let o=(i=sR[r])!==null&&i!==void 0?i:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(m.join(" "));return}mo(new ia(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="firebase-heartbeat-database",uR=1,au="firebase-heartbeat-store";let Rm=null;function ob(){return Rm||(Rm=A1(lR,uR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(r=>{throw oi.create("idb-open",{originalErrorMessage:r.message})})),Rm}async function cR(r){try{const n=(await ob()).transaction(au),i=await n.objectStore(au).get(lb(r));return await n.done,i}catch(e){if(e instanceof Ss)Es.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function e_(r,e){try{const i=(await ob()).transaction(au,"readwrite");await i.objectStore(au).put(e,lb(r)),await i.done}catch(n){if(n instanceof Ss)Es.warn(n.message);else{const i=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(i.message)}}}function lb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1024,dR=30;class fR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=t_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>dR){const d=gR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Es.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t_(),{heartbeatsToSend:i,unsentEntries:o}=mR(this._heartbeatsCache.heartbeats),u=Eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Es.warn(n),""}}}function t_(){return new Date().toISOString().substring(0,10)}function mR(r,e=hR){const n=[];let i=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),n_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),n_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class pR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t1()?n1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function n_(r){return Eh(JSON.stringify({version:2,heartbeats:r})).length}function gR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(r){mo(new ia("platform-logger",e=>new I1(e),"PRIVATE")),mo(new ia("heartbeat",e=>new fR(e),"PRIVATE")),li(Hm,Wv,r),li(Hm,Wv,"esm2017"),li("fire-js","")}yR("");function Rp(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=ub,cb=new vu("auth","Firebase",ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Sp("@firebase/auth");function _R(r,...e){xh.logLevel<=Ye.WARN&&xh.warn(`Auth (${Co}): ${r}`,...e)}function uh(r,...e){xh.logLevel<=Ye.ERROR&&xh.error(`Auth (${Co}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(r,...e){throw Cp(r,...e)}function jr(r,...e){return Cp(r,...e)}function hb(r,e,n){const i=Object.assign(Object.assign({},vR()),{[e]:n});return new vu("auth","Firebase",i).create(e,{appName:r.name})}function ui(r){return hb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return cb.create(r,...e)}function Oe(r,e,...n){if(!r)throw Cp(e,...n)}function ms(r){const e="INTERNAL ASSERTION FAILED: "+r;throw uh(e),new Error(e)}function bs(r,e){r||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function ER(){return r_()==="http:"||r_()==="https:"}function r_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ER()||ZA()||"connection"in navigator)?navigator.onLine:!0}function xR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,bs(n>e,"Short delay should be less than long delay!"),this.isMobile=QA()||WA()}get(){return bR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(r,e){bs(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wR=new Eu(3e4,6e4);function ua(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ei(r,e,n,i,o={}){return fb(r,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const m=_u(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return XA()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(g.credentials="include"),db.fetch()(await mb(r,r.config.apiHost,n,m),g)})}async function fb(r,e,n){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},TR),e);try{const o=new RR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw eh(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw eh(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw eh(r,"user-disabled",d);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw hb(r,_,g);mr(r,_)}}catch(o){if(o instanceof Ss)throw o;mr(r,"network-request-failed",{message:String(o)})}}async function Fh(r,e,n,i,o={}){const u=await Ei(r,e,n,i,o);return"mfaPendingCredential"in u&&mr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function mb(r,e,n,i){const o=`${e}${n}?${i}`,u=r,d=u.config.emulator?Ip(r.config,o):`${r.config.apiScheme}://${o}`;return SR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function AR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(jr(this.auth,"network-request-failed")),wR.get())})}}function eh(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=jr(r,e,i);return o.customData._tokenResponse=n,o}function s_(r){return r!==void 0&&r.enterprise!==void 0}class CR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IR(r,e){return Ei(r,"GET","/v2/recaptchaConfig",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(r,e){return Ei(r,"POST","/v1/accounts:delete",e)}async function Th(r,e){return Ei(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DR(r,e=!1){const n=Ft(r),i=await n.getIdToken(e),o=Np(i);Oe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:i,authTime:Jl(Cm(o.auth_time)),issuedAtTime:Jl(Cm(o.iat)),expirationTime:Jl(Cm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Cm(r){return Number(r)*1e3}function Np(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ZE(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function i_(r){const e=Np(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ss&&OR(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function OR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(r){var e;const n=r.auth,i=await r.getIdToken(),o=await ou(r,Th(n,{idToken:i}));Oe(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?pb(u.providerUserInfo):[],m=PR(r.providerData,d),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),_=p?g:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new $m(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function kR(r){const e=Ft(r);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PR(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function pb(r){return r.map(e=>{var{providerId:n}=e,i=Rp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(r,e){const n=await fb(r,{},async()=>{const i=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await mb(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(p.credentials="include"),db.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jR(r,e){return Ei(r,"POST","/v2/accounts:revokeToken",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=i_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await VR(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new uo;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,u=Rp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new $m(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DR(this,e)}reload(){return kR(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(ui(this.auth));const e=await this.getIdToken();return await ou(this,NR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,u,d,m,p,g,_;const S=(i=n.displayName)!==null&&i!==void 0?i:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,k=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,N=(d=n.photoURL)!==null&&d!==void 0?d:void 0,B=(m=n.tenantId)!==null&&m!==void 0?m:void 0,M=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,z=(g=n.createdAt)!==null&&g!==void 0?g:void 0,H=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:te,isAnonymous:Y,providerData:se,stsTokenManager:C}=n;Oe(Z&&C,e,"internal-error");const R=uo.fromJSON(this.name,C);Oe(typeof Z=="string",e,"internal-error"),Js(S,e.name),Js(x,e.name),Oe(typeof te=="boolean",e,"internal-error"),Oe(typeof Y=="boolean",e,"internal-error"),Js(k,e.name),Js(N,e.name),Js(B,e.name),Js(M,e.name),Js(z,e.name),Js(H,e.name);const D=new dr({uid:Z,auth:e,email:x,emailVerified:te,displayName:S,isAnonymous:Y,photoURL:N,phoneNumber:k,tenantId:B,stsTokenManager:R,createdAt:z,lastLoginAt:H});return se&&Array.isArray(se)&&(D.providerData=se.map(V=>Object.assign({},V))),M&&(D._redirectEventId=M),D}static async _fromIdTokenResponse(e,n,i=!1){const o=new uo;o.updateFromServerResponse(n);const u=new dr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Sh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?pb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new uo;m.updateFromIdToken(i);const p=new dr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;function ps(r){bs(r instanceof Function,"Expected a class definition");let e=a_.get(r);return e?(bs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,a_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gb.type="NONE";const o_=gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(r,e,n){return`firebase:${r}:${e}:${n}`}class co{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=ch(this.userKey,o.apiKey,u),this.fullPersistenceKey=ch("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?dr._fromGetAccountInfoResponse(this.auth,n,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new co(ps(o_),e,i);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ps(o_);const d=ch(i,e.config.apiKey,e.name);let m=null;for(const g of n)try{const _=await g._get(d);if(_){let S;if(typeof _=="string"){const x=await Th(e,{idToken:_}).catch(()=>{});if(!x)break;S=await dr._fromGetAccountInfoResponse(e,x,_)}else S=dr._fromJSON(e,_);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new co(u,e,i):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new co(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(Tb(e))return"Webos";if(vb(e))return"Safari";if((e.includes("chrome/")||_b(e))&&!e.includes("edge/"))return"Chrome";if(bb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yb(r=_n()){return/firefox\//i.test(r)}function vb(r=_n()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _b(r=_n()){return/crios\//i.test(r)}function Eb(r=_n()){return/iemobile/i.test(r)}function bb(r=_n()){return/android/i.test(r)}function xb(r=_n()){return/blackberry/i.test(r)}function Tb(r=_n()){return/webos/i.test(r)}function Dp(r=_n()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LR(r=_n()){var e;return Dp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UR(){return JA()&&document.documentMode===10}function Sb(r=_n()){return Dp(r)||bb(r)||Tb(r)||xb(r)||/windows phone/i.test(r)||Eb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(r,e=[]){let n;switch(r){case"Browser":n=l_(_n());break;case"Worker":n=`${l_(_n())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(r,e={}){return Ei(r,"GET","/v2/passwordPolicy",ua(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=6;class HR{constructor(e){var n,i,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:qR,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u_(this),this.idTokenSubscription=new u_(this),this.beforeStateQueue=new BR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var i,o,u;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(ui(this));const n=e?Ft(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zR(this),n=new HR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await jR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_R(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Io(r){return Ft(r)}class u_{constructor(e){this.auth=e,this.observer=null,this.addObserver=o1(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GR(r){Gh=r}function Ab(r){return Gh.loadJS(r)}function KR(){return Gh.recaptchaEnterpriseScript}function $R(){return Gh.gapiScript}function QR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class YR{constructor(){this.enterprise=new XR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ZR="recaptcha-enterprise",Rb="NO_RECAPTCHA";class WR{constructor(e){this.type=ZR,this.auth=Io(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{IR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new CR(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;s_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Rb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YR().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(m=>{if(!n&&s_(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=KR();p.length!==0&&(p+=m),Ab(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function c_(r,e,n,i=!1,o=!1){const u=new WR(r);let d;if(o)d=Rb;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function h_(r,e,n,i,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await c_(r,e,n,n==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await c_(r,e,n,n==="getOobCode");return i(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(r,e){const n=Ap(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(sa(u,e??{}))return o;mr(o,"already-initialized")}return n.initialize({options:e})}function eC(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ps);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tC(r,e,n){const i=Io(r);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=Cb(e),{host:d,port:m}=nC(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},_=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(sa(g,i.config.emulator)&&sa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ro(d)?(tb(`${u}//${d}${p}`),nb("Auth",!0)):rC()}function Cb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nC(r){const e=Cb(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:d_(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:d_(d)}}}function d_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function rC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function sC(r,e){return Ei(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(r,e){return Fh(r,"POST","/v1/accounts:signInWithPassword",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(r,e){return Fh(r,"POST","/v1/accounts:signInWithEmailLink",ua(r,e))}async function oC(r,e){return Fh(r,"POST","/v1/accounts:signInWithEmailLink",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Op{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new lu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,n,"signInWithPassword",iC);case"emailLink":return aC(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,i,"signUpPassword",sC);case"emailLink":return oC(e,{idToken:n,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(r,e){return Fh(r,"POST","/v1/accounts:signInWithIdp",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="http://localhost";class aa extends Op{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,u=Rp(n,["providerId","signInMethod"]);if(!i||!o)return null;const d=new aa(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ho(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}buildRequest(){const e={requestUri:lC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cC(r){const e=Kl($l(r)).link,n=e?Kl($l(e)).deep_link_id:null,i=Kl($l(r)).deep_link_id;return(i?Kl($l(i)).link:null)||i||n||e||r}class Mp{constructor(e){var n,i,o,u,d,m;const p=Kl($l(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,S=uC((o=p.mode)!==null&&o!==void 0?o:null);Oe(g&&_&&S,"argument-error"),this.apiKey=g,this.operation=S,this.code=_,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=cC(e);try{return new Mp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.providerId=No.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Mp.parseLink(n);return Oe(i,"argument-error"),lu._fromEmailAndCode(e,i.code,i.tenantId)}}No.PROVIDER_ID="password";No.EMAIL_PASSWORD_SIGN_IN_METHOD="password";No.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Ib{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends bu{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aa._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ni.credential(n,i)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends bu{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends bu{constructor(){super("twitter.com")}static credential(e,n){return aa._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return si.credential(n,i)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await dr._fromIdTokenResponse(e,i,o),d=f_(i);return new po({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=f_(i);return new po({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function f_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Ss{constructor(e,n,i,o){var u;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new wh(e,n,i,o)}}function Nb(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(r,u,e,i):u})}async function hC(r,e,n=!1){const i=await ou(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return po._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(r,e,n=!1){const{auth:i}=r;if(hr(i.app))return Promise.reject(ui(i));const o="reauthenticate";try{const u=await ou(r,Nb(i,o,e,r),n);Oe(u.idToken,i,"internal-error");const d=Np(u.idToken);Oe(d,i,"internal-error");const{sub:m}=d;return Oe(r.uid===m,i,"user-mismatch"),po._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&mr(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(r,e,n=!1){if(hr(r.app))return Promise.reject(ui(r));const i="signIn",o=await Nb(r,i,e),u=await po._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(u.user),u}async function fC(r,e){return Db(Io(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r){const e=Io(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function pC(r,e,n){return hr(r.app)?Promise.reject(ui(r)):fC(Ft(r),No.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mC(r),i})}function gC(r,e,n,i){return Ft(r).onIdTokenChanged(e,n,i)}function yC(r,e,n){return Ft(r).beforeAuthStateChanged(e,n)}function Ob(r,e,n,i){return Ft(r).onAuthStateChanged(e,n,i)}function vC(r){return Ft(r).signOut()}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=1e3,EC=10;class kb extends Mb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);UR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EC):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kb.type="LOCAL";const bC=kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Mb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Pb.type="SESSION";const Vb=Pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Kh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await xC(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=kp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(S){const x=S;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function SC(r){Lr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function wC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function RC(){return jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="firebaseLocalStorageDb",CC=1,Rh="firebaseLocalStorage",Ub="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(r,e){return r.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function IC(){const r=indexedDB.deleteDatabase(Lb);return new xu(r).toPromise()}function Qm(){const r=indexedDB.open(Lb,CC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Rh,{keyPath:Ub})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await IC(),e(await Qm()))})})}async function m_(r,e,n){const i=$h(r,!0).put({[Ub]:e,value:n});return new xu(i).toPromise()}async function NC(r,e){const n=$h(r,!1).get(e),i=await new xu(n).toPromise();return i===void 0?null:i.value}function p_(r,e){const n=$h(r,!0).delete(e);return new xu(n).toPromise()}const DC=800,OC=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>OC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(RC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wC(),!this.activeServiceWorker)return;this.sender=new TC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await m_(e,Ah,"1"),await p_(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>m_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>NC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=$h(o,!1).getAll();return new xu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const MC=Bb;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(r,e){return e?ps(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends Op{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PC(r){return Db(r.auth,new Pp(r),r.bypassAuthState)}function VC(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),dC(n,new Pp(r),r.bypassAuthState)}async function jC(r){const{auth:e,user:n}=r;return Oe(n,e,"internal-error"),hC(n,new Pp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PC;case"linkViaPopup":case"linkViaRedirect":return jC;case"reauthViaPopup":case"reauthViaRedirect":return VC;default:mr(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Eu(2e3,1e4);class oo extends zb{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LC.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="pendingRedirect",hh=new Map;class BC extends zb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const i=await zC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zC(r,e){const n=FC(e),i=HC(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function qC(r,e){hh.set(r._key(),e)}function HC(r){return ps(r._redirectPersistence)}function FC(r){return ch(UC,r.config.apiKey,r.name)}async function GC(r,e,n=!1){if(hr(r.app))return Promise.reject(ui(r));const i=Io(r),o=kC(i,e),d=await new BC(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=10*60*1e3;class $C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!qb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(jr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KC&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(e))}saveEventToCache(e){this.cachedEventUids.add(g_(e)),this.lastProcessedEventTime=Date.now()}}function g_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function qb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(r,e={}){return Ei(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZC=/^https?/;async function WC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await YC(r);for(const n of e)try{if(JC(n))return}catch{}mr(r,"unauthorized-domain")}function JC(r){const e=Km(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!ZC.test(n))return!1;if(XC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Eu(3e4,6e4);function y_(){const r=Lr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function tI(r){return new Promise((e,n)=>{var i,o,u;function d(){y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y_(),n(jr(r,"network-request-failed"))},timeout:eI.get()})}if(!((o=(i=Lr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Lr().gapi)===null||u===void 0)&&u.load)d();else{const m=QR("iframefcb");return Lr()[m]=()=>{gapi.load?d():n(jr(r,"network-request-failed"))},Ab(`${$R()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw dh=null,e})}let dh=null;function nI(r){return dh=dh||tI(r),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Eu(5e3,15e3),sI="__/auth/iframe",iI="emulator/auth/iframe",aI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lI(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Ip(e,iI):`https://${r.config.authDomain}/${sI}`,i={apiKey:e.apiKey,appName:r.name,v:Co},o=oI.get(r.config.apiHost);o&&(i.eid=o);const u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${_u(i).slice(1)}`}async function uI(r){const e=await nI(r),n=Lr().gapi;return Oe(n,r,"internal-error"),e.open({where:document.body,url:lI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aI,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=jr(r,"network-request-failed"),m=Lr().setTimeout(()=>{u(d)},rI.get());function p(){Lr().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hI=500,dI=600,fI="_blank",mI="http://localhost";class v_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pI(r,e,n,i=hI,o=dI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p=Object.assign(Object.assign({},cI),{width:i.toString(),height:o.toString(),top:u,left:d}),g=_n().toLowerCase();n&&(m=_b(g)?fI:n),yb(g)&&(e=e||mI,p.scrollbars="yes");const _=Object.entries(p).reduce((x,[k,N])=>`${x}${k}=${N},`,"");if(LR(g)&&m!=="_self")return gI(e||"",m),new v_(null);const S=window.open(e||"",m,_);Oe(S,r,"popup-blocked");try{S.focus()}catch{}return new v_(S)}function gI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="__/auth/handler",vI="emulator/auth/handler",_I=encodeURIComponent("fac");async function __(r,e,n,i,o,u){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Co,eventId:o};if(e instanceof Ib){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",a1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))d[_]=S}if(e instanceof bu){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(d.scopes=_.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const p=await r._getAppCheckToken(),g=p?`#${_I}=${encodeURIComponent(p)}`:"";return`${EI(r)}?${_u(m).slice(1)}${g}`}function EI({config:r}){return r.emulator?Ip(r,vI):`https://${r.authDomain}/${yI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class bI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vb,this._completeRedirectFn=GC,this._overrideRedirectResult=qC}async _openPopup(e,n,i,o){var u;bs((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await __(e,n,i,Km(),o);return pI(e,d,kp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await __(e,n,i,Km(),o);return SC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(bs(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uI(e),i=new $C(e);return n.register("authEvent",o=>(Oe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Im,{type:Im},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Im];d!==void 0&&n(!!d),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Sb()||vb()||Dp()}}const xI=bI;var E_="@firebase/auth",b_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wI(r){mo(new ia("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wb(r)},g=new FR(i,o,u,p);return eC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),mo(new ia("auth-internal",e=>{const n=Io(e.getProvider("auth").getImmediate());return(i=>new TI(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(E_,b_,SI(r)),li(E_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=5*60,RI=eb("authIdTokenMaxAge")||AI;let x_=null;const CI=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>RI)return;const o=n==null?void 0:n.token;x_!==o&&(x_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function II(r=ab()){const e=Ap(r,"auth");if(e.isInitialized())return e.getImmediate();const n=JR(r,{popupRedirectResolver:xI,persistence:[MC,bC,Vb]}),i=eb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=CI(u.toString());yC(n,d,()=>d(n.currentUser)),gC(n,m=>d(m))}}const o=WE("auth");return o&&tC(n,`http://${o}`),n}function NI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}GR({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const u=jr("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",NI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wI("Browser");var DI="firebase",OI="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(DI,OI,"app");var T_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ci,Hb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function D(){}D.prototype=R.prototype,C.D=R.prototype,C.prototype=new D,C.prototype.constructor=C,C.C=function(V,U,L){for(var A=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)A[Ee-2]=arguments[Ee];return R.prototype[U].apply(V,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,D){D||(D=0);var V=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)V[U]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(U=0;16>U;++U)V[U]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=C.g[0],D=C.g[1],U=C.g[2];var L=C.g[3],A=R+(L^D&(U^L))+V[0]+3614090360&4294967295;R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+V[1]+3905402710&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+V[2]+606105819&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+V[3]+3250441966&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+V[4]+4118548399&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+V[5]+1200080426&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+V[6]+2821735955&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+V[7]+4249261313&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+V[8]+1770035416&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+V[9]+2336552879&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+V[10]+4294925233&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+V[11]+2304563134&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+V[12]+1804603682&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+V[13]+4254626195&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+V[14]+2792965006&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+V[15]+1236535329&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(U^L&(D^U))+V[1]+4129170786&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+V[6]+3225465664&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+V[11]+643717713&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+V[0]+3921069994&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+V[5]+3593408605&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+V[10]+38016083&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+V[15]+3634488961&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+V[4]+3889429448&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+V[9]+568446438&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+V[14]+3275163606&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+V[3]+4107603335&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+V[8]+1163531501&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+V[13]+2850285829&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+V[2]+4243563512&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+V[7]+1735328473&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+V[12]+2368359562&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(D^U^L)+V[5]+4294588738&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+V[8]+2272392833&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+V[11]+1839030562&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+V[14]+4259657740&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+V[1]+2763975236&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+V[4]+1272893353&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+V[7]+4139469664&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+V[10]+3200236656&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+V[13]+681279174&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+V[0]+3936430074&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+V[3]+3572445317&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+V[6]+76029189&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+V[9]+3654602809&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+V[12]+3873151461&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+V[15]+530742520&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+V[2]+3299628645&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(U^(D|~L))+V[0]+4096336452&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+V[7]+1126891415&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+V[14]+2878612391&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+V[5]+4237533241&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+V[12]+1700485571&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+V[3]+2399980690&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+V[10]+4293915773&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+V[1]+2240044497&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+V[8]+1873313359&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+V[15]+4264355552&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+V[6]+2734768916&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+V[13]+1309151649&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+V[4]+4149444226&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+V[11]+3174756917&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+V[2]+718787259&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(U+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+L&4294967295}i.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var D=R-this.blockSize,V=this.B,U=this.h,L=0;L<R;){if(U==0)for(;L<=D;)o(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<R;)if(V[U++]=C.charCodeAt(L++),U==this.blockSize){o(this,V),U=0;break}}else for(;L<R;)if(V[U++]=C[L++],U==this.blockSize){o(this,V),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var D=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=D&255,D/=256;for(this.u(C),C=Array(16),R=D=0;4>R;++R)for(var V=0;32>V;V+=8)C[D++]=this.g[R]>>>V&255;return C};function u(C,R){var D=m;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=R(C)}function d(C,R){this.h=R;for(var D=[],V=!0,U=C.length-1;0<=U;U--){var L=C[U]|0;V&&L==R||(D[U]=L,V=!1)}this.g=D}var m={};function p(C){return-128<=C&&128>C?u(C,function(R){return new d([R|0],0>R?-1:0)}):new d([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return S;if(0>C)return M(g(-C));for(var R=[],D=1,V=0;C>=D;V++)R[V]=C/D|0,D*=4294967296;return new d(R,0)}function _(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return M(_(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(R,8)),V=S,U=0;U<C.length;U+=8){var L=Math.min(8,C.length-U),A=parseInt(C.substring(U,U+L),R);8>L?(L=g(Math.pow(R,L)),V=V.j(L).add(g(A))):(V=V.j(D),V=V.add(g(A)))}return V}var S=p(0),x=p(1),k=p(16777216);r=d.prototype,r.m=function(){if(B(this))return-M(this).m();for(var C=0,R=1,D=0;D<this.g.length;D++){var V=this.i(D);C+=(0<=V?V:4294967296+V)*R,R*=4294967296}return C},r.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(B(this))return"-"+M(this).toString(C);for(var R=g(Math.pow(C,6)),D=this,V="";;){var U=te(D,R).g;D=z(D,U.j(R));var L=((0<D.g.length?D.g[0]:D.h)>>>0).toString(C);if(D=U,N(D))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},r.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function B(C){return C.h==-1}r.l=function(C){return C=z(this,C),B(C)?-1:N(C)?0:1};function M(C){for(var R=C.g.length,D=[],V=0;V<R;V++)D[V]=~C.g[V];return new d(D,~C.h).add(x)}r.abs=function(){return B(this)?M(this):this},r.add=function(C){for(var R=Math.max(this.g.length,C.g.length),D=[],V=0,U=0;U<=R;U++){var L=V+(this.i(U)&65535)+(C.i(U)&65535),A=(L>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);V=A>>>16,L&=65535,A&=65535,D[U]=A<<16|L}return new d(D,D[D.length-1]&-2147483648?-1:0)};function z(C,R){return C.add(M(R))}r.j=function(C){if(N(this)||N(C))return S;if(B(this))return B(C)?M(this).j(M(C)):M(M(this).j(C));if(B(C))return M(this.j(M(C)));if(0>this.l(k)&&0>C.l(k))return g(this.m()*C.m());for(var R=this.g.length+C.g.length,D=[],V=0;V<2*R;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<C.g.length;U++){var L=this.i(V)>>>16,A=this.i(V)&65535,Ee=C.i(U)>>>16,ye=C.i(U)&65535;D[2*V+2*U]+=A*ye,H(D,2*V+2*U),D[2*V+2*U+1]+=L*ye,H(D,2*V+2*U+1),D[2*V+2*U+1]+=A*Ee,H(D,2*V+2*U+1),D[2*V+2*U+2]+=L*Ee,H(D,2*V+2*U+2)}for(V=0;V<R;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=R;V<2*R;V++)D[V]=0;return new d(D,0)};function H(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function Z(C,R){this.g=C,this.h=R}function te(C,R){if(N(R))throw Error("division by zero");if(N(C))return new Z(S,S);if(B(C))return R=te(M(C),R),new Z(M(R.g),M(R.h));if(B(R))return R=te(C,M(R)),new Z(M(R.g),R.h);if(30<C.g.length){if(B(C)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var D=x,V=R;0>=V.l(C);)D=Y(D),V=Y(V);var U=se(D,1),L=se(V,1);for(V=se(V,2),D=se(D,2);!N(V);){var A=L.add(V);0>=A.l(C)&&(U=U.add(D),L=A),V=se(V,1),D=se(D,1)}return R=z(C,U.j(R)),new Z(U,R)}for(U=S;0<=C.l(R);){for(D=Math.max(1,Math.floor(C.m()/R.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=g(D),A=L.j(R);B(A)||0<A.l(C);)D-=V,L=g(D),A=L.j(R);N(L)&&(L=x),U=U.add(L),C=z(C,A)}return new Z(U,C)}r.A=function(C){return te(this,C).h},r.and=function(C){for(var R=Math.max(this.g.length,C.g.length),D=[],V=0;V<R;V++)D[V]=this.i(V)&C.i(V);return new d(D,this.h&C.h)},r.or=function(C){for(var R=Math.max(this.g.length,C.g.length),D=[],V=0;V<R;V++)D[V]=this.i(V)|C.i(V);return new d(D,this.h|C.h)},r.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),D=[],V=0;V<R;V++)D[V]=this.i(V)^C.i(V);return new d(D,this.h^C.h)};function Y(C){for(var R=C.g.length+1,D=[],V=0;V<R;V++)D[V]=C.i(V)<<1|C.i(V-1)>>>31;return new d(D,C.h)}function se(C,R){var D=R>>5;R%=32;for(var V=C.g.length-D,U=[],L=0;L<V;L++)U[L]=0<R?C.i(L+D)>>>R|C.i(L+D+1)<<32-R:C.i(L+D);return new d(U,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Hb=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=_,ci=d}).apply(typeof T_<"u"?T_:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fb,Ql,Gb,fh,Ym,Kb,$b,Qb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,E){return c==Array.prototype||c==Object.prototype||(c[v]=E.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var v=0;v<c.length;++v){var E=c[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function o(c,v){if(v)e:{var E=i;c=c.split(".");for(var w=0;w<c.length-1;w++){var G=c[w];if(!(G in E))break e;E=E[G]}c=c[c.length-1],w=E[c],v=v(w),v!=w&&v!=null&&e(E,c,{configurable:!0,writable:!0,value:v})}}function u(c,v){c instanceof String&&(c+="");var E=0,w=!1,G={next:function(){if(!w&&E<c.length){var ne=E++;return{value:v(ne,c[ne]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function g(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,E){return c.call.apply(c.bind,arguments)}function S(c,v,E){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),c.apply(v,G)}}return function(){return c.apply(v,arguments)}}function x(c,v,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,x.apply(null,arguments)}function k(c,v){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function N(c,v){function E(){}E.prototype=v.prototype,c.aa=v.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(w,G,ne){for(var _e=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)_e[Je-2]=arguments[Je];return v.prototype[G].apply(w,_e)}}function B(c){const v=c.length;if(0<v){const E=Array(v);for(let w=0;w<v;w++)E[w]=c[w];return E}return[]}function M(c,v){for(let E=1;E<arguments.length;E++){const w=arguments[E];if(p(w)){const G=c.length||0,ne=w.length||0;c.length=G+ne;for(let _e=0;_e<ne;_e++)c[G+_e]=w[_e]}else c.push(w)}}class z{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function H(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var Y=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function se(c,v,E){for(const w in c)v.call(E,c[w],w,c)}function C(c,v){for(const E in c)v.call(void 0,c[E],E,c)}function R(c){const v={};for(const E in c)v[E]=c[E];return v}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,v){let E,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(E in w)c[E]=w[E];for(let ne=0;ne<D.length;ne++)E=D[ne],Object.prototype.hasOwnProperty.call(w,E)&&(c[E]=w[E])}}function U(c){var v=1;c=c.split(":");const E=[];for(;0<v&&c.length;)E.push(c.shift()),v--;return c.length&&E.push(c.join(":")),E}function L(c){m.setTimeout(()=>{throw c},0)}function A(){var c=pe;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Ee{constructor(){this.h=this.g=null}add(v,E){const w=ye.get();w.set(v,E),this.h?this.h.next=w:this.g=w,this.h=w}}var ye=new z(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ie=!1,pe=new Ee,P=()=>{const c=m.Promise.resolve(void 0);ee=()=>{c.then(re)}};var re=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(E){L(E)}var v=ye;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ie=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};m.addEventListener("test",E,v),m.removeEventListener("test",E,v)}catch{}return c}();function ge(c,v){if(O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(Y){e:{try{te(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else E=="mouseover"?v=c.fromElement:E=="mouseout"&&(v=c.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:me[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ge.aa.h.call(this)}}N(ge,O);var me={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ae=0;function xe(c,v,E,w,G){this.listener=c,this.proxy=null,this.src=v,this.type=E,this.capture=!!w,this.ha=G,this.key=++ae,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ae(c){this.src=c,this.g={},this.h=0}Ae.prototype.add=function(c,v,E,w,G){var ne=c.toString();c=this.g[ne],c||(c=this.g[ne]=[],this.h++);var _e=Ie(c,v,w,G);return-1<_e?(v=c[_e],E||(v.fa=!1)):(v=new xe(v,this.src,ne,!!w,G),v.fa=E,c.push(v)),v};function rt(c,v){var E=v.type;if(E in c.g){var w=c.g[E],G=Array.prototype.indexOf.call(w,v,void 0),ne;(ne=0<=G)&&Array.prototype.splice.call(w,G,1),ne&&(ve(v),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Ie(c,v,E,w){for(var G=0;G<c.length;++G){var ne=c[G];if(!ne.da&&ne.listener==v&&ne.capture==!!E&&ne.ha==w)return G}return-1}var Rt="closure_lm_"+(1e6*Math.random()|0),Vt={};function Fe(c,v,E,w,G){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Fe(c,v[ne],E,w,G);return null}return E=Ue(E),c&&c[le]?c.K(v,E,g(w)?!!w.capture:!1,G):_t(c,v,E,!1,w,G)}function _t(c,v,E,w,G,ne){if(!v)throw Error("Invalid event type");var _e=g(G)?!!G.capture:!!G,Je=Dt(c);if(Je||(c[Rt]=Je=new Ae(c)),E=Je.add(v,E,w,_e,ne),E.proxy)return E;if(w=ht(),E.proxy=w,w.src=c,w.listener=E,c.addEventListener)J||(G=_e),G===void 0&&(G=!1),c.addEventListener(v.toString(),w,G);else if(c.attachEvent)c.attachEvent(Gt(v.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ht(){function c(E){return v.call(c.src,c.listener,E)}const v=vr;return c}function jt(c,v,E,w,G){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)jt(c,v[ne],E,w,G);else w=g(w)?!!w.capture:!!w,E=Ue(E),c&&c[le]?(c=c.i,v=String(v).toString(),v in c.g&&(ne=c.g[v],E=Ie(ne,E,w,G),-1<E&&(ve(ne[E]),Array.prototype.splice.call(ne,E,1),ne.length==0&&(delete c.g[v],c.h--)))):c&&(c=Dt(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ie(v,E,w,G)),(E=-1<c?v[c]:null)&&Ct(E))}function Ct(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[le])rt(v.i,c);else{var E=c.type,w=c.proxy;v.removeEventListener?v.removeEventListener(E,w,c.capture):v.detachEvent?v.detachEvent(Gt(E),w):v.addListener&&v.removeListener&&v.removeListener(w),(E=Dt(v))?(rt(E,c),E.h==0&&(E.src=null,v[Rt]=null)):ve(c)}}}function Gt(c){return c in Vt?Vt[c]:Vt[c]="on"+c}function vr(c,v){if(c.da)c=!0;else{v=new ge(v,this);var E=c.listener,w=c.ha||c.src;c.fa&&Ct(c),c=E.call(w,v)}return c}function Dt(c){return c=c[Rt],c instanceof Ae?c:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(c){return typeof c=="function"?c:(c[sn]||(c[sn]=function(v){return c.handleEvent(v)}),c[sn])}function ke(){fe.call(this),this.i=new Ae(this),this.M=this,this.F=null}N(ke,fe),ke.prototype[le]=!0,ke.prototype.removeEventListener=function(c,v,E,w){jt(this,c,v,E,w)};function Pe(c,v){var E,w=c.F;if(w)for(E=[];w;w=w.F)E.push(w);if(c=c.M,w=v.type||v,typeof v=="string")v=new O(v,c);else if(v instanceof O)v.target=v.target||c;else{var G=v;v=new O(w,c),V(v,G)}if(G=!0,E)for(var ne=E.length-1;0<=ne;ne--){var _e=v.g=E[ne];G=Ze(_e,w,!0,v)&&G}if(_e=v.g=c,G=Ze(_e,w,!0,v)&&G,G=Ze(_e,w,!1,v)&&G,E)for(ne=0;ne<E.length;ne++)_e=v.g=E[ne],G=Ze(_e,w,!1,v)&&G}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var E=c.g[v],w=0;w<E.length;w++)ve(E[w]);delete c.g[v],c.h--}}this.F=null},ke.prototype.K=function(c,v,E,w){return this.i.add(String(c),v,!1,E,w)},ke.prototype.L=function(c,v,E,w){return this.i.add(String(c),v,!0,E,w)};function Ze(c,v,E,w){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,ne=0;ne<v.length;++ne){var _e=v[ne];if(_e&&!_e.da&&_e.capture==E){var Je=_e.listener,$t=_e.ha||_e.src;_e.fa&&rt(c.i,_e),G=Je.call($t,w)!==!1&&G}}return G&&!w.defaultPrevented}function gt(c,v,E){if(typeof c=="function")E&&(c=x(c,E));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(c,v||0)}function wi(c){c.g=gt(()=>{c.g=null,c.i&&(c.i=!1,wi(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class da extends fe{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:wi(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(c){fe.call(this),this.h=c,this.g={}}N(qr,fe);var Rn=[];function _r(c){se(c.g,function(v,E){this.g.hasOwnProperty(E)&&Ct(v)},c),c.g={}}qr.prototype.N=function(){qr.aa.N.call(this),_r(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=m.JSON.stringify,fa=m.JSON.parse,Ai=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Vo(){}Vo.prototype.h=null;function jo(c){return c.h||(c.h=c.i())}function Lo(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){O.call(this,"d")}N(Fr,O);function Uo(){O.call(this,"c")}N(Uo,O);var Er={},Bo=null;function ws(){return Bo=Bo||new ke}Er.La="serverreachability";function ma(c){O.call(this,Er.La,c)}N(ma,O);function As(c){const v=ws();Pe(v,new ma(v))}Er.STAT_EVENT="statevent";function Ou(c,v){O.call(this,Er.STAT_EVENT,c),this.stat=v}N(Ou,O);function xt(c){const v=ws();Pe(v,new Ou(v,c))}Er.Ma="timingevent";function Kt(c,v){O.call(this,Er.Ma,c),this.size=v}N(Kt,O);function Lt(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},v)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function zo(c,v,E,w,G,ne){c.info(function(){if(c.g)if(ne)for(var _e="",Je=ne.split("&"),$t=0;$t<Je.length;$t++){var et=Je[$t].split("=");if(1<et.length){var Jt=et[0];et=et[1];var Qt=Jt.split("_");_e=2<=Qt.length&&Qt[1]=="type"?_e+(Jt+"="+et+"&"):_e+(Jt+"=redacted&")}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+v+`
`+E+`
`+_e})}function yd(c,v,E,w,G,ne,_e){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+v+`
`+E+`
`+ne+" "+_e})}function Rs(c,v,E,w){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ri(c,E)+(w?" "+w:"")})}function Mu(c,v){c.info(function(){return"TIMEOUT: "+v})}Gn.prototype.info=function(){};function Ri(c,v){if(!c.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var w=E[c];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var _e=1;_e<G.length;_e++)G[_e]=""}}}}return ir(E)}catch{return v}}var Cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},br;function xr(){}N(xr,Vo),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},br=new xr;function En(c,v,E,w){this.j=c,this.i=v,this.l=E,this.R=w||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var qo={},pa={};function ar(c,v,E){c.L=1,c.v=Oi(kn(v)),c.m=E,c.P=!0,Kr(c,null)}function Kr(c,v){c.F=Date.now(),Ci(c),c.A=kn(c.v);var E=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Qo(E.i,"t",w),c.C=0,E=c.j.J,c.h=new Ot,c.g=Yu(c.j,E?v:null,!c.m),0<c.O&&(c.M=new da(x(c.Y,c,c.g),c.O)),v=c.U,E=c.g,w=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(Rn[0]=G.toString()),G=Rn);for(var ne=0;ne<G.length;ne++){var _e=Fe(E,G[ne],w||v.handleEvent,!1,v.h||v);if(!_e)break;v.g[_e.key]=_e}v=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),As(),zo(c.i,c.u,c.A,c.l,c.R,c.m)}En.prototype.ca=function(c){c=c.target;const v=this.M;v&&Yn(c)==3?v.j():this.Y(c)},En.prototype.Y=function(c){try{if(c==this.g)e:{const Qt=Yn(this.g);var v=this.g.Ba();const es=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||zu(this.g)))){this.J||Qt!=4||v==7||(v==8||0>=es?As(3):As(2)),Is(this);var E=this.g.Z();this.X=E;t:if(ku(this)){var w=zu(this.g);c="";var G=w.length,ne=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Tr(this);var _e="";break t}this.h.i=new m.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,c+=this.h.i.decode(w[v],{stream:!(ne&&v==G-1)});w.length=0,this.h.g+=c,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=E==200,yd(this.i,this.u,this.A,this.l,this.R,Qt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,$t=this.g;if((Je=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Je)){var et=Je;break t}}et=null}if(E=et)Rs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ii(this,E);else{this.o=!1,this.s=3,xt(12),an(this),Tr(this);break e}}if(this.P){E=!0;let on;for(;!this.J&&this.C<_e.length;)if(on=Pu(this,_e),on==pa){Qt==4&&(this.s=4,xt(14),E=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(on==qo){this.s=4,xt(15),Rs(this.i,this.l,_e,"[Invalid Chunk]"),E=!1;break}else Rs(this.i,this.l,on,null),Ii(this,on);if(ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||_e.length!=0||this.h.h||(this.s=1,xt(16),E=!1),this.o=this.o&&E,!E)Rs(this.i,this.l,_e,"[Invalid Chunked Response]"),an(this),Tr(this);else if(0<_e.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Bi(Jt),Jt.M=!0,xt(11))}}else Rs(this.i,this.l,_e,null),Ii(this,_e);Qt==4&&an(this),this.o&&!this.J&&(Qt==4?Ku(this.j,this):(this.o=!1,Ci(this)))}else xd(this.g),E==400&&0<_e.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),an(this),Tr(this)}}}catch{}finally{}};function ku(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Pu(c,v){var E=c.C,w=v.indexOf(`
`,E);return w==-1?pa:(E=Number(v.substring(E,w)),isNaN(E)?qo:(w+=1,w+E>v.length?pa:(v=v.slice(w,w+E),c.C=w+E,v)))}En.prototype.cancel=function(){this.J=!0,an(this)};function Ci(c){c.S=Date.now()+c.I,Vu(c,c.I)}function Vu(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Lt(x(c.ba,c),v)}function Is(c){c.B&&(m.clearTimeout(c.B),c.B=null)}En.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Mu(this.i,this.A),this.L!=2&&(As(),xt(17)),an(this),this.s=2,Tr(this)):Vu(this,this.S-c)};function Tr(c){c.j.G==0||c.J||Ku(c.j,c)}function an(c){Is(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,_r(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function Ii(c,v){try{var E=c.j;if(E.G!=0&&(E.g==c||Ho(E.h,c))){if(!c.K&&Ho(E.h,c)&&E.G==3){try{var w=E.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)Ra(E),wa(E);else break e;Jo(E),xt(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=Lt(x(E.Za,E),6e3));if(1>=ya(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Jr(E,11)}else if((c.K||E.g==c)&&Ra(E),!H(v))for(G=E.Da.g.parse(v),v=0;v<G.length;v++){let et=G[v];if(E.T=et[0],et=et[1],E.G==2)if(et[0]=="c"){E.K=et[1],E.ia=et[2];const Jt=et[3];Jt!=null&&(E.la=Jt,E.j.info("VER="+E.la));const Qt=et[4];Qt!=null&&(E.Aa=Qt,E.j.info("SVER="+E.Aa));const es=et[5];es!=null&&typeof es=="number"&&0<es&&(w=1.5*es,E.L=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const on=c.g;if(on){const Nr=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var ne=w.h;ne.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(va(ne,ne.h),ne.h=null))}if(w.D){const tl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(w.ya=tl,dt(w.I,w.D,tl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),w=E;var _e=c;if(w.qa=Qu(w,w.J?w.ia:null,w.W),_e.K){bn(w.h,_e);var Je=_e,$t=w.L;$t&&(Je.I=$t),Je.B&&(Is(Je),Ci(Je)),w.g=_e}else Fu(w);0<E.i.length&&Aa(E)}else et[0]!="stop"&&et[0]!="close"||Jr(E,7);else E.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Jr(E,7):Zo(E):et[0]!="noop"&&E.l&&E.l.ta(et),E.v=0)}}As(4)}catch{}}var ju=class{constructor(c,v){this.g=c,this.map=v}};function $r(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ga(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ya(c){return c.h?1:c.g?c.g.size:0}function Ho(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function va(c,v){c.g?c.g.add(v):c.h=v}function bn(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}$r.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Fo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const E of c.g.values())v=v.concat(E.D);return v}return B(c.i)}function vd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var v=[],E=c.length,w=0;w<E;w++)v.push(c[w]);return v}v=[],E=0;for(w in c)v[E++]=c[w];return v}function _a(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var v=[];c=c.length;for(var E=0;E<c;E++)v.push(E);return v}v=[],E=0;for(const w in c)v[E++]=w;return v}}}function Go(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var E=_a(c),w=vd(c),G=w.length,ne=0;ne<G;ne++)v.call(void 0,w[ne],E&&E[ne],c)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(c,v){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var w=c[E].indexOf("="),G=null;if(0<=w){var ne=c[E].substring(0,w);G=c[E].substring(w+1)}else ne=c[E];v(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ut(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ut){this.h=c.h,Di(this,c.j),this.o=c.o,this.g=c.g,Ns(this,c.s),this.l=c.l;var v=c.i,E=new Yr;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Qr(this,E),this.m=c.m}else c&&(v=String(c).match(Ni))?(this.h=!1,Di(this,v[1]||"",!0),this.o=Kn(v[2]||""),this.g=Kn(v[3]||"",!0),Ns(this,v[4]),this.l=Kn(v[5]||"",!0),Qr(this,v[6]||"",!0),this.m=Kn(v[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}Ut.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Mi(v,Ko,!0),":");var E=this.g;return(E||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Mi(v,Ko,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Mi(E,E.charAt(0)=="/"?Ed:$o,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Mi(E,Ea)),c.join("")};function kn(c){return new Ut(c)}function Di(c,v,E){c.j=E?Kn(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Ns(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function Qr(c,v,E){v instanceof Yr?(c.i=v,Uu(c.i,c.h)):(E||(v=Mi(v,bd)),c.i=new Yr(v,c.h))}function dt(c,v,E){c.i.set(v,E)}function Oi(c){return dt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Kn(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Mi(c,v,E){return typeof c=="string"?(c=encodeURI(c).replace(v,Lu),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ko=/[#\/\?@]/g,$o=/[#\?:]/g,Ed=/[#\?]/g,bd=/[#\?@]/g,Ea=/#/g;function Yr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&_d(c.i,function(v,E){c.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}r=Yr.prototype,r.add=function(c,v){$n(this),this.i=null,c=Sr(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(v),this.h+=1,this};function Xr(c,v){$n(c),v=Sr(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Zr(c,v){return $n(c),v=Sr(c,v),c.g.has(v)}r.forEach=function(c,v){$n(this),this.g.forEach(function(E,w){E.forEach(function(G){c.call(v,G,w,this)},this)},this)},r.na=function(){$n(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let w=0;w<v.length;w++){const G=c[w];for(let ne=0;ne<G.length;ne++)E.push(v[w])}return E},r.V=function(c){$n(this);let v=[];if(typeof c=="string")Zr(this,c)&&(v=v.concat(this.g.get(Sr(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)v=v.concat(c[E])}return v},r.set=function(c,v){return $n(this),this.i=null,c=Sr(this,c),Zr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},r.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Qo(c,v,E){Xr(c,v),0<E.length&&(c.i=null,c.g.set(Sr(c,v),B(E)),c.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var w=v[E];const ne=encodeURIComponent(String(w)),_e=this.V(w);for(w=0;w<_e.length;w++){var G=ne;_e[w]!==""&&(G+="="+encodeURIComponent(String(_e[w]))),c.push(G)}}return this.i=c.join("&")};function Sr(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function Uu(c,v){v&&!c.j&&($n(c),c.i=null,c.g.forEach(function(E,w){var G=w.toLowerCase();w!=G&&(Xr(this,w),Qo(this,G,E))},c)),c.j=v}function ki(c,v){const E=new Gn;if(m.Image){const w=new Image;w.onload=k(Qn,E,"TestLoadImage: loaded",!0,v,w),w.onerror=k(Qn,E,"TestLoadImage: error",!1,v,w),w.onabort=k(Qn,E,"TestLoadImage: abort",!1,v,w),w.ontimeout=k(Qn,E,"TestLoadImage: timeout",!1,v,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else v(!1)}function or(c,v){const E=new Gn,w=new AbortController,G=setTimeout(()=>{w.abort(),Qn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:w.signal}).then(ne=>{clearTimeout(G),ne.ok?Qn(E,"TestPingServer: ok",!0,v):Qn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Qn(E,"TestPingServer: error",!1,v)})}function Qn(c,v,E,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(E)}catch{}}function Pi(){this.g=new Ai}function wr(c,v,E){const w=E||"";try{Go(c,function(G,ne){let _e=G;g(G)&&(_e=ir(G)),v.push(w+ne+"="+encodeURIComponent(_e))})}catch(G){throw v.push(w+"type="+encodeURIComponent("_badmap")),G}}function Ds(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Ds,Vo),Ds.prototype.g=function(){return new Wr(this.l,this.j)},Ds.prototype.i=function(c){return function(){return c}}({});function Wr(c,v){ke.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Wr,ke),r=Wr.prototype,r.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Rr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Ar(this):Rr(this),this.readyState==3&&Yo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},r.Qa=function(c){this.g&&(this.response=c,Ar(this))},r.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rr(c)}r.setRequestHeader=function(c,v){this.u.append(c,v)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=v.next();return c.join(`\r
`)};function Rr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xo(c){let v="";return se(c,function(E,w){v+=w,v+=":",v+=E,v+=`\r
`}),v}function Wt(c,v,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Xo(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):dt(c,v,E))}function at(c){ke.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(at,ke);var ba=/^https?$/i,Vi=["POST","PUT"];r=at.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,v,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():br.g(),this.v=this.o?jo(this.o):jo(br),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ne){Bu(this,ne);return}if(c=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)E.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const ne of w.keys())E.set(ne,w.get(ne));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Vi,v,void 0))||w||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of E)this.g.setRequestHeader(ne,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ji(this),this.u=!0,this.g.send(c),this.u=!1}catch(ne){Bu(this,ne)}};function Bu(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,xa(c),Cr(c)}function xa(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pe(this,"complete"),Pe(this,"abort"),Cr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),at.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},r.bb=function(){Ta(this)};function Ta(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Yn(c)!=4||c.Z()!=2)){if(c.u&&Yn(c)==4)gt(c.Ea,0,c);else if(Pe(c,"readystatechange"),Yn(c)==4){c.h=!1;try{const _e=c.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var w;if(w=_e===0){var G=String(c.D).match(Ni)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),w=!ba.test(G?G.toLowerCase():"")}E=w}if(E)Pe(c,"complete"),Pe(c,"success");else{c.m=6;try{var ne=2<Yn(c)?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.Z()+"]",xa(c)}}finally{Cr(c)}}}}function Cr(c,v){if(c.g){ji(c);const E=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||Pe(c,"ready");try{E.onreadystatechange=w}catch{}}}function ji(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Yn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),fa(v)}};function zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(c){const v={};c=(c.g&&2<=Yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(H(c[w]))continue;var E=U(c[w]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=v[G]||[];v[G]=ne,ne.push(E)}C(v,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(c,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||v}function Sa(c){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,c),this.cb=Li("retryDelaySeedMs",1e4,c),this.Wa=Li("forwardChannelMaxRetries",2,c),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $r(c&&c.concurrentRequestLimit),this.Da=new Pi,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Sa.prototype,r.la=8,r.G=1,r.connect=function(c,v,E,w){xt(0),this.W=c,this.H=v||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.I=Qu(this,null,this.W),Aa(this)};function Zo(c){if(qu(c),c.G==3){var v=c.U++,E=kn(c.I);if(dt(E,"SID",c.K),dt(E,"RID",v),dt(E,"TYPE","terminate"),Ui(c,E),v=new En(c,c.j,v),v.L=2,v.v=Oi(kn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=v.v,E=!0),E||(v.g=Yu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ci(v)}$u(c)}function wa(c){c.g&&(Bi(c),c.g.cancel(),c.g=null)}function qu(c){wa(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ra(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Aa(c){if(!ga(c.h)&&!c.s){c.s=!0;var v=c.Ga;ee||P(),ie||(ee(),ie=!0),pe.add(v,c),c.B=0}}function Td(c,v){return ya(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Lt(x(c.Ga,c,v),el(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new En(this,this.j,c);let ne=this.o;if(this.S&&(ne?(ne=R(ne),V(ne,this.S)):ne=this.S),this.m!==null||this.O||(G.H=ne,ne=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Hu(this,G,v),E=kn(this.I),dt(E,"RID",c),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Ui(this,E),ne&&(this.O?v="headers="+encodeURIComponent(String(Xo(ne)))+"&"+v:this.m&&Wt(E,this.m,ne)),va(this.h,G),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",v),dt(E,"SID","null"),G.T=!0,ar(G,E,null)):ar(G,E,v),this.G=2}}else this.G==3&&(c?Wo(this,c):this.i.length==0||ga(this.h)||Wo(this))};function Wo(c,v){var E;v?E=v.l:E=c.U++;const w=kn(c.I);dt(w,"SID",c.K),dt(w,"RID",E),dt(w,"AID",c.T),Ui(c,w),c.m&&c.o&&Wt(w,c.m,c.o),E=new En(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Hu(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),va(c.h,E),ar(E,w,v)}function Ui(c,v){c.H&&se(c.H,function(E,w){dt(v,w,E)}),c.l&&Go({},function(E,w){dt(v,w,E)})}function Hu(c,v,E){E=Math.min(c.i.length,E);var w=c.l?x(c.l.Na,c.l,c):null;e:{var G=c.i;let ne=-1;for(;;){const _e=["count="+E];ne==-1?0<E?(ne=G[0].g,_e.push("ofs="+ne)):ne=0:_e.push("ofs="+ne);let Je=!0;for(let $t=0;$t<E;$t++){let et=G[$t].g;const Jt=G[$t].map;if(et-=ne,0>et)ne=Math.max(0,G[$t].g-100),Je=!1;else try{wr(Jt,_e,"req"+et+"_")}catch{w&&w(Jt)}}if(Je){w=_e.join("&");break e}}}return c=c.i.splice(0,E),v.D=c,w}function Fu(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;ee||P(),ie||(ee(),ie=!0),pe.add(v,c),c.v=0}}function Jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Lt(x(c.Fa,c),el(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Lt(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),wa(this),Gu(this))};function Bi(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Gu(c){c.g=new En(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=kn(c.qa);dt(v,"RID","rpc"),dt(v,"SID",c.K),dt(v,"AID",c.T),dt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&dt(v,"TO",c.ja),dt(v,"TYPE","xmlhttp"),Ui(c,v),c.m&&c.o&&Wt(v,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=Oi(kn(v)),E.m=null,E.P=!0,Kr(E,c)}r.Za=function(){this.C!=null&&(this.C=null,wa(this),Jo(this),xt(19))};function Ra(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ku(c,v){var E=null;if(c.g==v){Ra(c),Bi(c),c.g=null;var w=2}else if(Ho(c.h,v))E=v.D,bn(c.h,v),w=1;else return;if(c.G!=0){if(v.o)if(w==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var G=c.B;w=ws(),Pe(w,new Kt(w,E)),Aa(c)}else Fu(c);else if(G=v.s,G==3||G==0&&0<v.X||!(w==1&&Td(c,v)||w==2&&Jo(c)))switch(E&&0<E.length&&(v=c.h,v.i=v.i.concat(E)),G){case 1:Jr(c,5);break;case 4:Jr(c,10);break;case 3:Jr(c,6);break;default:Jr(c,2)}}}function el(c,v){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*v}function Jr(c,v){if(c.j.info("Error code "+v),v==2){var E=x(c.fb,c),w=c.Xa;const G=!w;w=new Ut(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Di(w,"https"),Oi(w),G?ki(w.toString(),E):or(w.toString(),E)}else xt(2);c.G=0,c.l&&c.l.sa(v),$u(c),qu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function $u(c){if(c.G=0,c.ka=[],c.l){const v=Fo(c.h);(v.length!=0||c.i.length!=0)&&(M(c.ka,v),M(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function Qu(c,v,E){var w=E instanceof Ut?kn(E):new Ut(E);if(w.g!="")v&&(w.g=v+"."+w.g),Ns(w,w.s);else{var G=m.location;w=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var ne=new Ut(null);w&&Di(ne,w),v&&(ne.g=v),G&&Ns(ne,G),E&&(ne.l=E),w=ne}return E=c.D,v=c.ya,E&&v&&dt(w,E,v),dt(w,"VER",c.la),Ui(c,w),w}function Yu(c,v,E){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new at(new Ds({eb:E})):new at(c.pa),v.Ha(c.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}r=Xu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ca(){}Ca.prototype.g=function(c,v){return new xn(c,v)};function xn(c,v){ke.call(this),this.g=new Sa(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!H(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!H(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ir(this)}N(xn,ke),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Zo(this.g)},xn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=ir(c),c=E);v.i.push(new ju(v.Ya++,c)),v.G==3&&Aa(v)},xn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,xn.aa.N.call(this)};function Zu(c){Fr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const E in v){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}N(Zu,Fr);function Wu(){Uo.call(this),this.status=1}N(Wu,Uo);function Ir(c){this.g=c}N(Ir,Xu),Ir.prototype.ua=function(){Pe(this.g,"a")},Ir.prototype.ta=function(c){Pe(this.g,new Zu(c))},Ir.prototype.sa=function(c){Pe(this.g,new Wu)},Ir.prototype.ra=function(){Pe(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Qb=function(){return new Ca},$b=function(){return ws()},Kb=Er,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cs.NO_ERROR=0,Cs.TIMEOUT=8,Cs.HTTP_ERROR=6,fh=Cs,Gr.COMPLETE="complete",Gb=Gr,Lo.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",ke.prototype.listen=ke.prototype.K,Ql=Lo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Fb=at}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const S_="@firebase/firestore",w_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Sp("@firebase/firestore");function ro(){return oa.logLevel}function Te(r,...e){if(oa.logLevel<=Ye.DEBUG){const n=e.map(Vp);oa.debug(`Firestore (${Do}): ${r}`,...n)}}function xs(r,...e){if(oa.logLevel<=Ye.ERROR){const n=e.map(Vp);oa.error(`Firestore (${Do}): ${r}`,...n)}}function go(r,...e){if(oa.logLevel<=Ye.WARN){const n=e.map(Vp);oa.warn(`Firestore (${Do}): ${r}`,...n)}}function Vp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Yb(r,i,n)}function Yb(r,e,n){let i=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw xs(i),new Error(i)}function ot(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||Yb(e,o,i)}function Le(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class kI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PI{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let u=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ys,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ys)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new Xb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class VI{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jI{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new VI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0,3512);const i=u=>{u.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};const o=u=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=UI(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function He(r,e){return r<e?-1:r>e?1:0}function Xm(r,e){let n=0;for(;n<r.length&&n<e.length;){const i=r.codePointAt(n),o=e.codePointAt(n);if(i!==o){if(i<128&&o<128)return He(i,o);{const u=Zb(),d=BI(u.encode(R_(r,n)),u.encode(R_(e,n)));return d!==0?d:He(i,o)}}n+=i>65535?2:1}return He(r.length,e.length)}function R_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function BI(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return He(r[n],e[n]);return He(r.length,e.length)}function yo(r,e,n){return r.length===e.length&&r.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=-62135596800,I_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*I_);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C_)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I_}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-C_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new bt(0,0))}static max(){return new je(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="__name__";class Vr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Vr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return He(e.length,n.length)}static compareSegments(e,n){const i=Vr.isNumericId(e),o=Vr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Vr.extractNumericId(e).compare(Vr.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ci.fromString(e.substring(4,e.length-2))}}class Et extends Vr{construct(e,n,i){return new Et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(he.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const zI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Vr{construct(e,n,i){return new dn(e,n,i)}static isValidIdentifier(e){return zI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N_}static keyField(){return new dn([N_])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Se(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(u(),o++)}if(u(),d)throw new Se(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Et.fromString(e))}static fromName(e){return new Ce(Et.fromString(e).popFirst(5))}static empty(){return new Ce(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function qI(r,e){const n=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=je.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new fi(o,Ce.empty(),e)}function HI(r){return new fi(r.readTime,r.key,uu)}class fi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new fi(je.min(),Ce.empty(),uu)}static max(){return new fi(je.max(),Ce.empty(),uu)}}function FI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(r.documentKey,e.documentKey),n!==0?n:He(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(r){if(r.code!==he.FAILED_PRECONDITION||r.message!==GI)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,i)=>{n(e)})}static reject(e){return new de((n,i)=>{i(e)})}static waitFor(e){return new de((n,i)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>i(p))}),d=!0,u===o&&n()})}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next(o=>o?de.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,u)=>{i.push(n.call(this,o,u))}),this.waitFor(i)}static mapArray(e,n){return new de((i,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(_=>{d[g]=_,++m,m===u&&i(d)},_=>o(_))}})}static doWhile(e,n){return new de((i,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):i()};u()})}}function $I(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Qh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=-1;function Yh(r){return r==null}function Ch(r){return r===0&&1/r==-1/0}function QI(r){return typeof r=="number"&&Number.isInteger(r)&&!Ch(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="";function YI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=D_(e)),e=XI(r.get(n),e);return D_(e)}function XI(r,e){let n=e;const i=r.length;for(let o=0;o<i;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case Jb:n+="";break;default:n+=u}}return n}function D_(r){return r+Jb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function bi(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function ex(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??hn.RED,this.left=o??hn.EMPTY,this.right=u??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new hn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new M_(this.data.getIterator())}getIteratorFrom(e){return new M_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class M_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new qn([])}unionWith(e){let n=new Zt(dn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tx("Invalid base64 string: "+u):u}}(e);return new fn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const ZI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(r){if(ot(!!r,39018),typeof r=="string"){let e=0;const n=ZI.exec(r);if(ot(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(r.seconds),nanos:Pt(r.nanos)}}function Pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pi(r){return typeof r=="string"?fn.fromBase64String(r):fn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="server_timestamp",rx="__type__",sx="__previous_value__",ix="__local_write_time__";function Lp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[rx])===null||n===void 0?void 0:n.stringValue)===nx}function Xh(r){const e=r.mapValue.fields[sx];return Lp(e)?Xh(e):e}function cu(r){const e=mi(r.mapValue.fields[ix].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,i,o,u,d,m,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Ih="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__type__",JI="__max__",rh={mapValue:{}},ox="__vector__",Nh="value";function gi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Lp(r)?4:tN(r)?9007199254740991:eN(r)?10:11:Me(28295,{value:r})}function zr(r,e){if(r===e)return!0;const n=gi(r);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return cu(r).isEqual(cu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=mi(o.timestampValue),m=mi(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return pi(o.bytesValue).isEqual(pi(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Pt(o.geoPointValue.latitude)===Pt(u.geoPointValue.latitude)&&Pt(o.geoPointValue.longitude)===Pt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Pt(o.integerValue)===Pt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Pt(o.doubleValue),m=Pt(u.doubleValue);return d===m?Ch(d)===Ch(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return yo(r.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(O_(d)!==O_(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!zr(d[p],m[p])))return!1;return!0}(r,e);default:return Me(52216,{left:r})}}function du(r,e){return(r.values||[]).find(n=>zr(n,e))!==void 0}function vo(r,e){if(r===e)return 0;const n=gi(r),i=gi(e);if(n!==i)return He(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Pt(u.integerValue||u.doubleValue),p=Pt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return k_(r.timestampValue,e.timestampValue);case 4:return k_(cu(r),cu(e));case 5:return Xm(r.stringValue,e.stringValue);case 6:return function(u,d){const m=pi(u),p=pi(d);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const _=He(m[g],p[g]);if(_!==0)return _}return He(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=He(Pt(u.latitude),Pt(d.latitude));return m!==0?m:He(Pt(u.longitude),Pt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return P_(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,g,_;const S=u.fields||{},x=d.fields||{},k=(m=S[Nh])===null||m===void 0?void 0:m.arrayValue,N=(p=x[Nh])===null||p===void 0?void 0:p.arrayValue,B=He(((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0,((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0);return B!==0?B:P_(k,N)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===rh.mapValue&&d===rh.mapValue)return 0;if(u===rh.mapValue)return 1;if(d===rh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let S=0;S<p.length&&S<_.length;++S){const x=Xm(p[S],_[S]);if(x!==0)return x;const k=vo(m[p[S]],g[_[S]]);if(k!==0)return k}return He(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function k_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const n=mi(r),i=mi(e),o=He(n.seconds,i.seconds);return o!==0?o:He(n.nanos,i.nanos)}function P_(r,e){const n=r.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=vo(n[o],i[o]);if(u)return u}return He(n.length,i.length)}function _o(r){return Zm(r)}function Zm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const i=mi(n);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return pi(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ce.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Zm(u);return i+"]"}(r.arrayValue):"mapValue"in r?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Zm(n.fields[d])}`;return o+"}"}(r.mapValue):Me(61005,{value:r})}function mh(r){switch(gi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(r);return e?16+mh(e):16;case 5:return 2*r.stringValue.length;case 6:return pi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,u)=>o+mh(u),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return bi(i.fields,(u,d)=>{o+=u.length+mh(d)}),o}(r.mapValue);default:throw Me(13486,{value:r})}}function V_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wm(r){return!!r&&"integerValue"in r}function Up(r){return!!r&&"arrayValue"in r}function j_(r){return!!r&&"nullValue"in r}function L_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ph(r){return!!r&&"mapValue"in r}function eN(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[ax])===null||n===void 0?void 0:n.stringValue)===ox}function eu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return bi(r.mapValue.fields,(n,i)=>e.mapValue.fields[n]=eu(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(r.arrayValue.values[n]);return e}return Object.assign({},r)}function tN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=dn.emptyPath(),i={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=m.popLast()}d?i[m.lastSegment()]=eu(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];ph(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){bi(n,(o,u)=>e[o]=u);for(const o of i)delete e[o]}clone(){return new Mn(eu(this.value))}}function lx(r){const e=[];return bi(r.fields,(n,i)=>{const o=new dn([n]);if(ph(i)){const u=lx(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,i,o,u,d,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new vn(e,0,je.min(),je.min(),je.min(),Mn.empty(),0)}static newFoundDocument(e,n,i,o){return new vn(e,1,n,je.min(),i,o,0)}static newNoDocument(e,n){return new vn(e,2,n,je.min(),je.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,je.min(),je.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function U_(r,e,n){let i=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?i=Ce.comparator(Ce.fromName(d.referenceValue),n.key):i=vo(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function B_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!zr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function nN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{}class Ht extends ux{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sN(e,n,i):n==="array-contains"?new oN(e,i):n==="in"?new lN(e,i):n==="not-in"?new uN(e,i):n==="array-contains-any"?new cN(e,i):new Ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iN(e,i):new aN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vo(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends ux{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pr(e,n)}matches(e){return cx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function cx(r){return r.op==="and"}function hx(r){return rN(r)&&cx(r)}function rN(r){for(const e of r.filters)if(e instanceof pr)return!1;return!0}function Jm(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+_o(r.value);if(hx(r))return r.filters.map(e=>Jm(e)).join(",");{const e=r.filters.map(n=>Jm(n)).join(",");return`${r.op}(${e})`}}function dx(r,e){return r instanceof Ht?function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&zr(i.value,o.value)}(r,e):r instanceof pr?function(i,o){return o instanceof pr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((u,d,m)=>u&&dx(d,o.filters[m]),!0):!1}(r,e):void Me(19439)}function fx(r){return r instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`}(r):r instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(fx).join(" ,")+"}"}(r):"Filter"}class sN extends Ht{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class iN extends Ht{constructor(e,n){super(e,"in",n),this.keys=mx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aN extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=mx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mx(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class oN extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Up(n)&&du(n.arrayValue,this.value)}}class lN extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class uN extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!du(this.value.arrayValue,n)}}class cN extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>du(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n=null,i=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function z_(r,e=null,n=[],i=[],o=null,u=null,d=null){return new hN(r,e,n,i,o,u,d)}function Bp(r){const e=Le(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Jm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(u){return u.field.canonicalString()+u.dir}(i)).join(","),Yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>_o(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>_o(i)).join(",")),e.Ie=n}return e.Ie}function zp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!nN(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!dx(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!B_(r.startAt,e.startAt)&&B_(r.endAt,e.endAt)}function ep(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n=null,i=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function dN(r,e,n,i,o,u,d,m){return new Tu(r,e,n,i,o,u,d,m)}function qp(r){return new Tu(r)}function q_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function px(r){return r.collectionGroup!==null}function tu(r){const e=Le(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Zt(dn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Oh(u,i))}),n.has(dn.keyField().canonicalString())||e.Ee.push(new Oh(dn.keyField(),i))}return e.Ee}function Ur(r){const e=Le(r);return e.de||(e.de=fN(e,tu(r))),e.de}function fN(r,e){if(r.limitType==="F")return z_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Oh(o.field,u)});const n=r.endAt?new Dh(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Dh(r.startAt.position,r.startAt.inclusive):null;return z_(r.path,r.collectionGroup,e,r.filters,r.limit,n,i)}}function tp(r,e){const n=r.filters.concat([e]);return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function np(r,e,n){return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Zh(r,e){return zp(Ur(r),Ur(e))&&r.limitType===e.limitType}function gx(r){return`${Bp(Ur(r))}|lt:${r.limitType}`}function so(r){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>fx(o)).join(", ")}]`),Yh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>_o(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>_o(o)).join(",")),`Target(${i})`}(Ur(r))}; limitType=${r.limitType})`}function Wh(r,e){return e.isFoundDocument()&&function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Ce.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)}(r,e)&&function(i,o){for(const u of tu(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(d,m,p){const g=U_(d,m,p);return d.inclusive?g<=0:g<0}(i.startAt,tu(i),o)||i.endAt&&!function(d,m,p){const g=U_(d,m,p);return d.inclusive?g>=0:g>0}(i.endAt,tu(i),o))}(r,e)}function mN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yx(r){return(e,n)=>{let i=!1;for(const o of tu(r)){const u=pN(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function pN(r,e,n){const i=r.field.isKeyField()?Ce.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?vo(p,g):Me(42886)}(r.field,e,n);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,(n,i)=>{for(const[o,u]of i)e(o,u)})}isEmpty(){return ex(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new At(Ce.comparator);function Ts(){return gN}const vx=new At(Ce.comparator);function Yl(...r){let e=vx;for(const n of r)e=e.insert(n.key,n);return e}function _x(r){let e=vx;return r.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ra(){return nu()}function Ex(){return nu()}function nu(){return new ca(r=>r.toString(),(r,e)=>r.isEqual(e))}const yN=new At(Ce.comparator),vN=new Zt(Ce.comparator);function Xe(...r){let e=vN;for(const n of r)e=e.add(n);return e}const _N=new Zt(He);function EN(){return _N}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function bx(r){return{integerValue:""+r}}function bN(r,e){return QI(e)?bx(e):Hp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this._=void 0}}function xN(r,e,n){return r instanceof fu?function(o,u){const d={fields:{[rx]:{stringValue:nx},[ix]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Lp(u)&&(u=Xh(u)),u&&(d.fields[sx]=u),{mapValue:d}}(n,e):r instanceof mu?Tx(r,e):r instanceof pu?Sx(r,e):function(o,u){const d=xx(o,u),m=H_(d)+H_(o.Re);return Wm(d)&&Wm(o.Re)?bx(m):Hp(o.serializer,m)}(r,e)}function TN(r,e,n){return r instanceof mu?Tx(r,e):r instanceof pu?Sx(r,e):n}function xx(r,e){return r instanceof Mh?function(i){return Wm(i)||function(u){return!!u&&"doubleValue"in u}(i)}(e)?e:{integerValue:0}:null}class fu extends Jh{}class mu extends Jh{constructor(e){super(),this.elements=e}}function Tx(r,e){const n=wx(e);for(const i of r.elements)n.some(o=>zr(o,i))||n.push(i);return{arrayValue:{values:n}}}class pu extends Jh{constructor(e){super(),this.elements=e}}function Sx(r,e){let n=wx(e);for(const i of r.elements)n=n.filter(o=>!zr(o,i));return{arrayValue:{values:n}}}class Mh extends Jh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function H_(r){return Pt(r.integerValue||r.doubleValue)}function wx(r){return Up(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.field=e,this.transform=n}}function wN(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof mu&&o instanceof mu||i instanceof pu&&o instanceof pu?yo(i.elements,o.elements,zr):i instanceof Mh&&o instanceof Mh?zr(i.Re,o.Re):i instanceof fu&&o instanceof fu}(r.transform,e.transform)}class AN{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ed{}function Ax(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new td(r.key,wn.none()):new Su(r.key,r.data,wn.none());{const n=r.data,i=Mn.empty();let o=new Zt(dn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new xi(r.key,i,new qn(o.toArray()),wn.none())}}function RN(r,e,n){r instanceof Su?function(o,u,d){const m=o.value.clone(),p=G_(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof xi?function(o,u,d){if(!gh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=G_(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(Rx(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function ru(r,e,n,i){return r instanceof Su?function(u,d,m,p){if(!gh(u.precondition,d))return m;const g=u.value.clone(),_=K_(u.fieldTransforms,p,d);return g.setAll(_),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(r,e,n,i):r instanceof xi?function(u,d,m,p){if(!gh(u.precondition,d))return m;const g=K_(u.fieldTransforms,p,d),_=d.data;return _.setAll(Rx(u)),_.setAll(g),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,n,i):function(u,d,m){return gh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function CN(r,e){let n=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),u=xx(i.transform,o||null);u!=null&&(n===null&&(n=Mn.empty()),n.set(i.field,u))}return n||null}function F_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&yo(i,o,(u,d)=>wN(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Su extends ed{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xi extends ed{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Rx(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=r.data.field(n);e.set(n,i)}}),e}function G_(r,e,n){const i=new Map;ot(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);i.set(u.field,TN(d,m,n[o]))}return i}function K_(r,e,n){const i=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);i.set(o.field,xN(u,d,e))}return i}class td extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IN extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&RN(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ru(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ru(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ex();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=Ax(d,m);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(je.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(n,i)=>F_(n,i))&&yo(this.baseMutations,e.baseMutations,(n,i)=>F_(n,i))}}class Fp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ot(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return yN}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new Fp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function MN(r){switch(r){case he.OK:return Me(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Me(15467,{code:r})}}function Cx(r){if(r===void 0)return xs("GRPC error has no .code"),he.UNKNOWN;switch(r){case qt.OK:return he.OK;case qt.CANCELLED:return he.CANCELLED;case qt.UNKNOWN:return he.UNKNOWN;case qt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case qt.INTERNAL:return he.INTERNAL;case qt.UNAVAILABLE:return he.UNAVAILABLE;case qt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case qt.NOT_FOUND:return he.NOT_FOUND;case qt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case qt.ABORTED:return he.ABORTED;case qt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case qt.DATA_LOSS:return he.DATA_LOSS;default:return Me(39323,{code:r})}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new ci([4294967295,4294967295],0);function $_(r){const e=Zb().encode(r),n=new Hb;return n.update(e),new Uint8Array(n.digest())}function Q_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ci([n,i],0),new ci([o,u],0)]}class Gp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xl(`Invalid padding: ${n}`);if(i<0)throw new Xl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ci.fromNumber(this.pe)}we(e,n,i){let o=e.add(n.multiply(ci.fromNumber(i)));return o.compare(kN)===1&&(o=new ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=$_(e),[i,o]=Q_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(i,o,u);if(!this.be(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Gp(u,o,n);return i.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=$_(e),[i,o]=Q_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nd(je.min(),o,new At(He),Ts(),Xe())}}class wu{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wu(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,i,o){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=o}}class Ix{constructor(e,n){this.targetId=e,this.Ce=n}}class Nx{constructor(e,n,i=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Y_{constructor(){this.Fe=0,this.Me=X_(),this.xe=fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xe(),n=Xe(),i=Xe();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Me(38017,{changeType:u})}}),new wu(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=X_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ot(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class PN{constructor(e){this.ze=e,this.je=new Map,this.He=Ts(),this.Je=sh(),this.Ye=sh(),this.Ze=new At(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,i=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(ep(u))if(i===0){const d=new Ce(u.path);this.tt(n,d,vn.newNoDocument(d,je.min()))}else ot(i===1,20013,{expectedCount:i});else{const d=this.ut(n);if(d!==i){const m=this.ct(e),p=m?this.lt(m,e,d):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=pi(i).toUint8Array()}catch(p){if(p instanceof tx)return go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Gp(d,o,u)}catch(p){return go(p instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let o=0;return i.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&ep(m.target)){const p=new Ce(m.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,vn.newNoDocument(p,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let i=Xe();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new nd(e,n,this.Ze,this.He,i);return this.He=Ts(),this.Je=sh(),this.Ye=sh(),this.Ze=new At(He),o}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Y_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Y_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function sh(){return new At(Ce.comparator)}function X_(){return new At(Ce.comparator)}const VN={asc:"ASCENDING",desc:"DESCENDING"},jN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LN={and:"AND",or:"OR"};class UN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rp(r,e){return r.useProto3Json||Yh(e)?e:{value:e}}function kh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dx(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function BN(r,e){return kh(r,e.toTimestamp())}function Br(r){return ot(!!r,49232),je.fromTimestamp(function(n){const i=mi(n);return new bt(i.seconds,i.nanos)}(r))}function Kp(r,e){return sp(r,e).canonicalString()}function sp(r,e){const n=function(o){return new Et(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function Ox(r){const e=Et.fromString(r);return ot(jx(e),10190,{key:e.toString()}),e}function ip(r,e){return Kp(r.databaseId,e.path)}function Nm(r,e){const n=Ox(e);if(n.get(1)!==r.databaseId.projectId)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ce(kx(n))}function Mx(r,e){return Kp(r.databaseId,e)}function zN(r){const e=Ox(r);return e.length===4?Et.emptyPath():kx(e)}function ap(r){return new Et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kx(r){return ot(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Z_(r,e,n){return{name:ip(r,e),fields:n.value.mapValue.fields}}function qN(r,e){let n;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Me(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(ot(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const _=g.code===void 0?he.UNKNOWN:Cx(g.code);return new Se(_,g.message||"")}(d);n=new Nx(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Nm(r,i.document.name),u=Br(i.document.updateTime),d=i.document.createTime?Br(i.document.createTime):je.min(),m=new Mn({mapValue:{fields:i.document.fields}}),p=vn.newFoundDocument(o,u,d,m),g=i.targetIds||[],_=i.removedTargetIds||[];n=new yh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Nm(r,i.document),u=i.readTime?Br(i.readTime):je.min(),d=vn.newNoDocument(o,u),m=i.removedTargetIds||[];n=new yh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Nm(r,i.document),u=i.removedTargetIds||[];n=new yh([],u,o,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new ON(o,u),m=i.targetId;n=new Ix(m,d)}}return n}function HN(r,e){let n;if(e instanceof Su)n={update:Z_(r,e.key,e.value)};else if(e instanceof td)n={delete:ip(r,e.key)};else if(e instanceof xi)n={update:Z_(r,e.key,e.data),updateMask:WN(e.fieldMask)};else{if(!(e instanceof IN))return Me(16599,{ft:e.type});n={verify:ip(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(u,d){const m=d.transform;if(m instanceof fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Mh)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Me(20930,{transform:d.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:BN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Me(27497)}(r,e.precondition)),n}function FN(r,e){return r&&r.length>0?(ot(e!==void 0,14353),r.map(n=>function(o,u){let d=o.updateTime?Br(o.updateTime):Br(u);return d.isEqual(je.min())&&(d=Br(u)),new AN(d,o.transformResults||[])}(n,e))):[]}function GN(r,e){return{documents:[Mx(r,e.path)]}}function KN(r,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Mx(r,o);const u=function(g){if(g.length!==0)return Vx(pr.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(_=>function(x){return{field:io(x.field),direction:YN(x.dir)}}(_))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=rp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function $N(r){let e=zN(r.parent);const n=r.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){ot(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=function(S){const x=Px(S);return x instanceof pr&&hx(x)?x.getFilters():[x]}(n.where));let d=[];n.orderBy&&(d=function(S){return S.map(x=>function(N){return new Oh(ao(N.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(S){let x;return x=typeof S=="object"?S.value:S,Yh(x)?null:x}(n.limit));let p=null;n.startAt&&(p=function(S){const x=!!S.before,k=S.values||[];return new Dh(k,x)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const x=!S.before,k=S.values||[];return new Dh(k,x)}(n.endAt)),dN(e,o,d,u,m,"F",p,g)}function QN(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Px(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ao(n.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(n.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ao(n.unaryFilter.field);return Ht.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ao(n.unaryFilter.field);return Ht.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(r):r.fieldFilter!==void 0?function(n){return Ht.create(ao(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(i=>Px(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(r):Me(30097,{filter:r})}function YN(r){return VN[r]}function XN(r){return jN[r]}function ZN(r){return LN[r]}function io(r){return{fieldPath:r.canonicalString()}}function ao(r){return dn.fromServerFormat(r.fieldPath)}function Vx(r){return r instanceof Ht?function(n){if(n.op==="=="){if(L_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:XN(n.op),value:n.value}}}(r):r instanceof pr?function(n){const i=n.getFilters().map(o=>Vx(o));return i.length===1?i[0]:{compositeFilter:{op:ZN(n.op),filters:i}}}(r):Me(54877,{filter:r})}function WN(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jx(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,i,o,u=je.min(),d=je.min(),m=fn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.wt=e}}function e2(r){const e=$N({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.Cn=new n2}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(fi.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class n2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Zt(Et.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Zt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lx=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(Lx,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Eo(0)}static lr(){return new Eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LruGarbageCollector",r2=1048576;function eE([r,e],[n,i]){const o=He(r,n);return o===0?He(e,i):o}class s2{constructor(e){this.Er=e,this.buffer=new Zt(eE),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();eE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class i2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(J_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?Te(J_,"Ignoring IndexedDB error during garbage collection: ",n):await Oo(n)}await this.mr(3e5)})}}class a2{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Qh.le);const i=new s2(n);return this.gr.forEachTarget(e,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(W_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,o,u,d,m,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(i=S,m=Date.now(),this.removeTargets(e,i,n))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(S=>(g=Date.now(),ro()<=Ye.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function o2(r,e){return new a2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.changes=new ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&ru(i.mutation,o,qn.empty(),bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const o=ra();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(u=>{let d=Yl();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const i=ra();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const o=[];return i.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,i,o){let u=Ts();const d=nu(),m=function(){return nu()}();return n.forEach((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof xi)?u=u.insert(g.key,g):_!==void 0?(d.set(g.key,_.mutation.getFieldMask()),ru(_.mutation,g,_.mutation.getFieldMask(),bt.now())):d.set(g.key,qn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,_)=>d.set(g,_)),n.forEach((g,_)=>{var S;return m.set(g,new u2(_,(S=d.get(g))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const i=nu();let o=new At((d,m)=>d-m),u=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=i.get(p)||qn.empty();_=m.applyToLocalView(g,_),i.set(p,_);const S=(o.get(m.batchId)||Xe()).add(p);o=o.insert(m.batchId,S)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,_=p.value,S=Ex();_.forEach(x=>{if(!u.has(x)){const k=Ax(n.get(x),i.get(x));k!==null&&S.set(x,k),u=u.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,S))}return de.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):px(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):de.resolve(ra());let m=uu,p=u;return d.next(g=>de.forEach(g,(_,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next(x=>{p=p.insert(_,x)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Xe())).next(_=>({batchId:m,changes:_x(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let o=Yl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=Yl();return this.indexManager.getCollectionParents(e,u).next(m=>de.forEach(m,p=>{const g=function(S,x){return new Tu(x,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next(_=>{_.forEach((S,x)=>{d=d.insert(S,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o))).next(d=>{u.forEach((p,g)=>{const _=g.getKey();d.get(_)===null&&(d=d.insert(_,vn.newInvalidDocument(_)))});let m=Yl();return d.forEach((p,g)=>{const _=u.get(p);_!==void 0&&ru(_.mutation,g,qn.empty(),bt.now()),Wh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return de.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Br(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:e2(o.bundledQuery),readTime:Br(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.overlays=new At(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ra();return de.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&i.set(o,u)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,u)=>{this.St(e,n,u)}),de.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const o=ra(),u=n.length+1,d=new Ce(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>i&&o.set(p.getKey(),p)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new At((g,_)=>g-_);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let _=u.get(g.largestBatchId);_===null&&(_=ra(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return de.resolve(m)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new DN(n,i));let u=this.Qr.get(n);u===void 0&&(u=Xe(),this.Qr.set(n,u)),this.Qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.$r=new Zt(rn.Ur),this.Kr=new Zt(rn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new rn(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new rn(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new Et([])),i=new rn(n,e),o=new rn(n,e+1),u=[];return this.Kr.forEachInRange([i,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new Et([])),i=new rn(n,e),o=new rn(n,e+1);let u=Xe();return this.Kr.forEachInRange([i,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new rn(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(rn.Ur)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new NN(u,n,i,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new rn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,n){return de.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ti(i),u=o<0?0:o;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?jp:this.nr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([i,o],d=>{const m=this.ei(d.Zr);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(He);return n.forEach(o=>{const u=new rn(o,0),d=new rn(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{i=i.add(m.Zr)})}),de.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Ce.isDocumentKey(u)||(u=u.child(""));const d=new rn(new Ce(u),0);let m=new Zt(He);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},d),de.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(i=>{const o=this.ei(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ot(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return de.forEach(n.mutations,o=>{const u=new rn(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new rn(n,0),o=this.Xr.firstAfterOrEqual(i);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.ii=e,this.docs=function(){return new At(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let i=Ts();return n.forEach(o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))}),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=Ts();const d=n.path,m=new Ce(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||FI(HI(_),i)<=0||(o.has(_.key)||Wh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Me(9500)}si(e,n){return de.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new g2(this)}getSize(e){return de.resolve(this.size)}}class g2 extends l2{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(i)}),de.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.persistence=e,this.oi=new ca(n=>Bp(n),zp),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this._i=0,this.ai=new $p,this.targetCount=0,this.ui=Eo.cr()}forEachTarget(e,n){return this.oi.forEach((i,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),de.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Tr(n),de.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.ci={},this.overlays={},this.li=new Qh(0),this.hi=!1,this.hi=!0,this.Pi=new f2,this.referenceDelegate=e(this),this.Ti=new y2(this),this.indexManager=new t2,this.remoteDocumentCache=function(o){return new p2(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new JN(n),this.Ei=new h2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new m2(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const o=new v2(this.li.next());return this.referenceDelegate.di(),i(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return de.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class v2 extends KI{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Vi=new $p,this.mi=null}static fi(e){return new Qp(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.gi,i=>{const o=Ce.fromPath(i);return this.pi(e,o).next(u=>{u||n.removeEntry(o,je.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return de.or([()=>de.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ph{constructor(e,n){this.persistence=e,this.yi=new ca(i=>YI(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=o2(this,n)}static fi(e,n){return new Ph(e,n)}di(){}Ai(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return de.forEach(this.yi,(i,o)=>this.Dr(e,i,o).next(u=>u?de.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(i++,u.removeEntry(d,je.min()))})).next(()=>u.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mh(e.data.value)),n}Dr(e,n,i){return de.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return de.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.ds=i,this.As=o}static Rs(e,n){let i=Xe(),o=Xe();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Yp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return e1()?8:$I(_n())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,i).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new _2;return this.Ss(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,i,o){return i.documentReadCount<this.gs?(ro()<=Ye.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),de.resolve()):(ro()<=Ye.DEBUG&&Te("QueryEngine","Query:",so(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(ro()<=Ye.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(n))):de.resolve())}ws(e,n){if(q_(n))return de.resolve(null);let i=Ur(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=np(n,null,"F"),i=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(u=>{const d=Xe(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.vs(n,m);return this.Cs(n,g,d,p.readTime)?this.ws(e,np(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,i,o){return q_(n)||o.isEqual(je.min())?de.resolve(null):this.ys.getDocuments(e,i).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,i,o)?de.resolve(null):(ro()<=Ye.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(n)),this.Fs(e,d,n,qI(o,uu)).next(m=>m))})}vs(e,n){let i=new Zt(yx(e));return n.forEach((o,u)=>{Wh(e,u)&&(i=i.add(u))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return ro()<=Ye.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",so(n)),this.ys.getDocumentsMatchingQuery(e,n,fi.min(),i)}Fs(e,n,i,o){return this.ys.getDocumentsMatchingQuery(e,i,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="LocalStore",b2=3e8;class x2{constructor(e,n,i,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new At(He),this.Os=new ca(u=>Bp(u),zp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function T2(r,e,n,i){return new x2(r,e,n,i)}async function Bx(r,e){const n=Le(r);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(u=>{const d=[],m=[];let p=Xe();for(const g of o){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next(g=>({ks:g,removedBatchIds:d,addedBatchIds:m}))})})}function S2(r,e){const n=Le(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,_){const S=g.batch,x=S.keys();let k=de.resolve();return x.forEach(N=>{k=k.next(()=>_.getEntry(p,N)).next(B=>{const M=g.docVersions.get(N);ot(M!==null,48541),B.version.compareTo(M)<0&&(S.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),_.addEntry(B)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(p,S))}(n,i,e,u).next(()=>u.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let p=Xe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function zx(r){const e=Le(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function w2(r,e){const n=Le(r),i=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((_,S)=>{const x=o.get(S);if(!x)return;m.push(n.Ti.removeMatchingKeys(u,_.removedDocuments,S).next(()=>n.Ti.addMatchingKeys(u,_.addedDocuments,S)));let k=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?k=k.withResumeToken(fn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),o=o.insert(S,k),function(B,M,z){return B.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=b2?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(x,k,_)&&m.push(n.Ti.updateTargetData(u,k))});let p=Ts(),g=Xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(A2(u,d,e.documentUpdates).next(_=>{p=_.qs,g=_.Qs})),!i.isEqual(je.min())){const _=n.Ti.getLastRemoteSnapshotVersion(u).next(S=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,i));m.push(_)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.xs=o,u))}function A2(r,e,n){let i=Xe(),o=Xe();return n.forEach(u=>i=i.add(u)),e.getEntries(r,i).next(u=>{let d=Ts();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Te(Xp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:d,Qs:o}})}function R2(r,e){const n=Le(r);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=jp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function C2(r,e){const n=Le(r);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ti.getTargetData(i,e).next(u=>u?(o=u,de.resolve(o)):n.Ti.allocateTargetId(i).next(d=>(o=new ii(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function op(r,e,n){const i=Le(r),o=i.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,d=>i.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Mo(d))throw d;Te(Xp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.xs=i.xs.remove(e),i.Os.delete(o.target)}function tE(r,e,n){const i=Le(r);let o=je.min(),u=Xe();return i.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,_){const S=Le(p),x=S.Os.get(_);return x!==void 0?de.resolve(S.xs.get(x)):S.Ti.getTargetData(g,_)}(i,d,Ur(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>i.Ms.getDocumentsMatchingQuery(d,e,n?o:je.min(),n?u:Xe())).next(m=>(I2(i,mN(e),m),{documents:m,$s:u})))}function I2(r,e,n){let i=r.Ns.get(e)||je.min();n.forEach((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)}),r.Ns.set(e,i)}class nE{constructor(){this.activeTargetIds=EN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N2{constructor(){this.xo=new nE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="ConnectivityMonitor";class sE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(rE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(rE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function lp(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",O2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(e,n,i,o,u){const d=lp(),m=this.jo(e,n.toUriEncodedString());Te(Dm,`Sending RPC '${e}' ${d}:`,m,i);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),_=Ro(g);return this.Jo(e,m,p,i,_).then(S=>(Te(Dm,`Received RPC '${e}' ${d}: `,S),S),S=>{throw go(Dm,`RPC '${e}' ${d} failed with error: `,S,"url: ",m,"request:",i),S})}Yo(e,n,i,o,u,d){return this.zo(e,n,i,o,u)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),i&&i.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const i=O2[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class P2 extends M2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=lp();return new Promise((m,p)=>{const g=new Fb;g.setWithCredentials(!0),g.listenOnce(Gb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case fh.NO_ERROR:const S=g.getResponseJson();Te(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),m(S);break;case fh.TIMEOUT:Te(gn,`RPC '${e}' ${d} timed out`),p(new Se(he.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const x=g.getStatus();if(Te(gn,`RPC '${e}' ${d} failed with status:`,x,"response text:",g.getResponseText()),x>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const N=k==null?void 0:k.error;if(N&&N.status&&N.message){const B=function(z){const H=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(H)>=0?H:he.UNKNOWN}(N.status);p(new Se(B,N.message))}else p(new Se(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Se(he.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:d,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{Te(gn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);Te(gn,`RPC '${e}' ${d} sending request:`,o),g.send(n,"POST",_,i,15)})}I_(e,n,i){const o=lp(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Qb(),m=$b(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const _=u.join("");Te(gn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const S=d.createWebChannel(_,p);this.E_(S);let x=!1,k=!1;const N=new k2({Zo:M=>{k?Te(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(x||(Te(gn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),x=!0),Te(gn,`RPC '${e}' stream ${o} sending:`,M),S.send(M))},Xo:()=>S.close()}),B=(M,z,H)=>{M.listen(z,Z=>{try{H(Z)}catch(te){setTimeout(()=>{throw te},0)}})};return B(S,Ql.EventType.OPEN,()=>{k||(Te(gn,`RPC '${e}' stream ${o} transport opened.`),N.__())}),B(S,Ql.EventType.CLOSE,()=>{k||(k=!0,Te(gn,`RPC '${e}' stream ${o} transport closed`),N.u_(),this.d_(S))}),B(S,Ql.EventType.ERROR,M=>{k||(k=!0,go(gn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),N.u_(new Se(he.UNAVAILABLE,"The operation could not be completed")))}),B(S,Ql.EventType.MESSAGE,M=>{var z;if(!k){const H=M.data[0];ot(!!H,16349);const Z=H,te=(Z==null?void 0:Z.error)||((z=Z[0])===null||z===void 0?void 0:z.error);if(te){Te(gn,`RPC '${e}' stream ${o} received error:`,te);const Y=te.status;let se=function(D){const V=qt[D];if(V!==void 0)return Cx(V)}(Y),C=te.message;se===void 0&&(se=he.INTERNAL,C="Unknown error status: "+Y+" with message "+te.message),k=!0,N.u_(new Se(se,C)),S.close()}else Te(gn,`RPC '${e}' stream ${o} received:`,H),N.c_(H)}}),B(m,Kb.STAT_EVENT,M=>{M.stat===Ym.PROXY?Te(gn,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Ym.NOPROXY&&Te(gn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(r){return new UN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,i=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="PersistentStream";class Hx{constructor(e,n,i,o,u,d,m,p){this.xi=e,this.S_=i,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new qx(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(xs(n.toString()),xs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.v_===n&&this.z_(i,o)},i=>{e(()=>{const o=new Se(he.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(o)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.j_(o))}),this.stream.onMessage(o=>{i(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(iE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Te(iE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V2 extends Hx{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=qN(this.serializer,e),i=function(u){if(!("targetChange"in u))return je.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?je.min():d.readTime?Br(d.readTime):je.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=ap(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=ep(p)?{documents:GN(u,p)}:{query:KN(u,p).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Dx(u,d.resumeToken);const g=rp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(je.min())>0){m.readTime=kh(u,d.snapshotVersion.toTimestamp());const g=rp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const i=QN(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=ap(this.serializer),n.removeTarget=e,this.Q_(n)}}class j2 extends Hx{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=FN(e.writeResults,e.commitTime),i=Br(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=ap(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>HN(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{}class U2 extends L2{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,sp(n,i),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(he.UNKNOWN,u.toString())})}Yo(e,n,i,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,sp(n,i),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Se(he.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class B2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(xs(n),this.ua=!1):Te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class z2{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{i.enqueueAndForget(async()=>{ha(this)&&(Te(la,"Restarting streams for network reachability change."),await async function(p){const g=Le(p);g.da.add(4),await Au(g),g.Va.set("Unknown"),g.da.delete(4),await sd(g)}(this))})}),this.Va=new B2(i,o)}}async function sd(r){if(ha(r))for(const e of r.Aa)await e(!0)}async function Au(r){for(const e of r.Aa)await e(!1)}function Fx(r,e){const n=Le(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),eg(n)?Jp(n):ko(n).N_()&&Wp(n,e))}function Zp(r,e){const n=Le(r),i=ko(n);n.Ea.delete(e),i.N_()&&Gx(n,e),n.Ea.size===0&&(i.N_()?i.k_():ha(n)&&n.Va.set("Unknown"))}function Wp(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(r).Z_(e)}function Gx(r,e){r.ma.Ke(e),ko(r).X_(e)}function Jp(r){r.ma=new PN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ko(r).start(),r.Va.ca()}function eg(r){return ha(r)&&!ko(r).O_()&&r.Ea.size>0}function ha(r){return Le(r).da.size===0}function Kx(r){r.ma=void 0}async function q2(r){r.Va.set("Online")}async function H2(r){r.Ea.forEach((e,n)=>{Wp(r,e)})}async function F2(r,e){Kx(r),eg(r)?(r.Va.Pa(e),Jp(r)):r.Va.set("Unknown")}async function G2(r,e,n){if(r.Va.set("Online"),e instanceof Nx&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(i){Te(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(r,i)}else if(e instanceof yh?r.ma.Xe(e):e instanceof Ix?r.ma.ot(e):r.ma.nt(e),!n.isEqual(je.min()))try{const i=await zx(r.localStore);n.compareTo(i)>=0&&await function(u,d){const m=u.ma.It(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ea.get(g);_&&u.Ea.set(g,_.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const _=u.Ea.get(p);if(!_)return;u.Ea.set(p,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),Gx(u,p);const S=new ii(_.target,p,g,_.sequenceNumber);Wp(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(i){Te(la,"Failed to raise snapshot:",i),await Vh(r,i)}}async function Vh(r,e,n){if(!Mo(e))throw e;r.da.add(1),await Au(r),r.Va.set("Offline"),n||(n=()=>zx(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Te(la,"Retrying IndexedDB access"),await n(),r.da.delete(1),await sd(r)})}function $x(r,e){return e().catch(n=>Vh(r,n,e))}async function id(r){const e=Le(r),n=yi(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:jp;for(;K2(e);)try{const o=await R2(e.localStore,i);if(o===null){e.Ia.length===0&&n.k_();break}i=o.batchId,$2(e,o)}catch(o){await Vh(e,o)}Qx(e)&&Yx(e)}function K2(r){return ha(r)&&r.Ia.length<10}function $2(r,e){r.Ia.push(e);const n=yi(r);n.N_()&&n.ea&&n.ta(e.mutations)}function Qx(r){return ha(r)&&!yi(r).O_()&&r.Ia.length>0}function Yx(r){yi(r).start()}async function Q2(r){yi(r).ia()}async function Y2(r){const e=yi(r);for(const n of r.Ia)e.ta(n.mutations)}async function X2(r,e,n){const i=r.Ia.shift(),o=Fp.from(i,e,n);await $x(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await id(r)}async function Z2(r,e){e&&yi(r).ea&&await async function(i,o){if(function(d){return MN(d)&&d!==he.ABORTED}(o.code)){const u=i.Ia.shift();yi(i).L_(),await $x(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o)),await id(i)}}(r,e),Qx(r)&&Yx(r)}async function aE(r,e){const n=Le(r);n.asyncQueue.verifyOperationInProgress(),Te(la,"RemoteStore received new credentials");const i=ha(n);n.da.add(3),await Au(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await sd(n)}async function W2(r,e){const n=Le(r);e?(n.da.delete(2),await sd(n)):e||(n.da.add(2),await Au(n),n.Va.set("Unknown"))}function ko(r){return r.fa||(r.fa=function(n,i,o){const u=Le(n);return u.oa(),new V2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:q2.bind(null,r),n_:H2.bind(null,r),i_:F2.bind(null,r),Y_:G2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),eg(r)?Jp(r):r.Va.set("Unknown")):(await r.fa.stop(),Kx(r))})),r.fa}function yi(r){return r.ga||(r.ga=function(n,i,o){const u=Le(n);return u.oa(),new j2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:Q2.bind(null,r),i_:Z2.bind(null,r),na:Y2.bind(null,r),ra:X2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await id(r)):(await r.ga.stop(),r.Ia.length>0&&(Te(la,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,m=new tg(e,n,d,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(r,e){if(xs("AsyncQueue",`${e}: ${r}`),Mo(r))return new Se(he.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static emptySet(e){return new fo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=Yl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new fo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.pa=new At(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class bo{constructor(e,n,i,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new bo(e,n,fo.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class eD{constructor(){this.queries=lE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Le(n),u=o.queries;o.queries=lE(),u.forEach((d,m)=>{for(const p of m.Sa)p.onError(i)})})(this,new Se(he.ABORTED,"Firestore shutting down"))}}function lE(){return new ca(r=>gx(r),Zh)}async function Xx(r,e){const n=Le(r);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(i=2):(u=new J2,i=e.va()?0:1);try{switch(i){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=ng(d,`Initialization of query '${so(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&rg(n)}async function Zx(r,e){const n=Le(r),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tD(r,e){const n=Le(r);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Ma(o)&&(i=!0);d.ba=o}}i&&rg(n)}function nD(r,e,n){const i=Le(r),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function rg(r){r.Ca.forEach(e=>{e.next()})}var up,uE;(uE=up||(up={})).xa="default",uE.Cache="cache";class Wx{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.key=e}}class eT{constructor(e){this.key=e}}class rD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.Za=yx(e),this.Xa=new fo(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new oE,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,S)=>{const x=o.get(_),k=Wh(this.query,S)?S:null,N=!!x&&this.mutatedKeys.has(x.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let M=!1;x&&k?x.data.isEqual(k.data)?N!==B&&(i.track({type:3,doc:k}),M=!0):this.ru(x,k)||(i.track({type:2,doc:k}),M=!0,(p&&this.Za(k,p)>0||g&&this.Za(k,g)<0)&&(m=!0)):!x&&k?(i.track({type:0,doc:k}),M=!0):x&&!k&&(i.track({type:1,doc:x}),M=!0,(p||g)&&(m=!0)),M&&(k?(d=d.add(k),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{Xa:d,nu:i,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((_,S)=>function(k,N){const B=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:M})}};return B(k)-B(N)}(_.type,S.type)||this.Za(_.doc,S.doc)),this.iu(i),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,d.length!==0||g?{snapshot:new bo(this.query,e.Xa,u,d,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new oE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new eT(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new Jx(i))}),n}au(e){this.Ha=e.$s,this.Ya=Xe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return bo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const sg="SyncEngine";class sD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class iD{constructor(e){this.key=e,this.cu=!1}}class aD{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new ca(m=>gx(m),Zh),this.Pu=new Map,this.Tu=new Set,this.Iu=new At(Ce.comparator),this.Eu=new Map,this.du=new $p,this.Au={},this.Ru=new Map,this.Vu=Eo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function oD(r,e,n=!0){const i=aT(r);let o;const u=i.hu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await tT(i,e,n,!0),o}async function lD(r,e){const n=aT(r);await tT(n,e,!0,!1)}async function tT(r,e,n,i){const o=await C2(r.localStore,Ur(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return i&&(m=await uD(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&Fx(r.remoteStore,o),m}async function uD(r,e,n,i,o){r.fu=(S,x,k)=>async function(B,M,z,H){let Z=M.view.tu(z);Z.Cs&&(Z=await tE(B.localStore,M.query,!1).then(({documents:C})=>M.view.tu(C,Z)));const te=H&&H.targetChanges.get(M.targetId),Y=H&&H.targetMismatches.get(M.targetId)!=null,se=M.view.applyChanges(Z,B.isPrimaryClient,te,Y);return hE(B,M.targetId,se.ou),se.snapshot}(r,S,x,k);const u=await tE(r.localStore,e,!0),d=new rD(e,u.$s),m=d.tu(u.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(n,i&&r.onlineState!=="Offline",o),g=d.applyChanges(m,r.isPrimaryClient,p);hE(r,n,g.ou);const _=new sD(e,n,d);return r.hu.set(e,_),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),g.snapshot}async function cD(r,e,n){const i=Le(r),o=i.hu.get(e),u=i.Pu.get(o.targetId);if(u.length>1)return i.Pu.set(o.targetId,u.filter(d=>!Zh(d,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await op(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Zp(i.remoteStore,o.targetId),cp(i,o.targetId)}).catch(Oo)):(cp(i,o.targetId),await op(i.localStore,o.targetId,!0))}async function hD(r,e){const n=Le(r),i=n.hu.get(e),o=n.Pu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zp(n.remoteStore,i.targetId))}async function dD(r,e,n){const i=_D(r);try{const o=await function(d,m){const p=Le(d),g=bt.now(),_=m.reduce((k,N)=>k.add(N.key),Xe());let S,x;return p.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=Ts(),B=Xe();return p.Bs.getEntries(k,_).next(M=>{N=M,N.forEach((z,H)=>{H.isValidDocument()||(B=B.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(k,N)).next(M=>{S=M;const z=[];for(const H of m){const Z=CN(H,S.get(H.key).overlayedDocument);Z!=null&&z.push(new xi(H.key,Z,lx(Z.value.mapValue),wn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,g,z,m)}).next(M=>{x=M;const z=M.applyToLocalDocumentSet(S,B);return p.documentOverlayCache.saveOverlays(k,M.batchId,z)})}).then(()=>({batchId:x.batchId,changes:_x(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let g=d.Au[d.currentUser.toKey()];g||(g=new At(He)),g=g.insert(m,p),d.Au[d.currentUser.toKey()]=g}(i,o.batchId,n),await Ru(i,o.changes),await id(i.remoteStore)}catch(o){const u=ng(o,"Failed to persist write");n.reject(u)}}async function nT(r,e){const n=Le(r);try{const i=await w2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?ot(d.cu,14607):o.removedDocuments.size>0&&(ot(d.cu,42227),d.cu=!1))}),await Ru(n,i,e)}catch(i){await Oo(i)}}function cE(r,e,n){const i=Le(r);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.hu.forEach((u,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Le(d);p.onlineState=m;let g=!1;p.queries.forEach((_,S)=>{for(const x of S.Sa)x.Fa(m)&&(g=!0)}),g&&rg(p)}(i.eventManager,e),o.length&&i.lu.Y_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fD(r,e,n){const i=Le(r);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Eu.get(e),u=o&&o.key;if(u){let d=new At(Ce.comparator);d=d.insert(u,vn.newNoDocument(u,je.min()));const m=Xe().add(u),p=new nd(je.min(),new Map,new At(He),d,m);await nT(i,p),i.Iu=i.Iu.remove(u),i.Eu.delete(e),ig(i)}else await op(i.localStore,e,!1).then(()=>cp(i,e,n)).catch(Oo)}async function mD(r,e){const n=Le(r),i=e.batch.batchId;try{const o=await S2(n.localStore,e);sT(n,i,null),rT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(n,o)}catch(o){await Oo(o)}}async function pD(r,e,n){const i=Le(r);try{const o=await function(d,m){const p=Le(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,m).next(S=>(ot(S!==null,37113),_=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(i.localStore,e);sT(i,e,n),rT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ru(i,o)}catch(o){await Oo(o)}}function rT(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function sT(r,e,n){const i=Le(r);let o=i.Au[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Au[i.currentUser.toKey()]=o}}function cp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Pu.get(e))r.hu.delete(i),n&&r.lu.gu(i,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(i=>{r.du.containsKey(i)||iT(r,i)})}function iT(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Zp(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),ig(r))}function hE(r,e,n){for(const i of n)i instanceof Jx?(r.du.addReference(i.key,e),gD(r,i)):i instanceof eT?(Te(sg,"Document no longer in limbo: "+i.key),r.du.removeReference(i.key,e),r.du.containsKey(i.key)||iT(r,i.key)):Me(19791,{pu:i})}function gD(r,e){const n=e.key,i=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(i)||(Te(sg,"New document in limbo: "+n),r.Tu.add(i),ig(r))}function ig(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new Ce(Et.fromString(e)),i=r.Vu.next();r.Eu.set(i,new iD(n)),r.Iu=r.Iu.insert(n,i),Fx(r.remoteStore,new ii(Ur(qp(n.path)),i,"TargetPurposeLimboResolution",Qh.le))}}async function Ru(r,e,n){const i=Le(r),o=[],u=[],d=[];i.hu.isEmpty()||(i.hu.forEach((m,p)=>{d.push(i.fu(p,e,n).then(g=>{var _;if((g||n)&&i.isPrimaryClient){const S=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=Yp.Rs(p.targetId,g);u.push(S)}}))}),await Promise.all(d),i.lu.Y_(o),await async function(p,g){const _=Le(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(g,x=>de.forEach(x.ds,k=>_.persistence.referenceDelegate.addReference(S,x.targetId,k)).next(()=>de.forEach(x.As,k=>_.persistence.referenceDelegate.removeReference(S,x.targetId,k)))))}catch(S){if(!Mo(S))throw S;Te(Xp,"Failed to update sequence numbers: "+S)}for(const S of g){const x=S.targetId;if(!S.fromCache){const k=_.xs.get(x),N=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(N);_.xs=_.xs.insert(x,B)}}}(i.localStore,u))}async function yD(r,e){const n=Le(r);if(!n.currentUser.isEqual(e)){Te(sg,"User change. New user:",e.toKey());const i=await Bx(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new Se(he.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(n,i.ks)}}function vD(r,e){const n=Le(r),i=n.Eu.get(e);if(i&&i.cu)return Xe().add(i.key);{let o=Xe();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const m=n.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function aT(r){const e=Le(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fD.bind(null,e),e.lu.Y_=tD.bind(null,e.eventManager),e.lu.gu=nD.bind(null,e.eventManager),e}function _D(r){const e=Le(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return T2(this.persistence,new E2,e.initialUser,this.serializer)}Su(e){return new Ux(Qp.fi,this.serializer)}bu(e){return new N2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class ED extends jh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ot(this.persistence.referenceDelegate instanceof Ph,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new i2(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Ux(i=>Ph.fi(i,n),this.serializer)}}class hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yD.bind(null,this.syncEngine),await W2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eD}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),i=function(u){return new P2(u)}(e.databaseInfo);return function(u,d,m,p){return new U2(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,u,d,m){return new z2(i,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>cE(this.syncEngine,n,0),function(){return sE.C()?new sE:new D2}())}createSyncEngine(e,n){return function(o,u,d,m,p,g,_){const S=new aD(o,u,d,m,p,g);return _&&(S.mu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Le(o);Te(la,"RemoteStore shutting down."),u.da.add(5),await Au(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hp.provider={build:()=>new hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):xs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class bD{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Wb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,async d=>{Te(vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(i,d=>(Te(vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ng(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Mm(r,e){r.asyncQueue.verifyOperationInProgress(),Te(vi,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let i=n.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Bx(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function dE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await xD(r);Te(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(i=>aE(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>aE(e.remoteStore,o)),r._onlineComponents=e}async function xD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(vi,"Using user provided OfflineComponentProvider");try{await Mm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;go("Error using user provided cache. Falling back to memory cache: "+n),await Mm(r,new jh)}}else Te(vi,"Using default OfflineComponentProvider"),await Mm(r,new ED(void 0));return r._offlineComponents}async function lT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(vi,"Using user provided OnlineComponentProvider"),await dE(r,r._uninitializedComponentsProvider._online)):(Te(vi,"Using default OnlineComponentProvider"),await dE(r,new hp))),r._onlineComponents}function TD(r){return lT(r).then(e=>e.syncEngine)}async function uT(r){const e=await lT(r),n=e.eventManager;return n.onListen=oD.bind(null,e.syncEngine),n.onUnlisten=cD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hD.bind(null,e.syncEngine),n}function SD(r,e,n={}){const i=new ys;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const _=new oT({next:x=>{_.xu(),d.enqueueAndForget(()=>Zx(u,S));const k=x.docs.has(m);!k&&x.fromCache?g.reject(new Se(he.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&p&&p.source==="server"?g.reject(new Se(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),S=new Wx(qp(m.path),_,{includeMetadataChanges:!0,Qa:!0});return Xx(u,S)}(await uT(r),r.asyncQueue,e,n,i)),i.promise}function wD(r,e,n={}){const i=new ys;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const _=new oT({next:x=>{_.xu(),d.enqueueAndForget(()=>Zx(u,S)),x.fromCache&&p.source==="server"?g.reject(new Se(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),S=new Wx(m,_,{includeMetadataChanges:!0,Qa:!0});return Xx(u,S)}(await uT(r),r.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r,e,n){if(!n)throw new Se(he.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AD(r,e,n,i){if(e===!0&&i===!0)throw new Se(he.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function mE(r){if(!Ce.isDocumentKey(r))throw new Se(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function pE(r){if(Ce.isDocumentKey(r))throw new Se(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ad(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Me(12329,{type:typeof r})}function sr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Se(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(r);throw new Se(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firestore.googleapis.com",gE=!0;class yE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dT,this.ssl=gE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r2)throw new Se(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MI;switch(i.type){case"firstParty":return new jI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=fE.get(n);i&&(Te("ComponentProvider","Removing Datastore"),fE.delete(n),i.terminate())}(this),Promise.resolve()}}function RD(r,e,n,i={}){var o;r=sr(r,od);const u=Ro(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(tb(`https://${p}`),nb("Firestore",!0)),d.host!==dT&&d.host!==p&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},d),{host:p,ssl:u,emulatorOptions:i});if(!sa(g,m)&&(r._setSettings(g),i.mockUserToken)){let _,S;if(typeof i.mockUserToken=="string")_=i.mockUserToken,S=yn.MOCK_USER;else{_=GA(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Se(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new yn(x)}r._authCredentials=new kI(new Xb(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class An{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class hi extends Po{constructor(e,n,i){super(e,n,qp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Ce(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function Be(r,e,...n){if(r=Ft(r),hT("collection","path",e),r instanceof od){const i=Et.fromString(e,...n);return pE(i),new hi(r,null,i)}{if(!(r instanceof An||r instanceof hi))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Et.fromString(e,...n));return pE(i),new hi(r.firestore,null,i)}}function ct(r,e,...n){if(r=Ft(r),arguments.length===1&&(e=Wb.newId()),hT("doc","path",e),r instanceof od){const i=Et.fromString(e,...n);return mE(i),new An(r,null,new Ce(i))}{if(!(r instanceof An||r instanceof hi))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Et.fromString(e,...n));return mE(i),new An(r.firestore,r instanceof hi?r.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="AsyncQueue";class _E{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new qx(this,"async_queue_retry"),this.rc=()=>{const i=Om();i&&Te(vE,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ys;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mo(e))throw e;Te(vE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,xs("INTERNAL UNHANDLED ERROR: ",EE(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=tg.createAndSchedule(this,e,n,i,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Me(47125,{cc:EE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function EE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ti extends od{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new _E,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _E(e),this._firestoreClient=void 0,await e}}}function CD(r,e){const n=typeof r=="object"?r:ab(),i=typeof r=="string"?r:Ih,o=Ap(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=HA("firestore");u&&RD(o,...u)}return o}function ld(r){if(r._terminated)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ID(r),r._firestoreClient}function ID(r){var e,n,i;const o=r._freezeSettings(),u=function(m,p,g,_){return new WI(m,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,cT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new bD(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(fn.fromBase64String(e))}catch(n){throw new Se(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xo(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=/^__.*__$/;class DD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class fT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:r})}}class lg{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Vc(e),o}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Lh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(mT(this.Ic)&&ND.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class OD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rd(e)}bc(e,n,i,o=!1){return new lg({Ic:e,methodName:n,wc:i,path:dn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(r){const e=r._freezeSettings(),n=rd(r._databaseId);return new OD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function ug(r,e,n,i,o,u={}){const d=r.bc(u.merge||u.mergeFields?2:0,e,n,o);hg("Data must be an object, but it was:",d,i);const m=yT(i,d);let p,g;if(u.merge)p=new qn(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const S of u.mergeFields){const x=dp(e,S,n);if(!d.contains(x))throw new Se(he.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_T(_,x)||_.push(x)}p=new qn(_),g=d.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=d.fieldTransforms;return new DD(new Mn(m),p,g)}class cd extends ud{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class cg extends ud{_toFieldTransform(e){return new SN(e.path,new fu)}isEqual(e){return e instanceof cg}}function pT(r,e,n,i){const o=r.bc(1,e,n);hg("Data must be an object, but it was:",o,i);const u=[],d=Mn.empty();bi(i,(p,g)=>{const _=dg(e,p,n);g=Ft(g);const S=o.mc(_);if(g instanceof cd)u.push(_);else{const x=Nu(g,S);x!=null&&(u.push(_),d.set(_,x))}});const m=new qn(u);return new fT(d,m,o.fieldTransforms)}function gT(r,e,n,i,o,u){const d=r.bc(1,e,n),m=[dp(e,i,n)],p=[o];if(u.length%2!=0)throw new Se(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(dp(e,u[x])),p.push(u[x+1]);const g=[],_=Mn.empty();for(let x=m.length-1;x>=0;--x)if(!_T(g,m[x])){const k=m[x];let N=p[x];N=Ft(N);const B=d.mc(k);if(N instanceof cd)g.push(k);else{const M=Nu(N,B);M!=null&&(g.push(k),_.set(k,M))}}const S=new qn(g);return new fT(_,S,d.fieldTransforms)}function MD(r,e,n,i=!1){return Nu(n,r.bc(i?4:3,e))}function Nu(r,e){if(vT(r=Ft(r)))return hg("Unsupported field value:",e,r),yT(r,e);if(r instanceof ud)return function(i,o){if(!mT(o.Ic))throw o.gc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,o){const u=[];let d=0;for(const m of i){let p=Nu(m,o.fc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(r,e)}return function(i,o){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bN(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=bt.fromDate(i);return{timestampValue:kh(o.serializer,u)}}if(i instanceof bt){const u=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kh(o.serializer,u)}}if(i instanceof ag)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xo)return{bytesValue:Dx(o.serializer,i._byteString)};if(i instanceof An){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Kp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof og)return function(d,m){return{mapValue:{fields:{[ax]:{stringValue:ox},[Nh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Hp(m.serializer,g)})}}}}}}(i,o);throw o.gc(`Unsupported field value: ${ad(i)}`)}(r,e)}function yT(r,e){const n={};return ex(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(r,(i,o)=>{const u=Nu(o,e.Ac(i));u!=null&&(n[i]=u)}),{mapValue:{fields:n}}}function vT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof ag||r instanceof xo||r instanceof An||r instanceof ud||r instanceof og)}function hg(r,e,n){if(!vT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=ad(n);throw i==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+i)}}function dp(r,e,n){if((e=Ft(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return dg(r,e);throw Lh("Field path arguments must be of type string or ",r,!1,void 0,n)}const kD=new RegExp("[~\\*/\\[\\]]");function dg(r,e,n){if(e.search(kD)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Lh(r,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new Se(he.INVALID_ARGUMENT,m+r+p)}function _T(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PD extends ET{data(){return super.data()}}function fg(r,e){return typeof e=="string"?dg(r,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Se(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class jD extends mg{}function bT(r,e,...n){let i=[];e instanceof mg&&i.push(e),i=i.concat(n),function(u){const d=u.filter(p=>p instanceof pg).length,m=u.filter(p=>p instanceof hd).length;if(d>1||d>0&&m>0)throw new Se(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)r=o._apply(r);return r}class hd extends jD{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new hd(e,n,i)}_apply(e){const n=this._parse(e);return TT(e._query,n),new Po(e.firestore,e.converter,tp(e._query,n))}_parse(e){const n=Iu(e.firestore);return function(u,d,m,p,g,_,S){let x;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Se(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){xE(S,_);const N=[];for(const B of S)N.push(bE(p,u,B));x={arrayValue:{values:N}}}else x=bE(p,u,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||xE(S,_),x=MD(m,d,S,_==="in"||_==="not-in");return Ht.create(g,_,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xT(r,e,n){const i=e,o=fg("where",r);return hd._create(o,i,n)}class pg extends mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)TT(d,p),d=tp(d,p)}(e._query,n),new Po(e.firestore,e.converter,tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function bE(r,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Se(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!px(e)&&n.indexOf("/")!==-1)throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Et.fromString(n));if(!Ce.isDocumentKey(i))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return V_(r,new Ce(i))}if(n instanceof An)return V_(r,n._key);throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function xE(r,e){if(!Array.isArray(r)||r.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TT(r,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LD{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bi(e,(o,u)=>{i[o]=this.convertValue(u,n)}),i}convertVectorValue(e){var n,i,o;const u=(o=(i=(n=e.fields)===null||n===void 0?void 0:n[Nh].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(d=>Pt(d.doubleValue));return new og(u)}convertGeoPoint(e){return new ag(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Xh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=mi(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Et.fromString(e);ot(jx(i),9688,{name:e});const o=new hu(i.get(1),i.get(3)),u=new Ce(i.popFirst(5));return o.isEqual(n)||xs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(r,e,n){let i;return i=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ST extends ET{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(fg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vh extends ST{data(e={}){return super.data(e)}}class UD{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vh(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:BD(m.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function BD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(r){r=sr(r,An);const e=sr(r.firestore,Ti);return SD(ld(e),r._key).then(n=>zD(e,r,n))}class wT extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}function Qe(r){r=sr(r,Po);const e=sr(r.firestore,Ti),n=ld(e),i=new wT(e);return VD(r._query),wD(n,r._query).then(o=>new UD(e,i,r,o))}function di(r,e,n){r=sr(r,An);const i=sr(r.firestore,Ti),o=gg(r.converter,e,n);return Du(i,[ug(Iu(i),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,wn.none())])}function yg(r,e,n,...i){r=sr(r,An);const o=sr(r.firestore,Ti),u=Iu(o);let d;return d=typeof(e=Ft(e))=="string"||e instanceof Cu?gT(u,"updateDoc",r._key,e,n,i):pT(u,"updateDoc",r._key,e),Du(o,[d.toMutation(r._key,wn.exists(!0))])}function vs(r){return Du(sr(r.firestore,Ti),[new td(r._key,wn.none())])}function dd(r,e){const n=sr(r.firestore,Ti),i=ct(r),o=gg(r.converter,e);return Du(n,[ug(Iu(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,wn.exists(!1))]).then(()=>i)}function Du(r,e){return function(i,o){const u=new ys;return i.asyncQueue.enqueueAndForget(async()=>dD(await TD(i),o,u)),u.promise}(ld(r),e)}function zD(r,e,n){const i=n.docs.get(e._key),o=new wT(r);return new ST(r,o,e._key,i,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,n,i){this._verifyNotCommitted();const o=km(e,this._firestore),u=gg(o.converter,n,i),d=ug(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,i);return this._mutations.push(d.toMutation(o._key,wn.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const u=km(e,this._firestore);let d;return d=typeof(n=Ft(n))=="string"||n instanceof Cu?gT(this._dataReader,"WriteBatch.update",u._key,n,i,o):pT(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(d.toMutation(u._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=km(e,this._firestore);return this._mutations=this._mutations.concat(new td(n._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(r,e){if((r=Ft(r)).firestore!==e)throw new Se(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Sn(){return new cg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r){return ld(r=sr(r,Ti)),new qD(r,e=>Du(r,e))}(function(e,n=!0){(function(o){Do=o})(Co),mo(new ia("firestore",(i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),m=new Ti(new PI(i.getProvider("auth-internal")),new LI(d,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Se(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(g.options.projectId,_)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),li(S_,w_,e),li(S_,w_,"esm2017")})();const HD={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},AT=ib(HD),fd=II(AT),be=CD(AT),FD=()=>{Fn("");const[r,e]=I.useState(""),[n,i]=I.useState(""),[o,u]=I.useState(""),d=Ao(),m=Hn(),p=async()=>{var _,S;const g=((S=(_=m.state)==null?void 0:_.from)==null?void 0:S.pathname)||"/dashboard";try{await pC(fd,r,n),u(" ..."),setTimeout(()=>d(g,{replace:!0}),600)}catch(x){u(" : "+x.message)}};return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_50%,_#eef2ff_100%)] px-4 py-10",children:y.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsxs("div",{className:"mt-4 grid gap-3",children:[y.jsx("input",{type:"email",placeholder:"",value:r,onChange:g=>e(g.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"password",placeholder:"",value:n,onChange:g=>i(g.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("button",{onClick:p,className:"inline-flex items-center justify-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]}),o&&y.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:o})]})})},SE=r=>Array.isArray(r)?r.filter(e=>typeof e=="string"&&e.trim().length>0):[],GD=new Set(["owner.multi@example.com","vestige_sync@me.com"]),Si=()=>{const[r,e]=I.useState(null),[n,i]=I.useState(null),[o,u]=I.useState(!0),[d,m]=I.useState("");I.useEffect(()=>{let x=!1;const k=Ob(fd,async N=>{if(!N){x||(e(null),i(null),m(""),u(!1));return}x||(e(N),u(!0),m(""));try{const B=ct(be,"users",N.uid),M=await fr(B);if(M.exists()){x||(i({id:M.id,...M.data()}),u(!1));return}const z=N.email?await Qe(bT(Be(be,"users"),xT("email","==",N.email))):null;if(!x){if(z&&!z.empty){const H=z.docs[0],Z={...H.data(),uid:N.uid,email:N.email||H.data().email||"",gymIds:SE(H.data().gymIds),migratedFromProfileId:H.id,updatedAt:Sn()};try{await di(B,Z,{merge:!0})}catch(te){console.error("users/{uid} :",te)}i({id:N.uid,...Z,updatedAt:H.data().updatedAt})}else{const H=(N.email||"").toLowerCase();if(GD.has(H)){const te={uid:N.uid,email:N.email||"",role:"admin",gymIds:["*"],createdAt:Sn(),updatedAt:Sn()};try{await di(B,te,{merge:!0})}catch(Y){console.error("users/{uid} :",Y)}i({id:N.uid,uid:N.uid,email:N.email||"",role:"admin",gymIds:["*"]})}else i({id:N.uid,uid:N.uid,email:N.email||"",role:"owner",gymIds:[]})}u(!1)}}catch(B){console.error(":",B),x||(m(""),i(null),u(!1))}});return()=>{x=!0,k()}},[]);const p=I.useMemo(()=>SE(n==null?void 0:n.gymIds),[n]),g=typeof(n==null?void 0:n.role)=="string"?n.role:"",_=I.useMemo(()=>g==="admin"||p.includes("*"),[g,p]);return{authUser:r,profile:n,gymIds:p,role:g,hasAllGymAccess:_,canAccessGym:x=>_||p.includes(x),loading:o,error:d}},KD=()=>{Fn("");const r=Ao(),[e,n]=I.useState([]),[i,o]=I.useState([]),[u,d]=I.useState(!0),[m,p]=I.useState(""),{gymIds:g,role:_,hasAllGymAccess:S,loading:x,error:k}=Si(),N=C=>C?C.seconds?new Date(C.seconds*1e3).toLocaleDateString():String(C):"-",B=()=>{vC(fd).then(()=>r("/login")).catch(C=>console.error(":",C))};I.useEffect(()=>{if(x)return;if(k){p(k),d(!1);return}(async()=>{d(!0),p("");try{const[R,D]=await Promise.all([Qe(Be(be,"events")),Qe(Be(be,"gyms"))]),V=R.docs.map(L=>({id:L.id,...L.data()})).filter(L=>S||g.includes(L.gymId)),U=D.docs.map(L=>({id:L.id,...L.data()})).filter(L=>S||g.includes(L.id)).sort((L,A)=>(L.name||"").localeCompare(A.name||"","ja"));n(V),o(U)}catch(R){console.error(":",R),p("")}finally{d(!1)}})()},[x,k,g,S]);const M=async C=>{if(!window.confirm(""))return;const R=e.find(D=>D.id===C);if(!R||!S&&!g.includes(R.gymId)){window.alert("");return}try{await vs(ct(be,"events",C)),n(e.filter(D=>D.id!==C))}catch(D){console.error(":",D)}},z=new Map(i.map(C=>[C.id,C.name||C.id])),H="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",Z="inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",te="inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",Y="rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm font-medium text-rose-700 transition hover:bg-rose-100",se="rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50";return u||x?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):m||k?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:m||k})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Gym Owner Console"}),y.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:""}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:""}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[y.jsx(We,{to:"/",className:Z,children:" TOP"}),y.jsxs("span",{className:"text-sm text-slate-600",children:[":"," ",S?"":i.length>0?i.map(C=>C.name||C.id).join(" / "):""]})]})]}),y.jsxs("section",{className:`${H} mt-5`,children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-4",children:S||g.length>0?y.jsx(We,{to:"/create-event",className:te,children:" "}):y.jsx("p",{className:"text-sm text-slate-600",children:""})})]}),_==="admin"&&y.jsxs("section",{className:`${H} mt-4`,children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-4",children:y.jsx(We,{to:"/system-admin",className:Z,children:""})})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:" "}),!S&&g.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):e.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-4",children:e.map(C=>y.jsxs("section",{className:H,children:[y.jsx("h4",{className:"text-base font-bold text-slate-900",children:C.name}),y.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:[": ",N(C.startDate),"  ",N(C.endDate)]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[": ",z.get(C.gymId)||""]}),y.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[y.jsx(We,{to:`/events/${C.id}/edit`,className:Z,children:""}),y.jsx(We,{to:`/events/${C.id}/climbers`,className:Z,children:""}),y.jsx(We,{to:`/events/${C.id}/scores`,className:Z,children:""}),y.jsx("button",{type:"button",onClick:()=>M(C.id),className:Y,children:" "})]})]},C.id))})]}),y.jsx("div",{className:"mt-8",children:y.jsx("button",{type:"button",onClick:B,className:se,children:""})})]})})};function $D(){Fn("");const[r,e]=I.useState(""),[n,i]=I.useState(""),[o,u]=I.useState([]),[d,m]=I.useState(""),[p,g]=I.useState(""),[_,S]=I.useState(""),[x,k]=I.useState(!0),[N,B]=I.useState(""),M=Ao(),{authUser:z,gymIds:H,hasAllGymAccess:Z,loading:te,error:Y}=Si();I.useEffect(()=>{if(te)return;if(Y){B(Y),k(!1);return}(async()=>{k(!0),B("");try{const D=(await Qe(Be(be,"gyms"))).docs.map(V=>({id:V.id,...V.data()})).filter(V=>Z||H.includes(V.id)).sort((V,U)=>(V.name||"").localeCompare(U.name||"","ja"));u(D),D.length>0?i(V=>V||D[0].id):i("")}catch(R){console.error(":",R),B("")}finally{k(!1)}})()},[te,Y,H,Z]);const se=async C=>{if(C.preventDefault(),!n){S(" ");return}if(new Date(d)>new Date(p)){S(" ");return}try{await dd(Be(be,"events"),{name:r,gymId:n,ownerUid:(z==null?void 0:z.uid)||"",startDate:bt.fromDate(new Date(d)),endDate:bt.fromDate(new Date(p)),createdAt:Sn()}),S(" "),e(""),M("/dashboard")}catch(R){console.error(R),S(" ")}};return x||te?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):N||Y?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:N||Y}),y.jsx(We,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsx("div",{className:"mx-auto max-w-3xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsx(We,{to:"/dashboard",className:"mt-3 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "}),o.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsxs("form",{onSubmit:se,className:"mt-4 grid gap-3",children:[y.jsx("input",{type:"text",placeholder:"",value:r,onChange:C=>e(C.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("select",{value:n,onChange:C=>i(C.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:o.map(C=>y.jsx("option",{value:C.id,children:C.name||C.id},C.id))}),y.jsx("input",{type:"date",value:d,onChange:C=>m(C.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"date",value:p,onChange:C=>g(C.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]}),_&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:_})]})})})}const wE=r=>{if(!r)return"";const e=typeof r.toDate=="function"?r.toDate():new Date(r);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${i}-${o}`},QD=({eventId:r})=>{const[e,n]=I.useState(""),[i,o]=I.useState(""),[u,d]=I.useState(""),[m,p]=I.useState(""),[g,_]=I.useState([]),[S,x]=I.useState(""),[k,N]=I.useState({name:"",startDate:"",endDate:""}),B=I.useCallback(async()=>{try{const se=(await Qe(Be(be,"events",r,"seasons"))).docs.map(C=>({id:C.id,...C.data()}));_(se)}catch(Y){console.error(":",Y)}},[r]);I.useEffect(()=>{B()},[B]);const M=async Y=>{Y.preventDefault();try{await dd(Be(be,"events",r,"seasons"),{name:e,startDate:bt.fromDate(new Date(i)),endDate:bt.fromDate(new Date(u))}),p(" "),n(""),o(""),d(""),B()}catch(se){console.error(se),p(" ")}},z=async Y=>{if(window.confirm(""))try{await vs(ct(be,"events",r,"seasons",Y)),_(C=>C.filter(R=>R.id!==Y))}catch(C){console.error(":",C)}},H=Y=>{x(Y.id),N({name:Y.name||"",startDate:wE(Y.startDate),endDate:wE(Y.endDate)})},Z=()=>{x(""),N({name:"",startDate:"",endDate:""})},te=async Y=>{if(!k.name.trim()||!k.startDate||!k.endDate){alert("");return}try{const se={name:k.name.trim(),startDate:bt.fromDate(new Date(k.startDate)),endDate:bt.fromDate(new Date(k.endDate))};await yg(ct(be,"events",r,"seasons",Y),se),_(C=>C.map(R=>R.id===Y?{...R,...se}:R)),Z()}catch(se){console.error(":",se),alert("")}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:M,children:[y.jsx("input",{type:"text",placeholder:"",value:e,onChange:Y=>n(Y.target.value),required:!0}),y.jsx("input",{type:"date",value:i,onChange:Y=>o(Y.target.value),required:!0}),y.jsx("input",{type:"date",value:u,onChange:Y=>d(Y.target.value),required:!0}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("p",{children:m}),y.jsx("ul",{children:g.map(Y=>y.jsx("li",{children:S===Y.id?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:k.name,onChange:se=>N(C=>({...C,name:se.target.value}))}),y.jsx("input",{type:"date",value:k.startDate,onChange:se=>N(C=>({...C,startDate:se.target.value}))}),y.jsx("input",{type:"date",value:k.endDate,onChange:se=>N(C=>({...C,endDate:se.target.value}))}),y.jsx("button",{type:"button",onClick:()=>te(Y.id),children:""}),y.jsx("button",{type:"button",onClick:Z,children:""})]}):y.jsxs(y.Fragment,{children:[Y.name,"",Y.startDate.toDate().toLocaleDateString(),"",Y.endDate.toDate().toLocaleDateString(),"",y.jsx("button",{type:"button",onClick:()=>H(Y),children:""}),y.jsx("button",{type:"button",onClick:()=>z(Y.id),children:""})]})},Y.id))})]})},YD=({eventId:r,categories:e,setCategories:n})=>{const[i,o]=I.useState(""),[u,d]=I.useState(""),[m,p]=I.useState(""),g=I.useCallback(async()=>{try{const M=(await Qe(Be(be,"events",r,"categories"))).docs.map(z=>({id:z.id,...z.data()}));n(M)}catch(B){console.error(":",B)}},[r,n]);I.useEffect(()=>{g()},[g]);const _=async B=>{if(B.preventDefault(),!!i)try{await dd(Be(be,"events",r,"categories"),{name:i}),o(""),g()}catch(M){console.error(":",M)}},S=async B=>{if(window.confirm(""))try{await vs(ct(be,"events",r,"categories",B)),n(z=>z.filter(H=>H.id!==B))}catch(z){console.error(":",z)}},x=B=>{d(B.id),p(B.name||"")},k=()=>{d(""),p("")},N=async B=>{const M=m.trim();if(!M){alert("");return}try{await yg(ct(be,"events",r,"categories",B),{name:M}),n(z=>z.map(H=>H.id===B?{...H,name:M}:H)),k()}catch(z){console.error(":",z),alert("")}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:_,children:[y.jsx("input",{type:"text",placeholder:"",value:i,onChange:B=>o(B.target.value),required:!0}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("ul",{children:e.map(B=>y.jsx("li",{children:u===B.id?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:m,onChange:M=>p(M.target.value)}),y.jsx("button",{type:"button",onClick:()=>N(B.id),children:""}),y.jsx("button",{type:"button",onClick:k,children:""})]}):y.jsxs(y.Fragment,{children:[B.name,y.jsx("button",{type:"button",onClick:()=>x(B),children:""}),y.jsx("button",{type:"button",onClick:()=>S(B.id),children:""})]})},B.id))})]})},XD=["9","8","7","6","5","4","3","2","1","","2"],su=r=>{if(typeof r.taskNo=="number"&&Number.isFinite(r.taskNo))return r.taskNo;const e=String(r.name||"").match(/(\d+)/);return e?Number(e[1]):Number.MAX_SAFE_INTEGER},Pm=r=>[...r].sort((e,n)=>{const i=su(e)-su(n);return i!==0?i:String(e.name||"").localeCompare(String(n.name||""),"ja")}),ZD=({eventId:r,categories:e=[]})=>{const n=_i(),i=r||n.eventId,[o,u]=I.useState([]),[d,m]=I.useState(e),[p,g]=I.useState(""),[_,S]=I.useState(""),[x,k]=I.useState([]),[N,B]=I.useState([]),[M,z]=I.useState(""),H=I.useMemo(()=>new Set(N),[N]);I.useEffect(()=>{if(!i)return;(async()=>{const Ee=await Qe(Be(be,"events",i,"seasons"));if(u(Ee.docs.map(Q=>({id:Q.id,...Q.data()}))),e.length>0){m(e);return}const ye=await Qe(Be(be,"events",i,"categories"));m(ye.docs.map(Q=>({id:Q.id,...Q.data()})))})()},[i,e]),I.useEffect(()=>{if(!i||!p){k([]),B([]);return}(async()=>{const ye=(await Qe(Be(be,"events",i,"seasons",p,"tasks"))).docs.map(Q=>({id:Q.id,...Q.data(),isEditing:!1}));k(Pm(ye))})()},[i,p]),I.useEffect(()=>{if(!i||!p||!_){B([]);return}(async()=>{const Ee=await Qe(Be(be,"events",i,"seasons",p,"categoryTaskMap",_,"assignments"));B(Ee.docs.map(ye=>ye.id))})()},[i,p,_]);const Z=()=>{setTimeout(()=>z(""),2e3)},te=A=>ct(be,"events",i,"seasons",p,"tasks",A),Y=(A,Ee)=>ct(be,"events",i,"seasons",p,"categoryTaskMap",A,"assignments",Ee),se=()=>{const A=new Set(x.map(ye=>su(ye)).filter(ye=>Number.isFinite(ye)));let Ee=1;for(;A.has(Ee);)Ee+=1;return Ee},C=()=>{if(!p){z(" "),Z();return}const A=se(),Ee=String(A).padStart(2,"0"),ye=`task-${Ee}`;k(Q=>Pm([...Q,{id:ye,taskNo:A,name:`No.${Ee}`,grade:"",points:1,isBonus:!1,isEditing:!0,isNew:!0}]))},R=(A,Ee,ye)=>{k(Q=>{const ee=[...Q],ie={...ee[A]};return ie[Ee]=Ee==="isBonus"?ye.target.checked:ye,ee[A]=ie,ee})},D=A=>{k(Ee=>Ee.map((ye,Q)=>({...ye,isEditing:Q===A?!ye.isEditing:!1})))},V=async A=>{var ee;const Ee=x[A];if(!((ee=Ee.name)!=null&&ee.trim())){z(" "),Z();return}if(!Ee.grade){z(" "),Z();return}const ye={name:Ee.name.trim(),taskNo:Number(Ee.taskNo)||su(Ee),grade:Ee.grade,points:Number(Ee.points)||1,isBonus:!!Ee.isBonus,isActive:!0};await di(te(Ee.id),ye,{merge:!0});const Q={...Ee,...ye,isEditing:!1,isNew:!1};k(ie=>{const pe=[...ie];return pe[A]=Q,Pm(pe)}),z(` ${ye.name} `),Z()},U=async A=>{const Ee=x[A];await vs(te(Ee.id)),await Promise.all(d.map(async ye=>{await vs(Y(ye.id,Ee.id))})),k(ye=>ye.filter((Q,ee)=>ee!==A)),B(ye=>ye.filter(Q=>Q!==Ee.id)),z(" "),Z()},L=async(A,Ee)=>{if(_){if(!A.grade){z(" "),Z();return}Ee?(await di(Y(_,A.id),{enabled:!0,taskNo:su(A)}),B(ye=>Array.from(new Set([...ye,A.id]))),z(` ${A.name} `)):(await vs(Y(_,A.id)),B(ye=>ye.filter(Q=>Q!==A.id)),z(` ${A.name} `)),Z()}};return y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-slate-900",children:" "}),y.jsx("p",{className:"mt-1 text-sm text-slate-600",children:""}),M&&y.jsx("p",{className:"mt-2 text-sm text-slate-700",children:M}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:["",y.jsxs("select",{value:p,onChange:A=>g(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),o.map(A=>y.jsx("option",{value:A.id,children:A.name},A.id))]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:["",y.jsxs("select",{value:_,onChange:A=>S(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),d.map(A=>y.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),p&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:C,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),y.jsxs("span",{className:"text-sm text-slate-600",children:[": ",x.length]}),_&&y.jsxs("span",{className:"text-sm text-slate-600",children:[": ",N.length]})]}),y.jsxs("table",{className:"mt-4 w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),y.jsxs("tbody",{children:[x.map((A,Ee)=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{value:A.name||"",onChange:ye=>R(Ee,"name",ye.target.value),placeholder:"",className:"w-full rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):A.name}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsxs("select",{value:A.grade||"",onChange:ye=>R(Ee,"grade",ye.target.value),className:"rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),XD.map(ye=>y.jsx("option",{value:ye,children:ye},ye))]}):A.grade||"-"}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{type:"number",min:"1",step:"1",value:Number(A.points)||1,onChange:ye=>R(Ee,"points",ye.target.value),className:"w-24 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):Number(A.points)||1}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{type:"checkbox",checked:!!A.isBonus,onChange:ye=>R(Ee,"isBonus",ye)}):A.isBonus?"":"-"}),y.jsx("td",{className:"py-2",children:y.jsx("input",{type:"checkbox",disabled:!_||!A.grade,checked:_?H.has(A.id):!1,onChange:ye=>L(A,ye.target.checked)})}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>V(Ee),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 transition hover:bg-emerald-100",children:""}),y.jsx("button",{type:"button",onClick:()=>D(Ee),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""})]}):y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>D(Ee),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""}),y.jsx("button",{type:"button",onClick:()=>U(Ee),className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1 text-xs font-medium text-rose-700 transition hover:bg-rose-100",children:""})]})})]},A.id)),x.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"py-4 text-sm text-slate-500",children:" "})})]})]})]})]})},fp=[{id:"seasons",label:" ",hint:""},{id:"categories",label:" ",hint:""},{id:"tasks",label:" ",hint:""}],AE=r=>!r||r==="routes"||r==="participants"||r==="scores"?"seasons":fp.some(e=>e.id===r)?r:"seasons",WD=()=>{var U;const{eventId:r}=_i(),[e,n]=I.useState(""),i=Hn(),[o,u]=qh(),[d,m]=I.useState(AE(o.get("tab")||((U=i.state)==null?void 0:U.tab)||"seasons")),[p,g]=I.useState([]),[_,S]=I.useState(0),[x,k]=I.useState(0),[N,B]=I.useState(!0),[M,z]=I.useState(""),[H,Z]=I.useState(!1),{gymIds:te,hasAllGymAccess:Y,loading:se,error:C}=Si();if(Fn(e?`: ${e}`:""),I.useEffect(()=>{if(se)return;if(C){z(C),B(!1);return}(async()=>{B(!0),z(""),Z(!1);try{const A=ct(be,"events",r),Ee=await fr(A);if(!Ee.exists()){z("");return}const ye=Ee.data();if(n(ye.name||""),!Y&&!te.includes(ye.gymId)){Z(!0);return}const[Q,ee,ie]=await Promise.all([Qe(Be(be,"events",r,"categories")),Qe(Be(be,"events",r,"seasons")),Qe(Be(be,"events",r,"participants"))]),pe=Q.docs.map(P=>({id:P.id,...P.data()}));g(pe),S(ee.size),k(ie.size)}catch(A){console.error(":",A),z("")}finally{B(!1)}})()},[r,te,Y,se,C]),I.useEffect(()=>{const L=AE(o.get("tab"));L!==d&&m(L)},[o]),I.useEffect(()=>{const L=new URLSearchParams(o);L.get("tab")!==d&&(L.set("tab",d),u(L,{replace:!0}))},[d,o,u]),N||se)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(M||C)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:M||C})});if(H)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})});const R=fp.find(L=>L.id===d),D=[{label:"",value:_},{label:"",value:p.length},{label:"",value:x}],V=L=>`rounded-lg border px-3 py-2 text-sm font-medium transition ${L?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`;return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("p",{className:"text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:D.map(L=>y.jsxs("span",{className:"rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-sm text-slate-700",children:[L.label,": ",L.value]},L.label))})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[fp.map(L=>y.jsx("button",{type:"button",onClick:()=>m(L.id),className:V(d===L.id),children:L.label},L.id)),y.jsx(We,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:R==null?void 0:R.hint}),d==="seasons"&&y.jsx(QD,{eventId:r}),d==="categories"&&y.jsx(YD,{eventId:r,categories:p,setCategories:g}),d==="tasks"&&(p.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsx(ZD,{eventId:r,categories:p}))]})})},ah={name:"",memberNo:"",age:"",gender:"",categoryId:""},JD=r=>r==="male"?"":r==="female"?"":r==="other"?"":"",eO=({eventId:r,categories:e})=>{const[n,i]=I.useState([]),[o,u]=I.useState(ah),[d,m]=I.useState(""),[p,g]=I.useState(ah),_=I.useCallback(async()=>{try{const z=(await Qe(Be(be,"events",r,"participants"))).docs.map(H=>({id:H.id,...H.data()}));i(z)}catch(M){console.error(":",M)}},[r]);I.useEffect(()=>{_()},[_]);const S=async M=>{M.preventDefault();try{await dd(Be(be,"events",r,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:Sn()}),u(ah),_()}catch(z){console.error(":",z)}},x=M=>{m(M.id),g({name:M.name||"",memberNo:M.memberNo||"",age:M.age?String(M.age):"",gender:M.gender||"",categoryId:M.categoryId||""})},k=()=>{m(""),g(ah)},N=async M=>{if(!p.name.trim()||!p.memberNo.trim()||!p.age||!p.gender||!p.categoryId){alert("");return}try{const z={name:p.name.trim(),memberNo:p.memberNo.trim(),age:Number(p.age),gender:p.gender,categoryId:p.categoryId,updatedAt:Sn()};await yg(ct(be,"events",r,"participants",M),z),i(H=>H.map(Z=>Z.id===M?{...Z,...z,updatedAt:new Date}:Z)),k()}catch(z){console.error(":",z),alert("")}},B=async M=>{if(window.confirm(""))try{await vs(ct(be,"events",r,"participants",M)),i(H=>H.filter(Z=>Z.id!==M))}catch(H){console.error(":",H)}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:S,children:[y.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:M=>u(z=>({...z,name:M.target.value})),required:!0}),y.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:M=>u(z=>({...z,memberNo:M.target.value})),required:!0}),y.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:M=>u(z=>({...z,age:M.target.value})),required:!0}),y.jsxs("select",{value:o.gender,onChange:M=>u(z=>({...z,gender:M.target.value})),required:!0,children:[y.jsx("option",{value:"",children:"--  --"}),y.jsx("option",{value:"male",children:""}),y.jsx("option",{value:"female",children:""}),y.jsx("option",{value:"other",children:""})]}),y.jsxs("select",{value:o.categoryId,onChange:M=>u(z=>({...z,categoryId:M.target.value})),required:!0,children:[y.jsx("option",{value:"",children:"--  --"}),e.map(M=>y.jsx("option",{value:M.id,children:M.name},M.id))]}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("ul",{children:n.map(M=>{var Z;const z=((Z=e.find(te=>te.id===M.categoryId))==null?void 0:Z.name)||"",H=d===M.id;return y.jsx("li",{children:H?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:p.name,onChange:te=>g(Y=>({...Y,name:te.target.value}))}),y.jsx("input",{type:"text",value:p.memberNo,onChange:te=>g(Y=>({...Y,memberNo:te.target.value}))}),y.jsx("input",{type:"number",min:"1",max:"120",value:p.age,onChange:te=>g(Y=>({...Y,age:te.target.value}))}),y.jsxs("select",{value:p.gender,onChange:te=>g(Y=>({...Y,gender:te.target.value})),children:[y.jsx("option",{value:"",children:"--  --"}),y.jsx("option",{value:"male",children:""}),y.jsx("option",{value:"female",children:""}),y.jsx("option",{value:"other",children:""})]}),y.jsxs("select",{value:p.categoryId,onChange:te=>g(Y=>({...Y,categoryId:te.target.value})),children:[y.jsx("option",{value:"",children:"--  --"}),e.map(te=>y.jsx("option",{value:te.id,children:te.name},te.id))]}),y.jsx("button",{type:"button",onClick:()=>N(M.id),children:""}),y.jsx("button",{type:"button",onClick:k,children:""})]}):y.jsxs(y.Fragment,{children:[M.name," / ",": ",M.memberNo||"-"," / ",": ",M.age||"-"," / ",": ",JD(M.gender)," / ",": ",z,y.jsx("button",{type:"button",onClick:()=>x(M),children:""}),y.jsx("button",{type:"button",onClick:()=>B(M.id),children:""})]})},M.id)})})]})},tO=()=>{const{eventId:r}=_i(),[e,n]=I.useState(""),[i,o]=I.useState([]),[u,d]=I.useState(!0),[m,p]=I.useState(""),[g,_]=I.useState(!1),{gymIds:S,hasAllGymAccess:x,loading:k,error:N}=Si();return Fn(e?`: ${e}`:""),I.useEffect(()=>{if(k)return;if(N){p(N),d(!1);return}(async()=>{d(!0),p(""),_(!1);try{const M=await fr(ct(be,"events",r));if(!M.exists()){p("");return}const z=M.data();if(n(z.name||""),!x&&!S.includes(z.gymId)){_(!0);return}const H=await Qe(Be(be,"events",r,"categories"));o(H.docs.map(Z=>({id:Z.id,...Z.data()})))}catch(M){console.error(":",M),p("")}finally{d(!1)}})()},[r,S,x,k,N]),u||k?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):m||N?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:m||N})}):g?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]}),y.jsx("div",{className:"mt-4",children:y.jsx(We,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-2 shadow-sm",children:y.jsx(eO,{eventId:r,categories:i})})]})})},nO=({eventId:r})=>{var x,k;const[e,n]=I.useState([]),[i,o]=I.useState([]),[u,d]=I.useState([]),m=Hn(),[p,g]=I.useState(((x=m.state)==null?void 0:x.seasonId)||""),[_,S]=I.useState(((k=m.state)==null?void 0:k.categoryId)||"");return I.useEffect(()=>{const N=async()=>{try{const z=(await Qe(Be(be,"events",r,"seasons"))).docs.map(H=>({id:H.id,...H.data()}));n(z)}catch(M){console.error(":",M)}},B=async()=>{try{const z=(await Qe(Be(be,"events",r,"categories"))).docs.map(H=>({id:H.id,...H.data()}));o(z)}catch(M){console.error(":",M)}};N(),B()},[r]),I.useEffect(()=>{(async()=>{if(!_){d([]);return}try{const B=bT(Be(be,"events",r,"participants"),xT("categoryId","==",_)),z=(await Qe(B)).docs.map(H=>({id:H.id,...H.data()})).sort((H,Z)=>(H.name||"").localeCompare(Z.name||"","ja"));d(z)}catch(B){console.error(":",B)}})()},[r,_]),I.useEffect(()=>{var N,B;(N=m.state)!=null&&N.seasonId&&g(m.state.seasonId),(B=m.state)!=null&&B.categoryId&&S(m.state.categoryId)},[m.state]),y.jsxs("div",{className:"p-4 sm:p-5",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsxs("div",{className:"mt-3 mb-4 flex flex-wrap gap-2",children:[y.jsx(We,{to:`/events/${r}/data-io`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"}),y.jsx(We,{to:`/score-summary/${r}`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""})]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",y.jsxs("select",{value:p,onChange:N=>g(N.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),e.map(N=>y.jsx("option",{value:N.id,children:N.name},N.id))]})]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",y.jsxs("select",{value:_,onChange:N=>S(N.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),i.map(N=>y.jsx("option",{value:N.id,children:N.name},N.id))]})]})}),p&&_&&y.jsx("ul",{className:"space-y-2",children:u.map(N=>y.jsxs("li",{className:"rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[y.jsx("span",{className:"font-medium",children:N.name}),y.jsx(We,{to:`/events/${r}/scoreinput/${p}/${_}/${N.id}`,className:"ml-3 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-2.5 py-1 text-xs font-semibold text-sky-800 transition hover:bg-sky-100",children:" "})]},N.id))})]})},rO=()=>{const{eventId:r}=_i(),[e,n]=I.useState(""),[i,o]=I.useState(!0),[u,d]=I.useState(""),[m,p]=I.useState(!1),{gymIds:g,hasAllGymAccess:_,loading:S,error:x}=Si();return Fn(e?`: ${e}`:""),I.useEffect(()=>{if(S)return;if(x){d(x),o(!1);return}(async()=>{o(!0),d(""),p(!1);try{const N=await fr(ct(be,"events",r));if(!N.exists()){d("");return}const B=N.data();if(n(B.name||""),!_&&!g.includes(B.gymId)){p(!0);return}}catch(N){console.error(":",N),d("")}finally{o(!1)}})()},[r,g,_,S,x]),i||S?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):u||x?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:u||x})}):m?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Score Operation"}),y.jsxs("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:[" ",e]}),y.jsx("div",{className:"mt-4",children:y.jsx(We,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm sm:p-2",children:y.jsx(nO,{eventId:r})})]})})},sO=Number.MAX_SAFE_INTEGER,mp=r=>{const e=Number(r);return Number.isFinite(e)?e:null},pp=r=>{const e=mp(r==null?void 0:r.taskNo);if(e!=null)return e;const n=String((r==null?void 0:r.name)||"").match(/(\d+)/);return n?Number(n[1]):sO},RT=(r=[])=>[...r].sort((e,n)=>{const i=pp(e)-pp(n);return i!==0?i:String((e==null?void 0:e.name)||"").localeCompare(String((n==null?void 0:n.name)||""),"ja")}),md=(r=[],e=[])=>{const n=new Map(r.map(o=>[o.id,o])),i=[];for(const o of e){if((o==null?void 0:o.enabled)===!1)continue;const u=n.get(o.id);if(!u)continue;const d=mp(o.taskNo),m=mp(u.taskNo);i.push({...u,taskNo:m??d??pp(u)})}return RT(i)},vg=(r=[])=>{const e=new Map;for(const n of r)n.id&&e.set(n.id,n),n.name&&e.set(n.name,n);return e},Gl=(r,e)=>!r||!e?!1:e.id&&e.id in r?!!r[e.id]:e.name&&e.name in r?!!r[e.name]:!1,pd=async(r,e)=>{const i=(await Qe(Be(be,"events",r,"seasons",e,"tasks"))).docs.map(o=>({id:o.id,...o.data()}));return RT(i)},gd=async(r,e,n)=>(await Qe(Be(be,"events",r,"seasons",e,"categoryTaskMap",n,"assignments"))).docs.map(o=>({id:o.id,...o.data()})),iO=async({eventId:r,seasonId:e,categoryId:n,seasonTasks:i})=>{const[o,u]=await Promise.all([i?Promise.resolve(i):pd(r,e),gd(r,e,n)]);return md(o,u)},aO=()=>{const{eventId:r,seasonId:e,categoryId:n,participantId:i}=_i(),[o,u]=I.useState([]),[d,m]=I.useState(""),[p,g]=I.useState({}),[_,S]=I.useState("simple"),[x,k]=I.useState(!0),[N,B]=I.useState(""),[M,z]=I.useState(""),[H,Z]=I.useState(null),[te,Y]=I.useState(!0),[se,C]=I.useState(""),[R,D]=I.useState(!1),{gymIds:V,hasAllGymAccess:U,loading:L,error:A}=Si();Fn(d?`: ${d}`:""),I.useEffect(()=>{if(L)return;if(A){C(A),Y(!1);return}(async()=>{Y(!0),C(""),D(!1);try{const J=await fr(ct(be,"events",r));if(!J.exists()){C("");return}if(!U&&!V.includes(J.data().gymId)){D(!0);return}const ge=await fr(ct(be,"events",r,"participants",i));ge.exists()&&m(ge.data().name||"");const me=await iO({eventId:r,seasonId:e,categoryId:n});u(me);const le=await fr(ct(be,"events",r,"seasons",e,"categories",n,"participants",i));if(le.exists()){const ae=le.data();ae.scores&&g(ae.scores),ae.updatedAt&&Z(ae.updatedAt.toDate())}}catch(J){console.error(":",J),C("")}finally{Y(!1)}})()},[r,e,n,i,V,U,L,A]);const Ee=(O,J={})=>O!=null&&O.id&&O.id in J?O.id:O!=null&&O.name&&O.name in J?O.name:(O==null?void 0:O.name)||(O==null?void 0:O.id)||"",ye=O=>{g(J=>{const ge=Ee(O,J);return ge?{...J,[ge]:!Gl(J,O)}:J})},Q=N.trim().toLowerCase(),ee=o.filter(O=>Gl(p,O)).length,ie=o.length-ee,pe=o.filter(O=>Q.length===0||String(O.name||"").toLowerCase().includes(Q)?x?!Gl(p,O):!0:!1),P=O=>{g(J=>{const ge={...J};for(const me of pe){const le=Ee(me,J);le&&(ge[le]=O)}return ge})},re=async()=>{if(!R)try{await di(ct(be,"events",r,"seasons",e,"categories",n,"participants",i),{scores:p,updatedAt:Sn()},{merge:!0}),z(" "),setTimeout(()=>z(""),2e3)}catch(O){console.error(":",O),z(" ")}},fe=M.startsWith("")?"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700":"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700";return te||L?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):se||A?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:se||A})}):R?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Score Input"}),y.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:" "}),y.jsx("div",{className:"mt-4",children:y.jsx(We,{to:`/events/${r}/scores`,state:{seasonId:e,categoryId:n},className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),y.jsxs("p",{className:"mt-4 text-sm text-slate-700",children:[": ",d]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[" ",ee," / ",o.length," ",ie,""]}),H&&y.jsxs("p",{className:"mt-1 text-xs italic text-slate-500",children:[": ",H.toLocaleString()]})]}),y.jsxs("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:()=>S("simple"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="simple"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),y.jsx("button",{type:"button",onClick:()=>S("detail"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="detail"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),y.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:x,onChange:O=>k(O.target.checked),className:"size-4 rounded border-slate-300"}),""]}),y.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[":",y.jsx("input",{type:"text",value:N,onChange:O=>B(O.target.value),placeholder:"No.01",className:"w-32 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]})]}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>P(!0),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm font-medium text-emerald-700 transition hover:bg-emerald-100",children:""}),y.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:pe.length===0?y.jsx("p",{className:"text-sm text-slate-600",children:""}):_==="simple"?y.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:pe.map(O=>{const J=Gl(p,O);return y.jsxs("button",{type:"button",onClick:()=>ye(O),className:`min-h-[96px] rounded-xl border p-3 text-left transition ${J?"border-emerald-300 bg-emerald-50":"border-slate-300 bg-white hover:bg-slate-50"}`,children:[y.jsx("div",{className:"font-semibold text-slate-900",children:O.name||O.id}),y.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:[": ",O.grade||"-"," / : ",O.points??"-"]}),y.jsx("div",{className:`mt-2 text-sm font-semibold ${J?"text-emerald-700":"text-slate-700"}`,children:J?"":""})]},O.id||O.name)})}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-[520px] w-full border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-right text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-center text-sm font-semibold text-slate-700",children:""})]})}),y.jsx("tbody",{children:pe.map(O=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 text-sm text-slate-800",children:O.name||O.id}),y.jsx("td",{className:"py-2 text-sm text-slate-700",children:O.grade||"-"}),y.jsx("td",{className:"py-2 text-right text-sm text-slate-700",children:O.points??"-"}),y.jsx("td",{className:"py-2 text-center",children:y.jsx("input",{type:"checkbox",checked:Gl(p,O),onChange:()=>ye(O),className:"size-4 rounded border-slate-300"})})]},O.id||O.name))})]})})}),y.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:[y.jsx("button",{type:"button",onClick:re,className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),M&&y.jsx("span",{className:fe,children:M})]})]})})},oO=["name","memberNo","age","gender"],lO=r=>{const e=String(r||"").trim().toLowerCase();return e?e==="male"||e==="m"||e==="man"||e===""?"male":e==="female"||e==="f"||e==="woman"||e===""?"female":e==="other"||e===""?"other":"":""},RE=r=>{const e=r==null?"":String(r);return/[",\r\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},uO=(r,e)=>{const n=[r.map(RE).join(",")];for(const i of e)n.push(r.map(o=>RE(i[o]??"")).join(","));return`${n.join(`\r
`)}\r
`},Vm=(r,e,n)=>{const i=uO(e,n),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(o),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)},cO=r=>{const e=[];let n="",i=[],o=!1;for(let m=0;m<r.length;m+=1){const p=r[m],g=r[m+1];if(o){p==='"'&&g==='"'?(n+='"',m+=1):p==='"'?o=!1:n+=p;continue}if(p==='"'){o=!0;continue}if(p===","){i.push(n),n="";continue}if(p===`
`){i.push(n.replace(/\r$/,"")),n="",i.some(_=>_!=="")&&e.push(i),i=[];continue}n+=p}if((n.length>0||i.length>0)&&(i.push(n.replace(/\r$/,"")),i.some(m=>m!=="")&&e.push(i)),e.length===0)return{headers:[],records:[]};const u=e[0].map(m=>String(m||"").trim()),d=e.slice(1).map(m=>{const p={};return u.forEach((g,_)=>{p[g]=m[_]??""}),p});return{headers:u,records:d}},hO=r=>r?typeof r.toMillis=="function"?r.toMillis():typeof r.seconds=="number"?r.seconds*1e3:0:0,dO=(r,e)=>{const n={};for(const i of r){const o=new Map;for(const u of e.filter(d=>d.categoryId===i.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},fO=r=>{const e={};for(const[n,i]of Object.entries(r)){const o=Array.from(i.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,d=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==d)&&(m=g+1),u=p.totalPoints,d=p.clearCount,{...p,rank:m}))}return e},mO=()=>{const{eventId:r}=_i(),{gymIds:e,hasAllGymAccess:n,loading:i,error:o}=Si();Fn("CSV");const[u,d]=I.useState(null),[m,p]=I.useState([]),[g,_]=I.useState([]),[S,x]=I.useState([]),[k,N]=I.useState("all"),[B,M]=I.useState(!0),[z,H]=I.useState(!1),[Z,te]=I.useState(""),[Y,se]=I.useState(""),[C,R]=I.useState(!1),[D,V]=I.useState(!1),U=I.useMemo(()=>new Map(g.map(ie=>[ie.id,ie])),[g]),L=async()=>{M(!0),te(""),H(!1);try{const ie=await fr(ct(be,"events",r));if(!ie.exists()){te("");return}const pe=ie.data();if(!n&&!e.includes(pe.gymId)){H(!0);return}const[P,re,fe]=await Promise.all([Qe(Be(be,"events",r,"seasons")),Qe(Be(be,"events",r,"categories")),Qe(Be(be,"events",r,"participants"))]);d({id:ie.id,...pe}),p(P.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja"))),_(re.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja"))),x(fe.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja")))}catch(ie){console.error("CSV:",ie),te("CSV")}finally{M(!1)}};I.useEffect(()=>{if(!i){if(o){te(o),M(!1);return}L()}},[i,o,r,n,e.join(",")]),I.useEffect(()=>{if(k==="all")return;m.some(pe=>pe.id===k)||N("all")},[k,m]);const A=()=>{if(!u)return;const ie=["id","name","memberNo","age","gender","categoryId","categoryName","entrySeasonId","participatingSeasonIds"],pe=S.map(P=>{var re;return{id:P.id,name:P.name||"",memberNo:P.memberNo||"",age:P.age??"",gender:P.gender||"",categoryId:P.categoryId||"",categoryName:((re=U.get(P.categoryId))==null?void 0:re.name)||"",entrySeasonId:P.entrySeasonId||"",participatingSeasonIds:Array.isArray(P.participatingSeasonIds)?P.participatingSeasonIds.join("|"):""}});Vm(`${u.id}-participants.csv`,ie,pe),se(` CSV${pe.length}`)},Ee=()=>{if(!u)return;const ie=["scope","categoryId","categoryName","male","female","other","unknown","total","maleRatioPct","femaleRatioPct"],pe=re=>{let fe=0,O=0,J=0,ge=0;for(const xe of re)xe.gender==="male"?fe+=1:xe.gender==="female"?O+=1:xe.gender==="other"?J+=1:ge+=1;const me=fe+O+J+ge,le=me>0?(fe/me*100).toFixed(1):"0.0",ae=me>0?(O/me*100).toFixed(1):"0.0";return{male:fe,female:O,other:J,unknown:ge,total:me,maleRatioPct:le,femaleRatioPct:ae}},P=[];P.push({scope:"overall",categoryId:"all",categoryName:"",...pe(S)});for(const re of g){const fe=S.filter(O=>O.categoryId===re.id);P.push({scope:"category",categoryId:re.id,categoryName:re.name||re.id,...pe(fe)})}Vm(`${u.id}-gender-ratio.csv`,ie,P),se(" CSV")},ye=async()=>{var le;const ie=k==="all"?m.map(ae=>ae.id):[k].filter(Boolean);if(ie.length===0)return[];const pe=dO(g,S),P=new Map(S.map(ae=>[ae.id,ae])),re=new Map(await Promise.all(ie.map(async ae=>[ae,await pd(r,ae)]))),fe=ie.flatMap(ae=>g.map(async xe=>{const[ve,Ae]=await Promise.all([gd(r,ae,xe.id),Qe(Be(be,"events",r,"seasons",ae,"categories",xe.id,"participants"))]);return{categoryId:xe.id,assignedTasks:md(re.get(ae)||[],ve),scoreSnap:Ae}})),O=await Promise.all(fe);for(const{categoryId:ae,assignedTasks:xe,scoreSnap:ve}of O){const Ae=vg(xe);for(const rt of ve.docs){const Ie=rt.data(),Rt=Ie.scores||{},Vt=rt.id;if(!pe[ae].has(Vt)){const ht=P.get(Vt);pe[ae].set(Vt,{participantId:Vt,name:(ht==null?void 0:ht.name)||Ie.participantName||`ID:${Vt}`,memberNo:(ht==null?void 0:ht.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Fe=pe[ae].get(Vt),_t=new Set;for(const[ht,jt]of Object.entries(Rt)){if(!jt)continue;const Ct=Ae.get(ht),Gt=(Ct==null?void 0:Ct.id)||ht;_t.has(Gt)||(_t.add(Gt),Fe.totalPoints+=Number(Ct==null?void 0:Ct.points)||1,Fe.clearCount+=1)}Fe.latestUpdatedAt=Math.max(Fe.latestUpdatedAt,hO(Ie.updatedAt))}}const J=fO(pe),ge=k==="all"?"all":((le=m.find(ae=>ae.id===k))==null?void 0:le.name)||k,me=[];for(const ae of g){const xe=J[ae.id]||[];for(const ve of xe)me.push({seasonScope:ge,categoryId:ae.id,categoryName:ae.name||ae.id,rank:ve.rank,participantId:ve.participantId,participantName:ve.name,memberNo:ve.memberNo,totalPoints:ve.totalPoints,clearCount:ve.clearCount})}return me},Q=async()=>{if(u){V(!0),se("");try{const ie=await ye(),pe=["seasonScope","categoryId","categoryName","rank","participantId","participantName","memberNo","totalPoints","clearCount"];Vm(`${u.id}-ranking.csv`,pe,ie),se(` CSV${ie.length}`)}catch(ie){console.error("CSV:",ie),se(" CSV")}finally{V(!1)}}},ee=async ie=>{var P;const pe=(P=ie.target.files)==null?void 0:P[0];if(ie.target.value="",!!pe){R(!0),se("");try{const re=await pe.text(),{headers:fe,records:O}=cO(re);if(fe.length===0){se(" CSV");return}const J=new Map(fe.map(Ie=>[Ie.toLowerCase(),Ie])),ge=oO.filter(Ie=>!J.has(Ie.toLowerCase()));if(ge.length>0){se(` : ${ge.join(", ")}`);return}const me=new Map(g.map(Ie=>[Ie.name,Ie.id])),le=[],ae=[];if(O.forEach((Ie,Rt)=>{const Vt=Rt+2,Fe=gt=>Ie[J.get(gt.toLowerCase())||""]||"",_t=String(Fe("id")).trim(),ht=String(Fe("name")).trim(),jt=String(Fe("memberNo")).trim(),Ct=String(Fe("age")).trim(),Gt=lO(Fe("gender")),vr=String(Fe("categoryId")).trim(),Dt=String(Fe("categoryName")).trim(),sn=vr||me.get(Dt)||"",Ue=String(Fe("entrySeasonId")).trim(),ke=String(Fe("participatingSeasonIds")).trim(),Pe=ke?ke.split("|").map(gt=>gt.trim()).filter(Boolean):[],Ze=Number(Ct);if(!ht||!jt||!Number.isFinite(Ze)||Ze<=0||!Gt||!sn){ae.push(`line ${Vt}: name/memberNo/age/gender/categoryId `);return}if(!U.has(sn)){ae.push(`line ${Vt}: categoryId "${sn}" `);return}le.push({id:_t,payload:{name:ht,memberNo:jt,age:Ze,gender:Gt,categoryId:sn,entrySeasonId:Ue||null,participatingSeasonIds:Pe}})}),ae.length>0){se(` CSV: ${ae.slice(0,5).join(" / ")}`);return}if(le.length===0){se(" ");return}let xe=TE(be),ve=0;const Ae=Be(be,"events",r,"participants"),rt=async(Ie=!1)=>{(ve>=400||Ie&&ve>0)&&(await xe.commit(),xe=TE(be),ve=0)};for(const Ie of le){const Rt=Ie.id?ct(be,"events",r,"participants",Ie.id):ct(Ae);Ie.id?xe.set(Rt,{...Ie.payload,updatedAt:Sn()},{merge:!0}):xe.set(Rt,{...Ie.payload,createdAt:Sn(),updatedAt:Sn()}),ve+=1,await rt()}await rt(!0),await L(),se(` CSV${le.length}`)}catch(re){console.error("CSV:",re),se(" CSV")}finally{R(!1)}}};return B||i?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"CSV..."})}):Z||o?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:Z||o})}):z?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:"CSV"})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:["CSV: ",(u==null?void 0:u.name)||r]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"CSV: `name,memberNo,age,gender,categoryId`"}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:A,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:"CSV"}),y.jsx("label",{className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700",children:y.jsx("input",{type:"file",accept:".csv,text/csv",onChange:ee,disabled:C,className:"text-sm"})}),y.jsx("span",{className:"text-sm text-slate-600",children:C?"...":`: ${S.length}`})]})]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:k,onChange:ie=>N(ie.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),m.map(ie=>y.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),y.jsx("button",{type:"button",onClick:Q,disabled:D,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-60",children:D?"...":"CSV"}),y.jsx("button",{type:"button",onClick:Ee,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"})]})]}),Y&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:Y})]})})},CE=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleDateString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleDateString():String(r):"-",lo=r=>r?typeof r.toDate=="function"?r.toDate().getTime():typeof r.seconds=="number"?r.seconds*1e3:0:0,Uh=(r,e)=>{const n=lo(r.startDate),i=lo(r.endDate);return n&&i&&n<=e&&e<=i?"ongoing":n&&e<n?"upcoming":"ended"},pO={ongoing:"",upcoming:"",ended:""},IE={ongoing:0,upcoming:1,ended:2},gO=(r,e,n)=>{const i=Uh(r,n),o=Uh(e,n),u=IE[i]??99,d=IE[o]??99;if(u!==d)return u-d;const m=lo(r.startDate),p=lo(e.startDate),g=lo(r.endDate),_=lo(e.endDate);return i==="ongoing"?g!==_?g-_:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja"):i==="upcoming"?m!==p?m-p:g!==_?g-_:(r.name||"").localeCompare(e.name||"","ja"):g!==_?_-g:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja")},yO=()=>{Fn("");const[r,e]=qh(),n=r.get("q")||"",i=r.get("status")||"all",o=r.get("gym")||"all",[u,d]=I.useState([]),[m,p]=I.useState([]),[g,_]=I.useState(n),[S,x]=I.useState(i),[k,N]=I.useState(o),[B,M]=I.useState(!0),[z,H]=I.useState("");I.useEffect(()=>{(async()=>{try{H("");const[C,R]=await Promise.all([Qe(Be(be,"events")),Qe(Be(be,"gyms"))]),D=C.docs.map(U=>({id:U.id,...U.data()})),V=R.docs.map(U=>({id:U.id,...U.data()})).sort((U,L)=>(U.name||"").localeCompare(L.name||"","ja"));d(D),p(V)}catch(C){console.error(":",C),H("")}finally{M(!1)}})()},[]),I.useEffect(()=>{const se=new URLSearchParams,C=g.trim();C&&se.set("q",C),S!=="all"&&se.set("status",S),k!=="all"&&se.set("gym",k),se.toString()!==r.toString()&&e(se,{replace:!0})},[g,S,k,r,e]),I.useEffect(()=>{if(k==="all"||m.length===0)return;m.some(C=>C.id===k)||N("all")},[k,m]);const Z=I.useMemo(()=>{const se=Date.now(),C=g.trim().toLowerCase();return[...u].sort((R,D)=>gO(R,D,se)).filter(R=>{const D=(R.name||"").toLowerCase(),V=Uh(R,se),U=C?D.includes(C):!0,L=S==="all"?!0:V===S,A=k==="all"?!0:R.gymId===k;return U&&L&&A})},[u,g,S,k]),te=I.useMemo(()=>new Map(m.map(se=>[se.id,se.name||se.id])),[m]),Y=()=>{_(""),x("all"),N("all")};return B?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):z?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:z}),y.jsx("div",{className:"mt-6",children:y.jsx(We,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsxs("ol",{className:"mt-2 list-decimal space-y-1 pl-5 text-sm text-slate-700",children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsx("input",{type:"text",value:g,onChange:se=>_(se.target.value),placeholder:": Spring",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:S,onChange:se=>x(se.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),y.jsx("option",{value:"ongoing",children:""}),y.jsx("option",{value:"upcoming",children:""}),y.jsx("option",{value:"ended",children:""})]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:k,onChange:se=>N(se.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),m.map(se=>y.jsx("option",{value:se.id,children:se.name},se.id))]})]}),y.jsx("button",{type:"button",onClick:Y,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),y.jsxs("span",{className:"ml-auto text-sm text-slate-600",children:[" ",Z.length," / ",u.length," "]})]}),u.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):Z.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-4 grid gap-3",children:Z.map(se=>{const C=Uh(se,Date.now());return y.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[se.name,y.jsx("span",{className:"ml-2 rounded-full border border-slate-300 bg-slate-50 px-2 py-0.5 text-xs text-slate-600",children:pO[C]})]}),y.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:[": ",CE(se.startDate),"  ",CE(se.endDate)]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[": ",te.get(se.gymId)||""]}),y.jsx(We,{to:`/score-summary/${se.id}`,className:"mt-2 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]},se.id)})}),y.jsx("div",{className:"mt-8",children:y.jsx(We,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]})})},vO=r=>r?typeof r.toMillis=="function"?r.toMillis():typeof r.seconds=="number"?r.seconds*1e3:0:0,NE=(r,e)=>{const n={};for(const i of r){const o=new Map;for(const u of e.filter(d=>d.categoryId===i.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},DE=r=>{const e={};for(const[n,i]of Object.entries(r)){const o=Array.from(i.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,d=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==d)&&(m=g+1),u=p.totalPoints,d=p.clearCount,{...p,rank:m}))}return e},_O=()=>{const{eventId:r}=_i(),[e,n]=qh(),i=e.get("season")||"all",o=e.get("category")||"all",u=e.get("q")||"",d=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[p,g]=I.useState(null),[_,S]=I.useState([]),[x,k]=I.useState([]),[N,B]=I.useState([]),[M,z]=I.useState(i),[H,Z]=I.useState(o),[te,Y]=I.useState(d),[se,C]=I.useState(m),[R,D]=I.useState(u),[V,U]=I.useState({}),[L,A]=I.useState(!0),[Ee,ye]=I.useState(!1),[Q,ee]=I.useState("");Fn(p!=null&&p.name?`: ${p.name}`:""),I.useEffect(()=>{let le=!1;return(async()=>{A(!0),ee("");try{const xe=await fr(ct(be,"events",r));if(!xe.exists()){le||ee("");return}const[ve,Ae,rt]=await Promise.all([Qe(Be(be,"events",r,"seasons")),Qe(Be(be,"events",r,"categories")),Qe(Be(be,"events",r,"participants"))]);if(le)return;g({id:xe.id,...xe.data()}),S(ve.docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,Rt)=>Ie.name.localeCompare(Rt.name,"ja"))),k(Ae.docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,Rt)=>Ie.name.localeCompare(Rt.name,"ja"))),B(rt.docs.map(Ie=>({id:Ie.id,...Ie.data()})))}catch(xe){console.error(":",xe),le||ee("")}finally{le||A(!1)}})(),()=>{le=!0}},[r]),I.useEffect(()=>{let le=!1;return(async()=>{if(L||!p||x.length===0)return;ee("");const xe=H==="all"?x:x.filter(Ae=>Ae.id===H);if(xe.length===0){U({});return}const ve=M==="all"?_.map(Ae=>Ae.id):[M].filter(Boolean);if(ve.length===0){U(DE(NE(xe,N)));return}ye(!0);try{const Ae=NE(xe,N),rt=new Map(N.map(Fe=>[Fe.id,Fe])),Ie=new Map(await Promise.all(ve.map(async Fe=>[Fe,await pd(r,Fe)]))),Rt=ve.flatMap(Fe=>xe.map(async _t=>{const[ht,jt]=await Promise.all([gd(r,Fe,_t.id),Qe(Be(be,"events",r,"seasons",Fe,"categories",_t.id,"participants"))]);return{categoryId:_t.id,assignedTasks:md(Ie.get(Fe)||[],ht),scoreSnap:jt}})),Vt=await Promise.all(Rt);for(const{categoryId:Fe,assignedTasks:_t,scoreSnap:ht}of Vt){const jt=vg(_t);for(const Ct of ht.docs){const Gt=Ct.data(),vr=Gt.scores||{},Dt=Ct.id;if(!Ae[Fe].has(Dt)){const ke=rt.get(Dt);Ae[Fe].set(Dt,{participantId:Dt,name:(ke==null?void 0:ke.name)||Gt.participantName||`ID:${Dt}`,memberNo:(ke==null?void 0:ke.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const sn=Ae[Fe].get(Dt),Ue=new Set;for(const[ke,Pe]of Object.entries(vr)){if(!Pe)continue;const Ze=jt.get(ke),gt=(Ze==null?void 0:Ze.id)||ke;Ue.has(gt)||(Ue.add(gt),sn.totalPoints+=Number(Ze==null?void 0:Ze.points)||1,sn.clearCount+=1)}sn.latestUpdatedAt=Math.max(sn.latestUpdatedAt,vO(Gt.updatedAt))}}le||U(DE(Ae))}catch(Ae){console.error(":",Ae),le||ee("")}finally{le||ye(!1)}})(),()=>{le=!0}},[L,p,x,N,_,M,H,r]);const ie=I.useMemo(()=>H==="all"?x:x.filter(le=>le.id===H),[x,H]),pe=I.useMemo(()=>[...H==="all"?N:N.filter(ae=>ae.categoryId===H)].sort((ae,xe)=>(ae.name||"").localeCompare(xe.name||"","ja")),[N,H]);I.useEffect(()=>{if(!te||pe.length===0)return;pe.some(ae=>ae.id===te)||Y("")},[pe,te]),I.useEffect(()=>{se&&!te&&C(!1)},[se,te]),I.useEffect(()=>{_.length!==0&&M!=="all"&&!_.some(le=>le.id===M)&&z("all")},[_,M]),I.useEffect(()=>{x.length!==0&&H!=="all"&&!x.some(le=>le.id===H)&&Z("all")},[x,H]),I.useEffect(()=>{const le=new URLSearchParams;M!=="all"&&le.set("season",M),H!=="all"&&le.set("category",H);const ae=R.trim();ae&&le.set("q",ae),te&&le.set("pid",te),se&&te&&le.set("self","1"),le.toString()!==e.toString()&&n(le,{replace:!0})},[M,H,R,te,se,e,n]);const P=R.trim().toLowerCase(),re=P.length>0,fe=N.find(le=>le.id===te)||null,O=I.useMemo(()=>{if(!te)return[];const le=[];for(const ae of ie){const xe=(V[ae.id]||[]).find(ve=>ve.participantId===te);xe&&le.push({...xe,categoryName:ae.name})}return le},[te,ie,V]),J=le=>{const ae=new URLSearchParams;M!=="all"&&ae.set("season",M),H!=="all"&&ae.set("category",H),R.trim()&&ae.set("q",R.trim()),te&&ae.set("pid",te),se&&te&&ae.set("self","1");const xe=ae.toString();return`/score-summary/${r}/participants/${le}${xe?`?${xe}`:""}`},ge=()=>{Z("all"),Y(""),C(!1),D("")},me=ie.reduce((le,ae)=>{const xe=V[ae.id]||[];return le+xe.filter(ve=>{const Ae=(ve.name||"").toLowerCase(),rt=(ve.memberNo||"").toLowerCase();return Ae.includes(P)||rt.includes(P)}).length},0);return L?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):Q?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:Q}),y.jsx("div",{className:"mt-8",children:y.jsx(We,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[p==null?void 0:p.name," - "]}),y.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:M,onChange:le=>z(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),_.map(le=>y.jsx("option",{value:le.id,children:le.name},le.id))]})]})}),y.jsxs("div",{className:"mt-3",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:["/:",y.jsx("input",{type:"text",value:R,onChange:le=>D(le.target.value),placeholder:":  / M-1001",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),re&&y.jsxs("span",{className:"ml-3 text-sm text-slate-600",children:[" ",me," "]})]}),y.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("p",{className:"text-sm font-medium text-slate-700",children:""}),y.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:H,onChange:le=>Z(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),x.map(le=>y.jsx("option",{value:le.id,children:le.name},le.id))]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:te,onChange:le=>Y(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),pe.map(le=>y.jsxs("option",{value:le.id,children:[le.name," (",le.memberNo||"-",")"]},le.id))]})]}),y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:se,onChange:le=>C(le.target.checked),disabled:!te,className:"size-4 rounded border-slate-300"}),""]}),y.jsx("button",{type:"button",onClick:ge,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),te&&y.jsx(We,{to:J(te),className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]})]}),fe&&y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[": ",fe.name," (",fe.memberNo||"-",")"]}),O.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-700",children:O.map(le=>y.jsxs("li",{children:[le.categoryName,": ",le.rank," /  ",le.totalPoints," /  ",le.clearCount]},`${le.categoryName}-${le.participantId}`))})]}),Ee&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),ie.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):se&&!te?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):ie.map(le=>{const xe=(V[le.id]||[]).filter(ve=>{if(se&&te&&ve.participantId!==te)return!1;if(!re)return!0;const Ae=(ve.name||"").toLowerCase(),rt=(ve.memberNo||"").toLowerCase();return Ae.includes(P)||rt.includes(P)});return y.jsxs("section",{className:"mt-6",children:[y.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[": ",le.name]}),xe.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:re?"":""}):y.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:y.jsxs("table",{className:"min-w-[650px] w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),y.jsx("tbody",{children:xe.map(ve=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:ve.rank}),y.jsxs("td",{className:"py-2",children:[ve.name,te===ve.participantId&&y.jsx("strong",{className:"ml-2 text-xs text-slate-500",children:"()"})]}),y.jsx("td",{className:"py-2",children:ve.memberNo}),y.jsx("td",{className:"py-2 text-right",children:ve.totalPoints}),y.jsx("td",{className:"py-2 text-right",children:ve.clearCount}),y.jsx("td",{className:"py-2",children:y.jsx(We,{to:J(ve.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-100",children:""})})]},ve.participantId))})]})})]},le.id)}),y.jsx("div",{className:"mt-8",children:y.jsx(We,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},EO=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleString():"-":"-",OE=r=>{const e=[...r].sort((u,d)=>d.totalPoints!==u.totalPoints?d.totalPoints-u.totalPoints:d.clearCount!==u.clearCount?d.clearCount-u.clearCount:u.name.localeCompare(d.name,"ja"));let n=null,i=null,o=0;return e.map((u,d)=>((u.totalPoints!==n||u.clearCount!==i)&&(o=d+1),n=u.totalPoints,i=u.clearCount,{...u,rank:o}))},bO=()=>{var Q;const{eventId:r,participantId:e}=_i(),[n]=qh(),i=n.get("category")||"",o=n.get("q")||"",[u,d]=I.useState(null),[m,p]=I.useState(null),[g,_]=I.useState([]),[S,x]=I.useState([]),[k,N]=I.useState([]),[B,M]=I.useState(n.get("season")||"all"),[z,H]=I.useState([]),[Z,te]=I.useState(null),[Y,se]=I.useState({prev:null,next:null}),[C,R]=I.useState(!0),[D,V]=I.useState(!1),[U,L]=I.useState("");Fn(m!=null&&m.name?`: ${m.name}`:"");const A=ee=>{const ie=new URLSearchParams;B!=="all"&&ie.set("season",B),i&&ie.set("category",i),o&&ie.set("q",o);const pe=ie.toString();return`/score-summary/${r}/participants/${ee}${pe?`?${pe}`:""}`},Ee=I.useMemo(()=>{const ee=new URLSearchParams;B!=="all"&&ee.set("season",B),i&&ee.set("category",i),o&&ee.set("q",o);const ie=ee.toString();return`/score-summary/${r}${ie?`?${ie}`:""}`},[r,B,i,o]);I.useEffect(()=>{let ee=!1;return(async()=>{R(!0),L("");try{const[pe,P,re,fe,O]=await Promise.all([fr(ct(be,"events",r)),fr(ct(be,"events",r,"participants",e)),Qe(Be(be,"events",r,"participants")),Qe(Be(be,"events",r,"seasons")),Qe(Be(be,"events",r,"categories"))]);if(!pe.exists()){ee||L("");return}if(!P.exists()){ee||L("");return}const J=fe.docs.map(ae=>({id:ae.id,...ae.data()})).sort((ae,xe)=>ae.name.localeCompare(xe.name,"ja")),ge=O.docs.map(ae=>({id:ae.id,...ae.data()})).sort((ae,xe)=>ae.name.localeCompare(xe.name,"ja"));if(ee)return;const me=n.get("season"),le=me&&(me==="all"||J.some(ae=>ae.id===me))?me:"all";d({id:pe.id,...pe.data()}),p({id:P.id,...P.data()}),_(re.docs.map(ae=>({id:ae.id,...ae.data()}))),x(J),N(ge),M(le)}catch(pe){console.error(":",pe),ee||L("")}finally{ee||R(!1)}})(),()=>{ee=!0}},[r,e,n]),I.useEffect(()=>{let ee=!1;return(async()=>{if(!(C||!m||S.length===0||k.length===0)){V(!0);try{const pe=B==="all"?S:S.filter(me=>me.id===B),P=m.categoryId?[m.categoryId]:k.map(me=>me.id),re=new Map(k.map(me=>[me.id,me.name])),fe=new Map(g.map(me=>[me.id,me.name||""])),O=new Map(g.map(me=>[me.id,me.memberNo||"-"])),J=[],ge={};for(const me of pe){const le=await pd(r,me.id),ae=[],xe=P.map(async Ae=>{const[rt,Ie]=await Promise.all([gd(r,me.id,Ae),Qe(Be(be,"events",r,"seasons",me.id,"categories",Ae,"participants"))]),Rt=md(le,rt),Vt=vg(Rt),Fe=new Map,_t=g.filter(Ue=>Ue.categoryId===Ae);for(const Ue of _t)Fe.set(Ue.id,{participantId:Ue.id,name:Ue.name||"",memberNo:Ue.memberNo||"-",totalPoints:0,clearCount:0});let ht=null;for(const Ue of Ie.docs){const ke=Ue.data(),Pe=ke.scores||{},Ze=Ue.id;Ze===m.id&&(ht=ke);const gt=Fe.get(Ze)||{participantId:Ze,name:fe.get(Ze)||`ID:${Ze}`,memberNo:O.get(Ze)||"-",totalPoints:0,clearCount:0},wi=new Set;for(const[da,qr]of Object.entries(Pe)){if(!qr)continue;const Rn=Vt.get(da),_r=(Rn==null?void 0:Rn.id)||da;wi.has(_r)||(wi.add(_r),gt.totalPoints+=Number(Rn==null?void 0:Rn.points)||1,gt.clearCount+=1)}Fe.set(Ze,gt)}const jt=OE(Array.from(Fe.values())),Ct=jt.find(Ue=>Ue.participantId===m.id);ge[Ae]||(ge[Ae]=new Map(jt.map(Ue=>[Ue.participantId,{participantId:Ue.participantId,name:Ue.name,memberNo:Ue.memberNo,totalPoints:0,clearCount:0}])));for(const Ue of jt){const ke=ge[Ae].get(Ue.participantId)||{participantId:Ue.participantId,name:Ue.name,memberNo:Ue.memberNo,totalPoints:0,clearCount:0};ke.totalPoints+=Ue.totalPoints,ke.clearCount+=Ue.clearCount,ge[Ae].set(Ue.participantId,ke)}const Gt=(ht==null?void 0:ht.scores)||{},vr=new Set,Dt=[];for(const[Ue,ke]of Object.entries(Gt)){if(!ke)continue;const Pe=Vt.get(Ue),Ze=(Pe==null?void 0:Pe.id)||Ue;vr.has(Ze)||(vr.add(Ze),Dt.push({routeName:(Pe==null?void 0:Pe.name)||Ue,points:Number(Pe==null?void 0:Pe.points)||1,grade:(Pe==null?void 0:Pe.grade)||"-"}))}Dt.sort((Ue,ke)=>Ue.routeName.localeCompare(ke.routeName,"ja"));const sn=Dt.reduce((Ue,ke)=>Ue+ke.points,0);return{categoryId:Ae,categoryName:re.get(Ae)||Ae,clearCount:Dt.length,totalPoints:sn,rank:(Ct==null?void 0:Ct.rank)||jt.length,totalParticipants:jt.length,updatedAtText:EO(ht==null?void 0:ht.updatedAt),clearedRoutes:Dt}}),ve=(await Promise.all(xe)).filter(Boolean);for(const Ae of ve)ae.push(Ae);J.push({seasonId:me.id,seasonName:me.name,categorySummaries:ae,totalPoints:ae.reduce((Ae,rt)=>Ae+rt.totalPoints,0),totalClears:ae.reduce((Ae,rt)=>Ae+rt.clearCount,0)})}if(!ee){const me=m.categoryId||P[0],le=me?Array.from((ge[me]||new Map).values()):[],ae=OE(le),xe=ae.find(ve=>ve.participantId===m.id);if(te(xe?{categoryName:re.get(me)||"",rank:xe.rank,totalParticipants:ae.length,totalPoints:xe.totalPoints,totalClears:xe.clearCount}:null),xe){const ve=ae.findIndex(Ie=>Ie.participantId===m.id),Ae=ve>0?ae[ve-1]:null,rt=ve>=0&&ve<ae.length-1?ae[ve+1]:null;se({prev:Ae,next:rt})}else se({prev:null,next:null});H(J)}}catch(pe){console.error(":",pe),ee||L("")}finally{ee||V(!1)}}})(),()=>{ee=!0}},[C,m,g,S,k,B,r]);const ye=I.useMemo(()=>({totalPoints:z.reduce((ee,ie)=>ee+ie.totalPoints,0),totalClears:z.reduce((ee,ie)=>ee+ie.totalClears,0)}),[z]);return C?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):U?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:U}),y.jsx("div",{className:"mt-6",children:y.jsx(We,{to:Ee,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[u==null?void 0:u.name," - "]}),y.jsxs("p",{className:"mt-3 text-sm text-slate-700",children:[": ",y.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-700",children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",((Q=k.find(ee=>ee.id===(m==null?void 0:m.categoryId)))==null?void 0:Q.name)||""]}),y.jsx("div",{className:"mt-4",children:y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:B,onChange:ee=>M(ee.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),S.map(ee=>y.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-slate-700",children:[y.jsxs("p",{children:[": ",y.jsx("strong",{children:ye.totalPoints})]}),y.jsxs("p",{children:[": ",y.jsx("strong",{children:ye.totalClears})]})]}),Z&&y.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["",Z.categoryName,":"," ",y.jsx("strong",{children:Z.rank})," / ",Z.totalParticipants," "," ",Z.totalPoints," /  ",Z.totalClears,""]})]}),(Y.prev||Y.next)&&y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:[Y.prev?y.jsxs(We,{to:A(Y.prev.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",Y.prev.rank," ",Y.prev.name]}):y.jsx("span",{className:"text-slate-600",children:""}),Y.next?y.jsxs(We,{to:A(Y.next.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",Y.next.rank," ",Y.next.name]}):y.jsx("span",{className:"text-slate-600",children:""})]})]}),D&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),y.jsx("div",{className:"mt-5",children:z.length===0?y.jsx("p",{className:"text-sm text-slate-600",children:""}):z.map(ee=>y.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[ee.seasonName," /  ",ee.totalPoints," /  ",ee.totalClears]}),ee.categorySummaries.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):ee.categorySummaries.map(ie=>y.jsxs("div",{className:"mt-4",children:[y.jsxs("h4",{className:"text-sm font-semibold text-slate-800",children:[": ",ie.categoryName," /  ",ie.rank,"/",ie.totalParticipants," / "," ",ie.totalPoints," /  ",ie.clearCount]}),y.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[": ",ie.updatedAtText]}),ie.clearedRoutes.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-2 overflow-x-auto",children:y.jsxs("table",{className:"min-w-[360px] w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""})]})}),y.jsx("tbody",{children:ie.clearedRoutes.map(pe=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:pe.routeName}),y.jsx("td",{className:"py-2",children:pe.grade}),y.jsx("td",{className:"py-2 text-right",children:pe.points})]},pe.routeName))})]})})]},`${ee.seasonId}-${ie.categoryId}`))]},ee.seasonId))}),y.jsx("div",{className:"mt-6",children:y.jsx(We,{to:Ee,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},jm=r=>Array.isArray(r)?r.filter(e=>typeof e=="string"&&e.trim().length>0):[],ME={id:"",name:"",city:"",prefecture:""},kE={id:"",email:"",name:"",role:"owner",gymIds:[]},xO=r=>(r||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),TO=()=>{Fn("");const{authUser:r,role:e,loading:n,error:i}=Si(),[o,u]=I.useState(!0),[d,m]=I.useState(""),[p,g]=I.useState(""),[_,S]=I.useState([]),[x,k]=I.useState([]),[N,B]=I.useState([]),[M,z]=I.useState(ME),[H,Z]=I.useState({}),[te,Y]=I.useState(kE),[se,C]=I.useState(""),R=I.useMemo(()=>{const O=new Map;for(const J of x){const ge=J.gymId||"";ge&&O.set(ge,(O.get(ge)||0)+1)}return O},[x]),D=async()=>{u(!0),m("");try{const[O,J,ge]=await Promise.all([Qe(Be(be,"gyms")),Qe(Be(be,"events")),Qe(Be(be,"users"))]),me=O.docs.map(ve=>({id:ve.id,...ve.data()})).sort((ve,Ae)=>(ve.name||"").localeCompare(Ae.name||"","ja")),le=J.docs.map(ve=>({id:ve.id,...ve.data()})),ae=ge.docs.map(ve=>({id:ve.id,...ve.data()})).sort((ve,Ae)=>{const rt=ve.role||"",Ie=Ae.role||"";return rt!==Ie?rt.localeCompare(Ie,"ja"):(ve.email||ve.id||"").localeCompare(Ae.email||Ae.id||"","ja")});S(me),k(le),B(ae);const xe={};for(const ve of me)xe[ve.id]={name:ve.name||"",city:ve.city||"",prefecture:ve.prefecture||""};Z(xe)}catch(O){console.error(":",O),m("")}finally{u(!1)}};I.useEffect(()=>{if(!n){if(i){m(i),u(!1);return}if(e!=="admin"){u(!1);return}D()}},[n,i,e]);const V=()=>{Y(kE),C("")},U=async O=>{O.preventDefault();const J=M.id.trim();if(!J||!M.name.trim()){g(" ID");return}if(_.some(ge=>ge.id===J)){g(" ID");return}try{await di(ct(be,"gyms",J),{name:M.name.trim(),city:M.city.trim(),prefecture:M.prefecture.trim(),createdAt:Sn(),updatedAt:Sn()}),z(ME),g(" "),await D()}catch(ge){console.error(":",ge),g(" ")}},L=async O=>{const J=H[O];if(!J||!J.name.trim()){g(" ");return}try{await di(ct(be,"gyms",O),{name:J.name.trim(),city:J.city.trim(),prefecture:J.prefecture.trim(),updatedAt:Sn()},{merge:!0}),g(` (${O})`),await D()}catch(ge){console.error(":",ge),g(" ")}},A=async O=>{const J=R.get(O)||0;if(J>0){g(`  ${J} `);return}if(window.confirm(`(${O})`))try{await vs(ct(be,"gyms",O)),g(` (${O})`),await D()}catch(ge){console.error(":",ge),g(" ")}},Ee=O=>{C(O.id),Y({id:O.id,email:O.email||"",name:O.name||"",role:O.role==="admin"?"admin":"owner",gymIds:jm(O.gymIds)})},ye=O=>{Y(J=>{const ge=J.gymIds.includes(O);return{...J,gymIds:ge?J.gymIds.filter(me=>me!==O):[...J.gymIds,O]}})},Q=async O=>{O.preventDefault();const J=te.email.trim().toLowerCase();if(!J){g(" ");return}const ge=te.id.trim()||xO(J);if(!ge){g(" ID");return}const me=te.role==="admin"?"admin":"owner",le=me==="admin"?["*"]:jm(te.gymIds);if(me==="owner"&&le.length===0){g(" owner 1");return}const ae=N.find(ve=>ve.id===ge),xe={email:J,name:te.name.trim(),role:me,gymIds:le,updatedAt:Sn()};ae!=null&&ae.uid&&(xe.uid=ae.uid),ae||(xe.createdAt=Sn());try{await di(ct(be,"users",ge),xe,{merge:!0}),g(` (${ge})`),C(ge),Y(ve=>({...ve,id:ge})),await D()}catch(ve){console.error(":",ve),g(" ")}},ee=async O=>{if(O.id===(r==null?void 0:r.uid)){g(" ");return}if(window.confirm(`(${O.id})`))try{await vs(ct(be,"users",O.id)),se===O.id&&V(),g(` (${O.id})`),await D()}catch(J){console.error(":",J),g(" ")}};if(n||o)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(d||i)return y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:d||i}),y.jsx(We,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});if(e!=="admin")return y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""}),y.jsx(We,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});const ie="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",pe="w-full max-w-[560px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",P="rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",re="rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",fe="rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm font-medium text-rose-700 transition hover:bg-rose-100";return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("p",{className:"mt-2",children:y.jsx(We,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),p&&y.jsx("p",{className:"mt-4 text-sm text-slate-700",children:p}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("form",{onSubmit:U,className:"mt-3 grid gap-2",children:[y.jsx("input",{type:"text",placeholder:"ID (: gym-shibuya)",value:M.id,onChange:O=>z(J=>({...J,id:O.target.value})),required:!0,className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.name,onChange:O=>z(J=>({...J,name:O.target.value})),required:!0,className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.city,onChange:O=>z(J=>({...J,city:O.target.value})),className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.prefecture,onChange:O=>z(J=>({...J,prefecture:O.target.value})),className:pe}),y.jsx("div",{children:y.jsx("button",{type:"submit",className:re,children:""})})]})]}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),_.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-3",children:_.map(O=>{var J,ge,me;return y.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[y.jsx("p",{className:"font-semibold text-slate-800",children:O.id}),y.jsxs("div",{className:"mt-2 grid gap-2",children:[y.jsx("input",{type:"text",value:((J=H[O.id])==null?void 0:J.name)||"",onChange:le=>Z(ae=>({...ae,[O.id]:{...ae[O.id],name:le.target.value}})),placeholder:"",className:pe}),y.jsx("input",{type:"text",value:((ge=H[O.id])==null?void 0:ge.city)||"",onChange:le=>Z(ae=>({...ae,[O.id]:{...ae[O.id],city:le.target.value}})),placeholder:"",className:pe}),y.jsx("input",{type:"text",value:((me=H[O.id])==null?void 0:me.prefecture)||"",onChange:le=>Z(ae=>({...ae,[O.id]:{...ae[O.id],prefecture:le.target.value}})),placeholder:"",className:pe})]}),y.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:[": ",R.get(O.id)||0]}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>L(O.id),className:P,children:""}),y.jsx("button",{type:"button",onClick:()=>A(O.id),className:fe,children:""})]})]},O.id)})})]}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("form",{onSubmit:Q,className:"mt-3 grid gap-2",children:[y.jsx("input",{type:"text",placeholder:"ID",value:te.id,onChange:O=>Y(J=>({...J,id:O.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"email",placeholder:"",value:te.email,onChange:O=>Y(J=>({...J,email:O.target.value})),required:!0,className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"text",placeholder:"",value:te.name,onChange:O=>Y(J=>({...J,name:O.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsxs("div",{className:"flex flex-wrap gap-4",children:[y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="owner",onChange:()=>Y(O=>({...O,role:"owner"}))}),"owner"]}),y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="admin",onChange:()=>Y(O=>({...O,role:"admin",gymIds:["*"]}))}),"admin"]})]}),te.role==="owner"&&y.jsxs("div",{children:[y.jsx("p",{className:"mb-2 text-sm text-slate-700",children:""}),y.jsx("div",{className:"flex flex-wrap gap-3",children:_.map(O=>y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:te.gymIds.includes(O.id),onChange:()=>ye(O.id)}),O.name||O.id]},O.id))})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"submit",className:re,children:se?` (${se})`:""}),y.jsx("button",{type:"button",onClick:V,className:P,children:""})]})]}),y.jsx("h4",{className:"mt-5 text-base font-semibold text-slate-900",children:""}),N.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-3",children:N.map(O=>y.jsxs("div",{className:`rounded-xl border p-4 ${se===O.id?"border-sky-200 bg-sky-50":"border-slate-200 bg-white"}`,children:[y.jsxs("p",{className:"text-sm text-slate-800",children:[y.jsx("strong",{children:O.email||"(no email)"})," / role: ",O.role||"-"]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:["profileId: ",O.id," / gymIds: ",JSON.stringify(jm(O.gymIds))]}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>Ee(O),className:P,children:""}),y.jsx("button",{type:"button",onClick:()=>ee(O),className:fe,children:""})]})]},O.id))})]})]})})},ei=({children:r})=>{const[e,n]=I.useState(!0),[i,o]=I.useState(!1),u=Hn();return I.useEffect(()=>{const d=Ob(fd,m=>{o(!!m),n(!1)});return()=>d()},[]),e?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):i?r:y.jsx(Zw,{to:"/login",replace:!0,state:{from:u}})};function SO(){return y.jsx(SA,{basename:"/FlashComp",children:y.jsxs(Jw,{children:[y.jsx(Dn,{path:"/",element:y.jsx(kA,{})}),y.jsx(Dn,{path:"/login",element:y.jsx(FD,{})}),y.jsx(Dn,{path:"/dashboard",element:y.jsx(ei,{children:y.jsx(KD,{})})}),y.jsx(Dn,{path:"/create-event",element:y.jsx(ei,{children:y.jsx($D,{})})}),y.jsx(Dn,{path:"/events/:eventId/edit",element:y.jsx(ei,{children:y.jsx(WD,{})})}),y.jsx(Dn,{path:"/events/:eventId/climbers",element:y.jsx(ei,{children:y.jsx(tO,{})})}),y.jsx(Dn,{path:"/events/:eventId/scores",element:y.jsx(ei,{children:y.jsx(rO,{})})}),y.jsx(Dn,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:y.jsx(ei,{children:y.jsx(aO,{})})}),y.jsx(Dn,{path:"/events/:eventId/data-io",element:y.jsx(ei,{children:y.jsx(mO,{})})}),y.jsx(Dn,{path:"/system-admin",element:y.jsx(ei,{children:y.jsx(TO,{})})}),y.jsx(Dn,{path:"/score-summary",element:y.jsx(yO,{})}),y.jsx(Dn,{path:"/score-summary/:eventId",element:y.jsx(_O,{})}),y.jsx(Dn,{path:"/score-summary/:eventId/participants/:participantId",element:y.jsx(bO,{})})]})})}ow.createRoot(document.getElementById("root")).render(y.jsx(I.StrictMode,{children:y.jsx(SO,{})}));
