(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Wd={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function mb(){if(s_)return Dl;s_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Dl.Fragment=e,Dl.jsx=n,Dl.jsxs=n,Dl}var a_;function pb(){return a_||(a_=1,Wd.exports=mb()),Wd.exports}var T=pb(),Jd={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function gb(){if(o_)return Pe;o_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,B={};function C(P,ie,he){this.props=P,this.context=ie,this.refs=B,this.updater=he||k}C.prototype.isReactComponent={},C.prototype.setState=function(P,ie){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ie,"setState")},C.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function j(){}j.prototype=C.prototype;function K(P,ie,he){this.props=P,this.context=ie,this.refs=B,this.updater=he||k}var Q=K.prototype=new j;Q.constructor=K,D(Q,C.prototype),Q.isPureReactComponent=!0;var Z=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function N(P,ie,he,le,ye,Ce){return he=Ce.ref,{$$typeof:r,type:P,key:ie,ref:he!==void 0?he:null,props:Ce}}function R(P,ie){return N(P.type,ie,void 0,void 0,void 0,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function V(P){var ie={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return ie[he]})}var U=/\/+/g;function z(P,ie){return typeof P=="object"&&P!==null&&P.key!=null?V(""+P.key):ie.toString(36)}function O(){}function St(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(ie){P.status==="pending"&&(P.status="fulfilled",P.value=ie)},function(ie){P.status==="pending"&&(P.status="rejected",P.reason=ie)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function et(P,ie,he,le,ye){var Ce=typeof P;(Ce==="undefined"||Ce==="boolean")&&(P=null);var de=!1;if(P===null)de=!0;else switch(Ce){case"bigint":case"string":case"number":de=!0;break;case"object":switch(P.$$typeof){case r:case e:de=!0;break;case E:return de=P._init,et(de(P._payload),ie,he,le,ye)}}if(de)return ye=ye(P),de=le===""?"."+z(P,0):le,Z(ye)?(he="",de!=null&&(he=de.replace(U,"$&/")+"/"),et(ye,ie,he,"",function(De){return De})):ye!=null&&(I(ye)&&(ye=R(ye,he+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(U,"$&/")+"/")+de)),ie.push(ye)),1;de=0;var oe=le===""?".":le+":";if(Z(P))for(var me=0;me<P.length;me++)le=P[me],Ce=oe+z(le,me),de+=et(le,ie,he,Ce,ye);else if(me=A(P),typeof me=="function")for(P=me.call(P),me=0;!(le=P.next()).done;)le=le.value,Ce=oe+z(le,me++),de+=et(le,ie,he,Ce,ye);else if(Ce==="object"){if(typeof P.then=="function")return et(St(P),ie,he,le,ye);throw ie=String(P),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return de}function J(P,ie,he){if(P==null)return P;var le=[],ye=0;return et(P,le,"","",function(Ce){return ie.call(he,Ce,ye++)}),le}function ee(P){if(P._status===-1){var ie=P._result;ie=ie(),ie.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=ie)}if(P._status===1)return P._result.default;throw P._result}var ce=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Te(){}return Pe.Children={map:J,forEach:function(P,ie,he){J(P,function(){ie.apply(this,arguments)},he)},count:function(P){var ie=0;return J(P,function(){ie++}),ie},toArray:function(P){return J(P,function(ie){return ie})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=C,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=K,Pe.StrictMode=s,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return Y.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cloneElement=function(P,ie,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var le=D({},P.props),ye=P.key,Ce=void 0;if(ie!=null)for(de in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(ye=""+ie.key),ie)!ue.call(ie,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&ie.ref===void 0||(le[de]=ie[de]);var de=arguments.length-2;if(de===1)le.children=he;else if(1<de){for(var oe=Array(de),me=0;me<de;me++)oe[me]=arguments[me+2];le.children=oe}return N(P.type,ye,void 0,void 0,Ce,le)},Pe.createContext=function(P){return P={$$typeof:f,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Pe.createElement=function(P,ie,he){var le,ye={},Ce=null;if(ie!=null)for(le in ie.key!==void 0&&(Ce=""+ie.key),ie)ue.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=ie[le]);var de=arguments.length-2;if(de===1)ye.children=he;else if(1<de){for(var oe=Array(de),me=0;me<de;me++)oe[me]=arguments[me+2];ye.children=oe}if(P&&P.defaultProps)for(le in de=P.defaultProps,de)ye[le]===void 0&&(ye[le]=de[le]);return N(P,Ce,void 0,void 0,null,ye)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=I,Pe.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:ee}},Pe.memo=function(P,ie){return{$$typeof:g,type:P,compare:ie===void 0?null:ie}},Pe.startTransition=function(P){var ie=Y.T,he={};Y.T=he;try{var le=P(),ye=Y.S;ye!==null&&ye(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Te,ce)}catch(Ce){ce(Ce)}finally{Y.T=ie}},Pe.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Pe.use=function(P){return Y.H.use(P)},Pe.useActionState=function(P,ie,he){return Y.H.useActionState(P,ie,he)},Pe.useCallback=function(P,ie){return Y.H.useCallback(P,ie)},Pe.useContext=function(P){return Y.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,ie){return Y.H.useDeferredValue(P,ie)},Pe.useEffect=function(P,ie,he){var le=Y.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(P,ie)},Pe.useId=function(){return Y.H.useId()},Pe.useImperativeHandle=function(P,ie,he){return Y.H.useImperativeHandle(P,ie,he)},Pe.useInsertionEffect=function(P,ie){return Y.H.useInsertionEffect(P,ie)},Pe.useLayoutEffect=function(P,ie){return Y.H.useLayoutEffect(P,ie)},Pe.useMemo=function(P,ie){return Y.H.useMemo(P,ie)},Pe.useOptimistic=function(P,ie){return Y.H.useOptimistic(P,ie)},Pe.useReducer=function(P,ie,he){return Y.H.useReducer(P,ie,he)},Pe.useRef=function(P){return Y.H.useRef(P)},Pe.useState=function(P){return Y.H.useState(P)},Pe.useSyncExternalStore=function(P,ie,he){return Y.H.useSyncExternalStore(P,ie,he)},Pe.useTransition=function(){return Y.H.useTransition()},Pe.version="19.1.0",Pe}var l_;function Km(){return l_||(l_=1,Jd.exports=gb()),Jd.exports}var M=Km(),em={exports:{}},Nl={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function yb(){return u_||(u_=1,function(r){function e(J,ee){var ce=J.length;J.push(ee);e:for(;0<ce;){var Te=ce-1>>>1,P=J[Te];if(0<o(P,ee))J[Te]=ee,J[ce]=P,ce=Te;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ee=J[0],ce=J.pop();if(ce!==ee){J[0]=ce;e:for(var Te=0,P=J.length,ie=P>>>1;Te<ie;){var he=2*(Te+1)-1,le=J[he],ye=he+1,Ce=J[ye];if(0>o(le,ce))ye<P&&0>o(Ce,le)?(J[Te]=Ce,J[ye]=ce,Te=ye):(J[Te]=le,J[he]=ce,Te=he);else if(ye<P&&0>o(Ce,ce))J[Te]=Ce,J[ye]=ce,Te=ye;else break e}}return ee}function o(J,ee){var ce=J.sortIndex-ee.sortIndex;return ce!==0?ce:J.id-ee.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,w=null,A=3,k=!1,D=!1,B=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function Z(J){for(var ee=n(g);ee!==null;){if(ee.callback===null)s(g);else if(ee.startTime<=J)s(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function Y(J){if(B=!1,Z(J),!D)if(n(p)!==null)D=!0,ue||(ue=!0,z());else{var ee=n(g);ee!==null&&et(Y,ee.startTime-J)}}var ue=!1,N=-1,R=5,I=-1;function V(){return C?!0:!(r.unstable_now()-I<R)}function U(){if(C=!1,ue){var J=r.unstable_now();I=J;var ee=!0;try{e:{D=!1,B&&(B=!1,K(N),N=-1),k=!0;var ce=A;try{t:{for(Z(J),w=n(p);w!==null&&!(w.expirationTime>J&&V());){var Te=w.callback;if(typeof Te=="function"){w.callback=null,A=w.priorityLevel;var P=Te(w.expirationTime<=J);if(J=r.unstable_now(),typeof P=="function"){w.callback=P,Z(J),ee=!0;break t}w===n(p)&&s(p),Z(J)}else s(p);w=n(p)}if(w!==null)ee=!0;else{var ie=n(g);ie!==null&&et(Y,ie.startTime-J),ee=!1}}break e}finally{w=null,A=ce,k=!1}ee=void 0}}finally{ee?z():ue=!1}}}var z;if(typeof Q=="function")z=function(){Q(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,St=O.port2;O.port1.onmessage=U,z=function(){St.postMessage(null)}}else z=function(){j(U,0)};function et(J,ee){N=j(function(){J(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(J){switch(A){case 1:case 2:case 3:var ee=3;break;default:ee=A}var ce=A;A=ee;try{return J()}finally{A=ce}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ce=A;A=J;try{return ee()}finally{A=ce}},r.unstable_scheduleCallback=function(J,ee,ce){var Te=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Te+ce:Te):ce=Te,J){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ce+P,J={id:E++,callback:ee,priorityLevel:J,startTime:ce,expirationTime:P,sortIndex:-1},ce>Te?(J.sortIndex=ce,e(g,J),n(p)===null&&J===n(g)&&(B?(K(N),N=-1):B=!0,et(Y,ce-Te))):(J.sortIndex=P,e(p,J),D||k||(D=!0,ue||(ue=!0,z()))),J},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(J){var ee=A;return function(){var ce=A;A=ee;try{return J.apply(this,arguments)}finally{A=ce}}}}(nm)),nm}var c_;function vb(){return c_||(c_=1,tm.exports=yb()),tm.exports}var im={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function _b(){if(h_)return un;h_=1;var r=Km();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},un.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:k}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:A,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.1.0",un}var f_;function Eb(){if(f_)return im.exports;f_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),im.exports=_b(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function Tb(){if(d_)return Nl;d_=1;var r=vb(),e=Km(),n=Eb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,S=h.child;S;){if(S===a){_=!0,a=h,l=d;break}if(S===l){_=!0,l=h,a=d;break}S=S.sibling}if(!_){for(S=d.child;S;){if(S===a){_=!0,a=d,l=h;break}if(S===l){_=!0,l=d,a=h;break}S=S.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var O=Symbol.for("react.client.reference");function St(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case C:return"Profiler";case B:return"StrictMode";case Y:return"Suspense";case ue:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case Q:return(t.displayName||"Context")+".Provider";case K:return(t._context.displayName||"Context")+".Consumer";case Z:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:St(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return St(t(i))}catch{}}return null}var et=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Te=[],P=-1;function ie(t){return{current:t}}function he(t){0>P||(t.current=Te[P],Te[P]=null,P--)}function le(t,i){P++,Te[P]=t.current,t.current=i}var ye=ie(null),Ce=ie(null),de=ie(null),oe=ie(null);function me(t,i){switch(le(de,i),le(Ce,t),le(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Mv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Mv(i),t=Pv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}he(ye),le(ye,t)}function De(){he(ye),he(Ce),he(de)}function ve(t){t.memoizedState!==null&&le(oe,t);var i=ye.current,a=Pv(i,t.type);i!==a&&(le(Ce,t),le(ye,a))}function ft(t){Ce.current===t&&(he(ye),he(Ce)),oe.current===t&&(he(oe),wl._currentValue=ce)}var Vt=Object.prototype.hasOwnProperty,st=r.unstable_scheduleCallback,lt=r.unstable_cancelCallback,Rn=r.unstable_shouldYield,an=r.unstable_requestPaint,vt=r.unstable_now,Ln=r.unstable_getCurrentPriorityLevel,_n=r.unstable_ImmediatePriority,Un=r.unstable_UserBlockingPriority,on=r.unstable_NormalPriority,Ne=r.unstable_LowPriority,Be=r.unstable_IdlePriority,ki=r.log,jn=r.unstable_setDisableYieldValue,ut=null,Ye=null;function mn(t){if(typeof ki=="function"&&jn(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ut,t)}catch{}}var xt=Math.clz32?Math.clz32:ds,gu=Math.log,Jh=Math.LN2;function ds(t){return t>>>=0,t===0?32:31-(gu(t)/Jh|0)|0}var ms=256,ps=4194304;function ei(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ia(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=ei(l):(_&=S,_!==0?h=ei(_):a||(a=S&~t,a!==0&&(h=ei(a))))):(S=l&~d,S!==0?h=ei(S):_!==0?h=ei(_):a||(a=l&~t,a!==0&&(h=ei(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function gs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function wo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var t=ms;return ms<<=1,(ms&4194048)===0&&(ms=256),t}function Co(){var t=ps;return ps<<=1,(ps&62914560)===0&&(ps=4194304),t}function Li(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ui(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Io(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,x=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var te=31-xt(a),re=1<<te;S[te]=0,x[te]=-1;var $=G[te];if($!==null)for(G[te]=null,te=0;te<$.length;te++){var X=$[te];X!==null&&(X.lane&=-536870913)}a&=~re}l!==0&&fi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function fi(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-xt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function xo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-xt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function vr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ra(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _r(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Jv(t.type))}function yu(t,i){var a=ee.p;try{return ee.p=t,i()}finally{ee.p=a}}var mt=Math.random().toString(36).slice(2),kt="__reactFiber$"+mt,Dt="__reactProps$"+mt,Bn="__reactContainer$"+mt,Do="__reactEvents$"+mt,ef="__reactListeners$"+mt,Er="__reactHandles$"+mt,vu="__reactResources$"+mt,ys="__reactMarker$"+mt;function Tr(t){delete t[kt],delete t[Dt],delete t[Do],delete t[ef],delete t[Er]}function ji(t){var i=t[kt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Bn]||a[kt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Uv(t);t!==null;){if(a=t[kt])return a;t=Uv(t)}return i}t=a,a=t.parentNode}return null}function di(t){if(t=t[kt]||t[Bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function mi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function pn(t){var i=t[vu];return i||(i=t[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(t){t[ys]=!0}var No=new Set,sa={};function ti(t,i){Bi(t,i),Bi(t+"Capture",i)}function Bi(t,i){for(sa[t]=i,t=0;t<i.length;t++)No.add(i[t])}var _u=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eu={},vs={};function Tu(t){return Vt.call(vs,t)?!0:Vt.call(Eu,t)?!1:_u.test(t)?vs[t]=!0:(Eu[t]=!0,!1)}function Sr(t,i,a){if(Tu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function pi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Xt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var _s,Su;function zi(t){if(_s===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);_s=i&&i[1]||"",Su=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_s+t+Su}var aa=!1;function oa(t,i){if(!t||aa)return"";aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var $=X}Reflect.construct(t,[],re)}else{try{re.call()}catch(X){$=X}t.call(re.prototype)}}else{try{throw Error()}catch(X){$=X}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],S=d[1];if(_&&S){var x=_.split(`
`),G=S.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===G.length)for(l=x.length-1,h=G.length-1;1<=l&&0<=h&&x[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==G[h]){var te=`
`+x[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=h);break}}}finally{aa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?zi(a):""}function Oo(t){switch(t.tag){case 26:case 27:case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return oa(t.type,!1);case 11:return oa(t.type.render,!1);case 1:return oa(t.type,!0);case 31:return zi("Activity");default:return""}}function la(t){try{var i="";do i+=Oo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function tf(t){var i=Mo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ua(t){t._valueTracker||(t._valueTracker=tf(t))}function Po(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Mo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Es(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var nf=/[\n"\\]/g;function Nt(t){return t.replace(nf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cn(t,i,a,l,h,d,_,S){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+gn(i)):t.value!==""+gn(i)&&(t.value=""+gn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Ar(t,_,gn(i)):a!=null?Ar(t,_,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+gn(S):t.removeAttribute("name")}function Ts(t,i,a,l,h,d,_,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+gn(a):"",i=i!=null?""+gn(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Ar(t,i,a){i==="number"&&Es(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function tt(t,i,a){if(i!=null&&(i=""+gn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+gn(a):""}function Ss(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(et(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=gn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var As=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Au(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||As.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Vo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Au(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Au(t,d,i[d])}function ko(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return sf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Hi=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,Gi=null;function Lo(t){var i=di(t);if(i&&(t=i.stateNode)){var a=t[Dt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Cn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Dt]||null;if(!h)throw Error(s(90));Cn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Po(l)}break e;case"textarea":tt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&qi(t,!!a.multiple,i,!1)}}}var gi=!1;function bu(t,i,a){if(gi)return t(i,a);gi=!0;try{var l=t(i);return l}finally{if(gi=!1,(Fi!==null||Gi!==null)&&(yc(),Fi&&(i=Fi,t=Gi,Gi=Fi=null,Lo(i),t)))for(i=0;i<t.length;i++)Lo(t[i])}}function bs(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Dt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(ni)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{Hn=!1}var yi=null,br=null,Ki=null;function Uo(){if(Ki)return Ki;var t,i=br,a=i.length,l,h="value"in yi?yi.value:yi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return Ki=h.slice(t,1<l?1-l:void 0)}function vi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function _i(){return!0}function jo(){return!1}function Ht(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?_i:jo,this.isPropagationStopped=jo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),i}var Xe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Ht(Xe),Rs=E({},Xe,{view:0,detail:0}),wu=Ht(Rs),fa,da,Ei,Cs=E({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ei&&(Ei&&t.type==="mousemove"?(fa=t.screenX-Ei.screenX,da=t.screenY-Ei.screenY):da=fa=0,Ei=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:da}}),Fn=Ht(Cs),Ru=E({},Cs,{dataTransfer:0}),af=Ht(Ru),Is=E({},Rs,{relatedTarget:0}),ma=Ht(Is),Bo=E({},Xe,{animationName:0,elapsedTime:0,pseudoElement:0}),pa=Ht(Bo),Cu=E({},Xe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ga=Ht(Cu),of=E({},Xe,{data:0}),zo=Ht(of),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=xu[t])?!!i[t]:!1}function Ds(){return qo}var Du=E({},Rs,{key:function(t){if(t.key){var i=xs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=vi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(t){return t.type==="keypress"?vi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=Ht(Du),Nu=E({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=Ht(Nu),Qi=E({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),Ou=Ht(Qi),Mu=E({},Xe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pu=Ht(Mu),Vu=E({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),va=Ht(Vu),yn=E({},Xe,{newState:0,oldState:0}),ku=Ht(yn),Lu=[9,13,27,32],Ti=ni&&"CompositionEvent"in window,c=null;ni&&"documentMode"in document&&(c=document.documentMode);var y=ni&&"TextEvent"in window&&!c,v=ni&&(!Ti||c&&8<c&&11>=c),b=" ",H=!1;function W(t,i){switch(t){case"keyup":return Lu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var He=!1;function Lt(t,i){switch(t){case"compositionend":return fe(i);case"keypress":return i.which!==32?null:(H=!0,b);case"textInput":return t=i.data,t===b&&H?null:t;default:return null}}function Fe(t,i){if(He)return t==="compositionend"||!Ti&&W(t,i)?(t=Uo(),Ki=br=yi=null,He=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ft[t.type]:i==="textarea"}function Yi(t,i,a,l){Fi?Gi?Gi.push(l):Gi=[l]:Fi=l,i=Ac(i,"onChange"),0<i.length&&(a=new ha("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Zt=null,Si=null;function Fo(t){Iv(t,0)}function Uu(t){var i=mi(t);if(Po(i))return t}function $p(t,i){if(t==="change")return i}var Xp=!1;if(ni){var lf;if(ni){var uf="oninput"in document;if(!uf){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),uf=typeof Zp.oninput=="function"}lf=uf}else lf=!1;Xp=lf&&(!document.documentMode||9<document.documentMode)}function Wp(){Zt&&(Zt.detachEvent("onpropertychange",Jp),Si=Zt=null)}function Jp(t){if(t.propertyName==="value"&&Uu(Si)){var i=[];Yi(i,Si,t,qn(t)),bu(Fo,i)}}function FS(t,i,a){t==="focusin"?(Wp(),Zt=i,Si=a,Zt.attachEvent("onpropertychange",Jp)):t==="focusout"&&Wp()}function GS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Si)}function KS(t,i){if(t==="click")return Uu(i)}function QS(t,i){if(t==="input"||t==="change")return Uu(i)}function YS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var In=typeof Object.is=="function"?Object.is:YS;function Go(t,i){if(In(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Vt.call(i,h)||!In(t[h],i[h]))return!1}return!0}function eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tg(t,i){var a=eg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=eg(a)}}function ng(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ng(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function ig(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Es(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Es(t.document)}return i}function cf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var $S=ni&&"documentMode"in document&&11>=document.documentMode,_a=null,hf=null,Ko=null,ff=!1;function rg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||_a==null||_a!==Es(l)||(l=_a,"selectionStart"in l&&cf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ko&&Go(Ko,l)||(Ko=l,l=Ac(hf,"onSelect"),0<l.length&&(i=new ha("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=_a)))}function Ns(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ea={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},df={},sg={};ni&&(sg=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Os(t){if(df[t])return df[t];if(!Ea[t])return t;var i=Ea[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in sg)return df[t]=i[a];return t}var ag=Os("animationend"),og=Os("animationiteration"),lg=Os("animationstart"),XS=Os("transitionrun"),ZS=Os("transitionstart"),WS=Os("transitioncancel"),ug=Os("transitionend"),cg=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function ii(t,i){cg.set(t,i),ti(i,[t])}var hg=new WeakMap;function Gn(t,i){if(typeof t=="object"&&t!==null){var a=hg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:la(i)},hg.set(t,i),i)}return{value:t,source:i,stack:la(i)}}var Kn=[],Ta=0,pf=0;function ju(){for(var t=Ta,i=pf=Ta=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&fg(a,h,d)}}function Bu(t,i,a,l){Kn[Ta++]=t,Kn[Ta++]=i,Kn[Ta++]=a,Kn[Ta++]=l,pf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function gf(t,i,a,l){return Bu(t,i,a,l),zu(t)}function Sa(t,i){return Bu(t,null,null,i),zu(t)}function fg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-xt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function zu(t){if(50<yl)throw yl=0,Sd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Aa={};function JS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,i,a,l){return new JS(t,i,a,l)}function yf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,i){var a=t.alternate;return a===null?(a=xn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function dg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function qu(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")yf(t)&&(_=1);else if(typeof t=="string")_=tb(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=xn(31,a,i,h),t.elementType=I,t.lanes=d,t;case D:return Ms(a.children,h,d,i);case B:_=8,h|=24;break;case C:return t=xn(12,a,i,h|2),t.elementType=C,t.lanes=d,t;case Y:return t=xn(13,a,i,h),t.elementType=Y,t.lanes=d,t;case ue:return t=xn(19,a,i,h),t.elementType=ue,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:case Q:_=10;break e;case K:_=9;break e;case Z:_=11;break e;case N:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=xn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Ms(t,i,a,l){return t=xn(7,t,l,i),t.lanes=a,t}function vf(t,i,a){return t=xn(6,t,null,i),t.lanes=a,t}function _f(t,i,a){return i=xn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ba=[],wa=0,Hu=null,Fu=0,Qn=[],Yn=0,Ps=null,Xi=1,Zi="";function Vs(t,i){ba[wa++]=Fu,ba[wa++]=Hu,Hu=t,Fu=i}function mg(t,i,a){Qn[Yn++]=Xi,Qn[Yn++]=Zi,Qn[Yn++]=Ps,Ps=t;var l=Xi;t=Zi;var h=32-xt(l)-1;l&=~(1<<h),a+=1;var d=32-xt(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Xi=1<<32-xt(i)+h|a<<h|l,Zi=d+t}else Xi=1<<d|a<<h|l,Zi=t}function Ef(t){t.return!==null&&(Vs(t,1),mg(t,1,0))}function Tf(t){for(;t===Hu;)Hu=ba[--wa],ba[wa]=null,Fu=ba[--wa],ba[wa]=null;for(;t===Ps;)Ps=Qn[--Yn],Qn[Yn]=null,Zi=Qn[--Yn],Qn[Yn]=null,Xi=Qn[--Yn],Qn[Yn]=null}var vn=null,At=null,$e=!1,ks=null,Ai=!1,Sf=Error(s(519));function Ls(t){var i=Error(s(418,""));throw $o(Gn(i,t)),Sf}function pg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[kt]=t,i[Dt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)je(_l[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),Ts(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ua(i);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Ss(i,l.value,l.defaultValue,l.children),ua(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Ov(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=bc),i=!0):i=!1,i||Ls(t)}function gg(t){for(vn=t.return;vn;)switch(vn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:vn=vn.return}}function Qo(t){if(t!==vn)return!1;if(!$e)return gg(t),$e=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ud(t.type,t.memoizedProps)),a=!a),a&&At&&Ls(t),gg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){At=si(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}At=null}}else i===27?(i=At,Br(t.type)?(t=qd,qd=null,At=t):At=i):At=vn?si(t.stateNode.nextSibling):null;return!0}function Yo(){At=vn=null,$e=!1}function yg(){var t=ks;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),ks=null),t}function $o(t){ks===null?ks=[t]:ks.push(t)}var Af=ie(null),Us=null,Wi=null;function wr(t,i,a){le(Af,i._currentValue),i._currentValue=a}function Ji(t){t._currentValue=Af.current,he(Af)}function bf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function wf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=h;for(var x=0;x<i.length;x++)if(S.context===i[x]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),bf(d.return,a,t),l||(_=null);break e}d=S.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),bf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Xo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=h.type;In(h.pendingProps.value,_.value)||(t!==null?t.push(S):t=[S])}}else if(h===oe.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(wl):t=[wl])}h=h.return}t!==null&&wf(i,t,a,l),i.flags|=262144}function Gu(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function js(t){Us=t,Wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return vg(Us,t)}function Ku(t,i){return Us===null&&js(t),vg(t,i)}function vg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Wi===null){if(t===null)throw Error(s(308));Wi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Wi=Wi.next=i;return a}var eA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},tA=r.unstable_scheduleCallback,nA=r.unstable_NormalPriority,jt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new eA,data:new Map,refCount:0}}function Zo(t){t.refCount--,t.refCount===0&&tA(nA,function(){t.controller.abort()})}var Wo=null,Cf=0,Ra=0,Ca=null;function iA(t,i){if(Wo===null){var a=Wo=[];Cf=0,Ra=xd(),Ca={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Cf++,i.then(_g,_g),i}function _g(){if(--Cf===0&&Wo!==null){Ca!==null&&(Ca.status="fulfilled");var t=Wo;Wo=null,Ra=0,Ca=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function rA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Eg=J.S;J.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&iA(t,i),Eg!==null&&Eg(t,i)};var Bs=ie(null);function If(){var t=Bs.current;return t!==null?t:ct.pooledCache}function Qu(t,i){i===null?le(Bs,Bs.current):le(Bs,i.pool)}function Tg(){var t=If();return t===null?null:{parent:jt._currentValue,pool:t}}var Jo=Error(s(460)),Sg=Error(s(474)),Yu=Error(s(542)),xf={then:function(){}};function Ag(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $u(){}function bg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then($u,$u),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Rg(t),t;default:if(typeof i.status=="string")i.then($u,$u);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Rg(t),t}throw el=i,Jo}}var el=null;function wg(){if(el===null)throw Error(s(459));var t=el;return el=null,t}function Rg(t){if(t===Jo||t===Yu)throw Error(s(483))}var Rr=!1;function Df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Cr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ir(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=zu(t),fg(t,null,a),i}return Bu(t,l,i,a),zu(t)}function tl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,xo(t,a)}}function Of(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Mf=!1;function nl(){if(Mf){var t=Ca;if(t!==null)throw t}}function il(t,i,a,l){Mf=!1;var h=t.updateQueue;Rr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var x=S,G=x.next;x.next=null,_===null?d=G:_.next=G,_=x;var te=t.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==_&&(S===null?te.firstBaseUpdate=G:S.next=G,te.lastBaseUpdate=x))}if(d!==null){var re=h.baseState;_=0,te=G=x=null,S=d;do{var $=S.lane&-536870913,X=$!==S.lane;if(X?(Ge&$)===$:(l&$)===$){$!==0&&$===Ra&&(Mf=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ie=t,Ae=S;$=i;var rt=a;switch(Ae.tag){case 1:if(Ie=Ae.payload,typeof Ie=="function"){re=Ie.call(rt,re,$);break e}re=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ae.payload,$=typeof Ie=="function"?Ie.call(rt,re,$):Ie,$==null)break e;re=E({},re,$);break e;case 2:Rr=!0}}$=S.callback,$!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[$]:X.push($))}else X={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(G=te=X,x=re):te=te.next=X,_|=$;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;X=S,S=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);te===null&&(x=re),h.baseState=x,h.firstBaseUpdate=G,h.lastBaseUpdate=te,d===null&&(h.shared.lanes=0),kr|=_,t.lanes=_,t.memoizedState=re}}function Cg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Ig(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Cg(a[t],i)}var Ia=ie(null),Xu=ie(0);function xg(t,i){t=ar,le(Xu,t),le(Ia,i),ar=t|i.baseLanes}function Pf(){le(Xu,ar),le(Ia,Ia.current)}function Vf(){ar=Xu.current,he(Ia),he(Xu)}var xr=0,Ve=null,nt=null,Ot=null,Zu=!1,xa=!1,zs=!1,Wu=0,rl=0,Da=null,sA=0;function Rt(){throw Error(s(321))}function kf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!In(t[a],i[a]))return!1;return!0}function Lf(t,i,a,l,h,d){return xr=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=t===null||t.memoizedState===null?fy:dy,zs=!1,d=a(l,h),zs=!1,xa&&(d=Ng(i,a,l,h)),Dg(t),d}function Dg(t){J.H=rc;var i=nt!==null&&nt.next!==null;if(xr=0,Ot=nt=Ve=null,Zu=!1,rl=0,Da=null,i)throw Error(s(300));t===null||Gt||(t=t.dependencies,t!==null&&Gu(t)&&(Gt=!0))}function Ng(t,i,a,l){Ve=t;var h=0;do{if(xa&&(Da=null),rl=0,xa=!1,25<=h)throw Error(s(301));if(h+=1,Ot=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=fA,d=i(a,l)}while(xa);return d}function aA(){var t=J.H,i=t.useState()[0];return i=typeof i.then=="function"?sl(i):i,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Ve.flags|=1024),i}function Uf(){var t=Wu!==0;return Wu=0,t}function jf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Bf(t){if(Zu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Zu=!1}xr=0,Ot=nt=Ve=null,xa=!1,rl=Wu=0,Da=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Mt(){if(nt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var i=Ot===null?Ve.memoizedState:Ot.next;if(i!==null)Ot=i,nt=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function zf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(t){var i=rl;return rl+=1,Da===null&&(Da=[]),t=bg(Da,t,i),i=Ve,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?fy:dy),t}function Ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===Q)return ln(t)}throw Error(s(438,String(t)))}function qf(t){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=zf(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=V;return i.index++,a}function er(t,i){return typeof i=="function"?i(t):i}function ec(t){var i=Mt();return Hf(i,nt,t)}function Hf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var S=_=null,x=null,G=i,te=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Ge&re)===re:(xr&re)===re){var $=G.revertLane;if($===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===Ra&&(te=!0);else if((xr&$)===$){G=G.next,$===Ra&&(te=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},x===null?(S=x=re,_=d):x=x.next=re,Ve.lanes|=$,kr|=$;re=G.action,zs&&a(d,re),d=G.hasEagerState?G.eagerState:a(d,re)}else $={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},x===null?(S=x=$,_=d):x=x.next=$,Ve.lanes|=re,kr|=re;G=G.next}while(G!==null&&G!==i);if(x===null?_=d:x.next=S,!In(d,t.memoizedState)&&(Gt=!0,te&&(a=Ca,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ff(t){var i=Mt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);In(d,i.memoizedState)||(Gt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Og(t,i,a){var l=Ve,h=Mt(),d=$e;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!In((nt||h).memoizedState,a);_&&(h.memoizedState=a,Gt=!0),h=h.queue;var S=Vg.bind(null,l,h,t);if(al(2048,8,S,[t]),h.getSnapshot!==i||_||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,Na(9,tc(),Pg.bind(null,l,h,a,i),null),ct===null)throw Error(s(349));d||(xr&124)!==0||Mg(l,i,a)}return a}function Mg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=zf(),Ve.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Pg(t,i,a,l){i.value=a,i.getSnapshot=l,kg(i)&&Lg(t)}function Vg(t,i,a){return a(function(){kg(i)&&Lg(t)})}function kg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!In(t,a)}catch{return!0}}function Lg(t){var i=Sa(t,2);i!==null&&Pn(i,t,2)}function Gf(t){var i=En();if(typeof t=="function"){var a=t;if(t=a(),zs){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},i}function Ug(t,i,a,l){return t.baseState=a,Hf(t,nt,typeof l=="function"?l:er)}function oA(t,i,a,l,h){if(ic(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,jg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function jg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=J.T,_={};J.T=_;try{var S=a(h,l),x=J.S;x!==null&&x(_,S),Bg(t,i,S)}catch(G){Kf(t,i,G)}finally{J.T=d}}else try{d=a(h,l),Bg(t,i,d)}catch(G){Kf(t,i,G)}}function Bg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zg(t,i,l)},function(l){return Kf(t,i,l)}):zg(t,i,a)}function zg(t,i,a){i.status="fulfilled",i.value=a,qg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,jg(t,a)))}function Kf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,qg(i),i=i.next;while(i!==l)}t.action=null}function qg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Hg(t,i){return i}function Fg(t,i){if($e){var a=ct.formState;if(a!==null){e:{var l=Ve;if($e){if(At){t:{for(var h=At,d=Ai;h.nodeType!==8;){if(!d){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){At=si(h.nextSibling),l=h.data==="F!";break e}}Ls(l)}l=!1}l&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hg,lastRenderedState:i},a.queue=l,a=uy.bind(null,Ve,l),l.dispatch=a,l=Gf(!1),d=Zf.bind(null,Ve,!1,l.queue),l=En(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=oA.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Gg(t){var i=Mt();return Kg(i,nt,t)}function Kg(t,i,a){if(i=Hf(t,i,Hg)[0],t=ec(er)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=sl(i)}catch(_){throw _===Jo?Yu:_}else l=i;i=Mt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,Na(9,tc(),lA.bind(null,h,a),null)),[l,d,t]}function lA(t,i){t.action=i}function Qg(t){var i=Mt(),a=nt;if(a!==null)return Kg(i,a,t);Mt(),i=i.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Na(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=zf(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function tc(){return{destroy:void 0,resource:void 0}}function Yg(){return Mt().memoizedState}function nc(t,i,a,l){var h=En();l=l===void 0?null:l,Ve.flags|=t,h.memoizedState=Na(1|i,tc(),a,l)}function al(t,i,a,l){var h=Mt();l=l===void 0?null:l;var d=h.memoizedState.inst;nt!==null&&l!==null&&kf(l,nt.memoizedState.deps)?h.memoizedState=Na(i,d,a,l):(Ve.flags|=t,h.memoizedState=Na(1|i,d,a,l))}function $g(t,i){nc(8390656,8,t,i)}function Xg(t,i){al(2048,8,t,i)}function Zg(t,i){return al(4,2,t,i)}function Wg(t,i){return al(4,4,t,i)}function Jg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ey(t,i,a){a=a!=null?a.concat([t]):null,al(4,4,Jg.bind(null,i,t),a)}function Qf(){}function ty(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&kf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function ny(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&kf(i,l[1]))return l[0];if(l=t(),zs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function Yf(t,i,a){return a===void 0||(xr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=sv(),Ve.lanes|=t,kr|=t,a)}function iy(t,i,a,l){return In(a,i)?a:Ia.current!==null?(t=Yf(t,a,l),In(t,i)||(Gt=!0),t):(xr&42)===0?(Gt=!0,t.memoizedState=a):(t=sv(),Ve.lanes|=t,kr|=t,i)}function ry(t,i,a,l,h){var d=ee.p;ee.p=d!==0&&8>d?d:8;var _=J.T,S={};J.T=S,Zf(t,!1,i,a);try{var x=h(),G=J.S;if(G!==null&&G(S,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var te=rA(x,l);ol(t,i,te,Mn(t))}else ol(t,i,l,Mn(t))}catch(re){ol(t,i,{then:function(){},status:"rejected",reason:re},Mn())}finally{ee.p=d,J.T=_}}function uA(){}function $f(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=sy(t).queue;ry(t,h,i,ce,a===null?uA:function(){return ay(t),a(l)})}function sy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ay(t){var i=sy(t).next.queue;ol(t,i,{},Mn())}function Xf(){return ln(wl)}function oy(){return Mt().memoizedState}function ly(){return Mt().memoizedState}function cA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();t=Cr(a);var l=Ir(i,t,a);l!==null&&(Pn(l,i,a),tl(l,i,a)),i={cache:Rf()},t.payload=i;return}i=i.return}}function hA(t,i,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ic(t)?cy(i,a):(a=gf(t,i,a,l),a!==null&&(Pn(a,t,l),hy(a,i,l)))}function uy(t,i,a){var l=Mn();ol(t,i,a,l)}function ol(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(t))cy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,S=d(_,a);if(h.hasEagerState=!0,h.eagerState=S,In(S,_))return Bu(t,i,h,0),ct===null&&ju(),!1}catch{}finally{}if(a=gf(t,i,h,l),a!==null)return Pn(a,t,l),hy(a,i,l),!0}return!1}function Zf(t,i,a,l){if(l={lane:2,revertLane:xd(),action:l,hasEagerState:!1,eagerState:null,next:null},ic(t)){if(i)throw Error(s(479))}else i=gf(t,a,l,2),i!==null&&Pn(i,t,2)}function ic(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function cy(t,i){xa=Zu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function hy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,xo(t,a)}}var rc={readContext:ln,use:Ju,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},fy={readContext:ln,use:Ju,useCallback:function(t,i){return En().memoizedState=[t,i===void 0?null:i],t},useContext:ln,useEffect:$g,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,nc(4194308,4,Jg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return nc(4194308,4,t,i)},useInsertionEffect:function(t,i){nc(4,2,t,i)},useMemo:function(t,i){var a=En();i=i===void 0?null:i;var l=t();if(zs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=En();if(a!==void 0){var h=a(i);if(zs){mn(!0);try{a(i)}finally{mn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=hA.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var i=En();return t={current:t},i.memoizedState=t},useState:function(t){t=Gf(t);var i=t.queue,a=uy.bind(null,Ve,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Qf,useDeferredValue:function(t,i){var a=En();return Yf(a,t,i)},useTransition:function(){var t=Gf(!1);return t=ry.bind(null,Ve,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ve,h=En();if($e){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ct===null)throw Error(s(349));(Ge&124)!==0||Mg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,$g(Vg.bind(null,l,d,t),[t]),l.flags|=2048,Na(9,tc(),Pg.bind(null,l,d,a,i),null),a},useId:function(){var t=En(),i=ct.identifierPrefix;if($e){var a=Zi,l=Xi;a=(l&~(1<<32-xt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Wu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=sA++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Xf,useFormState:Fg,useActionState:Fg,useOptimistic:function(t){var i=En();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Zf.bind(null,Ve,!0,a),a.dispatch=i,[t,i]},useMemoCache:qf,useCacheRefresh:function(){return En().memoizedState=cA.bind(null,Ve)}},dy={readContext:ln,use:Ju,useCallback:ty,useContext:ln,useEffect:Xg,useImperativeHandle:ey,useInsertionEffect:Zg,useLayoutEffect:Wg,useMemo:ny,useReducer:ec,useRef:Yg,useState:function(){return ec(er)},useDebugValue:Qf,useDeferredValue:function(t,i){var a=Mt();return iy(a,nt.memoizedState,t,i)},useTransition:function(){var t=ec(er)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:Og,useId:oy,useHostTransitionStatus:Xf,useFormState:Gg,useActionState:Gg,useOptimistic:function(t,i){var a=Mt();return Ug(a,nt,t,i)},useMemoCache:qf,useCacheRefresh:ly},fA={readContext:ln,use:Ju,useCallback:ty,useContext:ln,useEffect:Xg,useImperativeHandle:ey,useInsertionEffect:Zg,useLayoutEffect:Wg,useMemo:ny,useReducer:Ff,useRef:Yg,useState:function(){return Ff(er)},useDebugValue:Qf,useDeferredValue:function(t,i){var a=Mt();return nt===null?Yf(a,t,i):iy(a,nt.memoizedState,t,i)},useTransition:function(){var t=Ff(er)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:Og,useId:oy,useHostTransitionStatus:Xf,useFormState:Qg,useActionState:Qg,useOptimistic:function(t,i){var a=Mt();return nt!==null?Ug(a,nt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:qf,useCacheRefresh:ly},Oa=null,ll=0;function sc(t){var i=ll;return ll+=1,Oa===null&&(Oa=[]),bg(Oa,t,i)}function ul(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ac(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function my(t){var i=t._init;return i(t._payload)}function py(t){function i(q,L){if(t){var F=q.deletions;F===null?(q.deletions=[L],q.flags|=16):F.push(L)}}function a(q,L){if(!t)return null;for(;L!==null;)i(q,L),L=L.sibling;return null}function l(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function h(q,L){return q=$i(q,L),q.index=0,q.sibling=null,q}function d(q,L,F){return q.index=F,t?(F=q.alternate,F!==null?(F=F.index,F<L?(q.flags|=67108866,L):F):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function _(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function S(q,L,F,ne){return L===null||L.tag!==6?(L=vf(F,q.mode,ne),L.return=q,L):(L=h(L,F),L.return=q,L)}function x(q,L,F,ne){var ge=F.type;return ge===D?te(q,L,F.props.children,ne,F.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&my(ge)===L.type)?(L=h(L,F.props),ul(L,F),L.return=q,L):(L=qu(F.type,F.key,F.props,null,q.mode,ne),ul(L,F),L.return=q,L)}function G(q,L,F,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=_f(F,q.mode,ne),L.return=q,L):(L=h(L,F.children||[]),L.return=q,L)}function te(q,L,F,ne,ge){return L===null||L.tag!==7?(L=Ms(F,q.mode,ne,ge),L.return=q,L):(L=h(L,F),L.return=q,L)}function re(q,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=vf(""+L,q.mode,F),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return F=qu(L.type,L.key,L.props,null,q.mode,F),ul(F,L),F.return=q,F;case k:return L=_f(L,q.mode,F),L.return=q,L;case R:var ne=L._init;return L=ne(L._payload),re(q,L,F)}if(et(L)||z(L))return L=Ms(L,q.mode,F,null),L.return=q,L;if(typeof L.then=="function")return re(q,sc(L),F);if(L.$$typeof===Q)return re(q,Ku(q,L),F);ac(q,L)}return null}function $(q,L,F,ne){var ge=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ge!==null?null:S(q,L,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===ge?x(q,L,F,ne):null;case k:return F.key===ge?G(q,L,F,ne):null;case R:return ge=F._init,F=ge(F._payload),$(q,L,F,ne)}if(et(F)||z(F))return ge!==null?null:te(q,L,F,ne,null);if(typeof F.then=="function")return $(q,L,sc(F),ne);if(F.$$typeof===Q)return $(q,L,Ku(q,F),ne);ac(q,F)}return null}function X(q,L,F,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(F)||null,S(L,q,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case A:return q=q.get(ne.key===null?F:ne.key)||null,x(L,q,ne,ge);case k:return q=q.get(ne.key===null?F:ne.key)||null,G(L,q,ne,ge);case R:var Le=ne._init;return ne=Le(ne._payload),X(q,L,F,ne,ge)}if(et(ne)||z(ne))return q=q.get(F)||null,te(L,q,ne,ge,null);if(typeof ne.then=="function")return X(q,L,F,sc(ne),ge);if(ne.$$typeof===Q)return X(q,L,F,Ku(L,ne),ge);ac(L,ne)}return null}function Ie(q,L,F,ne){for(var ge=null,Le=null,_e=L,be=L=0,Qt=null;_e!==null&&be<F.length;be++){_e.index>be?(Qt=_e,_e=null):Qt=_e.sibling;var Qe=$(q,_e,F[be],ne);if(Qe===null){_e===null&&(_e=Qt);break}t&&_e&&Qe.alternate===null&&i(q,_e),L=d(Qe,L,be),Le===null?ge=Qe:Le.sibling=Qe,Le=Qe,_e=Qt}if(be===F.length)return a(q,_e),$e&&Vs(q,be),ge;if(_e===null){for(;be<F.length;be++)_e=re(q,F[be],ne),_e!==null&&(L=d(_e,L,be),Le===null?ge=_e:Le.sibling=_e,Le=_e);return $e&&Vs(q,be),ge}for(_e=l(_e);be<F.length;be++)Qt=X(_e,q,be,F[be],ne),Qt!==null&&(t&&Qt.alternate!==null&&_e.delete(Qt.key===null?be:Qt.key),L=d(Qt,L,be),Le===null?ge=Qt:Le.sibling=Qt,Le=Qt);return t&&_e.forEach(function(Gr){return i(q,Gr)}),$e&&Vs(q,be),ge}function Ae(q,L,F,ne){if(F==null)throw Error(s(151));for(var ge=null,Le=null,_e=L,be=L=0,Qt=null,Qe=F.next();_e!==null&&!Qe.done;be++,Qe=F.next()){_e.index>be?(Qt=_e,_e=null):Qt=_e.sibling;var Gr=$(q,_e,Qe.value,ne);if(Gr===null){_e===null&&(_e=Qt);break}t&&_e&&Gr.alternate===null&&i(q,_e),L=d(Gr,L,be),Le===null?ge=Gr:Le.sibling=Gr,Le=Gr,_e=Qt}if(Qe.done)return a(q,_e),$e&&Vs(q,be),ge;if(_e===null){for(;!Qe.done;be++,Qe=F.next())Qe=re(q,Qe.value,ne),Qe!==null&&(L=d(Qe,L,be),Le===null?ge=Qe:Le.sibling=Qe,Le=Qe);return $e&&Vs(q,be),ge}for(_e=l(_e);!Qe.done;be++,Qe=F.next())Qe=X(_e,q,be,Qe.value,ne),Qe!==null&&(t&&Qe.alternate!==null&&_e.delete(Qe.key===null?be:Qe.key),L=d(Qe,L,be),Le===null?ge=Qe:Le.sibling=Qe,Le=Qe);return t&&_e.forEach(function(db){return i(q,db)}),$e&&Vs(q,be),ge}function rt(q,L,F,ne){if(typeof F=="object"&&F!==null&&F.type===D&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var ge=F.key;L!==null;){if(L.key===ge){if(ge=F.type,ge===D){if(L.tag===7){a(q,L.sibling),ne=h(L,F.props.children),ne.return=q,q=ne;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&my(ge)===L.type){a(q,L.sibling),ne=h(L,F.props),ul(ne,F),ne.return=q,q=ne;break e}a(q,L);break}else i(q,L);L=L.sibling}F.type===D?(ne=Ms(F.props.children,q.mode,ne,F.key),ne.return=q,q=ne):(ne=qu(F.type,F.key,F.props,null,q.mode,ne),ul(ne,F),ne.return=q,q=ne)}return _(q);case k:e:{for(ge=F.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(q,L.sibling),ne=h(L,F.children||[]),ne.return=q,q=ne;break e}else{a(q,L);break}else i(q,L);L=L.sibling}ne=_f(F,q.mode,ne),ne.return=q,q=ne}return _(q);case R:return ge=F._init,F=ge(F._payload),rt(q,L,F,ne)}if(et(F))return Ie(q,L,F,ne);if(z(F)){if(ge=z(F),typeof ge!="function")throw Error(s(150));return F=ge.call(F),Ae(q,L,F,ne)}if(typeof F.then=="function")return rt(q,L,sc(F),ne);if(F.$$typeof===Q)return rt(q,L,Ku(q,F),ne);ac(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(q,L.sibling),ne=h(L,F),ne.return=q,q=ne):(a(q,L),ne=vf(F,q.mode,ne),ne.return=q,q=ne),_(q)):a(q,L)}return function(q,L,F,ne){try{ll=0;var ge=rt(q,L,F,ne);return Oa=null,ge}catch(_e){if(_e===Jo||_e===Yu)throw _e;var Le=xn(29,_e,null,q.mode);return Le.lanes=ne,Le.return=q,Le}finally{}}}var Ma=py(!0),gy=py(!1),$n=ie(null),bi=null;function Dr(t){var i=t.alternate;le(Bt,Bt.current&1),le($n,t),bi===null&&(i===null||Ia.current!==null||i.memoizedState!==null)&&(bi=t)}function yy(t){if(t.tag===22){if(le(Bt,Bt.current),le($n,t),bi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(bi=t)}}else Nr()}function Nr(){le(Bt,Bt.current),le($n,$n.current)}function tr(t){he($n),bi===t&&(bi=null),he(Bt)}var Bt=ie(0);function oc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||zd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Wf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Cr(l);h.payload=i,a!=null&&(h.callback=a),i=Ir(t,h,l),i!==null&&(Pn(i,t,l),tl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Cr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ir(t,h,l),i!==null&&(Pn(i,t,l),tl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Mn(),l=Cr(a);l.tag=2,i!=null&&(l.callback=i),i=Ir(t,l,a),i!==null&&(Pn(i,t,a),tl(i,t,a))}};function vy(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Go(a,l)||!Go(h,d):!0}function _y(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Jf.enqueueReplaceState(i,i.state,null)}function qs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var lc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ey(t){lc(t)}function Ty(t){console.error(t)}function Sy(t){lc(t)}function uc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Ay(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ed(t,i,a){return a=Cr(a),a.tag=3,a.payload={element:null},a.callback=function(){uc(t,i)},a}function by(t){return t=Cr(t),t.tag=3,t}function wy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Ay(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Ay(i,a,l),typeof h!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function dA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Xo(i,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return bi===null?bd():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===xf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Rd(t,l,h)),!1;case 22:return a.flags|=65536,l===xf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Rd(t,l,h)),!1}throw Error(s(435,a.tag))}return Rd(t,l,h),bd(),!1}if($e)return i=$n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Sf&&(t=Error(s(422),{cause:l}),$o(Gn(t,a)))):(l!==Sf&&(i=Error(s(423),{cause:l}),$o(Gn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Gn(l,a),h=ed(t.stateNode,l,h),Of(t,h),bt!==4&&(bt=2)),!1;var d=Error(s(520),{cause:l});if(d=Gn(d,a),gl===null?gl=[d]:gl.push(d),bt!==4&&(bt=2),i===null)return!0;l=Gn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ed(a.stateNode,l,t),Of(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Lr===null||!Lr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=by(h),wy(h,t,a,l),Of(a,h),!1}a=a.return}while(a!==null);return!1}var Ry=Error(s(461)),Gt=!1;function Wt(t,i,a,l){i.child=t===null?gy(i,null,a,l):Ma(i,t.child,a,l)}function Cy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return js(i),l=Lf(t,i,a,_,d,h),S=Uf(),t!==null&&!Gt?(jf(t,i,h),nr(t,i,h)):($e&&S&&Ef(i),i.flags|=1,Wt(t,i,l,h),i.child)}function Iy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!yf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,xy(t,i,d,l,h)):(t=qu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!ld(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Go,a(_,l)&&t.ref===i.ref)return nr(t,i,h)}return i.flags|=1,t=$i(d,l),t.ref=i.ref,t.return=i,i.child=t}function xy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Go(d,l)&&t.ref===i.ref)if(Gt=!1,i.pendingProps=l=d,ld(t,h))(t.flags&131072)!==0&&(Gt=!0);else return i.lanes=t.lanes,nr(t,i,h)}return td(t,i,a,l,h)}function Dy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ny(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qu(i,d!==null?d.cachePool:null),d!==null?xg(i,d):Pf(),yy(i);else return i.lanes=i.childLanes=536870912,Ny(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Qu(i,d.cachePool),xg(i,d),Nr(),i.memoizedState=null):(t!==null&&Qu(i,null),Pf(),Nr());return Wt(t,i,h,a),i.child}function Ny(t,i,a,l){var h=If();return h=h===null?null:{parent:jt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Qu(i,null),Pf(),yy(i),t!==null&&Xo(t,i,l,!0),null}function cc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function td(t,i,a,l,h){return js(i),a=Lf(t,i,a,l,void 0,h),l=Uf(),t!==null&&!Gt?(jf(t,i,h),nr(t,i,h)):($e&&l&&Ef(i),i.flags|=1,Wt(t,i,a,h),i.child)}function Oy(t,i,a,l,h,d){return js(i),i.updateQueue=null,a=Ng(i,l,a,h),Dg(t),l=Uf(),t!==null&&!Gt?(jf(t,i,d),nr(t,i,d)):($e&&l&&Ef(i),i.flags|=1,Wt(t,i,a,d),i.child)}function My(t,i,a,l,h){if(js(i),i.stateNode===null){var d=Aa,_=a.contextType;typeof _=="object"&&_!==null&&(d=ln(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Df(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?ln(_):Aa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Wf(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Jf.enqueueReplaceState(d,d.state,null),il(i,l,d,h),nl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,x=qs(a,S);d.props=x;var G=d.context,te=a.contextType;_=Aa,typeof te=="object"&&te!==null&&(_=ln(te));var re=a.getDerivedStateFromProps;te=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,te||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||G!==_)&&_y(i,d,l,_),Rr=!1;var $=i.memoizedState;d.state=$,il(i,l,d,h),nl(),G=i.memoizedState,S||$!==G||Rr?(typeof re=="function"&&(Wf(i,a,re,l),G=i.memoizedState),(x=Rr||vy(i,a,x,l,$,G,_))?(te||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Nf(t,i),_=i.memoizedProps,te=qs(a,_),d.props=te,re=i.pendingProps,$=d.context,G=a.contextType,x=Aa,typeof G=="object"&&G!==null&&(x=ln(G)),S=a.getDerivedStateFromProps,(G=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==re||$!==x)&&_y(i,d,l,x),Rr=!1,$=i.memoizedState,d.state=$,il(i,l,d,h),nl();var X=i.memoizedState;_!==re||$!==X||Rr||t!==null&&t.dependencies!==null&&Gu(t.dependencies)?(typeof S=="function"&&(Wf(i,a,S,l),X=i.memoizedState),(te=Rr||vy(i,a,te,l,$,X,x)||t!==null&&t.dependencies!==null&&Gu(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=x,l=te):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,cc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ma(i,t.child,null,h),i.child=Ma(i,null,a,h)):Wt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=nr(t,i,h),t}function Py(t,i,a,l){return Yo(),i.flags|=256,Wt(t,i,a,l),i.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function id(t){return{baseLanes:t,cachePool:Tg()}}function rd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Xn),t}function Vy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if($e){if(h?Dr(i):Nr(),$e){var S=At,x;if(x=S){e:{for(x=S,S=Ai;x.nodeType!==8;){if(!S){S=null;break e}if(x=si(x.nextSibling),x===null){S=null;break e}}S=x}S!==null?(i.memoizedState={dehydrated:S,treeContext:Ps!==null?{id:Xi,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},x=xn(18,null,null,0),x.stateNode=S,x.return=i,i.child=x,vn=i,At=null,x=!0):x=!1}x||Ls(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return zd(S)?i.lanes=32:i.lanes=536870912,null;tr(i)}return S=l.children,l=l.fallback,h?(Nr(),h=i.mode,S=hc({mode:"hidden",children:S},h),l=Ms(l,h,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,h=i.child,h.memoizedState=id(a),h.childLanes=rd(t,_,a),i.memoizedState=nd,l):(Dr(i),sd(i,S))}if(x=t.memoizedState,x!==null&&(S=x.dehydrated,S!==null)){if(d)i.flags&256?(Dr(i),i.flags&=-257,i=ad(t,i,a)):i.memoizedState!==null?(Nr(),i.child=t.child,i.flags|=128,i=null):(Nr(),h=l.fallback,S=i.mode,l=hc({mode:"visible",children:l.children},S),h=Ms(h,S,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ma(i,t.child,null,a),l=i.child,l.memoizedState=id(a),l.childLanes=rd(t,_,a),i.memoizedState=nd,i=h);else if(Dr(i),zd(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(s(419)),l.stack="",l.digest=_,$o({value:l,source:null,stack:null}),i=ad(t,i,a)}else if(Gt||Xo(t,i,a,!1),_=(a&t.childLanes)!==0,Gt||_){if(_=ct,_!==null&&(l=a&-a,l=(l&42)!==0?1:vr(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,Sa(t,l),Pn(_,t,l),Ry;S.data==="$?"||bd(),i=ad(t,i,a)}else S.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=x.treeContext,At=si(S.nextSibling),vn=i,$e=!0,ks=null,Ai=!1,t!==null&&(Qn[Yn++]=Xi,Qn[Yn++]=Zi,Qn[Yn++]=Ps,Xi=t.id,Zi=t.overflow,Ps=i),i=sd(i,l.children),i.flags|=4096);return i}return h?(Nr(),h=l.fallback,S=i.mode,x=t.child,G=x.sibling,l=$i(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,G!==null?h=$i(G,h):(h=Ms(h,S,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,S=t.child.memoizedState,S===null?S=id(a):(x=S.cachePool,x!==null?(G=jt._currentValue,x=x.parent!==G?{parent:G,pool:G}:x):x=Tg(),S={baseLanes:S.baseLanes|a,cachePool:x}),h.memoizedState=S,h.childLanes=rd(t,_,a),i.memoizedState=nd,l):(Dr(i),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function sd(t,i){return i=hc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function hc(t,i){return t=xn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ad(t,i,a){return Ma(i,t.child,null,a),t=sd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ky(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),bf(t.return,i,a)}function od(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Ly(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Wt(t,i,l.children,a),l=Bt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ky(t,a,i);else if(t.tag===19)ky(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(le(Bt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&oc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),od(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&oc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}od(i,!0,a,null,d);break;case"together":od(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),kr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Xo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=$i(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function ld(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Gu(t)))}function mA(t,i,a){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),wr(i,jt,t.memoizedState.cache),Yo();break;case 27:case 5:ve(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:wr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Dr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vy(t,i,a):(Dr(i),t=nr(t,i,a),t!==null?t.sibling:null);Dr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Xo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Ly(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(Bt,Bt.current),l)break;return null;case 22:case 23:return i.lanes=0,Dy(t,i,a);case 24:wr(i,jt,t.memoizedState.cache)}return nr(t,i,a)}function Uy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Gt=!0;else{if(!ld(t,a)&&(i.flags&128)===0)return Gt=!1,mA(t,i,a);Gt=(t.flags&131072)!==0}else Gt=!1,$e&&(i.flags&1048576)!==0&&mg(i,Fu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")yf(l)?(t=qs(l,t),i.tag=1,i=My(null,i,l,t,a)):(i.tag=0,i=td(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Z){i.tag=11,i=Cy(null,i,l,t,a);break e}else if(h===N){i.tag=14,i=Iy(null,i,l,t,a);break e}}throw i=St(l)||l,Error(s(306,i,""))}}return i;case 0:return td(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=qs(l,i.pendingProps),My(t,i,l,h,a);case 3:e:{if(me(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Nf(t,i),il(i,l,null,a);var _=i.memoizedState;if(l=_.cache,wr(i,jt,l),l!==d.cache&&wf(i,[jt],a,!0),nl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Py(t,i,l,a);break e}else if(l!==h){h=Gn(Error(s(424)),i),$o(h),i=Py(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(At=si(t.firstChild),vn=i,$e=!0,ks=null,Ai=!0,a=gy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yo(),l===h){i=nr(t,i,a);break e}Wt(t,i,l,a)}i=i.child}return i;case 26:return cc(t,i),t===null?(a=qv(i.type,null,i.pendingProps,null))?i.memoizedState=a:$e||(a=i.type,t=i.pendingProps,l=wc(de.current).createElement(a),l[kt]=i,l[Dt]=t,en(l,a,t),wt(l),i.stateNode=l):i.memoizedState=qv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ve(i),t===null&&$e&&(l=i.stateNode=jv(i.type,i.pendingProps,de.current),vn=i,Ai=!0,h=At,Br(i.type)?(qd=h,At=si(l.firstChild)):At=h),Wt(t,i,i.pendingProps.children,a),cc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&$e&&((h=l=At)&&(l=qA(l,i.type,i.pendingProps,Ai),l!==null?(i.stateNode=l,vn=i,At=si(l.firstChild),Ai=!1,h=!0):h=!1),h||Ls(i)),ve(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Ud(h,d)?l=null:_!==null&&Ud(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Lf(t,i,aA,null,null,a),wl._currentValue=h),cc(t,i),Wt(t,i,l,a),i.child;case 6:return t===null&&$e&&((t=a=At)&&(a=HA(a,i.pendingProps,Ai),a!==null?(i.stateNode=a,vn=i,At=null,t=!0):t=!1),t||Ls(i)),null;case 13:return Vy(t,i,a);case 4:return me(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ma(i,null,l,a):Wt(t,i,l,a),i.child;case 11:return Cy(t,i,i.type,i.pendingProps,a);case 7:return Wt(t,i,i.pendingProps,a),i.child;case 8:return Wt(t,i,i.pendingProps.children,a),i.child;case 12:return Wt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,wr(i,i.type,l.value),Wt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,js(i),h=ln(h),l=l(h),i.flags|=1,Wt(t,i,l,a),i.child;case 14:return Iy(t,i,i.type,i.pendingProps,a);case 15:return xy(t,i,i.type,i.pendingProps,a);case 19:return Ly(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=hc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=$i(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Dy(t,i,a);case 24:return js(i),l=ln(jt),t===null?(h=If(),h===null&&(h=ct,d=Rf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Df(i),wr(i,jt,h)):((t.lanes&a)!==0&&(Nf(t,i),il(i,null,null,a),nl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),wr(i,jt,l)):(l=d.cache,wr(i,jt,l),l!==h.cache&&wf(i,[jt],a,!0))),Wt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ir(t){t.flags|=4}function jy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qv(i)){if(i=$n.current,i!==null&&((Ge&4194048)===Ge?bi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||i!==bi))throw el=xf,Sg;t.flags|=8192}}function fc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Co():536870912,t.lanes|=i,La|=i)}function cl(t,i){if(!$e)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function pA(t,i,a){var l=i.pendingProps;switch(Tf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(i),null;case 1:return _t(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(jt),De(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qo(i)?ir(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,yg())),_t(i),null;case 26:return a=i.memoizedState,t===null?(ir(i),a!==null?(_t(i),jy(i,a)):(_t(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ir(i),_t(i),jy(i,a)):(_t(i),i.flags&=-16777217):(t.memoizedProps!==l&&ir(i),_t(i),i.flags&=-16777217),null;case 27:ft(i),a=de.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _t(i),null}t=ye.current,Qo(i)?pg(i):(t=jv(h,l,a),i.stateNode=t,ir(i))}return _t(i),null;case 5:if(ft(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return _t(i),null}if(t=ye.current,Qo(i))pg(i);else{switch(h=wc(de.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[kt]=i,t[Dt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(en(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ir(i)}}return _t(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=de.current,Qo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=vn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[kt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ov(t.nodeValue,a)),t||Ls(i)}else t=wc(t).createTextNode(l),t[kt]=i,i.stateNode=t}return _t(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[kt]=i}else Yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_t(i),h=!1}else h=yg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(tr(i),i):(tr(i),null)}if(tr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),fc(i,i.updateQueue),_t(i),null;case 4:return De(),t===null&&Md(i.stateNode.containerInfo),_t(i),null;case 10:return Ji(i.type),_t(i),null;case 19:if(he(Bt),h=i.memoizedState,h===null)return _t(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)cl(h,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=oc(t),d!==null){for(i.flags|=128,cl(h,!1),t=d.updateQueue,i.updateQueue=t,fc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)dg(a,t),a=a.sibling;return le(Bt,Bt.current&1|2),i.child}t=t.sibling}h.tail!==null&&vt()>pc&&(i.flags|=128,l=!0,cl(h,!1),i.lanes=4194304)}else{if(!l)if(t=oc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,fc(i,t),cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!$e)return _t(i),null}else 2*vt()-h.renderingStartTime>pc&&a!==536870912&&(i.flags|=128,l=!0,cl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=vt(),i.sibling=null,t=Bt.current,le(Bt,l?t&1|2:t&1),i):(_t(i),null);case 22:case 23:return tr(i),Vf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(_t(i),i.subtreeFlags&6&&(i.flags|=8192)):_t(i),a=i.updateQueue,a!==null&&fc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&he(Bs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(jt),_t(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function gA(t,i){switch(Tf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ji(jt),De(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ft(i),null;case 13:if(tr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Yo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return he(Bt),null;case 4:return De(),null;case 10:return Ji(i.type),null;case 22:case 23:return tr(i),Vf(),t!==null&&he(Bs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ji(jt),null;case 25:return null;default:return null}}function By(t,i){switch(Tf(i),i.tag){case 3:Ji(jt),De();break;case 26:case 27:case 5:ft(i);break;case 4:De();break;case 13:tr(i);break;case 19:he(Bt);break;case 10:Ji(i.type);break;case 22:case 23:tr(i),Vf(),t!==null&&he(Bs);break;case 24:Ji(jt)}}function hl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(S){at(i,i.return,S)}}function Or(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,h=i;var x=a,G=S;try{G()}catch(te){at(h,x,te)}}}l=l.next}while(l!==d)}}catch(te){at(i,i.return,te)}}function zy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Ig(i,a)}catch(l){at(t,t.return,l)}}}function qy(t,i,a){a.props=qs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){at(t,i,l)}}function fl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){at(t,i,h)}}function wi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){at(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,i,h)}else a.current=null}function Hy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function ud(t,i,a){try{var l=t.stateNode;LA(l,t.type,a,i),l[Dt]=i}catch(h){at(t,t.return,h)}}function Fy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Br(t.type)||t.tag===4}function cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=bc));else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(hd(t,i,a),t=t.sibling;t!==null;)hd(t,i,a),t=t.sibling}function dc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(dc(t,i,a),t=t.sibling;t!==null;)dc(t,i,a),t=t.sibling}function Gy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);en(i,l,a),i[kt]=t,i[Dt]=a}catch(d){at(t,t.return,d)}}var rr=!1,Ct=!1,fd=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function yA(t,i){if(t=t.containerInfo,kd=Nc,t=ig(t),cf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,S=-1,x=-1,G=0,te=0,re=t,$=null;t:for(;;){for(var X;re!==a||h!==0&&re.nodeType!==3||(S=_+h),re!==d||l!==0&&re.nodeType!==3||(x=_+l),re.nodeType===3&&(_+=re.nodeValue.length),(X=re.firstChild)!==null;)$=re,re=X;for(;;){if(re===t)break t;if($===a&&++G===h&&(S=_),$===d&&++te===l&&(x=_),(X=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=X}a=S===-1||x===-1?null:{start:S,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ld={focusedElem:t,selectionRange:a},Nc=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=qs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){at(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Bd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Bd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Qy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mr(t,a),l&4&&hl(5,a);break;case 1:if(Mr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){at(a,a.return,_)}else{var h=qs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){at(a,a.return,_)}}l&64&&zy(a),l&512&&fl(a,a.return);break;case 3:if(Mr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ig(t,i)}catch(_){at(a,a.return,_)}}break;case 27:i===null&&l&4&&Gy(a);case 26:case 5:Mr(t,a),i===null&&l&4&&Hy(a),l&512&&fl(a,a.return);break;case 12:Mr(t,a);break;case 13:Mr(t,a),l&4&&Xy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=RA.bind(null,a),FA(t,a))));break;case 22:if(l=a.memoizedState!==null||rr,!l){i=i!==null&&i.memoizedState!==null||Ct,h=rr;var d=Ct;rr=l,(Ct=i)&&!d?Pr(t,a,(a.subtreeFlags&8772)!==0):Mr(t,a),rr=h,Ct=d}break;case 30:break;default:Mr(t,a)}}function Yy(t){var i=t.alternate;i!==null&&(t.alternate=null,Yy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Tr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,Tn=!1;function sr(t,i,a){for(a=a.child;a!==null;)$y(t,i,a),a=a.sibling}function $y(t,i,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:Ct||wi(a,i),sr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||wi(a,i);var l=pt,h=Tn;Br(a.type)&&(pt=a.stateNode,Tn=!1),sr(t,i,a),Tl(a.stateNode),pt=l,Tn=h;break;case 5:Ct||wi(a,i);case 6:if(l=pt,h=Tn,pt=null,sr(t,i,a),pt=l,Tn=h,pt!==null)if(Tn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){at(a,i,d)}else try{pt.removeChild(a.stateNode)}catch(d){at(a,i,d)}break;case 18:pt!==null&&(Tn?(t=pt,Lv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xl(t)):Lv(pt,a.stateNode));break;case 4:l=pt,h=Tn,pt=a.stateNode.containerInfo,Tn=!0,sr(t,i,a),pt=l,Tn=h;break;case 0:case 11:case 14:case 15:Ct||Or(2,a,i),Ct||Or(4,a,i),sr(t,i,a);break;case 1:Ct||(wi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&qy(a,i,l)),sr(t,i,a);break;case 21:sr(t,i,a);break;case 22:Ct=(l=Ct)||a.memoizedState!==null,sr(t,i,a),Ct=l;break;default:sr(t,i,a)}}function Xy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(a){at(i,i.return,a)}}function vA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ky),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ky),i;default:throw Error(s(435,t.tag))}}function dd(t,i){var a=vA(t);i.forEach(function(l){var h=CA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Dn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(Br(S.type)){pt=S.stateNode,Tn=!1;break e}break;case 5:pt=S.stateNode,Tn=!1;break e;case 3:case 4:pt=S.stateNode.containerInfo,Tn=!0;break e}S=S.return}if(pt===null)throw Error(s(160));$y(d,_,h),pt=null,Tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Zy(i,t),i=i.sibling}var ri=null;function Zy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(i,t),Nn(t),l&4&&(Or(3,t,t.return),hl(3,t),Or(5,t,t.return));break;case 1:Dn(i,t),Nn(t),l&512&&(Ct||a===null||wi(a,a.return)),l&64&&rr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ri;if(Dn(i,t),Nn(t),l&512&&(Ct||a===null||wi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ys]||d[kt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),en(d,l,a),d[kt]=t,wt(d),l=d;break e;case"link":var _=Gv("link","href",h).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(d=_[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;case"meta":if(_=Gv("meta","content",h).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(d=_[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break t}}d=h.createElement(l),en(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[kt]=t,wt(d),l=d}t.stateNode=l}else Kv(h,t.type,t.stateNode);else t.stateNode=Fv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Kv(h,t.type,t.stateNode):Fv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,t),Nn(t),l&512&&(Ct||a===null||wi(a,a.return)),a!==null&&l&4&&ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,t),Nn(t),l&512&&(Ct||a===null||wi(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(X){at(t,t.return,X)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ud(t,h,a!==null?a.memoizedProps:h)),l&1024&&(fd=!0);break;case 6:if(Dn(i,t),Nn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(X){at(t,t.return,X)}}break;case 3:if(Ic=null,h=ri,ri=Rc(i.containerInfo),Dn(i,t),ri=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(i.containerInfo)}catch(X){at(t,t.return,X)}fd&&(fd=!1,Wy(t));break;case 4:l=ri,ri=Rc(t.stateNode.containerInfo),Dn(i,t),Nn(t),ri=l;break;case 12:Dn(i,t),Nn(t);break;case 13:Dn(i,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_d=vt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,G=rr,te=Ct;if(rr=G||h,Ct=te||x,Dn(i,t),Ct=te,rr=G,Nn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||rr||Ct||Hs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=x.stateNode;var re=x.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(X){at(x,x.return,X)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(X){at(x,x.return,X)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dd(t,a))));break;case 19:Dn(i,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,dd(t,l)));break;case 30:break;case 21:break;default:Dn(i,t),Nn(t)}}function Nn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Fy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=cd(t);dc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(zn(_,""),a.flags&=-33);var S=cd(t);dc(t,S,_);break;case 3:case 4:var x=a.stateNode.containerInfo,G=cd(t);hd(t,G,x);break;default:throw Error(s(161))}}catch(te){at(t,t.return,te)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Wy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Wy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Mr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qy(t,i.alternate,i),i=i.sibling}function Hs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Or(4,i,i.return),Hs(i);break;case 1:wi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&qy(i,i.return,a),Hs(i);break;case 27:Tl(i.stateNode);case 26:case 5:wi(i,i.return),Hs(i);break;case 22:i.memoizedState===null&&Hs(i);break;case 30:Hs(i);break;default:Hs(i)}t=t.sibling}}function Pr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Pr(h,d,a),hl(4,d);break;case 1:if(Pr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){at(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Cg(x[h],S)}catch(G){at(l,l.return,G)}}a&&_&64&&zy(d),fl(d,d.return);break;case 27:Gy(d);case 26:case 5:Pr(h,d,a),a&&l===null&&_&4&&Hy(d),fl(d,d.return);break;case 12:Pr(h,d,a);break;case 13:Pr(h,d,a),a&&_&4&&Xy(h,d);break;case 22:d.memoizedState===null&&Pr(h,d,a),fl(d,d.return);break;case 30:break;default:Pr(h,d,a)}i=i.sibling}}function md(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zo(a))}function pd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Zo(t))}function Ri(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Jy(t,i,a,l),i=i.sibling}function Jy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ri(t,i,a,l),h&2048&&hl(9,i);break;case 1:Ri(t,i,a,l);break;case 3:Ri(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Zo(t)));break;case 12:if(h&2048){Ri(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,S=d.onPostCommit;typeof S=="function"&&S(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){at(i,i.return,x)}}else Ri(t,i,a,l);break;case 13:Ri(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Ri(t,i,a,l):dl(t,i):d._visibility&2?Ri(t,i,a,l):(d._visibility|=2,Pa(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&md(_,i);break;case 24:Ri(t,i,a,l),h&2048&&pd(i.alternate,i);break;default:Ri(t,i,a,l)}}function Pa(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,_=i,S=a,x=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Pa(d,_,S,x,h),hl(8,_);break;case 23:break;case 22:var te=_.stateNode;_.memoizedState!==null?te._visibility&2?Pa(d,_,S,x,h):dl(d,_):(te._visibility|=2,Pa(d,_,S,x,h)),h&&G&2048&&md(_.alternate,_);break;case 24:Pa(d,_,S,x,h),h&&G&2048&&pd(_.alternate,_);break;default:Pa(d,_,S,x,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:dl(a,l),h&2048&&md(l.alternate,l);break;case 24:dl(a,l),h&2048&&pd(l.alternate,l);break;default:dl(a,l)}i=i.sibling}}var ml=8192;function Va(t){if(t.subtreeFlags&ml)for(t=t.child;t!==null;)ev(t),t=t.sibling}function ev(t){switch(t.tag){case 26:Va(t),t.flags&ml&&t.memoizedState!==null&&ib(ri,t.memoizedState,t.memoizedProps);break;case 5:Va(t);break;case 3:case 4:var i=ri;ri=Rc(t.stateNode.containerInfo),Va(t),ri=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=ml,ml=16777216,Va(t),ml=i):Va(t));break;default:Va(t)}}function tv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function pl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,iv(l,t)}tv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nv(t),t=t.sibling}function nv(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&Or(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,mc(t)):pl(t);break;default:pl(t)}}function mc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,iv(l,t)}tv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Or(8,i,i.return),mc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,mc(i));break;default:mc(i)}t=t.sibling}}function iv(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Or(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=t;Kt!==null;){l=Kt;var h=l.sibling,d=l.return;if(Yy(l),l===a){Kt=null;break e}if(h!==null){h.return=d,Kt=h;break e}Kt=d}}}var _A={getCacheForType:function(t){var i=ln(jt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},EA=typeof WeakMap=="function"?WeakMap:Map,We=0,ct=null,Ue=null,Ge=0,Je=0,On=null,Vr=!1,ka=!1,gd=!1,ar=0,bt=0,kr=0,Fs=0,yd=0,Xn=0,La=0,gl=null,Sn=null,vd=!1,_d=0,pc=1/0,gc=null,Lr=null,Jt=0,Ur=null,Ua=null,ja=0,Ed=0,Td=null,rv=null,yl=0,Sd=null;function Mn(){if((We&2)!==0&&Ge!==0)return Ge&-Ge;if(J.T!==null){var t=Ra;return t!==0?t:xd()}return _r()}function sv(){Xn===0&&(Xn=(Ge&536870912)===0||$e?Ro():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Xn}function Pn(t,i,a){(t===ct&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Ba(t,0),jr(t,Ge,Xn,!1)),Ui(t,a),((We&2)===0||t!==ct)&&(t===ct&&((We&2)===0&&(Fs|=a),bt===4&&jr(t,Ge,Xn,!1)),Ci(t))}function av(t,i,a){if((We&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||gs(t,i),h=l?AA(t,i):wd(t,i,!0),d=l;do{if(h===0){ka&&!l&&jr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!TA(a)){h=wd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var S=t;h=gl;var x=S.current.memoizedState.isDehydrated;if(x&&(Ba(S,_).flags|=256),_=wd(S,_,!1),_!==2){if(gd&&!x){S.errorRecoveryDisabledLanes|=d,Fs|=d,h=4;break e}d=Sn,Sn=h,d!==null&&(Sn===null?Sn=d:Sn.push.apply(Sn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ba(t,0),jr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:jr(l,i,Xn,!Vr);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=_d+300-vt(),10<h)){if(jr(l,i,Xn,!Vr),ia(l,0,!0)!==0)break e;l.timeoutHandle=Vv(ov.bind(null,l,a,Sn,gc,vd,i,Xn,Fs,La,Vr,d,2,-0,0),h);break e}ov(l,a,Sn,gc,vd,i,Xn,Fs,La,Vr,d,0,-0,0)}}break}while(!0);Ci(t)}function ov(t,i,a,l,h,d,_,S,x,G,te,re,$,X){if(t.timeoutHandle=-1,re=i.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(bl={stylesheets:null,count:0,unsuspend:nb},ev(i),re=rb(),re!==null)){t.cancelPendingCommit=re(mv.bind(null,t,i,d,a,l,h,_,S,x,te,1,$,X)),jr(t,d,_,!G);return}mv(t,i,d,a,l,h,_,S,x)}function TA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!In(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function jr(t,i,a,l){i&=~yd,i&=~Fs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-xt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&fi(t,a,i)}function yc(){return(We&6)===0?(vl(0),!1):!0}function Ad(){if(Ue!==null){if(Je===0)var t=Ue.return;else t=Ue,Wi=Us=null,Bf(t),Oa=null,ll=0,t=Ue;for(;t!==null;)By(t.alternate,t),t=t.return;Ue=null}}function Ba(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,jA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ad(),ct=t,Ue=a=$i(t.current,null),Ge=i,Je=0,On=null,Vr=!1,ka=gs(t,i),gd=!1,La=Xn=yd=Fs=kr=bt=0,Sn=gl=null,vd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-xt(l),d=1<<h;i|=t[h],l&=~d}return ar=i,ju(),a}function lv(t,i){Ve=null,J.H=rc,i===Jo||i===Yu?(i=wg(),Je=3):i===Sg?(i=wg(),Je=4):Je=i===Ry?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,Ue===null&&(bt=1,uc(t,Gn(i,t.current)))}function uv(){var t=J.H;return J.H=rc,t===null?rc:t}function cv(){var t=J.A;return J.A=_A,t}function bd(){bt=4,Vr||(Ge&4194048)!==Ge&&$n.current!==null||(ka=!0),(kr&134217727)===0&&(Fs&134217727)===0||ct===null||jr(ct,Ge,Xn,!1)}function wd(t,i,a){var l=We;We|=2;var h=uv(),d=cv();(ct!==t||Ge!==i)&&(gc=null,Ba(t,i)),i=!1;var _=bt;e:do try{if(Je!==0&&Ue!==null){var S=Ue,x=On;switch(Je){case 8:Ad(),_=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(i=!0);var G=Je;if(Je=0,On=null,za(t,S,x,G),a&&ka){_=0;break e}break;default:G=Je,Je=0,On=null,za(t,S,x,G)}}SA(),_=bt;break}catch(te){lv(t,te)}while(!0);return i&&t.shellSuspendCounter++,Wi=Us=null,We=l,J.H=h,J.A=d,Ue===null&&(ct=null,Ge=0,ju()),_}function SA(){for(;Ue!==null;)hv(Ue)}function AA(t,i){var a=We;We|=2;var l=uv(),h=cv();ct!==t||Ge!==i?(gc=null,pc=vt()+500,Ba(t,i)):ka=gs(t,i);e:do try{if(Je!==0&&Ue!==null){i=Ue;var d=On;t:switch(Je){case 1:Je=0,On=null,za(t,i,d,1);break;case 2:case 9:if(Ag(d)){Je=0,On=null,fv(i);break}i=function(){Je!==2&&Je!==9||ct!==t||(Je=7),Ci(t)},d.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Ag(d)?(Je=0,On=null,fv(i)):(Je=0,On=null,za(t,i,d,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var S=Ue;if(!_||Qv(_)){Je=0,On=null;var x=S.sibling;if(x!==null)Ue=x;else{var G=S.return;G!==null?(Ue=G,vc(G)):Ue=null}break t}}Je=0,On=null,za(t,i,d,5);break;case 6:Je=0,On=null,za(t,i,d,6);break;case 8:Ad(),bt=6;break e;default:throw Error(s(462))}}bA();break}catch(te){lv(t,te)}while(!0);return Wi=Us=null,J.H=l,J.A=h,We=a,Ue!==null?0:(ct=null,Ge=0,ju(),bt)}function bA(){for(;Ue!==null&&!Rn();)hv(Ue)}function hv(t){var i=Uy(t.alternate,t,ar);t.memoizedProps=t.pendingProps,i===null?vc(t):Ue=i}function fv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Oy(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=Oy(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Bf(i);default:By(a,i),i=Ue=dg(i,ar),i=Uy(a,i,ar)}t.memoizedProps=t.pendingProps,i===null?vc(t):Ue=i}function za(t,i,a,l){Wi=Us=null,Bf(i),Oa=null,ll=0;var h=i.return;try{if(dA(t,h,i,a,Ge)){bt=1,uc(t,Gn(a,t.current)),Ue=null;return}}catch(d){if(h!==null)throw Ue=h,d;bt=1,uc(t,Gn(a,t.current)),Ue=null;return}i.flags&32768?($e||l===1?t=!0:ka||(Ge&536870912)!==0?t=!1:(Vr=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),dv(i,t)):vc(i)}function vc(t){var i=t;do{if((i.flags&32768)!==0){dv(i,Vr);return}t=i.return;var a=pA(i.alternate,i,ar);if(a!==null){Ue=a;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=t}while(i!==null);bt===0&&(bt=5)}function dv(t,i){do{var a=gA(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);bt=6,Ue=null}function mv(t,i,a,l,h,d,_,S,x){t.cancelPendingCommit=null;do _c();while(Jt!==0);if((We&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=pf,Io(t,a,d,_,S,x),t===ct&&(Ue=ct=null,Ge=0),Ua=i,Ur=t,ja=a,Ed=d,Td=h,rv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,IA(on,function(){return _v(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,h=ee.p,ee.p=2,_=We,We|=4;try{yA(t,i,a)}finally{We=_,ee.p=h,J.T=l}}Jt=1,pv(),gv(),yv()}}function pv(){if(Jt===1){Jt=0;var t=Ur,i=Ua,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=ee.p;ee.p=2;var h=We;We|=4;try{Zy(i,t);var d=Ld,_=ig(t.containerInfo),S=d.focusedElem,x=d.selectionRange;if(_!==S&&S&&S.ownerDocument&&ng(S.ownerDocument.documentElement,S)){if(x!==null&&cf(S)){var G=x.start,te=x.end;if(te===void 0&&(te=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(te,S.value.length);else{var re=S.ownerDocument||document,$=re&&re.defaultView||window;if($.getSelection){var X=$.getSelection(),Ie=S.textContent.length,Ae=Math.min(x.start,Ie),rt=x.end===void 0?Ae:Math.min(x.end,Ie);!X.extend&&Ae>rt&&(_=rt,rt=Ae,Ae=_);var q=tg(S,Ae),L=tg(S,rt);if(q&&L&&(X.rangeCount!==1||X.anchorNode!==q.node||X.anchorOffset!==q.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var F=re.createRange();F.setStart(q.node,q.offset),X.removeAllRanges(),Ae>rt?(X.addRange(F),X.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),X.addRange(F))}}}}for(re=[],X=S;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ne=re[S];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Nc=!!kd,Ld=kd=null}finally{We=h,ee.p=l,J.T=a}}t.current=i,Jt=2}}function gv(){if(Jt===2){Jt=0;var t=Ur,i=Ua,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=ee.p;ee.p=2;var h=We;We|=4;try{Qy(t,i.alternate,i)}finally{We=h,ee.p=l,J.T=a}}Jt=3}}function yv(){if(Jt===4||Jt===3){Jt=0,an();var t=Ur,i=Ua,a=ja,l=rv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Jt=5:(Jt=0,Ua=Ur=null,vv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Lr=null),ra(a),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=J.T,h=ee.p,ee.p=2,J.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var S=l[_];d(S.value,{componentStack:S.stack})}}finally{J.T=i,ee.p=h}}(ja&3)!==0&&_c(),Ci(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Sd?yl++:(yl=0,Sd=t):yl=0,vl(0)}}function vv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Zo(i)))}function _c(t){return pv(),gv(),yv(),_v()}function _v(){if(Jt!==5)return!1;var t=Ur,i=Ed;Ed=0;var a=ra(ja),l=J.T,h=ee.p;try{ee.p=32>a?32:a,J.T=null,a=Td,Td=null;var d=Ur,_=ja;if(Jt=0,Ua=Ur=null,ja=0,(We&6)!==0)throw Error(s(331));var S=We;if(We|=4,nv(d.current),Jy(d,d.current,_,a),We=S,vl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ut,d)}catch{}return!0}finally{ee.p=h,J.T=l,vv(t,i)}}function Ev(t,i,a){i=Gn(a,i),i=ed(t.stateNode,i,2),t=Ir(t,i,2),t!==null&&(Ui(t,2),Ci(t))}function at(t,i,a){if(t.tag===3)Ev(t,t,a);else for(;i!==null;){if(i.tag===3){Ev(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Lr===null||!Lr.has(l))){t=Gn(a,t),a=by(2),l=Ir(i,a,2),l!==null&&(wy(a,l,i,t),Ui(l,2),Ci(l));break}}i=i.return}}function Rd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new EA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(gd=!0,h.add(a),t=wA.bind(null,t,i,a),i.then(t,t))}function wA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(Ge&a)===a&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>vt()-_d?(We&2)===0&&Ba(t,0):yd|=a,La===Ge&&(La=0)),Ci(t)}function Tv(t,i){i===0&&(i=Co()),t=Sa(t,i),t!==null&&(Ui(t,i),Ci(t))}function RA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Tv(t,a)}function CA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Tv(t,a)}function IA(t,i){return st(t,i)}var Ec=null,qa=null,Cd=!1,Tc=!1,Id=!1,Gs=0;function Ci(t){t!==qa&&t.next===null&&(qa===null?Ec=qa=t:qa=qa.next=t),Tc=!0,Cd||(Cd=!0,DA())}function vl(t,i){if(!Id&&Tc){Id=!0;do for(var a=!1,l=Ec;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-xt(42|t)+1)-1,d&=h&~(_&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,wv(l,d))}else d=Ge,d=ia(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||gs(l,d)||(a=!0,wv(l,d));l=l.next}while(a);Id=!1}}function xA(){Sv()}function Sv(){Tc=Cd=!1;var t=0;Gs!==0&&(UA()&&(t=Gs),Gs=0);for(var i=vt(),a=null,l=Ec;l!==null;){var h=l.next,d=Av(l,i);d===0?(l.next=null,a===null?Ec=h:a.next=h,h===null&&(qa=a)):(a=l,(t!==0||(d&3)!==0)&&(Tc=!0)),l=h}vl(t)}function Av(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-xt(d),S=1<<_,x=h[_];x===-1?((S&a)===0||(S&l)!==0)&&(h[_]=wo(S,i)):x<=i&&(t.expiredLanes|=S),d&=~S}if(i=ct,a=Ge,a=ia(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&lt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||gs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&lt(l),ra(a)){case 2:case 8:a=Un;break;case 32:a=on;break;case 268435456:a=Be;break;default:a=on}return l=bv.bind(null,t),a=st(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&lt(l),t.callbackPriority=2,t.callbackNode=null,2}function bv(t,i){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_c()&&t.callbackNode!==a)return null;var l=Ge;return l=ia(t,t===ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(av(t,l,i),Av(t,vt()),t.callbackNode!=null&&t.callbackNode===a?bv.bind(null,t):null)}function wv(t,i){if(_c())return null;av(t,i,!0)}function DA(){BA(function(){(We&6)!==0?st(_n,xA):Sv()})}function xd(){return Gs===0&&(Gs=Ro()),Gs}function Rv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function Cv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function NA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Rv((h[Dt]||null).action),_=l.submitter;_&&(i=(i=_[Dt]||null)?Rv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var S=new ha("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gs!==0){var x=_?Cv(h,_):new FormData(h);$f(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(S.preventDefault(),x=_?Cv(h,_):new FormData(h),$f(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Dd=0;Dd<mf.length;Dd++){var Nd=mf[Dd],OA=Nd.toLowerCase(),MA=Nd[0].toUpperCase()+Nd.slice(1);ii(OA,"on"+MA)}ii(ag,"onAnimationEnd"),ii(og,"onAnimationIteration"),ii(lg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(XS,"onTransitionRun"),ii(ZS,"onTransitionStart"),ii(WS,"onTransitionCancel"),ii(ug,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function Iv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var S=l[_],x=S.instance,G=S.currentTarget;if(S=S.listener,x!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(te){lc(te)}h.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(S=l[_],x=S.instance,G=S.currentTarget,S=S.listener,x!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=G;try{d(h)}catch(te){lc(te)}h.currentTarget=null,d=x}}}}function je(t,i){var a=i[Do];a===void 0&&(a=i[Do]=new Set);var l=t+"__bubble";a.has(l)||(xv(i,t,2,!1),a.add(l))}function Od(t,i,a){var l=0;i&&(l|=4),xv(a,t,l,i)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function Md(t){if(!t[Sc]){t[Sc]=!0,No.forEach(function(a){a!=="selectionchange"&&(PA.has(a)||Od(a,!1,t),Od(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Sc]||(i[Sc]=!0,Od("selectionchange",!1,i))}}function xv(t,i,a,l){switch(Jv(i)){case 2:var h=ob;break;case 8:h=lb;break;default:h=Qd}a=h.bind(null,i,a,t),h=void 0,!Hn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Pd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===h)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;S!==null;){if(_=ji(S),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue e}S=S.parentNode}}l=l.return}bu(function(){var G=d,te=qn(a),re=[];e:{var $=cg.get(t);if($!==void 0){var X=ha,Ie=t;switch(t){case"keypress":if(vi(a)===0)break e;case"keydown":case"keyup":X=ya;break;case"focusin":Ie="focus",X=ma;break;case"focusout":Ie="blur",X=ma;break;case"beforeblur":case"afterblur":X=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Ou;break;case ag:case og:case lg:X=pa;break;case ug:X=Pu;break;case"scroll":case"scrollend":X=wu;break;case"wheel":X=va;break;case"copy":case"cut":case"paste":X=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ho;break;case"toggle":case"beforetoggle":X=ku}var Ae=(i&4)!==0,rt=!Ae&&(t==="scroll"||t==="scrollend"),q=Ae?$!==null?$+"Capture":null:$;Ae=[];for(var L=G,F;L!==null;){var ne=L;if(F=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||F===null||q===null||(ne=bs(L,q),ne!=null&&Ae.push(El(L,ne,F))),rt)break;L=L.return}0<Ae.length&&($=new X($,Ie,null,a,te),re.push({event:$,listeners:Ae}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",$&&a!==Hi&&(Ie=a.relatedTarget||a.fromElement)&&(ji(Ie)||Ie[Bn]))break e;if((X||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,X?(Ie=a.relatedTarget||a.toElement,X=G,Ie=Ie?ji(Ie):null,Ie!==null&&(rt=u(Ie),Ae=Ie.tag,Ie!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(Ie=null)):(X=null,Ie=G),X!==Ie)){if(Ae=Fn,ne="onMouseLeave",q="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=Ho,ne="onPointerLeave",q="onPointerEnter",L="pointer"),rt=X==null?$:mi(X),F=Ie==null?$:mi(Ie),$=new Ae(ne,L+"leave",X,a,te),$.target=rt,$.relatedTarget=F,ne=null,ji(te)===G&&(Ae=new Ae(q,L+"enter",Ie,a,te),Ae.target=F,Ae.relatedTarget=rt,ne=Ae),rt=ne,X&&Ie)t:{for(Ae=X,q=Ie,L=0,F=Ae;F;F=Ha(F))L++;for(F=0,ne=q;ne;ne=Ha(ne))F++;for(;0<L-F;)Ae=Ha(Ae),L--;for(;0<F-L;)q=Ha(q),F--;for(;L--;){if(Ae===q||q!==null&&Ae===q.alternate)break t;Ae=Ha(Ae),q=Ha(q)}Ae=null}else Ae=null;X!==null&&Dv(re,$,X,Ae,!1),Ie!==null&&rt!==null&&Dv(re,rt,Ie,Ae,!0)}}e:{if($=G?mi(G):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var ge=$p;else if(Ut($))if(Xp)ge=QS;else{ge=GS;var Le=FS}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&ko(G.elementType)&&(ge=$p):ge=KS;if(ge&&(ge=ge(t,G))){Yi(re,ge,a,te);break e}Le&&Le(t,$,G),t==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&Ar($,"number",$.value)}switch(Le=G?mi(G):window,t){case"focusin":(Ut(Le)||Le.contentEditable==="true")&&(_a=Le,hf=G,Ko=null);break;case"focusout":Ko=hf=_a=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,rg(re,a,te);break;case"selectionchange":if($S)break;case"keydown":case"keyup":rg(re,a,te)}var _e;if(Ti)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else He?W(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(He||be!=="onCompositionStart"?be==="onCompositionEnd"&&He&&(_e=Uo()):(yi=te,br="value"in yi?yi.value:yi.textContent,He=!0)),Le=Ac(G,be),0<Le.length&&(be=new zo(be,t,null,a,te),re.push({event:be,listeners:Le}),_e?be.data=_e:(_e=fe(a),_e!==null&&(be.data=_e)))),(_e=y?Lt(t,a):Fe(t,a))&&(be=Ac(G,"onBeforeInput"),0<be.length&&(Le=new zo("onBeforeInput","beforeinput",null,a,te),re.push({event:Le,listeners:be}),Le.data=_e)),NA(re,t,G,a,te)}Iv(re,i)})}function El(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ac(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=bs(t,a),h!=null&&l.unshift(El(t,h,d)),h=bs(t,i),h!=null&&l.push(El(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Dv(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var S=a,x=S.alternate,G=S.stateNode;if(S=S.tag,x!==null&&x===l)break;S!==5&&S!==26&&S!==27||G===null||(x=G,h?(G=bs(a,d),G!=null&&_.unshift(El(a,G,x))):h||(G=bs(a,d),G!=null&&_.push(El(a,G,x)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var VA=/\r\n?/g,kA=/\u0000|\uFFFD/g;function Nv(t){return(typeof t=="string"?t:""+t).replace(VA,`
`).replace(kA,"")}function Ov(t,i){return i=Nv(i),Nv(t)===i}function bc(){}function it(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&zn(t,""+l);break;case"className":pi(t,"class",l);break;case"tabIndex":pi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pi(t,a,l);break;case"style":Vo(t,l,d);break;case"data":if(i!=="object"){pi(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&it(t,i,"name",h.name,h,null),it(t,i,"formEncType",h.formEncType,h,null),it(t,i,"formMethod",h.formMethod,h,null),it(t,i,"formTarget",h.formTarget,h,null)):(it(t,i,"encType",h.encType,h,null),it(t,i,"method",h.method,h,null),it(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=bc);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Sr(t,"popover",l);break;case"xlinkActuate":Xt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rf.get(a)||a,Sr(t,a,l))}}function Vd(t,i,a,l,h,d){switch(a){case"style":Vo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Dt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Sr(t,a,l)}}}function en(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,d,_,a,null)}}h&&it(t,i,"srcSet",a.srcSet,a,null),l&&it(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var S=d=_=h=null,x=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":h=te;break;case"type":_=te;break;case"checked":x=te;break;case"defaultChecked":G=te;break;case"value":d=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:it(t,i,l,te,a,null)}}Ts(t,d,S,x,G,_,h,!1),ua(t);return;case"select":je("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:it(t,i,h,S,a,null)}i=d,a=_,t.multiple=!!l,i!=null?qi(t,!!l,i,!1):a!=null&&qi(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:it(t,i,_,S,a,null)}Ss(t,l,h,d),ua(t);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,i,x,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<_l.length;l++)je(_l[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,G,l,a,null)}return;default:if(ko(i)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Vd(t,i,te,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&it(t,i,S,l,a,null))}function LA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,S=null,x=null,G=null,te=null;for(X in a){var re=a[X];if(a.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":x=re;default:l.hasOwnProperty(X)||it(t,i,X,null,l,re)}}for(var $ in l){var X=l[$];if(re=a[$],l.hasOwnProperty($)&&(X!=null||re!=null))switch($){case"type":d=X;break;case"name":h=X;break;case"checked":G=X;break;case"defaultChecked":te=X;break;case"value":_=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==re&&it(t,i,$,X,l,re)}}Cn(t,_,S,x,G,te,d,h);return;case"select":X=_=S=$=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":X=x;default:l.hasOwnProperty(d)||it(t,i,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":$=d;break;case"defaultValue":S=d;break;case"multiple":_=d;default:d!==x&&it(t,i,h,d,l,x)}i=S,a=_,l=X,$!=null?qi(t,!!a,$,!1):!!l!=!!a&&(i!=null?qi(t,!!a,i,!0):qi(t,!!a,a?[]:"",!1));return;case"textarea":X=$=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:it(t,i,S,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":$=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&it(t,i,_,h,l,d)}tt(t,$,X);return;case"option":for(var Ie in a)if($=a[Ie],a.hasOwnProperty(Ie)&&$!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:it(t,i,Ie,null,l,$)}for(x in l)if($=l[x],X=a[x],l.hasOwnProperty(x)&&$!==X&&($!=null||X!=null))switch(x){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:it(t,i,x,$,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)$=a[Ae],a.hasOwnProperty(Ae)&&$!=null&&!l.hasOwnProperty(Ae)&&it(t,i,Ae,null,l,$);for(G in l)if($=l[G],X=a[G],l.hasOwnProperty(G)&&$!==X&&($!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:it(t,i,G,$,l,X)}return;default:if(ko(i)){for(var rt in a)$=a[rt],a.hasOwnProperty(rt)&&$!==void 0&&!l.hasOwnProperty(rt)&&Vd(t,i,rt,void 0,l,$);for(te in l)$=l[te],X=a[te],!l.hasOwnProperty(te)||$===X||$===void 0&&X===void 0||Vd(t,i,te,$,l,X);return}}for(var q in a)$=a[q],a.hasOwnProperty(q)&&$!=null&&!l.hasOwnProperty(q)&&it(t,i,q,null,l,$);for(re in l)$=l[re],X=a[re],!l.hasOwnProperty(re)||$===X||$==null&&X==null||it(t,i,re,$,l,X)}var kd=null,Ld=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function Mv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Ud(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jd=null;function UA(){var t=window.event;return t&&t.type==="popstate"?t===jd?!1:(jd=t,!0):(jd=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,BA=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(t){return kv.resolve(null).then(t).catch(zA)}:Vv;function zA(t){setTimeout(function(){throw t})}function Br(t){return t==="head"}function Lv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&Tl(_.documentElement),a&2&&Tl(_.body),a&4)for(a=_.head,Tl(a),_=a.firstChild;_;){var S=_.nextSibling,x=_.nodeName;_[ys]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}if(h===0){t.removeChild(d),xl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);xl(i)}function Bd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bd(a),Tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function qA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ys])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function HA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function FA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var qd=null;function Uv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function jv(t,i,a){switch(i=wc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Tl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Tr(t)}var Zn=new Map,Bv=new Set;function Rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var or=ee.d;ee.d={f:GA,r:KA,D:QA,C:YA,L:$A,m:XA,X:WA,S:ZA,M:JA};function GA(){var t=or.f(),i=yc();return t||i}function KA(t){var i=di(t);i!==null&&i.tag===5&&i.type==="form"?ay(i):or.r(t)}var Fa=typeof document>"u"?null:document;function zv(t,i,a){var l=Fa;if(l&&typeof i=="string"&&i){var h=Nt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Bv.has(h)||(Bv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),en(i,"link",t),wt(i),l.head.appendChild(i)))}}function QA(t){or.D(t),zv("dns-prefetch",t,null)}function YA(t,i){or.C(t,i),zv("preconnect",t,i)}function $A(t,i,a){or.L(t,i,a);var l=Fa;if(l&&t&&i){var h='link[rel="preload"][as="'+Nt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nt(a.imageSizes)+'"]')):h+='[href="'+Nt(t)+'"]';var d=h;switch(i){case"style":d=Ga(t);break;case"script":d=Ka(t)}Zn.has(d)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Zn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Sl(d))||i==="script"&&l.querySelector(Al(d))||(i=l.createElement("link"),en(i,"link",t),wt(i),l.head.appendChild(i)))}}function XA(t,i){or.m(t,i);var a=Fa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Nt(l)+'"][href="'+Nt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ka(t)}if(!Zn.has(d)&&(t=E({rel:"modulepreload",href:t},i),Zn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(d)))return}l=a.createElement("link"),en(l,"link",t),wt(l),a.head.appendChild(l)}}}function ZA(t,i,a){or.S(t,i,a);var l=Fa;if(l&&t){var h=pn(l).hoistableStyles,d=Ga(t);i=i||"default";var _=h.get(d);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(Sl(d)))S.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Zn.get(d))&&Hd(t,a);var x=_=l.createElement("link");wt(x),en(x,"link",t),x._p=new Promise(function(G,te){x.onload=G,x.onerror=te}),x.addEventListener("load",function(){S.loading|=1}),x.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Cc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:S},h.set(d,_)}}}function WA(t,i){or.X(t,i);var a=Fa;if(a&&t){var l=pn(a).hoistableScripts,h=Ka(t),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(t=E({src:t,async:!0},i),(i=Zn.get(h))&&Fd(t,i),d=a.createElement("script"),wt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function JA(t,i){or.M(t,i);var a=Fa;if(a&&t){var l=pn(a).hoistableScripts,h=Ka(t),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(t=E({src:t,async:!0,type:"module"},i),(i=Zn.get(h))&&Fd(t,i),d=a.createElement("script"),wt(d),en(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function qv(t,i,a,l){var h=(h=de.current)?Rc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ga(a.href),a=pn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=pn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Sl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),d||eb(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ka(a),a=pn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ga(t){return'href="'+Nt(t)+'"'}function Sl(t){return'link[rel="stylesheet"]['+t+"]"}function Hv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function eb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),en(i,"link",a),wt(i),t.head.appendChild(i))}function Ka(t){return'[src="'+Nt(t)+'"]'}function Al(t){return"script[async]"+t}function Fv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(l)return i.instance=l,wt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),wt(l),en(l,"style",h),Cc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ga(a.href);var d=t.querySelector(Sl(h));if(d)return i.state.loading|=4,i.instance=d,wt(d),d;l=Hv(a),(h=Zn.get(h))&&Hd(l,h),d=(t.ownerDocument||t).createElement("link"),wt(d);var _=d;return _._p=new Promise(function(S,x){_.onload=S,_.onerror=x}),en(d,"link",l),i.state.loading|=4,Cc(d,a.precedence,t),i.instance=d;case"script":return d=Ka(a.src),(h=t.querySelector(Al(d)))?(i.instance=h,wt(h),h):(l=a,(h=Zn.get(d))&&(l=E({},a),Fd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),wt(h),en(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Cc(l,a.precedence,t));return i.instance}function Cc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Hd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Fd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ic=null;function Gv(t,i,a){if(Ic===null){var l=new Map,h=Ic=new Map;h.set(a,l)}else h=Ic,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ys]||d[kt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var S=l.get(_);S?S.push(d):l.set(_,[d])}}return l}function Kv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function tb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Qv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var bl=null;function nb(){}function ib(t,i,a){if(bl===null)throw Error(s(475));var l=bl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ga(a.href),d=t.querySelector(Sl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=xc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,wt(d);return}d=t.ownerDocument||t,a=Hv(a),(h=Zn.get(h))&&Hd(a,h),d=d.createElement("link"),wt(d);var _=d;_._p=new Promise(function(S,x){_.onload=S,_.onerror=x}),en(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=xc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function rb(){if(bl===null)throw Error(s(475));var t=bl;return t.stylesheets&&t.count===0&&Gd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Gd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dc=null;function Gd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dc=new Map,i.forEach(sb,t),Dc=null,xc.call(t))}function sb(t,i){if(!(i.state.loading&4)){var a=Dc.get(t);if(a)var l=a.get(null);else{a=new Map,Dc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var wl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function ab(t,i,a,l,h,d,_,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Yv(t,i,a,l,h,d,_,S,x,G,te,re){return t=new ab(t,i,a,_,S,x,G,re),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),t.current=d,d.stateNode=t,i=Rf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Df(d),t}function $v(t){return t?(t=Aa,t):Aa}function Xv(t,i,a,l,h,d){h=$v(h),l.context===null?l.context=h:l.pendingContext=h,l=Cr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ir(t,l,i),a!==null&&(Pn(a,t,i),tl(a,t,i))}function Zv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Kd(t,i){Zv(t,i),(t=t.alternate)&&Zv(t,i)}function Wv(t){if(t.tag===13){var i=Sa(t,67108864);i!==null&&Pn(i,t,67108864),Kd(t,67108864)}}var Nc=!0;function ob(t,i,a,l){var h=J.T;J.T=null;var d=ee.p;try{ee.p=2,Qd(t,i,a,l)}finally{ee.p=d,J.T=h}}function lb(t,i,a,l){var h=J.T;J.T=null;var d=ee.p;try{ee.p=8,Qd(t,i,a,l)}finally{ee.p=d,J.T=h}}function Qd(t,i,a,l){if(Nc){var h=Yd(l);if(h===null)Pd(t,i,l,Oc,a),e_(t,l);else if(cb(h,t,i,a,l))l.stopPropagation();else if(e_(t,l),i&4&&-1<ub.indexOf(t)){for(;h!==null;){var d=di(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ei(d.pendingLanes);if(_!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var x=1<<31-xt(_);S.entanglements[1]|=x,_&=~x}Ci(d),(We&6)===0&&(pc=vt()+500,vl(0))}}break;case 13:S=Sa(d,2),S!==null&&Pn(S,d,2),yc(),Kd(d,2)}if(d=Yd(l),d===null&&Pd(t,i,l,Oc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Pd(t,i,l,null,a)}}function Yd(t){return t=qn(t),$d(t)}var Oc=null;function $d(t){if(Oc=null,t=ji(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Oc=t,null}function Jv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ln()){case _n:return 2;case Un:return 8;case on:case Ne:return 32;case Be:return 268435456;default:return 32}default:return 32}}var Xd=!1,zr=null,qr=null,Hr=null,Rl=new Map,Cl=new Map,Fr=[],ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e_(t,i){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Rl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(i.pointerId)}}function Il(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=di(i),i!==null&&Wv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function cb(t,i,a,l,h){switch(i){case"focusin":return zr=Il(zr,t,i,a,l,h),!0;case"dragenter":return qr=Il(qr,t,i,a,l,h),!0;case"mouseover":return Hr=Il(Hr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Rl.set(d,Il(Rl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Cl.set(d,Il(Cl.get(d)||null,t,i,a,l,h)),!0}return!1}function t_(t){var i=ji(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,yu(t.priority,function(){if(a.tag===13){var l=Mn();l=vr(l);var h=Sa(a,l);h!==null&&Pn(h,a,l),Kd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Yd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Hi=l,a.target.dispatchEvent(l),Hi=null}else return i=di(a),i!==null&&Wv(i),t.blockedOn=a,!1;i.shift()}return!0}function n_(t,i,a){Mc(t)&&a.delete(i)}function hb(){Xd=!1,zr!==null&&Mc(zr)&&(zr=null),qr!==null&&Mc(qr)&&(qr=null),Hr!==null&&Mc(Hr)&&(Hr=null),Rl.forEach(n_),Cl.forEach(n_)}function Pc(t,i){t.blockedOn===i&&(t.blockedOn=null,Xd||(Xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,hb)))}var Vc=null;function i_(t){Vc!==t&&(Vc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vc===t&&(Vc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if($d(l||a)===null)continue;break}var d=di(a);d!==null&&(t.splice(i,3),i-=3,$f(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function xl(t){function i(x){return Pc(x,t)}zr!==null&&Pc(zr,t),qr!==null&&Pc(qr,t),Hr!==null&&Pc(Hr,t),Rl.forEach(i),Cl.forEach(i);for(var a=0;a<Fr.length;a++){var l=Fr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Fr.length&&(a=Fr[0],a.blockedOn===null);)t_(a),a.blockedOn===null&&Fr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Dt]||null;if(typeof d=="function")_||i_(a);else if(_){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Dt]||null)S=_.formAction;else if($d(h)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),i_(a)}}}function Zd(t){this._internalRoot=t}kc.prototype.render=Zd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Mn();Xv(a,l,t,i,null,null)},kc.prototype.unmount=Zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Xv(t.current,2,null,t,null,null),yc(),i[Bn]=null}};function kc(t){this._internalRoot=t}kc.prototype.unstable_scheduleHydration=function(t){if(t){var i=_r();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Fr.length&&i!==0&&i<Fr[a].priority;a++);Fr.splice(a,0,t),a===0&&t_(t)}};var r_=e.version;if(r_!=="19.1.0")throw Error(s(527,r_,"19.1.0"));ee.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var fb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{ut=Lc.inject(fb),Ye=Lc}catch{}}return Nl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ey,d=Ty,_=Sy,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=Yv(t,1,!1,null,null,a,l,h,d,_,S,null),t[Bn]=i.current,Md(t),new Zd(i)},Nl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ey,_=Ty,S=Sy,x=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),i=Yv(t,1,!0,i,a??null,l,h,d,_,S,x,G),i.context=$v(null),a=i.current,l=Mn(),l=vr(l),h=Cr(l),h.callback=null,Ir(a,h,l),a=l,i.current.lanes=a,Ui(i,a),Ci(i),t[Bn]=i.current,Md(t),new kc(i)},Nl.version="19.1.0",Nl}var m_;function Sb(){if(m_)return em.exports;m_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),em.exports=Tb(),em.exports}var Ab=Sb(),Ol={},p_;function bb(){if(p_)return Ol;p_=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.parse=f,Ol.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,k){const D=new u,B=A.length;if(B<2)return D;const C=(k==null?void 0:k.decode)||E;let j=0;do{const K=A.indexOf("=",j);if(K===-1)break;const Q=A.indexOf(";",j),Z=Q===-1?B:Q;if(K>Z){j=A.lastIndexOf(";",K-1)+1;continue}const Y=m(A,j,K),ue=p(A,K,Y),N=A.slice(Y,ue);if(D[N]===void 0){let R=m(A,K+1,Z),I=p(A,Z,R);const V=C(A.slice(R,I));D[N]=V}j=Z+1}while(j<B);return D}function m(A,k,D){do{const B=A.charCodeAt(k);if(B!==32&&B!==9)return k}while(++k<D);return D}function p(A,k,D){for(;k>D;){const B=A.charCodeAt(--k);if(B!==32&&B!==9)return k+1}return D}function g(A,k,D){const B=(D==null?void 0:D.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const C=B(k);if(!e.test(C))throw new TypeError(`argument val is invalid: ${k}`);let j=A+"="+C;if(!D)return j;if(D.maxAge!==void 0){if(!Number.isInteger(D.maxAge))throw new TypeError(`option maxAge is invalid: ${D.maxAge}`);j+="; Max-Age="+D.maxAge}if(D.domain){if(!n.test(D.domain))throw new TypeError(`option domain is invalid: ${D.domain}`);j+="; Domain="+D.domain}if(D.path){if(!s.test(D.path))throw new TypeError(`option path is invalid: ${D.path}`);j+="; Path="+D.path}if(D.expires){if(!w(D.expires)||!Number.isFinite(D.expires.valueOf()))throw new TypeError(`option expires is invalid: ${D.expires}`);j+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(j+="; HttpOnly"),D.secure&&(j+="; Secure"),D.partitioned&&(j+="; Partitioned"),D.priority)switch(typeof D.priority=="string"?D.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${D.priority}`)}if(D.sameSite)switch(typeof D.sameSite=="string"?D.sameSite.toLowerCase():D.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${D.sameSite}`)}return j}function E(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function w(A){return o.call(A)==="[object Date]"}return Ol}bb();var g_="popstate";function wb(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return ym("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Kl(o)}return Cb(e,n,null,r)}function yt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Jn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rb(){return Math.random().toString(36).substring(2,10)}function y_(r,e){return{usr:r.state,key:r.key,idx:e}}function ym(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?fo(e):e,state:n,key:e&&e.key||s||Rb()}}function Kl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function fo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Cb(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function w(){m="POP";let C=E(),j=C==null?null:C-g;g=C,p&&p({action:m,location:B.location,delta:j})}function A(C,j){m="PUSH";let K=ym(B.location,C,j);g=E()+1;let Q=y_(K,g),Z=B.createHref(K);try{f.pushState(Q,"",Z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(Z)}u&&p&&p({action:m,location:B.location,delta:1})}function k(C,j){m="REPLACE";let K=ym(B.location,C,j);g=E();let Q=y_(K,g),Z=B.createHref(K);f.replaceState(Q,"",Z),u&&p&&p({action:m,location:B.location,delta:0})}function D(C){return Ib(C)}let B={get action(){return m},get location(){return r(o,f)},listen(C){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(g_,w),p=C,()=>{o.removeEventListener(g_,w),p=null}},createHref(C){return e(o,C)},createURL:D,encodeLocation(C){let j=D(C);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:A,replace:k,go(C){return f.go(C)}};return B}function Ib(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),yt(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Kl(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function n0(r,e,n="/"){return xb(r,e,n,!1)}function xb(r,e,n,s){let o=typeof e=="string"?fo(e):e,u=fr(o.pathname||"/",n);if(u==null)return null;let f=i0(r);Db(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=zb(u);m=jb(f[p],g,s)}return m}function i0(r,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(yt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=cr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(yt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),i0(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:Lb(g,u.index),routesMeta:E})};return r.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of r0(u.path))o(u,f,p)}),e}function r0(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=r0(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function Db(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:Ub(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Nb=/^:[\w-]+$/,Ob=3,Mb=2,Pb=1,Vb=10,kb=-2,v_=r=>r==="*";function Lb(r,e){let n=r.split("/"),s=n.length;return n.some(v_)&&(s+=kb),e&&(s+=Mb),n.filter(o=>!v_(o)).reduce((o,u)=>o+(Nb.test(u)?Ob:u===""?Pb:Vb),s)}function Ub(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function jb(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",w=sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),A=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!w)return null;Object.assign(o,w.params),f.push({params:o,pathname:cr([u,w.pathname]),pathnameBase:Gb(cr([u,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(u=cr([u,w.pathnameBase]))}return f}function sh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=Bb(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:w},A)=>{if(E==="*"){let D=m[A]||"";f=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const k=m[A];return w&&!k?g[E]=void 0:g[E]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function Bb(r,e=!1,n=!0){Jn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function zb(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function fr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function qb(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?fo(r):r;return{pathname:n?n.startsWith("/")?n:Hb(n,e):e,search:Kb(s),hash:Qb(o)}}function Hb(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function rm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Fb(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qm(r){let e=Fb(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Ym(r,e,n,s=!1){let o;typeof r=="string"?o=fo(r):(o={...r},yt(!o.pathname||!o.pathname.includes("?"),rm("?","pathname","search",o)),yt(!o.pathname||!o.pathname.includes("#"),rm("#","pathname","hash",o)),yt(!o.search||!o.search.includes("#"),rm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let w=e.length-1;if(!s&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),w-=1;o.pathname=A.join("/")}m=w>=0?e[w]:"/"}let p=qb(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var cr=r=>r.join("/").replace(/\/\/+/g,"/"),Gb=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Kb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Qb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Yb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var s0=["POST","PUT","PATCH","DELETE"];new Set(s0);var $b=["GET",...s0];new Set($b);var mo=M.createContext(null);mo.displayName="DataRouter";var Rh=M.createContext(null);Rh.displayName="DataRouterState";var a0=M.createContext({isTransitioning:!1});a0.displayName="ViewTransition";var Xb=M.createContext(new Map);Xb.displayName="Fetchers";var Zb=M.createContext(null);Zb.displayName="Await";var ci=M.createContext(null);ci.displayName="Navigation";var iu=M.createContext(null);iu.displayName="Location";var hi=M.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var $m=M.createContext(null);$m.displayName="RouteError";function Wb(r,{relative:e}={}){yt(po(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=M.useContext(ci),{hash:o,pathname:u,search:f}=su(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:cr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function po(){return M.useContext(iu)!=null}function kn(){return yt(po(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(iu).location}var o0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function l0(r){M.useContext(ci).static||M.useLayoutEffect(r)}function go(){let{isDataRoute:r}=M.useContext(hi);return r?h1():Jb()}function Jb(){yt(po(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(mo),{basename:e,navigator:n}=M.useContext(ci),{matches:s}=M.useContext(hi),{pathname:o}=kn(),u=JSON.stringify(Qm(s)),f=M.useRef(!1);return l0(()=>{f.current=!0}),M.useCallback((p,g={})=>{if(Jn(f.current,o0),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=Ym(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:cr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}M.createContext(null);function ru(){let{matches:r}=M.useContext(hi),e=r[r.length-1];return e?e.params:{}}function su(r,{relative:e}={}){let{matches:n}=M.useContext(hi),{pathname:s}=kn(),o=JSON.stringify(Qm(n));return M.useMemo(()=>Ym(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function e1(r,e){return u0(r,e)}function u0(r,e,n,s){var j;yt(po(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(ci),{matches:u}=M.useContext(hi),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",E=f&&f.route;{let K=E&&E.path||"";c0(p,!E||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let w=kn(),A;if(e){let K=typeof e=="string"?fo(e):e;yt(g==="/"||((j=K.pathname)==null?void 0:j.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${K.pathname}" was given in the \`location\` prop.`),A=K}else A=w;let k=A.pathname||"/",D=k;if(g!=="/"){let K=g.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(K.length).join("/")}let B=n0(r,{pathname:D});Jn(E||B!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Jn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=s1(B&&B.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:cr([g,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?g:cr([g,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),u,n,s);return e&&C?M.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},C):C}function t1(){let r=c1(),e=Yb(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:u},"ErrorBoundary")," or"," ",M.createElement("code",{style:u},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:o},n):null,f)}var n1=M.createElement(t1,null),i1=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?M.createElement(hi.Provider,{value:this.props.routeContext},M.createElement($m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function r1({routeContext:r,match:e,children:n}){let s=M.useContext(mo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(hi.Provider,{value:r},n)}function s1(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);yt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:w}=n,A=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||A){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let w,A=!1,k=null,D=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||n1,f&&(m<0&&E===0?(c0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,D=null):m===E&&(A=!0,D=g.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,E+1)),C=()=>{let j;return w?j=k:A?j=D:g.route.Component?j=M.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,M.createElement(r1,{match:g,routeContext:{outlet:p,matches:B,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?M.createElement(i1,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:C(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):C()},null)}function Xm(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function a1(r){let e=M.useContext(mo);return yt(e,Xm(r)),e}function o1(r){let e=M.useContext(Rh);return yt(e,Xm(r)),e}function l1(r){let e=M.useContext(hi);return yt(e,Xm(r)),e}function Zm(r){let e=l1(r),n=e.matches[e.matches.length-1];return yt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function u1(){return Zm("useRouteId")}function c1(){var s;let r=M.useContext($m),e=o1("useRouteError"),n=Zm("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function h1(){let{router:r}=a1("useNavigate"),e=Zm("useNavigate"),n=M.useRef(!1);return l0(()=>{n.current=!0}),M.useCallback(async(o,u={})=>{Jn(n.current,o0),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var __={};function c0(r,e,n){!e&&!__[r]&&(__[r]=!0,Jn(!1,n))}M.memo(f1);function f1({routes:r,future:e,state:n}){return u0(r,void 0,n,e)}function d1({to:r,replace:e,state:n,relative:s}){yt(po(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext(ci);Jn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=M.useContext(hi),{pathname:f}=kn(),m=go(),p=Ym(r,Qm(u),f,s==="path"),g=JSON.stringify(p);return M.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function Ii(r){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function m1({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){yt(!po(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=M.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=fo(n));let{pathname:p="/",search:g="",hash:E="",state:w=null,key:A="default"}=n,k=M.useMemo(()=>{let D=fr(p,f);return D==null?null:{location:{pathname:D,search:g,hash:E,state:w,key:A},navigationType:s}},[f,p,g,E,w,A,s]);return Jn(k!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:M.createElement(ci.Provider,{value:m},M.createElement(iu.Provider,{children:e,value:k}))}function p1({children:r,location:e}){return e1(vm(r),e)}function vm(r,e=[]){let n=[];return M.Children.forEach(r,(s,o)=>{if(!M.isValidElement(s))return;let u=[...e,o];if(s.type===M.Fragment){n.push.apply(n,vm(s.props.children,u));return}yt(s.type===Ii,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=vm(s.props.children,u)),n.push(f)}),n}var Qc="get",Yc="application/x-www-form-urlencoded";function Ch(r){return r!=null&&typeof r.tagName=="string"}function g1(r){return Ch(r)&&r.tagName.toLowerCase()==="button"}function y1(r){return Ch(r)&&r.tagName.toLowerCase()==="form"}function v1(r){return Ch(r)&&r.tagName.toLowerCase()==="input"}function _1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function E1(r,e){return r.button===0&&(!e||e==="_self")&&!_1(r)}function _m(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function T1(r,e){let n=_m(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Uc=null;function S1(){if(Uc===null)try{new FormData(document.createElement("form"),0),Uc=!1}catch{Uc=!0}return Uc}var A1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sm(r){return r!=null&&!A1.has(r)?(Jn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yc}"`),null):r}function b1(r,e){let n,s,o,u,f;if(y1(r)){let m=r.getAttribute("action");s=m?fr(m,e):null,n=r.getAttribute("method")||Qc,o=sm(r.getAttribute("enctype"))||Yc,u=new FormData(r)}else if(g1(r)||v1(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?fr(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||Qc,o=sm(r.getAttribute("formenctype"))||sm(m.getAttribute("enctype"))||Yc,u=new FormData(m,r),!S1()){let{name:g,type:E,value:w}=r;if(E==="image"){let A=g?`${g}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else g&&u.append(g,w)}}else{if(Ch(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qc,s=null,o=Yc,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function Wm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function w1(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function C1(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await w1(u,n);return f.links?f.links():[]}return[]}));return N1(s.flat(1).filter(R1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function E_(r,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function I1(r,e,{includeHydrateFallback:n}={}){return x1(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function x1(r){return[...new Set(r)]}function D1(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function N1(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(D1(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var O1=new Set([100,101,204,205]);function M1(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&fr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function h0(){let r=M.useContext(mo);return Wm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function P1(){let r=M.useContext(Rh);return Wm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Jm=M.createContext(void 0);Jm.displayName="FrameworkContext";function f0(){let r=M.useContext(Jm);return Wm(r,"You must render this element inside a <HydratedRouter> element"),r}function V1(r,e){let n=M.useContext(Jm),[s,o]=M.useState(!1),[u,f]=M.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:w}=e,A=M.useRef(null);M.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let B=j=>{j.forEach(K=>{f(K.isIntersecting)})},C=new IntersectionObserver(B,{threshold:.5});return A.current&&C.observe(A.current),()=>{C.disconnect()}}},[r]),M.useEffect(()=>{if(s){let B=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(B)}}},[s]);let k=()=>{o(!0)},D=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,A,{}]:[u,A,{onFocus:Ml(m,k),onBlur:Ml(p,D),onMouseEnter:Ml(g,k),onMouseLeave:Ml(E,D),onTouchStart:Ml(w,k)}]:[!1,A,{}]}function Ml(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function k1({page:r,...e}){let{router:n}=h0(),s=M.useMemo(()=>n0(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?M.createElement(U1,{page:r,matches:s,...e}):null}function L1(r){let{manifest:e,routeModules:n}=f0(),[s,o]=M.useState([]);return M.useEffect(()=>{let u=!1;return C1(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function U1({page:r,matches:e,...n}){let s=kn(),{manifest:o,routeModules:u}=f0(),{basename:f}=h0(),{loaderData:m,matches:p}=P1(),g=M.useMemo(()=>E_(r,e,p,o,s,"data"),[r,e,p,o,s]),E=M.useMemo(()=>E_(r,e,p,o,s,"assets"),[r,e,p,o,s]),w=M.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let D=new Set,B=!1;if(e.forEach(j=>{var Q;let K=o.routes[j.route.id];!K||!K.hasLoader||(!g.some(Z=>Z.route.id===j.route.id)&&j.route.id in m&&((Q=u[j.route.id])!=null&&Q.shouldRevalidate)||K.hasClientLoader?B=!0:D.add(j.route.id))}),D.size===0)return[];let C=M1(r,f);return B&&D.size>0&&C.searchParams.set("_routes",e.filter(j=>D.has(j.route.id)).map(j=>j.route.id).join(",")),[C.pathname+C.search]},[f,m,s,o,g,e,r,u]),A=M.useMemo(()=>I1(E,o),[E,o]),k=L1(E);return M.createElement(M.Fragment,null,w.map(D=>M.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),A.map(D=>M.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),k.map(({key:D,link:B})=>M.createElement("link",{key:D,...B})))}function j1(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var d0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d0&&(window.__reactRouterVersion="7.6.2")}catch{}function B1({basename:r,children:e,window:n}){let s=M.useRef();s.current==null&&(s.current=wb({window:n,v5Compat:!0}));let o=s.current,[u,f]=M.useState({action:o.action,location:o.location}),m=M.useCallback(p=>{M.startTransition(()=>f(p))},[f]);return M.useLayoutEffect(()=>o.listen(m),[o,m]),M.createElement(m1,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var m0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=M.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:w,...A},k){let{basename:D}=M.useContext(ci),B=typeof g=="string"&&m0.test(g),C,j=!1;if(typeof g=="string"&&B&&(C=g,d0))try{let I=new URL(window.location.href),V=g.startsWith("//")?new URL(I.protocol+g):new URL(g),U=fr(V.pathname,D);V.origin===I.origin&&U!=null?g=U+V.search+V.hash:j=!0}catch{Jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=Wb(g,{relative:o}),[Q,Z,Y]=V1(s,A),ue=F1(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:w});function N(I){e&&e(I),I.defaultPrevented||ue(I)}let R=M.createElement("a",{...A,...Y,href:C||K,onClick:j||u?e:N,ref:j1(k,Z),target:p,"data-discover":!B&&n==="render"?"true":void 0});return Q&&!B?M.createElement(M.Fragment,null,R,M.createElement(k1,{page:K})):R});ht.displayName="Link";var z1=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let w=su(f,{relative:g.relative}),A=kn(),k=M.useContext(Rh),{navigator:D,basename:B}=M.useContext(ci),C=k!=null&&$1(w)&&m===!0,j=D.encodeLocation?D.encodeLocation(w).pathname:w.pathname,K=A.pathname,Q=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(K=K.toLowerCase(),Q=Q?Q.toLowerCase():null,j=j.toLowerCase()),Q&&B&&(Q=fr(Q,B)||Q);const Z=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let Y=K===j||!o&&K.startsWith(j)&&K.charAt(Z)==="/",ue=Q!=null&&(Q===j||!o&&Q.startsWith(j)&&Q.charAt(j.length)==="/"),N={isActive:Y,isPending:ue,isTransitioning:C},R=Y?e:void 0,I;typeof s=="function"?I=s(N):I=[s,Y?"active":null,ue?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(N):u;return M.createElement(ht,{...g,"aria-current":R,className:I,ref:E,style:V,to:f,viewTransition:m},typeof p=="function"?p(N):p)});z1.displayName="NavLink";var q1=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Qc,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:w,...A},k)=>{let D=Q1(),B=Y1(m,{relative:g}),C=f.toLowerCase()==="get"?"get":"post",j=typeof m=="string"&&m0.test(m),K=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let Z=Q.nativeEvent.submitter,Y=(Z==null?void 0:Z.getAttribute("formmethod"))||f;D(Z||Q.currentTarget,{fetcherKey:e,method:Y,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:w})};return M.createElement("form",{ref:k,method:C,action:B,onSubmit:s?p:K,...A,"data-discover":!j&&r==="render"?"true":void 0})});q1.displayName="Form";function H1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p0(r){let e=M.useContext(mo);return yt(e,H1(r)),e}function F1(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=go(),p=kn(),g=su(r,{relative:u});return M.useCallback(E=>{if(E1(E,e)){E.preventDefault();let w=n!==void 0?n:Kl(p)===Kl(g);m(r,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,r,o,u,f])}function ep(r){Jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(_m(r)),n=M.useRef(!1),s=kn(),o=M.useMemo(()=>T1(s.search,n.current?null:e.current),[s.search]),u=go(),f=M.useCallback((m,p)=>{const g=_m(typeof m=="function"?m(o):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,f]}var G1=0,K1=()=>`__${String(++G1)}__`;function Q1(){let{router:r}=p0("useSubmit"),{basename:e}=M.useContext(ci),n=u1();return M.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=b1(s,e);if(o.navigate===!1){let E=o.fetcherKey||K1();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function Y1(r,{relative:e}={}){let{basename:n}=M.useContext(ci),s=M.useContext(hi);yt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...su(r||".",{relative:e})},f=kn();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:cr([n,u.pathname])),Kl(u)}function $1(r,e={}){let n=M.useContext(a0);yt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=p0("useViewTransitionState"),o=su(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=fr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=fr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return sh(o.pathname,f)!=null||sh(o.pathname,u)!=null}[...O1];const X1=()=>T.jsxs("div",{style:{padding:"2em",maxWidth:"960px",margin:"0 auto"},children:[T.jsx("h1",{children:" FLASH FLASH "}),T.jsx("p",{children:""}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.2em",marginTop:"1.4em"},children:[T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[T.jsx("h2",{style:{marginTop:0},children:""}),T.jsx("p",{style:{marginTop:0},children:""}),T.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[T.jsx("li",{children:""}),T.jsx("li",{children:""}),T.jsx("li",{children:" /  / "}),T.jsx("li",{children:""})]}),T.jsx("p",{style:{marginBottom:0},children:T.jsx(ht,{to:"/login",children:""})}),T.jsx("p",{style:{marginTop:"0.4em",marginBottom:0},children:T.jsx(ht,{to:"/dashboard",children:""})})]}),T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[T.jsx("h2",{style:{marginTop:0},children:""}),T.jsx("p",{style:{marginTop:0},children:""}),T.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[T.jsx("li",{children:""}),T.jsx("li",{children:""}),T.jsx("li",{children:""})]}),T.jsx("p",{style:{marginBottom:0},children:T.jsx(ht,{to:"/score-summary",children:""})})]})]}),T.jsxs("section",{style:{border:"1px dashed #bbb",borderRadius:"10px",padding:"1em",marginTop:"1.2em"},children:[T.jsx("h3",{style:{marginTop:0},children:""}),T.jsx("p",{style:{marginBottom:0},children:""})]})]}),Z1=()=>{};var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},W1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let A=(m&15)<<2|g>>6,k=g&63;p||(k=64,f||(A=64)),s.push(n[E],n[w],n[A],n[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(g0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):W1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new J1;const A=u<<2|m>>4;if(s.push(A),g!==64){const k=m<<4&240|g>>2;if(s.push(k),w!==64){const D=g<<6&192|w;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class J1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ew=function(r){const e=g0(r);return y0.encodeByteArray(e,!0)},ah=function(r){return ew(r).replace(/\./g,"")},v0=function(r){try{return y0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=()=>tw().__FIREBASE_DEFAULTS__,iw=()=>{if(typeof process>"u"||typeof T_>"u")return;const r=T_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},rw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&v0(r[1]);return e&&JSON.parse(e)},Ih=()=>{try{return Z1()||nw()||iw()||rw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_0=r=>{var e,n;return(n=(e=Ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},sw=r=>{const e=_0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},E0=()=>{var r;return(r=Ih())===null||r===void 0?void 0:r.config},T0=r=>{var e;return(e=Ih())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(r){return r.endsWith(".cloudworkstations.dev")}async function S0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ah(JSON.stringify(n)),ah(JSON.stringify(f)),""].join(".")}const Bl={};function lw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?r.emulator.push(e):r.prod.push(e);return r}function uw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let S_=!1;function A0(r,e){if(typeof window>"u"||typeof document>"u"||!yo(window.location.host)||Bl[r]===e||Bl[r]||S_)return;Bl[r]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=lw().prod.length>0;function f(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,k){A.setAttribute("width","24"),A.setAttribute("id",k),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{S_=!0,f()},A}function E(A,k){A.setAttribute("id",k),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=uw(s),k=n("text"),D=document.getElementById(k)||document.createElement("span"),B=n("learnmore"),C=document.getElementById(B)||document.createElement("a"),j=n("preprendIcon"),K=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;m(Q),E(C,B);const Z=g();p(K,j),Q.append(K,D,C,Z),document.body.appendChild(Q)}u?(D.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function hw(){var r;const e=(r=Ih())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pw(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function gw(){return!hw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yw(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="FirebaseError";class yr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=_w,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?Ew(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new yr(o,m,s)}}function Ew(r,e){return r.replace(Tw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Tw=/\{\$([^}]+)}/g;function Sw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ys(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(A_(u)&&A_(f)){if(!Ys(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function A_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Vl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function Aw(r,e){const n=new bw(r,e);return n.subscribe.bind(n)}class bw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ww(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=am),o.error===void 0&&(o.error=am),o.complete===void 0&&(o.complete=am);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ww(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r){return r&&r._delegate?r._delegate:r}class $s{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new aw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Iw(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Cw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cw(r){return r===Ks?void 0:r}function Iw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const Dw={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Nw=ze.INFO,Ow={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Mw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Ow[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=Nw,this._logHandler=Mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const Pw=(r,e)=>e.some(n=>r instanceof n);let b_,w_;function Vw(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return w_||(w_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b0=new WeakMap,Em=new WeakMap,w0=new WeakMap,om=new WeakMap,np=new WeakMap;function Lw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Wr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&b0.set(n,r)}).catch(()=>{}),np.set(e,r),e}function Uw(r){if(Em.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Em.set(r,e)}let Tm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Em.get(r);if(e==="objectStoreNames")return r.objectStoreNames||w0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function jw(r){Tm=r(Tm)}function Bw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(lm(this),e,...n);return w0.set(s,e.sort?e.sort():[e]),Wr(s)}:kw().includes(r)?function(...e){return r.apply(lm(this),e),Wr(b0.get(this))}:function(...e){return Wr(r.apply(lm(this),e))}}function zw(r){return typeof r=="function"?Bw(r):(r instanceof IDBTransaction&&Uw(r),Pw(r,Vw())?new Proxy(r,Tm):r)}function Wr(r){if(r instanceof IDBRequest)return Lw(r);if(om.has(r))return om.get(r);const e=zw(r);return e!==r&&(om.set(r,e),np.set(e,r)),e}const lm=r=>np.get(r);function qw(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=Wr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Wr(f.result),p.oldVersion,p.newVersion,Wr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const Hw=["get","getKey","getAll","getAllKeys","count"],Fw=["put","add","delete","clear"],um=new Map;function R_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Fw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Hw.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return um.set(e,u),u}jw(r=>({...r,get:(e,n,s)=>R_(e,n)||r.get(e,n,s),has:(e,n)=>!!R_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Kw(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",C_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new tp("@firebase/app"),Qw="@firebase/app-compat",Yw="@firebase/analytics-compat",$w="@firebase/analytics",Xw="@firebase/app-check-compat",Zw="@firebase/app-check",Ww="@firebase/auth",Jw="@firebase/auth-compat",eR="@firebase/database",tR="@firebase/data-connect",nR="@firebase/database-compat",iR="@firebase/functions",rR="@firebase/functions-compat",sR="@firebase/installations",aR="@firebase/installations-compat",oR="@firebase/messaging",lR="@firebase/messaging-compat",uR="@firebase/performance",cR="@firebase/performance-compat",hR="@firebase/remote-config",fR="@firebase/remote-config-compat",dR="@firebase/storage",mR="@firebase/storage-compat",pR="@firebase/firestore",gR="@firebase/ai",yR="@firebase/firestore-compat",vR="firebase",_R="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",ER={[Sm]:"fire-core",[Qw]:"fire-core-compat",[$w]:"fire-analytics",[Yw]:"fire-analytics-compat",[Zw]:"fire-app-check",[Xw]:"fire-app-check-compat",[Ww]:"fire-auth",[Jw]:"fire-auth-compat",[eR]:"fire-rtdb",[tR]:"fire-data-connect",[nR]:"fire-rtdb-compat",[iR]:"fire-fn",[rR]:"fire-fn-compat",[sR]:"fire-iid",[aR]:"fire-iid-compat",[oR]:"fire-fcm",[lR]:"fire-fcm-compat",[uR]:"fire-perf",[cR]:"fire-perf-compat",[hR]:"fire-rc",[fR]:"fire-rc-compat",[dR]:"fire-gcs",[mR]:"fire-gcs-compat",[pR]:"fire-fst",[yR]:"fire-fst-compat",[gR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Map,TR=new Map,bm=new Map;function I_(r,e){try{r.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function no(r){const e=r.name;if(bm.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,r);for(const n of oh.values())I_(n,r);for(const n of TR.values())I_(n,r);return!0}function ip(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ai(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new au("app","Firebase",SR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=_R;function R0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Am,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Jr.create("bad-app-name",{appName:String(o)});if(n||(n=E0()),!n)throw Jr.create("no-options");const u=oh.get(o);if(u){if(Ys(n,u.options)&&Ys(s,u.config))return u;throw Jr.create("duplicate-app",{appName:o})}const f=new xw(o);for(const p of bm.values())f.addComponent(p);const m=new AR(n,s,f);return oh.set(o,m),m}function C0(r=Am){const e=oh.get(r);if(!e&&r===Am&&E0())return R0();if(!e)throw Jr.create("no-app",{appName:r});return e}function es(r,e,n){var s;let o=(s=ER[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(m.join(" "));return}no(new $s(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebase-heartbeat-database",wR=1,Ql="firebase-heartbeat-store";let cm=null;function I0(){return cm||(cm=qw(bR,wR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(r=>{throw Jr.create("idb-open",{originalErrorMessage:r.message})})),cm}async function RR(r){try{const n=(await I0()).transaction(Ql),s=await n.objectStore(Ql).get(x0(r));return await n.done,s}catch(e){if(e instanceof yr)dr.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function x_(r,e){try{const s=(await I0()).transaction(Ql,"readwrite");await s.objectStore(Ql).put(e,x0(r)),await s.done}catch(n){if(n instanceof yr)dr.warn(n.message);else{const s=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(s.message)}}}function x0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1024,IR=30;class xR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=D_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>IR){const f=OR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=D_(),{heartbeatsToSend:s,unsentEntries:o}=DR(this._heartbeatsCache.heartbeats),u=ah(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return dr.warn(n),""}}}function D_(){return new Date().toISOString().substring(0,10)}function DR(r,e=CR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),N_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),N_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class NR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yw()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function N_(r){return ah(JSON.stringify({version:2,heartbeats:r})).length}function OR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(r){no(new $s("platform-logger",e=>new Gw(e),"PRIVATE")),no(new $s("heartbeat",e=>new xR(e),"PRIVATE")),es(Sm,C_,r),es(Sm,C_,"esm2017"),es("fire-js","")}MR("");function rp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function D0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PR=D0,N0=new au("auth","Firebase",D0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new tp("@firebase/auth");function VR(r,...e){lh.logLevel<=ze.WARN&&lh.warn(`Auth (${vo}): ${r}`,...e)}function $c(r,...e){lh.logLevel<=ze.ERROR&&lh.error(`Auth (${vo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,...e){throw sp(r,...e)}function Di(r,...e){return sp(r,...e)}function O0(r,e,n){const s=Object.assign(Object.assign({},PR()),{[e]:n});return new au("auth","Firebase",s).create(e,{appName:r.name})}function ts(r){return O0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return N0.create(r,...e)}function we(r,e,...n){if(!r)throw sp(e,...n)}function lr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $c(e),new Error(e)}function mr(r,e){r||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function kR(){return O_()==="http:"||O_()==="https:"}function O_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kR()||dw()||"connection"in navigator)?navigator.onLine:!0}function UR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=cw()||mw()}get(){return LR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r,e){mr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zR=new lu(3e4,6e4);function Js(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function cs(r,e,n,s,o={}){return P0(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=ou(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return fw()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&yo(r.emulatorConfig.host)&&(g.credentials="include"),M0.fetch()(await V0(r,r.config.apiHost,n,m),g)})}async function P0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},jR),e);try{const o=new HR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw jc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw jc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw jc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw O0(r,E,g);li(r,E)}}catch(o){if(o instanceof yr)throw o;li(r,"network-request-failed",{message:String(o)})}}async function xh(r,e,n,s,o={}){const u=await cs(r,e,n,s,o);return"mfaPendingCredential"in u&&li(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function V0(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?ap(r.config,o):`${r.config.apiScheme}://${o}`;return BR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function qR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Di(this.auth,"network-request-failed")),zR.get())})}}function jc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Di(r,e,s);return o.customData._tokenResponse=n,o}function M_(r){return r!==void 0&&r.enterprise!==void 0}class FR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GR(r,e){return cs(r,"GET","/v2/recaptchaConfig",Js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(r,e){return cs(r,"POST","/v1/accounts:delete",e)}async function uh(r,e){return cs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(r,e=!1){const n=rn(r),s=await n.getIdToken(e),o=op(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:zl(hm(o.auth_time)),issuedAtTime:zl(hm(o.iat)),expirationTime:zl(hm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function hm(r){return Number(r)*1e3}function op(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=v0(n);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function P_(r){const e=op(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof yr&&YR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function YR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Yl(r,uh(n,{idToken:s}));we(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?k0(u.providerUserInfo):[],m=ZR(r.providerData,f),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Rm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,w)}async function XR(r){const e=rn(r);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function k0(r){return r.map(e=>{var{providerId:n}=e,s=rp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(r,e){const n=await P0(r,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await V0(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&yo(r.emulatorConfig.host)&&(p.credentials="include"),M0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JR(r,e){return cs(r,"POST","/v2/accounts:revokeToken",Js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=P_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await WR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Wa;return s&&(we(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=rp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $R(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Rm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return XR(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Yl(this,KR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,k=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,D=(f=n.photoURL)!==null&&f!==void 0?f:void 0,B=(m=n.tenantId)!==null&&m!==void 0?m:void 0,C=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,j=(g=n.createdAt)!==null&&g!==void 0?g:void 0,K=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Q,emailVerified:Z,isAnonymous:Y,providerData:ue,stsTokenManager:N}=n;we(Q&&N,e,"internal-error");const R=Wa.fromJSON(this.name,N);we(typeof Q=="string",e,"internal-error"),Kr(w,e.name),Kr(A,e.name),we(typeof Z=="boolean",e,"internal-error"),we(typeof Y=="boolean",e,"internal-error"),Kr(k,e.name),Kr(D,e.name),Kr(B,e.name),Kr(C,e.name),Kr(j,e.name),Kr(K,e.name);const I=new oi({uid:Q,auth:e,email:A,emailVerified:Z,displayName:w,isAnonymous:Y,photoURL:D,phoneNumber:k,tenantId:B,stsTokenManager:R,createdAt:j,lastLoginAt:K});return ue&&Array.isArray(ue)&&(I.providerData=ue.map(V=>Object.assign({},V))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new Wa;o.updateFromServerResponse(n);const u=new oi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?k0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Wa;m.updateFromIdToken(s);const p=new oi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function ur(r){mr(r instanceof Function,"Expected a class definition");let e=V_.get(r);return e?(mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,V_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L0.type="NONE";const k_=L0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ja{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ja(ur(k_),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ur(k_);const f=Xc(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let w;if(typeof E=="string"){const A=await uh(e,{idToken:E}).catch(()=>{});if(!A)break;w=await oi._fromGetAccountInfoResponse(e,A,E)}else w=oi._fromJSON(e,E);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ja(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new Ja(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H0(e))return"Blackberry";if(F0(e))return"Webos";if(j0(e))return"Safari";if((e.includes("chrome/")||B0(e))&&!e.includes("edge/"))return"Chrome";if(q0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function U0(r=dn()){return/firefox\//i.test(r)}function j0(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B0(r=dn()){return/crios\//i.test(r)}function z0(r=dn()){return/iemobile/i.test(r)}function q0(r=dn()){return/android/i.test(r)}function H0(r=dn()){return/blackberry/i.test(r)}function F0(r=dn()){return/webos/i.test(r)}function lp(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eC(r=dn()){var e;return lp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tC(){return pw()&&document.documentMode===10}function G0(r=dn()){return lp(r)||q0(r)||F0(r)||H0(r)||/windows phone/i.test(r)||z0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(r,e=[]){let n;switch(r){case"Browser":n=L_(dn());break;case"Worker":n=`${L_(dn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(r,e={}){return cs(r,"GET","/v2/passwordPolicy",Js(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=6;class sC{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:rC,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U_(this),this.idTokenSubscription=new U_(this),this.beforeStateQueue=new nC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(ts(this));const n=e?rn(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iC(this),n=new sC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await JR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _o(r){return rn(r)}class U_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aw(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oC(r){Dh=r}function Q0(r){return Dh.loadJS(r)}function lC(){return Dh.recaptchaEnterpriseScript}function uC(){return Dh.gapiScript}function cC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class hC{constructor(){this.enterprise=new fC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dC="recaptcha-enterprise",Y0="NO_RECAPTCHA";class mC{constructor(e){this.type=dC,this.auth=_o(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{GR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new FR(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;M_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(Y0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&M_(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=lC();p.length!==0&&(p+=m),Q0(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function j_(r,e,n,s=!1,o=!1){const u=new mC(r);let f;if(o)f=Y0;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function B_(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await j_(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await j_(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r,e){const n=ip(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ys(u,e??{}))return o;li(o,"already-initialized")}return n.initialize({options:e})}function gC(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function yC(r,e,n){const s=_o(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=$0(e),{host:f,port:m}=vC(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Ys(g,s.config.emulator)&&Ys(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,yo(f)?(S0(`${u}//${f}${p}`),A0("Auth",!0)):_C()}function $0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function vC(r){const e=$0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:z_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:z_(f)}}}function z_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function _C(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function EC(r,e){return cs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,e){return xh(r,"POST","/v1/accounts:signInWithPassword",Js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",Js(r,e))}async function AC(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",Js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends up{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new $l(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new $l(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(e,n,"signInWithPassword",TC);case"emailLink":return SC(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(e,s,"signUpPassword",EC);case"emailLink":return AC(e,{idToken:n,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(r,e){return xh(r,"POST","/v1/accounts:signInWithIdp",Js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="http://localhost";class Xs extends up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=rp(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new Xs(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,eo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:bC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RC(r){const e=Pl(Vl(r)).link,n=e?Pl(Vl(e)).deep_link_id:null,s=Pl(Vl(r)).deep_link_id;return(s?Pl(Vl(s)).link:null)||s||n||e||r}class cp{constructor(e){var n,s,o,u,f,m;const p=Pl(Vl(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,w=wC((o=p.mode)!==null&&o!==void 0?o:null);we(g&&E&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=RC(e);try{return new cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,n){return $l._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=cp.parseLink(n);return we(s,"argument-error"),$l._fromEmailAndCode(e,s.code,s.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends X0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends uu{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Yr.credential(n,s)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends uu{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends uu{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Xr.credential(n,s)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await oi._fromIdTokenResponse(e,s,o),f=q_(s);return new io({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=q_(s);return new io({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function q_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends yr{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new hh(e,n,s,o)}}function Z0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(r,u,e,s):u})}async function CC(r,e,n=!1){const s=await Yl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return io._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(r,e,n=!1){const{auth:s}=r;if(ai(s.app))return Promise.reject(ts(s));const o="reauthenticate";try{const u=await Yl(r,Z0(s,o,e,r),n);we(u.idToken,s,"internal-error");const f=op(u.idToken);we(f,s,"internal-error");const{sub:m}=f;return we(r.uid===m,s,"user-mismatch"),io._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&li(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(r,e,n=!1){if(ai(r.app))return Promise.reject(ts(r));const s="signIn",o=await Z0(r,s,e),u=await io._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function xC(r,e){return W0(_o(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(r){const e=_o(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function NC(r,e,n){return ai(r.app)?Promise.reject(ts(r)):xC(rn(r),Eo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&DC(r),s})}function OC(r,e,n,s){return rn(r).onIdTokenChanged(e,n,s)}function MC(r,e,n){return rn(r).beforeAuthStateChanged(e,n)}function PC(r,e,n,s){return rn(r).onAuthStateChanged(e,n,s)}function VC(r){return rn(r).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=1e3,LC=10;class eT extends J0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);tC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},kC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eT.type="LOCAL";const UC=eT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends J0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tT.type="SESSION";const nT=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await jC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=hp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function zC(r){Ni().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function qC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function FC(){return iT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",GC=1,dh="firebaseLocalStorage",sT="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(r,e){return r.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function KC(){const r=indexedDB.deleteDatabase(rT);return new cu(r).toPromise()}function Cm(){const r=indexedDB.open(rT,GC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(dh,{keyPath:sT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(dh)?e(s):(s.close(),await KC(),e(await Cm()))})})}async function H_(r,e,n){const s=Oh(r,!0).put({[sT]:e,value:n});return new cu(s).toPromise()}async function QC(r,e){const n=Oh(r,!1).get(e),s=await new cu(n).toPromise();return s===void 0?null:s.value}function F_(r,e){const n=Oh(r,!0).delete(e);return new cu(n).toPromise()}const YC=800,$C=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>$C)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(FC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qC(),!this.activeServiceWorker)return;this.sender=new BC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await H_(e,fh,"1"),await F_(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>H_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>QC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Oh(o,!1).getAll();return new cu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const XC=aT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(r,e){return e?ur(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WC(r){return W0(r.auth,new fp(r),r.bypassAuthState)}function JC(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),IC(n,new fp(r),r.bypassAuthState)}async function eI(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),CC(n,new fp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return eI;case"reauthViaPopup":case"reauthViaRedirect":return JC;default:li(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new lu(2e3,1e4);class Za extends oT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tI.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="pendingRedirect",Zc=new Map;class iI extends oT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const s=await rI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rI(r,e){const n=oI(e),s=aI(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function sI(r,e){Zc.set(r._key(),e)}function aI(r){return ur(r._redirectPersistence)}function oI(r){return Xc(nI,r.config.apiKey,r.name)}async function lI(r,e,n=!1){if(ai(r.app))return Promise.reject(ts(r));const s=_o(r),o=ZC(s,e),f=await new iI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=10*60*1e3;class cI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!lT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Di(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uI&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function lT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r,e={}){return cs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mI=/^https?/;async function pI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fI(r);for(const n of e)try{if(gI(n))return}catch{}li(r,"unauthorized-domain")}function gI(r){const e=wm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!mI.test(n))return!1;if(dI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new lu(3e4,6e4);function K_(){const r=Ni().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function vI(r){return new Promise((e,n)=>{var s,o,u;function f(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(Di(r,"network-request-failed"))},timeout:yI.get()})}if(!((o=(s=Ni().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ni().gapi)===null||u===void 0)&&u.load)f();else{const m=cC("iframefcb");return Ni()[m]=()=>{gapi.load?f():n(Di(r,"network-request-failed"))},Q0(`${uC()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function _I(r){return Wc=Wc||vI(r),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new lu(5e3,15e3),TI="__/auth/iframe",SI="emulator/auth/iframe",AI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ap(e,SI):`https://${r.config.authDomain}/${TI}`,s={apiKey:e.apiKey,appName:r.name,v:vo},o=bI.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function RI(r){const e=await _I(r),n=Ni().gapi;return we(n,r,"internal-error"),e.open({where:document.body,url:wI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Di(r,"network-request-failed"),m=Ni().setTimeout(()=>{u(f)},EI.get());function p(){Ni().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},II=500,xI=600,DI="_blank",NI="http://localhost";class Q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OI(r,e,n,s=II,o=xI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},CI),{width:s.toString(),height:o.toString(),top:u,left:f}),g=dn().toLowerCase();n&&(m=B0(g)?DI:n),U0(g)&&(e=e||NI,p.scrollbars="yes");const E=Object.entries(p).reduce((A,[k,D])=>`${A}${k}=${D},`,"");if(eC(g)&&m!=="_self")return MI(e||"",m),new Q_(null);const w=window.open(e||"",m,E);we(w,r,"popup-blocked");try{w.focus()}catch{}return new Q_(w)}function MI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="__/auth/handler",VI="emulator/auth/handler",kI=encodeURIComponent("fac");async function Y_(r,e,n,s,o,u){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:vo,eventId:o};if(e instanceof X0){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Sw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))f[E]=w}if(e instanceof uu){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${kI}=${encodeURIComponent(p)}`:"";return`${LI(r)}?${ou(m).slice(1)}${g}`}function LI({config:r}){return r.emulator?ap(r,VI):`https://${r.authDomain}/${PI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class UI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nT,this._completeRedirectFn=lI,this._overrideRedirectResult=sI}async _openPopup(e,n,s,o){var u;mr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await Y_(e,n,s,wm(),o);return OI(e,f,hp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Y_(e,n,s,wm(),o);return zC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await RI(e),s=new cI(e);return n.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[fm];f!==void 0&&n(!!f),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G0()||j0()||lp()}}const jI=UI;var $_="@firebase/auth",X_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qI(r){no(new $s("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;we(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(r)},g=new aC(s,o,u,p);return gC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),no(new $s("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(s=>new BI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es($_,X_,zI(r)),es($_,X_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=5*60,FI=T0("authIdTokenMaxAge")||HI;let Z_=null;const GI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>FI)return;const o=n==null?void 0:n.token;Z_!==o&&(Z_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function KI(r=C0()){const e=ip(r,"auth");if(e.isInitialized())return e.getImmediate();const n=pC(r,{popupRedirectResolver:jI,persistence:[XC,UC,nT]}),s=T0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=GI(u.toString());MC(n,f,()=>f(n.currentUser)),OC(n,m=>f(m))}}const o=_0("auth");return o&&yC(n,`http://${o}`),n}function QI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}oC({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Di("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",QI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qI("Browser");var YI="firebase",$I="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(YI,$I,"app");var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,uT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function I(){}I.prototype=R.prototype,N.D=R.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(V,U,z){for(var O=Array(arguments.length-2),St=2;St<arguments.length;St++)O[St-2]=arguments[St];return R.prototype[U].apply(V,O)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,I){I||(I=0);var V=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)V[U]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(U=0;16>U;++U)V[U]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=N.g[0],I=N.g[1],U=N.g[2];var z=N.g[3],O=R+(z^I&(U^z))+V[0]+3614090360&4294967295;R=I+(O<<7&4294967295|O>>>25),O=z+(U^R&(I^U))+V[1]+3905402710&4294967295,z=R+(O<<12&4294967295|O>>>20),O=U+(I^z&(R^I))+V[2]+606105819&4294967295,U=z+(O<<17&4294967295|O>>>15),O=I+(R^U&(z^R))+V[3]+3250441966&4294967295,I=U+(O<<22&4294967295|O>>>10),O=R+(z^I&(U^z))+V[4]+4118548399&4294967295,R=I+(O<<7&4294967295|O>>>25),O=z+(U^R&(I^U))+V[5]+1200080426&4294967295,z=R+(O<<12&4294967295|O>>>20),O=U+(I^z&(R^I))+V[6]+2821735955&4294967295,U=z+(O<<17&4294967295|O>>>15),O=I+(R^U&(z^R))+V[7]+4249261313&4294967295,I=U+(O<<22&4294967295|O>>>10),O=R+(z^I&(U^z))+V[8]+1770035416&4294967295,R=I+(O<<7&4294967295|O>>>25),O=z+(U^R&(I^U))+V[9]+2336552879&4294967295,z=R+(O<<12&4294967295|O>>>20),O=U+(I^z&(R^I))+V[10]+4294925233&4294967295,U=z+(O<<17&4294967295|O>>>15),O=I+(R^U&(z^R))+V[11]+2304563134&4294967295,I=U+(O<<22&4294967295|O>>>10),O=R+(z^I&(U^z))+V[12]+1804603682&4294967295,R=I+(O<<7&4294967295|O>>>25),O=z+(U^R&(I^U))+V[13]+4254626195&4294967295,z=R+(O<<12&4294967295|O>>>20),O=U+(I^z&(R^I))+V[14]+2792965006&4294967295,U=z+(O<<17&4294967295|O>>>15),O=I+(R^U&(z^R))+V[15]+1236535329&4294967295,I=U+(O<<22&4294967295|O>>>10),O=R+(U^z&(I^U))+V[1]+4129170786&4294967295,R=I+(O<<5&4294967295|O>>>27),O=z+(I^U&(R^I))+V[6]+3225465664&4294967295,z=R+(O<<9&4294967295|O>>>23),O=U+(R^I&(z^R))+V[11]+643717713&4294967295,U=z+(O<<14&4294967295|O>>>18),O=I+(z^R&(U^z))+V[0]+3921069994&4294967295,I=U+(O<<20&4294967295|O>>>12),O=R+(U^z&(I^U))+V[5]+3593408605&4294967295,R=I+(O<<5&4294967295|O>>>27),O=z+(I^U&(R^I))+V[10]+38016083&4294967295,z=R+(O<<9&4294967295|O>>>23),O=U+(R^I&(z^R))+V[15]+3634488961&4294967295,U=z+(O<<14&4294967295|O>>>18),O=I+(z^R&(U^z))+V[4]+3889429448&4294967295,I=U+(O<<20&4294967295|O>>>12),O=R+(U^z&(I^U))+V[9]+568446438&4294967295,R=I+(O<<5&4294967295|O>>>27),O=z+(I^U&(R^I))+V[14]+3275163606&4294967295,z=R+(O<<9&4294967295|O>>>23),O=U+(R^I&(z^R))+V[3]+4107603335&4294967295,U=z+(O<<14&4294967295|O>>>18),O=I+(z^R&(U^z))+V[8]+1163531501&4294967295,I=U+(O<<20&4294967295|O>>>12),O=R+(U^z&(I^U))+V[13]+2850285829&4294967295,R=I+(O<<5&4294967295|O>>>27),O=z+(I^U&(R^I))+V[2]+4243563512&4294967295,z=R+(O<<9&4294967295|O>>>23),O=U+(R^I&(z^R))+V[7]+1735328473&4294967295,U=z+(O<<14&4294967295|O>>>18),O=I+(z^R&(U^z))+V[12]+2368359562&4294967295,I=U+(O<<20&4294967295|O>>>12),O=R+(I^U^z)+V[5]+4294588738&4294967295,R=I+(O<<4&4294967295|O>>>28),O=z+(R^I^U)+V[8]+2272392833&4294967295,z=R+(O<<11&4294967295|O>>>21),O=U+(z^R^I)+V[11]+1839030562&4294967295,U=z+(O<<16&4294967295|O>>>16),O=I+(U^z^R)+V[14]+4259657740&4294967295,I=U+(O<<23&4294967295|O>>>9),O=R+(I^U^z)+V[1]+2763975236&4294967295,R=I+(O<<4&4294967295|O>>>28),O=z+(R^I^U)+V[4]+1272893353&4294967295,z=R+(O<<11&4294967295|O>>>21),O=U+(z^R^I)+V[7]+4139469664&4294967295,U=z+(O<<16&4294967295|O>>>16),O=I+(U^z^R)+V[10]+3200236656&4294967295,I=U+(O<<23&4294967295|O>>>9),O=R+(I^U^z)+V[13]+681279174&4294967295,R=I+(O<<4&4294967295|O>>>28),O=z+(R^I^U)+V[0]+3936430074&4294967295,z=R+(O<<11&4294967295|O>>>21),O=U+(z^R^I)+V[3]+3572445317&4294967295,U=z+(O<<16&4294967295|O>>>16),O=I+(U^z^R)+V[6]+76029189&4294967295,I=U+(O<<23&4294967295|O>>>9),O=R+(I^U^z)+V[9]+3654602809&4294967295,R=I+(O<<4&4294967295|O>>>28),O=z+(R^I^U)+V[12]+3873151461&4294967295,z=R+(O<<11&4294967295|O>>>21),O=U+(z^R^I)+V[15]+530742520&4294967295,U=z+(O<<16&4294967295|O>>>16),O=I+(U^z^R)+V[2]+3299628645&4294967295,I=U+(O<<23&4294967295|O>>>9),O=R+(U^(I|~z))+V[0]+4096336452&4294967295,R=I+(O<<6&4294967295|O>>>26),O=z+(I^(R|~U))+V[7]+1126891415&4294967295,z=R+(O<<10&4294967295|O>>>22),O=U+(R^(z|~I))+V[14]+2878612391&4294967295,U=z+(O<<15&4294967295|O>>>17),O=I+(z^(U|~R))+V[5]+4237533241&4294967295,I=U+(O<<21&4294967295|O>>>11),O=R+(U^(I|~z))+V[12]+1700485571&4294967295,R=I+(O<<6&4294967295|O>>>26),O=z+(I^(R|~U))+V[3]+2399980690&4294967295,z=R+(O<<10&4294967295|O>>>22),O=U+(R^(z|~I))+V[10]+4293915773&4294967295,U=z+(O<<15&4294967295|O>>>17),O=I+(z^(U|~R))+V[1]+2240044497&4294967295,I=U+(O<<21&4294967295|O>>>11),O=R+(U^(I|~z))+V[8]+1873313359&4294967295,R=I+(O<<6&4294967295|O>>>26),O=z+(I^(R|~U))+V[15]+4264355552&4294967295,z=R+(O<<10&4294967295|O>>>22),O=U+(R^(z|~I))+V[6]+2734768916&4294967295,U=z+(O<<15&4294967295|O>>>17),O=I+(z^(U|~R))+V[13]+1309151649&4294967295,I=U+(O<<21&4294967295|O>>>11),O=R+(U^(I|~z))+V[4]+4149444226&4294967295,R=I+(O<<6&4294967295|O>>>26),O=z+(I^(R|~U))+V[11]+3174756917&4294967295,z=R+(O<<10&4294967295|O>>>22),O=U+(R^(z|~I))+V[2]+718787259&4294967295,U=z+(O<<15&4294967295|O>>>17),O=I+(z^(U|~R))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(U+(O<<21&4294967295|O>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+z&4294967295}s.prototype.u=function(N,R){R===void 0&&(R=N.length);for(var I=R-this.blockSize,V=this.B,U=this.h,z=0;z<R;){if(U==0)for(;z<=I;)o(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<R;)if(V[U++]=N.charCodeAt(z++),U==this.blockSize){o(this,V),U=0;break}}else for(;z<R;)if(V[U++]=N[z++],U==this.blockSize){o(this,V),U=0;break}}this.h=U,this.o+=R},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;var I=8*this.o;for(R=N.length-8;R<N.length;++R)N[R]=I&255,I/=256;for(this.u(N),N=Array(16),R=I=0;4>R;++R)for(var V=0;32>V;V+=8)N[I++]=this.g[R]>>>V&255;return N};function u(N,R){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=R(N)}function f(N,R){this.h=R;for(var I=[],V=!0,U=N.length-1;0<=U;U--){var z=N[U]|0;V&&z==R||(I[U]=z,V=!1)}this.g=I}var m={};function p(N){return-128<=N&&128>N?u(N,function(R){return new f([R|0],0>R?-1:0)}):new f([N|0],0>N?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return C(g(-N));for(var R=[],I=1,V=0;N>=I;V++)R[V]=N/I|0,I*=4294967296;return new f(R,0)}function E(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return C(E(N.substring(1),R));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),V=w,U=0;U<N.length;U+=8){var z=Math.min(8,N.length-U),O=parseInt(N.substring(U,U+z),R);8>z?(z=g(Math.pow(R,z)),V=V.j(z).add(g(O))):(V=V.j(I),V=V.add(g(O)))}return V}var w=p(0),A=p(1),k=p(16777216);r=f.prototype,r.m=function(){if(B(this))return-C(this).m();for(var N=0,R=1,I=0;I<this.g.length;I++){var V=this.i(I);N+=(0<=V?V:4294967296+V)*R,R*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D(this))return"0";if(B(this))return"-"+C(this).toString(N);for(var R=g(Math.pow(N,6)),I=this,V="";;){var U=Z(I,R).g;I=j(I,U.j(R));var z=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=U,D(I))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function D(N){if(N.h!=0)return!1;for(var R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function B(N){return N.h==-1}r.l=function(N){return N=j(this,N),B(N)?-1:D(N)?0:1};function C(N){for(var R=N.g.length,I=[],V=0;V<R;V++)I[V]=~N.g[V];return new f(I,~N.h).add(A)}r.abs=function(){return B(this)?C(this):this},r.add=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],V=0,U=0;U<=R;U++){var z=V+(this.i(U)&65535)+(N.i(U)&65535),O=(z>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);V=O>>>16,z&=65535,O&=65535,I[U]=O<<16|z}return new f(I,I[I.length-1]&-2147483648?-1:0)};function j(N,R){return N.add(C(R))}r.j=function(N){if(D(this)||D(N))return w;if(B(this))return B(N)?C(this).j(C(N)):C(C(this).j(N));if(B(N))return C(this.j(C(N)));if(0>this.l(k)&&0>N.l(k))return g(this.m()*N.m());for(var R=this.g.length+N.g.length,I=[],V=0;V<2*R;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<N.g.length;U++){var z=this.i(V)>>>16,O=this.i(V)&65535,St=N.i(U)>>>16,et=N.i(U)&65535;I[2*V+2*U]+=O*et,K(I,2*V+2*U),I[2*V+2*U+1]+=z*et,K(I,2*V+2*U+1),I[2*V+2*U+1]+=O*St,K(I,2*V+2*U+1),I[2*V+2*U+2]+=z*St,K(I,2*V+2*U+2)}for(V=0;V<R;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=R;V<2*R;V++)I[V]=0;return new f(I,0)};function K(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function Q(N,R){this.g=N,this.h=R}function Z(N,R){if(D(R))throw Error("division by zero");if(D(N))return new Q(w,w);if(B(N))return R=Z(C(N),R),new Q(C(R.g),C(R.h));if(B(R))return R=Z(N,C(R)),new Q(C(R.g),R.h);if(30<N.g.length){if(B(N)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,V=R;0>=V.l(N);)I=Y(I),V=Y(V);var U=ue(I,1),z=ue(V,1);for(V=ue(V,2),I=ue(I,2);!D(V);){var O=z.add(V);0>=O.l(N)&&(U=U.add(I),z=O),V=ue(V,1),I=ue(I,1)}return R=j(N,U.j(R)),new Q(U,R)}for(U=w;0<=N.l(R);){for(I=Math.max(1,Math.floor(N.m()/R.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=g(I),O=z.j(R);B(O)||0<O.l(N);)I-=V,z=g(I),O=z.j(R);D(z)&&(z=A),U=U.add(z),N=j(N,O)}return new Q(U,N)}r.A=function(N){return Z(this,N).h},r.and=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],V=0;V<R;V++)I[V]=this.i(V)&N.i(V);return new f(I,this.h&N.h)},r.or=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],V=0;V<R;V++)I[V]=this.i(V)|N.i(V);return new f(I,this.h|N.h)},r.xor=function(N){for(var R=Math.max(this.g.length,N.g.length),I=[],V=0;V<R;V++)I[V]=this.i(V)^N.i(V);return new f(I,this.h^N.h)};function Y(N){for(var R=N.g.length+1,I=[],V=0;V<R;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new f(I,N.h)}function ue(N,R){var I=R>>5;R%=32;for(var V=N.g.length-I,U=[],z=0;z<V;z++)U[z]=0<R?N.i(z+I)>>>R|N.i(z+I+1)<<32-R:N.i(z+I);return new f(U,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,uT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,ns=f}).apply(typeof W_<"u"?W_:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cT,kl,hT,Jc,Im,fT,dT,mT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var H=c[b];if(!(H in v))break e;v=v[H]}c=c[c.length-1],b=v[c],y=y(b),y!=b&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,b=!1,H={next:function(){if(!b&&v<c.length){var W=v++;return{value:y(W,c[W]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),c.apply(y,H)}}return function(){return c.apply(y,arguments)}}function A(c,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,A.apply(null,arguments)}function k(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function D(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(b,H,W){for(var fe=Array(arguments.length-2),He=2;He<arguments.length;He++)fe[He-2]=arguments[He];return y.prototype[H].apply(b,fe)}}function B(c){const y=c.length;if(0<y){const v=Array(y);for(let b=0;b<y;b++)v[b]=c[b];return v}return[]}function C(c,y){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(p(b)){const H=c.length||0,W=b.length||0;c.length=H+W;for(let fe=0;fe<W;fe++)c[H+fe]=b[fe]}else c.push(b)}}class j{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function K(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var Y=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ue(c,y,v){for(const b in c)y.call(v,c[b],b,c)}function N(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function R(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,y){let v,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(v in b)c[v]=b[v];for(let W=0;W<I.length;W++)v=I[W],Object.prototype.hasOwnProperty.call(b,v)&&(c[v]=b[v])}}function U(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function z(c){m.setTimeout(()=>{throw c},0)}function O(){var c=Te;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class St{constructor(){this.h=this.g=null}add(y,v){const b=et.get();b.set(y,v),this.h?this.h.next=b:this.g=b,this.h=b}}var et=new j(()=>new J,c=>c.reset());class J{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ce=!1,Te=new St,P=()=>{const c=m.Promise.resolve(void 0);ee=()=>{c.then(ie)}};var ie=()=>{for(var c;c=O();){try{c.h.call(c.g)}catch(v){z(v)}var y=et;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ce=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Ce(c,y){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(Y){e:{try{Z(y.nodeName);var H=!0;break e}catch{}H=!1}H||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:de[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}D(Ce,le);var de={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),me=0;function De(c,y,v,b,H){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!b,this.ha=H,this.key=++me,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ft(c){this.src=c,this.g={},this.h=0}ft.prototype.add=function(c,y,v,b,H){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var fe=st(c,y,b,H);return-1<fe?(y=c[fe],v||(y.fa=!1)):(y=new De(y,this.src,W,!!b,H),y.fa=v,c.push(y)),y};function Vt(c,y){var v=y.type;if(v in c.g){var b=c.g[v],H=Array.prototype.indexOf.call(b,y,void 0),W;(W=0<=H)&&Array.prototype.splice.call(b,H,1),W&&(ve(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function st(c,y,v,b){for(var H=0;H<c.length;++H){var W=c[H];if(!W.da&&W.listener==y&&W.capture==!!v&&W.ha==b)return H}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Rn={};function an(c,y,v,b,H){if(Array.isArray(y)){for(var W=0;W<y.length;W++)an(c,y[W],v,b,H);return null}return v=jn(v),c&&c[oe]?c.K(y,v,g(b)?!!b.capture:!1,H):vt(c,y,v,!1,b,H)}function vt(c,y,v,b,H,W){if(!y)throw Error("Invalid event type");var fe=g(H)?!!H.capture:!!H,He=Be(c);if(He||(c[lt]=He=new ft(c)),v=He.add(y,v,b,fe,W),v.proxy)return v;if(b=Ln(),v.proxy=b,b.src=c,b.listener=v,c.addEventListener)ye||(H=fe),H===void 0&&(H=!1),c.addEventListener(y.toString(),b,H);else if(c.attachEvent)c.attachEvent(on(y.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ln(){function c(v){return y.call(c.src,c.listener,v)}const y=Ne;return c}function _n(c,y,v,b,H){if(Array.isArray(y))for(var W=0;W<y.length;W++)_n(c,y[W],v,b,H);else b=g(b)?!!b.capture:!!b,v=jn(v),c&&c[oe]?(c=c.i,y=String(y).toString(),y in c.g&&(W=c.g[y],v=st(W,v,b,H),-1<v&&(ve(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[y],c.h--)))):c&&(c=Be(c))&&(y=c.g[y.toString()],c=-1,y&&(c=st(y,v,b,H)),(v=-1<c?y[c]:null)&&Un(v))}function Un(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[oe])Vt(y.i,c);else{var v=c.type,b=c.proxy;y.removeEventListener?y.removeEventListener(v,b,c.capture):y.detachEvent?y.detachEvent(on(v),b):y.addListener&&y.removeListener&&y.removeListener(b),(v=Be(y))?(Vt(v,c),v.h==0&&(v.src=null,y[lt]=null)):ve(c)}}}function on(c){return c in Rn?Rn[c]:Rn[c]="on"+c}function Ne(c,y){if(c.da)c=!0;else{y=new Ce(y,this);var v=c.listener,b=c.ha||c.src;c.fa&&Un(c),c=v.call(b,y)}return c}function Be(c){return c=c[lt],c instanceof ft?c:null}var ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function jn(c){return typeof c=="function"?c:(c[ki]||(c[ki]=function(y){return c.handleEvent(y)}),c[ki])}function ut(){he.call(this),this.i=new ft(this),this.M=this,this.F=null}D(ut,he),ut.prototype[oe]=!0,ut.prototype.removeEventListener=function(c,y,v,b){_n(this,c,y,v,b)};function Ye(c,y){var v,b=c.F;if(b)for(v=[];b;b=b.F)v.push(b);if(c=c.M,b=y.type||y,typeof y=="string")y=new le(y,c);else if(y instanceof le)y.target=y.target||c;else{var H=y;y=new le(b,c),V(y,H)}if(H=!0,v)for(var W=v.length-1;0<=W;W--){var fe=y.g=v[W];H=mn(fe,b,!0,y)&&H}if(fe=y.g=c,H=mn(fe,b,!0,y)&&H,H=mn(fe,b,!1,y)&&H,v)for(W=0;W<v.length;W++)fe=y.g=v[W],H=mn(fe,b,!1,y)&&H}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],b=0;b<v.length;b++)ve(v[b]);delete c.g[y],c.h--}}this.F=null},ut.prototype.K=function(c,y,v,b){return this.i.add(String(c),y,!1,v,b)},ut.prototype.L=function(c,y,v,b){return this.i.add(String(c),y,!0,v,b)};function mn(c,y,v,b){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var H=!0,W=0;W<y.length;++W){var fe=y[W];if(fe&&!fe.da&&fe.capture==v){var He=fe.listener,Lt=fe.ha||fe.src;fe.fa&&Vt(c.i,fe),H=He.call(Lt,b)!==!1&&H}}return H&&!b.defaultPrevented}function xt(c,y,v){if(typeof c=="function")v&&(c=A(c,v));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function gu(c){c.g=xt(()=>{c.g=null,c.i&&(c.i=!1,gu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Jh extends he{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:gu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(c){he.call(this),this.h=c,this.g={}}D(ds,he);var ms=[];function ps(c){ue(c.g,function(y,v){this.g.hasOwnProperty(v)&&Un(y)},c),c.g={}}ds.prototype.N=function(){ds.aa.N.call(this),ps(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=m.JSON.stringify,ia=m.JSON.parse,gs=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function wo(){}wo.prototype.h=null;function Ro(c){return c.h||(c.h=c.i())}function Co(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ui(){le.call(this,"d")}D(Ui,le);function Io(){le.call(this,"c")}D(Io,le);var fi={},xo=null;function vr(){return xo=xo||new ut}fi.La="serverreachability";function ra(c){le.call(this,fi.La,c)}D(ra,le);function _r(c){const y=vr();Ye(y,new ra(y))}fi.STAT_EVENT="statevent";function yu(c,y){le.call(this,fi.STAT_EVENT,c),this.stat=y}D(yu,le);function mt(c){const y=vr();Ye(y,new yu(y,c))}fi.Ma="timingevent";function kt(c,y){le.call(this,fi.Ma,c),this.size=y}D(kt,le);function Dt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Do(c,y,v,b,H,W){c.info(function(){if(c.g)if(W)for(var fe="",He=W.split("&"),Lt=0;Lt<He.length;Lt++){var Fe=He[Lt].split("=");if(1<Fe.length){var Ft=Fe[0];Fe=Fe[1];var Ut=Ft.split("_");fe=2<=Ut.length&&Ut[1]=="type"?fe+(Ft+"="+Fe+"&"):fe+(Ft+"=redacted&")}}else fe=null;else fe=W;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+y+`
`+v+`
`+fe})}function ef(c,y,v,b,H,W,fe){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+y+`
`+v+`
`+W+" "+fe})}function Er(c,y,v,b){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ys(c,v)+(b?" "+b:"")})}function vu(c,y){c.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function ys(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var b=v[c];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var fe=1;fe<H.length;fe++)H[fe]=""}}}}return ei(v)}catch{return y}}var Tr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},di;function mi(){}D(mi,wo),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},di=new mi;function pn(c,y,v,b){this.j=c,this.i=y,this.l=v,this.R=b||1,this.U=new ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var No={},sa={};function ti(c,y,v){c.L=1,c.v=Ss(Cn(y)),c.m=v,c.P=!0,Bi(c,null)}function Bi(c,y){c.F=Date.now(),vs(c),c.A=Cn(c.v);var v=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Lo(v.i,"t",b),c.C=0,v=c.j.J,c.h=new wt,c.g=Pu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Jh(A(c.Y,c,c.g),c.O)),y=c.U,v=c.g,b=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(ms[0]=H.toString()),H=ms);for(var W=0;W<H.length;W++){var fe=an(v,H[W],b||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),_r(),Do(c.i,c.u,c.A,c.l,c.R,c.m)}pn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Fn(c)==3?y.j():this.Y(c)},pn.prototype.Y=function(c){try{if(c==this.g)e:{const Ut=Fn(this.g);var y=this.g.Ba();const Yi=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=Yi?_r(3):_r(2)),Sr(this);var v=this.g.Z();this.X=v;t:if(_u(this)){var b=Ru(this.g);c="";var H=b.length,W=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),pi(this);var fe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<H;y++)this.h.h=!0,c+=this.h.i.decode(b[y],{stream:!(W&&y==H-1)});b.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=v==200,ef(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(He)){var Fe=He;break t}}Fe=null}if(v=Fe)Er(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,v);else{this.o=!1,this.s=3,mt(12),Xt(this),pi(this);break e}}if(this.P){v=!0;let Zt;for(;!this.J&&this.C<fe.length;)if(Zt=Eu(this,fe),Zt==sa){Ut==4&&(this.s=4,mt(14),v=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==No){this.s=4,mt(15),Er(this.i,this.l,fe,"[Invalid Chunk]"),v=!1;break}else Er(this.i,this.l,Zt,null),_s(this,Zt);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||fe.length!=0||this.h.h||(this.s=1,mt(16),v=!1),this.o=this.o&&v,!v)Er(this.i,this.l,fe,"[Invalid Chunked Response]"),Xt(this),pi(this);else if(0<fe.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Ds(Ft),Ft.M=!0,mt(11))}}else Er(this.i,this.l,fe,null),_s(this,fe);Ut==4&&Xt(this),this.o&&!this.J&&(Ut==4?Nu(this.j,this):(this.o=!1,vs(this)))}else af(this.g),v==400&&0<fe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Xt(this),pi(this)}}}catch{}finally{}};function _u(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Eu(c,y){var v=c.C,b=y.indexOf(`
`,v);return b==-1?sa:(v=Number(y.substring(v,b)),isNaN(v)?No:(b+=1,b+v>y.length?sa:(y=y.slice(b,b+v),c.C=b+v,y)))}pn.prototype.cancel=function(){this.J=!0,Xt(this)};function vs(c){c.S=Date.now()+c.I,Tu(c,c.I)}function Tu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dt(A(c.ba,c),y)}function Sr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}pn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(vu(this.i,this.A),this.L!=2&&(_r(),mt(17)),Xt(this),this.s=2,pi(this)):Tu(this,this.S-c)};function pi(c){c.j.G==0||c.J||Nu(c.j,c)}function Xt(c){Sr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,ps(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function _s(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Oo(v.h,c))){if(!c.K&&Oo(v.h,c)&&v.G==3){try{var b=v.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ya(v),pa(v);else break e;qo(v),mt(18)}}else v.za=H[1],0<v.za-v.T&&37500>H[2]&&v.F&&v.v==0&&!v.C&&(v.C=Dt(A(v.Za,v),6e3));if(1>=oa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Qi(v,11)}else if((c.K||v.g==c)&&ya(v),!K(y))for(H=v.Da.g.parse(y),y=0;y<H.length;y++){let Fe=H[y];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const Ft=Fe[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Ut=Fe[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const Yi=Fe[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(b=1.5*Yi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Zt=c.g;if(Zt){const Si=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var W=b.h;W.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(la(W,W.h),W.h=null))}if(b.D){const Fo=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(b.ya=Fo,tt(b.I,b.D,Fo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var fe=c;if(b.qa=Mu(b,b.J?b.ia:null,b.W),fe.K){gn(b.h,fe);var He=fe,Lt=b.L;Lt&&(He.I=Lt),He.B&&(Sr(He),vs(He)),b.g=fe}else xu(b);0<v.i.length&&ga(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Qi(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Qi(v,7):Bo(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}_r(4)}catch{}}var Su=class{constructor(c,y){this.g=c,this.map=y}};function zi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function oa(c){return c.h?1:c.g?c.g.size:0}function Oo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function la(c,y){c.g?c.g.add(y):c.h=y}function gn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}zi.prototype.cancel=function(){if(this.i=Mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Mo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return B(c.i)}function tf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,b=0;b<v;b++)y.push(c[b]);return y}y=[],v=0;for(b in c)y[v++]=c[b];return y}function ua(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const b in c)y[v++]=b;return y}}}function Po(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=ua(c),b=tf(c),H=b.length,W=0;W<H;W++)y.call(void 0,b[W],v&&v[W],c)}var Es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var b=c[v].indexOf("="),H=null;if(0<=b){var W=c[v].substring(0,b);H=c[v].substring(b+1)}else W=c[v];y(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Nt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nt){this.h=c.h,Ts(this,c.j),this.o=c.o,this.g=c.g,Ar(this,c.s),this.l=c.l;var y=c.i,v=new Hi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),qi(this,v),this.m=c.m}else c&&(y=String(c).match(Es))?(this.h=!1,Ts(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),Ar(this,y[4]),this.l=zn(y[5]||"",!0),qi(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}Nt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(As(y,Vo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(As(y,Vo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(As(v,v.charAt(0)=="/"?rf:ko,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",As(v,ca)),c.join("")};function Cn(c){return new Nt(c)}function Ts(c,y,v){c.j=v?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ar(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function qi(c,y,v){y instanceof Hi?(c.i=y,bu(c.i,c.h)):(v||(y=As(y,sf)),c.i=new Hi(y,c.h))}function tt(c,y,v){c.i.set(y,v)}function Ss(c){return tt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Au),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Au(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,ko=/[#\?:]/g,rf=/[#\?]/g,sf=/[#\?@]/g,ca=/#/g;function Hi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function qn(c){c.g||(c.g=new Map,c.h=0,c.i&&nf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Hi.prototype,r.add=function(c,y){qn(this),this.i=null,c=gi(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Fi(c,y){qn(c),y=gi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Gi(c,y){return qn(c),y=gi(c,y),c.g.has(y)}r.forEach=function(c,y){qn(this),this.g.forEach(function(v,b){v.forEach(function(H){c.call(y,H,b,this)},this)},this)},r.na=function(){qn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let b=0;b<y.length;b++){const H=c[b];for(let W=0;W<H.length;W++)v.push(y[b])}return v},r.V=function(c){qn(this);let y=[];if(typeof c=="string")Gi(this,c)&&(y=y.concat(this.g.get(gi(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},r.set=function(c,y){return qn(this),this.i=null,c=gi(this,c),Gi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Lo(c,y,v){Fi(c,y),0<v.length&&(c.i=null,c.g.set(gi(c,y),B(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var b=y[v];const W=encodeURIComponent(String(b)),fe=this.V(b);for(b=0;b<fe.length;b++){var H=W;fe[b]!==""&&(H+="="+encodeURIComponent(String(fe[b]))),c.push(H)}}return this.i=c.join("&")};function gi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function bu(c,y){y&&!c.j&&(qn(c),c.i=null,c.g.forEach(function(v,b){var H=b.toLowerCase();b!=H&&(Fi(this,b),Lo(this,H,v))},c)),c.j=y}function bs(c,y){const v=new Bn;if(m.Image){const b=new Image;b.onload=k(Hn,v,"TestLoadImage: loaded",!0,y,b),b.onerror=k(Hn,v,"TestLoadImage: error",!1,y,b),b.onabort=k(Hn,v,"TestLoadImage: abort",!1,y,b),b.ontimeout=k(Hn,v,"TestLoadImage: timeout",!1,y,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else y(!1)}function ni(c,y){const v=new Bn,b=new AbortController,H=setTimeout(()=>{b.abort(),Hn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:b.signal}).then(W=>{clearTimeout(H),W.ok?Hn(v,"TestPingServer: ok",!0,y):Hn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Hn(v,"TestPingServer: error",!1,y)})}function Hn(c,y,v,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(v)}catch{}}function ws(){this.g=new gs}function yi(c,y,v){const b=v||"";try{Po(c,function(H,W){let fe=H;g(H)&&(fe=ei(H)),y.push(b+W+"="+encodeURIComponent(fe))})}catch(H){throw y.push(b+"type="+encodeURIComponent("_badmap")),H}}function br(c){this.l=c.Ub||null,this.j=c.eb||!1}D(br,wo),br.prototype.g=function(){return new Ki(this.l,this.j)},br.prototype.i=function(c){return function(){return c}}({});function Ki(c,y){ut.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ki,ut),r=Ki.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,_i(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vi(this):_i(this),this.readyState==3&&Uo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,vi(this))},r.Qa=function(c){this.g&&(this.response=c,vi(this))},r.ga=function(){this.g&&vi(this)};function vi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_i(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function _i(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jo(c){let y="";return ue(c,function(v,b){y+=b,y+=":",y+=v,y+=`\r
`}),y}function Ht(c,y,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=jo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):tt(c,y,v))}function Xe(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Xe,ut);var ha=/^https?$/i,Rs=["POST","PUT"];r=Xe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():di.g(),this.v=this.o?Ro(this.o):Ro(di),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){wu(this,W);return}if(c=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)v.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const W of b.keys())v.set(W,b.get(W));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),H=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Rs,y,void 0))||b||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of v)this.g.setRequestHeader(W,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cs(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){wu(this,W)}};function wu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,fa(c),Ei(c)}function fa(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),Ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),Xe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},r.bb=function(){da(this)};function da(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)xt(c.Ea,0,c);else if(Ye(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var b;if(b=fe===0){var H=String(c.D).match(Es)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),b=!ha.test(H?H.toLowerCase():"")}v=b}if(v)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var W=2<Fn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",fa(c)}}finally{Ei(c)}}}}function Ei(c,y){if(c.g){Cs(c);const v=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ye(c,"ready");try{v.onreadystatechange=b}catch{}}}function Cs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ia(y)}};function Ru(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function af(c){const y={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(K(c[b]))continue;var v=U(c[b]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=y[H]||[];y[H]=W,W.push(v)}N(y,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function ma(c){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,c),this.cb=Is("retryDelaySeedMs",1e4,c),this.Wa=Is("forwardChannelMaxRetries",2,c),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(c&&c.concurrentRequestLimit),this.Da=new ws,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ma.prototype,r.la=8,r.G=1,r.connect=function(c,y,v,b){mt(0),this.W=c,this.H=y||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Mu(this,null,this.W),ga(this)};function Bo(c){if(Cu(c),c.G==3){var y=c.U++,v=Cn(c.I);if(tt(v,"SID",c.K),tt(v,"RID",y),tt(v,"TYPE","terminate"),xs(c,v),y=new pn(c,c.j,y),y.L=2,y.v=Ss(Cn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Pu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),vs(y)}Ou(c)}function pa(c){c.g&&(Ds(c),c.g.cancel(),c.g=null)}function Cu(c){pa(c),c.u&&(m.clearTimeout(c.u),c.u=null),ya(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ga(c){if(!aa(c.h)&&!c.s){c.s=!0;var y=c.Ga;ee||P(),ce||(ee(),ce=!0),Te.add(y,c),c.B=0}}function of(c,y){return oa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dt(A(c.Ga,c,y),Ho(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new pn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=R(W),V(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Iu(this,H,y),v=Cn(this.I),tt(v,"RID",c),tt(v,"CVER",22),this.D&&tt(v,"X-HTTP-Session-Id",this.D),xs(this,v),W&&(this.O?y="headers="+encodeURIComponent(String(jo(W)))+"&"+y:this.m&&Ht(v,this.m,W)),la(this.h,H),this.Ua&&tt(v,"TYPE","init"),this.P?(tt(v,"$req",y),tt(v,"SID","null"),H.T=!0,ti(H,v,null)):ti(H,v,y),this.G=2}}else this.G==3&&(c?zo(this,c):this.i.length==0||aa(this.h)||zo(this))};function zo(c,y){var v;y?v=y.l:v=c.U++;const b=Cn(c.I);tt(b,"SID",c.K),tt(b,"RID",v),tt(b,"AID",c.T),xs(c,b),c.m&&c.o&&Ht(b,c.m,c.o),v=new pn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Iu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),la(c.h,v),ti(v,b,y)}function xs(c,y){c.H&&ue(c.H,function(v,b){tt(y,b,v)}),c.l&&Po({},function(v,b){tt(y,b,v)})}function Iu(c,y,v){v=Math.min(c.i.length,v);var b=c.l?A(c.l.Na,c.l,c):null;e:{var H=c.i;let W=-1;for(;;){const fe=["count="+v];W==-1?0<v?(W=H[0].g,fe.push("ofs="+W)):W=0:fe.push("ofs="+W);let He=!0;for(let Lt=0;Lt<v;Lt++){let Fe=H[Lt].g;const Ft=H[Lt].map;if(Fe-=W,0>Fe)W=Math.max(0,H[Lt].g-100),He=!1;else try{yi(Ft,fe,"req"+Fe+"_")}catch{b&&b(Ft)}}if(He){b=fe.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,b}function xu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ee||P(),ce||(ee(),ce=!0),Te.add(y,c),c.v=0}}function qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dt(A(c.Fa,c),Ho(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dt(A(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),pa(this),Du(this))};function Ds(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Du(c){c.g=new pn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Cn(c.qa);tt(y,"RID","rpc"),tt(y,"SID",c.K),tt(y,"AID",c.T),tt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&tt(y,"TO",c.ja),tt(y,"TYPE","xmlhttp"),xs(c,y),c.m&&c.o&&Ht(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ss(Cn(y)),v.m=null,v.P=!0,Bi(v,c)}r.Za=function(){this.C!=null&&(this.C=null,pa(this),qo(this),mt(19))};function ya(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Nu(c,y){var v=null;if(c.g==y){ya(c),Ds(c),c.g=null;var b=2}else if(Oo(c.h,y))v=y.D,gn(c.h,y),b=1;else return;if(c.G!=0){if(y.o)if(b==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var H=c.B;b=vr(),Ye(b,new kt(b,v)),ga(c)}else xu(c);else if(H=y.s,H==3||H==0&&0<y.X||!(b==1&&of(c,y)||b==2&&qo(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),H){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function Ho(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Qi(c,y){if(c.j.info("Error code "+y),y==2){var v=A(c.fb,c),b=c.Xa;const H=!b;b=new Nt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ts(b,"https"),Ss(b),H?bs(b.toString(),v):ni(b.toString(),v)}else mt(2);c.G=0,c.l&&c.l.sa(y),Ou(c),Cu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Ou(c){if(c.G=0,c.ka=[],c.l){const y=Mo(c.h);(y.length!=0||c.i.length!=0)&&(C(c.ka,y),C(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function Mu(c,y,v){var b=v instanceof Nt?Cn(v):new Nt(v);if(b.g!="")y&&(b.g=y+"."+b.g),Ar(b,b.s);else{var H=m.location;b=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;var W=new Nt(null);b&&Ts(W,b),y&&(W.g=y),H&&Ar(W,H),v&&(W.l=v),b=W}return v=c.D,y=c.ya,v&&y&&tt(b,v,y),tt(b,"VER",c.la),xs(c,b),b}function Pu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Xe(new br({eb:v})):new Xe(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}r=Vu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function va(){}va.prototype.g=function(c,y){return new yn(c,y)};function yn(c,y){ut.call(this),this.g=new ma(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!K(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!K(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ti(this)}D(yn,ut),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Bo(this.g)},yn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ei(c),c=v);y.i.push(new Su(y.Ya++,c)),y.G==3&&ga(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,yn.aa.N.call(this)};function ku(c){Ui.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}D(ku,Ui);function Lu(){Io.call(this),this.status=1}D(Lu,Io);function Ti(c){this.g=c}D(Ti,Vu),Ti.prototype.ua=function(){Ye(this.g,"a")},Ti.prototype.ta=function(c){Ye(this.g,new ku(c))},Ti.prototype.sa=function(c){Ye(this.g,new Lu)},Ti.prototype.ra=function(){Ye(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,mT=function(){return new va},dT=function(){return vr()},fT=fi,Im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tr.NO_ERROR=0,Tr.TIMEOUT=8,Tr.HTTP_ERROR=6,Jc=Tr,ji.COMPLETE="complete",hT=ji,Co.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",ut.prototype.listen=ut.prototype.K,kl=Co,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,cT=Xe}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",eE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new tp("@firebase/firestore");function Qa(){return Zs.logLevel}function pe(r,...e){if(Zs.logLevel<=ze.DEBUG){const n=e.map(dp);Zs.debug(`Firestore (${To}): ${r}`,...n)}}function pr(r,...e){if(Zs.logLevel<=ze.ERROR){const n=e.map(dp);Zs.error(`Firestore (${To}): ${r}`,...n)}}function ro(r,...e){if(Zs.logLevel<=ze.WARN){const n=e.map(dp);Zs.warn(`Firestore (${To}): ${r}`,...n)}}function dp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,pT(r,s,n)}function pT(r,e,n){let s=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pr(s),new Error(s)}function Ze(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||pT(e,o,s)}function Me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class ZI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WI{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new gT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class JI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ex{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new JI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const s=u=>{u.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new tE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=nx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function xm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return ke(s,o);{const u=yT(),f=ix(u.encode(nE(r,n)),u.encode(nE(e,n)));return f!==0?f:ke(s,o)}}n+=s>65535?2:1}return ke(r.length,e.length)}function nE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function ix(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return ke(r[n],e[n]);return ke(r.length,e.length)}function so(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=-62135596800,rE=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*rE);return new dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iE)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rE}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-iE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new dt(0,0))}static max(){return new xe(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__name__";class xi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=xi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=xi.isNumericId(e),o=xi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?xi.extractNumericId(e).compare(xi.extractNumericId(n)):xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class gt extends xi{construct(e,n,s){return new gt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const rx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends xi{construct(e,n,s){return new nn(e,n,s)}static isValidIdentifier(e){return rx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new nn([sE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new Ee(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(gt.fromString(e))}static fromName(e){return new Se(gt.fromString(e).popFirst(5))}static empty(){return new Se(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new gt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function sx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new dt(n+1,0):new dt(n,s));return new rs(o,Se.empty(),e)}function ax(r){return new rs(r.readTime,r.key,Xl)}class rs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new rs(xe.min(),Se.empty(),Xl)}static max(){return new rs(xe.max(),Se.empty(),Xl)}}function ox(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ux{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==lx)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,s)=>{n(e)})}static reject(e){return new se((n,s)=>{s(e)})}static waitFor(e){return new se((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next(o=>o?se.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new se((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new se((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function cx(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Mh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=-1;function Ph(r){return r==null}function mh(r){return r===0&&1/r==-1/0}function hx(r){return typeof r=="number"&&Number.isInteger(r)&&!mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="";function fx(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=aE(e)),e=dx(r.get(n),e);return aE(e)}function dx(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case _T:n+="";break;default:n+=u}}return n}function aE(r){return r+_T+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function hs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function ET(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new tn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lE(this.data.getIterator())}getIteratorFrom(e){return new lE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class lE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new qt(nn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new TT("Invalid base64 string: "+u):u}}(e);return new sn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const mx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const n=mx.exec(r);if(Ze(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function as(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",bT="__previous_value__",wT="__local_write_time__";function pp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===ST}function Vh(r){const e=r.mapValue.fields[bT];return pp(e)?Vh(e):e}function Zl(r){const e=ss(r.mapValue.fields[wT].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const ph="(default)";class Wl{constructor(e,n){this.projectId=e,this.database=n||ph}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",gx="__max__",qc={mapValue:{}},CT="__vector__",gh="value";function os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pp(r)?4:vx(r)?9007199254740991:yx(r)?10:11:Re(28295,{value:r})}function Pi(r,e){if(r===e)return!0;const n=os(r);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Zl(r).isEqual(Zl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ss(o.timestampValue),m=ss(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return as(o.bytesValue).isEqual(as(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=It(o.doubleValue),m=It(u.doubleValue);return f===m?mh(f)===mh(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return so(r.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(oE(f)!==oE(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Pi(f[p],m[p])))return!1;return!0}(r,e);default:return Re(52216,{left:r})}}function Jl(r,e){return(r.values||[]).find(n=>Pi(n,e))!==void 0}function ao(r,e){if(r===e)return 0;const n=os(r),s=os(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return function(u,f){const m=It(u.integerValue||u.doubleValue),p=It(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return uE(r.timestampValue,e.timestampValue);case 4:return uE(Zl(r),Zl(e));case 5:return xm(r.stringValue,e.stringValue);case 6:return function(u,f){const m=as(u),p=as(f);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ke(m[g],p[g]);if(E!==0)return E}return ke(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const m=ke(It(u.latitude),It(f.latitude));return m!==0?m:ke(It(u.longitude),It(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return cE(r.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const w=u.fields||{},A=f.fields||{},k=(m=w[gh])===null||m===void 0?void 0:m.arrayValue,D=(p=A[gh])===null||p===void 0?void 0:p.arrayValue,B=ke(((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0,((E=D==null?void 0:D.values)===null||E===void 0?void 0:E.length)||0);return B!==0?B:cE(k,D)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===qc.mapValue&&f===qc.mapValue)return 0;if(u===qc.mapValue)return 1;if(f===qc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const A=xm(p[w],E[w]);if(A!==0)return A;const k=ao(m[p[w]],g[E[w]]);if(k!==0)return k}return ke(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Re(23264,{Pe:n})}}function uE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=ss(r),s=ss(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function cE(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=ao(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function oo(r){return Dm(r)}function Dm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=ss(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return as(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Se.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Dm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Dm(n.fields[f])}`;return o+"}"}(r.mapValue):Re(61005,{value:r})}function eh(r){switch(os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(r);return e?16+eh(e):16;case 5:return 2*r.stringValue.length;case 6:return as(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+eh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return hs(s.fields,(u,f)=>{o+=u.length+eh(f)}),o}(r.mapValue);default:throw Re(13486,{value:r})}}function Nm(r){return!!r&&"integerValue"in r}function gp(r){return!!r&&"arrayValue"in r}function hE(r){return!!r&&"nullValue"in r}function fE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function th(r){return!!r&&"mapValue"in r}function yx(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[RT])===null||n===void 0?void 0:n.stringValue)===CT}function ql(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return hs(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ql(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ql(r.arrayValue.values[n]);return e}return Object.assign({},r)}function vx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(n)}setAll(e){let n=nn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=ql(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){hs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new bn(ql(this.value))}}function IT(r){const e=[];return hs(r.fields,(n,s)=>{const o=new nn([n]);if(th(s)){const u=IT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,xe.min(),xe.min(),xe.min(),bn.empty(),0)}static newFoundDocument(e,n,s,o){return new fn(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new fn(e,2,n,xe.min(),xe.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,xe.min(),xe.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function dE(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Se.comparator(Se.fromName(f.referenceValue),n.key):s=ao(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function mE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Pi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function _x(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{}class zt extends xT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Tx(e,n,s):n==="array-contains"?new bx(e,s):n==="in"?new wx(e,s):n==="not-in"?new Rx(e,s):n==="array-contains-any"?new Cx(e,s):new zt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Sx(e,s):new Ax(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends xT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Vi(e,n)}matches(e){return DT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function DT(r){return r.op==="and"}function NT(r){return Ex(r)&&DT(r)}function Ex(r){for(const e of r.filters)if(e instanceof Vi)return!1;return!0}function Om(r){if(r instanceof zt)return r.field.canonicalString()+r.op.toString()+oo(r.value);if(NT(r))return r.filters.map(e=>Om(e)).join(",");{const e=r.filters.map(n=>Om(n)).join(",");return`${r.op}(${e})`}}function OT(r,e){return r instanceof zt?function(s,o){return o instanceof zt&&s.op===o.op&&s.field.isEqual(o.field)&&Pi(s.value,o.value)}(r,e):r instanceof Vi?function(s,o){return o instanceof Vi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&OT(f,o.filters[m]),!0):!1}(r,e):void Re(19439)}function MT(r){return r instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`}(r):r instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(MT).join(" ,")+"}"}(r):"Filter"}class Tx extends zt{constructor(e,n,s){super(e,n,s),this.key=Se.fromName(s.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Sx extends zt{constructor(e,n){super(e,"in",n),this.keys=PT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ax extends zt{constructor(e,n){super(e,"not-in",n),this.keys=PT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Se.fromName(s.referenceValue))}class bx extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gp(n)&&Jl(n.arrayValue,this.value)}}class wx extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class Rx extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class Cx extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Jl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function pE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new Ix(r,e,n,s,o,u,f)}function yp(r){const e=Me(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Om(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>oo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>oo(s)).join(",")),e.Ie=n}return e.Ie}function vp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!_x(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!OT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!mE(r.startAt,e.startAt)&&mE(r.endAt,e.endAt)}function Mm(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function xx(r,e,n,s,o,u,f,m){return new kh(r,e,n,s,o,u,f,m)}function _p(r){return new kh(r)}function gE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Dx(r){return r.collectionGroup!==null}function Hl(r){const e=Me(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new qt(nn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new vh(u,s))}),n.has(nn.keyField().canonicalString())||e.Ee.push(new vh(nn.keyField(),s))}return e.Ee}function Oi(r){const e=Me(r);return e.de||(e.de=Nx(e,Hl(r))),e.de}function Nx(r,e){if(r.limitType==="F")return pE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new vh(o.field,u)});const n=r.endAt?new yh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new yh(r.startAt.position,r.startAt.inclusive):null;return pE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Pm(r,e,n){return new kh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Lh(r,e){return vp(Oi(r),Oi(e))&&r.limitType===e.limitType}function VT(r){return`${yp(Oi(r))}|lt:${r.limitType}`}function Ya(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>MT(o)).join(", ")}]`),Ph(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>oo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>oo(o)).join(",")),`Target(${s})`}(Oi(r))}; limitType=${r.limitType})`}function Uh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Se.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Hl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=dE(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,Hl(s),o)||s.endAt&&!function(f,m,p){const g=dE(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,Hl(s),o))}(r,e)}function Ox(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kT(r){return(e,n)=>{let s=!1;for(const o of Hl(r)){const u=Mx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Mx(r,e,n){const s=r.field.isKeyField()?Se.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?ao(p,g):Re(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Tt(Se.comparator);function gr(){return Px}const LT=new Tt(Se.comparator);function Ll(...r){let e=LT;for(const n of r)e=e.insert(n.key,n);return e}function UT(r){let e=LT;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Qs(){return Fl()}function jT(){return Fl()}function Fl(){return new ea(r=>r.toString(),(r,e)=>r.isEqual(e))}const Vx=new Tt(Se.comparator),kx=new qt(Se.comparator);function qe(...r){let e=kx;for(const n of r)e=e.add(n);return e}const Lx=new qt(ke);function Ux(){return Lx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function BT(r){return{integerValue:""+r}}function jx(r,e){return hx(e)?BT(e):Ep(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function Bx(r,e,n){return r instanceof eu?function(o,u){const f={fields:{[AT]:{stringValue:ST},[wT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&pp(u)&&(u=Vh(u)),u&&(f.fields[bT]=u),{mapValue:f}}(n,e):r instanceof tu?qT(r,e):r instanceof nu?HT(r,e):function(o,u){const f=zT(o,u),m=yE(f)+yE(o.Re);return Nm(f)&&Nm(o.Re)?BT(m):Ep(o.serializer,m)}(r,e)}function zx(r,e,n){return r instanceof tu?qT(r,e):r instanceof nu?HT(r,e):n}function zT(r,e){return r instanceof _h?function(s){return Nm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class eu extends jh{}class tu extends jh{constructor(e){super(),this.elements=e}}function qT(r,e){const n=FT(e);for(const s of r.elements)n.some(o=>Pi(o,s))||n.push(s);return{arrayValue:{values:n}}}class nu extends jh{constructor(e){super(),this.elements=e}}function HT(r,e){let n=FT(e);for(const s of r.elements)n=n.filter(o=>!Pi(o,s));return{arrayValue:{values:n}}}class _h extends jh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function yE(r){return It(r.integerValue||r.doubleValue)}function FT(r){return gp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.field=e,this.transform=n}}function Hx(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof tu&&o instanceof tu||s instanceof nu&&o instanceof nu?so(s.elements,o.elements,Pi):s instanceof _h&&o instanceof _h?Pi(s.Re,o.Re):s instanceof eu&&o instanceof eu}(r.transform,e.transform)}class Fx{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bh{}function GT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Tp(r.key,Wn.none()):new hu(r.key,r.data,Wn.none());{const n=r.data,s=bn.empty();let o=new qt(nn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new fs(r.key,s,new Vn(o.toArray()),Wn.none())}}function Gx(r,e,n){r instanceof hu?function(o,u,f){const m=o.value.clone(),p=_E(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,n):r instanceof fs?function(o,u,f){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=_E(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(KT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Gl(r,e,n,s){return r instanceof hu?function(u,f,m,p){if(!nh(u.precondition,f))return m;const g=u.value.clone(),E=EE(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof fs?function(u,f,m,p){if(!nh(u.precondition,f))return m;const g=EE(u.fieldTransforms,p,f),E=f.data;return E.setAll(KT(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,e,n,s):function(u,f,m){return nh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,n)}function Kx(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=zT(s.transform,o||null);u!=null&&(n===null&&(n=bn.empty()),n.set(s.field,u))}return n||null}function vE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&so(s,o,(u,f)=>Hx(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hu extends Bh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fs extends Bh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KT(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function _E(r,e,n){const s=new Map;Ze(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,zx(f,m,n[o]))}return s}function EE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,Bx(u,f,e))}return s}class Tp extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qx extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Gx(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Gl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Gl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=jT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=GT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,(n,s)=>vE(n,s))&&so(this.baseMutations,e.baseMutations,(n,s)=>vE(n,s))}}class Sp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ze(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return Vx}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Sp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ke;function Zx(r){switch(r){case ae.OK:return Re(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Re(15467,{code:r})}}function QT(r){if(r===void 0)return pr("GRPC error has no .code"),ae.UNKNOWN;switch(r){case Pt.OK:return ae.OK;case Pt.CANCELLED:return ae.CANCELLED;case Pt.UNKNOWN:return ae.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ae.INTERNAL;case Pt.UNAVAILABLE:return ae.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ae.NOT_FOUND;case Pt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Pt.ABORTED:return ae.ABORTED;case Pt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Pt.DATA_LOSS:return ae.DATA_LOSS;default:return Re(39323,{code:r})}}(Ke=Pt||(Pt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new ns([4294967295,4294967295],0);function TE(r){const e=yT().encode(r),n=new uT;return n.update(e),new Uint8Array(n.digest())}function SE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ns([n,s],0),new ns([o,u],0)]}class Ap{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ul(`Invalid padding: ${n}`);if(s<0)throw new Ul(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ul(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ul(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ns.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(ns.fromNumber(s)));return o.compare(Wx)===1&&(o=new ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=TE(e),[s,o]=SE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);if(!this.be(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ap(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.pe===0)return;const n=TE(e),[s,o]=SE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(xe.min(),o,new Tt(ke),gr(),qe())}}class fu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new fu(s,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class YT{constructor(e,n){this.targetId=e,this.Ce=n}}class $T{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class AE{constructor(){this.Fe=0,this.Me=bE(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),n=qe(),s=qe();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Re(38017,{changeType:u})}}),new fu(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=bE()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ze(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Jx{constructor(e){this.ze=e,this.je=new Map,this.He=gr(),this.Je=Hc(),this.Ye=Hc(),this.Ze=new Tt(ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(Mm(u))if(s===0){const f=new Se(u.path);this.tt(n,f,fn.newNoDocument(f,xe.min()))}else Ze(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const m=this.ct(e),p=m?this.lt(m,e,f):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=as(s).toUint8Array()}catch(p){if(p instanceof TT)return ro("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Ap(f,o,u)}catch(p){return ro(p instanceof Ul?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&Mm(m.target)){const p=new Se(m.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,fn.newNoDocument(p,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let s=qe();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new zh(e,n,this.Ze,this.He,s);return this.He=gr(),this.Je=Hc(),this.Ye=Hc(),this.Ze=new Tt(ke),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new AE,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new qt(ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new qt(ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new AE),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Hc(){return new Tt(Se.comparator)}function bE(){return new Tt(Se.comparator)}const e2={asc:"ASCENDING",desc:"DESCENDING"},t2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n2={and:"AND",or:"OR"};class i2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(r,e){return r.useProto3Json||Ph(e)?e:{value:e}}function Eh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function r2(r,e){return Eh(r,e.toTimestamp())}function Mi(r){return Ze(!!r,49232),xe.fromTimestamp(function(n){const s=ss(n);return new dt(s.seconds,s.nanos)}(r))}function bp(r,e){return km(r,e).canonicalString()}function km(r,e){const n=function(o){return new gt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function ZT(r){const e=gt.fromString(r);return Ze(nS(e),10190,{key:e.toString()}),e}function Lm(r,e){return bp(r.databaseId,e.path)}function dm(r,e){const n=ZT(e);if(n.get(1)!==r.databaseId.projectId)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Se(JT(n))}function WT(r,e){return bp(r.databaseId,e)}function s2(r){const e=ZT(r);return e.length===4?gt.emptyPath():JT(e)}function Um(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function JT(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function wE(r,e,n){return{name:Lm(r,e),fields:n.value.mapValue.fields}}function a2(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Re(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(Ze(E===void 0||typeof E=="string",58123),sn.fromBase64String(E||"")):(Ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),sn.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?ae.UNKNOWN:QT(g.code);return new Ee(E,g.message||"")}(f);n=new $T(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=dm(r,s.document.name),u=Mi(s.document.updateTime),f=s.document.createTime?Mi(s.document.createTime):xe.min(),m=new bn({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new ih(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=dm(r,s.document),u=s.readTime?Mi(s.readTime):xe.min(),f=fn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ih([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=dm(r,s.document),u=s.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new Xx(o,u),m=s.targetId;n=new YT(m,f)}}return n}function o2(r,e){let n;if(e instanceof hu)n={update:wE(r,e.key,e.value)};else if(e instanceof Tp)n={delete:Lm(r,e.key)};else if(e instanceof fs)n={update:wE(r,e.key,e.data),updateMask:g2(e.fieldMask)};else{if(!(e instanceof Qx))return Re(16599,{ft:e.type});n={verify:Lm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof eu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof tu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof nu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof _h)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Re(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:r2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Re(27497)}(r,e.precondition)),n}function l2(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Mi(o.updateTime):Mi(u);return f.isEqual(xe.min())&&(f=Mi(u)),new Fx(f,o.transformResults||[])}(n,e))):[]}function u2(r,e){return{documents:[WT(r,e.path)]}}function c2(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=WT(r,o);const u=function(g){if(g.length!==0)return tS(Vi.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(A){return{field:$a(A.field),direction:d2(A.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Vm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function h2(r){let e=s2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ze(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(w){const A=eS(w);return A instanceof Vi&&NT(A)?A.getFilters():[A]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(A=>function(D){return new vh(Xa(D.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(A))}(n.orderBy));let m=null;n.limit&&(m=function(w){let A;return A=typeof w=="object"?w.value:w,Ph(A)?null:A}(n.limit));let p=null;n.startAt&&(p=function(w){const A=!!w.before,k=w.values||[];return new yh(k,A)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const A=!w.before,k=w.values||[];return new yh(k,A)}(n.endAt)),xx(e,o,f,u,m,"F",p,g)}function f2(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eS(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xa(n.unaryFilter.field);return zt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Xa(n.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Xa(n.unaryFilter.field);return zt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Xa(n.unaryFilter.field);return zt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(r):r.fieldFilter!==void 0?function(n){return zt.create(Xa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(s=>eS(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(r):Re(30097,{filter:r})}function d2(r){return e2[r]}function m2(r){return t2[r]}function p2(r){return n2[r]}function $a(r){return{fieldPath:r.canonicalString()}}function Xa(r){return nn.fromServerFormat(r.fieldPath)}function tS(r){return r instanceof zt?function(n){if(n.op==="=="){if(fE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(hE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(hE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:m2(n.op),value:n.value}}}(r):r instanceof Vi?function(n){const s=n.getFilters().map(o=>tS(o));return s.length===1?s[0]:{compositeFilter:{op:p2(n.op),filters:s}}}(r):Re(54877,{filter:r})}function g2(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,s,o,u=xe.min(),f=xe.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.wt=e}}function v2(r){const e=h2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.Cn=new E2}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(rs.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class E2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qt(gt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iS=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(iS,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new lo(0)}static lr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LruGarbageCollector",T2=1048576;function IE([r,e],[n,s]){const o=ke(r,n);return o===0?ke(e,s):o}class S2{constructor(e){this.Er=e,this.buffer=new qt(IE),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();IE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){pe(CE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?pe(CE,"Ignoring IndexedDB error during garbage collection: ",n):await So(n)}await this.mr(3e5)})}}class b2{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Mh.le);const s=new S2(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(RE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),Qa()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function w2(r,e){return new b2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Gl(s.mutation,o,Vn.empty(),dt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=qe()){const o=Qs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Ll();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Qs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,qe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=gr();const f=Fl(),m=function(){return Fl()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof fs)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),Gl(E.mutation,g,E.mutation.getFieldMask(),dt.now())):f.set(g.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var w;return m.set(g,new C2(E,(w=f.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Fl();let o=new Tt((f,m)=>f-m),u=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Vn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const w=(o.get(m.batchId)||qe()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,w=jT();E.forEach(A=>{if(!u.has(A)){const k=GT(n.get(A),s.get(A));k!==null&&w.set(A,k),u=u.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,w))}return se.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):se.resolve(Qs());let m=Xl,p=u;return f.next(g=>se.forEach(g,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{p=p.insert(E,A)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,qe())).next(E=>({batchId:m,changes:UT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(s=>{let o=Ll();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(e,u).next(m=>se.forEach(m,p=>{const g=function(w,A){return new kh(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((w,A)=>{f=f.insert(w,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,fn.newInvalidDocument(E)))});let m=Ll();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&Gl(E.mutation,g,Vn.empty(),dt.now()),Uh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return se.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Mi(o.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:v2(o.bundledQuery),readTime:Mi(o.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.overlays=new Tt(Se.comparator),this.Qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Qs();return se.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=Qs(),u=n.length+1,f=new Se(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Tt((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=Qs(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=Qs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return se.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new $x(n,s));let u=this.Qr.get(n);u===void 0&&(u=qe(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.$r=new qt(Yt.Ur),this.Kr=new qt(Yt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Yt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Se(new gt([])),s=new Yt(n,e),o=new Yt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Se(new gt([])),s=new Yt(n,e),o=new Yt(n,e+1);let u=qe();return this.Kr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Yt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Se.comparator(e.key,n.key)||ke(e.Zr,n.Zr)}static Wr(e,n){return ke(e.Zr,n.Zr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new qt(Yt.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Yx(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new Yt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,n){return se.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?mp:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],f=>{const m=this.ei(f.Zr);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qt(ke);return n.forEach(o=>{const u=new Yt(o,0),f=new Yt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{s=s.add(m.Zr)})}),se.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Se.isDocumentKey(u)||(u=u.child(""));const f=new Yt(new Se(u),0);let m=new qt(ke);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},f),se.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ze(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return se.forEach(n.mutations,o=>{const u=new Yt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Yt(n,0),o=this.Xr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.ii=e,this.docs=function(){return new Tt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=gr();const f=n.path,m=new Se(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||ox(ax(E),s)<=0||(o.has(E.key)||Uh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Re(9500)}si(e,n){return se.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new P2(this)}getSize(e){return se.resolve(this.size)}}class P2 extends R2{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),se.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.persistence=e,this.oi=new ea(n=>yp(n),vp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this._i=0,this.ai=new wp,this.targetCount=0,this.ui=lo.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),se.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new lo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Tr(n),se.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.ci={},this.overlays={},this.li=new Mh(0),this.hi=!1,this.hi=!0,this.Pi=new N2,this.referenceDelegate=e(this),this.Ti=new V2(this),this.indexManager=new _2,this.remoteDocumentCache=function(o){return new M2(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new y2(n),this.Ei=new x2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new O2(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){pe("MemoryPersistence","Starting transaction:",e);const o=new k2(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return se.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class k2 extends ux{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.Vi=new wp,this.mi=null}static fi(e){return new Rp(e)}get gi(){if(this.mi)return this.mi;throw Re(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,s=>{const o=Se.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,xe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return se.or([()=>se.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.yi=new ea(s=>fx(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=w2(this,n)}static fi(e,n){return new Th(e,n)}di(){}Ai(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return se.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?se.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(m=>{m||(s++,u.removeEntry(f,xe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}Dr(e,n,s){return se.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=qe(),o=qe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Cp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return gw()?8:cx(dn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new L2;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,f,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Qa()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(Qa()<=ze.DEBUG&&pe("QueryEngine","Query:",Ya(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Qa()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(n))):se.resolve())}ws(e,n){if(gE(n))return se.resolve(null);let s=Oi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Pm(n,null,"F"),s=Oi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=qe(...u);return this.ys.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.vs(n,m);return this.Cs(n,g,f,p.readTime)?this.ws(e,Pm(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,s,o){return gE(n)||o.isEqual(xe.min())?se.resolve(null):this.ys.getDocuments(e,s).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,s,o)?se.resolve(null):(Qa()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ya(n)),this.Fs(e,f,n,sx(o,Xl)).next(m=>m))})}vs(e,n){let s=new qt(kT(e));return n.forEach((o,u)=>{Uh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Qa()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ya(n)),this.ys.getDocumentsMatchingQuery(e,n,rs.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LocalStore",j2=3e8;class B2{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new Tt(ke),this.Os=new ea(u=>yp(u),vp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function z2(r,e,n,s){return new B2(r,e,n,s)}async function sS(r,e){const n=Me(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=qe();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function q2(r,e){const n=Me(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const w=g.batch,A=w.keys();let k=se.resolve();return A.forEach(D=>{k=k.next(()=>E.getEntry(p,D)).next(B=>{const C=g.docVersions.get(D);Ze(C!==null,48541),B.version.compareTo(C)<0&&(w.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),E.addEntry(B)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=qe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function aS(r){const e=Me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function H2(r,e){const n=Me(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,w)=>{const A=o.get(w);if(!A)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,w)));let k=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(sn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,s)),o=o.insert(w,k),function(B,C,j){return B.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=j2?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(A,k,E)&&m.push(n.Ti.updateTargetData(u,k))});let p=gr(),g=qe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(F2(u,f,e.documentUpdates).next(E=>{p=E.qs,g=E.Qs})),!s.isEqual(xe.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(w=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return se.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.xs=o,u))}function F2(r,e,n){let s=qe(),o=qe();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=gr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):pe(Ip,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:f,Qs:o}})}function G2(r,e){const n=Me(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=mp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function K2(r,e){const n=Me(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,se.resolve(o)):n.Ti.allocateTargetId(s).next(f=>(o=new Zr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function jm(r,e,n){const s=Me(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Ao(f))throw f;pe(Ip,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function xE(r,e,n){const s=Me(r);let o=xe.min(),u=qe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const w=Me(p),A=w.Os.get(E);return A!==void 0?se.resolve(w.xs.get(A)):w.Ti.getTargetData(g,E)}(s,f,Oi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?o:xe.min(),n?u:qe())).next(m=>(Q2(s,Ox(e),m),{documents:m,$s:u})))}function Q2(r,e,n){let s=r.Ns.get(e)||xe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class DE{constructor(){this.activeTargetIds=Ux()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y2{constructor(){this.xo=new DE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new DE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="ConnectivityMonitor";class OE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pe(NE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){pe(NE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=null;function Bm(){return Fc===null?Fc=function(){return 268435456+Math.round(2147483648*Math.random())}():Fc++,"0x"+Fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",X2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===ph?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const f=Bm(),m=this.jo(e,n.toUriEncodedString());pe(mm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),E=yo(g);return this.Jo(e,m,p,s,E).then(w=>(pe(mm,`Received RPC '${e}' ${f}: `,w),w),w=>{throw ro(mm,`RPC '${e}' ${f} failed with error: `,w,"url: ",m,"request:",s),w})}Yo(e,n,s,o,u,f){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=X2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class J2 extends Z2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Bm();return new Promise((m,p)=>{const g=new cT;g.setWithCredentials(!0),g.listenOnce(hT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Jc.NO_ERROR:const w=g.getResponseJson();pe(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),m(w);break;case Jc.TIMEOUT:pe(cn,`RPC '${e}' ${f} timed out`),p(new Ee(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const A=g.getStatus();if(pe(cn,`RPC '${e}' ${f} failed with status:`,A,"response text:",g.getResponseText()),A>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const D=k==null?void 0:k.error;if(D&&D.status&&D.message){const B=function(j){const K=j.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(K)>=0?K:ae.UNKNOWN}(D.status);p(new Ee(B,D.message))}else p(new Ee(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Ee(ae.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{h_:e,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{pe(cn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);pe(cn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)})}I_(e,n,s){const o=Bm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=mT(),m=dT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");pe(cn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=f.createWebChannel(E,p);this.E_(w);let A=!1,k=!1;const D=new W2({Zo:C=>{k?pe(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(A||(pe(cn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),pe(cn,`RPC '${e}' stream ${o} sending:`,C),w.send(C))},Xo:()=>w.close()}),B=(C,j,K)=>{C.listen(j,Q=>{try{K(Q)}catch(Z){setTimeout(()=>{throw Z},0)}})};return B(w,kl.EventType.OPEN,()=>{k||(pe(cn,`RPC '${e}' stream ${o} transport opened.`),D.__())}),B(w,kl.EventType.CLOSE,()=>{k||(k=!0,pe(cn,`RPC '${e}' stream ${o} transport closed`),D.u_(),this.d_(w))}),B(w,kl.EventType.ERROR,C=>{k||(k=!0,ro(cn,`RPC '${e}' stream ${o} transport errored. Name:`,C.name,"Message:",C.message),D.u_(new Ee(ae.UNAVAILABLE,"The operation could not be completed")))}),B(w,kl.EventType.MESSAGE,C=>{var j;if(!k){const K=C.data[0];Ze(!!K,16349);const Q=K,Z=(Q==null?void 0:Q.error)||((j=Q[0])===null||j===void 0?void 0:j.error);if(Z){pe(cn,`RPC '${e}' stream ${o} received error:`,Z);const Y=Z.status;let ue=function(I){const V=Pt[I];if(V!==void 0)return QT(V)}(Y),N=Z.message;ue===void 0&&(ue=ae.INTERNAL,N="Unknown error status: "+Y+" with message "+Z.message),k=!0,D.u_(new Ee(ue,N)),w.close()}else pe(cn,`RPC '${e}' stream ${o} received:`,K),D.c_(K)}}),B(m,fT.STAT_EVENT,C=>{C.stat===Im.PROXY?pe(cn,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===Im.NOPROXY&&pe(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.a_()},0),D}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r){return new i2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="PersistentStream";class lS{constructor(e,n,s,o,u,f,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new oS(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new Ee(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return pe(ME,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(pe(ME,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eD extends lS{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=a2(this.serializer,e),s=function(u){if(!("targetChange"in u))return xe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xe.min():f.readTime?Mi(f.readTime):xe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=Um(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Mm(p)?{documents:u2(u,p)}:{query:c2(u,p).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=XT(u,f.resumeToken);const g=Vm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(xe.min())>0){m.readTime=Eh(u,f.snapshotVersion.toTimestamp());const g=Vm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=f2(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=Um(this.serializer),n.removeTarget=e,this.Q_(n)}}class tD extends lS{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=l2(e.writeResults,e.commitTime),s=Mi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=Um(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>o2(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{}class iD extends nD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,km(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(ae.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(e,km(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ee(ae.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class rD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(pr(n),this.ua=!1):pe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class sD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{s.enqueueAndForget(async()=>{ta(this)&&(pe(Ws,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.da.add(4),await du(g),g.Va.set("Unknown"),g.da.delete(4),await Hh(g)}(this))})}),this.Va=new rD(s,o)}}async function Hh(r){if(ta(r))for(const e of r.Aa)await e(!0)}async function du(r){for(const e of r.Aa)await e(!1)}function uS(r,e){const n=Me(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Op(n)?Np(n):bo(n).N_()&&Dp(n,e))}function xp(r,e){const n=Me(r),s=bo(n);n.Ea.delete(e),s.N_()&&cS(n,e),n.Ea.size===0&&(s.N_()?s.k_():ta(n)&&n.Va.set("Unknown"))}function Dp(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(r).Z_(e)}function cS(r,e){r.ma.Ke(e),bo(r).X_(e)}function Np(r){r.ma=new Jx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),bo(r).start(),r.Va.ca()}function Op(r){return ta(r)&&!bo(r).O_()&&r.Ea.size>0}function ta(r){return Me(r).da.size===0}function hS(r){r.ma=void 0}async function aD(r){r.Va.set("Online")}async function oD(r){r.Ea.forEach((e,n)=>{Dp(r,e)})}async function lD(r,e){hS(r),Op(r)?(r.Va.Pa(e),Np(r)):r.Va.set("Unknown")}async function uD(r,e,n){if(r.Va.set("Online"),e instanceof $T&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){pe(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sh(r,s)}else if(e instanceof ih?r.ma.Xe(e):e instanceof YT?r.ma.ot(e):r.ma.nt(e),!n.isEqual(xe.min()))try{const s=await aS(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ea.get(g);E&&u.Ea.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.Ea.get(p);if(!E)return;u.Ea.set(p,E.withResumeToken(sn.EMPTY_BYTE_STRING,E.snapshotVersion)),cS(u,p);const w=new Zr(E.target,p,g,E.sequenceNumber);Dp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){pe(Ws,"Failed to raise snapshot:",s),await Sh(r,s)}}async function Sh(r,e,n){if(!Ao(e))throw e;r.da.add(1),await du(r),r.Va.set("Offline"),n||(n=()=>aS(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{pe(Ws,"Retrying IndexedDB access"),await n(),r.da.delete(1),await Hh(r)})}function fS(r,e){return e().catch(n=>Sh(r,n,e))}async function Fh(r){const e=Me(r),n=ls(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:mp;for(;cD(e);)try{const o=await G2(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,hD(e,o)}catch(o){await Sh(e,o)}dS(e)&&mS(e)}function cD(r){return ta(r)&&r.Ia.length<10}function hD(r,e){r.Ia.push(e);const n=ls(r);n.N_()&&n.ea&&n.ta(e.mutations)}function dS(r){return ta(r)&&!ls(r).O_()&&r.Ia.length>0}function mS(r){ls(r).start()}async function fD(r){ls(r).ia()}async function dD(r){const e=ls(r);for(const n of r.Ia)e.ta(n.mutations)}async function mD(r,e,n){const s=r.Ia.shift(),o=Sp.from(s,e,n);await fS(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Fh(r)}async function pD(r,e){e&&ls(r).ea&&await async function(s,o){if(function(f){return Zx(f)&&f!==ae.ABORTED}(o.code)){const u=s.Ia.shift();ls(s).L_(),await fS(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Fh(s)}}(r,e),dS(r)&&mS(r)}async function PE(r,e){const n=Me(r);n.asyncQueue.verifyOperationInProgress(),pe(Ws,"RemoteStore received new credentials");const s=ta(n);n.da.add(3),await du(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Hh(n)}async function gD(r,e){const n=Me(r);e?(n.da.delete(2),await Hh(n)):e||(n.da.add(2),await du(n),n.Va.set("Unknown"))}function bo(r){return r.fa||(r.fa=function(n,s,o){const u=Me(n);return u.oa(),new eD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:aD.bind(null,r),n_:oD.bind(null,r),i_:lD.bind(null,r),Y_:uD.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Op(r)?Np(r):r.Va.set("Unknown")):(await r.fa.stop(),hS(r))})),r.fa}function ls(r){return r.ga||(r.ga=function(n,s,o){const u=Me(n);return u.oa(),new tD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:fD.bind(null,r),i_:pD.bind(null,r),na:dD.bind(null,r),ra:mD.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Fh(r)):(await r.ga.stop(),r.Ia.length>0&&(pe(Ws,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Mp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(r,e){if(pr("AsyncQueue",`${e}: ${r}`),Ao(r))return new Ee(ae.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Se.comparator(n.key,s.key):(n,s)=>Se.comparator(n.key,s.key),this.keyedMap=Ll(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new to;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.pa=new Tt(Se.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Re(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class uo{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new uo(e,n,to.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class vD{constructor(){this.queries=kE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=kE(),u.forEach((f,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new Ee(ae.ABORTED,"Firestore shutting down"))}}function kE(){return new ea(r=>VT(r),Lh)}async function pS(r,e){const n=Me(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new yD,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Pp(f,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Vp(n)}async function gS(r,e){const n=Me(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function _D(r,e){const n=Me(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(s=!0);f.ba=o}}s&&Vp(n)}function ED(r,e,n){const s=Me(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Vp(r){r.Ca.forEach(e=>{e.next()})}var zm,LE;(LE=zm||(zm={})).xa="default",LE.Cache="cache";class yS{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.key=e}}class _S{constructor(e){this.key=e}}class TD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.Za=kT(e),this.Xa=new to(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new VE,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const A=o.get(E),k=Uh(this.query,w)?w:null,D=!!A&&this.mutatedKeys.has(A.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let C=!1;A&&k?A.data.isEqual(k.data)?D!==B&&(s.track({type:3,doc:k}),C=!0):this.ru(A,k)||(s.track({type:2,doc:k}),C=!0,(p&&this.Za(k,p)>0||g&&this.Za(k,g)<0)&&(m=!0)):!A&&k?(s.track({type:0,doc:k}),C=!0):A&&!k&&(s.track({type:1,doc:A}),C=!0,(p||g)&&(m=!0)),C&&(k?(f=f.add(k),u=B?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:f,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((E,w)=>function(k,D){const B=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:C})}};return B(k)-B(D)}(E.type,w.type)||this.Za(E.doc,w.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,f.length!==0||g?{snapshot:new uo(this.query,e.Xa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new VE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new _S(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new vS(s))}),n}au(e){this.Ha=e.$s,this.Ya=qe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return uo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const kp="SyncEngine";class SD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class AD{constructor(e){this.key=e,this.cu=!1}}class bD{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new ea(m=>VT(m),Lh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Tt(Se.comparator),this.Eu=new Map,this.du=new wp,this.Au={},this.Ru=new Map,this.Vu=lo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function wD(r,e,n=!0){const s=wS(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await ES(s,e,n,!0),o}async function RD(r,e){const n=wS(r);await ES(n,e,!0,!1)}async function ES(r,e,n,s){const o=await K2(r.localStore,Oi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await CD(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&uS(r.remoteStore,o),m}async function CD(r,e,n,s,o){r.fu=(w,A,k)=>async function(B,C,j,K){let Q=C.view.tu(j);Q.Cs&&(Q=await xE(B.localStore,C.query,!1).then(({documents:N})=>C.view.tu(N,Q)));const Z=K&&K.targetChanges.get(C.targetId),Y=K&&K.targetMismatches.get(C.targetId)!=null,ue=C.view.applyChanges(Q,B.isPrimaryClient,Z,Y);return jE(B,C.targetId,ue.ou),ue.snapshot}(r,w,A,k);const u=await xE(r.localStore,e,!0),f=new TD(e,u.$s),m=f.tu(u.documents),p=fu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,p);jE(r,n,g.ou);const E=new SD(e,n,f);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),g.snapshot}async function ID(r,e,n){const s=Me(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(f=>!Lh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await jm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&xp(s.remoteStore,o.targetId),qm(s,o.targetId)}).catch(So)):(qm(s,o.targetId),await jm(s.localStore,o.targetId,!0))}async function xD(r,e){const n=Me(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),xp(n.remoteStore,s.targetId))}async function DD(r,e,n){const s=LD(r);try{const o=await function(f,m){const p=Me(f),g=dt.now(),E=m.reduce((k,D)=>k.add(D.key),qe());let w,A;return p.persistence.runTransaction("Locally write mutations","readwrite",k=>{let D=gr(),B=qe();return p.Bs.getEntries(k,E).next(C=>{D=C,D.forEach((j,K)=>{K.isValidDocument()||(B=B.add(j))})}).next(()=>p.localDocuments.getOverlayedDocuments(k,D)).next(C=>{w=C;const j=[];for(const K of m){const Q=Kx(K,w.get(K.key).overlayedDocument);Q!=null&&j.push(new fs(K.key,Q,IT(Q.value.mapValue),Wn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,g,j,m)}).next(C=>{A=C;const j=C.applyToLocalDocumentSet(w,B);return p.documentOverlayCache.saveOverlays(k,C.batchId,j)})}).then(()=>({batchId:A.batchId,changes:UT(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Au[f.currentUser.toKey()];g||(g=new Tt(ke)),g=g.insert(m,p),f.Au[f.currentUser.toKey()]=g}(s,o.batchId,n),await mu(s,o.changes),await Fh(s.remoteStore)}catch(o){const u=Pp(o,"Failed to persist write");n.reject(u)}}async function TS(r,e){const n=Me(r);try{const s=await H2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Ze(f.cu,14607):o.removedDocuments.size>0&&(Ze(f.cu,42227),f.cu=!1))}),await mu(n,s,e)}catch(s){await So(s)}}function UE(r,e,n){const s=Me(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,f)=>{const m=f.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Me(f);p.onlineState=m;let g=!1;p.queries.forEach((E,w)=>{for(const A of w.Sa)A.Fa(m)&&(g=!0)}),g&&Vp(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ND(r,e,n){const s=Me(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let f=new Tt(Se.comparator);f=f.insert(u,fn.newNoDocument(u,xe.min()));const m=qe().add(u),p=new zh(xe.min(),new Map,new Tt(ke),f,m);await TS(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Lp(s)}else await jm(s.localStore,e,!1).then(()=>qm(s,e,n)).catch(So)}async function OD(r,e){const n=Me(r),s=e.batch.batchId;try{const o=await q2(n.localStore,e);AS(n,s,null),SS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await mu(n,o)}catch(o){await So(o)}}async function MD(r,e,n){const s=Me(r);try{const o=await function(f,m){const p=Me(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(Ze(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);AS(s,e,n),SS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await mu(s,o)}catch(o){await So(o)}}function SS(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function AS(r,e,n){const s=Me(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function qm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||bS(r,s)})}function bS(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(xp(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Lp(r))}function jE(r,e,n){for(const s of n)s instanceof vS?(r.du.addReference(s.key,e),PD(r,s)):s instanceof _S?(pe(kp,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||bS(r,s.key)):Re(19791,{pu:s})}function PD(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(pe(kp,"New document in limbo: "+n),r.Tu.add(s),Lp(r))}function Lp(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new Se(gt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new AD(n)),r.Iu=r.Iu.insert(n,s),uS(r.remoteStore,new Zr(Oi(_p(n.path)),s,"TargetPurposeLimboResolution",Mh.le))}}async function mu(r,e,n){const s=Me(r),o=[],u=[],f=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{f.push(s.fu(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Cp.Rs(p.targetId,g);u.push(w)}}))}),await Promise.all(f),s.lu.Y_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>se.forEach(g,A=>se.forEach(A.ds,k=>E.persistence.referenceDelegate.addReference(w,A.targetId,k)).next(()=>se.forEach(A.As,k=>E.persistence.referenceDelegate.removeReference(w,A.targetId,k)))))}catch(w){if(!Ao(w))throw w;pe(Ip,"Failed to update sequence numbers: "+w)}for(const w of g){const A=w.targetId;if(!w.fromCache){const k=E.xs.get(A),D=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(D);E.xs=E.xs.insert(A,B)}}}(s.localStore,u))}async function VD(r,e){const n=Me(r);if(!n.currentUser.isEqual(e)){pe(kp,"User change. New user:",e.toKey());const s=await sS(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new Ee(ae.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mu(n,s.ks)}}function kD(r,e){const n=Me(r),s=n.Eu.get(e);if(s&&s.cu)return qe().add(s.key);{let o=qe();const u=n.Pu.get(e);if(!u)return o;for(const f of u){const m=n.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function wS(r){const e=Me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ND.bind(null,e),e.lu.Y_=_D.bind(null,e.eventManager),e.lu.gu=ED.bind(null,e.eventManager),e}function LD(r){const e=Me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MD.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return z2(this.persistence,new U2,e.initialUser,this.serializer)}Su(e){return new rS(Rp.fi,this.serializer)}bu(e){return new Y2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class UD extends Ah{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ze(this.persistence.referenceDelegate instanceof Th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new A2(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new rS(s=>Th.fi(s,n),this.serializer)}}class Hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>UE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=VD.bind(null,this.syncEngine),await gD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vD}()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),s=function(u){return new J2(u)}(e.databaseInfo);return function(u,f,m,p){return new iD(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new sD(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>UE(this.syncEngine,n,0),function(){return OE.C()?new OE:new $2}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const w=new bD(o,u,f,m,p,g);return E&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);pe(Ws,"RemoteStore shutting down."),u.da.add(5),await du(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hm.provider={build:()=>new Hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class jD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=vT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{pe(us,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(pe(us,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Pp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function gm(r,e){r.asyncQueue.verifyOperationInProgress(),pe(us,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await sS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function BE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await BD(r);pe(us,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>PE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>PE(e.remoteStore,o)),r._onlineComponents=e}async function BD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(us,"Using user provided OfflineComponentProvider");try{await gm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await gm(r,new Ah)}}else pe(us,"Using default OfflineComponentProvider"),await gm(r,new UD(void 0));return r._offlineComponents}async function CS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(us,"Using user provided OnlineComponentProvider"),await BE(r,r._uninitializedComponentsProvider._online)):(pe(us,"Using default OnlineComponentProvider"),await BE(r,new Hm))),r._onlineComponents}function zD(r){return CS(r).then(e=>e.syncEngine)}async function IS(r){const e=await CS(r),n=e.eventManager;return n.onListen=wD.bind(null,e.syncEngine),n.onUnlisten=ID.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xD.bind(null,e.syncEngine),n}function qD(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new RS({next:A=>{E.xu(),f.enqueueAndForget(()=>gS(u,w));const k=A.docs.has(m);!k&&A.fromCache?g.reject(new Ee(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&A.fromCache&&p&&p.source==="server"?g.reject(new Ee(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),w=new yS(_p(m.path),E,{includeMetadataChanges:!0,Qa:!0});return pS(u,w)}(await IS(r),r.asyncQueue,e,n,s)),s.promise}function HD(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new RS({next:A=>{E.xu(),f.enqueueAndForget(()=>gS(u,w)),A.fromCache&&p.source==="server"?g.reject(new Ee(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),w=new yS(m,E,{includeMetadataChanges:!0,Qa:!0});return pS(u,w)}(await IS(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,e,n){if(!n)throw new Ee(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FD(r,e,n,s){if(e===!0&&s===!0)throw new Ee(ae.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function qE(r){if(!Se.isDocumentKey(r))throw new Ee(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function HE(r){if(Se.isDocumentKey(r))throw new Ee(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Up(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Re(12329,{type:typeof r})}function ui(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ee(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Up(r);throw new Ee(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firestore.googleapis.com",FE=!0;class GE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NS,this.ssl=FE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:FE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new XI;switch(s.type){case"firstParty":return new ex(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=zE.get(n);s&&(pe("ComponentProvider","Removing Datastore"),zE.delete(n),s.terminate())}(this),Promise.resolve()}}function GD(r,e,n,s={}){var o;r=ui(r,Gh);const u=yo(e),f=r._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(S0(`https://${p}`),A0("Firestore",!0)),f.host!==NS&&f.host!==p&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:s});if(!Ys(g,m)&&(r._setSettings(g),s.mockUserToken)){let E,w;if(typeof s.mockUserToken=="string")E=s.mockUserToken,w=hn.MOCK_USER;else{E=ow(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Ee(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new hn(A)}r._authCredentials=new ZI(new gT(E,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Kh(this.firestore,e,this._query)}}class wn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class is extends Kh{constructor(e,n,s){super(e,n,_p(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Se(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function ot(r,e,...n){if(r=rn(r),DS("collection","path",e),r instanceof Gh){const s=gt.fromString(e,...n);return HE(s),new is(r,null,s)}{if(!(r instanceof wn||r instanceof is))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...n));return HE(s),new is(r.firestore,null,s)}}function $t(r,e,...n){if(r=rn(r),arguments.length===1&&(e=vT.newId()),DS("doc","path",e),r instanceof Gh){const s=gt.fromString(e,...n);return qE(s),new wn(r,null,new Se(s))}{if(!(r instanceof wn||r instanceof is))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...n));return qE(s),new wn(r.firestore,r instanceof is?r.converter:null,new Se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="AsyncQueue";class QE{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new oS(this,"async_queue_retry"),this.rc=()=>{const s=pm();s&&pe(KE,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new hr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ao(e))throw e;pe(KE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,pr("INTERNAL UNHANDLED ERROR: ",YE(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=Mp.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Re(47125,{cc:YE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function YE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class na extends Gh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new QE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QE(e),this._firestoreClient=void 0,await e}}}function KD(r,e){const n=typeof r=="object"?r:C0(),s=typeof r=="string"?r:ph,o=ip(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=sw("firestore");u&&GD(o,...u)}return o}function jp(r){if(r._terminated)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||QD(r),r._firestoreClient}function QD(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,g,E){return new px(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,xS(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new jD(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new co(sn.fromBase64String(e))}catch(n){throw new Ee(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new co(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^__.*__$/;class $D{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class OS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ic:r})}}class qp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return bh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(MS(this.Ic)&&YD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class XD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||qh(e)}bc(e,n,s,o=!1){return new qp({Ic:e,methodName:n,wc:s,path:nn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hp(r){const e=r._freezeSettings(),n=qh(r._databaseId);return new XD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function PS(r,e,n,s,o,u={}){const f=r.bc(u.merge||u.mergeFields?2:0,e,n,o);Gp("Data must be an object, but it was:",f,s);const m=VS(s,f);let p,g;if(u.merge)p=new Vn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const A=Fm(e,w,n);if(!f.contains(A))throw new Ee(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);LS(E,A)||E.push(A)}p=new Vn(E),g=f.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=f.fieldTransforms;return new $D(new bn(m),p,g)}class $h extends Yh{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}class Fp extends Yh{_toFieldTransform(e){return new qx(e.path,new eu)}isEqual(e){return e instanceof Fp}}function ZD(r,e,n,s){const o=r.bc(1,e,n);Gp("Data must be an object, but it was:",o,s);const u=[],f=bn.empty();hs(s,(p,g)=>{const E=Kp(e,p,n);g=rn(g);const w=o.mc(E);if(g instanceof $h)u.push(E);else{const A=Xh(g,w);A!=null&&(u.push(E),f.set(E,A))}});const m=new Vn(u);return new OS(f,m,o.fieldTransforms)}function WD(r,e,n,s,o,u){const f=r.bc(1,e,n),m=[Fm(e,s,n)],p=[o];if(u.length%2!=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Fm(e,u[A])),p.push(u[A+1]);const g=[],E=bn.empty();for(let A=m.length-1;A>=0;--A)if(!LS(g,m[A])){const k=m[A];let D=p[A];D=rn(D);const B=f.mc(k);if(D instanceof $h)g.push(k);else{const C=Xh(D,B);C!=null&&(g.push(k),E.set(k,C))}}const w=new Vn(g);return new OS(E,w,f.fieldTransforms)}function Xh(r,e){if(kS(r=rn(r)))return Gp("Unsupported field value:",e,r),VS(r,e);if(r instanceof Yh)return function(s,o){if(!MS(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Xh(m,o.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=rn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=dt.fromDate(s);return{timestampValue:Eh(o.serializer,u)}}if(s instanceof dt){const u=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,u)}}if(s instanceof Bp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof co)return{bytesValue:XT(o.serializer,s._byteString)};if(s instanceof wn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof zp)return function(f,m){return{mapValue:{fields:{[RT]:{stringValue:CT},[gh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Ep(m.serializer,g)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${Up(s)}`)}(r,e)}function VS(r,e){const n={};return ET(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(r,(s,o)=>{const u=Xh(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function kS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof Bp||r instanceof co||r instanceof wn||r instanceof Yh||r instanceof zp)}function Gp(r,e,n){if(!kS(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Up(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function Fm(r,e,n){if((e=rn(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return Kp(r,e);throw bh("Field path arguments must be of type string or ",r,!1,void 0,n)}const JD=new RegExp("[~\\*/\\[\\]]");function Kp(r,e,n){if(e.search(JD)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Qh(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function bh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new Ee(ae.INVALID_ARGUMENT,m+r+p)}function LS(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends US{data(){return super.data()}}function jS(r,e){return typeof e=="string"?Kp(r,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ee(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nN{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return hs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[gh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>It(f.doubleValue));return new zp(u)}convertGeoPoint(e){return new Bp(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Vh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=ss(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=gt.fromString(e);Ze(nS(s),9688,{name:e});const o=new Wl(s.get(1),s.get(3)),u=new Se(s.popFirst(5));return o.isEqual(n)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zS extends US{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(jS("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class rh extends zS{data(e={}){return super.data(e)}}class iN{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new jl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:rN(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(r){r=ui(r,wn);const e=ui(r.firestore,na);return qD(jp(e),r._key).then(n=>sN(e,r,n))}class qS extends nN{constructor(e){super(),this.firestore=e}convertBytes(e){return new co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function Et(r){r=ui(r,Kh);const e=ui(r.firestore,na),n=jp(e),s=new qS(e);return tN(r._query),HD(n,r._query).then(o=>new iN(e,s,r,o))}function Gm(r,e,n){r=ui(r,wn);const s=ui(r.firestore,na),o=BS(r.converter,e,n);return Wh(s,[PS(Hp(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Wn.none())])}function Qp(r,e,n,...s){r=ui(r,wn);const o=ui(r.firestore,na),u=Hp(o);let f;return f=typeof(e=rn(e))=="string"||e instanceof Qh?WD(u,"updateDoc",r._key,e,n,s):ZD(u,"updateDoc",r._key,e),Wh(o,[f.toMutation(r._key,Wn.exists(!0))])}function pu(r){return Wh(ui(r.firestore,na),[new Tp(r._key,Wn.none())])}function Zh(r,e){const n=ui(r.firestore,na),s=$t(r),o=BS(r.converter,e);return Wh(n,[PS(Hp(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Wn.exists(!1))]).then(()=>s)}function Wh(r,e){return function(s,o){const u=new hr;return s.asyncQueue.enqueueAndForget(async()=>DD(await zD(s),o,u)),u.promise}(jp(r),e)}function sN(r,e,n){const s=n.docs.get(e._key),o=new qS(r);return new zS(r,o,e._key,s,new jl(n.hasPendingWrites,n.fromCache),e.converter)}function wh(){return new Fp("serverTimestamp")}(function(e,n=!0){(function(o){To=o})(vo),no(new $s("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new na(new WI(s.getProvider("auth-internal")),new tx(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ee(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),es(J_,eE,e),es(J_,eE,"esm2017")})();const aN={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},HS=R0(aN),Yp=KI(HS),Oe=KD(HS),oN=()=>{const[r,e]=M.useState(""),[n,s]=M.useState(""),[o,u]=M.useState(""),f=go(),m=kn(),p=async()=>{var E,w;const g=((w=(E=m.state)==null?void 0:E.from)==null?void 0:w.pathname)||"/dashboard";try{await NC(Yp,r,n),u(" ..."),setTimeout(()=>f(g,{replace:!0}),600)}catch(A){u(" : "+A.message)}};return T.jsxs("div",{style:{padding:"2em",maxWidth:"400px",margin:"auto"},children:[T.jsx("h2",{children:""}),T.jsx("input",{type:"email",placeholder:"",value:r,onChange:g=>e(g.target.value)}),T.jsx("input",{type:"password",placeholder:"",value:n,onChange:g=>s(g.target.value)}),T.jsx("button",{onClick:p,children:""}),T.jsx("div",{style:{marginTop:"1em",color:"red"},children:o})]})},lN=()=>{const r=go(),[e,n]=M.useState([]),s=m=>m?m.seconds?new Date(m.seconds*1e3).toLocaleDateString():String(m):"-",o=()=>{VC(Yp).then(()=>r("/login")).catch(m=>console.error(":",m))},u=async()=>{try{const p=(await Et(ot(Oe,"events"))).docs.map(g=>({id:g.id,...g.data()}));n(p)}catch(m){console.error(":",m)}};M.useEffect(()=>{u()},[]);const f=async m=>{if(window.confirm(""))try{await pu($t(Oe,"events",m)),n(e.filter(p=>p.id!==m))}catch(p){console.error(":",p)}};return T.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[T.jsx("h2",{children:""}),T.jsx("p",{children:""}),T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[T.jsx("h3",{style:{marginTop:0},children:""}),T.jsx("p",{style:{marginTop:0},children:""}),T.jsx(ht,{to:"/create-event",children:" "})]}),T.jsx("h3",{style:{marginTop:"1.6em"},children:" "}),e.length===0?T.jsx("p",{children:""}):T.jsx("div",{style:{display:"grid",gap:"1em"},children:e.map(m=>T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[T.jsx("h4",{style:{marginTop:0,marginBottom:"0.4em"},children:m.name}),T.jsxs("p",{style:{marginTop:0},children:[": ",s(m.startDate),"  ",s(m.endDate)]}),T.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[T.jsx(ht,{to:`/events/${m.id}/edit`,state:{tab:"seasons"},children:" /  / "}),T.jsx(ht,{to:`/events/${m.id}/edit`,state:{tab:"participants"},children:""}),T.jsx(ht,{to:`/events/${m.id}/edit`,state:{tab:"scores"},children:""}),T.jsx(ht,{to:`/score-summary/${m.id}`,children:""}),T.jsx("button",{type:"button",onClick:()=>f(m.id),children:" "})]})]},m.id))}),T.jsx("div",{style:{marginTop:"2em"},children:T.jsx("button",{type:"button",onClick:o,children:""})}),T.jsx("div",{style:{marginTop:"1em"},children:T.jsx(ht,{to:"/",children:" Home"})})]})};function uN(){const[r,e]=M.useState(""),[n,s]=M.useState(""),[o,u]=M.useState(""),[f,m]=M.useState(""),p=go(),g=async E=>{E.preventDefault();try{await Zh(ot(Oe,"events"),{name:r,startDate:dt.fromDate(new Date(n)),endDate:dt.fromDate(new Date(o)),createdAt:wh()}),m(" "),e(""),s(""),u(""),p("/dashboard")}catch(w){console.error(w),m(" ")}};return T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("h2",{children:" "}),T.jsx(ht,{to:"/dashboard",children:" "}),T.jsxs("form",{onSubmit:g,children:[T.jsx("input",{type:"text",placeholder:"",value:r,onChange:E=>e(E.target.value),required:!0}),T.jsx("input",{type:"date",value:n,onChange:E=>s(E.target.value),required:!0}),T.jsx("input",{type:"date",value:o,onChange:E=>u(E.target.value),required:!0}),T.jsx("button",{type:"submit",children:""})]}),T.jsx("p",{children:f})]})}const $E=r=>{if(!r)return"";const e=typeof r.toDate=="function"?r.toDate():new Date(r);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${o}`},cN=({eventId:r})=>{const[e,n]=M.useState(""),[s,o]=M.useState(""),[u,f]=M.useState(""),[m,p]=M.useState(""),[g,E]=M.useState([]),[w,A]=M.useState(""),[k,D]=M.useState({name:"",startDate:"",endDate:""}),B=M.useCallback(async()=>{try{const ue=(await Et(ot(Oe,"events",r,"seasons"))).docs.map(N=>({id:N.id,...N.data()}));E(ue)}catch(Y){console.error(":",Y)}},[r]);M.useEffect(()=>{B()},[B]);const C=async Y=>{Y.preventDefault();try{await Zh(ot(Oe,"events",r,"seasons"),{name:e,startDate:dt.fromDate(new Date(s)),endDate:dt.fromDate(new Date(u))}),p(" "),n(""),o(""),f(""),B()}catch(ue){console.error(ue),p(" ")}},j=async Y=>{if(window.confirm(""))try{await pu($t(Oe,"events",r,"seasons",Y)),E(N=>N.filter(R=>R.id!==Y))}catch(N){console.error(":",N)}},K=Y=>{A(Y.id),D({name:Y.name||"",startDate:$E(Y.startDate),endDate:$E(Y.endDate)})},Q=()=>{A(""),D({name:"",startDate:"",endDate:""})},Z=async Y=>{if(!k.name.trim()||!k.startDate||!k.endDate){alert("");return}try{const ue={name:k.name.trim(),startDate:dt.fromDate(new Date(k.startDate)),endDate:dt.fromDate(new Date(k.endDate))};await Qp($t(Oe,"events",r,"seasons",Y),ue),E(N=>N.map(R=>R.id===Y?{...R,...ue}:R)),Q()}catch(ue){console.error(":",ue),alert("")}};return T.jsxs("div",{children:[T.jsx("h3",{children:" "}),T.jsxs("form",{onSubmit:C,children:[T.jsx("input",{type:"text",placeholder:"",value:e,onChange:Y=>n(Y.target.value),required:!0}),T.jsx("input",{type:"date",value:s,onChange:Y=>o(Y.target.value),required:!0}),T.jsx("input",{type:"date",value:u,onChange:Y=>f(Y.target.value),required:!0}),T.jsx("button",{type:"submit",children:""})]}),T.jsx("p",{children:m}),T.jsx("ul",{children:g.map(Y=>T.jsx("li",{children:w===Y.id?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:k.name,onChange:ue=>D(N=>({...N,name:ue.target.value}))}),T.jsx("input",{type:"date",value:k.startDate,onChange:ue=>D(N=>({...N,startDate:ue.target.value}))}),T.jsx("input",{type:"date",value:k.endDate,onChange:ue=>D(N=>({...N,endDate:ue.target.value}))}),T.jsx("button",{type:"button",onClick:()=>Z(Y.id),children:""}),T.jsx("button",{type:"button",onClick:Q,children:""})]}):T.jsxs(T.Fragment,{children:[Y.name,"",Y.startDate.toDate().toLocaleDateString(),"",Y.endDate.toDate().toLocaleDateString(),"",T.jsx("button",{type:"button",onClick:()=>K(Y),children:""}),T.jsx("button",{type:"button",onClick:()=>j(Y.id),children:""})]})},Y.id))})]})},hN=({eventId:r,categories:e,setCategories:n})=>{const[s,o]=M.useState(""),[u,f]=M.useState(""),[m,p]=M.useState(""),g=M.useCallback(async()=>{try{const C=(await Et(ot(Oe,"events",r,"categories"))).docs.map(j=>({id:j.id,...j.data()}));n(C)}catch(B){console.error(":",B)}},[r,n]);M.useEffect(()=>{g()},[g]);const E=async B=>{if(B.preventDefault(),!!s)try{await Zh(ot(Oe,"events",r,"categories"),{name:s}),o(""),g()}catch(C){console.error(":",C)}},w=async B=>{if(window.confirm(""))try{await pu($t(Oe,"events",r,"categories",B)),n(j=>j.filter(K=>K.id!==B))}catch(j){console.error(":",j)}},A=B=>{f(B.id),p(B.name||"")},k=()=>{f(""),p("")},D=async B=>{const C=m.trim();if(!C){alert("");return}try{await Qp($t(Oe,"events",r,"categories",B),{name:C}),n(j=>j.map(K=>K.id===B?{...K,name:C}:K)),k()}catch(j){console.error(":",j),alert("")}};return T.jsxs("div",{children:[T.jsx("h3",{children:" "}),T.jsxs("form",{onSubmit:E,children:[T.jsx("input",{type:"text",placeholder:"",value:s,onChange:B=>o(B.target.value),required:!0}),T.jsx("button",{type:"submit",children:""})]}),T.jsx("ul",{children:e.map(B=>T.jsx("li",{children:u===B.id?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:m,onChange:C=>p(C.target.value)}),T.jsx("button",{type:"button",onClick:()=>D(B.id),children:""}),T.jsx("button",{type:"button",onClick:k,children:""})]}):T.jsxs(T.Fragment,{children:[B.name,T.jsx("button",{type:"button",onClick:()=>A(B),children:""}),T.jsx("button",{type:"button",onClick:()=>w(B.id),children:""})]})},B.id))})]})},Gc={name:"",memberNo:"",age:"",gender:"",categoryId:""},fN=r=>r==="male"?"":r==="female"?"":r==="other"?"":"",dN=({eventId:r,categories:e})=>{const[n,s]=M.useState([]),[o,u]=M.useState(Gc),[f,m]=M.useState(""),[p,g]=M.useState(Gc),E=M.useCallback(async()=>{try{const j=(await Et(ot(Oe,"events",r,"participants"))).docs.map(K=>({id:K.id,...K.data()}));s(j)}catch(C){console.error(":",C)}},[r]);M.useEffect(()=>{E()},[E]);const w=async C=>{C.preventDefault();try{await Zh(ot(Oe,"events",r,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:wh()}),u(Gc),E()}catch(j){console.error(":",j)}},A=C=>{m(C.id),g({name:C.name||"",memberNo:C.memberNo||"",age:C.age?String(C.age):"",gender:C.gender||"",categoryId:C.categoryId||""})},k=()=>{m(""),g(Gc)},D=async C=>{if(!p.name.trim()||!p.memberNo.trim()||!p.age||!p.gender||!p.categoryId){alert("");return}try{const j={name:p.name.trim(),memberNo:p.memberNo.trim(),age:Number(p.age),gender:p.gender,categoryId:p.categoryId,updatedAt:wh()};await Qp($t(Oe,"events",r,"participants",C),j),s(K=>K.map(Q=>Q.id===C?{...Q,...j,updatedAt:new Date}:Q)),k()}catch(j){console.error(":",j),alert("")}},B=async C=>{if(window.confirm(""))try{await pu($t(Oe,"events",r,"participants",C)),s(K=>K.filter(Q=>Q.id!==C))}catch(K){console.error(":",K)}};return T.jsxs("div",{children:[T.jsx("h3",{children:" "}),T.jsxs("form",{onSubmit:w,children:[T.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:C=>u(j=>({...j,name:C.target.value})),required:!0}),T.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:C=>u(j=>({...j,memberNo:C.target.value})),required:!0}),T.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:C=>u(j=>({...j,age:C.target.value})),required:!0}),T.jsxs("select",{value:o.gender,onChange:C=>u(j=>({...j,gender:C.target.value})),required:!0,children:[T.jsx("option",{value:"",children:"--  --"}),T.jsx("option",{value:"male",children:""}),T.jsx("option",{value:"female",children:""}),T.jsx("option",{value:"other",children:""})]}),T.jsxs("select",{value:o.categoryId,onChange:C=>u(j=>({...j,categoryId:C.target.value})),required:!0,children:[T.jsx("option",{value:"",children:"--  --"}),e.map(C=>T.jsx("option",{value:C.id,children:C.name},C.id))]}),T.jsx("button",{type:"submit",children:""})]}),T.jsx("ul",{children:n.map(C=>{var Q;const j=((Q=e.find(Z=>Z.id===C.categoryId))==null?void 0:Q.name)||"",K=f===C.id;return T.jsx("li",{children:K?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:p.name,onChange:Z=>g(Y=>({...Y,name:Z.target.value}))}),T.jsx("input",{type:"text",value:p.memberNo,onChange:Z=>g(Y=>({...Y,memberNo:Z.target.value}))}),T.jsx("input",{type:"number",min:"1",max:"120",value:p.age,onChange:Z=>g(Y=>({...Y,age:Z.target.value}))}),T.jsxs("select",{value:p.gender,onChange:Z=>g(Y=>({...Y,gender:Z.target.value})),children:[T.jsx("option",{value:"",children:"--  --"}),T.jsx("option",{value:"male",children:""}),T.jsx("option",{value:"female",children:""}),T.jsx("option",{value:"other",children:""})]}),T.jsxs("select",{value:p.categoryId,onChange:Z=>g(Y=>({...Y,categoryId:Z.target.value})),children:[T.jsx("option",{value:"",children:"--  --"}),e.map(Z=>T.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),T.jsx("button",{type:"button",onClick:()=>D(C.id),children:""}),T.jsx("button",{type:"button",onClick:k,children:""})]}):T.jsxs(T.Fragment,{children:[C.name," / ",": ",C.memberNo||"-"," / ",": ",C.age||"-"," / ",": ",fN(C.gender)," / ",": ",j,T.jsx("button",{type:"button",onClick:()=>A(C),children:""}),T.jsx("button",{type:"button",onClick:()=>B(C.id),children:""})]})},C.id)})})]})},mN=()=>{const{eventId:r}=ru(),[e,n]=M.useState([]),[s,o]=M.useState(""),[u,f]=M.useState([]),[m,p]=M.useState(""),[g,E]=M.useState([]),[w,A]=M.useState("");M.useEffect(()=>{(async()=>{const Z=await Et(ot(Oe,"events",r,"seasons"));n(Z.docs.map(Y=>({id:Y.id,...Y.data()})))})()},[r]),M.useEffect(()=>{if(!s)return;(async()=>{const Z=await Et(ot(Oe,"events",r,"categories"));f(Z.docs.map(Y=>({id:Y.id,...Y.data()})))})(),p(""),E([])},[s]),M.useEffect(()=>{if(!s||!m)return;(async()=>{const Y=(await Et(ot(Oe,"events",r,"seasons",s,"categories",m,"routes"))).docs.map(ue=>({id:ue.id,...ue.data(),isEditing:!1}));Y.sort((ue,N)=>ue.name.localeCompare(N.name,"ja")),E(Y)})()},[m]);const k=()=>{const Q=`No.${String(g.length+1).padStart(2,"0")}`;E([...g,{name:Q,grade:"",isBonus:!1,isEditing:!0}])},D=(Q,Z,Y)=>{E(ue=>{const N=[...ue];return N[Q][Z]=Z==="isBonus"?Y.target.checked:Y,N})},B=Q=>{E(Z=>Z.map((Y,ue)=>({...Y,isEditing:ue===Q?!Y.isEditing:!1})))},C=async Q=>{const Z=g[Q];if(!Z.grade){alert("");return}const Y=$t(Oe,"events",r,"seasons",s,"categories",m,"routes",Z.name);await Gm(Y,{name:Z.name,grade:Z.grade,isBonus:Z.isBonus}),E(ue=>{const N=[...ue];return N[Q].isEditing=!1,N}),A(` ${Z.name} `),setTimeout(()=>A(""),2e3)},j=async Q=>{const Z=g[Q],Y=`No.${String(g.length+1).padStart(2,"0")}`,ue=$t(Oe,"events",r,"seasons",s,"categories",m,"routes",Y);await Gm(ue,{name:Y,grade:Z.grade,isBonus:Z.isBonus});const N={...Z,name:Y,isEditing:!1},R=[...g];R.splice(Q+1,0,N),E(R),A(" "),setTimeout(()=>A(""),2e3)},K=async Q=>{const Z=g[Q].name,Y=$t(Oe,"events",r,"seasons",s,"categories",m,"routes",Z);await pu(Y);const ue=[...g];ue.splice(Q,1),E(ue),A(" "),setTimeout(()=>A(""),2e3)};return T.jsxs("div",{children:[T.jsx("h3",{children:" "}),w&&T.jsx("p",{children:w}),T.jsxs("label",{children:["",T.jsxs("select",{value:s,onChange:Q=>o(Q.target.value),children:[T.jsx("option",{value:"",children:"--  --"}),e.map(Q=>T.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),s&&T.jsxs(T.Fragment,{children:[T.jsxs("label",{children:["",T.jsxs("select",{value:m,onChange:Q=>p(Q.target.value),children:[T.jsx("option",{value:"",children:"--  --"}),u.map(Q=>T.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),m&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{marginTop:"1em"},children:T.jsx("button",{onClick:k,children:" "})}),T.jsxs("table",{style:{marginTop:"1em",borderCollapse:"collapse"},children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:""}),T.jsx("th",{children:""}),T.jsx("th",{children:""}),T.jsx("th",{children:""})]})}),T.jsx("tbody",{children:g.map((Q,Z)=>T.jsxs("tr",{children:[T.jsx("td",{children:Q.name}),T.jsx("td",{children:Q.isEditing?T.jsxs("select",{value:Q.grade,onChange:Y=>D(Z,"grade",Y.target.value),children:[T.jsx("option",{value:"",children:"--  --"}),T.jsx("option",{value:"9",children:"9"}),T.jsx("option",{value:"8",children:"8"}),T.jsx("option",{value:"7",children:"7"}),T.jsx("option",{value:"6",children:"6"}),T.jsx("option",{value:"5",children:"5"}),T.jsx("option",{value:"4",children:"4"}),T.jsx("option",{value:"3",children:"3"}),T.jsx("option",{value:"2",children:"2"}),T.jsx("option",{value:"1",children:"1"}),T.jsx("option",{value:"",children:""}),T.jsx("option",{value:"2",children:"2"})]}):Q.grade}),T.jsx("td",{children:Q.isEditing?T.jsx("input",{type:"checkbox",checked:Q.isBonus,onChange:Y=>D(Z,"isBonus",Y)}):Q.isBonus?"":"-"}),T.jsx("td",{children:Q.isEditing?T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>C(Z),children:""}),T.jsx("button",{onClick:()=>B(Z),children:""})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>B(Z),children:""}),T.jsx("button",{onClick:()=>j(Z),children:""}),T.jsx("button",{onClick:()=>K(Z),children:""})]})})]},Z))})]})]})]})]})},pN=({eventId:r})=>{var A,k;const[e,n]=M.useState([]),[s,o]=M.useState([]),[u,f]=M.useState([]),m=kn(),[p,g]=M.useState(((A=m.state)==null?void 0:A.seasonId)||""),[E,w]=M.useState(((k=m.state)==null?void 0:k.categoryId)||"");return M.useEffect(()=>{const D=async()=>{try{const j=(await Et(ot(Oe,"events",r,"seasons"))).docs.map(K=>({id:K.id,...K.data()}));n(j)}catch(C){console.error(":",C)}},B=async()=>{try{const j=(await Et(ot(Oe,"events",r,"categories"))).docs.map(K=>({id:K.id,...K.data()}));o(j)}catch(C){console.error(":",C)}};D(),B()},[r]),M.useEffect(()=>{(async()=>{if(E)try{const j=(await Et(ot(Oe,"events",r,"participants"))).docs.map(K=>({id:K.id,...K.data()})).filter(K=>K.categoryId===E);f(j)}catch(B){console.error(":",B)}})()},[r,E]),M.useEffect(()=>{var D,B;(D=m.state)!=null&&D.seasonId&&g(m.state.seasonId),(B=m.state)!=null&&B.categoryId&&w(m.state.categoryId)},[m.state]),T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("h2",{children:" "}),T.jsx("div",{style:{marginBottom:"1em"},children:T.jsxs("label",{children:[":",T.jsxs("select",{value:p,onChange:D=>g(D.target.value),children:[T.jsx("option",{value:"",children:"--  --"}),e.map(D=>T.jsx("option",{value:D.id,children:D.name},D.id))]})]})}),T.jsx("div",{style:{marginBottom:"1em"},children:T.jsxs("label",{children:[":",T.jsxs("select",{value:E,onChange:D=>w(D.target.value),children:[T.jsx("option",{value:"",children:"--  --"}),s.map(D=>T.jsx("option",{value:D.id,children:D.name},D.id))]})]})}),p&&E&&T.jsx("ul",{children:u.map(D=>T.jsxs("li",{children:[D.name,T.jsx(ht,{to:`/events/${r}/scoreinput/${p}/${E}/${D.id}`,style:{marginLeft:"1em"},children:" "})]},D.id))})]})},gN=()=>{var p;const{eventId:r}=ru(),[e,n]=M.useState(""),s=kn(),[o,u]=M.useState(((p=s.state)==null?void 0:p.tab)||"seasons"),[f,m]=M.useState([]);return M.useEffect(()=>{(async()=>{try{const w=(await Et(ot(Oe,"events",r,"categories"))).docs.map(A=>({id:A.id,...A.data()}));m(w)}catch(E){console.error(":",E)}})()},[r]),M.useEffect(()=>{(async()=>{const E=$t(Oe,"events",r),w=await ho(E);w.exists()&&n(w.data().name)})()},[r]),T.jsxs("div",{style:{padding:"2em"},children:[T.jsxs("h2",{children:[" ",e]}),T.jsx(ht,{to:"/dashboard",children:" "})," |"," ",T.jsxs("div",{style:{marginTop:"1em"},children:[T.jsx("button",{onClick:()=>u("seasons"),children:" "}),T.jsx("button",{onClick:()=>u("categories"),children:" "}),T.jsx("button",{onClick:()=>u("routes"),children:" "}),T.jsx("button",{onClick:()=>u("participants"),children:" "}),T.jsx("button",{onClick:()=>u("scores"),children:" "})]}),o==="seasons"&&T.jsx(cN,{eventId:r}),o==="categories"&&T.jsx(hN,{eventId:r,categories:f,setCategories:m}),o==="routes"&&T.jsx(mN,{eventId:r,categories:f}),o==="participants"&&T.jsx(dN,{eventId:r,categories:f}),o==="scores"&&T.jsx(pN,{eventId:r})]})},yN=()=>{const{eventId:r,seasonId:e,categoryId:n,participantId:s}=ru(),[o,u]=M.useState([]),[f,m]=M.useState(""),[p,g]=M.useState({}),[E,w]=M.useState(""),[A,k]=M.useState(null);M.useEffect(()=>{(async()=>{try{const j=await ho($t(Oe,"events",r,"participants",s));j.exists()&&m(j.data().name||"");const Q=(await Et(ot(Oe,"events",r,"seasons",e,"categories",n,"routes"))).docs.map(Y=>Y.data()).sort((Y,ue)=>Y.name.localeCompare(ue.name,"ja"));u(Q);const Z=await ho($t(Oe,"events",r,"seasons",e,"categories",n,"participants",s));if(Z.exists()){const Y=Z.data();Y.scores&&g(Y.scores),Y.updatedAt&&k(Y.updatedAt.toDate())}}catch(j){console.error(":",j)}})()},[r,e,n,s]);const D=C=>{g(j=>({...j,[C]:!j[C]}))},B=async()=>{try{await Gm($t(Oe,"events",r,"seasons",e,"categories",n,"participants",s),{scores:p,updatedAt:wh()},{merge:!0}),w(" "),setTimeout(()=>w(""),2e3)}catch(C){console.error(":",C),w(" ")}};return T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("h2",{children:" "}),T.jsx("p",{children:T.jsx(ht,{to:`/events/${r}/edit`,state:{tab:"scores",seasonId:e,categoryId:n},children:" "})}),T.jsxs("p",{children:[": ",f]}),A&&T.jsxs("p",{style:{fontStyle:"italic",fontSize:"0.9em"},children:[": ",A.toLocaleString()]}),T.jsx("div",{style:{marginTop:"1em"},children:o.map(C=>T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5em 0",borderBottom:"1px solid #ddd"},children:[T.jsx("span",{children:C.name}),T.jsx("input",{type:"checkbox",checked:!!p[C.name],onChange:()=>D(C.name)})]},C.name))}),T.jsxs("div",{style:{marginTop:"1em"},children:[T.jsx("button",{onClick:B,children:" "}),T.jsx("span",{style:{marginLeft:"1em"},children:E})]})]})},XE=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleDateString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleDateString():String(r):"-",ZE=r=>r?typeof r.toDate=="function"?r.toDate().getTime():typeof r.seconds=="number"?r.seconds*1e3:0:0,WE=(r,e)=>{const n=ZE(r.startDate),s=ZE(r.endDate);return n&&s&&n<=e&&e<=s?"ongoing":n&&e<n?"upcoming":"ended"},vN={ongoing:"",upcoming:"",ended:""},_N=()=>{const[r,e]=ep(),n=r.get("q")||"",s=r.get("status")||"all",[o,u]=M.useState([]),[f,m]=M.useState(n),[p,g]=M.useState(s),[E,w]=M.useState(!0),[A,k]=M.useState("");M.useEffect(()=>{(async()=>{try{k("");const K=(await Et(ot(Oe,"events"))).docs.map(Q=>({id:Q.id,...Q.data()})).sort((Q,Z)=>{var N,R;const Y=(N=Q.endDate)!=null&&N.seconds?Q.endDate.seconds*1e3:0;return((R=Z.endDate)!=null&&R.seconds?Z.endDate.seconds*1e3:0)-Y});u(K)}catch(j){console.error(":",j),k("")}finally{w(!1)}})()},[]),M.useEffect(()=>{const C=new URLSearchParams,j=f.trim();j&&C.set("q",j),p!=="all"&&C.set("status",p),C.toString()!==r.toString()&&e(C,{replace:!0})},[f,p,r,e]);const D=M.useMemo(()=>{const C=Date.now(),j=f.trim().toLowerCase();return o.filter(K=>{const Q=(K.name||"").toLowerCase(),Z=WE(K,C);return(j?Q.includes(j):!0)&&(p==="all"?!0:Z===p)})},[o,f,p]),B=()=>{m(""),g("all")};return E?T.jsx("p",{children:"..."}):A?T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("p",{children:A}),T.jsx("div",{style:{marginTop:"1.5em"},children:T.jsx(ht,{to:"/",children:" Home"})})]}):T.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[T.jsx("h2",{children:" "}),T.jsx("p",{style:{marginBottom:"0.4em"},children:""}),T.jsxs("ol",{style:{marginTop:0,paddingLeft:"1.2em"},children:[T.jsx("li",{children:""}),T.jsx("li",{children:""}),T.jsx("li",{children:""})]}),T.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"0.8em",marginBottom:"1em",display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[T.jsxs("label",{children:[":",T.jsx("input",{type:"text",value:f,onChange:C=>m(C.target.value),placeholder:": Spring",style:{marginLeft:"0.5em"}})]}),T.jsxs("label",{children:[":",T.jsxs("select",{value:p,onChange:C=>g(C.target.value),style:{marginLeft:"0.5em"},children:[T.jsx("option",{value:"all",children:""}),T.jsx("option",{value:"ongoing",children:""}),T.jsx("option",{value:"upcoming",children:""}),T.jsx("option",{value:"ended",children:""})]})]}),T.jsx("button",{type:"button",onClick:B,children:""}),T.jsxs("span",{style:{marginLeft:"auto"},children:[" ",D.length," / ",o.length," "]})]}),o.length===0?T.jsx("p",{children:""}):D.length===0?T.jsx("p",{children:""}):T.jsx("div",{style:{display:"grid",gap:"1em"},children:D.map(C=>{const j=WE(C,Date.now());return T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[T.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[C.name,T.jsx("span",{style:{marginLeft:"0.6em",fontSize:"0.8em",border:"1px solid #ccc",borderRadius:"999px",padding:"0.1em 0.5em"},children:vN[j]})]}),T.jsxs("p",{style:{marginTop:0},children:[": ",XE(C.startDate),"  ",XE(C.endDate)]}),T.jsx(ht,{to:`/score-summary/${C.id}`,children:""})]},C.id)})}),T.jsx("div",{style:{marginTop:"2em"},children:T.jsx(ht,{to:"/",children:" Home"})})]})},EN=r=>r?typeof r.toMillis=="function"?r.toMillis():typeof r.seconds=="number"?r.seconds*1e3:0:0,JE=(r,e)=>{const n={};for(const s of r){const o=new Map;for(const u of e.filter(f=>f.categoryId===s.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[s.id]=o}return n},e0=r=>{const e={};for(const[n,s]of Object.entries(r)){const o=Array.from(s.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,f=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==f)&&(m=g+1),u=p.totalPoints,f=p.clearCount,{...p,rank:m}))}return e},TN=()=>{const{eventId:r}=ru(),[e,n]=ep(),s=e.get("season")||"all",o=e.get("category")||"all",u=e.get("q")||"",f=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[p,g]=M.useState(null),[E,w]=M.useState([]),[A,k]=M.useState([]),[D,B]=M.useState([]),[C,j]=M.useState(s),[K,Q]=M.useState(o),[Z,Y]=M.useState(f),[ue,N]=M.useState(m),[R,I]=M.useState(u),[V,U]=M.useState({}),[z,O]=M.useState(!0),[St,et]=M.useState(!1),[J,ee]=M.useState("");M.useEffect(()=>{let oe=!1;return(async()=>{O(!0),ee("");try{const De=await ho($t(Oe,"events",r));if(!De.exists()){oe||ee("");return}const[ve,ft,Vt]=await Promise.all([Et(ot(Oe,"events",r,"seasons")),Et(ot(Oe,"events",r,"categories")),Et(ot(Oe,"events",r,"participants"))]);if(oe)return;g({id:De.id,...De.data()}),w(ve.docs.map(st=>({id:st.id,...st.data()})).sort((st,lt)=>st.name.localeCompare(lt.name,"ja"))),k(ft.docs.map(st=>({id:st.id,...st.data()})).sort((st,lt)=>st.name.localeCompare(lt.name,"ja"))),B(Vt.docs.map(st=>({id:st.id,...st.data()})))}catch(De){console.error(":",De),oe||ee("")}finally{oe||O(!1)}})(),()=>{oe=!0}},[r]),M.useEffect(()=>{let oe=!1;return(async()=>{if(z||!p||A.length===0)return;ee("");const De=C==="all"?E.map(ve=>ve.id):[C].filter(Boolean);if(De.length===0){U(e0(JE(A,D)));return}et(!0);try{const ve=JE(A,D),ft=new Map(D.map(lt=>[lt.id,lt])),Vt=De.flatMap(lt=>A.map(async Rn=>{const[an,vt]=await Promise.all([Et(ot(Oe,"events",r,"seasons",lt,"categories",Rn.id,"routes")),Et(ot(Oe,"events",r,"seasons",lt,"categories",Rn.id,"participants"))]);return{categoryId:Rn.id,routeSnap:an,scoreSnap:vt}})),st=await Promise.all(Vt);for(const{categoryId:lt,routeSnap:Rn,scoreSnap:an}of st){const vt={};for(const Ln of Rn.docs){const _n=Ln.data();vt[_n.name]=Number(_n.points)||1}for(const Ln of an.docs){const _n=Ln.data(),Un=_n.scores||{},on=Ln.id;if(!ve[lt].has(on)){const Be=ft.get(on);ve[lt].set(on,{participantId:on,name:(Be==null?void 0:Be.name)||_n.participantName||`ID:${on}`,memberNo:(Be==null?void 0:Be.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Ne=ve[lt].get(on);for(const[Be,ki]of Object.entries(Un))ki&&(Ne.totalPoints+=vt[Be]??1,Ne.clearCount+=1);Ne.latestUpdatedAt=Math.max(Ne.latestUpdatedAt,EN(_n.updatedAt))}}oe||U(e0(ve))}catch(ve){console.error(":",ve),oe||ee("")}finally{oe||et(!1)}})(),()=>{oe=!0}},[z,p,A,D,E,C,r]);const ce=M.useMemo(()=>K==="all"?A:A.filter(oe=>oe.id===K),[A,K]),Te=M.useMemo(()=>[...K==="all"?D:D.filter(me=>me.categoryId===K)].sort((me,De)=>(me.name||"").localeCompare(De.name||"","ja")),[D,K]);M.useEffect(()=>{if(!Z||Te.length===0)return;Te.some(me=>me.id===Z)||Y("")},[Te,Z]),M.useEffect(()=>{ue&&!Z&&N(!1)},[ue,Z]),M.useEffect(()=>{E.length!==0&&C!=="all"&&!E.some(oe=>oe.id===C)&&j("all")},[E,C]),M.useEffect(()=>{A.length!==0&&K!=="all"&&!A.some(oe=>oe.id===K)&&Q("all")},[A,K]),M.useEffect(()=>{const oe=new URLSearchParams;C!=="all"&&oe.set("season",C),K!=="all"&&oe.set("category",K);const me=R.trim();me&&oe.set("q",me),Z&&oe.set("pid",Z),ue&&Z&&oe.set("self","1"),oe.toString()!==e.toString()&&n(oe,{replace:!0})},[C,K,R,Z,ue,e,n]);const P=R.trim().toLowerCase(),ie=P.length>0,he=D.find(oe=>oe.id===Z)||null,le=M.useMemo(()=>{if(!Z)return[];const oe=[];for(const me of ce){const De=(V[me.id]||[]).find(ve=>ve.participantId===Z);De&&oe.push({...De,categoryName:me.name})}return oe},[Z,ce,V]),ye=oe=>{const me=new URLSearchParams;C!=="all"&&me.set("season",C),K!=="all"&&me.set("category",K),R.trim()&&me.set("q",R.trim()),Z&&me.set("pid",Z),ue&&Z&&me.set("self","1");const De=me.toString();return`/score-summary/${r}/participants/${oe}${De?`?${De}`:""}`},Ce=()=>{Q("all"),Y(""),N(!1),I("")},de=ce.reduce((oe,me)=>{const De=V[me.id]||[];return oe+De.filter(ve=>{const ft=(ve.name||"").toLowerCase(),Vt=(ve.memberNo||"").toLowerCase();return ft.includes(P)||Vt.includes(P)}).length},0);return z?T.jsx("p",{children:"..."}):J?T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("p",{children:J}),T.jsx("div",{style:{marginTop:"2em"},children:T.jsx(ht,{to:"/score-summary",children:" "})})]}):T.jsxs("div",{style:{padding:"2em",maxWidth:"1100px",margin:"0 auto"},children:[T.jsxs("h2",{children:[p==null?void 0:p.name," - "]}),T.jsx("div",{style:{margin:"1em 0",display:"flex",flexWrap:"wrap",gap:"0.8em"},children:T.jsxs("label",{children:[":",T.jsxs("select",{value:C,onChange:oe=>j(oe.target.value),style:{marginLeft:"0.5em"},children:[T.jsx("option",{value:"all",children:""}),E.map(oe=>T.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})}),T.jsxs("div",{style:{margin:"1em 0"},children:[T.jsxs("label",{children:["/:",T.jsx("input",{type:"text",value:R,onChange:oe=>I(oe.target.value),placeholder:":  / M-1001",style:{marginLeft:"0.5em"}})]}),ie&&T.jsxs("span",{style:{marginLeft:"0.8em"},children:[" ",de," "]})]}),T.jsxs("div",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[T.jsx("p",{style:{marginTop:0,marginBottom:"0.5em"},children:""}),T.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[T.jsxs("label",{children:[":",T.jsxs("select",{value:K,onChange:oe=>Q(oe.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[T.jsx("option",{value:"all",children:""}),A.map(oe=>T.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),T.jsxs("label",{children:[":",T.jsxs("select",{value:Z,onChange:oe=>Y(oe.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[T.jsx("option",{value:"",children:"--  --"}),Te.map(oe=>T.jsxs("option",{value:oe.id,children:[oe.name," (",oe.memberNo||"-",")"]},oe.id))]})]}),T.jsxs("label",{children:[T.jsx("input",{type:"checkbox",checked:ue,onChange:oe=>N(oe.target.checked),disabled:!Z,style:{marginLeft:"0.5em",marginRight:"0.3em"}}),""]}),T.jsx("button",{type:"button",onClick:Ce,children:""}),Z&&T.jsx(ht,{to:ye(Z),children:""})]})]}),he&&T.jsxs("section",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[T.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[": ",he.name," (",he.memberNo||"-",")"]}),le.length===0?T.jsx("p",{style:{marginBottom:0},children:""}):T.jsx("ul",{style:{marginBottom:0,paddingLeft:"1.2em"},children:le.map(oe=>T.jsxs("li",{children:[oe.categoryName,": ",oe.rank," /  ",oe.totalPoints," /  ",oe.clearCount]},`${oe.categoryName}-${oe.participantId}`))})]}),St&&T.jsx("p",{children:"..."}),ce.length===0?T.jsx("p",{children:""}):ue&&!Z?T.jsx("p",{children:""}):ce.map(oe=>{const De=(V[oe.id]||[]).filter(ve=>{if(ue&&Z&&ve.participantId!==Z)return!1;if(!ie)return!0;const ft=(ve.name||"").toLowerCase(),Vt=(ve.memberNo||"").toLowerCase();return ft.includes(P)||Vt.includes(P)});return T.jsxs("section",{style:{marginBottom:"2em"},children:[T.jsxs("h3",{children:[": ",oe.name]}),De.length===0?T.jsx("p",{children:ie?"":""}):T.jsx("div",{style:{overflowX:"auto"},children:T.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"650px"},children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""})]})}),T.jsx("tbody",{children:De.map(ve=>T.jsxs("tr",{children:[T.jsx("td",{style:{padding:"0.4em 0"},children:ve.rank}),T.jsxs("td",{children:[ve.name,Z===ve.participantId&&T.jsx("strong",{style:{marginLeft:"0.4em"},children:"()"})]}),T.jsx("td",{children:ve.memberNo}),T.jsx("td",{style:{textAlign:"right"},children:ve.totalPoints}),T.jsx("td",{style:{textAlign:"right"},children:ve.clearCount}),T.jsx("td",{children:T.jsx(ht,{to:ye(ve.participantId),children:""})})]},ve.participantId))})]})})]},oe.id)}),T.jsx("div",{style:{marginTop:"2em"},children:T.jsx(ht,{to:"/score-summary",children:" "})})]})},SN=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleString():"-":"-",t0=r=>{const e=[...r].sort((u,f)=>f.totalPoints!==u.totalPoints?f.totalPoints-u.totalPoints:f.clearCount!==u.clearCount?f.clearCount-u.clearCount:u.name.localeCompare(f.name,"ja"));let n=null,s=null,o=0;return e.map((u,f)=>((u.totalPoints!==n||u.clearCount!==s)&&(o=f+1),n=u.totalPoints,s=u.clearCount,{...u,rank:o}))},AN=()=>{var J;const{eventId:r,participantId:e}=ru(),[n]=ep(),s=n.get("category")||"",o=n.get("q")||"",[u,f]=M.useState(null),[m,p]=M.useState(null),[g,E]=M.useState([]),[w,A]=M.useState([]),[k,D]=M.useState([]),[B,C]=M.useState(n.get("season")||"all"),[j,K]=M.useState([]),[Q,Z]=M.useState(null),[Y,ue]=M.useState({prev:null,next:null}),[N,R]=M.useState(!0),[I,V]=M.useState(!1),[U,z]=M.useState(""),O=ee=>{const ce=new URLSearchParams;B!=="all"&&ce.set("season",B),s&&ce.set("category",s),o&&ce.set("q",o);const Te=ce.toString();return`/score-summary/${r}/participants/${ee}${Te?`?${Te}`:""}`},St=M.useMemo(()=>{const ee=new URLSearchParams;B!=="all"&&ee.set("season",B),s&&ee.set("category",s),o&&ee.set("q",o);const ce=ee.toString();return`/score-summary/${r}${ce?`?${ce}`:""}`},[r,B,s,o]);M.useEffect(()=>{let ee=!1;return(async()=>{R(!0),z("");try{const[Te,P,ie,he,le]=await Promise.all([ho($t(Oe,"events",r)),ho($t(Oe,"events",r,"participants",e)),Et(ot(Oe,"events",r,"participants")),Et(ot(Oe,"events",r,"seasons")),Et(ot(Oe,"events",r,"categories"))]);if(!Te.exists()){ee||z("");return}if(!P.exists()){ee||z("");return}const ye=he.docs.map(me=>({id:me.id,...me.data()})).sort((me,De)=>me.name.localeCompare(De.name,"ja")),Ce=le.docs.map(me=>({id:me.id,...me.data()})).sort((me,De)=>me.name.localeCompare(De.name,"ja"));if(ee)return;const de=n.get("season"),oe=de&&(de==="all"||ye.some(me=>me.id===de))?de:"all";f({id:Te.id,...Te.data()}),p({id:P.id,...P.data()}),E(ie.docs.map(me=>({id:me.id,...me.data()}))),A(ye),D(Ce),C(oe)}catch(Te){console.error(":",Te),ee||z("")}finally{ee||R(!1)}})(),()=>{ee=!0}},[r,e,n]),M.useEffect(()=>{let ee=!1;return(async()=>{if(!(N||!m||w.length===0||k.length===0)){V(!0);try{const Te=B==="all"?w:w.filter(de=>de.id===B),P=m.categoryId?[m.categoryId]:k.map(de=>de.id),ie=new Map(k.map(de=>[de.id,de.name])),he=new Map(g.map(de=>[de.id,de.name||""])),le=new Map(g.map(de=>[de.id,de.memberNo||"-"])),ye=[],Ce={};for(const de of Te){const oe=[],me=P.map(async ve=>{const[ft,Vt]=await Promise.all([Et(ot(Oe,"events",r,"seasons",de.id,"categories",ve,"routes")),Et(ot(Oe,"events",r,"seasons",de.id,"categories",ve,"participants"))]),st=new Map(ft.docs.map(Ne=>{const Be=Ne.data();return[Be.name,Be]})),lt=new Map,Rn=g.filter(Ne=>Ne.categoryId===ve);for(const Ne of Rn)lt.set(Ne.id,{participantId:Ne.id,name:Ne.name||"",memberNo:Ne.memberNo||"-",totalPoints:0,clearCount:0});let an=null;for(const Ne of Vt.docs){const Be=Ne.data(),ki=Be.scores||{},jn=Ne.id;jn===m.id&&(an=Be);const ut=lt.get(jn)||{participantId:jn,name:he.get(jn)||`ID:${jn}`,memberNo:le.get(jn)||"-",totalPoints:0,clearCount:0};for(const[Ye,mn]of Object.entries(ki)){if(!mn)continue;const xt=st.get(Ye);ut.totalPoints+=Number(xt==null?void 0:xt.points)||1,ut.clearCount+=1}lt.set(jn,ut)}const vt=t0(Array.from(lt.values())),Ln=vt.find(Ne=>Ne.participantId===m.id);Ce[ve]||(Ce[ve]=new Map(vt.map(Ne=>[Ne.participantId,{participantId:Ne.participantId,name:Ne.name,memberNo:Ne.memberNo,totalPoints:0,clearCount:0}])));for(const Ne of vt){const Be=Ce[ve].get(Ne.participantId)||{participantId:Ne.participantId,name:Ne.name,memberNo:Ne.memberNo,totalPoints:0,clearCount:0};Be.totalPoints+=Ne.totalPoints,Be.clearCount+=Ne.clearCount,Ce[ve].set(Ne.participantId,Be)}const _n=(an==null?void 0:an.scores)||{},Un=Object.entries(_n).filter(([,Ne])=>!!Ne).map(([Ne])=>{const Be=st.get(Ne);return{routeName:Ne,points:Number(Be==null?void 0:Be.points)||1,grade:(Be==null?void 0:Be.grade)||"-"}}).sort((Ne,Be)=>Ne.routeName.localeCompare(Be.routeName,"ja")),on=Un.reduce((Ne,Be)=>Ne+Be.points,0);return{categoryId:ve,categoryName:ie.get(ve)||ve,clearCount:Un.length,totalPoints:on,rank:(Ln==null?void 0:Ln.rank)||vt.length,totalParticipants:vt.length,updatedAtText:SN(an==null?void 0:an.updatedAt),clearedRoutes:Un}}),De=(await Promise.all(me)).filter(Boolean);for(const ve of De)oe.push(ve);ye.push({seasonId:de.id,seasonName:de.name,categorySummaries:oe,totalPoints:oe.reduce((ve,ft)=>ve+ft.totalPoints,0),totalClears:oe.reduce((ve,ft)=>ve+ft.clearCount,0)})}if(!ee){const de=m.categoryId||P[0],oe=de?Array.from((Ce[de]||new Map).values()):[],me=t0(oe),De=me.find(ve=>ve.participantId===m.id);if(Z(De?{categoryName:ie.get(de)||"",rank:De.rank,totalParticipants:me.length,totalPoints:De.totalPoints,totalClears:De.clearCount}:null),De){const ve=me.findIndex(st=>st.participantId===m.id),ft=ve>0?me[ve-1]:null,Vt=ve>=0&&ve<me.length-1?me[ve+1]:null;ue({prev:ft,next:Vt})}else ue({prev:null,next:null});K(ye)}}catch(Te){console.error(":",Te),ee||z("")}finally{ee||V(!1)}}})(),()=>{ee=!0}},[N,m,g,w,k,B,r]);const et=M.useMemo(()=>({totalPoints:j.reduce((ee,ce)=>ee+ce.totalPoints,0),totalClears:j.reduce((ee,ce)=>ee+ce.totalClears,0)}),[j]);return N?T.jsx("p",{children:"..."}):U?T.jsxs("div",{style:{padding:"2em"},children:[T.jsx("p",{children:U}),T.jsx("div",{style:{marginTop:"1.5em"},children:T.jsx(ht,{to:St,children:" "})})]}):T.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[T.jsxs("h2",{children:[u==null?void 0:u.name," - "]}),T.jsxs("p",{style:{marginBottom:"0.4em"},children:[": ",T.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),T.jsxs("p",{style:{marginTop:0},children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",((J=k.find(ee=>ee.id===(m==null?void 0:m.categoryId)))==null?void 0:J.name)||""]}),T.jsx("div",{style:{margin:"1em 0"},children:T.jsxs("label",{children:[":",T.jsxs("select",{value:B,onChange:ee=>C(ee.target.value),style:{marginLeft:"0.5em"},children:[T.jsx("option",{value:"all",children:""}),w.map(ee=>T.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})}),T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em"},children:[T.jsx("h3",{style:{marginTop:0},children:""}),T.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[T.jsxs("p",{style:{margin:0},children:[": ",T.jsx("strong",{children:et.totalPoints})]}),T.jsxs("p",{style:{margin:0},children:[": ",T.jsx("strong",{children:et.totalClears})]})]}),Q&&T.jsxs("p",{style:{marginBottom:0,marginTop:"0.6em"},children:["",Q.categoryName,":"," ",T.jsx("strong",{children:Q.rank})," / ",Q.totalParticipants," "," ",Q.totalPoints," /  ",Q.totalClears,""]})]}),(Y.prev||Y.next)&&T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginTop:"1em"},children:[T.jsx("h3",{style:{marginTop:0},children:""}),T.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[Y.prev?T.jsxs(ht,{to:O(Y.prev.participantId),children:[" ",Y.prev.rank," ",Y.prev.name]}):T.jsx("span",{children:""}),Y.next?T.jsxs(ht,{to:O(Y.next.participantId),children:[" ",Y.next.rank," ",Y.next.name]}):T.jsx("span",{children:""})]})]}),I&&T.jsx("p",{style:{marginTop:"1em"},children:"..."}),T.jsx("div",{style:{marginTop:"1.2em"},children:j.length===0?T.jsx("p",{children:""}):j.map(ee=>T.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginBottom:"1em"},children:[T.jsxs("h3",{style:{marginTop:0},children:[ee.seasonName," /  ",ee.totalPoints," /  ",ee.totalClears]}),ee.categorySummaries.length===0?T.jsx("p",{children:""}):ee.categorySummaries.map(ce=>T.jsxs("div",{style:{marginTop:"1em"},children:[T.jsxs("h4",{style:{marginBottom:"0.4em"},children:[": ",ce.categoryName," /  ",ce.rank,"/",ce.totalParticipants," / "," ",ce.totalPoints," /  ",ce.clearCount]}),T.jsxs("p",{style:{marginTop:0,fontSize:"0.9em"},children:[": ",ce.updatedAtText]}),ce.clearedRoutes.length===0?T.jsx("p",{children:""}):T.jsx("div",{style:{overflowX:"auto"},children:T.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"360px"},children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),T.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""})]})}),T.jsx("tbody",{children:ce.clearedRoutes.map(Te=>T.jsxs("tr",{children:[T.jsx("td",{style:{padding:"0.35em 0"},children:Te.routeName}),T.jsx("td",{children:Te.grade}),T.jsx("td",{style:{textAlign:"right"},children:Te.points})]},Te.routeName))})]})})]},`${ee.seasonId}-${ce.categoryId}`))]},ee.seasonId))}),T.jsx("div",{style:{marginTop:"1.5em"},children:T.jsx(ht,{to:St,children:" "})})]})},Kc=({children:r})=>{const[e,n]=M.useState(!0),[s,o]=M.useState(!1),u=kn();return M.useEffect(()=>{const f=PC(Yp,m=>{o(!!m),n(!1)});return()=>f()},[]),e?T.jsx("p",{style:{padding:"2em"},children:"..."}):s?r:T.jsx(d1,{to:"/login",replace:!0,state:{from:u}})};function bN(){return T.jsx(B1,{basename:"/FlashComp",children:T.jsxs(p1,{children:[T.jsx(Ii,{path:"/",element:T.jsx(X1,{})}),T.jsx(Ii,{path:"/login",element:T.jsx(oN,{})}),T.jsx(Ii,{path:"/dashboard",element:T.jsx(Kc,{children:T.jsx(lN,{})})}),T.jsx(Ii,{path:"/create-event",element:T.jsx(Kc,{children:T.jsx(uN,{})})}),T.jsx(Ii,{path:"/events/:eventId/edit",element:T.jsx(Kc,{children:T.jsx(gN,{})})}),T.jsx(Ii,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:T.jsx(Kc,{children:T.jsx(yN,{})})}),T.jsx(Ii,{path:"/score-summary",element:T.jsx(_N,{})}),T.jsx(Ii,{path:"/score-summary/:eventId",element:T.jsx(TN,{})}),T.jsx(Ii,{path:"/score-summary/:eventId/participants/:participantId",element:T.jsx(AN,{})})]})})}Ab.createRoot(document.getElementById("root")).render(T.jsx(M.StrictMode,{children:T.jsx(bN,{})}));
