(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var pm={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function nw(){if(Dv)return zl;Dv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:d,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var Ov;function sw(){return Ov||(Ov=1,pm.exports=nw()),pm.exports}var y=sw(),gm={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function rw(){if(Mv)return ze;Mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,B={};function M(j,se,fe){this.props=j,this.context=se,this.refs=B,this.updater=fe||k}M.prototype.isReactComponent={},M.prototype.setState=function(j,se){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,se,"setState")},M.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function z(){}z.prototype=M.prototype;function q(j,se,fe){this.props=j,this.context=se,this.refs=B,this.updater=fe||k}var Y=q.prototype=new z;Y.constructor=q,I(Y,M.prototype),Y.isPureReactComponent=!0;var te=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function N(j,se,fe,O,J,ge){return fe=ge.ref,{$$typeof:s,type:j,key:se,ref:fe!==void 0?fe:null,props:ge}}function R(j,se){return N(j.type,se,void 0,void 0,void 0,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function P(j){var se={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(fe){return se[fe]})}var U=/\/+/g;function L(j,se){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):se.toString(36)}function A(){}function xe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(A,A):(j.status="pending",j.then(function(se){j.status==="pending"&&(j.status="fulfilled",j.value=se)},function(se){j.status==="pending"&&(j.status="rejected",j.reason=se)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ye(j,se,fe,O,J){var ge=typeof j;(ge==="undefined"||ge==="boolean")&&(j=null);var me=!1;if(j===null)me=!0;else switch(ge){case"bigint":case"string":case"number":me=!0;break;case"object":switch(j.$$typeof){case s:case e:me=!0;break;case _:return me=j._init,ye(me(j._payload),se,fe,O,J)}}if(me)return J=J(j),me=O===""?"."+L(j,0):O,te(J)?(fe="",me!=null&&(fe=me.replace(U,"$&/")+"/"),ye(J,se,fe,"",function(Ee){return Ee})):J!=null&&(D(J)&&(J=R(J,fe+(J.key==null||j&&j.key===J.key?"":(""+J.key).replace(U,"$&/")+"/")+me)),se.push(J)),1;me=0;var le=O===""?".":O+":";if(te(j))for(var ae=0;ae<j.length;ae++)O=j[ae],ge=le+L(O,ae),me+=ye(O,se,fe,ge,J);else if(ae=E(j),typeof ae=="function")for(j=ae.call(j),ae=0;!(O=j.next()).done;)O=O.value,ge=le+L(O,ae++),me+=ye(O,se,fe,ge,J);else if(ge==="object"){if(typeof j.then=="function")return ye(xe(j),se,fe,O,J);throw se=String(j),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return me}function Q(j,se,fe){if(j==null)return j;var O=[],J=0;return ye(j,O,"","",function(ge){return se.call(fe,ge,J++)}),O}function ee(j){if(j._status===-1){var se=j._result;se=se(),se.then(function(fe){(j._status===0||j._status===-1)&&(j._status=1,j._result=fe)},function(fe){(j._status===0||j._status===-1)&&(j._status=2,j._result=fe)}),j._status===-1&&(j._status=0,j._result=se)}if(j._status===1)return j._result.default;throw j._result}var ie=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function pe(){}return ze.Children={map:Q,forEach:function(j,se,fe){Q(j,function(){se.apply(this,arguments)},fe)},count:function(j){var se=0;return Q(j,function(){se++}),se},toArray:function(j){return Q(j,function(se){return se})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ze.Component=M,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=q,ze.StrictMode=i,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ze.__COMPILER_RUNTIME={__proto__:null,c:function(j){return X.H.useMemoCache(j)}},ze.cache=function(j){return function(){return j.apply(null,arguments)}},ze.cloneElement=function(j,se,fe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var O=I({},j.props),J=j.key,ge=void 0;if(se!=null)for(me in se.ref!==void 0&&(ge=void 0),se.key!==void 0&&(J=""+se.key),se)!re.call(se,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&se.ref===void 0||(O[me]=se[me]);var me=arguments.length-2;if(me===1)O.children=fe;else if(1<me){for(var le=Array(me),ae=0;ae<me;ae++)le[ae]=arguments[ae+2];O.children=le}return N(j.type,J,void 0,void 0,ge,O)},ze.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},ze.createElement=function(j,se,fe){var O,J={},ge=null;if(se!=null)for(O in se.key!==void 0&&(ge=""+se.key),se)re.call(se,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(J[O]=se[O]);var me=arguments.length-2;if(me===1)J.children=fe;else if(1<me){for(var le=Array(me),ae=0;ae<me;ae++)le[ae]=arguments[ae+2];J.children=le}if(j&&j.defaultProps)for(O in me=j.defaultProps,me)J[O]===void 0&&(J[O]=me[O]);return N(j,ge,void 0,void 0,null,J)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(j){return{$$typeof:m,render:j}},ze.isValidElement=D,ze.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:ee}},ze.memo=function(j,se){return{$$typeof:g,type:j,compare:se===void 0?null:se}},ze.startTransition=function(j){var se=X.T,fe={};X.T=fe;try{var O=j(),J=X.S;J!==null&&J(fe,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(pe,ie)}catch(ge){ie(ge)}finally{X.T=se}},ze.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ze.use=function(j){return X.H.use(j)},ze.useActionState=function(j,se,fe){return X.H.useActionState(j,se,fe)},ze.useCallback=function(j,se){return X.H.useCallback(j,se)},ze.useContext=function(j){return X.H.useContext(j)},ze.useDebugValue=function(){},ze.useDeferredValue=function(j,se){return X.H.useDeferredValue(j,se)},ze.useEffect=function(j,se,fe){var O=X.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return O.useEffect(j,se)},ze.useId=function(){return X.H.useId()},ze.useImperativeHandle=function(j,se,fe){return X.H.useImperativeHandle(j,se,fe)},ze.useInsertionEffect=function(j,se){return X.H.useInsertionEffect(j,se)},ze.useLayoutEffect=function(j,se){return X.H.useLayoutEffect(j,se)},ze.useMemo=function(j,se){return X.H.useMemo(j,se)},ze.useOptimistic=function(j,se){return X.H.useOptimistic(j,se)},ze.useReducer=function(j,se,fe){return X.H.useReducer(j,se,fe)},ze.useRef=function(j){return X.H.useRef(j)},ze.useState=function(j){return X.H.useState(j)},ze.useSyncExternalStore=function(j,se,fe){return X.H.useSyncExternalStore(j,se,fe)},ze.useTransition=function(){return X.H.useTransition()},ze.version="19.1.0",ze}var kv;function yp(){return kv||(kv=1,gm.exports=rw()),gm.exports}var C=yp(),ym={exports:{}},ql={},vm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function iw(){return jv||(jv=1,function(s){function e(Q,ee){var ie=Q.length;Q.push(ee);e:for(;0<ie;){var pe=ie-1>>>1,j=Q[pe];if(0<o(j,ee))Q[pe]=ee,Q[ie]=j,ie=pe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ee=Q[0],ie=Q.pop();if(ie!==ee){Q[0]=ie;e:for(var pe=0,j=Q.length,se=j>>>1;pe<se;){var fe=2*(pe+1)-1,O=Q[fe],J=fe+1,ge=Q[J];if(0>o(O,ie))J<j&&0>o(ge,O)?(Q[pe]=ge,Q[J]=ie,pe=J):(Q[pe]=O,Q[fe]=ie,pe=fe);else if(J<j&&0>o(ge,ie))Q[pe]=ge,Q[J]=ie,pe=J;else break e}}return ee}function o(Q,ee){var ie=Q.sortIndex-ee.sortIndex;return ie!==0?ie:Q.id-ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var p=[],g=[],_=1,S=null,E=3,k=!1,I=!1,B=!1,M=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function te(Q){for(var ee=n(g);ee!==null;){if(ee.callback===null)i(g);else if(ee.startTime<=Q)i(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function X(Q){if(B=!1,te(Q),!I)if(n(p)!==null)I=!0,re||(re=!0,L());else{var ee=n(g);ee!==null&&ye(X,ee.startTime-Q)}}var re=!1,N=-1,R=5,D=-1;function P(){return M?!0:!(s.unstable_now()-D<R)}function U(){if(M=!1,re){var Q=s.unstable_now();D=Q;var ee=!0;try{e:{I=!1,B&&(B=!1,q(N),N=-1),k=!0;var ie=E;try{t:{for(te(Q),S=n(p);S!==null&&!(S.expirationTime>Q&&P());){var pe=S.callback;if(typeof pe=="function"){S.callback=null,E=S.priorityLevel;var j=pe(S.expirationTime<=Q);if(Q=s.unstable_now(),typeof j=="function"){S.callback=j,te(Q),ee=!0;break t}S===n(p)&&i(p),te(Q)}else i(p);S=n(p)}if(S!==null)ee=!0;else{var se=n(g);se!==null&&ye(X,se.startTime-Q),ee=!1}}break e}finally{S=null,E=ie,k=!1}ee=void 0}}finally{ee?L():re=!1}}}var L;if(typeof Y=="function")L=function(){Y(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,xe=A.port2;A.port1.onmessage=U,L=function(){xe.postMessage(null)}}else L=function(){z(U,0)};function ye(Q,ee){N=z(function(){Q(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ie=E;E=ee;try{return Q()}finally{E=ie}},s.unstable_requestPaint=function(){M=!0},s.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ie=E;E=Q;try{return ee()}finally{E=ie}},s.unstable_scheduleCallback=function(Q,ee,ie){var pe=s.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?pe+ie:pe):ie=pe,Q){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ie+j,Q={id:_++,callback:ee,priorityLevel:Q,startTime:ie,expirationTime:j,sortIndex:-1},ie>pe?(Q.sortIndex=ie,e(g,Q),n(p)===null&&Q===n(g)&&(B?(q(N),N=-1):B=!0,ye(X,ie-pe))):(Q.sortIndex=j,e(p,Q),I||k||(I=!0,re||(re=!0,L()))),Q},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Q){var ee=E;return function(){var ie=E;E=ee;try{return Q.apply(this,arguments)}finally{E=ie}}}}(_m)),_m}var Pv;function aw(){return Pv||(Pv=1,vm.exports=iw()),vm.exports}var xm={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function ow(){if(Vv)return pn;Vv=1;var s=yp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},pn.flushSync=function(p){var g=d.T,_=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=g,i.p=_,i.d.f()}},pn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},pn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},pn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,S=m(_,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:E,fetchPriority:k}):_==="script"&&i.d.X(p,{crossOrigin:S,integrity:E,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},pn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},pn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,S=m(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},pn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},pn.requestFormReset=function(p){i.d.r(p)},pn.unstable_batchedUpdates=function(p,g){return p(g)},pn.useFormState=function(p,g,_){return d.H.useFormState(p,g,_)},pn.useFormStatus=function(){return d.H.useHostTransitionStatus()},pn.version="19.1.0",pn}var Lv;function lw(){if(Lv)return xm.exports;Lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),xm.exports=ow(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function uw(){if(Uv)return ql;Uv=1;var s=aw(),e=yp(),n=lw();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(i(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=U&&t[U]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case M:return"Profiler";case B:return"StrictMode";case X:return"Suspense";case re:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case Y:return(t.displayName||"Context")+".Provider";case q:return(t._context.displayName||"Context")+".Consumer";case te:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:xe(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return xe(t(r))}catch{}}return null}var ye=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},pe=[],j=-1;function se(t){return{current:t}}function fe(t){0>j||(t.current=pe[j],pe[j]=null,j--)}function O(t,r){j++,pe[j]=t.current,t.current=r}var J=se(null),ge=se(null),me=se(null),le=se(null);function ae(t,r){switch(O(me,r),O(ge,t),O(J,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?iv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=iv(r),t=av(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(J),O(J,t)}function Ee(){fe(J),fe(ge),fe(me)}function ve(t){t.memoizedState!==null&&O(le,t);var r=J.current,a=av(r,t.type);r!==a&&(O(ge,t),O(J,a))}function Ae(t){ge.current===t&&(fe(J),fe(ge)),le.current===t&&(fe(le),Pl._currentValue=ie)}var st=Object.prototype.hasOwnProperty,Ne=s.unstable_scheduleCallback,Rt=s.unstable_cancelCallback,Pt=s.unstable_shouldYield,Ge=s.unstable_requestPaint,_t=s.unstable_now,ht=s.unstable_getCurrentPriorityLevel,Vt=s.unstable_ImmediatePriority,Ct=s.unstable_UserBlockingPriority,Gt=s.unstable_NormalPriority,vs=s.unstable_LowPriority,Dt=s.unstable_IdlePriority,rn=s.log,Ue=s.unstable_setDisableYieldValue,ke=null,je=null;function We(t){if(typeof rn=="function"&&Ue(t),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(ke,t)}catch{}}var gt=Math.clz32?Math.clz32:qs,Ai=Math.log,fa=Math.LN2;function qs(t){return t>>>=0,t===0?32:31-(Ai(t)/fa|0)|0}var Cn=256,_s=4194304;function as(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ma(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=as(l):(b&=T,b!==0?h=as(b):a||(a=T&~t,a!==0&&(h=as(a))))):(T=l&~f,T!==0?h=as(T):b!==0?h=as(b):a||(a=l&~t,a!==0&&(h=as(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Ri(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Po(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var t=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),t}function Lo(){var t=_s;return _s<<=1,(_s&62914560)===0&&(_s=4194304),t}function Hs(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Fs(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uo(t,r,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,V=t.expirationTimes,$=t.hiddenUpdates;for(a=b&~a;0<a;){var oe=31-gt(a),ce=1<<oe;T[oe]=0,V[oe]=-1;var Z=$[oe];if(Z!==null)for($[oe]=null,oe=0;oe<Z.length;oe++){var W=Z[oe];W!==null&&(W.lane&=-536870913)}a&=~ce}l!==0&&xs(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function xs(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-gt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Bo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-gt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function wr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ar(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:wv(t.type))}function Ou(t,r){var a=ee.p;try{return ee.p=t,r()}finally{ee.p=a}}var Et=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Et,Lt="__reactProps$"+Et,Gn="__reactContainer$"+Et,zo="__reactEvents$"+Et,yd="__reactListeners$"+Et,Rr="__reactHandles$"+Et,Mu="__reactResources$"+Et,Ci="__reactMarker$"+Et;function Cr(t){delete t[Kt],delete t[Lt],delete t[zo],delete t[yd],delete t[Rr]}function Gs(t){var r=t[Kt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Gn]||a[Kt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=cv(t);t!==null;){if(a=t[Kt])return a;t=cv(t)}return r}t=a,a=t.parentNode}return null}function bs(t){if(t=t[Kt]||t[Gn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Es(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function xn(t){var r=t[Mu];return r||(r=t[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(t){t[Ci]=!0}var qo=new Set,ga={};function os(t,r){Ks(t,r),Ks(t+"Capture",r)}function Ks(t,r){for(ga[t]=r,t=0;t<r.length;t++)qo.add(r[t])}var ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ju={},Ni={};function Pu(t){return st.call(Ni,t)?!0:st.call(ju,t)?!1:ku.test(t)?Ni[t]=!0:(ju[t]=!0,!1)}function Nr(t,r,a){if(Pu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ts(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function an(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ii,Vu;function $s(t){if(Ii===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ii=r&&r[1]||"",Vu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ii+t+Vu}var ya=!1;function va(t,r){if(!t||ya)return"";ya=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(W){var Z=W}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(W){Z=W}t.call(ce.prototype)}}else{try{throw Error()}catch(W){Z=W}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(W){if(W&&Z&&typeof W.stack=="string")return[W.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var V=b.split(`
`),$=T.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===$.length)for(l=V.length-1,h=$.length-1;1<=l&&0<=h&&V[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==$[h]){var oe=`
`+V[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=h);break}}}finally{ya=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$s(a):""}function Ho(t){switch(t.tag){case 26:case 27:case 5:return $s(t.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 15:return va(t.type,!1);case 11:return va(t.type.render,!1);case 1:return va(t.type,!0);case 31:return $s("Activity");default:return""}}function _a(t){try{var r="";do r+=Ho(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vd(t){var r=Fo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function xa(t){t._valueTracker||(t._valueTracker=vd(t))}function Go(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Fo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Di(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _d=/[\n"\\]/g;function Ut(t){return t.replace(_d,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function kn(t,r,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+bn(r)):t.value!==""+bn(r)&&(t.value=""+bn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Ir(t,b,bn(r)):a!=null?Ir(t,b,bn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+bn(T):t.removeAttribute("name")}function Oi(t,r,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+bn(a):"",r=r!=null?""+bn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Ir(t,r,a){r==="number"&&Di(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qs(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function dt(t,r,a){if(r!=null&&(r=""+bn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+bn(a):""}function Mi(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(ye(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=bn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Kn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ki.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Ko(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Lu(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Lu(t,f,r[f])}function $o(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(t){return bd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ys=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xs=null,Zs=null;function Qo(t){var r=bs(t);if(r&&(t=r.stateNode)){var a=t[Lt]||null;e:switch(t=r.stateNode,r.type){case"input":if(kn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ut(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Lt]||null;if(!h)throw Error(i(90));kn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Go(l)}break e;case"textarea":dt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Qs(t,!!a.multiple,r,!1)}}}var Ss=!1;function Uu(t,r,a){if(Ss)return t(r,a);Ss=!0;try{var l=t(r);return l}finally{if(Ss=!1,(Xs!==null||Zs!==null)&&(Oc(),Xs&&(r=Xs,t=Zs,Zs=Xs=null,Qo(r),t)))for(r=0;r<t.length;r++)Qo(t[r])}}function ji(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Lt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=!1;if(ls)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Qn=!1}var ws=null,Dr=null,Ws=null;function Yo(){if(Ws)return Ws;var t,r=Dr,a=r.length,l,h="value"in ws?ws.value:ws.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&r[a-l]===h[f-l];l++);return Ws=h.slice(t,1<l?1-l:void 0)}function As(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Rs(){return!0}function Xo(){return!1}function Wt(t){function r(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Rs:Xo,this.isPropagationStopped=Xo,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),r}var at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=Wt(at),Vi=_({},at,{view:0,detail:0}),Bu=Wt(Vi),Ta,Sa,Cs,Li=_({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cs&&(Cs&&t.type==="mousemove"?(Ta=t.screenX-Cs.screenX,Sa=t.screenY-Cs.screenY):Sa=Ta=0,Cs=t),Ta)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Yn=Wt(Li),zu=_({},Li,{dataTransfer:0}),Ed=Wt(zu),Ui=_({},Vi,{relatedTarget:0}),wa=Wt(Ui),Zo=_({},at,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Wt(Zo),qu=_({},at,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ra=Wt(qu),Td=_({},at,{data:0}),Wo=Wt(Td),Bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Fu[t])?!!r[t]:!1}function zi(){return Jo}var Gu=_({},Vi,{key:function(t){if(t.key){var r=Bi[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=As(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zi,charCode:function(t){return t.type==="keypress"?As(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?As(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ca=Wt(Gu),Ku=_({},Li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),el=Wt(Ku),Js=_({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zi}),$u=Wt(Js),Qu=_({},at,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yu=Wt(Qu),Xu=_({},Li,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Na=Wt(Xu),En=_({},at,{newState:0,oldState:0}),Zu=Wt(En),Wu=[9,13,27,32],Ns=ls&&"CompositionEvent"in window,c=null;ls&&"documentMode"in document&&(c=document.documentMode);var v=ls&&"TextEvent"in window&&!c,x=ls&&(!Ns||c&&8<c&&11>=c),w=" ",G=!1;function ne(t,r){switch(t){case"keyup":return Wu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Je=!1;function $t(t,r){switch(t){case"compositionend":return _e(r);case"keypress":return r.which!==32?null:(G=!0,w);case"textInput":return t=r.data,t===w&&G?null:t;default:return null}}function et(t,r){if(Je)return t==="compositionend"||!Ns&&ne(t,r)?(t=Yo(),Ws=Dr=ws=null,Je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return x&&r.locale!=="ko"?null:r.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Jt[t.type]:r==="textarea"}function er(t,r,a,l){Xs?Zs?Zs.push(l):Zs=[l]:Xs=l,r=Lc(r,"onChange"),0<r.length&&(a=new Ea("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var on=null,Is=null;function tl(t){ev(t,0)}function Ju(t){var r=Es(t);if(Go(r))return t}function bg(t,r){if(t==="change")return r}var Eg=!1;if(ls){var Sd;if(ls){var wd="oninput"in document;if(!wd){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),wd=typeof Tg.oninput=="function"}Sd=wd}else Sd=!1;Eg=Sd&&(!document.documentMode||9<document.documentMode)}function Sg(){on&&(on.detachEvent("onpropertychange",wg),Is=on=null)}function wg(t){if(t.propertyName==="value"&&Ju(Is)){var r=[];er(r,Is,t,$n(t)),Uu(tl,r)}}function OT(t,r,a){t==="focusin"?(Sg(),on=r,Is=a,on.attachEvent("onpropertychange",wg)):t==="focusout"&&Sg()}function MT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(Is)}function kT(t,r){if(t==="click")return Ju(r)}function jT(t,r){if(t==="input"||t==="change")return Ju(r)}function PT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var jn=typeof Object.is=="function"?Object.is:PT;function nl(t,r){if(jn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!st.call(r,h)||!jn(t[h],r[h]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rg(t,r){var a=Ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ag(a)}}function Cg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Cg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ng(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Di(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Di(t.document)}return r}function Ad(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var VT=ls&&"documentMode"in document&&11>=document.documentMode,Ia=null,Rd=null,sl=null,Cd=!1;function Ig(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cd||Ia==null||Ia!==Di(l)||(l=Ia,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sl&&nl(sl,l)||(sl=l,l=Lc(Rd,"onSelect"),0<l.length&&(r=new Ea("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ia)))}function qi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Da={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},Nd={},Dg={};ls&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Hi(t){if(Nd[t])return Nd[t];if(!Da[t])return t;var r=Da[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dg)return Nd[t]=r[a];return t}var Og=Hi("animationend"),Mg=Hi("animationiteration"),kg=Hi("animationstart"),LT=Hi("transitionrun"),UT=Hi("transitionstart"),BT=Hi("transitioncancel"),jg=Hi("transitionend"),Pg=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function us(t,r){Pg.set(t,r),os(r,[t])}var Vg=new WeakMap;function Xn(t,r){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:_a(r)},Vg.set(t,r),r)}return{value:t,source:r,stack:_a(r)}}var Zn=[],Oa=0,Dd=0;function ec(){for(var t=Oa,r=Dd=Oa=0;r<t;){var a=Zn[r];Zn[r++]=null;var l=Zn[r];Zn[r++]=null;var h=Zn[r];Zn[r++]=null;var f=Zn[r];if(Zn[r++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Lg(a,h,f)}}function tc(t,r,a,l){Zn[Oa++]=t,Zn[Oa++]=r,Zn[Oa++]=a,Zn[Oa++]=l,Dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Od(t,r,a,l){return tc(t,r,a,l),nc(t)}function Ma(t,r){return tc(t,null,null,r),nc(t)}function Lg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-gt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function nc(t){if(50<Cl)throw Cl=0,Uf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ka={};function zT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,r,a,l){return new zT(t,r,a,l)}function Md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,r){var a=t.alternate;return a===null?(a=Pn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function sc(t,r,a,l,h,f){var b=0;if(l=t,typeof t=="function")Md(t)&&(b=1);else if(typeof t=="string")b=HS(t,a,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=Pn(31,a,r,h),t.elementType=D,t.lanes=f,t;case I:return Fi(a.children,h,f,r);case B:b=8,h|=24;break;case M:return t=Pn(12,a,r,h|2),t.elementType=M,t.lanes=f,t;case X:return t=Pn(13,a,r,h),t.elementType=X,t.lanes=f,t;case re:return t=Pn(19,a,r,h),t.elementType=re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:case Y:b=10;break e;case q:b=9;break e;case te:b=11;break e;case N:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Pn(b,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Fi(t,r,a,l){return t=Pn(7,t,l,r),t.lanes=a,t}function kd(t,r,a){return t=Pn(6,t,null,r),t.lanes=a,t}function jd(t,r,a){return r=Pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ja=[],Pa=0,rc=null,ic=0,Wn=[],Jn=0,Gi=null,nr=1,sr="";function Ki(t,r){ja[Pa++]=ic,ja[Pa++]=rc,rc=t,ic=r}function Bg(t,r,a){Wn[Jn++]=nr,Wn[Jn++]=sr,Wn[Jn++]=Gi,Gi=t;var l=nr;t=sr;var h=32-gt(l)-1;l&=~(1<<h),a+=1;var f=32-gt(r)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,nr=1<<32-gt(r)+h|a<<h|l,sr=f+t}else nr=1<<f|a<<h|l,sr=t}function Pd(t){t.return!==null&&(Ki(t,1),Bg(t,1,0))}function Vd(t){for(;t===rc;)rc=ja[--Pa],ja[Pa]=null,ic=ja[--Pa],ja[Pa]=null;for(;t===Gi;)Gi=Wn[--Jn],Wn[Jn]=null,sr=Wn[--Jn],Wn[Jn]=null,nr=Wn[--Jn],Wn[Jn]=null}var Tn=null,Nt=null,it=!1,$i=null,Ds=!1,Ld=Error(i(519));function Qi(t){var r=Error(i(418,""));throw al(Xn(r,t)),Ld}function zg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Kt]=t,r[Lt]=l,a){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(a=0;a<Il.length;a++)Qe(Il[a],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),Oi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xa(r);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),Mi(r,l.value,l.defaultValue,l.children),xa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||rv(r.textContent,a)?(l.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),l.onScroll!=null&&Qe("scroll",r),l.onScrollEnd!=null&&Qe("scrollend",r),l.onClick!=null&&(r.onclick=Uc),r=!0):r=!1,r||Qi(t)}function qg(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:Ds=!1;return;case 27:case 3:Ds=!0;return;default:Tn=Tn.return}}function rl(t){if(t!==Tn)return!1;if(!it)return qg(t),it=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&Nt&&Qi(t),qg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Nt=hs(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Nt=null}}else r===27?(r=Nt,$r(t.type)?(t=im,im=null,Nt=t):Nt=r):Nt=Tn?hs(t.stateNode.nextSibling):null;return!0}function il(){Nt=Tn=null,it=!1}function Hg(){var t=$i;return t!==null&&(Dn===null?Dn=t:Dn.push.apply(Dn,t),$i=null),t}function al(t){$i===null?$i=[t]:$i.push(t)}var Ud=se(null),Yi=null,rr=null;function Or(t,r,a){O(Ud,r._currentValue),r._currentValue=a}function ir(t){t._currentValue=Ud.current,fe(Ud)}function Bd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var V=0;V<r.length;V++)if(T.context===r[V]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Bd(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Bd(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function ol(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var T=h.type;jn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===le.current){if(b=h.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&zd(r,t,a,l),r.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!jn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xi(t){Yi=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mn(t){return Fg(Yi,t)}function oc(t,r){return Yi===null&&Xi(t),Fg(t,r)}function Fg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(i(308));rr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else rr=rr.next=r;return a}var qT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},HT=s.unstable_scheduleCallback,FT=s.unstable_NormalPriority,Yt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qd(){return{controller:new qT,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&HT(FT,function(){t.controller.abort()})}var ul=null,Hd=0,Va=0,La=null;function GT(t,r){if(ul===null){var a=ul=[];Hd=0,Va=Kf(),La={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Hd++,r.then(Gg,Gg),r}function Gg(){if(--Hd===0&&ul!==null){La!==null&&(La.status="fulfilled");var t=ul;ul=null,Va=0,La=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function KT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Kg=Q.S;Q.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&GT(t,r),Kg!==null&&Kg(t,r)};var Zi=se(null);function Fd(){var t=Zi.current;return t!==null?t:vt.pooledCache}function lc(t,r){r===null?O(Zi,Zi.current):O(Zi,r.pool)}function $g(){var t=Fd();return t===null?null:{parent:Yt._currentValue,pool:t}}var cl=Error(i(460)),Qg=Error(i(474)),uc=Error(i(542)),Gd={then:function(){}};function Yg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cc(){}function Xg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(cc,cc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Wg(t),t;default:if(typeof r.status=="string")r.then(cc,cc);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Wg(t),t}throw hl=r,cl}}var hl=null;function Zg(){if(hl===null)throw Error(i(459));var t=hl;return hl=null,t}function Wg(t){if(t===cl||t===uc)throw Error(i(483))}var Mr=!1;function Kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function kr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function jr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(lt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=nc(t),Lg(t,null,a),r}return tc(t,l,r,a),nc(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Bo(t,a)}}function Qd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Yd=!1;function fl(){if(Yd){var t=La;if(t!==null)throw t}}function ml(t,r,a,l){Yd=!1;var h=t.updateQueue;Mr=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var V=T,$=V.next;V.next=null,b===null?f=$:b.next=$,b=V;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,T=oe.lastBaseUpdate,T!==b&&(T===null?oe.firstBaseUpdate=$:T.next=$,oe.lastBaseUpdate=V))}if(f!==null){var ce=h.baseState;b=0,oe=$=V=null,T=f;do{var Z=T.lane&-536870913,W=Z!==T.lane;if(W?(tt&Z)===Z:(l&Z)===Z){Z!==0&&Z===Va&&(Yd=!0),oe!==null&&(oe=oe.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Pe=t,Ie=T;Z=r;var pt=a;switch(Ie.tag){case 1:if(Pe=Ie.payload,typeof Pe=="function"){ce=Pe.call(pt,ce,Z);break e}ce=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ie.payload,Z=typeof Pe=="function"?Pe.call(pt,ce,Z):Pe,Z==null)break e;ce=_({},ce,Z);break e;case 2:Mr=!0}}Z=T.callback,Z!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[Z]:W.push(Z))}else W={lane:Z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},oe===null?($=oe=W,V=ce):oe=oe.next=W,b|=Z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;W=T,T=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);oe===null&&(V=ce),h.baseState=V,h.firstBaseUpdate=$,h.lastBaseUpdate=oe,f===null&&(h.shared.lanes=0),Hr|=b,t.lanes=b,t.memoizedState=ce}}function Jg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function ey(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jg(a[t],r)}var Ua=se(null),hc=se(0);function ty(t,r){t=dr,O(hc,t),O(Ua,r),dr=t|r.baseLanes}function Xd(){O(hc,dr),O(Ua,Ua.current)}function Zd(){dr=hc.current,fe(Ua),fe(hc)}var Pr=0,qe=null,ft=null,Bt=null,dc=!1,Ba=!1,Wi=!1,fc=0,pl=0,za=null,$T=0;function Mt(){throw Error(i(321))}function Wd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!jn(t[a],r[a]))return!1;return!0}function Jd(t,r,a,l,h,f){return Pr=f,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?Ly:Uy,Wi=!1,f=a(l,h),Wi=!1,Ba&&(f=sy(r,a,l,h)),ny(t),f}function ny(t){Q.H=_c;var r=ft!==null&&ft.next!==null;if(Pr=0,Bt=ft=qe=null,dc=!1,pl=0,za=null,r)throw Error(i(300));t===null||en||(t=t.dependencies,t!==null&&ac(t)&&(en=!0))}function sy(t,r,a,l){qe=t;var h=0;do{if(Ba&&(za=null),pl=0,Ba=!1,25<=h)throw Error(i(301));if(h+=1,Bt=ft=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=eS,f=r(a,l)}while(Ba);return f}function QT(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?gl(r):r,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(qe.flags|=1024),r}function ef(){var t=fc!==0;return fc=0,t}function tf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function nf(t){if(dc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}dc=!1}Pr=0,Bt=ft=qe=null,Ba=!1,pl=fc=0,za=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function zt(){if(ft===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=Bt===null?qe.memoizedState:Bt.next;if(r!==null)Bt=r,ft=t;else{if(t===null)throw qe.alternate===null?Error(i(467)):Error(i(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Bt===null?qe.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var r=pl;return pl+=1,za===null&&(za=[]),t=Xg(za,t,r),r=qe,(Bt===null?r.memoizedState:Bt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?Ly:Uy),t}function mc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===Y)return mn(t)}throw Error(i(438,String(t)))}function rf(t){var r=null,a=qe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=sf(),qe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=P;return r.index++,a}function ar(t,r){return typeof r=="function"?r(t):r}function pc(t){var r=zt();return af(r,ft,t)}function af(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var T=b=null,V=null,$=r,oe=!1;do{var ce=$.lane&-536870913;if(ce!==$.lane?(tt&ce)===ce:(Pr&ce)===ce){var Z=$.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ce===Va&&(oe=!0);else if((Pr&Z)===Z){$=$.next,Z===Va&&(oe=!0);continue}else ce={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=ce,b=f):V=V.next=ce,qe.lanes|=Z,Hr|=Z;ce=$.action,Wi&&a(f,ce),f=$.hasEagerState?$.eagerState:a(f,ce)}else Z={lane:ce,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(T=V=Z,b=f):V=V.next=Z,qe.lanes|=ce,Hr|=ce;$=$.next}while($!==null&&$!==r);if(V===null?b=f:V.next=T,!jn(f,t.memoizedState)&&(en=!0,oe&&(a=La,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=V,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function of(t){var r=zt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);jn(f,r.memoizedState)||(en=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ry(t,r,a){var l=qe,h=zt(),f=it;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=r();var b=!jn((ft||h).memoizedState,a);b&&(h.memoizedState=a,en=!0),h=h.queue;var T=oy.bind(null,l,h,t);if(yl(2048,8,T,[t]),h.getSnapshot!==r||b||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,qa(9,gc(),ay.bind(null,l,h,a,r),null),vt===null)throw Error(i(349));f||(Pr&124)!==0||iy(l,r,a)}return a}function iy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=qe.updateQueue,r===null?(r=sf(),qe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ay(t,r,a,l){r.value=a,r.getSnapshot=l,ly(r)&&uy(t)}function oy(t,r,a){return a(function(){ly(r)&&uy(t)})}function ly(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!jn(t,a)}catch{return!0}}function uy(t){var r=Ma(t,2);r!==null&&zn(r,t,2)}function lf(t){var r=Nn();if(typeof t=="function"){var a=t;if(t=a(),Wi){We(!0);try{a()}finally{We(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},r}function cy(t,r,a,l){return t.baseState=a,af(t,ft,typeof l=="function"?l:ar)}function YT(t,r,a,l,h){if(vc(t))throw Error(i(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,hy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function hy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=Q.T,b={};Q.T=b;try{var T=a(h,l),V=Q.S;V!==null&&V(b,T),dy(t,r,T)}catch($){uf(t,r,$)}finally{Q.T=f}}else try{f=a(h,l),dy(t,r,f)}catch($){uf(t,r,$)}}function dy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fy(t,r,l)},function(l){return uf(t,r,l)}):fy(t,r,a)}function fy(t,r,a){r.status="fulfilled",r.value=a,my(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,hy(t,a)))}function uf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,my(r),r=r.next;while(r!==l)}t.action=null}function my(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function py(t,r){return r}function gy(t,r){if(it){var a=vt.formState;if(a!==null){e:{var l=qe;if(it){if(Nt){t:{for(var h=Nt,f=Ds;h.nodeType!==8;){if(!f){h=null;break t}if(h=hs(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Nt=hs(h.nextSibling),l=h.data==="F!";break e}}Qi(l)}l=!1}l&&(r=a[0])}}return a=Nn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:r},a.queue=l,a=jy.bind(null,qe,l),l.dispatch=a,l=lf(!1),f=mf.bind(null,qe,!1,l.queue),l=Nn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=YT.bind(null,qe,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function yy(t){var r=zt();return vy(r,ft,t)}function vy(t,r,a){if(r=af(t,r,py)[0],t=pc(ar)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=gl(r)}catch(b){throw b===cl?uc:b}else l=r;r=zt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(qe.flags|=2048,qa(9,gc(),XT.bind(null,h,a),null)),[l,f,t]}function XT(t,r){t.action=r}function _y(t){var r=zt(),a=ft;if(a!==null)return vy(r,a,t);zt(),r=r.memoizedState,a=zt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function qa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=qe.updateQueue,r===null&&(r=sf(),qe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function gc(){return{destroy:void 0,resource:void 0}}function xy(){return zt().memoizedState}function yc(t,r,a,l){var h=Nn();l=l===void 0?null:l,qe.flags|=t,h.memoizedState=qa(1|r,gc(),a,l)}function yl(t,r,a,l){var h=zt();l=l===void 0?null:l;var f=h.memoizedState.inst;ft!==null&&l!==null&&Wd(l,ft.memoizedState.deps)?h.memoizedState=qa(r,f,a,l):(qe.flags|=t,h.memoizedState=qa(1|r,f,a,l))}function by(t,r){yc(8390656,8,t,r)}function Ey(t,r){yl(2048,8,t,r)}function Ty(t,r){return yl(4,2,t,r)}function Sy(t,r){return yl(4,4,t,r)}function wy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ay(t,r,a){a=a!=null?a.concat([t]):null,yl(4,4,wy.bind(null,r,t),a)}function cf(){}function Ry(t,r){var a=zt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Wd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Cy(t,r){var a=zt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Wd(r,l[1]))return l[0];if(l=t(),Wi){We(!0);try{t()}finally{We(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(Pr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=D0(),qe.lanes|=t,Hr|=t,a)}function Ny(t,r,a,l){return jn(a,r)?a:Ua.current!==null?(t=hf(t,a,l),jn(t,r)||(en=!0),t):(Pr&42)===0?(en=!0,t.memoizedState=a):(t=D0(),qe.lanes|=t,Hr|=t,r)}function Iy(t,r,a,l,h){var f=ee.p;ee.p=f!==0&&8>f?f:8;var b=Q.T,T={};Q.T=T,mf(t,!1,r,a);try{var V=h(),$=Q.S;if($!==null&&$(T,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var oe=KT(V,l);vl(t,r,oe,Bn(t))}else vl(t,r,l,Bn(t))}catch(ce){vl(t,r,{then:function(){},status:"rejected",reason:ce},Bn())}finally{ee.p=f,Q.T=b}}function ZT(){}function df(t,r,a,l){if(t.tag!==5)throw Error(i(476));var h=Dy(t).queue;Iy(t,h,r,ie,a===null?ZT:function(){return Oy(t),a(l)})}function Dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:ie},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Oy(t){var r=Dy(t).next.queue;vl(t,r,{},Bn())}function ff(){return mn(Pl)}function My(){return zt().memoizedState}function ky(){return zt().memoizedState}function WT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Bn();t=kr(a);var l=jr(r,t,a);l!==null&&(zn(l,r,a),dl(l,r,a)),r={cache:qd()},t.payload=r;return}r=r.return}}function JT(t,r,a){var l=Bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},vc(t)?Py(r,a):(a=Od(t,r,a,l),a!==null&&(zn(a,t,l),Vy(a,r,l)))}function jy(t,r,a){var l=Bn();vl(t,r,a,l)}function vl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(vc(t))Py(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,jn(T,b))return tc(t,r,h,0),vt===null&&ec(),!1}catch{}finally{}if(a=Od(t,r,h,l),a!==null)return zn(a,t,l),Vy(a,r,l),!0}return!1}function mf(t,r,a,l){if(l={lane:2,revertLane:Kf(),action:l,hasEagerState:!1,eagerState:null,next:null},vc(t)){if(r)throw Error(i(479))}else r=Od(t,a,l,2),r!==null&&zn(r,t,2)}function vc(t){var r=t.alternate;return t===qe||r!==null&&r===qe}function Py(t,r){Ba=dc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Vy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Bo(t,a)}}var _c={readContext:mn,use:mc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Ly={readContext:mn,use:mc,useCallback:function(t,r){return Nn().memoizedState=[t,r===void 0?null:r],t},useContext:mn,useEffect:by,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,yc(4194308,4,wy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return yc(4194308,4,t,r)},useInsertionEffect:function(t,r){yc(4,2,t,r)},useMemo:function(t,r){var a=Nn();r=r===void 0?null:r;var l=t();if(Wi){We(!0);try{t()}finally{We(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Nn();if(a!==void 0){var h=a(r);if(Wi){We(!0);try{a(r)}finally{We(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=JT.bind(null,qe,t),[l.memoizedState,t]},useRef:function(t){var r=Nn();return t={current:t},r.memoizedState=t},useState:function(t){t=lf(t);var r=t.queue,a=jy.bind(null,qe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(t,r){var a=Nn();return hf(a,t,r)},useTransition:function(){var t=lf(!1);return t=Iy.bind(null,qe,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=qe,h=Nn();if(it){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),vt===null)throw Error(i(349));(tt&124)!==0||iy(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,by(oy.bind(null,l,f,t),[t]),l.flags|=2048,qa(9,gc(),ay.bind(null,l,f,a,r),null),a},useId:function(){var t=Nn(),r=vt.identifierPrefix;if(it){var a=sr,l=nr;a=(l&~(1<<32-gt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=fc++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=$T++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:ff,useFormState:gy,useActionState:gy,useOptimistic:function(t){var r=Nn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=mf.bind(null,qe,!0,a),a.dispatch=r,[t,r]},useMemoCache:rf,useCacheRefresh:function(){return Nn().memoizedState=WT.bind(null,qe)}},Uy={readContext:mn,use:mc,useCallback:Ry,useContext:mn,useEffect:Ey,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Cy,useReducer:pc,useRef:xy,useState:function(){return pc(ar)},useDebugValue:cf,useDeferredValue:function(t,r){var a=zt();return Ny(a,ft.memoizedState,t,r)},useTransition:function(){var t=pc(ar)[0],r=zt().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:ry,useId:My,useHostTransitionStatus:ff,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=zt();return cy(a,ft,t,r)},useMemoCache:rf,useCacheRefresh:ky},eS={readContext:mn,use:mc,useCallback:Ry,useContext:mn,useEffect:Ey,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Cy,useReducer:of,useRef:xy,useState:function(){return of(ar)},useDebugValue:cf,useDeferredValue:function(t,r){var a=zt();return ft===null?hf(a,t,r):Ny(a,ft.memoizedState,t,r)},useTransition:function(){var t=of(ar)[0],r=zt().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:ry,useId:My,useHostTransitionStatus:ff,useFormState:_y,useActionState:_y,useOptimistic:function(t,r){var a=zt();return ft!==null?cy(a,ft,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:ky},Ha=null,_l=0;function xc(t){var r=_l;return _l+=1,Ha===null&&(Ha=[]),Xg(Ha,t,r)}function xl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function bc(t,r){throw r.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function By(t){var r=t._init;return r(t._payload)}function zy(t){function r(F,H){if(t){var K=F.deletions;K===null?(F.deletions=[H],F.flags|=16):K.push(H)}}function a(F,H){if(!t)return null;for(;H!==null;)r(F,H),H=H.sibling;return null}function l(F){for(var H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function h(F,H){return F=tr(F,H),F.index=0,F.sibling=null,F}function f(F,H,K){return F.index=K,t?(K=F.alternate,K!==null?(K=K.index,K<H?(F.flags|=67108866,H):K):(F.flags|=67108866,H)):(F.flags|=1048576,H)}function b(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function T(F,H,K,ue){return H===null||H.tag!==6?(H=kd(K,F.mode,ue),H.return=F,H):(H=h(H,K),H.return=F,H)}function V(F,H,K,ue){var we=K.type;return we===I?oe(F,H,K.props.children,ue,K.key):H!==null&&(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&By(we)===H.type)?(H=h(H,K.props),xl(H,K),H.return=F,H):(H=sc(K.type,K.key,K.props,null,F.mode,ue),xl(H,K),H.return=F,H)}function $(F,H,K,ue){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=jd(K,F.mode,ue),H.return=F,H):(H=h(H,K.children||[]),H.return=F,H)}function oe(F,H,K,ue,we){return H===null||H.tag!==7?(H=Fi(K,F.mode,ue,we),H.return=F,H):(H=h(H,K),H.return=F,H)}function ce(F,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=kd(""+H,F.mode,K),H.return=F,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return K=sc(H.type,H.key,H.props,null,F.mode,K),xl(K,H),K.return=F,K;case k:return H=jd(H,F.mode,K),H.return=F,H;case R:var ue=H._init;return H=ue(H._payload),ce(F,H,K)}if(ye(H)||L(H))return H=Fi(H,F.mode,K,null),H.return=F,H;if(typeof H.then=="function")return ce(F,xc(H),K);if(H.$$typeof===Y)return ce(F,oc(F,H),K);bc(F,H)}return null}function Z(F,H,K,ue){var we=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:T(F,H,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return K.key===we?V(F,H,K,ue):null;case k:return K.key===we?$(F,H,K,ue):null;case R:return we=K._init,K=we(K._payload),Z(F,H,K,ue)}if(ye(K)||L(K))return we!==null?null:oe(F,H,K,ue,null);if(typeof K.then=="function")return Z(F,H,xc(K),ue);if(K.$$typeof===Y)return Z(F,H,oc(F,K),ue);bc(F,K)}return null}function W(F,H,K,ue,we){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(K)||null,T(H,F,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case E:return F=F.get(ue.key===null?K:ue.key)||null,V(H,F,ue,we);case k:return F=F.get(ue.key===null?K:ue.key)||null,$(H,F,ue,we);case R:var Ke=ue._init;return ue=Ke(ue._payload),W(F,H,K,ue,we)}if(ye(ue)||L(ue))return F=F.get(K)||null,oe(H,F,ue,we,null);if(typeof ue.then=="function")return W(F,H,K,xc(ue),we);if(ue.$$typeof===Y)return W(F,H,K,oc(H,ue),we);bc(H,ue)}return null}function Pe(F,H,K,ue){for(var we=null,Ke=null,Re=H,De=H=0,nn=null;Re!==null&&De<K.length;De++){Re.index>De?(nn=Re,Re=null):nn=Re.sibling;var rt=Z(F,Re,K[De],ue);if(rt===null){Re===null&&(Re=nn);break}t&&Re&&rt.alternate===null&&r(F,Re),H=f(rt,H,De),Ke===null?we=rt:Ke.sibling=rt,Ke=rt,Re=nn}if(De===K.length)return a(F,Re),it&&Ki(F,De),we;if(Re===null){for(;De<K.length;De++)Re=ce(F,K[De],ue),Re!==null&&(H=f(Re,H,De),Ke===null?we=Re:Ke.sibling=Re,Ke=Re);return it&&Ki(F,De),we}for(Re=l(Re);De<K.length;De++)nn=W(Re,F,De,K[De],ue),nn!==null&&(t&&nn.alternate!==null&&Re.delete(nn.key===null?De:nn.key),H=f(nn,H,De),Ke===null?we=nn:Ke.sibling=nn,Ke=nn);return t&&Re.forEach(function(Wr){return r(F,Wr)}),it&&Ki(F,De),we}function Ie(F,H,K,ue){if(K==null)throw Error(i(151));for(var we=null,Ke=null,Re=H,De=H=0,nn=null,rt=K.next();Re!==null&&!rt.done;De++,rt=K.next()){Re.index>De?(nn=Re,Re=null):nn=Re.sibling;var Wr=Z(F,Re,rt.value,ue);if(Wr===null){Re===null&&(Re=nn);break}t&&Re&&Wr.alternate===null&&r(F,Re),H=f(Wr,H,De),Ke===null?we=Wr:Ke.sibling=Wr,Ke=Wr,Re=nn}if(rt.done)return a(F,Re),it&&Ki(F,De),we;if(Re===null){for(;!rt.done;De++,rt=K.next())rt=ce(F,rt.value,ue),rt!==null&&(H=f(rt,H,De),Ke===null?we=rt:Ke.sibling=rt,Ke=rt);return it&&Ki(F,De),we}for(Re=l(Re);!rt.done;De++,rt=K.next())rt=W(Re,F,De,rt.value,ue),rt!==null&&(t&&rt.alternate!==null&&Re.delete(rt.key===null?De:rt.key),H=f(rt,H,De),Ke===null?we=rt:Ke.sibling=rt,Ke=rt);return t&&Re.forEach(function(tw){return r(F,tw)}),it&&Ki(F,De),we}function pt(F,H,K,ue){if(typeof K=="object"&&K!==null&&K.type===I&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case E:e:{for(var we=K.key;H!==null;){if(H.key===we){if(we=K.type,we===I){if(H.tag===7){a(F,H.sibling),ue=h(H,K.props.children),ue.return=F,F=ue;break e}}else if(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&By(we)===H.type){a(F,H.sibling),ue=h(H,K.props),xl(ue,K),ue.return=F,F=ue;break e}a(F,H);break}else r(F,H);H=H.sibling}K.type===I?(ue=Fi(K.props.children,F.mode,ue,K.key),ue.return=F,F=ue):(ue=sc(K.type,K.key,K.props,null,F.mode,ue),xl(ue,K),ue.return=F,F=ue)}return b(F);case k:e:{for(we=K.key;H!==null;){if(H.key===we)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){a(F,H.sibling),ue=h(H,K.children||[]),ue.return=F,F=ue;break e}else{a(F,H);break}else r(F,H);H=H.sibling}ue=jd(K,F.mode,ue),ue.return=F,F=ue}return b(F);case R:return we=K._init,K=we(K._payload),pt(F,H,K,ue)}if(ye(K))return Pe(F,H,K,ue);if(L(K)){if(we=L(K),typeof we!="function")throw Error(i(150));return K=we.call(K),Ie(F,H,K,ue)}if(typeof K.then=="function")return pt(F,H,xc(K),ue);if(K.$$typeof===Y)return pt(F,H,oc(F,K),ue);bc(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(a(F,H.sibling),ue=h(H,K),ue.return=F,F=ue):(a(F,H),ue=kd(K,F.mode,ue),ue.return=F,F=ue),b(F)):a(F,H)}return function(F,H,K,ue){try{_l=0;var we=pt(F,H,K,ue);return Ha=null,we}catch(Re){if(Re===cl||Re===uc)throw Re;var Ke=Pn(29,Re,null,F.mode);return Ke.lanes=ue,Ke.return=F,Ke}finally{}}}var Fa=zy(!0),qy=zy(!1),es=se(null),Os=null;function Vr(t){var r=t.alternate;O(Xt,Xt.current&1),O(es,t),Os===null&&(r===null||Ua.current!==null||r.memoizedState!==null)&&(Os=t)}function Hy(t){if(t.tag===22){if(O(Xt,Xt.current),O(es,t),Os===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Os=t)}}else Lr()}function Lr(){O(Xt,Xt.current),O(es,es.current)}function or(t){fe(es),Os===t&&(Os=null),fe(Xt)}var Xt=se(0);function Ec(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||rm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function pf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Bn(),h=kr(l);h.payload=r,a!=null&&(h.callback=a),r=jr(t,h,l),r!==null&&(zn(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Bn(),h=kr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=jr(t,h,l),r!==null&&(zn(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Bn(),l=kr(a);l.tag=2,r!=null&&(l.callback=r),r=jr(t,l,a),r!==null&&(zn(r,t,a),dl(r,t,a))}};function Fy(t,r,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!nl(a,l)||!nl(h,f):!0}function Gy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&gf.enqueueReplaceState(r,r.state,null)}function Ji(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ky(t){Tc(t)}function $y(t){console.error(t)}function Qy(t){Tc(t)}function Sc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Yy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yf(t,r,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){Sc(t,r)},a}function Xy(t){return t=kr(t),t.tag=3,t}function Zy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Yy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Yy(r,a,l),typeof h!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function tS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ol(r,a,h,!0),a=es.current,a!==null){switch(a.tag){case 13:return Os===null?zf():a.alternate===null&&It===0&&(It=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,h)),!1;case 22:return a.flags|=65536,l===Gd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,h)),!1}throw Error(i(435,a.tag))}return Hf(t,l,h),zf(),!1}if(it)return r=es.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Ld&&(t=Error(i(422),{cause:l}),al(Xn(t,a)))):(l!==Ld&&(r=Error(i(423),{cause:l}),al(Xn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Xn(l,a),h=yf(t.stateNode,l,h),Qd(t,h),It!==4&&(It=2)),!1;var f=Error(i(520),{cause:l});if(f=Xn(f,a),Rl===null?Rl=[f]:Rl.push(f),It!==4&&(It=2),r===null)return!0;l=Xn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=yf(a.stateNode,l,t),Qd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Fr===null||!Fr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Xy(h),Zy(h,t,a,l),Qd(a,h),!1}a=a.return}while(a!==null);return!1}var Wy=Error(i(461)),en=!1;function ln(t,r,a,l){r.child=t===null?qy(r,null,a,l):Fa(r,t.child,a,l)}function Jy(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Xi(r),l=Jd(t,r,a,b,f,h),T=ef(),t!==null&&!en?(tf(t,r,h),lr(t,r,h)):(it&&T&&Pd(r),r.flags|=1,ln(t,r,l,h),r.child)}function e0(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Md(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,t0(t,r,f,l,h)):(t=sc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!wf(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(b,l)&&t.ref===r.ref)return lr(t,r,h)}return r.flags|=1,t=tr(f,l),t.ref=r.ref,t.return=r,r.child=t}function t0(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(nl(f,l)&&t.ref===r.ref)if(en=!1,r.pendingProps=l=f,wf(t,h))(t.flags&131072)!==0&&(en=!0);else return r.lanes=t.lanes,lr(t,r,h)}return vf(t,r,a,l,h)}function n0(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return s0(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&lc(r,f!==null?f.cachePool:null),f!==null?ty(r,f):Xd(),Hy(r);else return r.lanes=r.childLanes=536870912,s0(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(lc(r,f.cachePool),ty(r,f),Lr(),r.memoizedState=null):(t!==null&&lc(r,null),Xd(),Lr());return ln(t,r,h,a),r.child}function s0(t,r,a,l){var h=Fd();return h=h===null?null:{parent:Yt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&lc(r,null),Xd(),Hy(r),t!==null&&ol(t,r,l,!0),null}function wc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function vf(t,r,a,l,h){return Xi(r),a=Jd(t,r,a,l,void 0,h),l=ef(),t!==null&&!en?(tf(t,r,h),lr(t,r,h)):(it&&l&&Pd(r),r.flags|=1,ln(t,r,a,h),r.child)}function r0(t,r,a,l,h,f){return Xi(r),r.updateQueue=null,a=sy(r,l,a,h),ny(t),l=ef(),t!==null&&!en?(tf(t,r,f),lr(t,r,f)):(it&&l&&Pd(r),r.flags|=1,ln(t,r,a,f),r.child)}function i0(t,r,a,l,h){if(Xi(r),r.stateNode===null){var f=ka,b=a.contextType;typeof b=="object"&&b!==null&&(f=mn(b)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=gf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Kd(r),b=a.contextType,f.context=typeof b=="object"&&b!==null?mn(b):ka,f.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(pf(r,a,b,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&gf.enqueueReplaceState(f,f.state,null),ml(r,l,f,h),fl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var T=r.memoizedProps,V=Ji(a,T);f.props=V;var $=f.context,oe=a.contextType;b=ka,typeof oe=="object"&&oe!==null&&(b=mn(oe));var ce=a.getDerivedStateFromProps;oe=typeof ce=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,oe||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||$!==b)&&Gy(r,f,l,b),Mr=!1;var Z=r.memoizedState;f.state=Z,ml(r,l,f,h),fl(),$=r.memoizedState,T||Z!==$||Mr?(typeof ce=="function"&&(pf(r,a,ce,l),$=r.memoizedState),(V=Mr||Fy(r,a,V,l,Z,$,b))?(oe||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=$),f.props=l,f.state=$,f.context=b,l=V):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,$d(t,r),b=r.memoizedProps,oe=Ji(a,b),f.props=oe,ce=r.pendingProps,Z=f.context,$=a.contextType,V=ka,typeof $=="object"&&$!==null&&(V=mn($)),T=a.getDerivedStateFromProps,($=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ce||Z!==V)&&Gy(r,f,l,V),Mr=!1,Z=r.memoizedState,f.state=Z,ml(r,l,f,h),fl();var W=r.memoizedState;b!==ce||Z!==W||Mr||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof T=="function"&&(pf(r,a,T,l),W=r.memoizedState),(oe=Mr||Fy(r,a,oe,l,Z,W,V)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,V),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,V)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=W),f.props=l,f.state=W,f.context=V,l=oe):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,wc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Fa(r,t.child,null,h),r.child=Fa(r,null,a,h)):ln(t,r,a,h),r.memoizedState=f.state,t=r.child):t=lr(t,r,h),t}function a0(t,r,a,l){return il(),r.flags|=256,ln(t,r,a,l),r.child}var _f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(t){return{baseLanes:t,cachePool:$g()}}function bf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=ts),t}function o0(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),b&&(h=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(it){if(h?Vr(r):Lr(),it){var T=Nt,V;if(V=T){e:{for(V=T,T=Ds;V.nodeType!==8;){if(!T){T=null;break e}if(V=hs(V.nextSibling),V===null){T=null;break e}}T=V}T!==null?(r.memoizedState={dehydrated:T,treeContext:Gi!==null?{id:nr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},V=Pn(18,null,null,0),V.stateNode=T,V.return=r,r.child=V,Tn=r,Nt=null,V=!0):V=!1}V||Qi(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return rm(T)?r.lanes=32:r.lanes=536870912,null;or(r)}return T=l.children,l=l.fallback,h?(Lr(),h=r.mode,T=Ac({mode:"hidden",children:T},h),l=Fi(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=xf(a),h.childLanes=bf(t,b,a),r.memoizedState=_f,l):(Vr(r),Ef(r,T))}if(V=t.memoizedState,V!==null&&(T=V.dehydrated,T!==null)){if(f)r.flags&256?(Vr(r),r.flags&=-257,r=Tf(t,r,a)):r.memoizedState!==null?(Lr(),r.child=t.child,r.flags|=128,r=null):(Lr(),h=l.fallback,T=r.mode,l=Ac({mode:"visible",children:l.children},T),h=Fi(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Fa(r,t.child,null,a),l=r.child,l.memoizedState=xf(a),l.childLanes=bf(t,b,a),r.memoizedState=_f,r=h);else if(Vr(r),rm(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var $=b.dgst;b=$,l=Error(i(419)),l.stack="",l.digest=b,al({value:l,source:null,stack:null}),r=Tf(t,r,a)}else if(en||ol(t,r,a,!1),b=(a&t.childLanes)!==0,en||b){if(b=vt,b!==null&&(l=a&-a,l=(l&42)!==0?1:wr(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Ma(t,l),zn(b,t,l),Wy;T.data==="$?"||zf(),r=Tf(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,Nt=hs(T.nextSibling),Tn=r,it=!0,$i=null,Ds=!1,t!==null&&(Wn[Jn++]=nr,Wn[Jn++]=sr,Wn[Jn++]=Gi,nr=t.id,sr=t.overflow,Gi=r),r=Ef(r,l.children),r.flags|=4096);return r}return h?(Lr(),h=l.fallback,T=r.mode,V=t.child,$=V.sibling,l=tr(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,$!==null?h=tr($,h):(h=Fi(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=xf(a):(V=T.cachePool,V!==null?($=Yt._currentValue,V=V.parent!==$?{parent:$,pool:$}:V):V=$g(),T={baseLanes:T.baseLanes|a,cachePool:V}),h.memoizedState=T,h.childLanes=bf(t,b,a),r.memoizedState=_f,l):(Vr(r),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=a,r.memoizedState=null,a)}function Ef(t,r){return r=Ac({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ac(t,r){return t=Pn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Tf(t,r,a){return Fa(r,t.child,null,a),t=Ef(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function l0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Bd(t.return,r,a)}function Sf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function u0(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(ln(t,r,l.children,a),l=Xt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l0(t,a,r);else if(t.tag===19)l0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(O(Xt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Ec(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Sf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ec(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Sf(r,!0,a,null,f);break;case"together":Sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Hr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ol(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=tr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function wf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function nS(t,r,a){switch(r.tag){case 3:ae(r,r.stateNode.containerInfo),Or(r,Yt,t.memoizedState.cache),il();break;case 27:case 5:ve(r);break;case 4:ae(r,r.stateNode.containerInfo);break;case 10:Or(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Vr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?o0(t,r,a):(Vr(r),t=lr(t,r,a),t!==null?t.sibling:null);Vr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ol(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return u0(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),O(Xt,Xt.current),l)break;return null;case 22:case 23:return r.lanes=0,n0(t,r,a);case 24:Or(r,Yt,t.memoizedState.cache)}return lr(t,r,a)}function c0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)en=!0;else{if(!wf(t,a)&&(r.flags&128)===0)return en=!1,nS(t,r,a);en=(t.flags&131072)!==0}else en=!1,it&&(r.flags&1048576)!==0&&Bg(r,ic,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Md(l)?(t=Ji(l,t),r.tag=1,r=i0(null,r,l,t,a)):(r.tag=0,r=vf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===te){r.tag=11,r=Jy(null,r,l,t,a);break e}else if(h===N){r.tag=14,r=e0(null,r,l,t,a);break e}}throw r=xe(l)||l,Error(i(306,r,""))}}return r;case 0:return vf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ji(l,r.pendingProps),i0(t,r,l,h,a);case 3:e:{if(ae(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,$d(t,r),ml(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Or(r,Yt,l),l!==f.cache&&zd(r,[Yt],a,!0),fl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=a0(t,r,l,a);break e}else if(l!==h){h=Xn(Error(i(424)),r),al(h),r=a0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=hs(t.firstChild),Tn=r,it=!0,$i=null,Ds=!0,a=qy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(il(),l===h){r=lr(t,r,a);break e}ln(t,r,l,a)}r=r.child}return r;case 26:return wc(t,r),t===null?(a=mv(r.type,null,r.pendingProps,null))?r.memoizedState=a:it||(a=r.type,t=r.pendingProps,l=Bc(me.current).createElement(a),l[Kt]=r,l[Lt]=t,cn(l,a,t),Ot(l),r.stateNode=l):r.memoizedState=mv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ve(r),t===null&&it&&(l=r.stateNode=hv(r.type,r.pendingProps,me.current),Tn=r,Ds=!0,h=Nt,$r(r.type)?(im=h,Nt=hs(l.firstChild)):Nt=h),ln(t,r,r.pendingProps.children,a),wc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&it&&((h=l=Nt)&&(l=IS(l,r.type,r.pendingProps,Ds),l!==null?(r.stateNode=l,Tn=r,Nt=hs(l.firstChild),Ds=!1,h=!0):h=!1),h||Qi(r)),ve(r),h=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,tm(h,f)?l=null:b!==null&&tm(h,b)&&(r.flags|=32),r.memoizedState!==null&&(h=Jd(t,r,QT,null,null,a),Pl._currentValue=h),wc(t,r),ln(t,r,l,a),r.child;case 6:return t===null&&it&&((t=a=Nt)&&(a=DS(a,r.pendingProps,Ds),a!==null?(r.stateNode=a,Tn=r,Nt=null,t=!0):t=!1),t||Qi(r)),null;case 13:return o0(t,r,a);case 4:return ae(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Fa(r,null,l,a):ln(t,r,l,a),r.child;case 11:return Jy(t,r,r.type,r.pendingProps,a);case 7:return ln(t,r,r.pendingProps,a),r.child;case 8:return ln(t,r,r.pendingProps.children,a),r.child;case 12:return ln(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Or(r,r.type,l.value),ln(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Xi(r),h=mn(h),l=l(h),r.flags|=1,ln(t,r,l,a),r.child;case 14:return e0(t,r,r.type,r.pendingProps,a);case 15:return t0(t,r,r.type,r.pendingProps,a);case 19:return u0(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ac(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=tr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return n0(t,r,a);case 24:return Xi(r),l=mn(Yt),t===null?(h=Fd(),h===null&&(h=vt,f=qd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Kd(r),Or(r,Yt,h)):((t.lanes&a)!==0&&($d(t,r),ml(r,null,null,a),fl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Or(r,Yt,l)):(l=f.cache,Or(r,Yt,l),l!==h.cache&&zd(r,[Yt],a,!0))),ln(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ur(t){t.flags|=4}function h0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_v(r)){if(r=es.current,r!==null&&((tt&4194048)===tt?Os!==null:(tt&62914560)!==tt&&(tt&536870912)===0||r!==Os))throw hl=Gd,Qg;t.flags|=8192}}function Rc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Lo():536870912,t.lanes|=r,Qa|=r)}function bl(t,r){if(!it)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function wt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function sS(t,r,a){var l=r.pendingProps;switch(Vd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(r),null;case 1:return wt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ir(Yt),Ee(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(rl(r)?ur(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hg())),wt(r),null;case 26:return a=r.memoizedState,t===null?(ur(r),a!==null?(wt(r),h0(r,a)):(wt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ur(r),wt(r),h0(r,a)):(wt(r),r.flags&=-16777217):(t.memoizedProps!==l&&ur(r),wt(r),r.flags&=-16777217),null;case 27:Ae(r),a=me.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return wt(r),null}t=J.current,rl(r)?zg(r):(t=hv(h,l,a),r.stateNode=t,ur(r))}return wt(r),null;case 5:if(Ae(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return wt(r),null}if(t=J.current,rl(r))zg(r);else{switch(h=Bc(me.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Kt]=r,t[Lt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(cn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ur(r)}}return wt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=me.current,rl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Kt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||rv(t.nodeValue,a)),t||Qi(r)}else t=Bc(t).createTextNode(l),t[Kt]=r,r.stateNode=t}return wt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=rl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Kt]=r}else il(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wt(r),h=!1}else h=Hg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(or(r),r):(or(r),null)}if(or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Rc(r,r.updateQueue),wt(r),null;case 4:return Ee(),t===null&&Xf(r.stateNode.containerInfo),wt(r),null;case 10:return ir(r.type),wt(r),null;case 19:if(fe(Xt),h=r.memoizedState,h===null)return wt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)bl(h,!1);else{if(It!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ec(t),f!==null){for(r.flags|=128,bl(h,!1),t=f.updateQueue,r.updateQueue=t,Rc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ug(a,t),a=a.sibling;return O(Xt,Xt.current&1|2),r.child}t=t.sibling}h.tail!==null&&_t()>Ic&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Ec(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Rc(r,t),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!it)return wt(r),null}else 2*_t()-h.renderingStartTime>Ic&&a!==536870912&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=_t(),r.sibling=null,t=Xt.current,O(Xt,l?t&1|2:t&1),r):(wt(r),null);case 22:case 23:return or(r),Zd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(wt(r),r.subtreeFlags&6&&(r.flags|=8192)):wt(r),a=r.updateQueue,a!==null&&Rc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&fe(Zi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ir(Yt),wt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function rS(t,r){switch(Vd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ir(Yt),Ee(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Ae(r),null;case 13:if(or(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));il()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return fe(Xt),null;case 4:return Ee(),null;case 10:return ir(r.type),null;case 22:case 23:return or(r),Zd(),t!==null&&fe(Zi),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ir(Yt),null;case 25:return null;default:return null}}function d0(t,r){switch(Vd(r),r.tag){case 3:ir(Yt),Ee();break;case 26:case 27:case 5:Ae(r);break;case 4:Ee();break;case 13:or(r);break;case 19:fe(Xt);break;case 10:ir(r.type);break;case 22:case 23:or(r),Zd(),t!==null&&fe(Zi);break;case 24:ir(Yt)}}function El(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){yt(r,r.return,T)}}function Ur(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=r;var V=a,$=T;try{$()}catch(oe){yt(h,V,oe)}}}l=l.next}while(l!==f)}}catch(oe){yt(r,r.return,oe)}}function f0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ey(r,a)}catch(l){yt(t,t.return,l)}}}function m0(t,r,a){a.props=Ji(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){yt(t,r,l)}}function Tl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){yt(t,r,h)}}function Ms(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){yt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){yt(t,r,h)}else a.current=null}function p0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){yt(t,t.return,h)}}function Af(t,r,a){try{var l=t.stateNode;wS(l,t.type,a,r),l[Lt]=r}catch(h){yt(t,t.return,h)}}function g0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$r(t.type)||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$r(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Uc));else if(l!==4&&(l===27&&$r(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Cf(t,r,a),t=t.sibling;t!==null;)Cf(t,r,a),t=t.sibling}function Cc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&$r(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cc(t,r,a),t=t.sibling;t!==null;)Cc(t,r,a),t=t.sibling}function y0(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);cn(r,l,a),r[Kt]=t,r[Lt]=a}catch(f){yt(t,t.return,f)}}var cr=!1,kt=!1,Nf=!1,v0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function iS(t,r){if(t=t.containerInfo,Jf=Kc,t=Ng(t),Ad(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,V=-1,$=0,oe=0,ce=t,Z=null;t:for(;;){for(var W;ce!==a||h!==0&&ce.nodeType!==3||(T=b+h),ce!==f||l!==0&&ce.nodeType!==3||(V=b+l),ce.nodeType===3&&(b+=ce.nodeValue.length),(W=ce.firstChild)!==null;)Z=ce,ce=W;for(;;){if(ce===t)break t;if(Z===a&&++$===h&&(T=b),Z===f&&++oe===l&&(V=b),(W=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=W}a=T===-1||V===-1?null:{start:T,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},Kc=!1,tn=r;tn!==null;)if(r=tn,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,tn=t;else for(;tn!==null;){switch(r=tn,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Pe=Ji(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Pe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){yt(a,a.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)sm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,tn=t;break}tn=r.return}}function _0(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Br(t,a),l&4&&El(5,a);break;case 1:if(Br(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(b){yt(a,a.return,b)}else{var h=Ji(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(a,a.return,b)}}l&64&&f0(a),l&512&&Tl(a,a.return);break;case 3:if(Br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ey(t,r)}catch(b){yt(a,a.return,b)}}break;case 27:r===null&&l&4&&y0(a);case 26:case 5:Br(t,a),r===null&&l&4&&p0(a),l&512&&Tl(a,a.return);break;case 12:Br(t,a);break;case 13:Br(t,a),l&4&&E0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=mS.bind(null,a),OS(t,a))));break;case 22:if(l=a.memoizedState!==null||cr,!l){r=r!==null&&r.memoizedState!==null||kt,h=cr;var f=kt;cr=l,(kt=r)&&!f?zr(t,a,(a.subtreeFlags&8772)!==0):Br(t,a),cr=h,kt=f}break;case 30:break;default:Br(t,a)}}function x0(t){var r=t.alternate;r!==null&&(t.alternate=null,x0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Cr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,In=!1;function hr(t,r,a){for(a=a.child;a!==null;)b0(t,r,a),a=a.sibling}function b0(t,r,a){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(ke,a)}catch{}switch(a.tag){case 26:kt||Ms(a,r),hr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Ms(a,r);var l=Tt,h=In;$r(a.type)&&(Tt=a.stateNode,In=!1),hr(t,r,a),Ol(a.stateNode),Tt=l,In=h;break;case 5:kt||Ms(a,r);case 6:if(l=Tt,h=In,Tt=null,hr(t,r,a),Tt=l,In=h,Tt!==null)if(In)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(f){yt(a,r,f)}else try{Tt.removeChild(a.stateNode)}catch(f){yt(a,r,f)}break;case 18:Tt!==null&&(In?(t=Tt,uv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Bl(t)):uv(Tt,a.stateNode));break;case 4:l=Tt,h=In,Tt=a.stateNode.containerInfo,In=!0,hr(t,r,a),Tt=l,In=h;break;case 0:case 11:case 14:case 15:kt||Ur(2,a,r),kt||Ur(4,a,r),hr(t,r,a);break;case 1:kt||(Ms(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&m0(a,r,l)),hr(t,r,a);break;case 21:hr(t,r,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,hr(t,r,a),kt=l;break;default:hr(t,r,a)}}function E0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(a){yt(r,r.return,a)}}function aS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new v0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new v0),r;default:throw Error(i(435,t.tag))}}function If(t,r){var a=aS(t);r.forEach(function(l){var h=pS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Vn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=r,T=b;e:for(;T!==null;){switch(T.tag){case 27:if($r(T.type)){Tt=T.stateNode,In=!1;break e}break;case 5:Tt=T.stateNode,In=!1;break e;case 3:case 4:Tt=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(Tt===null)throw Error(i(160));b0(f,b,h),Tt=null,In=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)T0(r,t),r=r.sibling}var cs=null;function T0(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(r,t),Ln(t),l&4&&(Ur(3,t,t.return),El(3,t),Ur(5,t,t.return));break;case 1:Vn(r,t),Ln(t),l&512&&(kt||a===null||Ms(a,a.return)),l&64&&cr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=cs;if(Vn(r,t),Ln(t),l&512&&(kt||a===null||Ms(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ci]||f[Kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),cn(f,l,a),f[Kt]=t,Ot(f),l=f;break e;case"link":var b=yv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;case"meta":if(b=yv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;default:throw Error(i(468,l))}f[Kt]=t,Ot(f),l=f}t.stateNode=l}else vv(h,t.type,t.stateNode);else t.stateNode=gv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?vv(h,t.type,t.stateNode):gv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:Vn(r,t),Ln(t),l&512&&(kt||a===null||Ms(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Vn(r,t),Ln(t),l&512&&(kt||a===null||Ms(a,a.return)),t.flags&32){h=t.stateNode;try{Kn(h,"")}catch(W){yt(t,t.return,W)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Af(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Nf=!0);break;case 6:if(Vn(r,t),Ln(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(W){yt(t,t.return,W)}}break;case 3:if(Hc=null,h=cs,cs=zc(r.containerInfo),Vn(r,t),cs=h,Ln(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Bl(r.containerInfo)}catch(W){yt(t,t.return,W)}Nf&&(Nf=!1,S0(t));break;case 4:l=cs,cs=zc(t.stateNode.containerInfo),Vn(r,t),Ln(t),cs=l;break;case 12:Vn(r,t),Ln(t);break;case 13:Vn(r,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pf=_t()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 22:h=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,$=cr,oe=kt;if(cr=$||h,kt=oe||V,Vn(r,t),kt=oe,cr=$,Ln(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||V||cr||kt||ea(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(f=V.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=V.stateNode;var ce=V.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;T.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(W){yt(V,V.return,W)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(W){yt(V,V.return,W)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,If(t,a))));break;case 19:Vn(r,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,If(t,l)));break;case 30:break;case 21:break;default:Vn(r,t),Ln(t)}}function Ln(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(g0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,f=Rf(t);Cc(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(Kn(b,""),a.flags&=-33);var T=Rf(t);Cc(t,T,b);break;case 3:case 4:var V=a.stateNode.containerInfo,$=Rf(t);Cf(t,$,V);break;default:throw Error(i(161))}}catch(oe){yt(t,t.return,oe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function S0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;S0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Br(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_0(t,r.alternate,r),r=r.sibling}function ea(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ur(4,r,r.return),ea(r);break;case 1:Ms(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&m0(r,r.return,a),ea(r);break;case 27:Ol(r.stateNode);case 26:case 5:Ms(r,r.return),ea(r);break;case 22:r.memoizedState===null&&ea(r);break;case 30:ea(r);break;default:ea(r)}t=t.sibling}}function zr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:zr(h,f,a),El(4,f);break;case 1:if(zr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){yt(l,l.return,$)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Jg(V[h],T)}catch($){yt(l,l.return,$)}}a&&b&64&&f0(f),Tl(f,f.return);break;case 27:y0(f);case 26:case 5:zr(h,f,a),a&&l===null&&b&4&&p0(f),Tl(f,f.return);break;case 12:zr(h,f,a);break;case 13:zr(h,f,a),a&&b&4&&E0(h,f);break;case 22:f.memoizedState===null&&zr(h,f,a),Tl(f,f.return);break;case 30:break;default:zr(h,f,a)}r=r.sibling}}function Df(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function Of(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ll(t))}function ks(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)w0(t,r,a,l),r=r.sibling}function w0(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:ks(t,r,a,l),h&2048&&El(9,r);break;case 1:ks(t,r,a,l);break;case 3:ks(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ll(t)));break;case 12:if(h&2048){ks(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){yt(r,r.return,V)}}else ks(t,r,a,l);break;case 13:ks(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?ks(t,r,a,l):Sl(t,r):f._visibility&2?ks(t,r,a,l):(f._visibility|=2,Ga(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Df(b,r);break;case 24:ks(t,r,a,l),h&2048&&Of(r.alternate,r);break;default:ks(t,r,a,l)}}function Ga(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,b=r,T=a,V=l,$=b.flags;switch(b.tag){case 0:case 11:case 15:Ga(f,b,T,V,h),El(8,b);break;case 23:break;case 22:var oe=b.stateNode;b.memoizedState!==null?oe._visibility&2?Ga(f,b,T,V,h):Sl(f,b):(oe._visibility|=2,Ga(f,b,T,V,h)),h&&$&2048&&Df(b.alternate,b);break;case 24:Ga(f,b,T,V,h),h&&$&2048&&Of(b.alternate,b);break;default:Ga(f,b,T,V,h)}r=r.sibling}}function Sl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Sl(a,l),h&2048&&Df(l.alternate,l);break;case 24:Sl(a,l),h&2048&&Of(l.alternate,l);break;default:Sl(a,l)}r=r.sibling}}var wl=8192;function Ka(t){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)A0(t),t=t.sibling}function A0(t){switch(t.tag){case 26:Ka(t),t.flags&wl&&t.memoizedState!==null&&GS(cs,t.memoizedState,t.memoizedProps);break;case 5:Ka(t);break;case 3:case 4:var r=cs;cs=zc(t.stateNode.containerInfo),Ka(t),cs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=wl,wl=16777216,Ka(t),wl=r):Ka(t));break;default:Ka(t)}}function R0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Al(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];tn=l,N0(l,t)}R0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)C0(t),t=t.sibling}function C0(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&Ur(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Nc(t)):Al(t);break;default:Al(t)}}function Nc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];tn=l,N0(l,t)}R0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ur(8,r,r.return),Nc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(r));break;default:Nc(r)}t=t.sibling}}function N0(t,r){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:Ur(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,tn=l;else e:for(a=t;tn!==null;){l=tn;var h=l.sibling,f=l.return;if(x0(l),l===a){tn=null;break e}if(h!==null){h.return=f,tn=h;break e}tn=f}}}var oS={getCacheForType:function(t){var r=mn(Yt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},lS=typeof WeakMap=="function"?WeakMap:Map,lt=0,vt=null,$e=null,tt=0,ut=0,Un=null,qr=!1,$a=!1,Mf=!1,dr=0,It=0,Hr=0,ta=0,kf=0,ts=0,Qa=0,Rl=null,Dn=null,jf=!1,Pf=0,Ic=1/0,Dc=null,Fr=null,un=0,Gr=null,Ya=null,Xa=0,Vf=0,Lf=null,I0=null,Cl=0,Uf=null;function Bn(){if((lt&2)!==0&&tt!==0)return tt&-tt;if(Q.T!==null){var t=Va;return t!==0?t:Kf()}return Ar()}function D0(){ts===0&&(ts=(tt&536870912)===0||it?Vo():536870912);var t=es.current;return t!==null&&(t.flags|=32),ts}function zn(t,r,a){(t===vt&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(Za(t,0),Kr(t,tt,ts,!1)),Fs(t,a),((lt&2)===0||t!==vt)&&(t===vt&&((lt&2)===0&&(ta|=a),It===4&&Kr(t,tt,ts,!1)),js(t))}function O0(t,r,a){if((lt&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Ri(t,r),h=l?hS(t,r):qf(t,r,!0),f=l;do{if(h===0){$a&&!l&&Kr(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!uS(a)){h=qf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var T=t;h=Rl;var V=T.current.memoizedState.isDehydrated;if(V&&(Za(T,b).flags|=256),b=qf(T,b,!1),b!==2){if(Mf&&!V){T.errorRecoveryDisabledLanes|=f,ta|=f,h=4;break e}f=Dn,Dn=h,f!==null&&(Dn===null?Dn=f:Dn.push.apply(Dn,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Za(t,0),Kr(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Kr(l,r,ts,!qr);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(h=Pf+300-_t(),10<h)){if(Kr(l,r,ts,!qr),ma(l,0,!0)!==0)break e;l.timeoutHandle=ov(M0.bind(null,l,a,Dn,Dc,jf,r,ts,ta,Qa,qr,f,2,-0,0),h);break e}M0(l,a,Dn,Dc,jf,r,ts,ta,Qa,qr,f,0,-0,0)}}break}while(!0);js(t)}function M0(t,r,a,l,h,f,b,T,V,$,oe,ce,Z,W){if(t.timeoutHandle=-1,ce=r.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:FS},A0(r),ce=KS(),ce!==null)){t.cancelPendingCommit=ce(B0.bind(null,t,r,f,a,l,h,b,T,V,oe,1,Z,W)),Kr(t,f,b,!$);return}B0(t,r,f,a,l,h,b,T,V)}function uS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!jn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(t,r,a,l){r&=~kf,r&=~ta,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-gt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&xs(t,a,r)}function Oc(){return(lt&6)===0?(Nl(0),!1):!0}function Bf(){if($e!==null){if(ut===0)var t=$e.return;else t=$e,rr=Yi=null,nf(t),Ha=null,_l=0,t=$e;for(;t!==null;)d0(t.alternate,t),t=t.return;$e=null}}function Za(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,RS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Bf(),vt=t,$e=a=tr(t.current,null),tt=r,ut=0,Un=null,qr=!1,$a=Ri(t,r),Mf=!1,Qa=ts=kf=ta=Hr=It=0,Dn=Rl=null,jf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-gt(l),f=1<<h;r|=t[h],l&=~f}return dr=r,ec(),a}function k0(t,r){qe=null,Q.H=_c,r===cl||r===uc?(r=Zg(),ut=3):r===Qg?(r=Zg(),ut=4):ut=r===Wy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,$e===null&&(It=1,Sc(t,Xn(r,t.current)))}function j0(){var t=Q.H;return Q.H=_c,t===null?_c:t}function P0(){var t=Q.A;return Q.A=oS,t}function zf(){It=4,qr||(tt&4194048)!==tt&&es.current!==null||($a=!0),(Hr&134217727)===0&&(ta&134217727)===0||vt===null||Kr(vt,tt,ts,!1)}function qf(t,r,a){var l=lt;lt|=2;var h=j0(),f=P0();(vt!==t||tt!==r)&&(Dc=null,Za(t,r)),r=!1;var b=It;e:do try{if(ut!==0&&$e!==null){var T=$e,V=Un;switch(ut){case 8:Bf(),b=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(r=!0);var $=ut;if(ut=0,Un=null,Wa(t,T,V,$),a&&$a){b=0;break e}break;default:$=ut,ut=0,Un=null,Wa(t,T,V,$)}}cS(),b=It;break}catch(oe){k0(t,oe)}while(!0);return r&&t.shellSuspendCounter++,rr=Yi=null,lt=l,Q.H=h,Q.A=f,$e===null&&(vt=null,tt=0,ec()),b}function cS(){for(;$e!==null;)V0($e)}function hS(t,r){var a=lt;lt|=2;var l=j0(),h=P0();vt!==t||tt!==r?(Dc=null,Ic=_t()+500,Za(t,r)):$a=Ri(t,r);e:do try{if(ut!==0&&$e!==null){r=$e;var f=Un;t:switch(ut){case 1:ut=0,Un=null,Wa(t,r,f,1);break;case 2:case 9:if(Yg(f)){ut=0,Un=null,L0(r);break}r=function(){ut!==2&&ut!==9||vt!==t||(ut=7),js(t)},f.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Yg(f)?(ut=0,Un=null,L0(r)):(ut=0,Un=null,Wa(t,r,f,7));break;case 5:var b=null;switch($e.tag){case 26:b=$e.memoizedState;case 5:case 27:var T=$e;if(!b||_v(b)){ut=0,Un=null;var V=T.sibling;if(V!==null)$e=V;else{var $=T.return;$!==null?($e=$,Mc($)):$e=null}break t}}ut=0,Un=null,Wa(t,r,f,5);break;case 6:ut=0,Un=null,Wa(t,r,f,6);break;case 8:Bf(),It=6;break e;default:throw Error(i(462))}}dS();break}catch(oe){k0(t,oe)}while(!0);return rr=Yi=null,Q.H=l,Q.A=h,lt=a,$e!==null?0:(vt=null,tt=0,ec(),It)}function dS(){for(;$e!==null&&!Pt();)V0($e)}function V0(t){var r=c0(t.alternate,t,dr);t.memoizedProps=t.pendingProps,r===null?Mc(t):$e=r}function L0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=r0(a,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=r0(a,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:nf(r);default:d0(a,r),r=$e=Ug(r,dr),r=c0(a,r,dr)}t.memoizedProps=t.pendingProps,r===null?Mc(t):$e=r}function Wa(t,r,a,l){rr=Yi=null,nf(r),Ha=null,_l=0;var h=r.return;try{if(tS(t,h,r,a,tt)){It=1,Sc(t,Xn(a,t.current)),$e=null;return}}catch(f){if(h!==null)throw $e=h,f;It=1,Sc(t,Xn(a,t.current)),$e=null;return}r.flags&32768?(it||l===1?t=!0:$a||(tt&536870912)!==0?t=!1:(qr=t=!0,(l===2||l===9||l===3||l===6)&&(l=es.current,l!==null&&l.tag===13&&(l.flags|=16384))),U0(r,t)):Mc(r)}function Mc(t){var r=t;do{if((r.flags&32768)!==0){U0(r,qr);return}t=r.return;var a=sS(r.alternate,r,dr);if(a!==null){$e=a;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=t}while(r!==null);It===0&&(It=5)}function U0(t,r){do{var a=rS(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);It=6,$e=null}function B0(t,r,a,l,h,f,b,T,V){t.cancelPendingCommit=null;do kc();while(un!==0);if((lt&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=Dd,Uo(t,a,f,b,T,V),t===vt&&($e=vt=null,tt=0),Ya=r,Gr=t,Xa=a,Vf=f,Lf=h,I0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gS(Gt,function(){return G0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ee.p,ee.p=2,b=lt,lt|=4;try{iS(t,r,a)}finally{lt=b,ee.p=h,Q.T=l}}un=1,z0(),q0(),H0()}}function z0(){if(un===1){un=0;var t=Gr,r=Ya,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ee.p;ee.p=2;var h=lt;lt|=4;try{T0(r,t);var f=em,b=Ng(t.containerInfo),T=f.focusedElem,V=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&Cg(T.ownerDocument.documentElement,T)){if(V!==null&&Ad(T)){var $=V.start,oe=V.end;if(oe===void 0&&(oe=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(oe,T.value.length);else{var ce=T.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var W=Z.getSelection(),Pe=T.textContent.length,Ie=Math.min(V.start,Pe),pt=V.end===void 0?Ie:Math.min(V.end,Pe);!W.extend&&Ie>pt&&(b=pt,pt=Ie,Ie=b);var F=Rg(T,Ie),H=Rg(T,pt);if(F&&H&&(W.rangeCount!==1||W.anchorNode!==F.node||W.anchorOffset!==F.offset||W.focusNode!==H.node||W.focusOffset!==H.offset)){var K=ce.createRange();K.setStart(F.node,F.offset),W.removeAllRanges(),Ie>pt?(W.addRange(K),W.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),W.addRange(K))}}}}for(ce=[],W=T;W=W.parentNode;)W.nodeType===1&&ce.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ce.length;T++){var ue=ce[T];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Kc=!!Jf,em=Jf=null}finally{lt=h,ee.p=l,Q.T=a}}t.current=r,un=2}}function q0(){if(un===2){un=0;var t=Gr,r=Ya,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ee.p;ee.p=2;var h=lt;lt|=4;try{_0(t,r.alternate,r)}finally{lt=h,ee.p=l,Q.T=a}}un=3}}function H0(){if(un===4||un===3){un=0,Ge();var t=Gr,r=Ya,a=Xa,l=I0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?un=5:(un=0,Ya=Gr=null,F0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Fr=null),pa(a),r=r.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(ke,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,h=ee.p,ee.p=2,Q.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{Q.T=r,ee.p=h}}(Xa&3)!==0&&kc(),js(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Uf?Cl++:(Cl=0,Uf=t):Cl=0,Nl(0)}}function F0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ll(r)))}function kc(t){return z0(),q0(),H0(),G0()}function G0(){if(un!==5)return!1;var t=Gr,r=Vf;Vf=0;var a=pa(Xa),l=Q.T,h=ee.p;try{ee.p=32>a?32:a,Q.T=null,a=Lf,Lf=null;var f=Gr,b=Xa;if(un=0,Ya=Gr=null,Xa=0,(lt&6)!==0)throw Error(i(331));var T=lt;if(lt|=4,C0(f.current),w0(f,f.current,b,a),lt=T,Nl(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(ke,f)}catch{}return!0}finally{ee.p=h,Q.T=l,F0(t,r)}}function K0(t,r,a){r=Xn(a,r),r=yf(t.stateNode,r,2),t=jr(t,r,2),t!==null&&(Fs(t,2),js(t))}function yt(t,r,a){if(t.tag===3)K0(t,t,a);else for(;r!==null;){if(r.tag===3){K0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fr===null||!Fr.has(l))){t=Xn(a,t),a=Xy(2),l=jr(r,a,2),l!==null&&(Zy(a,l,r,t),Fs(l,2),js(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new lS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Mf=!0,h.add(a),t=fS.bind(null,t,r,a),r.then(t,t))}function fS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,vt===t&&(tt&a)===a&&(It===4||It===3&&(tt&62914560)===tt&&300>_t()-Pf?(lt&2)===0&&Za(t,0):kf|=a,Qa===tt&&(Qa=0)),js(t)}function $0(t,r){r===0&&(r=Lo()),t=Ma(t,r),t!==null&&(Fs(t,r),js(t))}function mS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),$0(t,a)}function pS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),$0(t,a)}function gS(t,r){return Ne(t,r)}var jc=null,Ja=null,Ff=!1,Pc=!1,Gf=!1,na=0;function js(t){t!==Ja&&t.next===null&&(Ja===null?jc=Ja=t:Ja=Ja.next=t),Pc=!0,Ff||(Ff=!0,vS())}function Nl(t,r){if(!Gf&&Pc){Gf=!0;do for(var a=!1,l=jc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-gt(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Z0(l,f))}else f=tt,f=ma(l,l===vt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ri(l,f)||(a=!0,Z0(l,f));l=l.next}while(a);Gf=!1}}function yS(){Q0()}function Q0(){Pc=Ff=!1;var t=0;na!==0&&(AS()&&(t=na),na=0);for(var r=_t(),a=null,l=jc;l!==null;){var h=l.next,f=Y0(l,r);f===0?(l.next=null,a===null?jc=h:a.next=h,h===null&&(Ja=a)):(a=l,(t!==0||(f&3)!==0)&&(Pc=!0)),l=h}Nl(t)}function Y0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-gt(f),T=1<<b,V=h[b];V===-1?((T&a)===0||(T&l)!==0)&&(h[b]=Po(T,r)):V<=r&&(t.expiredLanes|=T),f&=~T}if(r=vt,a=tt,a=ma(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Rt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ri(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Rt(l),pa(a)){case 2:case 8:a=Ct;break;case 32:a=Gt;break;case 268435456:a=Dt;break;default:a=Gt}return l=X0.bind(null,t),a=Ne(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Rt(l),t.callbackPriority=2,t.callbackNode=null,2}function X0(t,r){if(un!==0&&un!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(kc()&&t.callbackNode!==a)return null;var l=tt;return l=ma(t,t===vt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(O0(t,l,r),Y0(t,_t()),t.callbackNode!=null&&t.callbackNode===a?X0.bind(null,t):null)}function Z0(t,r){if(kc())return null;O0(t,r,!0)}function vS(){CS(function(){(lt&6)!==0?Ne(Vt,yS):Q0()})}function Kf(){return na===0&&(na=Vo()),na}function W0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ba(""+t)}function J0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function _S(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=W0((h[Lt]||null).action),b=l.submitter;b&&(r=(r=b[Lt]||null)?W0(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var T=new Ea("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(na!==0){var V=b?J0(h,b):new FormData(h);df(a,{pending:!0,data:V,method:h.method,action:f},null,V)}}else typeof f=="function"&&(T.preventDefault(),V=b?J0(h,b):new FormData(h),df(a,{pending:!0,data:V,method:h.method,action:f},f,V))},currentTarget:h}]})}}for(var $f=0;$f<Id.length;$f++){var Qf=Id[$f],xS=Qf.toLowerCase(),bS=Qf[0].toUpperCase()+Qf.slice(1);us(xS,"on"+bS)}us(Og,"onAnimationEnd"),us(Mg,"onAnimationIteration"),us(kg,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(LT,"onTransitionRun"),us(UT,"onTransitionStart"),us(BT,"onTransitionCancel"),us(jg,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ES=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function ev(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var T=l[b],V=T.instance,$=T.currentTarget;if(T=T.listener,V!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(oe){Tc(oe)}h.currentTarget=null,f=V}else for(b=0;b<l.length;b++){if(T=l[b],V=T.instance,$=T.currentTarget,T=T.listener,V!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(oe){Tc(oe)}h.currentTarget=null,f=V}}}}function Qe(t,r){var a=r[zo];a===void 0&&(a=r[zo]=new Set);var l=t+"__bubble";a.has(l)||(tv(r,t,2,!1),a.add(l))}function Yf(t,r,a){var l=0;r&&(l|=4),tv(a,t,l,r)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Vc]){t[Vc]=!0,qo.forEach(function(a){a!=="selectionchange"&&(ES.has(a)||Yf(a,!1,t),Yf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Vc]||(r[Vc]=!0,Yf("selectionchange",!1,r))}}function tv(t,r,a,l){switch(wv(r)){case 2:var h=YS;break;case 8:h=XS;break;default:h=cm}a=h.bind(null,r,a,t),h=void 0,!Qn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Zf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=Gs(T),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){l=f=b;continue e}T=T.parentNode}}l=l.return}Uu(function(){var $=f,oe=$n(a),ce=[];e:{var Z=Pg.get(t);if(Z!==void 0){var W=Ea,Pe=t;switch(t){case"keypress":if(As(a)===0)break e;case"keydown":case"keyup":W=Ca;break;case"focusin":Pe="focus",W=wa;break;case"focusout":Pe="blur",W=wa;break;case"beforeblur":case"afterblur":W=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=$u;break;case Og:case Mg:case kg:W=Aa;break;case jg:W=Yu;break;case"scroll":case"scrollend":W=Bu;break;case"wheel":W=Na;break;case"copy":case"cut":case"paste":W=Ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=el;break;case"toggle":case"beforetoggle":W=Zu}var Ie=(r&4)!==0,pt=!Ie&&(t==="scroll"||t==="scrollend"),F=Ie?Z!==null?Z+"Capture":null:Z;Ie=[];for(var H=$,K;H!==null;){var ue=H;if(K=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||K===null||F===null||(ue=ji(H,F),ue!=null&&Ie.push(Dl(H,ue,K))),pt)break;H=H.return}0<Ie.length&&(Z=new W(Z,Pe,null,a,oe),ce.push({event:Z,listeners:Ie}))}}if((r&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",Z&&a!==Ys&&(Pe=a.relatedTarget||a.fromElement)&&(Gs(Pe)||Pe[Gn]))break e;if((W||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,W?(Pe=a.relatedTarget||a.toElement,W=$,Pe=Pe?Gs(Pe):null,Pe!==null&&(pt=u(Pe),Ie=Pe.tag,Pe!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Pe=null)):(W=null,Pe=$),W!==Pe)){if(Ie=Yn,ue="onMouseLeave",F="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=el,ue="onPointerLeave",F="onPointerEnter",H="pointer"),pt=W==null?Z:Es(W),K=Pe==null?Z:Es(Pe),Z=new Ie(ue,H+"leave",W,a,oe),Z.target=pt,Z.relatedTarget=K,ue=null,Gs(oe)===$&&(Ie=new Ie(F,H+"enter",Pe,a,oe),Ie.target=K,Ie.relatedTarget=pt,ue=Ie),pt=ue,W&&Pe)t:{for(Ie=W,F=Pe,H=0,K=Ie;K;K=eo(K))H++;for(K=0,ue=F;ue;ue=eo(ue))K++;for(;0<H-K;)Ie=eo(Ie),H--;for(;0<K-H;)F=eo(F),K--;for(;H--;){if(Ie===F||F!==null&&Ie===F.alternate)break t;Ie=eo(Ie),F=eo(F)}Ie=null}else Ie=null;W!==null&&nv(ce,Z,W,Ie,!1),Pe!==null&&pt!==null&&nv(ce,pt,Pe,Ie,!0)}}e:{if(Z=$?Es($):window,W=Z.nodeName&&Z.nodeName.toLowerCase(),W==="select"||W==="input"&&Z.type==="file")var we=bg;else if(Qt(Z))if(Eg)we=jT;else{we=MT;var Ke=OT}else W=Z.nodeName,!W||W.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?$&&$o($.elementType)&&(we=bg):we=kT;if(we&&(we=we(t,$))){er(ce,we,a,oe);break e}Ke&&Ke(t,Z,$),t==="focusout"&&$&&Z.type==="number"&&$.memoizedProps.value!=null&&Ir(Z,"number",Z.value)}switch(Ke=$?Es($):window,t){case"focusin":(Qt(Ke)||Ke.contentEditable==="true")&&(Ia=Ke,Rd=$,sl=null);break;case"focusout":sl=Rd=Ia=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Ig(ce,a,oe);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":Ig(ce,a,oe)}var Re;if(Ns)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Je?ne(t,a)&&(De="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(x&&a.locale!=="ko"&&(Je||De!=="onCompositionStart"?De==="onCompositionEnd"&&Je&&(Re=Yo()):(ws=oe,Dr="value"in ws?ws.value:ws.textContent,Je=!0)),Ke=Lc($,De),0<Ke.length&&(De=new Wo(De,t,null,a,oe),ce.push({event:De,listeners:Ke}),Re?De.data=Re:(Re=_e(a),Re!==null&&(De.data=Re)))),(Re=v?$t(t,a):et(t,a))&&(De=Lc($,"onBeforeInput"),0<De.length&&(Ke=new Wo("onBeforeInput","beforeinput",null,a,oe),ce.push({event:Ke,listeners:De}),Ke.data=Re)),_S(ce,t,$,a,oe)}ev(ce,r)})}function Dl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Lc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ji(t,a),h!=null&&l.unshift(Dl(t,h,f)),h=ji(t,r),h!=null&&l.push(Dl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function nv(t,r,a,l,h){for(var f=r._reactName,b=[];a!==null&&a!==l;){var T=a,V=T.alternate,$=T.stateNode;if(T=T.tag,V!==null&&V===l)break;T!==5&&T!==26&&T!==27||$===null||(V=$,h?($=ji(a,f),$!=null&&b.unshift(Dl(a,$,V))):h||($=ji(a,f),$!=null&&b.push(Dl(a,$,V)))),a=a.return}b.length!==0&&t.push({event:r,listeners:b})}var TS=/\r\n?/g,SS=/\u0000|\uFFFD/g;function sv(t){return(typeof t=="string"?t:""+t).replace(TS,`
`).replace(SS,"")}function rv(t,r){return r=sv(r),sv(t)===r}function Uc(){}function mt(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Kn(t,""+l);break;case"className":Ts(t,"class",l);break;case"tabIndex":Ts(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(t,a,l);break;case"style":Ko(t,l,f);break;case"data":if(r!=="object"){Ts(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&mt(t,r,"name",h.name,h,null),mt(t,r,"formEncType",h.formEncType,h,null),mt(t,r,"formMethod",h.formMethod,h,null),mt(t,r,"formTarget",h.formTarget,h,null)):(mt(t,r,"encType",h.encType,h,null),mt(t,r,"method",h.method,h,null),mt(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ba(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Qe("beforetoggle",t),Qe("toggle",t),Nr(t,"popover",l);break;case"xlinkActuate":an(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":an(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":an(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":an(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":an(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":an(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":an(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":an(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":an(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Nr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xd.get(a)||a,Nr(t,a,l))}}function Wf(t,r,a,l,h,f){switch(a){case"style":Ko(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Kn(t,l):(typeof l=="number"||typeof l=="bigint")&&Kn(t,""+l);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[Lt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Nr(t,a,l)}}}function cn(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",t),Qe("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:mt(t,r,f,b,a,null)}}h&&mt(t,r,"srcSet",a.srcSet,a,null),l&&mt(t,r,"src",a.src,a,null);return;case"input":Qe("invalid",t);var T=f=b=h=null,V=null,$=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":h=oe;break;case"type":b=oe;break;case"checked":V=oe;break;case"defaultChecked":$=oe;break;case"value":f=oe;break;case"defaultValue":T=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,r));break;default:mt(t,r,l,oe,a,null)}}Oi(t,f,T,V,$,b,h,!1),xa(t);return;case"select":Qe("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:mt(t,r,h,T,a,null)}r=f,a=b,t.multiple=!!l,r!=null?Qs(t,!!l,r,!1):a!=null&&Qs(t,!!l,a,!0);return;case"textarea":Qe("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:mt(t,r,b,T,a,null)}Mi(t,l,h,f),xa(t);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:mt(t,r,V,l,a,null)}return;case"dialog":Qe("beforetoggle",t),Qe("toggle",t),Qe("cancel",t),Qe("close",t);break;case"iframe":case"object":Qe("load",t);break;case"video":case"audio":for(l=0;l<Il.length;l++)Qe(Il[l],t);break;case"image":Qe("error",t),Qe("load",t);break;case"details":Qe("toggle",t);break;case"embed":case"source":case"link":Qe("error",t),Qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(l=a[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:mt(t,r,$,l,a,null)}return;default:if($o(r)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&Wf(t,r,oe,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&mt(t,r,T,l,a,null))}function wS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,V=null,$=null,oe=null;for(W in a){var ce=a[W];if(a.hasOwnProperty(W)&&ce!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=ce;default:l.hasOwnProperty(W)||mt(t,r,W,null,l,ce)}}for(var Z in l){var W=l[Z];if(ce=a[Z],l.hasOwnProperty(Z)&&(W!=null||ce!=null))switch(Z){case"type":f=W;break;case"name":h=W;break;case"checked":$=W;break;case"defaultChecked":oe=W;break;case"value":b=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ce&&mt(t,r,Z,W,l,ce)}}kn(t,b,T,V,$,oe,f,h);return;case"select":W=b=T=Z=null;for(f in a)if(V=a[f],a.hasOwnProperty(f)&&V!=null)switch(f){case"value":break;case"multiple":W=V;default:l.hasOwnProperty(f)||mt(t,r,f,null,l,V)}for(h in l)if(f=l[h],V=a[h],l.hasOwnProperty(h)&&(f!=null||V!=null))switch(h){case"value":Z=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==V&&mt(t,r,h,f,l,V)}r=T,a=b,l=W,Z!=null?Qs(t,!!a,Z,!1):!!l!=!!a&&(r!=null?Qs(t,!!a,r,!0):Qs(t,!!a,a?[]:"",!1));return;case"textarea":W=Z=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:mt(t,r,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":Z=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&mt(t,r,b,h,l,f)}dt(t,Z,W);return;case"option":for(var Pe in a)if(Z=a[Pe],a.hasOwnProperty(Pe)&&Z!=null&&!l.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:mt(t,r,Pe,null,l,Z)}for(V in l)if(Z=l[V],W=a[V],l.hasOwnProperty(V)&&Z!==W&&(Z!=null||W!=null))switch(V){case"selected":t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:mt(t,r,V,Z,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)Z=a[Ie],a.hasOwnProperty(Ie)&&Z!=null&&!l.hasOwnProperty(Ie)&&mt(t,r,Ie,null,l,Z);for($ in l)if(Z=l[$],W=a[$],l.hasOwnProperty($)&&Z!==W&&(Z!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:mt(t,r,$,Z,l,W)}return;default:if($o(r)){for(var pt in a)Z=a[pt],a.hasOwnProperty(pt)&&Z!==void 0&&!l.hasOwnProperty(pt)&&Wf(t,r,pt,void 0,l,Z);for(oe in l)Z=l[oe],W=a[oe],!l.hasOwnProperty(oe)||Z===W||Z===void 0&&W===void 0||Wf(t,r,oe,Z,l,W);return}}for(var F in a)Z=a[F],a.hasOwnProperty(F)&&Z!=null&&!l.hasOwnProperty(F)&&mt(t,r,F,null,l,Z);for(ce in l)Z=l[ce],W=a[ce],!l.hasOwnProperty(ce)||Z===W||Z==null&&W==null||mt(t,r,ce,Z,l,W)}var Jf=null,em=null;function Bc(t){return t.nodeType===9?t:t.ownerDocument}function iv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function av(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function tm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nm=null;function AS(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var ov=typeof setTimeout=="function"?setTimeout:void 0,RS=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,CS=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(NS)}:ov;function NS(t){setTimeout(function(){throw t})}function $r(t){return t==="head"}function uv(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Ol(b.documentElement),a&2&&Ol(b.body),a&4)for(a=b.head,Ol(a),b=a.firstChild;b;){var T=b.nextSibling,V=b.nodeName;b[Ci]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),Bl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Bl(r)}function sm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Cr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function IS(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=hs(t.nextSibling),t===null)break}return null}function DS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=hs(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function OS(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function hs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var im=null;function cv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function hv(t,r,a){switch(r=Bc(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ol(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Cr(t)}var ns=new Map,dv=new Set;function zc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fr=ee.d;ee.d={f:MS,r:kS,D:jS,C:PS,L:VS,m:LS,X:BS,S:US,M:zS};function MS(){var t=fr.f(),r=Oc();return t||r}function kS(t){var r=bs(t);r!==null&&r.tag===5&&r.type==="form"?Oy(r):fr.r(t)}var to=typeof document>"u"?null:document;function fv(t,r,a){var l=to;if(l&&typeof r=="string"&&r){var h=Ut(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),dv.has(h)||(dv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),cn(r,"link",t),Ot(r),l.head.appendChild(r)))}}function jS(t){fr.D(t),fv("dns-prefetch",t,null)}function PS(t,r){fr.C(t,r),fv("preconnect",t,r)}function VS(t,r,a){fr.L(t,r,a);var l=to;if(l&&t&&r){var h='link[rel="preload"][as="'+Ut(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ut(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ut(a.imageSizes)+'"]')):h+='[href="'+Ut(t)+'"]';var f=h;switch(r){case"style":f=no(t);break;case"script":f=so(t)}ns.has(f)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ns.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Ml(f))||r==="script"&&l.querySelector(kl(f))||(r=l.createElement("link"),cn(r,"link",t),Ot(r),l.head.appendChild(r)))}}function LS(t,r){fr.m(t,r);var a=to;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Ut(l)+'"][href="'+Ut(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=so(t)}if(!ns.has(f)&&(t=_({rel:"modulepreload",href:t},r),ns.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(f)))return}l=a.createElement("link"),cn(l,"link",t),Ot(l),a.head.appendChild(l)}}}function US(t,r,a){fr.S(t,r,a);var l=to;if(l&&t){var h=xn(l).hoistableStyles,f=no(t);r=r||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(Ml(f)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ns.get(f))&&am(t,a);var V=b=l.createElement("link");Ot(V),cn(V,"link",t),V._p=new Promise(function($,oe){V.onload=$,V.onerror=oe}),V.addEventListener("load",function(){T.loading|=1}),V.addEventListener("error",function(){T.loading|=2}),T.loading|=4,qc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function BS(t,r){fr.X(t,r);var a=to;if(a&&t){var l=xn(a).hoistableScripts,h=so(t),f=l.get(h);f||(f=a.querySelector(kl(h)),f||(t=_({src:t,async:!0},r),(r=ns.get(h))&&om(t,r),f=a.createElement("script"),Ot(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function zS(t,r){fr.M(t,r);var a=to;if(a&&t){var l=xn(a).hoistableScripts,h=so(t),f=l.get(h);f||(f=a.querySelector(kl(h)),f||(t=_({src:t,async:!0,type:"module"},r),(r=ns.get(h))&&om(t,r),f=a.createElement("script"),Ot(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function mv(t,r,a,l){var h=(h=me.current)?zc(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=no(a.href),a=xn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var f=xn(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(Ml(t)))&&!f._p&&(b.instance=f,b.state.loading=5),ns.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ns.set(t,a),f||qS(h,t,a,b.state))),r&&l===null)throw Error(i(528,""));return b}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=so(a),a=xn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function no(t){return'href="'+Ut(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function pv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function qS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),cn(r,"link",a),Ot(r),t.head.appendChild(r))}function so(t){return'[src="'+Ut(t)+'"]'}function kl(t){return"script[async]"+t}function gv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ut(a.href)+'"]');if(l)return r.instance=l,Ot(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ot(l),cn(l,"style",h),qc(l,a.precedence,t),r.instance=l;case"stylesheet":h=no(a.href);var f=t.querySelector(Ml(h));if(f)return r.state.loading|=4,r.instance=f,Ot(f),f;l=pv(a),(h=ns.get(h))&&am(l,h),f=(t.ownerDocument||t).createElement("link"),Ot(f);var b=f;return b._p=new Promise(function(T,V){b.onload=T,b.onerror=V}),cn(f,"link",l),r.state.loading|=4,qc(f,a.precedence,t),r.instance=f;case"script":return f=so(a.src),(h=t.querySelector(kl(f)))?(r.instance=h,Ot(h),h):(l=a,(h=ns.get(f))&&(l=_({},a),om(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ot(h),cn(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,qc(l,a.precedence,t));return r.instance}function qc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===r)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function am(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Hc=null;function yv(t,r,a){if(Hc===null){var l=new Map,h=Hc=new Map;h.set(a,l)}else h=Hc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ci]||f[Kt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function vv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function HS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _v(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var jl=null;function FS(){}function GS(t,r,a){if(jl===null)throw Error(i(475));var l=jl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=no(a.href),f=t.querySelector(Ml(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Fc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,Ot(f);return}f=t.ownerDocument||t,a=pv(a),(h=ns.get(h))&&am(a,h),f=f.createElement("link"),Ot(f);var b=f;b._p=new Promise(function(T,V){b.onload=T,b.onerror=V}),cn(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Fc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function KS(){if(jl===null)throw Error(i(475));var t=jl;return t.stylesheets&&t.count===0&&lm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Fc(){if(this.count--,this.count===0){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Gc=null;function lm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Gc=new Map,r.forEach($S,t),Gc=null,Fc.call(t))}function $S(t,r){if(!(r.state.loading&4)){var a=Gc.get(t);if(a)var l=a.get(null);else{a=new Map,Gc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=r.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=Fc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Pl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function QS(t,r,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.hiddenUpdates=Hs(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function xv(t,r,a,l,h,f,b,T,V,$,oe,ce){return t=new QS(t,r,a,b,T,V,$,ce),r=1,f===!0&&(r|=24),f=Pn(3,null,null,r),t.current=f,f.stateNode=t,r=qd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Kd(f),t}function bv(t){return t?(t=ka,t):ka}function Ev(t,r,a,l,h,f){h=bv(h),l.context===null?l.context=h:l.pendingContext=h,l=kr(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=jr(t,l,r),a!==null&&(zn(a,t,r),dl(a,t,r))}function Tv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function um(t,r){Tv(t,r),(t=t.alternate)&&Tv(t,r)}function Sv(t){if(t.tag===13){var r=Ma(t,67108864);r!==null&&zn(r,t,67108864),um(t,67108864)}}var Kc=!0;function YS(t,r,a,l){var h=Q.T;Q.T=null;var f=ee.p;try{ee.p=2,cm(t,r,a,l)}finally{ee.p=f,Q.T=h}}function XS(t,r,a,l){var h=Q.T;Q.T=null;var f=ee.p;try{ee.p=8,cm(t,r,a,l)}finally{ee.p=f,Q.T=h}}function cm(t,r,a,l){if(Kc){var h=hm(l);if(h===null)Zf(t,r,l,$c,a),Av(t,l);else if(WS(h,t,r,a,l))l.stopPropagation();else if(Av(t,l),r&4&&-1<ZS.indexOf(t)){for(;h!==null;){var f=bs(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=as(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var V=1<<31-gt(b);T.entanglements[1]|=V,b&=~V}js(f),(lt&6)===0&&(Ic=_t()+500,Nl(0))}}break;case 13:T=Ma(f,2),T!==null&&zn(T,f,2),Oc(),um(f,2)}if(f=hm(l),f===null&&Zf(t,r,l,$c,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Zf(t,r,l,null,a)}}function hm(t){return t=$n(t),dm(t)}var $c=null;function dm(t){if($c=null,t=Gs(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return $c=t,null}function wv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ht()){case Vt:return 2;case Ct:return 8;case Gt:case vs:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var fm=!1,Qr=null,Yr=null,Xr=null,Vl=new Map,Ll=new Map,Zr=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(t,r){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function Ul(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=bs(r),r!==null&&Sv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function WS(t,r,a,l,h){switch(r){case"focusin":return Qr=Ul(Qr,t,r,a,l,h),!0;case"dragenter":return Yr=Ul(Yr,t,r,a,l,h),!0;case"mouseover":return Xr=Ul(Xr,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Vl.set(f,Ul(Vl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Ll.set(f,Ul(Ll.get(f)||null,t,r,a,l,h)),!0}return!1}function Rv(t){var r=Gs(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Ou(t.priority,function(){if(a.tag===13){var l=Bn();l=wr(l);var h=Ma(a,l);h!==null&&zn(h,a,l),um(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ys=l,a.target.dispatchEvent(l),Ys=null}else return r=bs(a),r!==null&&Sv(r),t.blockedOn=a,!1;r.shift()}return!0}function Cv(t,r,a){Qc(t)&&a.delete(r)}function JS(){fm=!1,Qr!==null&&Qc(Qr)&&(Qr=null),Yr!==null&&Qc(Yr)&&(Yr=null),Xr!==null&&Qc(Xr)&&(Xr=null),Vl.forEach(Cv),Ll.forEach(Cv)}function Yc(t,r){t.blockedOn===r&&(t.blockedOn=null,fm||(fm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,JS)))}var Xc=null;function Nv(t){Xc!==t&&(Xc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xc===t&&(Xc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var f=bs(a);f!==null&&(t.splice(r,3),r-=3,df(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Bl(t){function r(V){return Yc(V,t)}Qr!==null&&Yc(Qr,t),Yr!==null&&Yc(Yr,t),Xr!==null&&Yc(Xr,t),Vl.forEach(r),Ll.forEach(r);for(var a=0;a<Zr.length;a++){var l=Zr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)Rv(a),a.blockedOn===null&&Zr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[Lt]||null;if(typeof f=="function")b||Nv(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[Lt]||null)T=b.formAction;else if(dm(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Nv(a)}}}function mm(t){this._internalRoot=t}Zc.prototype.render=mm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Bn();Ev(a,l,t,r,null,null)},Zc.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ev(t.current,2,null,t,null,null),Oc(),r[Gn]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ar();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Zr.length&&r!==0&&r<Zr[a].priority;a++);Zr.splice(a,0,t),a===0&&Rv(t)}};var Iv=e.version;if(Iv!=="19.1.0")throw Error(i(527,Iv,"19.1.0"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var ew={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{ke=Wc.inject(ew),je=Wc}catch{}}return ql.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",h=Ky,f=$y,b=Qy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=xv(t,1,!1,null,null,a,l,h,f,b,T,null),t[Gn]=r.current,Xf(t),new mm(r)},ql.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,h="",f=Ky,b=$y,T=Qy,V=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),r=xv(t,1,!0,r,a??null,l,h,f,b,T,V,$),r.context=bv(null),a=r.current,l=Bn(),l=wr(l),h=kr(l),h.callback=null,jr(a,h,l),a=l,r.current.lanes=a,Fs(r,a),js(r),t[Gn]=r.current,Xf(t),new Zc(r)},ql.version="19.1.0",ql}var Bv;function cw(){if(Bv)return ym.exports;Bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ym.exports=uw(),ym.exports}var hw=cw(),Hl={},zv;function dw(){if(zv)return Hl;zv=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.parse=d,Hl.serialize=g;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function d(E,k){const I=new u,B=E.length;if(B<2)return I;const M=(k==null?void 0:k.decode)||_;let z=0;do{const q=E.indexOf("=",z);if(q===-1)break;const Y=E.indexOf(";",z),te=Y===-1?B:Y;if(q>te){z=E.lastIndexOf(";",q-1)+1;continue}const X=m(E,z,q),re=p(E,q,X),N=E.slice(X,re);if(I[N]===void 0){let R=m(E,q+1,te),D=p(E,te,R);const P=M(E.slice(R,D));I[N]=P}z=te+1}while(z<B);return I}function m(E,k,I){do{const B=E.charCodeAt(k);if(B!==32&&B!==9)return k}while(++k<I);return I}function p(E,k,I){for(;k>I;){const B=E.charCodeAt(--k);if(B!==32&&B!==9)return k+1}return I}function g(E,k,I){const B=(I==null?void 0:I.encode)||encodeURIComponent;if(!s.test(E))throw new TypeError(`argument name is invalid: ${E}`);const M=B(k);if(!e.test(M))throw new TypeError(`argument val is invalid: ${k}`);let z=E+"="+M;if(!I)return z;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);z+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);z+="; Domain="+I.domain}if(I.path){if(!i.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);z+="; Path="+I.path}if(I.expires){if(!S(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);z+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(z+="; HttpOnly"),I.secure&&(z+="; Secure"),I.partitioned&&(z+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return z}function _(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function S(E){return o.call(E)==="[object Date]"}return Hl}dw();var qv="popstate";function fw(s={}){function e(i,o){let{pathname:u,search:d,hash:m}=i.location;return Um("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:iu(o)}return pw(e,n,null,s)}function St(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ss(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mw(){return Math.random().toString(36).substring(2,10)}function Hv(s,e){return{usr:s.state,key:s.key,idx:e}}function Um(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:n,key:e&&e.key||i||mw()}}function iu({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function So(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function pw(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,d=o.history,m="POP",p=null,g=_();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function _(){return(d.state||{idx:null}).idx}function S(){m="POP";let M=_(),z=M==null?null:M-g;g=M,p&&p({action:m,location:B.location,delta:z})}function E(M,z){m="PUSH";let q=Um(B.location,M,z);g=_()+1;let Y=Hv(q,g),te=B.createHref(q);try{d.pushState(Y,"",te)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;o.location.assign(te)}u&&p&&p({action:m,location:B.location,delta:1})}function k(M,z){m="REPLACE";let q=Um(B.location,M,z);g=_();let Y=Hv(q,g),te=B.createHref(q);d.replaceState(Y,"",te),u&&p&&p({action:m,location:B.location,delta:0})}function I(M){return gw(M)}let B={get action(){return m},get location(){return s(o,d)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(qv,S),p=M,()=>{o.removeEventListener(qv,S),p=null}},createHref(M){return e(o,M)},createURL:I,encodeLocation(M){let z=I(M);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:E,replace:k,go(M){return d.go(M)}};return B}function gw(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:iu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Bx(s,e,n="/"){return yw(s,e,n,!1)}function yw(s,e,n,i){let o=typeof e=="string"?So(e):e,u=_r(o.pathname||"/",n);if(u==null)return null;let d=zx(s);vw(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=Nw(u);m=Rw(d[p],g,i)}return m}function zx(s,e=[],n=[],i=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(St(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=gr([i,p.relativePath]),_=n.concat(p);u.children&&u.children.length>0&&(St(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),zx(u.children,e,_,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:ww(g,u.index),routesMeta:_})};return s.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of qx(u.path))o(u,d,p)}),e}function qx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let d=qx(i.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function vw(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:Aw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var _w=/^:[\w-]+$/,xw=3,bw=2,Ew=1,Tw=10,Sw=-2,Fv=s=>s==="*";function ww(s,e){let n=s.split("/"),i=n.length;return n.some(Fv)&&(i+=Sw),e&&(i+=bw),n.filter(o=>!Fv(o)).reduce((o,u)=>o+(_w.test(u)?xw:u===""?Ew:Tw),i)}function Aw(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function Rw(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",d=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,_=u==="/"?e:e.slice(u.length)||"/",S=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),E=p.route;if(!S&&g&&n&&!i[i.length-1].route.index&&(S=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!S)return null;Object.assign(o,S.params),d.push({params:o,pathname:gr([u,S.pathname]),pathnameBase:Mw(gr([u,S.pathnameBase])),route:E}),S.pathnameBase!=="/"&&(u=gr([u,S.pathnameBase]))}return d}function _h(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=Cw(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:S},E)=>{if(_==="*"){let I=m[E]||"";d=u.slice(0,u.length-I.length).replace(/(.)\/+$/,"$1")}const k=m[E];return S&&!k?g[_]=void 0:g[_]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:s}}function Cw(s,e=!1,n=!0){ss(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Nw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ss(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function _r(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function Iw(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?So(s):s;return{pathname:n?n.startsWith("/")?n:Dw(n,e):e,search:kw(i),hash:jw(o)}}function Dw(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ow(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vp(s){let e=Ow(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function _p(s,e,n,i=!1){let o;typeof s=="string"?o=So(s):(o={...s},St(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),St(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),St(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let S=e.length-1;if(!i&&d.startsWith("..")){let E=d.split("/");for(;E[0]==="..";)E.shift(),S-=1;o.pathname=E.join("/")}m=S>=0?e[S]:"/"}let p=Iw(o,m),g=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var gr=s=>s.join("/").replace(/\/\/+/g,"/"),Mw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),kw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,jw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Pw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Hx=["POST","PUT","PATCH","DELETE"];new Set(Hx);var Vw=["GET",...Hx];new Set(Vw);var wo=C.createContext(null);wo.displayName="DataRouter";var Bh=C.createContext(null);Bh.displayName="DataRouterState";var Fx=C.createContext({isTransitioning:!1});Fx.displayName="ViewTransition";var Lw=C.createContext(new Map);Lw.displayName="Fetchers";var Uw=C.createContext(null);Uw.displayName="Await";var ys=C.createContext(null);ys.displayName="Navigation";var gu=C.createContext(null);gu.displayName="Location";var is=C.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var xp=C.createContext(null);xp.displayName="RouteError";function Bw(s,{relative:e}={}){St(Ao(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=C.useContext(ys),{hash:o,pathname:u,search:d}=yu(s,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:gr([n,u])),i.createHref({pathname:m,search:d,hash:o})}function Ao(){return C.useContext(gu)!=null}function Hn(){return St(Ao(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(gu).location}var Gx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kx(s){C.useContext(ys).static||C.useLayoutEffect(s)}function _i(){let{isDataRoute:s}=C.useContext(is);return s?tA():zw()}function zw(){St(Ao(),"useNavigate() may be used only in the context of a <Router> component.");let s=C.useContext(wo),{basename:e,navigator:n}=C.useContext(ys),{matches:i}=C.useContext(is),{pathname:o}=Hn(),u=JSON.stringify(vp(i)),d=C.useRef(!1);return Kx(()=>{d.current=!0}),C.useCallback((p,g={})=>{if(ss(d.current,Gx),!d.current)return;if(typeof p=="number"){n.go(p);return}let _=_p(p,JSON.parse(u),o,g.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:gr([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,s])}var qw=C.createContext(null);function Hw(s){let e=C.useContext(is).outlet;return e&&C.createElement(qw.Provider,{value:s},e)}function xi(){let{matches:s}=C.useContext(is),e=s[s.length-1];return e?e.params:{}}function yu(s,{relative:e}={}){let{matches:n}=C.useContext(is),{pathname:i}=Hn(),o=JSON.stringify(vp(n));return C.useMemo(()=>_p(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function Fw(s,e){return $x(s,e)}function $x(s,e,n,i){var z;St(Ao(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(ys),{matches:u}=C.useContext(is),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",_=d&&d.route;{let q=_&&_.path||"";Qx(p,!_||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=Hn(),E;if(e){let q=typeof e=="string"?So(e):e;St(g==="/"||((z=q.pathname)==null?void 0:z.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),E=q}else E=S;let k=E.pathname||"/",I=k;if(g!=="/"){let q=g.replace(/^\//,"").split("/");I="/"+k.replace(/^\//,"").split("/").slice(q.length).join("/")}let B=Bx(s,{pathname:I});ss(_||B!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),ss(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=Yw(B&&B.map(q=>Object.assign({},q,{params:Object.assign({},m,q.params),pathname:gr([g,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:gr([g,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,i);return e&&M?C.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},M):M}function Gw(){let s=eA(),e=Pw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:u},"ErrorBoundary")," or"," ",C.createElement("code",{style:u},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,d)}var Kw=C.createElement(Gw,null),$w=class extends C.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?C.createElement(is.Provider,{value:this.props.routeContext},C.createElement(xp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qw({routeContext:s,match:e,children:n}){let i=C.useContext(wo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(is.Provider,{value:s},n)}function Yw(s,e=[],n=null,i=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);St(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:_,errors:S}=n,E=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||E){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let S,E=!1,k=null,I=null;n&&(S=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||Kw,d&&(m<0&&_===0?(Qx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,I=null):m===_&&(E=!0,I=g.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,_+1)),M=()=>{let z;return S?z=k:E?z=I:g.route.Component?z=C.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=p,C.createElement(Qw,{match:g,routeContext:{outlet:p,matches:B,isDataRoute:n!=null},children:z})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?C.createElement($w,{location:n.location,revalidation:n.revalidation,component:k,error:S,children:M(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):M()},null)}function bp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xw(s){let e=C.useContext(wo);return St(e,bp(s)),e}function Zw(s){let e=C.useContext(Bh);return St(e,bp(s)),e}function Ww(s){let e=C.useContext(is);return St(e,bp(s)),e}function Ep(s){let e=Ww(s),n=e.matches[e.matches.length-1];return St(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Jw(){return Ep("useRouteId")}function eA(){var i;let s=C.useContext(xp),e=Zw("useRouteError"),n=Ep("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[n]}function tA(){let{router:s}=Xw("useNavigate"),e=Ep("useNavigate"),n=C.useRef(!1);return Kx(()=>{n.current=!0}),C.useCallback(async(o,u={})=>{ss(n.current,Gx),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Gv={};function Qx(s,e,n){!e&&!Gv[s]&&(Gv[s]=!0,ss(!1,n))}C.memo(nA);function nA({routes:s,future:e,state:n}){return $x(s,void 0,n,e)}function sA({to:s,replace:e,state:n,relative:i}){St(Ao(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(ys);ss(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=C.useContext(is),{pathname:d}=Hn(),m=_i(),p=_p(s,vp(u),d,i==="path"),g=JSON.stringify(p);return C.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:i})},[m,g,i,e,n]),null}function rA(s){return Hw(s.context)}function Sn(s){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iA({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1}){St(!Ao(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=So(n));let{pathname:p="/",search:g="",hash:_="",state:S=null,key:E="default"}=n,k=C.useMemo(()=>{let I=_r(p,d);return I==null?null:{location:{pathname:I,search:g,hash:_,state:S,key:E},navigationType:i}},[d,p,g,_,S,E,i]);return ss(k!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:C.createElement(ys.Provider,{value:m},C.createElement(gu.Provider,{children:e,value:k}))}function aA({children:s,location:e}){return Fw(Bm(s),e)}function Bm(s,e=[]){let n=[];return C.Children.forEach(s,(i,o)=>{if(!C.isValidElement(i))return;let u=[...e,o];if(i.type===C.Fragment){n.push.apply(n,Bm(i.props.children,u));return}St(i.type===Sn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Bm(i.props.children,u)),n.push(d)}),n}var oh="get",lh="application/x-www-form-urlencoded";function zh(s){return s!=null&&typeof s.tagName=="string"}function oA(s){return zh(s)&&s.tagName.toLowerCase()==="button"}function lA(s){return zh(s)&&s.tagName.toLowerCase()==="form"}function uA(s){return zh(s)&&s.tagName.toLowerCase()==="input"}function cA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function hA(s,e){return s.button===0&&(!e||e==="_self")&&!cA(s)}function zm(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function dA(s,e){let n=zm(s);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Jc=null;function fA(){if(Jc===null)try{new FormData(document.createElement("form"),0),Jc=!1}catch{Jc=!0}return Jc}var mA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Em(s){return s!=null&&!mA.has(s)?(ss(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):s}function pA(s,e){let n,i,o,u,d;if(lA(s)){let m=s.getAttribute("action");i=m?_r(m,e):null,n=s.getAttribute("method")||oh,o=Em(s.getAttribute("enctype"))||lh,u=new FormData(s)}else if(oA(s)||uA(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||m.getAttribute("action");if(i=p?_r(p,e):null,n=s.getAttribute("formmethod")||m.getAttribute("method")||oh,o=Em(s.getAttribute("formenctype"))||Em(m.getAttribute("enctype"))||lh,u=new FormData(m,s),!fA()){let{name:g,type:_,value:S}=s;if(_==="image"){let E=g?`${g}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else g&&u.append(g,S)}}else{if(zh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oh,i=null,o=lh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:d}}function Tp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function gA(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yA(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function vA(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await gA(u,n);return d.links?d.links():[]}return[]}));return EA(i.flat(1).filter(yA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Kv(s,e,n,i,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var _;return n[g].pathname!==p.pathname||((_=n[g].route.path)==null?void 0:_.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var S;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function _A(s,e,{includeHydrateFallback:n}={}){return xA(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function xA(s){return[...new Set(s)]}function bA(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function EA(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(bA(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var TA=new Set([100,101,204,205]);function SA(s,e){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname="_root.data":e&&_r(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Yx(){let s=C.useContext(wo);return Tp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function wA(){let s=C.useContext(Bh);return Tp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Sp=C.createContext(void 0);Sp.displayName="FrameworkContext";function Xx(){let s=C.useContext(Sp);return Tp(s,"You must render this element inside a <HydratedRouter> element"),s}function AA(s,e){let n=C.useContext(Sp),[i,o]=C.useState(!1),[u,d]=C.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:S}=e,E=C.useRef(null);C.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=z=>{z.forEach(q=>{d(q.isIntersecting)})},M=new IntersectionObserver(B,{threshold:.5});return E.current&&M.observe(E.current),()=>{M.disconnect()}}},[s]),C.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let k=()=>{o(!0)},I=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,E,{}]:[u,E,{onFocus:Fl(m,k),onBlur:Fl(p,I),onMouseEnter:Fl(g,k),onMouseLeave:Fl(_,I),onTouchStart:Fl(S,k)}]:[!1,E,{}]}function Fl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function RA({page:s,...e}){let{router:n}=Yx(),i=C.useMemo(()=>Bx(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?C.createElement(NA,{page:s,matches:i,...e}):null}function CA(s){let{manifest:e,routeModules:n}=Xx(),[i,o]=C.useState([]);return C.useEffect(()=>{let u=!1;return vA(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),i}function NA({page:s,matches:e,...n}){let i=Hn(),{manifest:o,routeModules:u}=Xx(),{basename:d}=Yx(),{loaderData:m,matches:p}=wA(),g=C.useMemo(()=>Kv(s,e,p,o,i,"data"),[s,e,p,o,i]),_=C.useMemo(()=>Kv(s,e,p,o,i,"assets"),[s,e,p,o,i]),S=C.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let I=new Set,B=!1;if(e.forEach(z=>{var Y;let q=o.routes[z.route.id];!q||!q.hasLoader||(!g.some(te=>te.route.id===z.route.id)&&z.route.id in m&&((Y=u[z.route.id])!=null&&Y.shouldRevalidate)||q.hasClientLoader?B=!0:I.add(z.route.id))}),I.size===0)return[];let M=SA(s,d);return B&&I.size>0&&M.searchParams.set("_routes",e.filter(z=>I.has(z.route.id)).map(z=>z.route.id).join(",")),[M.pathname+M.search]},[d,m,i,o,g,e,s,u]),E=C.useMemo(()=>_A(_,o),[_,o]),k=CA(_);return C.createElement(C.Fragment,null,S.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),E.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),k.map(({key:I,link:B})=>C.createElement("link",{key:I,...B})))}function IA(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zx&&(window.__reactRouterVersion="7.6.2")}catch{}function DA({basename:s,children:e,window:n}){let i=C.useRef();i.current==null&&(i.current=fw({window:n,v5Compat:!0}));let o=i.current,[u,d]=C.useState({action:o.action,location:o.location}),m=C.useCallback(p=>{C.startTransition(()=>d(p))},[d]);return C.useLayoutEffect(()=>o.listen(m),[o,m]),C.createElement(iA,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var Wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fe=C.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:_,viewTransition:S,...E},k){let{basename:I}=C.useContext(ys),B=typeof g=="string"&&Wx.test(g),M,z=!1;if(typeof g=="string"&&B&&(M=g,Zx))try{let D=new URL(window.location.href),P=g.startsWith("//")?new URL(D.protocol+g):new URL(g),U=_r(P.pathname,I);P.origin===D.origin&&U!=null?g=U+P.search+P.hash:z=!0}catch{ss(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=Bw(g,{relative:o}),[Y,te,X]=AA(i,E),re=jA(g,{replace:d,state:m,target:p,preventScrollReset:_,relative:o,viewTransition:S});function N(D){e&&e(D),D.defaultPrevented||re(D)}let R=C.createElement("a",{...E,...X,href:M||q,onClick:z||u?e:N,ref:IA(k,te),target:p,"data-discover":!B&&n==="render"?"true":void 0});return Y&&!B?C.createElement(C.Fragment,null,R,C.createElement(RA,{page:q})):R});Fe.displayName="Link";var OA=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},_){let S=yu(d,{relative:g.relative}),E=Hn(),k=C.useContext(Bh),{navigator:I,basename:B}=C.useContext(ys),M=k!=null&&BA(S)&&m===!0,z=I.encodeLocation?I.encodeLocation(S).pathname:S.pathname,q=E.pathname,Y=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(q=q.toLowerCase(),Y=Y?Y.toLowerCase():null,z=z.toLowerCase()),Y&&B&&(Y=_r(Y,B)||Y);const te=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let X=q===z||!o&&q.startsWith(z)&&q.charAt(te)==="/",re=Y!=null&&(Y===z||!o&&Y.startsWith(z)&&Y.charAt(z.length)==="/"),N={isActive:X,isPending:re,isTransitioning:M},R=X?e:void 0,D;typeof i=="function"?D=i(N):D=[i,X?"active":null,re?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(N):u;return C.createElement(Fe,{...g,"aria-current":R,className:D,ref:_,style:P,to:d,viewTransition:m},typeof p=="function"?p(N):p)});OA.displayName="NavLink";var MA=C.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:d=oh,action:m,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:S,...E},k)=>{let I=LA(),B=UA(m,{relative:g}),M=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&Wx.test(m),q=Y=>{if(p&&p(Y),Y.defaultPrevented)return;Y.preventDefault();let te=Y.nativeEvent.submitter,X=(te==null?void 0:te.getAttribute("formmethod"))||d;I(te||Y.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:S})};return C.createElement("form",{ref:k,method:M,action:B,onSubmit:i?p:q,...E,"data-discover":!z&&s==="render"?"true":void 0})});MA.displayName="Form";function kA(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jx(s){let e=C.useContext(wo);return St(e,kA(s)),e}function jA(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=_i(),p=Hn(),g=yu(s,{relative:u});return C.useCallback(_=>{if(hA(_,e)){_.preventDefault();let S=n!==void 0?n:iu(p)===iu(g);m(s,{replace:S,state:i,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,i,e,s,o,u,d])}function qh(s){ss(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(zm(s)),n=C.useRef(!1),i=Hn(),o=C.useMemo(()=>dA(i.search,n.current?null:e.current),[i.search]),u=_i(),d=C.useCallback((m,p)=>{const g=zm(typeof m=="function"?m(o):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,d]}var PA=0,VA=()=>`__${String(++PA)}__`;function LA(){let{router:s}=Jx("useSubmit"),{basename:e}=C.useContext(ys),n=Jw();return C.useCallback(async(i,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=pA(i,e);if(o.navigate===!1){let _=o.fetcherKey||VA();await s.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function UA(s,{relative:e}={}){let{basename:n}=C.useContext(ys),i=C.useContext(is);St(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...yu(s||".",{relative:e})},d=Hn();if(s==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(_=>_==="")){m.delete("index"),p.filter(S=>S).forEach(S=>m.append("index",S));let _=m.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:gr([n,u.pathname])),iu(u)}function BA(s,e={}){let n=C.useContext(Fx);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Jx("useViewTransitionState"),o=yu(s,{relative:e.relative});if(!n.isTransitioning)return!1;let u=_r(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=_r(n.nextLocation.pathname,i)||n.nextLocation.pathname;return _h(o.pathname,d)!=null||_h(o.pathname,u)!=null}[...TA];const zA=()=>{};var $v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},qA=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],m=s[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},tb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,m=d?s[o+1]:0,p=o+2<s.length,g=p?s[o+2]:0,_=u>>2,S=(u&3)<<4|m>>4;let E=(m&15)<<2|g>>6,k=g&63;p||(k=64,d||(E=64)),i.push(n[_],n[S],n[E],n[k])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(eb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):qA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const g=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new HA;const E=u<<2|m>>4;if(i.push(E),g!==64){const k=m<<4&240|g>>2;if(i.push(k),S!==64){const I=g<<6&192|S;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class HA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FA=function(s){const e=eb(s);return tb.encodeByteArray(e,!0)},xh=function(s){return FA(s).replace(/\./g,"")},nb=function(s){try{return tb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=()=>GA().__FIREBASE_DEFAULTS__,$A=()=>{if(typeof process>"u"||typeof $v>"u")return;const s=$v.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},QA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&nb(s[1]);return e&&JSON.parse(e)},Hh=()=>{try{return zA()||KA()||$A()||QA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},sb=s=>{var e,n;return(n=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},YA=s=>{const e=sb(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},rb=()=>{var s;return(s=Hh())===null||s===void 0?void 0:s.config},ib=s=>{var e;return(e=Hh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(s){return s.endsWith(".cloudworkstations.dev")}async function ab(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[xh(JSON.stringify(n)),xh(JSON.stringify(d)),""].join(".")}const Wl={};function WA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?s.emulator.push(e):s.prod.push(e);return s}function JA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Qv=!1;function ob(s,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||Wl[s]===e||Wl[s]||Qv)return;Wl[s]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",u=WA().prod.length>0;function d(){const E=document.getElementById(i);E&&E.remove()}function m(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,k){E.setAttribute("width","24"),E.setAttribute("id",k),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Qv=!0,d()},E}function _(E,k){E.setAttribute("id",k),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function S(){const E=JA(i),k=n("text"),I=document.getElementById(k)||document.createElement("span"),B=n("learnmore"),M=document.getElementById(B)||document.createElement("a"),z=n("preprendIcon"),q=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Y=E.element;m(Y),_(M,B);const te=g();p(q,z),Y.append(q,I,M,te),document.body.appendChild(Y)}u?(I.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function t1(){var s;const e=(s=Hh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i1(){const s=_n();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function a1(){return!t1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function l1(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=u1,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?c1(u,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Sr(o,m,i)}}function c1(s,e){return s.replace(h1,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const h1=/\{\$([^}]+)}/g;function d1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ia(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(Yv(u)&&Yv(d)){if(!ia(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Yv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Kl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function $l(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function f1(s,e){const n=new m1(s,e);return n.subscribe.bind(n)}class m1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Tm),o.error===void 0&&(o.error=Tm),o.complete===void 0&&(o.complete=Tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(s){return s&&s._delegate?s._delegate:s}class aa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v1(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&d.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y1(s){return s===sa?void 0:s}function v1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Xe||(Xe={}));const x1={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},b1=Xe.INFO,E1={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},T1=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=E1[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=b1,this._logHandler=T1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const S1=(s,e)=>e.some(n=>s instanceof n);let Xv,Zv;function w1(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A1(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,qm=new WeakMap,ub=new WeakMap,Sm=new WeakMap,Ap=new WeakMap;function R1(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(ii(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&lb.set(n,s)}).catch(()=>{}),Ap.set(e,s),e}function C1(s){if(qm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});qm.set(s,e)}let Hm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return qm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ub.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function N1(s){Hm=s(Hm)}function I1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(wm(this),e,...n);return ub.set(i,e.sort?e.sort():[e]),ii(i)}:A1().includes(s)?function(...e){return s.apply(wm(this),e),ii(lb.get(this))}:function(...e){return ii(s.apply(wm(this),e))}}function D1(s){return typeof s=="function"?I1(s):(s instanceof IDBTransaction&&C1(s),S1(s,w1())?new Proxy(s,Hm):s)}function ii(s){if(s instanceof IDBRequest)return R1(s);if(Sm.has(s))return Sm.get(s);const e=D1(s);return e!==s&&(Sm.set(s,e),Ap.set(e,s)),e}const wm=s=>Ap.get(s);function O1(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),m=ii(d);return i&&d.addEventListener("upgradeneeded",p=>{i(ii(d.result),p.oldVersion,p.newVersion,ii(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const M1=["get","getKey","getAll","getAllKeys","count"],k1=["put","add","delete","clear"],Am=new Map;function Wv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=k1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||M1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Am.set(e,u),u}N1(s=>({...s,get:(e,n,i)=>Wv(e,n)||s.get(e,n,i),has:(e,n)=>!!Wv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function P1(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",Jv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new wp("@firebase/app"),V1="@firebase/app-compat",L1="@firebase/analytics-compat",U1="@firebase/analytics",B1="@firebase/app-check-compat",z1="@firebase/app-check",q1="@firebase/auth",H1="@firebase/auth-compat",F1="@firebase/database",G1="@firebase/data-connect",K1="@firebase/database-compat",$1="@firebase/functions",Q1="@firebase/functions-compat",Y1="@firebase/installations",X1="@firebase/installations-compat",Z1="@firebase/messaging",W1="@firebase/messaging-compat",J1="@firebase/performance",eR="@firebase/performance-compat",tR="@firebase/remote-config",nR="@firebase/remote-config-compat",sR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",aR="@firebase/ai",oR="@firebase/firestore-compat",lR="firebase",uR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",cR={[Fm]:"fire-core",[V1]:"fire-core-compat",[U1]:"fire-analytics",[L1]:"fire-analytics-compat",[z1]:"fire-app-check",[B1]:"fire-app-check-compat",[q1]:"fire-auth",[H1]:"fire-auth-compat",[F1]:"fire-rtdb",[G1]:"fire-data-connect",[K1]:"fire-rtdb-compat",[$1]:"fire-fn",[Q1]:"fire-fn-compat",[Y1]:"fire-iid",[X1]:"fire-iid-compat",[Z1]:"fire-fcm",[W1]:"fire-fcm-compat",[J1]:"fire-perf",[eR]:"fire-perf-compat",[tR]:"fire-rc",[nR]:"fire-rc-compat",[sR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[oR]:"fire-fst-compat",[aR]:"fire-vertex","fire-js":"fire-js",[lR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,hR=new Map,Km=new Map;function e_(s,e){try{s.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function po(s){const e=s.name;if(Km.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;Km.set(e,s);for(const n of bh.values())e_(n,s);for(const n of hR.values())e_(n,s);return!0}function Rp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ds(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new vu("app","Firebase",dR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=uR;function cb(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gm,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw ai.create("bad-app-name",{appName:String(o)});if(n||(n=rb()),!n)throw ai.create("no-options");const u=bh.get(o);if(u){if(ia(n,u.options)&&ia(i,u.config))return u;throw ai.create("duplicate-app",{appName:o})}const d=new _1(o);for(const p of Km.values())d.addComponent(p);const m=new fR(n,i,d);return bh.set(o,m),m}function hb(s=Gm){const e=bh.get(s);if(!e&&s===Gm&&rb())return cb();if(!e)throw ai.create("no-app",{appName:s});return e}function oi(s,e,n){var i;let o=(i=cR[s])!==null&&i!==void 0?i:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(m.join(" "));return}po(new aa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebase-heartbeat-database",pR=1,au="firebase-heartbeat-store";let Rm=null;function db(){return Rm||(Rm=O1(mR,pR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(s=>{throw ai.create("idb-open",{originalErrorMessage:s.message})})),Rm}async function gR(s){try{const n=(await db()).transaction(au),i=await n.objectStore(au).get(fb(s));return await n.done,i}catch(e){if(e instanceof Sr)xr.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(n.message)}}}async function t_(s,e){try{const i=(await db()).transaction(au,"readwrite");await i.objectStore(au).put(e,fb(s)),await i.done}catch(n){if(n instanceof Sr)xr.warn(n.message);else{const i=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xr.warn(i.message)}}}function fb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1024,vR=30;class _R{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=n_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>vR){const d=ER(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n_(),{heartbeatsToSend:i,unsentEntries:o}=xR(this._heartbeatsCache.heartbeats),u=xh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return xr.warn(n),""}}}function n_(){return new Date().toISOString().substring(0,10)}function xR(s,e=yR){const n=[];let i=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),s_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),s_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class bR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?l1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return t_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function s_(s){return xh(JSON.stringify({version:2,heartbeats:s})).length}function ER(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(s){po(new aa("platform-logger",e=>new j1(e),"PRIVATE")),po(new aa("heartbeat",e=>new _R(e),"PRIVATE")),oi(Fm,Jv,s),oi(Fm,Jv,"esm2017"),oi("fire-js","")}TR("");function Cp(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(n[i[o]]=s[i[o]]);return n}function mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SR=mb,pb=new vu("auth","Firebase",mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new wp("@firebase/auth");function wR(s,...e){Eh.logLevel<=Xe.WARN&&Eh.warn(`Auth (${Co}): ${s}`,...e)}function uh(s,...e){Eh.logLevel<=Xe.ERROR&&Eh.error(`Auth (${Co}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(s,...e){throw Np(s,...e)}function Vs(s,...e){return Np(s,...e)}function gb(s,e,n){const i=Object.assign(Object.assign({},SR()),{[e]:n});return new vu("auth","Firebase",i).create(e,{appName:s.name})}function li(s){return gb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Np(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return pb.create(s,...e)}function Oe(s,e,...n){if(!s)throw Np(e,...n)}function mr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw uh(e),new Error(e)}function br(s,e){s||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function AR(){return r_()==="http:"||r_()==="https:"}function r_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AR()||s1()||"connection"in navigator)?navigator.onLine:!0}function CR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=e1()||r1()}get(){return RR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(s,e){br(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DR=new xu(3e4,6e4);function ca(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function bi(s,e,n,i,o={}){return vb(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const m=_u(Object.assign({key:s.config.apiKey},d)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g=Object.assign({method:e,headers:p},u);return n1()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Ro(s.emulatorConfig.host)&&(g.credentials="include"),yb.fetch()(await _b(s,s.config.apiHost,n,m),g)})}async function vb(s,e,n){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},NR),e);try{const o=new MR(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw eh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw eh(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw eh(s,"user-disabled",d);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw gb(s,_,g);ps(s,_)}}catch(o){if(o instanceof Sr)throw o;ps(s,"network-request-failed",{message:String(o)})}}async function Fh(s,e,n,i,o={}){const u=await bi(s,e,n,i,o);return"mfaPendingCredential"in u&&ps(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function _b(s,e,n,i){const o=`${e}${n}?${i}`,u=s,d=u.config.emulator?Ip(s.config,o):`${s.config.apiScheme}://${o}`;return IR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function OR(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vs(this.auth,"network-request-failed")),DR.get())})}}function eh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Vs(s,e,i);return o.customData._tokenResponse=n,o}function i_(s){return s!==void 0&&s.enterprise!==void 0}class kR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jR(s,e){return bi(s,"GET","/v2/recaptchaConfig",ca(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(s,e){return bi(s,"POST","/v1/accounts:delete",e)}async function Th(s,e){return bi(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VR(s,e=!1){const n=Ft(s),i=await n.getIdToken(e),o=Dp(i);Oe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:i,authTime:Jl(Cm(o.auth_time)),issuedAtTime:Jl(Cm(o.iat)),expirationTime:Jl(Cm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Cm(s){return Number(s)*1e3}function Dp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nb(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function a_(s){const e=Dp(s);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&LR(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function LR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(s){var e;const n=s.auth,i=await s.getIdToken(),o=await ou(s,Th(n,{idToken:i}));Oe(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?xb(u.providerUserInfo):[],m=zR(s.providerData,d),p=s.isAnonymous,g=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),_=p?g:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Qm(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(s,S)}async function BR(s){const e=Ft(s);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zR(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function xb(s){return s.map(e=>{var{providerId:n}=e,i=Cp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(s,e){const n=await vb(s,{},async()=>{const i=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await _b(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return s.emulatorConfig&&Ro(s.emulatorConfig.host)&&(p.credentials="include"),yb.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HR(s,e){return bi(s,"POST","/v2/accounts:revokeToken",ca(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=a_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await qR(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,d=new co;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Oe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(s,e){Oe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,u=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Qm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VR(this,e)}reload(){return BR(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(li(this.auth));const e=await this.getIdToken();return await ou(this,PR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,u,d,m,p,g,_;const S=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,k=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,I=(d=n.photoURL)!==null&&d!==void 0?d:void 0,B=(m=n.tenantId)!==null&&m!==void 0?m:void 0,M=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,z=(g=n.createdAt)!==null&&g!==void 0?g:void 0,q=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Y,emailVerified:te,isAnonymous:X,providerData:re,stsTokenManager:N}=n;Oe(Y&&N,e,"internal-error");const R=co.fromJSON(this.name,N);Oe(typeof Y=="string",e,"internal-error"),Jr(S,e.name),Jr(E,e.name),Oe(typeof te=="boolean",e,"internal-error"),Oe(typeof X=="boolean",e,"internal-error"),Jr(k,e.name),Jr(I,e.name),Jr(B,e.name),Jr(M,e.name),Jr(z,e.name),Jr(q,e.name);const D=new fs({uid:Y,auth:e,email:E,emailVerified:te,displayName:S,isAnonymous:X,photoURL:I,phoneNumber:k,tenantId:B,stsTokenManager:R,createdAt:z,lastLoginAt:q});return re&&Array.isArray(re)&&(D.providerData=re.map(P=>Object.assign({},P))),M&&(D._redirectEventId=M),D}static async _fromIdTokenResponse(e,n,i=!1){const o=new co;o.updateFromServerResponse(n);const u=new fs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Sh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Oe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?xb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new co;m.updateFromIdToken(i);const p=new fs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function pr(s){br(s instanceof Function,"Expected a class definition");let e=o_.get(s);return e?(br(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,o_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bb.type="NONE";const l_=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(s,e,n){return`firebase:${s}:${e}:${n}`}class ho{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=ch(this.userKey,o.apiKey,u),this.fullPersistenceKey=ch("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ho(pr(l_),e,i);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||pr(l_);const d=ch(i,e.config.apiKey,e.name);let m=null;for(const g of n)try{const _=await g._get(d);if(_){let S;if(typeof _=="string"){const E=await Th(e,{idToken:_}).catch(()=>{});if(!E)break;S=await fs._fromGetAccountInfoResponse(e,E,_)}else S=fs._fromJSON(e,_);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ho(u,e,i):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new ho(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rb(e))return"Blackberry";if(Cb(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||Sb(e))&&!e.includes("edge/"))return"Chrome";if(Ab(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Eb(s=_n()){return/firefox\//i.test(s)}function Tb(s=_n()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sb(s=_n()){return/crios\//i.test(s)}function wb(s=_n()){return/iemobile/i.test(s)}function Ab(s=_n()){return/android/i.test(s)}function Rb(s=_n()){return/blackberry/i.test(s)}function Cb(s=_n()){return/webos/i.test(s)}function Op(s=_n()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function FR(s=_n()){var e;return Op(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GR(){return i1()&&document.documentMode===10}function Nb(s=_n()){return Op(s)||Ab(s)||Cb(s)||Rb(s)||/windows phone/i.test(s)||wb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(s,e=[]){let n;switch(s){case"Browser":n=u_(_n());break;case"Worker":n=`${u_(_n())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(s,e={}){return bi(s,"GET","/v2/passwordPolicy",ca(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=6;class YR{constructor(e){var n,i,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:QR,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new KR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var i,o,u;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ds(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(li(this));const n=e?Ft(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $R(this),n=new YR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await HR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function No(s){return Ft(s)}class c_{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZR(s){Gh=s}function Db(s){return Gh.loadJS(s)}function WR(){return Gh.recaptchaEnterpriseScript}function JR(){return Gh.gapiScript}function eC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class tC{constructor(){this.enterprise=new nC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sC="recaptcha-enterprise",Ob="NO_RECAPTCHA";class rC{constructor(e){this.type=sC,this.auth=No(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{jR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new kR(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;i_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Ob)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(m=>{if(!n&&i_(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=WR();p.length!==0&&(p+=m),Db(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function h_(s,e,n,i=!1,o=!1){const u=new rC(s);let d;if(o)d=Ob;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function d_(s,e,n,i,o){var u;if(!((u=s._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await h_(s,e,n,n==="getOobCode");return i(s,d)}else return i(s,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await h_(s,e,n,n==="getOobCode");return i(s,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(s,e){const n=Rp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ia(u,e??{}))return o;ps(o,"already-initialized")}return n.initialize({options:e})}function aC(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function oC(s,e,n){const i=No(s);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=Mb(e),{host:d,port:m}=lC(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},_=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(ia(g,i.config.emulator)&&ia(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ro(d)?(ab(`${u}//${d}${p}`),ob("Auth",!0)):uC()}function Mb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function lC(s){const e=Mb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:f_(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:f_(d)}}}function f_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function uC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function cC(s,e){return bi(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(s,e){return Fh(s,"POST","/v1/accounts:signInWithPassword",ca(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(s,e){return Fh(s,"POST","/v1/accounts:signInWithEmailLink",ca(s,e))}async function fC(s,e){return Fh(s,"POST","/v1/accounts:signInWithEmailLink",ca(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Mp{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new lu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d_(e,n,"signInWithPassword",hC);case"emailLink":return dC(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d_(e,i,"signUpPassword",cC);case"emailLink":return fC(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(s,e){return Fh(s,"POST","/v1/accounts:signInWithIdp",ca(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="http://localhost";class oa extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,u=Cp(n,["providerId","signInMethod"]);if(!i||!o)return null;const d=new oa(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:mC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gC(s){const e=Kl($l(s)).link,n=e?Kl($l(e)).deep_link_id:null,i=Kl($l(s)).deep_link_id;return(i?Kl($l(i)).link:null)||i||n||e||s}class kp{constructor(e){var n,i,o,u,d,m;const p=Kl($l(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,S=pC((o=p.mode)!==null&&o!==void 0?o:null);Oe(g&&_&&S,"argument-error"),this.apiKey=g,this.operation=S,this.code=_,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=gC(e);try{return new kp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=kp.parseLink(n);return Oe(i,"argument-error"),lu._fromEmailAndCode(e,i.code,i.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends kb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends bu{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ti.credential(n,i)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends bu{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends bu{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return si.credential(n,i)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await fs._fromIdTokenResponse(e,i,o),d=m_(i);return new go({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=m_(i);return new go({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function m_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Sr{constructor(e,n,i,o){var u;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new wh(e,n,i,o)}}function jb(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(s,u,e,i):u})}async function yC(s,e,n=!1){const i=await ou(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return go._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(s,e,n=!1){const{auth:i}=s;if(ds(i.app))return Promise.reject(li(i));const o="reauthenticate";try{const u=await ou(s,jb(i,o,e,s),n);Oe(u.idToken,i,"internal-error");const d=Dp(u.idToken);Oe(d,i,"internal-error");const{sub:m}=d;return Oe(s.uid===m,i,"user-mismatch"),go._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ps(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(s,e,n=!1){if(ds(s.app))return Promise.reject(li(s));const i="signIn",o=await jb(s,i,e),u=await go._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function _C(s,e){return Pb(No(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(s){const e=No(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function bC(s,e,n){return ds(s.app)?Promise.reject(li(s)):_C(Ft(s),Io.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xC(s),i})}function EC(s,e,n,i){return Ft(s).onIdTokenChanged(e,n,i)}function TC(s,e,n){return Ft(s).beforeAuthStateChanged(e,n)}function Kh(s,e,n,i){return Ft(s).onAuthStateChanged(e,n,i)}function jp(s){return Ft(s).signOut()}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1e3,wC=10;class Lb extends Vb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);GR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wC):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lb.type="LOCAL";const AC=Lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Vb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ub.type="SESSION";const Bb=Ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new $h(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await RC(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=Pp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(S){const E=S;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(E.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return window}function NC(s){Ls().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(){return typeof Ls().WorkerGlobalScope<"u"&&typeof Ls().importScripts=="function"}async function IC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function OC(){return zb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",MC=1,Rh="firebaseLocalStorage",Hb="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qh(s,e){return s.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function kC(){const s=indexedDB.deleteDatabase(qb);return new Eu(s).toPromise()}function Ym(){const s=indexedDB.open(qb,MC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Rh,{keyPath:Hb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Rh)?e(i):(i.close(),await kC(),e(await Ym()))})})}async function p_(s,e,n){const i=Qh(s,!0).put({[Hb]:e,value:n});return new Eu(i).toPromise()}async function jC(s,e){const n=Qh(s,!1).get(e),i=await new Eu(n).toPromise();return i===void 0?null:i.value}function g_(s,e){const n=Qh(s,!0).delete(e);return new Eu(n).toPromise()}const PC=800,VC=3;class Fb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>VC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(OC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new CC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await p_(e,Ah,"1"),await g_(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>p_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>jC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Qh(o,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fb.type="LOCAL";const LC=Fb;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(s,e){return e?pr(e):(Oe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BC(s){return Pb(s.auth,new Vp(s),s.bypassAuthState)}function zC(s){const{auth:e,user:n}=s;return Oe(n,e,"internal-error"),vC(n,new Vp(s),s.bypassAuthState)}async function qC(s){const{auth:e,user:n}=s;return Oe(n,e,"internal-error"),yC(n,new Vp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BC;case"linkViaPopup":case"linkViaRedirect":return qC;case"reauthViaPopup":case"reauthViaRedirect":return zC;default:ps(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new xu(2e3,1e4);class lo extends Gb{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HC.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="pendingRedirect",hh=new Map;class GC extends Gb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const i=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KC(s,e){const n=YC(e),i=QC(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function $C(s,e){hh.set(s._key(),e)}function QC(s){return pr(s._redirectPersistence)}function YC(s){return ch(FC,s.config.apiKey,s.name)}async function XC(s,e,n=!1){if(ds(s.app))return Promise.reject(li(s));const i=No(s),o=UC(i,e),d=await new GC(i,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=10*60*1e3;class WC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Kb(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZC&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Kb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(s,e={}){return bi(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nN=/^https?/;async function sN(s){if(s.config.emulator)return;const{authorizedDomains:e}=await eN(s);for(const n of e)try{if(rN(n))return}catch{}ps(s,"unauthorized-domain")}function rN(s){const e=$m(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!nN.test(n))return!1;if(tN.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new xu(3e4,6e4);function v_(){const s=Ls().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function aN(s){return new Promise((e,n)=>{var i,o,u;function d(){v_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v_(),n(Vs(s,"network-request-failed"))},timeout:iN.get()})}if(!((o=(i=Ls().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ls().gapi)===null||u===void 0)&&u.load)d();else{const m=eC("iframefcb");return Ls()[m]=()=>{gapi.load?d():n(Vs(s,"network-request-failed"))},Db(`${JR()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw dh=null,e})}let dh=null;function oN(s){return dh=dh||aN(s),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new xu(5e3,15e3),uN="__/auth/iframe",cN="emulator/auth/iframe",hN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fN(s){const e=s.config;Oe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Ip(e,cN):`https://${s.config.authDomain}/${uN}`,i={apiKey:e.apiKey,appName:s.name,v:Co},o=dN.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${_u(i).slice(1)}`}async function mN(s){const e=await oN(s),n=Ls().gapi;return Oe(n,s,"internal-error"),e.open({where:document.body,url:fN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hN,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Vs(s,"network-request-failed"),m=Ls().setTimeout(()=>{u(d)},lN.get());function p(){Ls().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gN=500,yN=600,vN="_blank",_N="http://localhost";class __{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xN(s,e,n,i=gN,o=yN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p=Object.assign(Object.assign({},pN),{width:i.toString(),height:o.toString(),top:u,left:d}),g=_n().toLowerCase();n&&(m=Sb(g)?vN:n),Eb(g)&&(e=e||_N,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[k,I])=>`${E}${k}=${I},`,"");if(FR(g)&&m!=="_self")return bN(e||"",m),new __(null);const S=window.open(e||"",m,_);Oe(S,s,"popup-blocked");try{S.focus()}catch{}return new __(S)}function bN(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="__/auth/handler",TN="emulator/auth/handler",SN=encodeURIComponent("fac");async function x_(s,e,n,i,o,u){Oe(s.config.authDomain,s,"auth-domain-config-required"),Oe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Co,eventId:o};if(e instanceof kb){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",d1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))d[_]=S}if(e instanceof bu){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const p=await s._getAppCheckToken(),g=p?`#${SN}=${encodeURIComponent(p)}`:"";return`${wN(s)}?${_u(m).slice(1)}${g}`}function wN({config:s}){return s.emulator?Ip(s,TN):`https://${s.authDomain}/${EN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class AN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bb,this._completeRedirectFn=XC,this._overrideRedirectResult=$C}async _openPopup(e,n,i,o){var u;br((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await x_(e,n,i,$m(),o);return xN(e,d,Pp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await x_(e,n,i,$m(),o);return NC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(br(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mN(e),i=new WC(e);return n.register("authEvent",o=>(Oe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Nm];d!==void 0&&n(!!d),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nb()||Tb()||Op()}}const RN=AN;var b_="@firebase/auth",E_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IN(s){po(new aa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ib(s)},g=new XR(i,o,u,p);return aC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),po(new aa("auth-internal",e=>{const n=No(e.getProvider("auth").getImmediate());return(i=>new CN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oi(b_,E_,NN(s)),oi(b_,E_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=5*60,ON=ib("authIdTokenMaxAge")||DN;let T_=null;const MN=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ON)return;const o=n==null?void 0:n.token;T_!==o&&(T_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kN(s=hb()){const e=Rp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=iC(s,{popupRedirectResolver:RN,persistence:[LC,AC,Bb]}),i=ib("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=MN(u.toString());TC(n,d,()=>d(n.currentUser)),EC(n,m=>d(m))}}const o=sb("auth");return o&&oC(n,`http://${o}`),n}function jN(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}ZR({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Vs("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",jN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IN("Browser");const S_="FLASH FLASH ";function Fn(s){C.useEffect(()=>{const e=s?`${s} | ${S_}`:S_;document.title=e},[s])}var PN="firebase",VN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi(PN,VN,"app");var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,$b;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function D(){}D.prototype=R.prototype,N.D=R.prototype,N.prototype=new D,N.prototype.constructor=N,N.C=function(P,U,L){for(var A=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)A[xe-2]=arguments[xe];return R.prototype[U].apply(P,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,D){D||(D=0);var P=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)P[U]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(U=0;16>U;++U)P[U]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=N.g[0],D=N.g[1],U=N.g[2];var L=N.g[3],A=R+(L^D&(U^L))+P[0]+3614090360&4294967295;R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+P[1]+3905402710&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+P[2]+606105819&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+P[3]+3250441966&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+P[4]+4118548399&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+P[5]+1200080426&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+P[6]+2821735955&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+P[7]+4249261313&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+P[8]+1770035416&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+P[9]+2336552879&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+P[10]+4294925233&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+P[11]+2304563134&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(L^D&(U^L))+P[12]+1804603682&4294967295,R=D+(A<<7&4294967295|A>>>25),A=L+(U^R&(D^U))+P[13]+4254626195&4294967295,L=R+(A<<12&4294967295|A>>>20),A=U+(D^L&(R^D))+P[14]+2792965006&4294967295,U=L+(A<<17&4294967295|A>>>15),A=D+(R^U&(L^R))+P[15]+1236535329&4294967295,D=U+(A<<22&4294967295|A>>>10),A=R+(U^L&(D^U))+P[1]+4129170786&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+P[6]+3225465664&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+P[11]+643717713&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+P[0]+3921069994&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+P[5]+3593408605&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+P[10]+38016083&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+P[15]+3634488961&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+P[4]+3889429448&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+P[9]+568446438&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+P[14]+3275163606&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+P[3]+4107603335&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+P[8]+1163531501&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(U^L&(D^U))+P[13]+2850285829&4294967295,R=D+(A<<5&4294967295|A>>>27),A=L+(D^U&(R^D))+P[2]+4243563512&4294967295,L=R+(A<<9&4294967295|A>>>23),A=U+(R^D&(L^R))+P[7]+1735328473&4294967295,U=L+(A<<14&4294967295|A>>>18),A=D+(L^R&(U^L))+P[12]+2368359562&4294967295,D=U+(A<<20&4294967295|A>>>12),A=R+(D^U^L)+P[5]+4294588738&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+P[8]+2272392833&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+P[11]+1839030562&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+P[14]+4259657740&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+P[1]+2763975236&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+P[4]+1272893353&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+P[7]+4139469664&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+P[10]+3200236656&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+P[13]+681279174&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+P[0]+3936430074&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+P[3]+3572445317&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+P[6]+76029189&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(D^U^L)+P[9]+3654602809&4294967295,R=D+(A<<4&4294967295|A>>>28),A=L+(R^D^U)+P[12]+3873151461&4294967295,L=R+(A<<11&4294967295|A>>>21),A=U+(L^R^D)+P[15]+530742520&4294967295,U=L+(A<<16&4294967295|A>>>16),A=D+(U^L^R)+P[2]+3299628645&4294967295,D=U+(A<<23&4294967295|A>>>9),A=R+(U^(D|~L))+P[0]+4096336452&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+P[7]+1126891415&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+P[14]+2878612391&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+P[5]+4237533241&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+P[12]+1700485571&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+P[3]+2399980690&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+P[10]+4293915773&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+P[1]+2240044497&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+P[8]+1873313359&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+P[15]+4264355552&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+P[6]+2734768916&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+P[13]+1309151649&4294967295,D=U+(A<<21&4294967295|A>>>11),A=R+(U^(D|~L))+P[4]+4149444226&4294967295,R=D+(A<<6&4294967295|A>>>26),A=L+(D^(R|~U))+P[11]+3174756917&4294967295,L=R+(A<<10&4294967295|A>>>22),A=U+(R^(L|~D))+P[2]+718787259&4294967295,U=L+(A<<15&4294967295|A>>>17),A=D+(L^(U|~R))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(U+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.u=function(N,R){R===void 0&&(R=N.length);for(var D=R-this.blockSize,P=this.B,U=this.h,L=0;L<R;){if(U==0)for(;L<=D;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<R;)if(P[U++]=N.charCodeAt(L++),U==this.blockSize){o(this,P),U=0;break}}else for(;L<R;)if(P[U++]=N[L++],U==this.blockSize){o(this,P),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;var D=8*this.o;for(R=N.length-8;R<N.length;++R)N[R]=D&255,D/=256;for(this.u(N),N=Array(16),R=D=0;4>R;++R)for(var P=0;32>P;P+=8)N[D++]=this.g[R]>>>P&255;return N};function u(N,R){var D=m;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=R(N)}function d(N,R){this.h=R;for(var D=[],P=!0,U=N.length-1;0<=U;U--){var L=N[U]|0;P&&L==R||(D[U]=L,P=!1)}this.g=D}var m={};function p(N){return-128<=N&&128>N?u(N,function(R){return new d([R|0],0>R?-1:0)}):new d([N|0],0>N?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return S;if(0>N)return M(g(-N));for(var R=[],D=1,P=0;N>=D;P++)R[P]=N/D|0,D*=4294967296;return new d(R,0)}function _(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return M(_(N.substring(1),R));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(R,8)),P=S,U=0;U<N.length;U+=8){var L=Math.min(8,N.length-U),A=parseInt(N.substring(U,U+L),R);8>L?(L=g(Math.pow(R,L)),P=P.j(L).add(g(A))):(P=P.j(D),P=P.add(g(A)))}return P}var S=p(0),E=p(1),k=p(16777216);s=d.prototype,s.m=function(){if(B(this))return-M(this).m();for(var N=0,R=1,D=0;D<this.g.length;D++){var P=this.i(D);N+=(0<=P?P:4294967296+P)*R,R*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I(this))return"0";if(B(this))return"-"+M(this).toString(N);for(var R=g(Math.pow(N,6)),D=this,P="";;){var U=te(D,R).g;D=z(D,U.j(R));var L=((0<D.g.length?D.g[0]:D.h)>>>0).toString(N);if(D=U,I(D))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function I(N){if(N.h!=0)return!1;for(var R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function B(N){return N.h==-1}s.l=function(N){return N=z(this,N),B(N)?-1:I(N)?0:1};function M(N){for(var R=N.g.length,D=[],P=0;P<R;P++)D[P]=~N.g[P];return new d(D,~N.h).add(E)}s.abs=function(){return B(this)?M(this):this},s.add=function(N){for(var R=Math.max(this.g.length,N.g.length),D=[],P=0,U=0;U<=R;U++){var L=P+(this.i(U)&65535)+(N.i(U)&65535),A=(L>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);P=A>>>16,L&=65535,A&=65535,D[U]=A<<16|L}return new d(D,D[D.length-1]&-2147483648?-1:0)};function z(N,R){return N.add(M(R))}s.j=function(N){if(I(this)||I(N))return S;if(B(this))return B(N)?M(this).j(M(N)):M(M(this).j(N));if(B(N))return M(this.j(M(N)));if(0>this.l(k)&&0>N.l(k))return g(this.m()*N.m());for(var R=this.g.length+N.g.length,D=[],P=0;P<2*R;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var U=0;U<N.g.length;U++){var L=this.i(P)>>>16,A=this.i(P)&65535,xe=N.i(U)>>>16,ye=N.i(U)&65535;D[2*P+2*U]+=A*ye,q(D,2*P+2*U),D[2*P+2*U+1]+=L*ye,q(D,2*P+2*U+1),D[2*P+2*U+1]+=A*xe,q(D,2*P+2*U+1),D[2*P+2*U+2]+=L*xe,q(D,2*P+2*U+2)}for(P=0;P<R;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=R;P<2*R;P++)D[P]=0;return new d(D,0)};function q(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function Y(N,R){this.g=N,this.h=R}function te(N,R){if(I(R))throw Error("division by zero");if(I(N))return new Y(S,S);if(B(N))return R=te(M(N),R),new Y(M(R.g),M(R.h));if(B(R))return R=te(N,M(R)),new Y(M(R.g),R.h);if(30<N.g.length){if(B(N)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var D=E,P=R;0>=P.l(N);)D=X(D),P=X(P);var U=re(D,1),L=re(P,1);for(P=re(P,2),D=re(D,2);!I(P);){var A=L.add(P);0>=A.l(N)&&(U=U.add(D),L=A),P=re(P,1),D=re(D,1)}return R=z(N,U.j(R)),new Y(U,R)}for(U=S;0<=N.l(R);){for(D=Math.max(1,Math.floor(N.m()/R.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=g(D),A=L.j(R);B(A)||0<A.l(N);)D-=P,L=g(D),A=L.j(R);I(L)&&(L=E),U=U.add(L),N=z(N,A)}return new Y(U,N)}s.A=function(N){return te(this,N).h},s.and=function(N){for(var R=Math.max(this.g.length,N.g.length),D=[],P=0;P<R;P++)D[P]=this.i(P)&N.i(P);return new d(D,this.h&N.h)},s.or=function(N){for(var R=Math.max(this.g.length,N.g.length),D=[],P=0;P<R;P++)D[P]=this.i(P)|N.i(P);return new d(D,this.h|N.h)},s.xor=function(N){for(var R=Math.max(this.g.length,N.g.length),D=[],P=0;P<R;P++)D[P]=this.i(P)^N.i(P);return new d(D,this.h^N.h)};function X(N){for(var R=N.g.length+1,D=[],P=0;P<R;P++)D[P]=N.i(P)<<1|N.i(P-1)>>>31;return new d(D,N.h)}function re(N,R){var D=R>>5;R%=32;for(var P=N.g.length-D,U=[],L=0;L<P;L++)U[L]=0<R?N.i(L+D)>>>R|N.i(L+D+1)<<32-R:N.i(L+D);return new d(U,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$b=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=_,ui=d}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qb,Ql,Yb,fh,Xm,Xb,Zb,Wb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,x){return c==Array.prototype||c==Object.prototype||(c[v]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var v=0;v<c.length;++v){var x=c[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function o(c,v){if(v)e:{var x=i;c=c.split(".");for(var w=0;w<c.length-1;w++){var G=c[w];if(!(G in x))break e;x=x[G]}c=c[c.length-1],w=x[c],v=v(w),v!=w&&v!=null&&e(x,c,{configurable:!0,writable:!0,value:v})}}function u(c,v){c instanceof String&&(c+="");var x=0,w=!1,G={next:function(){if(!w&&x<c.length){var ne=x++;return{value:v(ne,c[ne]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function g(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function _(c,v,x){return c.call.apply(c.bind,arguments)}function S(c,v,x){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),c.apply(v,G)}}return function(){return c.apply(v,arguments)}}function E(c,v,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,E.apply(null,arguments)}function k(c,v){var x=Array.prototype.slice.call(arguments,1);return function(){var w=x.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function I(c,v){function x(){}x.prototype=v.prototype,c.aa=v.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(w,G,ne){for(var _e=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)_e[Je-2]=arguments[Je];return v.prototype[G].apply(w,_e)}}function B(c){const v=c.length;if(0<v){const x=Array(v);for(let w=0;w<v;w++)x[w]=c[w];return x}return[]}function M(c,v){for(let x=1;x<arguments.length;x++){const w=arguments[x];if(p(w)){const G=c.length||0,ne=w.length||0;c.length=G+ne;for(let _e=0;_e<ne;_e++)c[G+_e]=w[_e]}else c.push(w)}}class z{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function q(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var X=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function re(c,v,x){for(const w in c)v.call(x,c[w],w,c)}function N(c,v){for(const x in c)v.call(void 0,c[x],x,c)}function R(c){const v={};for(const x in c)v[x]=c[x];return v}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,v){let x,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(x in w)c[x]=w[x];for(let ne=0;ne<D.length;ne++)x=D[ne],Object.prototype.hasOwnProperty.call(w,x)&&(c[x]=w[x])}}function U(c){var v=1;c=c.split(":");const x=[];for(;0<v&&c.length;)x.push(c.shift()),v--;return c.length&&x.push(c.join(":")),x}function L(c){m.setTimeout(()=>{throw c},0)}function A(){var c=pe;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class xe{constructor(){this.h=this.g=null}add(v,x){const w=ye.get();w.set(v,x),this.h?this.h.next=w:this.g=w,this.h=w}}var ye=new z(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ie=!1,pe=new xe,j=()=>{const c=m.Promise.resolve(void 0);ee=()=>{c.then(se)}};var se=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(x){L(x)}var v=ye;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ie=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};m.addEventListener("test",x,v),m.removeEventListener("test",x,v)}catch{}return c}();function ge(c,v){if(O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(X){e:{try{te(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else x=="mouseover"?v=c.fromElement:x=="mouseout"&&(v=c.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:me[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ge.aa.h.call(this)}}I(ge,O);var me={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ae=0;function Ee(c,v,x,w,G){this.listener=c,this.proxy=null,this.src=v,this.type=x,this.capture=!!w,this.ha=G,this.key=++ae,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ae(c){this.src=c,this.g={},this.h=0}Ae.prototype.add=function(c,v,x,w,G){var ne=c.toString();c=this.g[ne],c||(c=this.g[ne]=[],this.h++);var _e=Ne(c,v,w,G);return-1<_e?(v=c[_e],x||(v.fa=!1)):(v=new Ee(v,this.src,ne,!!w,G),v.fa=x,c.push(v)),v};function st(c,v){var x=v.type;if(x in c.g){var w=c.g[x],G=Array.prototype.indexOf.call(w,v,void 0),ne;(ne=0<=G)&&Array.prototype.splice.call(w,G,1),ne&&(ve(v),c.g[x].length==0&&(delete c.g[x],c.h--))}}function Ne(c,v,x,w){for(var G=0;G<c.length;++G){var ne=c[G];if(!ne.da&&ne.listener==v&&ne.capture==!!x&&ne.ha==w)return G}return-1}var Rt="closure_lm_"+(1e6*Math.random()|0),Pt={};function Ge(c,v,x,w,G){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Ge(c,v[ne],x,w,G);return null}return x=Ue(x),c&&c[le]?c.K(v,x,g(w)?!!w.capture:!1,G):_t(c,v,x,!1,w,G)}function _t(c,v,x,w,G,ne){if(!v)throw Error("Invalid event type");var _e=g(G)?!!G.capture:!!G,Je=Dt(c);if(Je||(c[Rt]=Je=new Ae(c)),x=Je.add(v,x,w,_e,ne),x.proxy)return x;if(w=ht(),x.proxy=w,w.src=c,w.listener=x,c.addEventListener)J||(G=_e),G===void 0&&(G=!1),c.addEventListener(v.toString(),w,G);else if(c.attachEvent)c.attachEvent(Gt(v.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ht(){function c(x){return v.call(c.src,c.listener,x)}const v=vs;return c}function Vt(c,v,x,w,G){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)Vt(c,v[ne],x,w,G);else w=g(w)?!!w.capture:!!w,x=Ue(x),c&&c[le]?(c=c.i,v=String(v).toString(),v in c.g&&(ne=c.g[v],x=Ne(ne,x,w,G),-1<x&&(ve(ne[x]),Array.prototype.splice.call(ne,x,1),ne.length==0&&(delete c.g[v],c.h--)))):c&&(c=Dt(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ne(v,x,w,G)),(x=-1<c?v[c]:null)&&Ct(x))}function Ct(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[le])st(v.i,c);else{var x=c.type,w=c.proxy;v.removeEventListener?v.removeEventListener(x,w,c.capture):v.detachEvent?v.detachEvent(Gt(x),w):v.addListener&&v.removeListener&&v.removeListener(w),(x=Dt(v))?(st(x,c),x.h==0&&(x.src=null,v[Rt]=null)):ve(c)}}}function Gt(c){return c in Pt?Pt[c]:Pt[c]="on"+c}function vs(c,v){if(c.da)c=!0;else{v=new ge(v,this);var x=c.listener,w=c.ha||c.src;c.fa&&Ct(c),c=x.call(w,v)}return c}function Dt(c){return c=c[Rt],c instanceof Ae?c:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(c){return typeof c=="function"?c:(c[rn]||(c[rn]=function(v){return c.handleEvent(v)}),c[rn])}function ke(){fe.call(this),this.i=new Ae(this),this.M=this,this.F=null}I(ke,fe),ke.prototype[le]=!0,ke.prototype.removeEventListener=function(c,v,x,w){Vt(this,c,v,x,w)};function je(c,v){var x,w=c.F;if(w)for(x=[];w;w=w.F)x.push(w);if(c=c.M,w=v.type||v,typeof v=="string")v=new O(v,c);else if(v instanceof O)v.target=v.target||c;else{var G=v;v=new O(w,c),P(v,G)}if(G=!0,x)for(var ne=x.length-1;0<=ne;ne--){var _e=v.g=x[ne];G=We(_e,w,!0,v)&&G}if(_e=v.g=c,G=We(_e,w,!0,v)&&G,G=We(_e,w,!1,v)&&G,x)for(ne=0;ne<x.length;ne++)_e=v.g=x[ne],G=We(_e,w,!1,v)&&G}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var x=c.g[v],w=0;w<x.length;w++)ve(x[w]);delete c.g[v],c.h--}}this.F=null},ke.prototype.K=function(c,v,x,w){return this.i.add(String(c),v,!1,x,w)},ke.prototype.L=function(c,v,x,w){return this.i.add(String(c),v,!0,x,w)};function We(c,v,x,w){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,ne=0;ne<v.length;++ne){var _e=v[ne];if(_e&&!_e.da&&_e.capture==x){var Je=_e.listener,$t=_e.ha||_e.src;_e.fa&&st(c.i,_e),G=Je.call($t,w)!==!1&&G}}return G&&!w.defaultPrevented}function gt(c,v,x){if(typeof c=="function")x&&(c=E(c,x));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(c,v||0)}function Ai(c){c.g=gt(()=>{c.g=null,c.i&&(c.i=!1,Ai(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class fa extends fe{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(c){fe.call(this),this.h=c,this.g={}}I(qs,fe);var Cn=[];function _s(c){re(c.g,function(v,x){this.g.hasOwnProperty(x)&&Ct(v)},c),c.g={}}qs.prototype.N=function(){qs.aa.N.call(this),_s(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var as=m.JSON.stringify,ma=m.JSON.parse,Ri=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Po(){}Po.prototype.h=null;function Vo(c){return c.h||(c.h=c.i())}function Lo(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fs(){O.call(this,"d")}I(Fs,O);function Uo(){O.call(this,"c")}I(Uo,O);var xs={},Bo=null;function wr(){return Bo=Bo||new ke}xs.La="serverreachability";function pa(c){O.call(this,xs.La,c)}I(pa,O);function Ar(c){const v=wr();je(v,new pa(v))}xs.STAT_EVENT="statevent";function Ou(c,v){O.call(this,xs.STAT_EVENT,c),this.stat=v}I(Ou,O);function Et(c){const v=wr();je(v,new Ou(v,c))}xs.Ma="timingevent";function Kt(c,v){O.call(this,xs.Ma,c),this.size=v}I(Kt,O);function Lt(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},v)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function zo(c,v,x,w,G,ne){c.info(function(){if(c.g)if(ne)for(var _e="",Je=ne.split("&"),$t=0;$t<Je.length;$t++){var et=Je[$t].split("=");if(1<et.length){var Jt=et[0];et=et[1];var Qt=Jt.split("_");_e=2<=Qt.length&&Qt[1]=="type"?_e+(Jt+"="+et+"&"):_e+(Jt+"=redacted&")}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+v+`
`+x+`
`+_e})}function yd(c,v,x,w,G,ne,_e){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+v+`
`+x+`
`+ne+" "+_e})}function Rr(c,v,x,w){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ci(c,x)+(w?" "+w:"")})}function Mu(c,v){c.info(function(){return"TIMEOUT: "+v})}Gn.prototype.info=function(){};function Ci(c,v){if(!c.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var w=x[c];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var _e=1;_e<G.length;_e++)G[_e]=""}}}}return as(x)}catch{return v}}var Cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function Es(){}I(Es,Po),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},bs=new Es;function xn(c,v,x,w){this.j=c,this.i=v,this.l=x,this.R=w||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var qo={},ga={};function os(c,v,x){c.L=1,c.v=Mi(kn(v)),c.m=x,c.P=!0,Ks(c,null)}function Ks(c,v){c.F=Date.now(),Ni(c),c.A=kn(c.v);var x=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Qo(x.i,"t",w),c.C=0,x=c.j.J,c.h=new Ot,c.g=Yu(c.j,x?v:null,!c.m),0<c.O&&(c.M=new fa(E(c.Y,c,c.g),c.O)),v=c.U,x=c.g,w=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(Cn[0]=G.toString()),G=Cn);for(var ne=0;ne<G.length;ne++){var _e=Ge(x,G[ne],w||v.handleEvent,!1,v.h||v);if(!_e)break;v.g[_e.key]=_e}v=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),Ar(),zo(c.i,c.u,c.A,c.l,c.R,c.m)}xn.prototype.ca=function(c){c=c.target;const v=this.M;v&&Yn(c)==3?v.j():this.Y(c)},xn.prototype.Y=function(c){try{if(c==this.g)e:{const Qt=Yn(this.g);var v=this.g.Ba();const er=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||zu(this.g)))){this.J||Qt!=4||v==7||(v==8||0>=er?Ar(3):Ar(2)),Nr(this);var x=this.g.Z();this.X=x;t:if(ku(this)){var w=zu(this.g);c="";var G=w.length,ne=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Ts(this);var _e="";break t}this.h.i=new m.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,c+=this.h.i.decode(w[v],{stream:!(ne&&v==G-1)});w.length=0,this.h.g+=c,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=x==200,yd(this.i,this.u,this.A,this.l,this.R,Qt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,$t=this.g;if((Je=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Je)){var et=Je;break t}}et=null}if(x=et)Rr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ii(this,x);else{this.o=!1,this.s=3,Et(12),an(this),Ts(this);break e}}if(this.P){x=!0;let on;for(;!this.J&&this.C<_e.length;)if(on=ju(this,_e),on==ga){Qt==4&&(this.s=4,Et(14),x=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(on==qo){this.s=4,Et(15),Rr(this.i,this.l,_e,"[Invalid Chunk]"),x=!1;break}else Rr(this.i,this.l,on,null),Ii(this,on);if(ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||_e.length!=0||this.h.h||(this.s=1,Et(16),x=!1),this.o=this.o&&x,!x)Rr(this.i,this.l,_e,"[Invalid Chunked Response]"),an(this),Ts(this);else if(0<_e.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),zi(Jt),Jt.M=!0,Et(11))}}else Rr(this.i,this.l,_e,null),Ii(this,_e);Qt==4&&an(this),this.o&&!this.J&&(Qt==4?Ku(this.j,this):(this.o=!1,Ni(this)))}else Ed(this.g),x==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),an(this),Ts(this)}}}catch{}finally{}};function ku(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ju(c,v){var x=c.C,w=v.indexOf(`
`,x);return w==-1?ga:(x=Number(v.substring(x,w)),isNaN(x)?qo:(w+=1,w+x>v.length?ga:(v=v.slice(w,w+x),c.C=w+x,v)))}xn.prototype.cancel=function(){this.J=!0,an(this)};function Ni(c){c.S=Date.now()+c.I,Pu(c,c.I)}function Pu(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Lt(E(c.ba,c),v)}function Nr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Mu(this.i,this.A),this.L!=2&&(Ar(),Et(17)),an(this),this.s=2,Ts(this)):Pu(this,this.S-c)};function Ts(c){c.j.G==0||c.J||Ku(c.j,c)}function an(c){Nr(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,_s(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function Ii(c,v){try{var x=c.j;if(x.G!=0&&(x.g==c||Ho(x.h,c))){if(!c.K&&Ho(x.h,c)&&x.G==3){try{var w=x.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Ca(x),Aa(x);else break e;Jo(x),Et(18)}}else x.za=G[1],0<x.za-x.T&&37500>G[2]&&x.F&&x.v==0&&!x.C&&(x.C=Lt(E(x.Za,x),6e3));if(1>=va(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Js(x,11)}else if((c.K||x.g==c)&&Ca(x),!q(v))for(G=x.Da.g.parse(v),v=0;v<G.length;v++){let et=G[v];if(x.T=et[0],et=et[1],x.G==2)if(et[0]=="c"){x.K=et[1],x.ia=et[2];const Jt=et[3];Jt!=null&&(x.la=Jt,x.j.info("VER="+x.la));const Qt=et[4];Qt!=null&&(x.Aa=Qt,x.j.info("SVER="+x.Aa));const er=et[5];er!=null&&typeof er=="number"&&0<er&&(w=1.5*er,x.L=w,x.j.info("backChannelRequestTimeoutMs_="+w)),w=x;const on=c.g;if(on){const Is=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var ne=w.h;ne.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(_a(ne,ne.h),ne.h=null))}if(w.D){const tl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(w.ya=tl,dt(w.I,w.D,tl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),w=x;var _e=c;if(w.qa=Qu(w,w.J?w.ia:null,w.W),_e.K){bn(w.h,_e);var Je=_e,$t=w.L;$t&&(Je.I=$t),Je.B&&(Nr(Je),Ni(Je)),w.g=_e}else Fu(w);0<x.i.length&&Ra(x)}else et[0]!="stop"&&et[0]!="close"||Js(x,7);else x.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Js(x,7):Zo(x):et[0]!="noop"&&x.l&&x.l.ta(et),x.v=0)}}Ar(4)}catch{}}var Vu=class{constructor(c,v){this.g=c,this.map=v}};function $s(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ya(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function va(c){return c.h?1:c.g?c.g.size:0}function Ho(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function _a(c,v){c.g?c.g.add(v):c.h=v}function bn(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}$s.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Fo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const x of c.g.values())v=v.concat(x.D);return v}return B(c.i)}function vd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var v=[],x=c.length,w=0;w<x;w++)v.push(c[w]);return v}v=[],x=0;for(w in c)v[x++]=c[w];return v}function xa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var v=[];c=c.length;for(var x=0;x<c;x++)v.push(x);return v}v=[],x=0;for(const w in c)v[x++]=w;return v}}}function Go(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var x=xa(c),w=vd(c),G=w.length,ne=0;ne<G;ne++)v.call(void 0,w[ne],x&&x[ne],c)}var Di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(c,v){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var w=c[x].indexOf("="),G=null;if(0<=w){var ne=c[x].substring(0,w);G=c[x].substring(w+1)}else ne=c[x];v(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ut(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ut){this.h=c.h,Oi(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.s),this.l=c.l;var v=c.i,x=new Ys;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),Qs(this,x),this.m=c.m}else c&&(v=String(c).match(Di))?(this.h=!1,Oi(this,v[1]||"",!0),this.o=Kn(v[2]||""),this.g=Kn(v[3]||"",!0),Ir(this,v[4]),this.l=Kn(v[5]||"",!0),Qs(this,v[6]||"",!0),this.m=Kn(v[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}Ut.prototype.toString=function(){var c=[],v=this.j;v&&c.push(ki(v,Ko,!0),":");var x=this.g;return(x||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ki(v,Ko,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(ki(x,x.charAt(0)=="/"?xd:$o,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",ki(x,ba)),c.join("")};function kn(c){return new Ut(c)}function Oi(c,v,x){c.j=x?Kn(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function Qs(c,v,x){v instanceof Ys?(c.i=v,Uu(c.i,c.h)):(x||(v=ki(v,bd)),c.i=new Ys(v,c.h))}function dt(c,v,x){c.i.set(v,x)}function Mi(c){return dt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Kn(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ki(c,v,x){return typeof c=="string"?(c=encodeURI(c).replace(v,Lu),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ko=/[#\/\?@]/g,$o=/[#\?:]/g,xd=/[#\?]/g,bd=/[#\?@]/g,ba=/#/g;function Ys(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&_d(c.i,function(v,x){c.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Ys.prototype,s.add=function(c,v){$n(this),this.i=null,c=Ss(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(v),this.h+=1,this};function Xs(c,v){$n(c),v=Ss(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Zs(c,v){return $n(c),v=Ss(c,v),c.g.has(v)}s.forEach=function(c,v){$n(this),this.g.forEach(function(x,w){x.forEach(function(G){c.call(v,G,w,this)},this)},this)},s.na=function(){$n(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let w=0;w<v.length;w++){const G=c[w];for(let ne=0;ne<G.length;ne++)x.push(v[w])}return x},s.V=function(c){$n(this);let v=[];if(typeof c=="string")Zs(this,c)&&(v=v.concat(this.g.get(Ss(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)v=v.concat(c[x])}return v},s.set=function(c,v){return $n(this),this.i=null,c=Ss(this,c),Zs(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},s.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Qo(c,v,x){Xs(c,v),0<x.length&&(c.i=null,c.g.set(Ss(c,v),B(x)),c.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var w=v[x];const ne=encodeURIComponent(String(w)),_e=this.V(w);for(w=0;w<_e.length;w++){var G=ne;_e[w]!==""&&(G+="="+encodeURIComponent(String(_e[w]))),c.push(G)}}return this.i=c.join("&")};function Ss(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function Uu(c,v){v&&!c.j&&($n(c),c.i=null,c.g.forEach(function(x,w){var G=w.toLowerCase();w!=G&&(Xs(this,w),Qo(this,G,x))},c)),c.j=v}function ji(c,v){const x=new Gn;if(m.Image){const w=new Image;w.onload=k(Qn,x,"TestLoadImage: loaded",!0,v,w),w.onerror=k(Qn,x,"TestLoadImage: error",!1,v,w),w.onabort=k(Qn,x,"TestLoadImage: abort",!1,v,w),w.ontimeout=k(Qn,x,"TestLoadImage: timeout",!1,v,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else v(!1)}function ls(c,v){const x=new Gn,w=new AbortController,G=setTimeout(()=>{w.abort(),Qn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:w.signal}).then(ne=>{clearTimeout(G),ne.ok?Qn(x,"TestPingServer: ok",!0,v):Qn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Qn(x,"TestPingServer: error",!1,v)})}function Qn(c,v,x,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(x)}catch{}}function Pi(){this.g=new Ri}function ws(c,v,x){const w=x||"";try{Go(c,function(G,ne){let _e=G;g(G)&&(_e=as(G)),v.push(w+ne+"="+encodeURIComponent(_e))})}catch(G){throw v.push(w+"type="+encodeURIComponent("_badmap")),G}}function Dr(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Dr,Po),Dr.prototype.g=function(){return new Ws(this.l,this.j)},Dr.prototype.i=function(c){return function(){return c}}({});function Ws(c,v){ke.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ws,ke),s=Ws.prototype,s.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Rs(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?As(this):Rs(this),this.readyState==3&&Yo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,As(this))},s.Qa=function(c){this.g&&(this.response=c,As(this))},s.ga=function(){this.g&&As(this)};function As(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rs(c)}s.setRequestHeader=function(c,v){this.u.append(c,v)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=v.next();return c.join(`\r
`)};function Rs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xo(c){let v="";return re(c,function(x,w){v+=w,v+=":",v+=x,v+=`\r
`}),v}function Wt(c,v,x){e:{for(w in x){var w=!1;break e}w=!0}w||(x=Xo(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):dt(c,v,x))}function at(c){ke.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(at,ke);var Ea=/^https?$/i,Vi=["POST","PUT"];s=at.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,v,x,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Vo(this.o):Vo(bs),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ne){Bu(this,ne);return}if(c=x||"",x=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)x.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const ne of w.keys())x.set(ne,w.get(ne));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(x.keys()).find(ne=>ne.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Vi,v,void 0))||w||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of x)this.g.setRequestHeader(ne,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Li(this),this.u=!0,this.g.send(c),this.u=!1}catch(ne){Bu(this,ne)}};function Bu(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,Ta(c),Cs(c)}function Ta(c){c.A||(c.A=!0,je(c,"complete"),je(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,je(this,"complete"),je(this,"abort"),Cs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),at.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Sa(this):this.bb())},s.bb=function(){Sa(this)};function Sa(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Yn(c)!=4||c.Z()!=2)){if(c.u&&Yn(c)==4)gt(c.Ea,0,c);else if(je(c,"readystatechange"),Yn(c)==4){c.h=!1;try{const _e=c.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var w;if(w=_e===0){var G=String(c.D).match(Di)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),w=!Ea.test(G?G.toLowerCase():"")}x=w}if(x)je(c,"complete"),je(c,"success");else{c.m=6;try{var ne=2<Yn(c)?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.Z()+"]",Ta(c)}}finally{Cs(c)}}}}function Cs(c,v){if(c.g){Li(c);const x=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||je(c,"ready");try{x.onreadystatechange=w}catch{}}}function Li(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Yn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),ma(v)}};function zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ed(c){const v={};c=(c.g&&2<=Yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(q(c[w]))continue;var x=U(c[w]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ne=v[G]||[];v[G]=ne,ne.push(x)}N(v,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(c,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||v}function wa(c){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ui("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ui("baseRetryDelayMs",5e3,c),this.cb=Ui("retryDelaySeedMs",1e4,c),this.Wa=Ui("forwardChannelMaxRetries",2,c),this.wa=Ui("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $s(c&&c.concurrentRequestLimit),this.Da=new Pi,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=wa.prototype,s.la=8,s.G=1,s.connect=function(c,v,x,w){Et(0),this.W=c,this.H=v||{},x&&w!==void 0&&(this.H.OSID=x,this.H.OAID=w),this.F=this.X,this.I=Qu(this,null,this.W),Ra(this)};function Zo(c){if(qu(c),c.G==3){var v=c.U++,x=kn(c.I);if(dt(x,"SID",c.K),dt(x,"RID",v),dt(x,"TYPE","terminate"),Bi(c,x),v=new xn(c,c.j,v),v.L=2,v.v=Mi(kn(x)),x=!1,m.navigator&&m.navigator.sendBeacon)try{x=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&m.Image&&(new Image().src=v.v,x=!0),x||(v.g=Yu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ni(v)}$u(c)}function Aa(c){c.g&&(zi(c),c.g.cancel(),c.g=null)}function qu(c){Aa(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ra(c){if(!ya(c.h)&&!c.s){c.s=!0;var v=c.Ga;ee||j(),ie||(ee(),ie=!0),pe.add(v,c),c.B=0}}function Td(c,v){return va(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Lt(E(c.Ga,c,v),el(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new xn(this,this.j,c);let ne=this.o;if(this.S&&(ne?(ne=R(ne),P(ne,this.S)):ne=this.S),this.m!==null||this.O||(G.H=ne,ne=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var w=this.i[x];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Hu(this,G,v),x=kn(this.I),dt(x,"RID",c),dt(x,"CVER",22),this.D&&dt(x,"X-HTTP-Session-Id",this.D),Bi(this,x),ne&&(this.O?v="headers="+encodeURIComponent(String(Xo(ne)))+"&"+v:this.m&&Wt(x,this.m,ne)),_a(this.h,G),this.Ua&&dt(x,"TYPE","init"),this.P?(dt(x,"$req",v),dt(x,"SID","null"),G.T=!0,os(G,x,null)):os(G,x,v),this.G=2}}else this.G==3&&(c?Wo(this,c):this.i.length==0||ya(this.h)||Wo(this))};function Wo(c,v){var x;v?x=v.l:x=c.U++;const w=kn(c.I);dt(w,"SID",c.K),dt(w,"RID",x),dt(w,"AID",c.T),Bi(c,w),c.m&&c.o&&Wt(w,c.m,c.o),x=new xn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Hu(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_a(c.h,x),os(x,w,v)}function Bi(c,v){c.H&&re(c.H,function(x,w){dt(v,w,x)}),c.l&&Go({},function(x,w){dt(v,w,x)})}function Hu(c,v,x){x=Math.min(c.i.length,x);var w=c.l?E(c.l.Na,c.l,c):null;e:{var G=c.i;let ne=-1;for(;;){const _e=["count="+x];ne==-1?0<x?(ne=G[0].g,_e.push("ofs="+ne)):ne=0:_e.push("ofs="+ne);let Je=!0;for(let $t=0;$t<x;$t++){let et=G[$t].g;const Jt=G[$t].map;if(et-=ne,0>et)ne=Math.max(0,G[$t].g-100),Je=!1;else try{ws(Jt,_e,"req"+et+"_")}catch{w&&w(Jt)}}if(Je){w=_e.join("&");break e}}}return c=c.i.splice(0,x),v.D=c,w}function Fu(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;ee||j(),ie||(ee(),ie=!0),pe.add(v,c),c.v=0}}function Jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Lt(E(c.Fa,c),el(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Lt(E(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Aa(this),Gu(this))};function zi(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Gu(c){c.g=new xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=kn(c.qa);dt(v,"RID","rpc"),dt(v,"SID",c.K),dt(v,"AID",c.T),dt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&dt(v,"TO",c.ja),dt(v,"TYPE","xmlhttp"),Bi(c,v),c.m&&c.o&&Wt(v,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Mi(kn(v)),x.m=null,x.P=!0,Ks(x,c)}s.Za=function(){this.C!=null&&(this.C=null,Aa(this),Jo(this),Et(19))};function Ca(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ku(c,v){var x=null;if(c.g==v){Ca(c),zi(c),c.g=null;var w=2}else if(Ho(c.h,v))x=v.D,bn(c.h,v),w=1;else return;if(c.G!=0){if(v.o)if(w==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var G=c.B;w=wr(),je(w,new Kt(w,x)),Ra(c)}else Fu(c);else if(G=v.s,G==3||G==0&&0<v.X||!(w==1&&Td(c,v)||w==2&&Jo(c)))switch(x&&0<x.length&&(v=c.h,v.i=v.i.concat(x)),G){case 1:Js(c,5);break;case 4:Js(c,10);break;case 3:Js(c,6);break;default:Js(c,2)}}}function el(c,v){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*v}function Js(c,v){if(c.j.info("Error code "+v),v==2){var x=E(c.fb,c),w=c.Xa;const G=!w;w=new Ut(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Oi(w,"https"),Mi(w),G?ji(w.toString(),x):ls(w.toString(),x)}else Et(2);c.G=0,c.l&&c.l.sa(v),$u(c),qu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function $u(c){if(c.G=0,c.ka=[],c.l){const v=Fo(c.h);(v.length!=0||c.i.length!=0)&&(M(c.ka,v),M(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function Qu(c,v,x){var w=x instanceof Ut?kn(x):new Ut(x);if(w.g!="")v&&(w.g=v+"."+w.g),Ir(w,w.s);else{var G=m.location;w=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var ne=new Ut(null);w&&Oi(ne,w),v&&(ne.g=v),G&&Ir(ne,G),x&&(ne.l=x),w=ne}return x=c.D,v=c.ya,x&&v&&dt(w,x,v),dt(w,"VER",c.la),Bi(c,w),w}function Yu(c,v,x){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new at(new Dr({eb:x})):new at(c.pa),v.Ha(c.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}s=Xu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Na(){}Na.prototype.g=function(c,v){return new En(c,v)};function En(c,v){ke.call(this),this.g=new wa(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Ns(this)}I(En,ke),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Zo(this.g)},En.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=as(c),c=x);v.i.push(new Vu(v.Ya++,c)),v.G==3&&Ra(v)},En.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,En.aa.N.call(this)};function Zu(c){Fs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const x in v){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}I(Zu,Fs);function Wu(){Uo.call(this),this.status=1}I(Wu,Uo);function Ns(c){this.g=c}I(Ns,Xu),Ns.prototype.ua=function(){je(this.g,"a")},Ns.prototype.ta=function(c){je(this.g,new Zu(c))},Ns.prototype.sa=function(c){je(this.g,new Wu)},Ns.prototype.ra=function(){je(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,Wb=function(){return new Na},Zb=function(){return wr()},Xb=xs,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,fh=Cr,Gs.COMPLETE="complete",Yb=Gs,Lo.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",ke.prototype.listen=ke.prototype.K,Ql=Lo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Qb=at}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const A_="@firebase/firestore",R_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new wp("@firebase/firestore");function ro(){return la.logLevel}function Te(s,...e){if(la.logLevel<=Xe.DEBUG){const n=e.map(Lp);la.debug(`Firestore (${Do}): ${s}`,...n)}}function Er(s,...e){if(la.logLevel<=Xe.ERROR){const n=e.map(Lp);la.error(`Firestore (${Do}): ${s}`,...n)}}function yo(s,...e){if(la.logLevel<=Xe.WARN){const n=e.map(Lp);la.warn(`Firestore (${Do}): ${s}`,...n)}}function Lp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Jb(s,i,n)}function Jb(s,e,n){let i=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Er(i),new Error(i)}function ot(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||Jb(e,o,i)}function Le(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BN{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let u=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new eE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class zN{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qN{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new zN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class C_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0,3512);const i=u=>{u.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};const o=u=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new C_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new C_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=FN(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function He(s,e){return s<e?-1:s>e?1:0}function Zm(s,e){let n=0;for(;n<s.length&&n<e.length;){const i=s.codePointAt(n),o=e.codePointAt(n);if(i!==o){if(i<128&&o<128)return He(i,o);{const u=tE(),d=GN(u.encode(N_(s,n)),u.encode(N_(e,n)));return d!==0?d:He(i,o)}}n+=i>65535?2:1}return He(s.length,e.length)}function N_(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function GN(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return He(s[n],e[n]);return He(s.length,e.length)}function vo(s,e,n){return s.length===e.length&&s.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=-62135596800,D_=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*D_);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<I_)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D_}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-I_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new bt(0,0))}static max(){return new Ve(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="__name__";class Ps{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=Ps.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return He(e.length,n.length)}static compareSegments(e,n){const i=Ps.isNumericId(e),o=Ps.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Ps.extractNumericId(e).compare(Ps.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class xt extends Ps{construct(e,n,i){return new xt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(he.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const KN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Ps{construct(e,n,i){return new dn(e,n,i)}static isValidIdentifier(e){return KN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O_}static keyField(){return new dn([O_])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Se(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(u(),o++)}if(u(),d)throw new Se(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(xt.fromString(e))}static fromName(e){return new Ce(xt.fromString(e).popFirst(5))}static empty(){return new Ce(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new xt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function $N(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new di(o,Ce.empty(),e)}function QN(s){return new di(s.readTime,s.key,uu)}class di{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new di(Ve.min(),Ce.empty(),uu)}static max(){return new di(Ve.max(),Ce.empty(),uu)}}function YN(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(s.documentKey,e.documentKey),n!==0?n:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(s){if(s.code!==he.FAILED_PRECONDITION||s.message!==XN)throw s;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,i)=>{n(e)})}static reject(e){return new de((n,i)=>{i(e)})}static waitFor(e){return new de((n,i)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>i(p))}),d=!0,u===o&&n()})}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next(o=>o?de.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,u)=>{i.push(n.call(this,o,u))}),this.waitFor(i)}static mapArray(e,n){return new de((i,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(_=>{d[g]=_,++m,m===u&&i(d)},_=>o(_))}})}static doWhile(e,n){return new de((i,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):i()};u()})}}function WN(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Yh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=-1;function Xh(s){return s==null}function Ch(s){return s===0&&1/s==-1/0}function JN(s){return typeof s=="number"&&Number.isInteger(s)&&!Ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="";function eI(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=M_(e)),e=tI(s.get(n),e);return M_(e)}function tI(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case sE:n+="";break;default:n+=u}}return n}function M_(s){return s+sE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ei(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function rE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??hn.RED,this.left=o??hn.EMPTY,this.right=u??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new hn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j_(this.data.getIterator())}getIteratorFrom(e){return new j_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class j_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new qn([])}unionWith(e){let n=new Zt(dn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new iE("Invalid base64 string: "+u):u}}(e);return new fn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(s){if(ot(!!s,39018),typeof s=="string"){let e=0;const n=nI.exec(s);if(ot(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jt(s.seconds),nanos:jt(s.nanos)}}function jt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mi(s){return typeof s=="string"?fn.fromBase64String(s):fn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="server_timestamp",oE="__type__",lE="__previous_value__",uE="__local_write_time__";function Bp(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[oE])===null||n===void 0?void 0:n.stringValue)===aE}function Zh(s){const e=s.mapValue.fields[lE];return Bp(e)?Zh(e):e}function cu(s){const e=fi(s.mapValue.fields[uE].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,i,o,u,d,m,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Nh="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||Nh}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",rI="__max__",sh={mapValue:{}},hE="__vector__",Ih="value";function pi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Bp(s)?4:aI(s)?9007199254740991:iI(s)?10:11:Me(28295,{value:s})}function zs(s,e){if(s===e)return!0;const n=pi(s);if(n!==pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return cu(s).isEqual(cu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=fi(o.timestampValue),m=fi(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return mi(o.bytesValue).isEqual(mi(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return jt(o.geoPointValue.latitude)===jt(u.geoPointValue.latitude)&&jt(o.geoPointValue.longitude)===jt(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return jt(o.integerValue)===jt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=jt(o.doubleValue),m=jt(u.doubleValue);return d===m?Ch(d)===Ch(m):isNaN(d)&&isNaN(m)}return!1}(s,e);case 9:return vo(s.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(k_(d)!==k_(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!zs(d[p],m[p])))return!1;return!0}(s,e);default:return Me(52216,{left:s})}}function du(s,e){return(s.values||[]).find(n=>zs(n,e))!==void 0}function _o(s,e){if(s===e)return 0;const n=pi(s),i=pi(e);if(n!==i)return He(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return function(u,d){const m=jt(u.integerValue||u.doubleValue),p=jt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(s,e);case 3:return P_(s.timestampValue,e.timestampValue);case 4:return P_(cu(s),cu(e));case 5:return Zm(s.stringValue,e.stringValue);case 6:return function(u,d){const m=mi(u),p=mi(d);return m.compareTo(p)}(s.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const _=He(m[g],p[g]);if(_!==0)return _}return He(m.length,p.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,d){const m=He(jt(u.latitude),jt(d.latitude));return m!==0?m:He(jt(u.longitude),jt(d.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return V_(s.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,g,_;const S=u.fields||{},E=d.fields||{},k=(m=S[Ih])===null||m===void 0?void 0:m.arrayValue,I=(p=E[Ih])===null||p===void 0?void 0:p.arrayValue,B=He(((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0,((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0);return B!==0?B:V_(k,I)}(s.mapValue,e.mapValue);case 11:return function(u,d){if(u===sh.mapValue&&d===sh.mapValue)return 0;if(u===sh.mapValue)return 1;if(d===sh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let S=0;S<p.length&&S<_.length;++S){const E=Zm(p[S],_[S]);if(E!==0)return E;const k=_o(m[p[S]],g[_[S]]);if(k!==0)return k}return He(p.length,_.length)}(s.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function P_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const n=fi(s),i=fi(e),o=He(n.seconds,i.seconds);return o!==0?o:He(n.nanos,i.nanos)}function V_(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=_o(n[o],i[o]);if(u)return u}return He(n.length,i.length)}function xo(s){return Wm(s)}function Wm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const i=fi(n);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return mi(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Ce.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Wm(u);return i+"]"}(s.arrayValue):"mapValue"in s?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${Wm(n.fields[d])}`;return o+"}"}(s.mapValue):Me(61005,{value:s})}function mh(s){switch(pi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(s);return e?16+mh(e):16;case 5:return 2*s.stringValue.length;case 6:return mi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,u)=>o+mh(u),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return Ei(i.fields,(u,d)=>{o+=u.length+mh(d)}),o}(s.mapValue);default:throw Me(13486,{value:s})}}function L_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Jm(s){return!!s&&"integerValue"in s}function zp(s){return!!s&&"arrayValue"in s}function U_(s){return!!s&&"nullValue"in s}function B_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ph(s){return!!s&&"mapValue"in s}function iI(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||n===void 0?void 0:n.stringValue)===hE}function eu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Ei(s.mapValue.fields,(n,i)=>e.mapValue.fields[n]=eu(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(s.arrayValue.values[n]);return e}return Object.assign({},s)}function aI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===rI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=dn.emptyPath(),i={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=m.popLast()}d?i[m.lastSegment()]=eu(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];ph(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ei(n,(o,u)=>e[o]=u);for(const o of i)delete e[o]}clone(){return new Mn(eu(this.value))}}function dE(s){const e=[];return Ei(s.fields,(n,i)=>{const o=new dn([n]);if(ph(i)){const u=dE(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,i,o,u,d,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new vn(e,0,Ve.min(),Ve.min(),Ve.min(),Mn.empty(),0)}static newFoundDocument(e,n,i,o){return new vn(e,1,n,Ve.min(),i,o,0)}static newNoDocument(e,n){return new vn(e,2,n,Ve.min(),Ve.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Ve.min(),Ve.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function z_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=Ce.comparator(Ce.fromName(d.referenceValue),n.key):i=_o(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function q_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!zs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function oI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class Ht extends fE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new uI(e,n,i):n==="array-contains"?new dI(e,i):n==="in"?new fI(e,i):n==="not-in"?new mI(e,i):n==="array-contains-any"?new pI(e,i):new Ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new cI(e,i):new hI(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&pi(this.value)===pi(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends fE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new gs(e,n)}matches(e){return mE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function mE(s){return s.op==="and"}function pE(s){return lI(s)&&mE(s)}function lI(s){for(const e of s.filters)if(e instanceof gs)return!1;return!0}function ep(s){if(s instanceof Ht)return s.field.canonicalString()+s.op.toString()+xo(s.value);if(pE(s))return s.filters.map(e=>ep(e)).join(",");{const e=s.filters.map(n=>ep(n)).join(",");return`${s.op}(${e})`}}function gE(s,e){return s instanceof Ht?function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&zs(i.value,o.value)}(s,e):s instanceof gs?function(i,o){return o instanceof gs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((u,d,m)=>u&&gE(d,o.filters[m]),!0):!1}(s,e):void Me(19439)}function yE(s){return s instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`}(s):s instanceof gs?function(n){return n.op.toString()+" {"+n.getFilters().map(yE).join(" ,")+"}"}(s):"Filter"}class uI extends Ht{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class cI extends Ht{constructor(e,n){super(e,"in",n),this.keys=vE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hI extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=vE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vE(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class dI extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zp(n)&&du(n.arrayValue,this.value)}}class fI extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class mI extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!du(this.value.arrayValue,n)}}class pI extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>du(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n=null,i=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function H_(s,e=null,n=[],i=[],o=null,u=null,d=null){return new gI(s,e,n,i,o,u,d)}function qp(s){const e=Le(s);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ep(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(u){return u.field.canonicalString()+u.dir}(i)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>xo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>xo(i)).join(",")),e.Ie=n}return e.Ie}function Hp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!oI(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!gE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!q_(s.startAt,e.startAt)&&q_(s.endAt,e.endAt)}function tp(s){return Ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n=null,i=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function yI(s,e,n,i,o,u,d,m){return new Tu(s,e,n,i,o,u,d,m)}function Fp(s){return new Tu(s)}function F_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function _E(s){return s.collectionGroup!==null}function tu(s){const e=Le(s);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Zt(dn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Oh(u,i))}),n.has(dn.keyField().canonicalString())||e.Ee.push(new Oh(dn.keyField(),i))}return e.Ee}function Us(s){const e=Le(s);return e.de||(e.de=vI(e,tu(s))),e.de}function vI(s,e){if(s.limitType==="F")return H_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Oh(o.field,u)});const n=s.endAt?new Dh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dh(s.startAt.position,s.startAt.inclusive):null;return H_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function np(s,e){const n=s.filters.concat([e]);return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function sp(s,e,n){return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Wh(s,e){return Hp(Us(s),Us(e))&&s.limitType===e.limitType}function xE(s){return`${qp(Us(s))}|lt:${s.limitType}`}function io(s){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>yE(o)).join(", ")}]`),Xh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>xo(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>xo(o)).join(",")),`Target(${i})`}(Us(s))}; limitType=${s.limitType})`}function Jh(s,e){return e.isFoundDocument()&&function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Ce.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)}(s,e)&&function(i,o){for(const u of tu(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(d,m,p){const g=z_(d,m,p);return d.inclusive?g<=0:g<0}(i.startAt,tu(i),o)||i.endAt&&!function(d,m,p){const g=z_(d,m,p);return d.inclusive?g>=0:g>0}(i.endAt,tu(i),o))}(s,e)}function _I(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function bE(s){return(e,n)=>{let i=!1;for(const o of tu(s)){const u=xI(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function xI(s,e,n){const i=s.field.isKeyField()?Ce.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?_o(p,g):Me(42886)}(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,i)=>{for(const[o,u]of i)e(o,u)})}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new At(Ce.comparator);function Tr(){return bI}const EE=new At(Ce.comparator);function Yl(...s){let e=EE;for(const n of s)e=e.insert(n.key,n);return e}function TE(s){let e=EE;return s.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ra(){return nu()}function SE(){return nu()}function nu(){return new ha(s=>s.toString(),(s,e)=>s.isEqual(e))}const EI=new At(Ce.comparator),TI=new Zt(Ce.comparator);function Ze(...s){let e=TI;for(const n of s)e=e.add(n);return e}const SI=new Zt(He);function wI(){return SI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function wE(s){return{integerValue:""+s}}function AI(s,e){return JN(e)?wE(e):Gp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function RI(s,e,n){return s instanceof fu?function(o,u){const d={fields:{[oE]:{stringValue:aE},[uE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=Zh(u)),u&&(d.fields[lE]=u),{mapValue:d}}(n,e):s instanceof mu?RE(s,e):s instanceof pu?CE(s,e):function(o,u){const d=AE(o,u),m=G_(d)+G_(o.Re);return Jm(d)&&Jm(o.Re)?wE(m):Gp(o.serializer,m)}(s,e)}function CI(s,e,n){return s instanceof mu?RE(s,e):s instanceof pu?CE(s,e):n}function AE(s,e){return s instanceof Mh?function(i){return Jm(i)||function(u){return!!u&&"doubleValue"in u}(i)}(e)?e:{integerValue:0}:null}class fu extends ed{}class mu extends ed{constructor(e){super(),this.elements=e}}function RE(s,e){const n=NE(e);for(const i of s.elements)n.some(o=>zs(o,i))||n.push(i);return{arrayValue:{values:n}}}class pu extends ed{constructor(e){super(),this.elements=e}}function CE(s,e){let n=NE(e);for(const i of s.elements)n=n.filter(o=>!zs(o,i));return{arrayValue:{values:n}}}class Mh extends ed{constructor(e,n){super(),this.serializer=e,this.Re=n}}function G_(s){return jt(s.integerValue||s.doubleValue)}function NE(s){return zp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.field=e,this.transform=n}}function II(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof mu&&o instanceof mu||i instanceof pu&&o instanceof pu?vo(i.elements,o.elements,zs):i instanceof Mh&&o instanceof Mh?zs(i.Re,o.Re):i instanceof fu&&o instanceof fu}(s.transform,e.transform)}class DI{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class td{}function IE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new nd(s.key,An.none()):new Su(s.key,s.data,An.none());{const n=s.data,i=Mn.empty();let o=new Zt(dn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new Ti(s.key,i,new qn(o.toArray()),An.none())}}function OI(s,e,n){s instanceof Su?function(o,u,d){const m=o.value.clone(),p=$_(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(s,e,n):s instanceof Ti?function(o,u,d){if(!gh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=$_(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(DE(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(s,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function su(s,e,n,i){return s instanceof Su?function(u,d,m,p){if(!gh(u.precondition,d))return m;const g=u.value.clone(),_=Q_(u.fieldTransforms,p,d);return g.setAll(_),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(s,e,n,i):s instanceof Ti?function(u,d,m,p){if(!gh(u.precondition,d))return m;const g=Q_(u.fieldTransforms,p,d),_=d.data;return _.setAll(DE(u)),_.setAll(g),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(s,e,n,i):function(u,d,m){return gh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(s,e,n)}function MI(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=AE(i.transform,o||null);u!=null&&(n===null&&(n=Mn.empty()),n.set(i.field,u))}return n||null}function K_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&vo(i,o,(u,d)=>II(u,d))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Su extends td{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends td{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function DE(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}}),e}function $_(s,e,n){const i=new Map;ot(s.length===n.length,32656,{Ve:n.length,me:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,m=e.data.field(u.field);i.set(u.field,CI(d,m,n[o]))}return i}function Q_(s,e,n){const i=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);i.set(o.field,RI(u,d,e))}return i}class nd extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kI extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&OI(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=SE();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=IE(d,m);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,i)=>K_(n,i))&&vo(this.baseMutations,e.baseMutations,(n,i)=>K_(n,i))}}class Kp{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ot(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return EI}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new Kp(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function LI(s){switch(s){case he.OK:return Me(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Me(15467,{code:s})}}function OE(s){if(s===void 0)return Er("GRPC error has no .code"),he.UNKNOWN;switch(s){case qt.OK:return he.OK;case qt.CANCELLED:return he.CANCELLED;case qt.UNKNOWN:return he.UNKNOWN;case qt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case qt.INTERNAL:return he.INTERNAL;case qt.UNAVAILABLE:return he.UNAVAILABLE;case qt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case qt.NOT_FOUND:return he.NOT_FOUND;case qt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case qt.ABORTED:return he.ABORTED;case qt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case qt.DATA_LOSS:return he.DATA_LOSS;default:return Me(39323,{code:s})}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new ui([4294967295,4294967295],0);function Y_(s){const e=tE().encode(s),n=new $b;return n.update(e),new Uint8Array(n.digest())}function X_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ui([n,i],0),new ui([o,u],0)]}class $p{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Xl(`Invalid padding: ${n}`);if(i<0)throw new Xl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ui.fromNumber(this.pe)}we(e,n,i){let o=e.add(n.multiply(ui.fromNumber(i)));return o.compare(UI)===1&&(o=new ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Y_(e),[i,o]=X_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(i,o,u);if(!this.be(d))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new $p(u,o,n);return i.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=Y_(e),[i,o]=X_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(i,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new sd(Ve.min(),o,new At(He),Tr(),Ze())}}class wu{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wu(i,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,i,o){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=o}}class ME{constructor(e,n){this.targetId=e,this.Ce=n}}class kE{constructor(e,n,i=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Z_{constructor(){this.Fe=0,this.Me=W_(),this.xe=fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),n=Ze(),i=Ze();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Me(38017,{changeType:u})}}),new wu(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=W_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ot(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class BI{constructor(e){this.ze=e,this.je=new Map,this.He=Tr(),this.Je=rh(),this.Ye=rh(),this.Ze=new At(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,i=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(tp(u))if(i===0){const d=new Ce(u.path);this.tt(n,d,vn.newNoDocument(d,Ve.min()))}else ot(i===1,20013,{expectedCount:i});else{const d=this.ut(n);if(d!==i){const m=this.ct(e),p=m?this.lt(m,e,d):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=mi(i).toUint8Array()}catch(p){if(p instanceof iE)return yo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new $p(d,o,u)}catch(p){return yo(p instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let o=0;return i.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&tp(m.target)){const p=new Ce(m.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,vn.newNoDocument(p,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let i=Ze();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new sd(e,n,this.Ze,this.He,i);return this.He=Tr(),this.Je=rh(),this.Ye=rh(),this.Ze=new At(He),o}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Z_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Z_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function rh(){return new At(Ce.comparator)}function W_(){return new At(Ce.comparator)}const zI={asc:"ASCENDING",desc:"DESCENDING"},qI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HI={and:"AND",or:"OR"};class FI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rp(s,e){return s.useProto3Json||Xh(e)?e:{value:e}}function kh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function GI(s,e){return kh(s,e.toTimestamp())}function Bs(s){return ot(!!s,49232),Ve.fromTimestamp(function(n){const i=fi(n);return new bt(i.seconds,i.nanos)}(s))}function Qp(s,e){return ip(s,e).canonicalString()}function ip(s,e){const n=function(o){return new xt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function PE(s){const e=xt.fromString(s);return ot(zE(e),10190,{key:e.toString()}),e}function ap(s,e){return Qp(s.databaseId,e.path)}function Im(s,e){const n=PE(e);if(n.get(1)!==s.databaseId.projectId)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ce(LE(n))}function VE(s,e){return Qp(s.databaseId,e)}function KI(s){const e=PE(s);return e.length===4?xt.emptyPath():LE(e)}function op(s){return new xt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function LE(s){return ot(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function J_(s,e,n){return{name:ap(s,e),fields:n.value.mapValue.fields}}function $I(s,e){let n;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Me(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(ot(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const _=g.code===void 0?he.UNKNOWN:OE(g.code);return new Se(_,g.message||"")}(d);n=new kE(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Im(s,i.document.name),u=Bs(i.document.updateTime),d=i.document.createTime?Bs(i.document.createTime):Ve.min(),m=new Mn({mapValue:{fields:i.document.fields}}),p=vn.newFoundDocument(o,u,d,m),g=i.targetIds||[],_=i.removedTargetIds||[];n=new yh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Im(s,i.document),u=i.readTime?Bs(i.readTime):Ve.min(),d=vn.newNoDocument(o,u),m=i.removedTargetIds||[];n=new yh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Im(s,i.document),u=i.removedTargetIds||[];n=new yh([],u,o,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new VI(o,u),m=i.targetId;n=new ME(m,d)}}return n}function QI(s,e){let n;if(e instanceof Su)n={update:J_(s,e.key,e.value)};else if(e instanceof nd)n={delete:ap(s,e.key)};else if(e instanceof Ti)n={update:J_(s,e.key,e.data),updateMask:s2(e.fieldMask)};else{if(!(e instanceof kI))return Me(16599,{ft:e.type});n={verify:ap(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(u,d){const m=d.transform;if(m instanceof fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Mh)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Me(20930,{transform:d.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:GI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Me(27497)}(s,e.precondition)),n}function YI(s,e){return s&&s.length>0?(ot(e!==void 0,14353),s.map(n=>function(o,u){let d=o.updateTime?Bs(o.updateTime):Bs(u);return d.isEqual(Ve.min())&&(d=Bs(u)),new DI(d,o.transformResults||[])}(n,e))):[]}function XI(s,e){return{documents:[VE(s,e.path)]}}function ZI(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VE(s,o);const u=function(g){if(g.length!==0)return BE(gs.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(_=>function(E){return{field:ao(E.field),direction:e2(E.dir)}}(_))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=rp(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function WI(s){let e=KI(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){ot(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=function(S){const E=UE(S);return E instanceof gs&&pE(E)?E.getFilters():[E]}(n.where));let d=[];n.orderBy&&(d=function(S){return S.map(E=>function(I){return new Oh(oo(I.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(E))}(n.orderBy));let m=null;n.limit&&(m=function(S){let E;return E=typeof S=="object"?S.value:S,Xh(E)?null:E}(n.limit));let p=null;n.startAt&&(p=function(S){const E=!!S.before,k=S.values||[];return new Dh(k,E)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const E=!S.before,k=S.values||[];return new Dh(k,E)}(n.endAt)),yI(e,o,d,u,m,"F",p,g)}function JI(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=oo(n.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(n.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(n.unaryFilter.field);return Ht.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=oo(n.unaryFilter.field);return Ht.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(s):s.fieldFilter!==void 0?function(n){return Ht.create(oo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return gs.create(n.compositeFilter.filters.map(i=>UE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(s):Me(30097,{filter:s})}function e2(s){return zI[s]}function t2(s){return qI[s]}function n2(s){return HI[s]}function ao(s){return{fieldPath:s.canonicalString()}}function oo(s){return dn.fromServerFormat(s.fieldPath)}function BE(s){return s instanceof Ht?function(n){if(n.op==="=="){if(B_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NAN"}};if(U_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(B_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NAN"}};if(U_(n.value))return{unaryFilter:{field:ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(n.field),op:t2(n.op),value:n.value}}}(s):s instanceof gs?function(n){const i=n.getFilters().map(o=>BE(o));return i.length===1?i[0]:{compositeFilter:{op:n2(n.op),filters:i}}}(s):Me(54877,{filter:s})}function s2(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,i,o,u=Ve.min(),d=Ve.min(),m=fn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.wt=e}}function i2(s){const e=WI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Cn=new o2}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(di.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class o2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Zt(xt.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Zt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(qE,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new bo(0)}static lr(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="LruGarbageCollector",l2=1048576;function nx([s,e],[n,i]){const o=He(s,n);return o===0?He(e,i):o}class u2{constructor(e){this.Er=e,this.buffer=new Zt(nx),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();nx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(tx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?Te(tx,"Ignoring IndexedDB error during garbage collection: ",n):await Oo(n)}await this.mr(3e5)})}}class h2{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Yh.le);const i=new u2(n);return this.gr.forEachTarget(e,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(ex)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ex):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,o,u,d,m,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(i=S,m=Date.now(),this.removeTargets(e,i,n))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(S=>(g=Date.now(),ro()<=Xe.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function d2(s,e){return new h2(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.changes=new ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&su(i.mutation,o,qn.empty(),bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ze()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ze()){const o=ra();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(u=>{let d=Yl();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const i=ra();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ze()))}populateOverlays(e,n,i){const o=[];return i.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,i,o){let u=Tr();const d=nu(),m=function(){return nu()}();return n.forEach((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof Ti)?u=u.insert(g.key,g):_!==void 0?(d.set(g.key,_.mutation.getFieldMask()),su(_.mutation,g,_.mutation.getFieldMask(),bt.now())):d.set(g.key,qn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,_)=>d.set(g,_)),n.forEach((g,_)=>{var S;return m.set(g,new m2(_,(S=d.get(g))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const i=nu();let o=new At((d,m)=>d-m),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=i.get(p)||qn.empty();_=m.applyToLocalView(g,_),i.set(p,_);const S=(o.get(m.batchId)||Ze()).add(p);o=o.insert(m.batchId,S)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,_=p.value,S=SE();_.forEach(E=>{if(!u.has(E)){const k=IE(n.get(E),i.get(E));k!==null&&S.set(E,k),u=u.add(E)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,S))}return de.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_E(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):de.resolve(ra());let m=uu,p=u;return d.next(g=>de.forEach(g,(_,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{p=p.insert(_,E)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ze())).next(_=>({batchId:m,changes:TE(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let o=Yl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let d=Yl();return this.indexManager.getCollectionParents(e,u).next(m=>de.forEach(m,p=>{const g=function(S,E){return new Tu(E,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next(_=>{_.forEach((S,E)=>{d=d.insert(S,E)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o))).next(d=>{u.forEach((p,g)=>{const _=g.getKey();d.get(_)===null&&(d=d.insert(_,vn.newInvalidDocument(_)))});let m=Yl();return d.forEach((p,g)=>{const _=u.get(p);_!==void 0&&su(_.mutation,g,qn.empty(),bt.now()),Jh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return de.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Bs(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:i2(o.bundledQuery),readTime:Bs(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.overlays=new At(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ra();return de.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&i.set(o,u)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,u)=>{this.St(e,n,u)}),de.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const o=ra(),u=n.length+1,d=new Ce(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>i&&o.set(p.getKey(),p)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new At((g,_)=>g-_);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let _=u.get(g.largestBatchId);_===null&&(_=ra(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return de.resolve(m)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new PI(n,i));let u=this.Qr.get(n);u===void 0&&(u=Ze(),this.Qr.set(n,u)),this.Qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this.$r=new Zt(sn.Ur),this.Kr=new Zt(sn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new sn(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new sn(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new xt([])),i=new sn(n,e),o=new sn(n,e+1),u=[];return this.Kr.forEachInRange([i,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new xt([])),i=new sn(n,e),o=new sn(n,e+1);let u=Ze();return this.Kr.forEachInRange([i,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new sn(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(sn.Ur)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jI(u,n,i,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new sn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,n){return de.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ti(i),u=o<0?0:o;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Up:this.nr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([i,o],d=>{const m=this.ei(d.Zr);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(He);return n.forEach(o=>{const u=new sn(o,0),d=new sn(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{i=i.add(m.Zr)})}),de.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;Ce.isDocumentKey(u)||(u=u.child(""));const d=new sn(new Ce(u),0);let m=new Zt(He);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},d),de.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(i=>{const o=this.ei(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ot(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return de.forEach(n.mutations,o=>{const u=new sn(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new sn(n,0),o=this.Xr.firstAfterOrEqual(i);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.ii=e,this.docs=function(){return new At(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let i=Tr();return n.forEach(o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))}),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=Tr();const d=n.path,m=new Ce(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||YN(QN(_),i)<=0||(o.has(_.key)||Jh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Me(9500)}si(e,n){return de.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new b2(this)}getSize(e){return de.resolve(this.size)}}class b2 extends f2{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(i)}),de.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.persistence=e,this.oi=new ha(n=>qp(n),Hp),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this._i=0,this.ai=new Yp,this.targetCount=0,this.ui=bo.cr()}forEachTarget(e,n){return this.oi.forEach((i,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),de.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new bo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Tr(n),de.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.ci={},this.overlays={},this.li=new Yh(0),this.hi=!1,this.hi=!0,this.Pi=new v2,this.referenceDelegate=e(this),this.Ti=new E2(this),this.indexManager=new a2,this.remoteDocumentCache=function(o){return new x2(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new r2(n),this.Ei=new g2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new _2(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const o=new T2(this.li.next());return this.referenceDelegate.di(),i(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return de.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class T2 extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Vi=new Yp,this.mi=null}static fi(e){return new Xp(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.gi,i=>{const o=Ce.fromPath(i);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Ve.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return de.or([()=>de.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class jh{constructor(e,n){this.persistence=e,this.yi=new ha(i=>eI(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=d2(this,n)}static fi(e,n){return new jh(e,n)}di(){}Ai(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return de.forEach(this.yi,(i,o)=>this.Dr(e,i,o).next(u=>u?de.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(i++,u.removeEntry(d,Ve.min()))})).next(()=>u.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),de.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mh(e.data.value)),n}Dr(e,n,i){return de.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return de.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.ds=i,this.As=o}static Rs(e,n){let i=Ze(),o=Ze();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zp(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return a1()?8:WN(_n())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,i).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new S2;return this.Ss(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,i,o){return i.documentReadCount<this.gs?(ro()<=Xe.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),de.resolve()):(ro()<=Xe.DEBUG&&Te("QueryEngine","Query:",io(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(ro()<=Xe.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(n))):de.resolve())}ws(e,n){if(F_(n))return de.resolve(null);let i=Us(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=sp(n,null,"F"),i=Us(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(u=>{const d=Ze(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.vs(n,m);return this.Cs(n,g,d,p.readTime)?this.ws(e,sp(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,i,o){return F_(n)||o.isEqual(Ve.min())?de.resolve(null):this.ys.getDocuments(e,i).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,i,o)?de.resolve(null):(ro()<=Xe.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.Fs(e,d,n,$N(o,uu)).next(m=>m))})}vs(e,n){let i=new Zt(bE(e));return n.forEach((o,u)=>{Jh(e,u)&&(i=i.add(u))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,i){return ro()<=Xe.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",io(n)),this.ys.getDocumentsMatchingQuery(e,n,di.min(),i)}Fs(e,n,i,o){return this.ys.getDocumentsMatchingQuery(e,i,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",A2=3e8;class R2{constructor(e,n,i,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new At(He),this.Os=new ha(u=>qp(u),Hp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function C2(s,e,n,i){return new R2(s,e,n,i)}async function FE(s,e){const n=Le(s);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(u=>{const d=[],m=[];let p=Ze();for(const g of o){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next(g=>({ks:g,removedBatchIds:d,addedBatchIds:m}))})})}function N2(s,e){const n=Le(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,_){const S=g.batch,E=S.keys();let k=de.resolve();return E.forEach(I=>{k=k.next(()=>_.getEntry(p,I)).next(B=>{const M=g.docVersions.get(I);ot(M!==null,48541),B.version.compareTo(M)<0&&(S.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),_.addEntry(B)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(p,S))}(n,i,e,u).next(()=>u.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let p=Ze();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function GE(s){const e=Le(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function I2(s,e){const n=Le(s),i=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((_,S)=>{const E=o.get(S);if(!E)return;m.push(n.Ti.removeMatchingKeys(u,_.removedDocuments,S).next(()=>n.Ti.addMatchingKeys(u,_.addedDocuments,S)));let k=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?k=k.withResumeToken(fn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),o=o.insert(S,k),function(B,M,z){return B.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=A2?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(E,k,_)&&m.push(n.Ti.updateTargetData(u,k))});let p=Tr(),g=Ze();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(D2(u,d,e.documentUpdates).next(_=>{p=_.qs,g=_.Qs})),!i.isEqual(Ve.min())){const _=n.Ti.getLastRemoteSnapshotVersion(u).next(S=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,i));m.push(_)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.xs=o,u))}function D2(s,e,n){let i=Ze(),o=Ze();return n.forEach(u=>i=i.add(u)),e.getEntries(s,i).next(u=>{let d=Tr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ve.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Te(Wp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:d,Qs:o}})}function O2(s,e){const n=Le(s);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Up),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function M2(s,e){const n=Le(s);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ti.getTargetData(i,e).next(u=>u?(o=u,de.resolve(o)):n.Ti.allocateTargetId(i).next(d=>(o=new ri(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function lp(s,e,n){const i=Le(s),o=i.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,d=>i.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Mo(d))throw d;Te(Wp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.xs=i.xs.remove(e),i.Os.delete(o.target)}function sx(s,e,n){const i=Le(s);let o=Ve.min(),u=Ze();return i.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,_){const S=Le(p),E=S.Os.get(_);return E!==void 0?de.resolve(S.xs.get(E)):S.Ti.getTargetData(g,_)}(i,d,Us(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>i.Ms.getDocumentsMatchingQuery(d,e,n?o:Ve.min(),n?u:Ze())).next(m=>(k2(i,_I(e),m),{documents:m,$s:u})))}function k2(s,e,n){let i=s.Ns.get(e)||Ve.min();n.forEach((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)}),s.Ns.set(e,i)}class rx{constructor(){this.activeTargetIds=wI()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j2{constructor(){this.xo=new rx,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new rx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="ConnectivityMonitor";class ax{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(ix,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(ix,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function up(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",V2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===Nh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(e,n,i,o,u){const d=up(),m=this.jo(e,n.toUriEncodedString());Te(Dm,`Sending RPC '${e}' ${d}:`,m,i);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),_=Ro(g);return this.Jo(e,m,p,i,_).then(S=>(Te(Dm,`Received RPC '${e}' ${d}: `,S),S),S=>{throw yo(Dm,`RPC '${e}' ${d} failed with error: `,S,"url: ",m,"request:",i),S})}Yo(e,n,i,o,u,d){return this.zo(e,n,i,o,u)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),i&&i.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const i=V2[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class B2 extends L2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,u){const d=up();return new Promise((m,p)=>{const g=new Qb;g.setWithCredentials(!0),g.listenOnce(Yb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case fh.NO_ERROR:const S=g.getResponseJson();Te(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),m(S);break;case fh.TIMEOUT:Te(gn,`RPC '${e}' ${d} timed out`),p(new Se(he.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const E=g.getStatus();if(Te(gn,`RPC '${e}' ${d} failed with status:`,E,"response text:",g.getResponseText()),E>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const I=k==null?void 0:k.error;if(I&&I.status&&I.message){const B=function(z){const q=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(q)>=0?q:he.UNKNOWN}(I.status);p(new Se(B,I.message))}else p(new Se(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Se(he.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:d,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{Te(gn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);Te(gn,`RPC '${e}' ${d} sending request:`,o),g.send(n,"POST",_,i,15)})}I_(e,n,i){const o=up(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Wb(),m=Zb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const _=u.join("");Te(gn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const S=d.createWebChannel(_,p);this.E_(S);let E=!1,k=!1;const I=new U2({Zo:M=>{k?Te(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(E||(Te(gn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),E=!0),Te(gn,`RPC '${e}' stream ${o} sending:`,M),S.send(M))},Xo:()=>S.close()}),B=(M,z,q)=>{M.listen(z,Y=>{try{q(Y)}catch(te){setTimeout(()=>{throw te},0)}})};return B(S,Ql.EventType.OPEN,()=>{k||(Te(gn,`RPC '${e}' stream ${o} transport opened.`),I.__())}),B(S,Ql.EventType.CLOSE,()=>{k||(k=!0,Te(gn,`RPC '${e}' stream ${o} transport closed`),I.u_(),this.d_(S))}),B(S,Ql.EventType.ERROR,M=>{k||(k=!0,yo(gn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),I.u_(new Se(he.UNAVAILABLE,"The operation could not be completed")))}),B(S,Ql.EventType.MESSAGE,M=>{var z;if(!k){const q=M.data[0];ot(!!q,16349);const Y=q,te=(Y==null?void 0:Y.error)||((z=Y[0])===null||z===void 0?void 0:z.error);if(te){Te(gn,`RPC '${e}' stream ${o} received error:`,te);const X=te.status;let re=function(D){const P=qt[D];if(P!==void 0)return OE(P)}(X),N=te.message;re===void 0&&(re=he.INTERNAL,N="Unknown error status: "+X+" with message "+te.message),k=!0,I.u_(new Se(re,N)),S.close()}else Te(gn,`RPC '${e}' stream ${o} received:`,q),I.c_(q)}}),B(m,Xb.STAT_EVENT,M=>{M.stat===Xm.PROXY?Te(gn,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Xm.NOPROXY&&Te(gn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(s){return new FI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,i=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="PersistentStream";class $E{constructor(e,n,i,o,u,d,m,p){this.xi=e,this.S_=i,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new KE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.v_===n&&this.z_(i,o)},i=>{e(()=>{const o=new Se(he.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(o)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.j_(o))}),this.stream.onMessage(o=>{i(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Te(ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z2 extends $E{constructor(e,n,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=$I(this.serializer,e),i=function(u){if(!("targetChange"in u))return Ve.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Bs(d.readTime):Ve.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=op(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=tp(p)?{documents:XI(u,p)}:{query:ZI(u,p).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=jE(u,d.resumeToken);const g=rp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Ve.min())>0){m.readTime=kh(u,d.snapshotVersion.toTimestamp());const g=rp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const i=JI(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=op(this.serializer),n.removeTarget=e,this.Q_(n)}}class q2 extends $E{constructor(e,n,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=YI(e.writeResults,e.commitTime),i=Bs(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=op(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>QI(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{}class F2 extends H2{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,ip(n,i),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(he.UNKNOWN,u.toString())})}Yo(e,n,i,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,ip(n,i),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Se(he.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class G2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Er(n),this.ua=!1):Te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class K2{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{i.enqueueAndForget(async()=>{da(this)&&(Te(ua,"Restarting streams for network reachability change."),await async function(p){const g=Le(p);g.da.add(4),await Au(g),g.Va.set("Unknown"),g.da.delete(4),await id(g)}(this))})}),this.Va=new G2(i,o)}}async function id(s){if(da(s))for(const e of s.Aa)await e(!0)}async function Au(s){for(const e of s.Aa)await e(!1)}function QE(s,e){const n=Le(s);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ng(n)?tg(n):ko(n).N_()&&eg(n,e))}function Jp(s,e){const n=Le(s),i=ko(n);n.Ea.delete(e),i.N_()&&YE(n,e),n.Ea.size===0&&(i.N_()?i.k_():da(n)&&n.Va.set("Unknown"))}function eg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(s).Z_(e)}function YE(s,e){s.ma.Ke(e),ko(s).X_(e)}function tg(s){s.ma=new BI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),ko(s).start(),s.Va.ca()}function ng(s){return da(s)&&!ko(s).O_()&&s.Ea.size>0}function da(s){return Le(s).da.size===0}function XE(s){s.ma=void 0}async function $2(s){s.Va.set("Online")}async function Q2(s){s.Ea.forEach((e,n)=>{eg(s,e)})}async function Y2(s,e){XE(s),ng(s)?(s.Va.Pa(e),tg(s)):s.Va.set("Unknown")}async function X2(s,e,n){if(s.Va.set("Online"),e instanceof kE&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(i){Te(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ph(s,i)}else if(e instanceof yh?s.ma.Xe(e):e instanceof ME?s.ma.ot(e):s.ma.nt(e),!n.isEqual(Ve.min()))try{const i=await GE(s.localStore);n.compareTo(i)>=0&&await function(u,d){const m=u.ma.It(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ea.get(g);_&&u.Ea.set(g,_.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const _=u.Ea.get(p);if(!_)return;u.Ea.set(p,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),YE(u,p);const S=new ri(_.target,p,g,_.sequenceNumber);eg(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(i){Te(ua,"Failed to raise snapshot:",i),await Ph(s,i)}}async function Ph(s,e,n){if(!Mo(e))throw e;s.da.add(1),await Au(s),s.Va.set("Offline"),n||(n=()=>GE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Te(ua,"Retrying IndexedDB access"),await n(),s.da.delete(1),await id(s)})}function ZE(s,e){return e().catch(n=>Ph(s,n,e))}async function ad(s){const e=Le(s),n=gi(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Up;for(;Z2(e);)try{const o=await O2(e.localStore,i);if(o===null){e.Ia.length===0&&n.k_();break}i=o.batchId,W2(e,o)}catch(o){await Ph(e,o)}WE(e)&&JE(e)}function Z2(s){return da(s)&&s.Ia.length<10}function W2(s,e){s.Ia.push(e);const n=gi(s);n.N_()&&n.ea&&n.ta(e.mutations)}function WE(s){return da(s)&&!gi(s).O_()&&s.Ia.length>0}function JE(s){gi(s).start()}async function J2(s){gi(s).ia()}async function eD(s){const e=gi(s);for(const n of s.Ia)e.ta(n.mutations)}async function tD(s,e,n){const i=s.Ia.shift(),o=Kp.from(i,e,n);await ZE(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await ad(s)}async function nD(s,e){e&&gi(s).ea&&await async function(i,o){if(function(d){return LI(d)&&d!==he.ABORTED}(o.code)){const u=i.Ia.shift();gi(i).L_(),await ZE(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ad(i)}}(s,e),WE(s)&&JE(s)}async function lx(s,e){const n=Le(s);n.asyncQueue.verifyOperationInProgress(),Te(ua,"RemoteStore received new credentials");const i=da(n);n.da.add(3),await Au(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await id(n)}async function sD(s,e){const n=Le(s);e?(n.da.delete(2),await id(n)):e||(n.da.add(2),await Au(n),n.Va.set("Unknown"))}function ko(s){return s.fa||(s.fa=function(n,i,o){const u=Le(n);return u.oa(),new z2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:$2.bind(null,s),n_:Q2.bind(null,s),i_:Y2.bind(null,s),Y_:X2.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),ng(s)?tg(s):s.Va.set("Unknown")):(await s.fa.stop(),XE(s))})),s.fa}function gi(s){return s.ga||(s.ga=function(n,i,o){const u=Le(n);return u.oa(),new q2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:J2.bind(null,s),i_:nD.bind(null,s),na:eD.bind(null,s),ra:tD.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await ad(s)):(await s.ga.stop(),s.Ia.length>0&&(Te(ua,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const d=Date.now()+i,m=new sg(e,n,d,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(s,e){if(Er("AsyncQueue",`${e}: ${s}`),Mo(s))return new Se(he.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=Yl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.pa=new At(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Eo{constructor(e,n,i,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Eo(e,n,mo.emptySet(n),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class iD{constructor(){this.queries=cx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Le(n),u=o.queries;o.queries=cx(),u.forEach((d,m)=>{for(const p of m.Sa)p.onError(i)})})(this,new Se(he.ABORTED,"Firestore shutting down"))}}function cx(){return new ha(s=>xE(s),Wh)}async function eT(s,e){const n=Le(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(i=2):(u=new rD,i=e.va()?0:1);try{switch(i){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=rg(d,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&ig(n)}async function tT(s,e){const n=Le(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function aD(s,e){const n=Le(s);let i=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Ma(o)&&(i=!0);d.ba=o}}i&&ig(n)}function oD(s,e,n){const i=Le(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(e)}function ig(s){s.Ca.forEach(e=>{e.next()})}var cp,hx;(hx=cp||(cp={})).xa="default",hx.Cache="cache";class nT{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Eo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class lD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.Za=bE(e),this.Xa=new mo(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new ux,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,S)=>{const E=o.get(_),k=Jh(this.query,S)?S:null,I=!!E&&this.mutatedKeys.has(E.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let M=!1;E&&k?E.data.isEqual(k.data)?I!==B&&(i.track({type:3,doc:k}),M=!0):this.ru(E,k)||(i.track({type:2,doc:k}),M=!0,(p&&this.Za(k,p)>0||g&&this.Za(k,g)<0)&&(m=!0)):!E&&k?(i.track({type:0,doc:k}),M=!0):E&&!k&&(i.track({type:1,doc:E}),M=!0,(p||g)&&(m=!0)),M&&(k?(d=d.add(k),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{Xa:d,nu:i,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((_,S)=>function(k,I){const B=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:M})}};return B(k)-B(I)}(_.type,S.type)||this.Za(_.doc,S.doc)),this.iu(i),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,d.length!==0||g?{snapshot:new Eo(this.query,e.Xa,u,d,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new rT(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new sT(i))}),n}au(e){this.Ha=e.$s,this.Ya=Ze();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Eo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ag="SyncEngine";class uD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cD{constructor(e){this.key=e,this.cu=!1}}class hD{constructor(e,n,i,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new ha(m=>xE(m),Wh),this.Pu=new Map,this.Tu=new Set,this.Iu=new At(Ce.comparator),this.Eu=new Map,this.du=new Yp,this.Au={},this.Ru=new Map,this.Vu=bo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function dD(s,e,n=!0){const i=cT(s);let o;const u=i.hu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await iT(i,e,n,!0),o}async function fD(s,e){const n=cT(s);await iT(n,e,!0,!1)}async function iT(s,e,n,i){const o=await M2(s.localStore,Us(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let m;return i&&(m=await mD(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&QE(s.remoteStore,o),m}async function mD(s,e,n,i,o){s.fu=(S,E,k)=>async function(B,M,z,q){let Y=M.view.tu(z);Y.Cs&&(Y=await sx(B.localStore,M.query,!1).then(({documents:N})=>M.view.tu(N,Y)));const te=q&&q.targetChanges.get(M.targetId),X=q&&q.targetMismatches.get(M.targetId)!=null,re=M.view.applyChanges(Y,B.isPrimaryClient,te,X);return fx(B,M.targetId,re.ou),re.snapshot}(s,S,E,k);const u=await sx(s.localStore,e,!0),d=new lD(e,u.$s),m=d.tu(u.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),g=d.applyChanges(m,s.isPrimaryClient,p);fx(s,n,g.ou);const _=new uD(e,n,d);return s.hu.set(e,_),s.Pu.has(n)?s.Pu.get(n).push(e):s.Pu.set(n,[e]),g.snapshot}async function pD(s,e,n){const i=Le(s),o=i.hu.get(e),u=i.Pu.get(o.targetId);if(u.length>1)return i.Pu.set(o.targetId,u.filter(d=>!Wh(d,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await lp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Jp(i.remoteStore,o.targetId),hp(i,o.targetId)}).catch(Oo)):(hp(i,o.targetId),await lp(i.localStore,o.targetId,!0))}async function gD(s,e){const n=Le(s),i=n.hu.get(e),o=n.Pu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Jp(n.remoteStore,i.targetId))}async function yD(s,e,n){const i=SD(s);try{const o=await function(d,m){const p=Le(d),g=bt.now(),_=m.reduce((k,I)=>k.add(I.key),Ze());let S,E;return p.persistence.runTransaction("Locally write mutations","readwrite",k=>{let I=Tr(),B=Ze();return p.Bs.getEntries(k,_).next(M=>{I=M,I.forEach((z,q)=>{q.isValidDocument()||(B=B.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(k,I)).next(M=>{S=M;const z=[];for(const q of m){const Y=MI(q,S.get(q.key).overlayedDocument);Y!=null&&z.push(new Ti(q.key,Y,dE(Y.value.mapValue),An.exists(!0)))}return p.mutationQueue.addMutationBatch(k,g,z,m)}).next(M=>{E=M;const z=M.applyToLocalDocumentSet(S,B);return p.documentOverlayCache.saveOverlays(k,M.batchId,z)})}).then(()=>({batchId:E.batchId,changes:TE(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let g=d.Au[d.currentUser.toKey()];g||(g=new At(He)),g=g.insert(m,p),d.Au[d.currentUser.toKey()]=g}(i,o.batchId,n),await Ru(i,o.changes),await ad(i.remoteStore)}catch(o){const u=rg(o,"Failed to persist write");n.reject(u)}}async function aT(s,e){const n=Le(s);try{const i=await I2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?ot(d.cu,14607):o.removedDocuments.size>0&&(ot(d.cu,42227),d.cu=!1))}),await Ru(n,i,e)}catch(i){await Oo(i)}}function dx(s,e,n){const i=Le(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.hu.forEach((u,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Le(d);p.onlineState=m;let g=!1;p.queries.forEach((_,S)=>{for(const E of S.Sa)E.Fa(m)&&(g=!0)}),g&&ig(p)}(i.eventManager,e),o.length&&i.lu.Y_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vD(s,e,n){const i=Le(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Eu.get(e),u=o&&o.key;if(u){let d=new At(Ce.comparator);d=d.insert(u,vn.newNoDocument(u,Ve.min()));const m=Ze().add(u),p=new sd(Ve.min(),new Map,new At(He),d,m);await aT(i,p),i.Iu=i.Iu.remove(u),i.Eu.delete(e),og(i)}else await lp(i.localStore,e,!1).then(()=>hp(i,e,n)).catch(Oo)}async function _D(s,e){const n=Le(s),i=e.batch.batchId;try{const o=await N2(n.localStore,e);lT(n,i,null),oT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(n,o)}catch(o){await Oo(o)}}async function xD(s,e,n){const i=Le(s);try{const o=await function(d,m){const p=Le(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,m).next(S=>(ot(S!==null,37113),_=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(i.localStore,e);lT(i,e,n),oT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ru(i,o)}catch(o){await Oo(o)}}function oT(s,e){(s.Ru.get(e)||[]).forEach(n=>{n.resolve()}),s.Ru.delete(e)}function lT(s,e,n){const i=Le(s);let o=i.Au[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.Au[i.currentUser.toKey()]=o}}function hp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Pu.get(e))s.hu.delete(i),n&&s.lu.gu(i,n);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(i=>{s.du.containsKey(i)||uT(s,i)})}function uT(s,e){s.Tu.delete(e.path.canonicalString());const n=s.Iu.get(e);n!==null&&(Jp(s.remoteStore,n),s.Iu=s.Iu.remove(e),s.Eu.delete(n),og(s))}function fx(s,e,n){for(const i of n)i instanceof sT?(s.du.addReference(i.key,e),bD(s,i)):i instanceof rT?(Te(ag,"Document no longer in limbo: "+i.key),s.du.removeReference(i.key,e),s.du.containsKey(i.key)||uT(s,i.key)):Me(19791,{pu:i})}function bD(s,e){const n=e.key,i=n.path.canonicalString();s.Iu.get(n)||s.Tu.has(i)||(Te(ag,"New document in limbo: "+n),s.Tu.add(i),og(s))}function og(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const n=new Ce(xt.fromString(e)),i=s.Vu.next();s.Eu.set(i,new cD(n)),s.Iu=s.Iu.insert(n,i),QE(s.remoteStore,new ri(Us(Fp(n.path)),i,"TargetPurposeLimboResolution",Yh.le))}}async function Ru(s,e,n){const i=Le(s),o=[],u=[],d=[];i.hu.isEmpty()||(i.hu.forEach((m,p)=>{d.push(i.fu(p,e,n).then(g=>{var _;if((g||n)&&i.isPrimaryClient){const S=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=Zp.Rs(p.targetId,g);u.push(S)}}))}),await Promise.all(d),i.lu.Y_(o),await async function(p,g){const _=Le(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(g,E=>de.forEach(E.ds,k=>_.persistence.referenceDelegate.addReference(S,E.targetId,k)).next(()=>de.forEach(E.As,k=>_.persistence.referenceDelegate.removeReference(S,E.targetId,k)))))}catch(S){if(!Mo(S))throw S;Te(Wp,"Failed to update sequence numbers: "+S)}for(const S of g){const E=S.targetId;if(!S.fromCache){const k=_.xs.get(E),I=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(I);_.xs=_.xs.insert(E,B)}}}(i.localStore,u))}async function ED(s,e){const n=Le(s);if(!n.currentUser.isEqual(e)){Te(ag,"User change. New user:",e.toKey());const i=await FE(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new Se(he.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(n,i.ks)}}function TD(s,e){const n=Le(s),i=n.Eu.get(e);if(i&&i.cu)return Ze().add(i.key);{let o=Ze();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const m=n.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function cT(s){const e=Le(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vD.bind(null,e),e.lu.Y_=aD.bind(null,e.eventManager),e.lu.gu=oD.bind(null,e.eventManager),e}function SD(s){const e=Le(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_D.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xD.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return C2(this.persistence,new w2,e.initialUser,this.serializer)}Su(e){return new HE(Xp.fi,this.serializer)}bu(e){return new j2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class wD extends Vh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ot(this.persistence.referenceDelegate instanceof jh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new c2(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new HE(i=>jh.fi(i,n),this.serializer)}}class dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ED.bind(null,this.syncEngine),await sD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iD}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),i=function(u){return new B2(u)}(e.databaseInfo);return function(u,d,m,p){return new F2(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,u,d,m){return new K2(i,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>dx(this.syncEngine,n,0),function(){return ax.C()?new ax:new P2}())}createSyncEngine(e,n){return function(o,u,d,m,p,g,_){const S=new hD(o,u,d,m,p,g);return _&&(S.mu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Le(o);Te(ua,"RemoteStore shutting down."),u.da.add(5),await Au(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dp.provider={build:()=>new dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="FirestoreClient";class AD{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=nE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,async d=>{Te(yi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(i,d=>(Te(yi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=rg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Mm(s,e){s.asyncQueue.verifyOperationInProgress(),Te(yi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await FE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function mx(s,e){s.asyncQueue.verifyOperationInProgress();const n=await RD(s);Te(yi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(i=>lx(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>lx(e.remoteStore,o)),s._onlineComponents=e}async function RD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Te(yi,"Using user provided OfflineComponentProvider");try{await Mm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await Mm(s,new Vh)}}else Te(yi,"Using default OfflineComponentProvider"),await Mm(s,new wD(void 0));return s._offlineComponents}async function dT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Te(yi,"Using user provided OnlineComponentProvider"),await mx(s,s._uninitializedComponentsProvider._online)):(Te(yi,"Using default OnlineComponentProvider"),await mx(s,new dp))),s._onlineComponents}function CD(s){return dT(s).then(e=>e.syncEngine)}async function fT(s){const e=await dT(s),n=e.eventManager;return n.onListen=dD.bind(null,e.syncEngine),n.onUnlisten=pD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gD.bind(null,e.syncEngine),n}function ND(s,e,n={}){const i=new yr;return s.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const _=new hT({next:E=>{_.xu(),d.enqueueAndForget(()=>tT(u,S));const k=E.docs.has(m);!k&&E.fromCache?g.reject(new Se(he.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&E.fromCache&&p&&p.source==="server"?g.reject(new Se(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),S=new nT(Fp(m.path),_,{includeMetadataChanges:!0,Qa:!0});return eT(u,S)}(await fT(s),s.asyncQueue,e,n,i)),i.promise}function ID(s,e,n={}){const i=new yr;return s.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const _=new hT({next:E=>{_.xu(),d.enqueueAndForget(()=>tT(u,S)),E.fromCache&&p.source==="server"?g.reject(new Se(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(E)},error:E=>g.reject(E)}),S=new nT(m,_,{includeMetadataChanges:!0,Qa:!0});return eT(u,S)}(await fT(s),s.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(s,e,n){if(!n)throw new Se(he.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function DD(s,e,n,i){if(e===!0&&i===!0)throw new Se(he.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function gx(s){if(!Ce.isDocumentKey(s))throw new Se(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function yx(s){if(Ce.isDocumentKey(s))throw new Se(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function od(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Me(12329,{type:typeof s})}function rs(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Se(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=od(s);throw new Se(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firestore.googleapis.com",vx=!0;class _x{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gT,this.ssl=vx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:vx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l2)throw new Se(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _x({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _x(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new LN;switch(i.type){case"firstParty":return new qN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=px.get(n);i&&(Te("ComponentProvider","Removing Datastore"),px.delete(n),i.terminate())}(this),Promise.resolve()}}function OD(s,e,n,i={}){var o;s=rs(s,ld);const u=Ro(e),d=s._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),p=`${e}:${n}`;u&&(ab(`https://${p}`),ob("Firestore",!0)),d.host!==gT&&d.host!==p&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},d),{host:p,ssl:u,emulatorOptions:i});if(!ia(g,m)&&(s._setSettings(g),i.mockUserToken)){let _,S;if(typeof i.mockUserToken=="string")_=i.mockUserToken,S=yn.MOCK_USER;else{_=ZA(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Se(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new yn(E)}s._authCredentials=new UN(new eE(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class ci extends jo{constructor(e,n,i){super(e,n,Fp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ce(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function Be(s,e,...n){if(s=Ft(s),pT("collection","path",e),s instanceof ld){const i=xt.fromString(e,...n);return yx(i),new ci(s,null,i)}{if(!(s instanceof Rn||s instanceof ci))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(xt.fromString(e,...n));return yx(i),new ci(s.firestore,null,i)}}function ct(s,e,...n){if(s=Ft(s),arguments.length===1&&(e=nE.newId()),pT("doc","path",e),s instanceof ld){const i=xt.fromString(e,...n);return gx(i),new Rn(s,null,new Ce(i))}{if(!(s instanceof Rn||s instanceof ci))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(xt.fromString(e,...n));return gx(i),new Rn(s.firestore,s instanceof ci?s.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="AsyncQueue";class bx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new KE(this,"async_queue_retry"),this.rc=()=>{const i=Om();i&&Te(xx,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new yr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mo(e))throw e;Te(xx,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Er("INTERNAL UNHANDLED ERROR: ",Ex(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=sg.createAndSchedule(this,e,n,i,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Me(47125,{cc:Ex(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Ex(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Si extends ld{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new bx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bx(e),this._firestoreClient=void 0,await e}}}function MD(s,e){const n=typeof s=="object"?s:hb(),i=typeof s=="string"?s:Nh,o=Rp(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=YA("firestore");u&&OD(o,...u)}return o}function ud(s){if(s._terminated)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||kD(s),s._firestoreClient}function kD(s){var e,n,i;const o=s._freezeSettings(),u=function(m,p,g,_){return new sI(m,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,mT(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new AD(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(fn.fromBase64String(e))}catch(n){throw new Se(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=/^__.*__$/;class PD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class yT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:s})}}class cg{constructor(e,n,i,o,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Vc(e),o}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:i,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Lh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(vT(this.Ic)&&jD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class VD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rd(e)}bc(e,n,i,o=!1){return new cg({Ic:e,methodName:n,wc:i,path:dn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nu(s){const e=s._freezeSettings(),n=rd(s._databaseId);return new VD(s._databaseId,!!e.ignoreUndefinedProperties,n)}function hg(s,e,n,i,o,u={}){const d=s.bc(u.merge||u.mergeFields?2:0,e,n,o);fg("Data must be an object, but it was:",d,i);const m=bT(i,d);let p,g;if(u.merge)p=new qn(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const S of u.mergeFields){const E=fp(e,S,n);if(!d.contains(E))throw new Se(he.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);TT(_,E)||_.push(E)}p=new qn(_),g=d.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=d.fieldTransforms;return new PD(new Mn(m),p,g)}class hd extends cd{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}class dg extends cd{_toFieldTransform(e){return new NI(e.path,new fu)}isEqual(e){return e instanceof dg}}function _T(s,e,n,i){const o=s.bc(1,e,n);fg("Data must be an object, but it was:",o,i);const u=[],d=Mn.empty();Ei(i,(p,g)=>{const _=mg(e,p,n);g=Ft(g);const S=o.mc(_);if(g instanceof hd)u.push(_);else{const E=Iu(g,S);E!=null&&(u.push(_),d.set(_,E))}});const m=new qn(u);return new yT(d,m,o.fieldTransforms)}function xT(s,e,n,i,o,u){const d=s.bc(1,e,n),m=[fp(e,i,n)],p=[o];if(u.length%2!=0)throw new Se(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)m.push(fp(e,u[E])),p.push(u[E+1]);const g=[],_=Mn.empty();for(let E=m.length-1;E>=0;--E)if(!TT(g,m[E])){const k=m[E];let I=p[E];I=Ft(I);const B=d.mc(k);if(I instanceof hd)g.push(k);else{const M=Iu(I,B);M!=null&&(g.push(k),_.set(k,M))}}const S=new qn(g);return new yT(_,S,d.fieldTransforms)}function LD(s,e,n,i=!1){return Iu(n,s.bc(i?4:3,e))}function Iu(s,e){if(ET(s=Ft(s)))return fg("Unsupported field value:",e,s),bT(s,e);if(s instanceof cd)return function(i,o){if(!vT(o.Ic))throw o.gc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,o){const u=[];let d=0;for(const m of i){let p=Iu(m,o.fc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(s,e)}return function(i,o){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=bt.fromDate(i);return{timestampValue:kh(o.serializer,u)}}if(i instanceof bt){const u=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kh(o.serializer,u)}}if(i instanceof lg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:jE(o.serializer,i._byteString)};if(i instanceof Rn){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Qp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ug)return function(d,m){return{mapValue:{fields:{[cE]:{stringValue:hE},[Ih]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Gp(m.serializer,g)})}}}}}}(i,o);throw o.gc(`Unsupported field value: ${od(i)}`)}(s,e)}function bT(s,e){const n={};return rE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(s,(i,o)=>{const u=Iu(o,e.Ac(i));u!=null&&(n[i]=u)}),{mapValue:{fields:n}}}function ET(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof lg||s instanceof To||s instanceof Rn||s instanceof cd||s instanceof ug)}function fg(s,e,n){if(!ET(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=od(n);throw i==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+i)}}function fp(s,e,n){if((e=Ft(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return mg(s,e);throw Lh("Field path arguments must be of type string or ",s,!1,void 0,n)}const UD=new RegExp("[~\\*/\\[\\]]");function mg(s,e,n){if(e.search(UD)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Lh(s,e,n,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new Se(he.INVALID_ARGUMENT,m+s+p)}function TT(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BD extends ST{data(){return super.data()}}function pg(s,e){return typeof e=="string"?mg(s,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Se(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class qD extends gg{}function wT(s,e,...n){let i=[];e instanceof gg&&i.push(e),i=i.concat(n),function(u){const d=u.filter(p=>p instanceof yg).length,m=u.filter(p=>p instanceof dd).length;if(d>1||d>0&&m>0)throw new Se(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class dd extends qD{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new dd(e,n,i)}_apply(e){const n=this._parse(e);return RT(e._query,n),new jo(e.firestore,e.converter,np(e._query,n))}_parse(e){const n=Nu(e.firestore);return function(u,d,m,p,g,_,S){let E;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Se(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Sx(S,_);const I=[];for(const B of S)I.push(Tx(p,u,B));E={arrayValue:{values:I}}}else E=Tx(p,u,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Sx(S,_),E=LD(m,d,S,_==="in"||_==="not-in");return Ht.create(g,_,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AT(s,e,n){const i=e,o=pg("where",s);return dd._create(o,i,n)}class yg extends gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)RT(d,p),d=np(d,p)}(e._query,n),new jo(e.firestore,e.converter,np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Tx(s,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Se(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_E(e)&&n.indexOf("/")!==-1)throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(xt.fromString(n));if(!Ce.isDocumentKey(i))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return L_(s,new Ce(i))}if(n instanceof Rn)return L_(s,n._key);throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(n)}.`)}function Sx(s,e){if(!Array.isArray(s)||s.length===0)throw new Se(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(s,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HD{convertValue(e,n="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ei(e,(o,u)=>{i[o]=this.convertValue(u,n)}),i}convertVectorValue(e){var n,i,o;const u=(o=(i=(n=e.fields)===null||n===void 0?void 0:n[Ih].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(d=>jt(d.doubleValue));return new ug(u)}convertGeoPoint(e){return new lg(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Zh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=fi(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=xt.fromString(e);ot(zE(i),9688,{name:e});const o=new hu(i.get(1),i.get(3)),u=new Ce(i.popFirst(5));return o.isEqual(n)||Er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CT extends ST{constructor(e,n,i,o,u,d){super(e,n,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(pg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vh extends CT{data(e={}){return super.data(e)}}class FD{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vh(this._firestore,this._userDataWriter,i.key,i,new Zl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:GD(m.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(s){s=rs(s,Rn);const e=rs(s.firestore,Si);return ND(ud(e),s._key).then(n=>KD(e,s,n))}class NT extends HD{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function Ye(s){s=rs(s,jo);const e=rs(s.firestore,Si),n=ud(e),i=new NT(e);return zD(s._query),ID(n,s._query).then(o=>new FD(e,i,s,o))}function hi(s,e,n){s=rs(s,Rn);const i=rs(s.firestore,Si),o=vg(s.converter,e,n);return Du(i,[hg(Nu(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,An.none())])}function _g(s,e,n,...i){s=rs(s,Rn);const o=rs(s.firestore,Si),u=Nu(o);let d;return d=typeof(e=Ft(e))=="string"||e instanceof Cu?xT(u,"updateDoc",s._key,e,n,i):_T(u,"updateDoc",s._key,e),Du(o,[d.toMutation(s._key,An.exists(!0))])}function vr(s){return Du(rs(s.firestore,Si),[new nd(s._key,An.none())])}function fd(s,e){const n=rs(s.firestore,Si),i=ct(s),o=vg(s.converter,e);return Du(n,[hg(Nu(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,An.exists(!1))]).then(()=>i)}function Du(s,e){return function(i,o){const u=new yr;return i.asyncQueue.enqueueAndForget(async()=>yD(await CD(i),o,u)),u.promise}(ud(s),e)}function KD(s,e,n){const i=n.docs.get(e._key),o=new NT(s);return new CT(s,o,e._key,i,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nu(e)}set(e,n,i){this._verifyNotCommitted();const o=km(e,this._firestore),u=vg(o.converter,n,i),d=hg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,i);return this._mutations.push(d.toMutation(o._key,An.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const u=km(e,this._firestore);let d;return d=typeof(n=Ft(n))=="string"||n instanceof Cu?xT(this._dataReader,"WriteBatch.update",u._key,n,i,o):_T(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(d.toMutation(u._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=km(e,this._firestore);return this._mutations=this._mutations.concat(new nd(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(s,e){if((s=Ft(s)).firestore!==e)throw new Se(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function wn(){return new dg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(s){return ud(s=rs(s,Si)),new $D(s,e=>Du(s,e))}(function(e,n=!0){(function(o){Do=o})(Co),po(new aa("firestore",(i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),m=new Si(new BN(i.getProvider("auth-internal")),new HN(d,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Se(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(g.options.projectId,_)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),oi(A_,R_,e),oi(A_,R_,"esm2017")})();const QD={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},IT=cb(QD),vi=kN(IT),be=MD(IT),Ax=({className:s=""})=>y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:s,"aria-hidden":"true",children:[y.jsx("path",{d:"M3 19h18"}),y.jsx("path",{d:"m6 19 5.5-9.5L14 14l4-7 3 12"}),y.jsx("path",{d:"m10.8 10.7 1.2-2 1.5 2.6"})]}),YD=()=>{Fn("Home");const s=_i(),[e,n]=C.useState(!1),[i,o]=C.useState(!1),[u,d]=C.useState(null),m=C.useRef(null),p="group flex flex-col rounded-2xl border border-slate-200 bg-white p-7 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",g="mt-2 text-sm leading-relaxed text-slate-600",_="mt-4 flex-1 space-y-2 text-sm text-slate-700",S="inline-flex w-full items-center justify-center rounded-full border border-emerald-700 bg-emerald-700 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-800 hover:shadow-lg hover:shadow-emerald-700/20",E="inline-flex w-full items-center justify-center rounded-full border border-emerald-400 bg-emerald-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-500/20",k="inline-flex w-full items-center justify-center rounded-full border border-sky-300 bg-sky-500 px-4 py-3 text-sm font-semibold text-white transition-all duration-300 hover:-translate-y-0.5 hover:bg-sky-600 hover:shadow-lg hover:shadow-sky-500/20",I=(u==null?void 0:u.displayName)||(u==null?void 0:u.email)||"User",B=I.trim().charAt(0).toUpperCase()||"U";C.useEffect(()=>{const q=Kh(vi,Y=>{d(Y),Y||o(!1)});return()=>q()},[]),C.useEffect(()=>{const q=Y=>{m.current&&!m.current.contains(Y.target)&&o(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const M=async()=>{await jp(vi),o(!1),s("/",{replace:!0})},z=(q,Y)=>{if(n(!1),Y&&!u){s("/login",{state:{from:{pathname:Y}}});return}s(q)};return y.jsxs("div",{className:"min-h-screen scroll-smooth bg-white text-slate-900",children:[y.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-100 bg-white/90 px-4 py-4 backdrop-blur sm:px-6 lg:px-10",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-7xl items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-700 text-white",children:y.jsx(Ax,{className:"h-6 w-6"})}),y.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-emerald-700",children:"Climbing Competition"})]}),y.jsxs("div",{className:"relative flex items-center gap-2",children:[!u&&y.jsx(Fe,{to:"/login",className:"inline-flex h-10 items-center justify-center rounded-lg border border-emerald-300 bg-emerald-50 px-3 text-sm font-semibold text-emerald-800 transition hover:bg-emerald-100",children:""}),u&&y.jsxs("div",{className:"relative",ref:m,children:[y.jsx("button",{type:"button",onClick:()=>o(q=>!q),className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-300 bg-white text-sm font-semibold text-slate-700 transition hover:bg-slate-50","aria-label":"user menu","aria-expanded":i,children:B}),i&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-sm",children:[y.jsx("p",{className:"truncate px-2 py-1 text-xs text-slate-500",children:I}),y.jsx("button",{type:"button",onClick:M,className:"mt-1 block w-full rounded-lg px-2 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),y.jsx("button",{type:"button",onClick:()=>n(q=>!q),className:"inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-300 bg-white text-slate-700 transition hover:bg-slate-50","aria-label":"menu","aria-expanded":e,children:y.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:y.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})})}),e&&y.jsxs("div",{className:"absolute right-0 top-12 z-50 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-lg",children:[y.jsx("button",{type:"button",onClick:()=>z("/dashboard","/dashboard"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),y.jsx("button",{type:"button",onClick:()=>z("/score-summary"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""}),y.jsx("button",{type:"button",onClick:()=>z("/system-admin","/system-admin"),className:"block w-full rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]})]})}),y.jsxs("main",{className:"relative",children:[y.jsxs("section",{className:"relative overflow-hidden px-6 py-16 lg:py-24",children:[y.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[radial-gradient(45%_45%_at_50%_50%,rgba(82,183,136,0.15)_0%,rgba(255,255,255,0)_100%)]"}),y.jsx("div",{className:"pointer-events-none absolute inset-0 z-0 bg-[radial-gradient(45%_45%_at_50%_50%,rgba(54,179,242,0.05)_0%,rgba(255,255,255,0)_100%)]"}),y.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[y.jsxs("h2",{className:"mb-6 bg-gradient-to-r from-[#2D6A4F] via-[#52B788] to-[#36b3f2] bg-clip-text text-5xl font-bold tracking-tight text-transparent lg:text-7xl",children:["Push Your Limits.",y.jsx("br",{}),"Track Your Flash."]}),y.jsx("p",{className:"mx-auto max-w-2xl text-lg leading-relaxed text-slate-600 lg:text-xl",children:"The ultimate climbing competition management platform designed for speed, fairness, and the community. Choose your portal to begin."})]})]}),y.jsx("section",{className:"mx-auto max-w-7xl px-4 pb-20 sm:px-6 lg:px-10",children:y.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[y.jsxs("section",{id:"portal-owner",className:`${p} hover:shadow-emerald-600/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-700 transition group-hover:bg-emerald-700 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Gym Owners"}),y.jsx("p",{className:g,children:""}),y.jsxs("ul",{className:_,children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:"/dashboard",className:S,children:""})})]}),y.jsxs("section",{id:"portal-climber",className:`${p} hover:shadow-emerald-500/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-2xl text-emerald-600 transition group-hover:bg-emerald-500 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For Climbers"}),y.jsx("p",{className:g,children:""}),y.jsxs("ul",{className:_,children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:"/score-summary",className:E,children:""})})]}),y.jsxs("section",{id:"portal-admin",className:`${p} hover:shadow-sky-500/10`,children:[y.jsx("div",{className:"mb-5 flex h-14 w-14 items-center justify-center rounded-2xl bg-sky-100 text-2xl text-sky-600 transition group-hover:bg-sky-500 group-hover:text-white",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"For System Admins"}),y.jsx("p",{className:g,children:""}),y.jsxs("ul",{className:_,children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:"/system-admin",className:k,children:""})})]})]})})]}),y.jsx("footer",{className:"border-t border-slate-100 bg-white py-10",children:y.jsxs("div",{className:"mx-auto max-w-7xl px-4 text-center sm:px-6 lg:px-10",children:[y.jsxs("div",{className:"mb-3 flex items-center justify-center gap-2",children:[y.jsx("span",{className:"flex h-6 w-6 items-center justify-center text-emerald-700",children:y.jsx(Ax,{className:"h-5 w-5"})}),y.jsx("span",{className:"font-bold text-slate-900",children:"Climbing Competition"})]}),y.jsx("p",{className:"text-sm text-slate-500",children:" 2026 Climbing Competition Systems. All rights reserved."}),y.jsx("div",{className:"mt-4 flex justify-center text-sm text-slate-500",children:y.jsx("a",{href:"https://github.com/vestige/FlashComp/issues/new/choose",target:"_blank",rel:"noreferrer",className:"transition-colors hover:text-emerald-700",children:"Contact"})})]})})]})},XD=()=>{Fn("");const[s,e]=C.useState(""),[n,i]=C.useState(""),[o,u]=C.useState(""),d=_i(),m=Hn(),p=async()=>{var S,E;const _=((E=(S=m.state)==null?void 0:S.from)==null?void 0:E.pathname)||"/dashboard";try{await bC(vi,s,n),u(" ..."),setTimeout(()=>d(_,{replace:!0}),600)}catch(k){u(" : "+k.message)}},g=async _=>{_.preventDefault(),await p()};return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_50%,_#eef2ff_100%)] px-4 py-10",children:y.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsx(Fe,{to:"/",className:"inline-flex items-center text-sm font-medium text-slate-600 transition hover:text-slate-900",children:" Home"}),y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsxs("form",{className:"mt-4 grid gap-3",onSubmit:g,children:[y.jsx("input",{type:"email",placeholder:"",value:s,onChange:_=>e(_.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"password",placeholder:"",value:n,onChange:_=>i(_.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]}),o&&y.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:o})]})})},Rx=s=>Array.isArray(s)?s.filter(e=>typeof e=="string"&&e.trim().length>0):[],ZD=new Set(["owner.multi@example.com","vestige_sync@me.com"]),wi=()=>{const[s,e]=C.useState(null),[n,i]=C.useState(null),[o,u]=C.useState(!0),[d,m]=C.useState("");C.useEffect(()=>{let E=!1;const k=Kh(vi,async I=>{if(!I){E||(e(null),i(null),m(""),u(!1));return}E||(e(I),u(!0),m(""));try{const B=ct(be,"users",I.uid),M=await ms(B);if(M.exists()){E||(i({id:M.id,...M.data()}),u(!1));return}const z=I.email?await Ye(wT(Be(be,"users"),AT("email","==",I.email))):null;if(!E){if(z&&!z.empty){const q=z.docs[0],Y={...q.data(),uid:I.uid,email:I.email||q.data().email||"",gymIds:Rx(q.data().gymIds),migratedFromProfileId:q.id,updatedAt:wn()};try{await hi(B,Y,{merge:!0})}catch(te){console.error("users/{uid} :",te)}i({id:I.uid,...Y,updatedAt:q.data().updatedAt})}else{const q=(I.email||"").toLowerCase();if(ZD.has(q)){const te={uid:I.uid,email:I.email||"",role:"admin",gymIds:["*"],createdAt:wn(),updatedAt:wn()};try{await hi(B,te,{merge:!0})}catch(X){console.error("users/{uid} :",X)}i({id:I.uid,uid:I.uid,email:I.email||"",role:"admin",gymIds:["*"]})}else i({id:I.uid,uid:I.uid,email:I.email||"",role:"owner",gymIds:[]})}u(!1)}}catch(B){console.error(":",B),E||(m(""),i(null),u(!1))}});return()=>{E=!0,k()}},[]);const p=C.useMemo(()=>Rx(n==null?void 0:n.gymIds),[n]),g=typeof(n==null?void 0:n.role)=="string"?n.role:"",_=C.useMemo(()=>g==="admin"||p.includes("*"),[g,p]);return{authUser:s,profile:n,gymIds:p,role:g,hasAllGymAccess:_,canAccessGym:E=>_||p.includes(E),loading:o,error:d}},WD=()=>{Fn("");const s=_i(),[e,n]=C.useState([]),[i,o]=C.useState([]),[u,d]=C.useState(!0),[m,p]=C.useState(""),{gymIds:g,role:_,hasAllGymAccess:S,loading:E,error:k}=wi(),I=N=>N?N.seconds?new Date(N.seconds*1e3).toLocaleDateString():String(N):"-",B=()=>{jp(vi).then(()=>s("/login")).catch(N=>console.error(":",N))};C.useEffect(()=>{if(E)return;if(k){p(k),d(!1);return}(async()=>{d(!0),p("");try{const[R,D]=await Promise.all([Ye(Be(be,"events")),Ye(Be(be,"gyms"))]),P=R.docs.map(L=>({id:L.id,...L.data()})).filter(L=>S||g.includes(L.gymId)),U=D.docs.map(L=>({id:L.id,...L.data()})).filter(L=>S||g.includes(L.id)).sort((L,A)=>(L.name||"").localeCompare(A.name||"","ja"));n(P),o(U)}catch(R){console.error(":",R),p("")}finally{d(!1)}})()},[E,k,g,S]);const M=async N=>{if(!window.confirm(""))return;const R=e.find(D=>D.id===N);if(!R||!S&&!g.includes(R.gymId)){window.alert("");return}try{await vr(ct(be,"events",N)),n(e.filter(D=>D.id!==N))}catch(D){console.error(":",D)}},z=new Map(i.map(N=>[N.id,N.name||N.id])),q="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",Y="inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",te="inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",X="rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm font-medium text-rose-700 transition hover:bg-rose-100",re="rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50";return u||E?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):m||k?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:m||k})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Gym Owner Console"}),y.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:""}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:""}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[y.jsx(Fe,{to:"/",className:Y,children:" TOP"}),y.jsxs("span",{className:"text-sm text-slate-600",children:[":"," ",S?"":i.length>0?i.map(N=>N.name||N.id).join(" / "):""]})]})]}),y.jsxs("section",{className:`${q} mt-5`,children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-4",children:S||g.length>0?y.jsx(Fe,{to:"/create-event",className:te,children:" "}):y.jsx("p",{className:"text-sm text-slate-600",children:""})})]}),_==="admin"&&y.jsxs("section",{className:`${q} mt-4`,children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-4",children:y.jsx(Fe,{to:"/system-admin",className:Y,children:""})})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:" "}),!S&&g.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):e.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-4",children:e.map(N=>y.jsxs("section",{className:q,children:[y.jsx("h4",{className:"text-base font-bold text-slate-900",children:N.name}),y.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:[": ",I(N.startDate),"  ",I(N.endDate)]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[": ",z.get(N.gymId)||""]}),y.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[y.jsx(Fe,{to:`/events/${N.id}/edit`,className:Y,children:""}),y.jsx(Fe,{to:`/events/${N.id}/climbers`,className:Y,children:""}),y.jsx(Fe,{to:`/events/${N.id}/scores`,className:Y,children:""}),y.jsx("button",{type:"button",onClick:()=>M(N.id),className:X,children:" "})]})]},N.id))})]}),y.jsx("div",{className:"mt-8",children:y.jsx("button",{type:"button",onClick:B,className:re,children:""})})]})})};function JD(){Fn("");const[s,e]=C.useState(""),[n,i]=C.useState(""),[o,u]=C.useState([]),[d,m]=C.useState(""),[p,g]=C.useState(""),[_,S]=C.useState(""),[E,k]=C.useState(!0),[I,B]=C.useState(""),M=_i(),{authUser:z,gymIds:q,hasAllGymAccess:Y,loading:te,error:X}=wi();C.useEffect(()=>{if(te)return;if(X){B(X),k(!1);return}(async()=>{k(!0),B("");try{const D=(await Ye(Be(be,"gyms"))).docs.map(P=>({id:P.id,...P.data()})).filter(P=>Y||q.includes(P.id)).sort((P,U)=>(P.name||"").localeCompare(U.name||"","ja"));u(D),D.length>0?i(P=>P||D[0].id):i("")}catch(R){console.error(":",R),B("")}finally{k(!1)}})()},[te,X,q,Y]);const re=async N=>{if(N.preventDefault(),!n){S(" ");return}if(new Date(d)>new Date(p)){S(" ");return}try{await fd(Be(be,"events"),{name:s,gymId:n,ownerUid:(z==null?void 0:z.uid)||"",startDate:bt.fromDate(new Date(d)),endDate:bt.fromDate(new Date(p)),createdAt:wn()}),S(" "),e(""),M("/dashboard")}catch(R){console.error(R),S(" ")}};return E||te?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):I||X?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:I||X}),y.jsx(Fe,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsx("div",{className:"mx-auto max-w-3xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsx(Fe,{to:"/dashboard",className:"mt-3 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "}),o.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsxs("form",{onSubmit:re,className:"mt-4 grid gap-3",children:[y.jsx("input",{type:"text",placeholder:"",value:s,onChange:N=>e(N.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("select",{value:n,onChange:N=>i(N.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:o.map(N=>y.jsx("option",{value:N.id,children:N.name||N.id},N.id))}),y.jsx("input",{type:"date",value:d,onChange:N=>m(N.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"date",value:p,onChange:N=>g(N.target.value),required:!0,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]}),_&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:_})]})})})}const Cx=s=>{if(!s)return"";const e=typeof s.toDate=="function"?s.toDate():new Date(s);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${i}-${o}`},eO=({eventId:s})=>{const[e,n]=C.useState(""),[i,o]=C.useState(""),[u,d]=C.useState(""),[m,p]=C.useState(""),[g,_]=C.useState([]),[S,E]=C.useState(""),[k,I]=C.useState({name:"",startDate:"",endDate:""}),B=C.useCallback(async()=>{try{const re=(await Ye(Be(be,"events",s,"seasons"))).docs.map(N=>({id:N.id,...N.data()}));_(re)}catch(X){console.error(":",X)}},[s]);C.useEffect(()=>{B()},[B]);const M=async X=>{X.preventDefault();try{await fd(Be(be,"events",s,"seasons"),{name:e,startDate:bt.fromDate(new Date(i)),endDate:bt.fromDate(new Date(u))}),p(" "),n(""),o(""),d(""),B()}catch(re){console.error(re),p(" ")}},z=async X=>{if(window.confirm(""))try{await vr(ct(be,"events",s,"seasons",X)),_(N=>N.filter(R=>R.id!==X))}catch(N){console.error(":",N)}},q=X=>{E(X.id),I({name:X.name||"",startDate:Cx(X.startDate),endDate:Cx(X.endDate)})},Y=()=>{E(""),I({name:"",startDate:"",endDate:""})},te=async X=>{if(!k.name.trim()||!k.startDate||!k.endDate){alert("");return}try{const re={name:k.name.trim(),startDate:bt.fromDate(new Date(k.startDate)),endDate:bt.fromDate(new Date(k.endDate))};await _g(ct(be,"events",s,"seasons",X),re),_(N=>N.map(R=>R.id===X?{...R,...re}:R)),Y()}catch(re){console.error(":",re),alert("")}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:M,children:[y.jsx("input",{type:"text",placeholder:"",value:e,onChange:X=>n(X.target.value),required:!0}),y.jsx("input",{type:"date",value:i,onChange:X=>o(X.target.value),required:!0}),y.jsx("input",{type:"date",value:u,onChange:X=>d(X.target.value),required:!0}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("p",{children:m}),y.jsx("ul",{children:g.map(X=>y.jsx("li",{children:S===X.id?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:k.name,onChange:re=>I(N=>({...N,name:re.target.value}))}),y.jsx("input",{type:"date",value:k.startDate,onChange:re=>I(N=>({...N,startDate:re.target.value}))}),y.jsx("input",{type:"date",value:k.endDate,onChange:re=>I(N=>({...N,endDate:re.target.value}))}),y.jsx("button",{type:"button",onClick:()=>te(X.id),children:""}),y.jsx("button",{type:"button",onClick:Y,children:""})]}):y.jsxs(y.Fragment,{children:[X.name,"",X.startDate.toDate().toLocaleDateString(),"",X.endDate.toDate().toLocaleDateString(),"",y.jsx("button",{type:"button",onClick:()=>q(X),children:""}),y.jsx("button",{type:"button",onClick:()=>z(X.id),children:""})]})},X.id))})]})},tO=({eventId:s,categories:e,setCategories:n})=>{const[i,o]=C.useState(""),[u,d]=C.useState(""),[m,p]=C.useState(""),g=C.useCallback(async()=>{try{const M=(await Ye(Be(be,"events",s,"categories"))).docs.map(z=>({id:z.id,...z.data()}));n(M)}catch(B){console.error(":",B)}},[s,n]);C.useEffect(()=>{g()},[g]);const _=async B=>{if(B.preventDefault(),!!i)try{await fd(Be(be,"events",s,"categories"),{name:i}),o(""),g()}catch(M){console.error(":",M)}},S=async B=>{if(window.confirm(""))try{await vr(ct(be,"events",s,"categories",B)),n(z=>z.filter(q=>q.id!==B))}catch(z){console.error(":",z)}},E=B=>{d(B.id),p(B.name||"")},k=()=>{d(""),p("")},I=async B=>{const M=m.trim();if(!M){alert("");return}try{await _g(ct(be,"events",s,"categories",B),{name:M}),n(z=>z.map(q=>q.id===B?{...q,name:M}:q)),k()}catch(z){console.error(":",z),alert("")}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:_,children:[y.jsx("input",{type:"text",placeholder:"",value:i,onChange:B=>o(B.target.value),required:!0}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("ul",{children:e.map(B=>y.jsx("li",{children:u===B.id?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:m,onChange:M=>p(M.target.value)}),y.jsx("button",{type:"button",onClick:()=>I(B.id),children:""}),y.jsx("button",{type:"button",onClick:k,children:""})]}):y.jsxs(y.Fragment,{children:[B.name,y.jsx("button",{type:"button",onClick:()=>E(B),children:""}),y.jsx("button",{type:"button",onClick:()=>S(B.id),children:""})]})},B.id))})]})},nO=["9","8","7","6","5","4","3","2","1","","2"],ru=s=>{if(typeof s.taskNo=="number"&&Number.isFinite(s.taskNo))return s.taskNo;const e=String(s.name||"").match(/(\d+)/);return e?Number(e[1]):Number.MAX_SAFE_INTEGER},jm=s=>[...s].sort((e,n)=>{const i=ru(e)-ru(n);return i!==0?i:String(e.name||"").localeCompare(String(n.name||""),"ja")}),sO=({eventId:s,categories:e=[]})=>{const n=xi(),i=s||n.eventId,[o,u]=C.useState([]),[d,m]=C.useState(e),[p,g]=C.useState(""),[_,S]=C.useState(""),[E,k]=C.useState([]),[I,B]=C.useState([]),[M,z]=C.useState(""),q=C.useMemo(()=>new Set(I),[I]);C.useEffect(()=>{if(!i)return;(async()=>{const xe=await Ye(Be(be,"events",i,"seasons"));if(u(xe.docs.map(Q=>({id:Q.id,...Q.data()}))),e.length>0){m(e);return}const ye=await Ye(Be(be,"events",i,"categories"));m(ye.docs.map(Q=>({id:Q.id,...Q.data()})))})()},[i,e]),C.useEffect(()=>{if(!i||!p){k([]),B([]);return}(async()=>{const ye=(await Ye(Be(be,"events",i,"seasons",p,"tasks"))).docs.map(Q=>({id:Q.id,...Q.data(),isEditing:!1}));k(jm(ye))})()},[i,p]),C.useEffect(()=>{if(!i||!p||!_){B([]);return}(async()=>{const xe=await Ye(Be(be,"events",i,"seasons",p,"categoryTaskMap",_,"assignments"));B(xe.docs.map(ye=>ye.id))})()},[i,p,_]);const Y=()=>{setTimeout(()=>z(""),2e3)},te=A=>ct(be,"events",i,"seasons",p,"tasks",A),X=(A,xe)=>ct(be,"events",i,"seasons",p,"categoryTaskMap",A,"assignments",xe),re=()=>{const A=new Set(E.map(ye=>ru(ye)).filter(ye=>Number.isFinite(ye)));let xe=1;for(;A.has(xe);)xe+=1;return xe},N=()=>{if(!p){z(" "),Y();return}const A=re(),xe=String(A).padStart(2,"0"),ye=`task-${xe}`;k(Q=>jm([...Q,{id:ye,taskNo:A,name:`No.${xe}`,grade:"",points:1,isBonus:!1,isEditing:!0,isNew:!0}]))},R=(A,xe,ye)=>{k(Q=>{const ee=[...Q],ie={...ee[A]};return ie[xe]=xe==="isBonus"?ye.target.checked:ye,ee[A]=ie,ee})},D=A=>{k(xe=>xe.map((ye,Q)=>({...ye,isEditing:Q===A?!ye.isEditing:!1})))},P=async A=>{var ee;const xe=E[A];if(!((ee=xe.name)!=null&&ee.trim())){z(" "),Y();return}if(!xe.grade){z(" "),Y();return}const ye={name:xe.name.trim(),taskNo:Number(xe.taskNo)||ru(xe),grade:xe.grade,points:Number(xe.points)||1,isBonus:!!xe.isBonus,isActive:!0};await hi(te(xe.id),ye,{merge:!0});const Q={...xe,...ye,isEditing:!1,isNew:!1};k(ie=>{const pe=[...ie];return pe[A]=Q,jm(pe)}),z(` ${ye.name} `),Y()},U=async A=>{const xe=E[A];await vr(te(xe.id)),await Promise.all(d.map(async ye=>{await vr(X(ye.id,xe.id))})),k(ye=>ye.filter((Q,ee)=>ee!==A)),B(ye=>ye.filter(Q=>Q!==xe.id)),z(" "),Y()},L=async(A,xe)=>{if(_){if(!A.grade){z(" "),Y();return}xe?(await hi(X(_,A.id),{enabled:!0,taskNo:ru(A)}),B(ye=>Array.from(new Set([...ye,A.id]))),z(` ${A.name} `)):(await vr(X(_,A.id)),B(ye=>ye.filter(Q=>Q!==A.id)),z(` ${A.name} `)),Y()}};return y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-slate-900",children:" "}),y.jsx("p",{className:"mt-1 text-sm text-slate-600",children:""}),M&&y.jsx("p",{className:"mt-2 text-sm text-slate-700",children:M}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:["",y.jsxs("select",{value:p,onChange:A=>g(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),o.map(A=>y.jsx("option",{value:A.id,children:A.name},A.id))]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:["",y.jsxs("select",{value:_,onChange:A=>S(A.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),d.map(A=>y.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),p&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:N,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),y.jsxs("span",{className:"text-sm text-slate-600",children:[": ",E.length]}),_&&y.jsxs("span",{className:"text-sm text-slate-600",children:[": ",I.length]})]}),y.jsxs("table",{className:"mt-4 w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),y.jsxs("tbody",{children:[E.map((A,xe)=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{value:A.name||"",onChange:ye=>R(xe,"name",ye.target.value),placeholder:"",className:"w-full rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):A.name}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsxs("select",{value:A.grade||"",onChange:ye=>R(xe,"grade",ye.target.value),className:"rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),nO.map(ye=>y.jsx("option",{value:ye,children:ye},ye))]}):A.grade||"-"}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{type:"number",min:"1",step:"1",value:Number(A.points)||1,onChange:ye=>R(xe,"points",ye.target.value),className:"w-24 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}):Number(A.points)||1}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsx("input",{type:"checkbox",checked:!!A.isBonus,onChange:ye=>R(xe,"isBonus",ye)}):A.isBonus?"":"-"}),y.jsx("td",{className:"py-2",children:y.jsx("input",{type:"checkbox",disabled:!_||!A.grade,checked:_?q.has(A.id):!1,onChange:ye=>L(A,ye.target.checked)})}),y.jsx("td",{className:"py-2",children:A.isEditing?y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>P(xe),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 transition hover:bg-emerald-100",children:""}),y.jsx("button",{type:"button",onClick:()=>D(xe),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""})]}):y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>D(xe),className:"rounded-lg border border-slate-300 bg-white px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-50",children:""}),y.jsx("button",{type:"button",onClick:()=>U(xe),className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1 text-xs font-medium text-rose-700 transition hover:bg-rose-100",children:""})]})})]},A.id)),E.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"py-4 text-sm text-slate-500",children:" "})})]})]})]})]})},mp=[{id:"seasons",label:" ",hint:""},{id:"categories",label:" ",hint:""},{id:"tasks",label:" ",hint:""}],Nx=s=>!s||s==="routes"||s==="participants"||s==="scores"?"seasons":mp.some(e=>e.id===s)?s:"seasons",rO=()=>{var U;const{eventId:s}=xi(),[e,n]=C.useState(""),i=Hn(),[o,u]=qh(),[d,m]=C.useState(Nx(o.get("tab")||((U=i.state)==null?void 0:U.tab)||"seasons")),[p,g]=C.useState([]),[_,S]=C.useState(0),[E,k]=C.useState(0),[I,B]=C.useState(!0),[M,z]=C.useState(""),[q,Y]=C.useState(!1),{gymIds:te,hasAllGymAccess:X,loading:re,error:N}=wi();if(Fn(e?`: ${e}`:""),C.useEffect(()=>{if(re)return;if(N){z(N),B(!1);return}(async()=>{B(!0),z(""),Y(!1);try{const A=ct(be,"events",s),xe=await ms(A);if(!xe.exists()){z("");return}const ye=xe.data();if(n(ye.name||""),!X&&!te.includes(ye.gymId)){Y(!0);return}const[Q,ee,ie]=await Promise.all([Ye(Be(be,"events",s,"categories")),Ye(Be(be,"events",s,"seasons")),Ye(Be(be,"events",s,"participants"))]),pe=Q.docs.map(j=>({id:j.id,...j.data()}));g(pe),S(ee.size),k(ie.size)}catch(A){console.error(":",A),z("")}finally{B(!1)}})()},[s,te,X,re,N]),C.useEffect(()=>{const L=Nx(o.get("tab"));L!==d&&m(L)},[o]),C.useEffect(()=>{const L=new URLSearchParams(o);L.get("tab")!==d&&(L.set("tab",d),u(L,{replace:!0}))},[d,o,u]),I||re)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(M||N)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:M||N})});if(q)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})});const R=mp.find(L=>L.id===d),D=[{label:"",value:_},{label:"",value:p.length},{label:"",value:E}],P=L=>`rounded-lg border px-3 py-2 text-sm font-medium transition ${L?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`;return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("p",{className:"text-sm text-slate-600",children:""}),y.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:D.map(L=>y.jsxs("span",{className:"rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-sm text-slate-700",children:[L.label,": ",L.value]},L.label))})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[mp.map(L=>y.jsx("button",{type:"button",onClick:()=>m(L.id),className:P(d===L.id),children:L.label},L.id)),y.jsx(Fe,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:R==null?void 0:R.hint}),d==="seasons"&&y.jsx(eO,{eventId:s}),d==="categories"&&y.jsx(tO,{eventId:s,categories:p,setCategories:g}),d==="tasks"&&(p.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsx(sO,{eventId:s,categories:p}))]})})},ah={name:"",memberNo:"",age:"",gender:"",categoryId:""},iO=s=>s==="male"?"":s==="female"?"":s==="other"?"":"",aO=({eventId:s,categories:e})=>{const[n,i]=C.useState([]),[o,u]=C.useState(ah),[d,m]=C.useState(""),[p,g]=C.useState(ah),_=C.useCallback(async()=>{try{const z=(await Ye(Be(be,"events",s,"participants"))).docs.map(q=>({id:q.id,...q.data()}));i(z)}catch(M){console.error(":",M)}},[s]);C.useEffect(()=>{_()},[_]);const S=async M=>{M.preventDefault();try{await fd(Be(be,"events",s,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:wn()}),u(ah),_()}catch(z){console.error(":",z)}},E=M=>{m(M.id),g({name:M.name||"",memberNo:M.memberNo||"",age:M.age?String(M.age):"",gender:M.gender||"",categoryId:M.categoryId||""})},k=()=>{m(""),g(ah)},I=async M=>{if(!p.name.trim()||!p.memberNo.trim()||!p.age||!p.gender||!p.categoryId){alert("");return}try{const z={name:p.name.trim(),memberNo:p.memberNo.trim(),age:Number(p.age),gender:p.gender,categoryId:p.categoryId,updatedAt:wn()};await _g(ct(be,"events",s,"participants",M),z),i(q=>q.map(Y=>Y.id===M?{...Y,...z,updatedAt:new Date}:Y)),k()}catch(z){console.error(":",z),alert("")}},B=async M=>{if(window.confirm(""))try{await vr(ct(be,"events",s,"participants",M)),i(q=>q.filter(Y=>Y.id!==M))}catch(q){console.error(":",q)}};return y.jsxs("div",{children:[y.jsx("h3",{children:" "}),y.jsxs("form",{onSubmit:S,children:[y.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:M=>u(z=>({...z,name:M.target.value})),required:!0}),y.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:M=>u(z=>({...z,memberNo:M.target.value})),required:!0}),y.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:M=>u(z=>({...z,age:M.target.value})),required:!0}),y.jsxs("select",{value:o.gender,onChange:M=>u(z=>({...z,gender:M.target.value})),required:!0,children:[y.jsx("option",{value:"",children:"--  --"}),y.jsx("option",{value:"male",children:""}),y.jsx("option",{value:"female",children:""}),y.jsx("option",{value:"other",children:""})]}),y.jsxs("select",{value:o.categoryId,onChange:M=>u(z=>({...z,categoryId:M.target.value})),required:!0,children:[y.jsx("option",{value:"",children:"--  --"}),e.map(M=>y.jsx("option",{value:M.id,children:M.name},M.id))]}),y.jsx("button",{type:"submit",children:""})]}),y.jsx("ul",{children:n.map(M=>{var Y;const z=((Y=e.find(te=>te.id===M.categoryId))==null?void 0:Y.name)||"",q=d===M.id;return y.jsx("li",{children:q?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",value:p.name,onChange:te=>g(X=>({...X,name:te.target.value}))}),y.jsx("input",{type:"text",value:p.memberNo,onChange:te=>g(X=>({...X,memberNo:te.target.value}))}),y.jsx("input",{type:"number",min:"1",max:"120",value:p.age,onChange:te=>g(X=>({...X,age:te.target.value}))}),y.jsxs("select",{value:p.gender,onChange:te=>g(X=>({...X,gender:te.target.value})),children:[y.jsx("option",{value:"",children:"--  --"}),y.jsx("option",{value:"male",children:""}),y.jsx("option",{value:"female",children:""}),y.jsx("option",{value:"other",children:""})]}),y.jsxs("select",{value:p.categoryId,onChange:te=>g(X=>({...X,categoryId:te.target.value})),children:[y.jsx("option",{value:"",children:"--  --"}),e.map(te=>y.jsx("option",{value:te.id,children:te.name},te.id))]}),y.jsx("button",{type:"button",onClick:()=>I(M.id),children:""}),y.jsx("button",{type:"button",onClick:k,children:""})]}):y.jsxs(y.Fragment,{children:[M.name," / ",": ",M.memberNo||"-"," / ",": ",M.age||"-"," / ",": ",iO(M.gender)," / ",": ",z,y.jsx("button",{type:"button",onClick:()=>E(M),children:""}),y.jsx("button",{type:"button",onClick:()=>B(M.id),children:""})]})},M.id)})})]})},oO=()=>{const{eventId:s}=xi(),[e,n]=C.useState(""),[i,o]=C.useState([]),[u,d]=C.useState(!0),[m,p]=C.useState(""),[g,_]=C.useState(!1),{gymIds:S,hasAllGymAccess:E,loading:k,error:I}=wi();return Fn(e?`: ${e}`:""),C.useEffect(()=>{if(k)return;if(I){p(I),d(!1);return}(async()=>{d(!0),p(""),_(!1);try{const M=await ms(ct(be,"events",s));if(!M.exists()){p("");return}const z=M.data();if(n(z.name||""),!E&&!S.includes(z.gymId)){_(!0);return}const q=await Ye(Be(be,"events",s,"categories"));o(q.docs.map(Y=>({id:Y.id,...Y.data()})))}catch(M){console.error(":",M),p("")}finally{d(!1)}})()},[s,S,E,k,I]),u||k?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):m||I?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:m||I})}):g?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[" ",e]}),y.jsx("div",{className:"mt-4",children:y.jsx(Fe,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-2 shadow-sm",children:y.jsx(aO,{eventId:s,categories:i})})]})})},lO=({eventId:s})=>{var E,k;const[e,n]=C.useState([]),[i,o]=C.useState([]),[u,d]=C.useState([]),m=Hn(),[p,g]=C.useState(((E=m.state)==null?void 0:E.seasonId)||""),[_,S]=C.useState(((k=m.state)==null?void 0:k.categoryId)||"");return C.useEffect(()=>{const I=async()=>{try{const z=(await Ye(Be(be,"events",s,"seasons"))).docs.map(q=>({id:q.id,...q.data()}));n(z)}catch(M){console.error(":",M)}},B=async()=>{try{const z=(await Ye(Be(be,"events",s,"categories"))).docs.map(q=>({id:q.id,...q.data()}));o(z)}catch(M){console.error(":",M)}};I(),B()},[s]),C.useEffect(()=>{(async()=>{if(!_){d([]);return}try{const B=wT(Be(be,"events",s,"participants"),AT("categoryId","==",_)),z=(await Ye(B)).docs.map(q=>({id:q.id,...q.data()})).sort((q,Y)=>(q.name||"").localeCompare(Y.name||"","ja"));d(z)}catch(B){console.error(":",B)}})()},[s,_]),C.useEffect(()=>{var I,B;(I=m.state)!=null&&I.seasonId&&g(m.state.seasonId),(B=m.state)!=null&&B.categoryId&&S(m.state.categoryId)},[m.state]),y.jsxs("div",{className:"p-4 sm:p-5",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsxs("div",{className:"mt-3 mb-4 flex flex-wrap gap-2",children:[y.jsx(Fe,{to:`/events/${s}/data-io`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"}),y.jsx(Fe,{to:`/score-summary/${s}`,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""})]}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",y.jsxs("select",{value:p,onChange:I=>g(I.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),e.map(I=>y.jsx("option",{value:I.id,children:I.name},I.id))]})]})}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:[":",y.jsxs("select",{value:_,onChange:I=>S(I.target.value),className:"mt-1 block w-full max-w-sm rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),i.map(I=>y.jsx("option",{value:I.id,children:I.name},I.id))]})]})}),p&&_&&y.jsx("ul",{className:"space-y-2",children:u.map(I=>y.jsxs("li",{className:"rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-800",children:[y.jsx("span",{className:"font-medium",children:I.name}),y.jsx(Fe,{to:`/events/${s}/scoreinput/${p}/${_}/${I.id}`,className:"ml-3 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-2.5 py-1 text-xs font-semibold text-sky-800 transition hover:bg-sky-100",children:" "})]},I.id))})]})},uO=()=>{const{eventId:s}=xi(),[e,n]=C.useState(""),[i,o]=C.useState(!0),[u,d]=C.useState(""),[m,p]=C.useState(!1),{gymIds:g,hasAllGymAccess:_,loading:S,error:E}=wi();return Fn(e?`: ${e}`:""),C.useEffect(()=>{if(S)return;if(E){d(E),o(!1);return}(async()=>{o(!0),d(""),p(!1);try{const I=await ms(ct(be,"events",s));if(!I.exists()){d("");return}const B=I.data();if(n(B.name||""),!_&&!g.includes(B.gymId)){p(!0);return}}catch(I){console.error(":",I),d("")}finally{o(!1)}})()},[s,g,_,S,E]),i||S?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):u||E?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:u||E})}):m?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Score Operation"}),y.jsxs("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:[" ",e]}),y.jsx("div",{className:"mt-4",children:y.jsx(Fe,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-1 shadow-sm sm:p-2",children:y.jsx(lO,{eventId:s})})]})})},cO=Number.MAX_SAFE_INTEGER,pp=s=>{const e=Number(s);return Number.isFinite(e)?e:null},gp=s=>{const e=pp(s==null?void 0:s.taskNo);if(e!=null)return e;const n=String((s==null?void 0:s.name)||"").match(/(\d+)/);return n?Number(n[1]):cO},DT=(s=[])=>[...s].sort((e,n)=>{const i=gp(e)-gp(n);return i!==0?i:String((e==null?void 0:e.name)||"").localeCompare(String((n==null?void 0:n.name)||""),"ja")}),md=(s=[],e=[])=>{const n=new Map(s.map(o=>[o.id,o])),i=[];for(const o of e){if((o==null?void 0:o.enabled)===!1)continue;const u=n.get(o.id);if(!u)continue;const d=pp(o.taskNo),m=pp(u.taskNo);i.push({...u,taskNo:m??d??gp(u)})}return DT(i)},xg=(s=[])=>{const e=new Map;for(const n of s)n.id&&e.set(n.id,n),n.name&&e.set(n.name,n);return e},Gl=(s,e)=>!s||!e?!1:e.id&&e.id in s?!!s[e.id]:e.name&&e.name in s?!!s[e.name]:!1,pd=async(s,e)=>{const i=(await Ye(Be(be,"events",s,"seasons",e,"tasks"))).docs.map(o=>({id:o.id,...o.data()}));return DT(i)},gd=async(s,e,n)=>(await Ye(Be(be,"events",s,"seasons",e,"categoryTaskMap",n,"assignments"))).docs.map(o=>({id:o.id,...o.data()})),hO=async({eventId:s,seasonId:e,categoryId:n,seasonTasks:i})=>{const[o,u]=await Promise.all([i?Promise.resolve(i):pd(s,e),gd(s,e,n)]);return md(o,u)},dO=()=>{const{eventId:s,seasonId:e,categoryId:n,participantId:i}=xi(),[o,u]=C.useState([]),[d,m]=C.useState(""),[p,g]=C.useState({}),[_,S]=C.useState("simple"),[E,k]=C.useState(!0),[I,B]=C.useState(""),[M,z]=C.useState(""),[q,Y]=C.useState(null),[te,X]=C.useState(!0),[re,N]=C.useState(""),[R,D]=C.useState(!1),{gymIds:P,hasAllGymAccess:U,loading:L,error:A}=wi();Fn(d?`: ${d}`:""),C.useEffect(()=>{if(L)return;if(A){N(A),X(!1);return}(async()=>{X(!0),N(""),D(!1);try{const J=await ms(ct(be,"events",s));if(!J.exists()){N("");return}if(!U&&!P.includes(J.data().gymId)){D(!0);return}const ge=await ms(ct(be,"events",s,"participants",i));ge.exists()&&m(ge.data().name||"");const me=await hO({eventId:s,seasonId:e,categoryId:n});u(me);const le=await ms(ct(be,"events",s,"seasons",e,"categories",n,"participants",i));if(le.exists()){const ae=le.data();ae.scores&&g(ae.scores),ae.updatedAt&&Y(ae.updatedAt.toDate())}}catch(J){console.error(":",J),N("")}finally{X(!1)}})()},[s,e,n,i,P,U,L,A]);const xe=(O,J={})=>O!=null&&O.id&&O.id in J?O.id:O!=null&&O.name&&O.name in J?O.name:(O==null?void 0:O.name)||(O==null?void 0:O.id)||"",ye=O=>{g(J=>{const ge=xe(O,J);return ge?{...J,[ge]:!Gl(J,O)}:J})},Q=I.trim().toLowerCase(),ee=o.filter(O=>Gl(p,O)).length,ie=o.length-ee,pe=o.filter(O=>Q.length===0||String(O.name||"").toLowerCase().includes(Q)?E?!Gl(p,O):!0:!1),j=O=>{g(J=>{const ge={...J};for(const me of pe){const le=xe(me,J);le&&(ge[le]=O)}return ge})},se=async()=>{if(!R)try{await hi(ct(be,"events",s,"seasons",e,"categories",n,"participants",i),{scores:p,updatedAt:wn()},{merge:!0}),z(" "),setTimeout(()=>z(""),2e3)}catch(O){console.error(":",O),z(" ")}},fe=M.startsWith("")?"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700":"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700";return te||L?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):re||A?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:re||A})}):R?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 shadow-sm",children:[y.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700",children:"Score Input"}),y.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900 sm:text-3xl",children:" "}),y.jsx("div",{className:"mt-4",children:y.jsx(Fe,{to:`/events/${s}/scores`,state:{seasonId:e,categoryId:n},className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),y.jsxs("p",{className:"mt-4 text-sm text-slate-700",children:[": ",d]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[" ",ee," / ",o.length," ",ie,""]}),q&&y.jsxs("p",{className:"mt-1 text-xs italic text-slate-500",children:[": ",q.toLocaleString()]})]}),y.jsxs("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:()=>S("simple"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="simple"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),y.jsx("button",{type:"button",onClick:()=>S("detail"),className:`rounded-full border px-3 py-1.5 text-sm font-medium transition ${_==="detail"?"border-sky-300 bg-sky-50 text-sky-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:""}),y.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:E,onChange:O=>k(O.target.checked),className:"size-4 rounded border-slate-300"}),""]}),y.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-sm text-slate-700",children:[":",y.jsx("input",{type:"text",value:I,onChange:O=>B(O.target.value),placeholder:"No.01",className:"w-32 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]})]}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>j(!0),className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm font-medium text-emerald-700 transition hover:bg-emerald-100",children:""}),y.jsx("button",{type:"button",onClick:()=>j(!1),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]}),y.jsx("section",{className:"mt-5 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:pe.length===0?y.jsx("p",{className:"text-sm text-slate-600",children:""}):_==="simple"?y.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:pe.map(O=>{const J=Gl(p,O);return y.jsxs("button",{type:"button",onClick:()=>ye(O),className:`min-h-[96px] rounded-xl border p-3 text-left transition ${J?"border-emerald-300 bg-emerald-50":"border-slate-300 bg-white hover:bg-slate-50"}`,children:[y.jsx("div",{className:"font-semibold text-slate-900",children:O.name||O.id}),y.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:[": ",O.grade||"-"," / : ",O.points??"-"]}),y.jsx("div",{className:`mt-2 text-sm font-semibold ${J?"text-emerald-700":"text-slate-700"}`,children:J?"":""})]},O.id||O.name)})}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-[520px] w-full border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-left text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-right text-sm font-semibold text-slate-700",children:""}),y.jsx("th",{className:"border-b border-slate-200 pb-2 text-center text-sm font-semibold text-slate-700",children:""})]})}),y.jsx("tbody",{children:pe.map(O=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2 text-sm text-slate-800",children:O.name||O.id}),y.jsx("td",{className:"py-2 text-sm text-slate-700",children:O.grade||"-"}),y.jsx("td",{className:"py-2 text-right text-sm text-slate-700",children:O.points??"-"}),y.jsx("td",{className:"py-2 text-center",children:y.jsx("input",{type:"checkbox",checked:Gl(p,O),onChange:()=>ye(O),className:"size-4 rounded border-slate-300"})})]},O.id||O.name))})]})})}),y.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:[y.jsx("button",{type:"button",onClick:se,className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-4 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:" "}),M&&y.jsx("span",{className:fe,children:M})]})]})})},fO=["name","memberNo","age","gender"],mO=s=>{const e=String(s||"").trim().toLowerCase();return e?e==="male"||e==="m"||e==="man"||e===""?"male":e==="female"||e==="f"||e==="woman"||e===""?"female":e==="other"||e===""?"other":"":""},Ix=s=>{const e=s==null?"":String(s);return/[",\r\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},pO=(s,e)=>{const n=[s.map(Ix).join(",")];for(const i of e)n.push(s.map(o=>Ix(i[o]??"")).join(","));return`${n.join(`\r
`)}\r
`},Pm=(s,e,n)=>{const i=pO(e,n),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(o),d=document.createElement("a");d.href=u,d.download=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)},gO=s=>{const e=[];let n="",i=[],o=!1;for(let m=0;m<s.length;m+=1){const p=s[m],g=s[m+1];if(o){p==='"'&&g==='"'?(n+='"',m+=1):p==='"'?o=!1:n+=p;continue}if(p==='"'){o=!0;continue}if(p===","){i.push(n),n="";continue}if(p===`
`){i.push(n.replace(/\r$/,"")),n="",i.some(_=>_!=="")&&e.push(i),i=[];continue}n+=p}if((n.length>0||i.length>0)&&(i.push(n.replace(/\r$/,"")),i.some(m=>m!=="")&&e.push(i)),e.length===0)return{headers:[],records:[]};const u=e[0].map(m=>String(m||"").trim()),d=e.slice(1).map(m=>{const p={};return u.forEach((g,_)=>{p[g]=m[_]??""}),p});return{headers:u,records:d}},yO=s=>s?typeof s.toMillis=="function"?s.toMillis():typeof s.seconds=="number"?s.seconds*1e3:0:0,vO=(s,e)=>{const n={};for(const i of s){const o=new Map;for(const u of e.filter(d=>d.categoryId===i.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},_O=s=>{const e={};for(const[n,i]of Object.entries(s)){const o=Array.from(i.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,d=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==d)&&(m=g+1),u=p.totalPoints,d=p.clearCount,{...p,rank:m}))}return e},xO=()=>{const{eventId:s}=xi(),{gymIds:e,hasAllGymAccess:n,loading:i,error:o}=wi();Fn("CSV");const[u,d]=C.useState(null),[m,p]=C.useState([]),[g,_]=C.useState([]),[S,E]=C.useState([]),[k,I]=C.useState("all"),[B,M]=C.useState(!0),[z,q]=C.useState(!1),[Y,te]=C.useState(""),[X,re]=C.useState(""),[N,R]=C.useState(!1),[D,P]=C.useState(!1),U=C.useMemo(()=>new Map(g.map(ie=>[ie.id,ie])),[g]),L=async()=>{M(!0),te(""),q(!1);try{const ie=await ms(ct(be,"events",s));if(!ie.exists()){te("");return}const pe=ie.data();if(!n&&!e.includes(pe.gymId)){q(!0);return}const[j,se,fe]=await Promise.all([Ye(Be(be,"events",s,"seasons")),Ye(Be(be,"events",s,"categories")),Ye(Be(be,"events",s,"participants"))]);d({id:ie.id,...pe}),p(j.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja"))),_(se.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja"))),E(fe.docs.map(O=>({id:O.id,...O.data()})).sort((O,J)=>(O.name||"").localeCompare(J.name||"","ja")))}catch(ie){console.error("CSV:",ie),te("CSV")}finally{M(!1)}};C.useEffect(()=>{if(!i){if(o){te(o),M(!1);return}L()}},[i,o,s,n,e.join(",")]),C.useEffect(()=>{if(k==="all")return;m.some(pe=>pe.id===k)||I("all")},[k,m]);const A=()=>{if(!u)return;const ie=["id","name","memberNo","age","gender","categoryId","categoryName","entrySeasonId","participatingSeasonIds"],pe=S.map(j=>{var se;return{id:j.id,name:j.name||"",memberNo:j.memberNo||"",age:j.age??"",gender:j.gender||"",categoryId:j.categoryId||"",categoryName:((se=U.get(j.categoryId))==null?void 0:se.name)||"",entrySeasonId:j.entrySeasonId||"",participatingSeasonIds:Array.isArray(j.participatingSeasonIds)?j.participatingSeasonIds.join("|"):""}});Pm(`${u.id}-participants.csv`,ie,pe),re(` CSV${pe.length}`)},xe=()=>{if(!u)return;const ie=["scope","categoryId","categoryName","male","female","other","unknown","total","maleRatioPct","femaleRatioPct"],pe=se=>{let fe=0,O=0,J=0,ge=0;for(const Ee of se)Ee.gender==="male"?fe+=1:Ee.gender==="female"?O+=1:Ee.gender==="other"?J+=1:ge+=1;const me=fe+O+J+ge,le=me>0?(fe/me*100).toFixed(1):"0.0",ae=me>0?(O/me*100).toFixed(1):"0.0";return{male:fe,female:O,other:J,unknown:ge,total:me,maleRatioPct:le,femaleRatioPct:ae}},j=[];j.push({scope:"overall",categoryId:"all",categoryName:"",...pe(S)});for(const se of g){const fe=S.filter(O=>O.categoryId===se.id);j.push({scope:"category",categoryId:se.id,categoryName:se.name||se.id,...pe(fe)})}Pm(`${u.id}-gender-ratio.csv`,ie,j),re(" CSV")},ye=async()=>{var le;const ie=k==="all"?m.map(ae=>ae.id):[k].filter(Boolean);if(ie.length===0)return[];const pe=vO(g,S),j=new Map(S.map(ae=>[ae.id,ae])),se=new Map(await Promise.all(ie.map(async ae=>[ae,await pd(s,ae)]))),fe=ie.flatMap(ae=>g.map(async Ee=>{const[ve,Ae]=await Promise.all([gd(s,ae,Ee.id),Ye(Be(be,"events",s,"seasons",ae,"categories",Ee.id,"participants"))]);return{categoryId:Ee.id,assignedTasks:md(se.get(ae)||[],ve),scoreSnap:Ae}})),O=await Promise.all(fe);for(const{categoryId:ae,assignedTasks:Ee,scoreSnap:ve}of O){const Ae=xg(Ee);for(const st of ve.docs){const Ne=st.data(),Rt=Ne.scores||{},Pt=st.id;if(!pe[ae].has(Pt)){const ht=j.get(Pt);pe[ae].set(Pt,{participantId:Pt,name:(ht==null?void 0:ht.name)||Ne.participantName||`ID:${Pt}`,memberNo:(ht==null?void 0:ht.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Ge=pe[ae].get(Pt),_t=new Set;for(const[ht,Vt]of Object.entries(Rt)){if(!Vt)continue;const Ct=Ae.get(ht),Gt=(Ct==null?void 0:Ct.id)||ht;_t.has(Gt)||(_t.add(Gt),Ge.totalPoints+=Number(Ct==null?void 0:Ct.points)||1,Ge.clearCount+=1)}Ge.latestUpdatedAt=Math.max(Ge.latestUpdatedAt,yO(Ne.updatedAt))}}const J=_O(pe),ge=k==="all"?"all":((le=m.find(ae=>ae.id===k))==null?void 0:le.name)||k,me=[];for(const ae of g){const Ee=J[ae.id]||[];for(const ve of Ee)me.push({seasonScope:ge,categoryId:ae.id,categoryName:ae.name||ae.id,rank:ve.rank,participantId:ve.participantId,participantName:ve.name,memberNo:ve.memberNo,totalPoints:ve.totalPoints,clearCount:ve.clearCount})}return me},Q=async()=>{if(u){P(!0),re("");try{const ie=await ye(),pe=["seasonScope","categoryId","categoryName","rank","participantId","participantName","memberNo","totalPoints","clearCount"];Pm(`${u.id}-ranking.csv`,pe,ie),re(` CSV${ie.length}`)}catch(ie){console.error("CSV:",ie),re(" CSV")}finally{P(!1)}}},ee=async ie=>{var j;const pe=(j=ie.target.files)==null?void 0:j[0];if(ie.target.value="",!!pe){R(!0),re("");try{const se=await pe.text(),{headers:fe,records:O}=gO(se);if(fe.length===0){re(" CSV");return}const J=new Map(fe.map(Ne=>[Ne.toLowerCase(),Ne])),ge=fO.filter(Ne=>!J.has(Ne.toLowerCase()));if(ge.length>0){re(` : ${ge.join(", ")}`);return}const me=new Map(g.map(Ne=>[Ne.name,Ne.id])),le=[],ae=[];if(O.forEach((Ne,Rt)=>{const Pt=Rt+2,Ge=gt=>Ne[J.get(gt.toLowerCase())||""]||"",_t=String(Ge("id")).trim(),ht=String(Ge("name")).trim(),Vt=String(Ge("memberNo")).trim(),Ct=String(Ge("age")).trim(),Gt=mO(Ge("gender")),vs=String(Ge("categoryId")).trim(),Dt=String(Ge("categoryName")).trim(),rn=vs||me.get(Dt)||"",Ue=String(Ge("entrySeasonId")).trim(),ke=String(Ge("participatingSeasonIds")).trim(),je=ke?ke.split("|").map(gt=>gt.trim()).filter(Boolean):[],We=Number(Ct);if(!ht||!Vt||!Number.isFinite(We)||We<=0||!Gt||!rn){ae.push(`line ${Pt}: name/memberNo/age/gender/categoryId `);return}if(!U.has(rn)){ae.push(`line ${Pt}: categoryId "${rn}" `);return}le.push({id:_t,payload:{name:ht,memberNo:Vt,age:We,gender:Gt,categoryId:rn,entrySeasonId:Ue||null,participatingSeasonIds:je}})}),ae.length>0){re(` CSV: ${ae.slice(0,5).join(" / ")}`);return}if(le.length===0){re(" ");return}let Ee=wx(be),ve=0;const Ae=Be(be,"events",s,"participants"),st=async(Ne=!1)=>{(ve>=400||Ne&&ve>0)&&(await Ee.commit(),Ee=wx(be),ve=0)};for(const Ne of le){const Rt=Ne.id?ct(be,"events",s,"participants",Ne.id):ct(Ae);Ne.id?Ee.set(Rt,{...Ne.payload,updatedAt:wn()},{merge:!0}):Ee.set(Rt,{...Ne.payload,createdAt:wn(),updatedAt:wn()}),ve+=1,await st()}await st(!0),await L(),re(` CSV${le.length}`)}catch(se){console.error("CSV:",se),re(" CSV")}finally{R(!1)}}};return B||i?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"CSV..."})}):Y||o?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:Y||o})}):z?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:"CSV"})}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:["CSV: ",(u==null?void 0:u.name)||s]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"CSV: `name,memberNo,age,gender,categoryId`"}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:A,className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:"CSV"}),y.jsx("label",{className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700",children:y.jsx("input",{type:"file",accept:".csv,text/csv",onChange:ee,disabled:N,className:"text-sm"})}),y.jsx("span",{className:"text-sm text-slate-600",children:N?"...":`: ${S.length}`})]})]}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CSV"}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:k,onChange:ie=>I(ie.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),m.map(ie=>y.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),y.jsx("button",{type:"button",onClick:Q,disabled:D,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-60",children:D?"...":"CSV"}),y.jsx("button",{type:"button",onClick:xe,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:"CSV"})]})]}),X&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:X})]})})},Dx=s=>s?typeof s.toDate=="function"?s.toDate().toLocaleDateString():typeof s.seconds=="number"?new Date(s.seconds*1e3).toLocaleDateString():String(s):"-",uo=s=>s?typeof s.toDate=="function"?s.toDate().getTime():typeof s.seconds=="number"?s.seconds*1e3:0:0,Uh=(s,e)=>{const n=uo(s.startDate),i=uo(s.endDate);return n&&i&&n<=e&&e<=i?"ongoing":n&&e<n?"upcoming":"ended"},bO={ongoing:"",upcoming:"",ended:""},Ox={ongoing:0,upcoming:1,ended:2},EO=(s,e,n)=>{const i=Uh(s,n),o=Uh(e,n),u=Ox[i]??99,d=Ox[o]??99;if(u!==d)return u-d;const m=uo(s.startDate),p=uo(e.startDate),g=uo(s.endDate),_=uo(e.endDate);return i==="ongoing"?g!==_?g-_:m!==p?p-m:(s.name||"").localeCompare(e.name||"","ja"):i==="upcoming"?m!==p?m-p:g!==_?g-_:(s.name||"").localeCompare(e.name||"","ja"):g!==_?_-g:m!==p?p-m:(s.name||"").localeCompare(e.name||"","ja")},TO=()=>{Fn("");const[s,e]=qh(),n=s.get("q")||"",i=s.get("status")||"all",o=s.get("gym")||"all",[u,d]=C.useState([]),[m,p]=C.useState([]),[g,_]=C.useState(n),[S,E]=C.useState(i),[k,I]=C.useState(o),[B,M]=C.useState(!0),[z,q]=C.useState("");C.useEffect(()=>{(async()=>{try{q("");const[N,R]=await Promise.all([Ye(Be(be,"events")),Ye(Be(be,"gyms"))]),D=N.docs.map(U=>({id:U.id,...U.data()})),P=R.docs.map(U=>({id:U.id,...U.data()})).sort((U,L)=>(U.name||"").localeCompare(L.name||"","ja"));d(D),p(P)}catch(N){console.error(":",N),q("")}finally{M(!1)}})()},[]),C.useEffect(()=>{const re=new URLSearchParams,N=g.trim();N&&re.set("q",N),S!=="all"&&re.set("status",S),k!=="all"&&re.set("gym",k),re.toString()!==s.toString()&&e(re,{replace:!0})},[g,S,k,s,e]),C.useEffect(()=>{if(k==="all"||m.length===0)return;m.some(N=>N.id===k)||I("all")},[k,m]);const Y=C.useMemo(()=>{const re=Date.now(),N=g.trim().toLowerCase();return[...u].sort((R,D)=>EO(R,D,re)).filter(R=>{const D=(R.name||"").toLowerCase(),P=Uh(R,re),U=N?D.includes(N):!0,L=S==="all"?!0:P===S,A=k==="all"?!0:R.gymId===k;return U&&L&&A})},[u,g,S,k]),te=C.useMemo(()=>new Map(m.map(re=>[re.id,re.name||re.id])),[m]),X=()=>{_(""),E("all"),I("all")};return B?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):z?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:z}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:" "}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsxs("ol",{className:"mt-2 list-decimal space-y-1 pl-5 text-sm text-slate-700",children:[y.jsx("li",{children:""}),y.jsx("li",{children:""}),y.jsx("li",{children:""})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsx("input",{type:"text",value:g,onChange:re=>_(re.target.value),placeholder:": Spring",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:S,onChange:re=>E(re.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),y.jsx("option",{value:"ongoing",children:""}),y.jsx("option",{value:"upcoming",children:""}),y.jsx("option",{value:"ended",children:""})]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:k,onChange:re=>I(re.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),m.map(re=>y.jsx("option",{value:re.id,children:re.name},re.id))]})]}),y.jsx("button",{type:"button",onClick:X,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),y.jsxs("span",{className:"ml-auto text-sm text-slate-600",children:[" ",Y.length," / ",u.length," "]})]}),u.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):Y.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-4 grid gap-3",children:Y.map(re=>{const N=Uh(re,Date.now());return y.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[re.name,y.jsx("span",{className:"ml-2 rounded-full border border-slate-300 bg-slate-50 px-2 py-0.5 text-xs text-slate-600",children:bO[N]})]}),y.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:[": ",Dx(re.startDate),"  ",Dx(re.endDate)]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:[": ",te.get(re.gymId)||""]}),y.jsx(Fe,{to:`/score-summary/${re.id}`,className:"mt-2 inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]},re.id)})}),y.jsx("div",{className:"mt-8",children:y.jsx(Fe,{to:"/",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" Home"})})]})})},SO=s=>s?typeof s.toMillis=="function"?s.toMillis():typeof s.seconds=="number"?s.seconds*1e3:0:0,Mx=(s,e)=>{const n={};for(const i of s){const o=new Map;for(const u of e.filter(d=>d.categoryId===i.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[i.id]=o}return n},kx=s=>{const e={};for(const[n,i]of Object.entries(s)){const o=Array.from(i.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,d=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==d)&&(m=g+1),u=p.totalPoints,d=p.clearCount,{...p,rank:m}))}return e},wO=()=>{const{eventId:s}=xi(),[e,n]=qh(),i=e.get("season")||"all",o=e.get("category")||"all",u=e.get("q")||"",d=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[p,g]=C.useState(null),[_,S]=C.useState([]),[E,k]=C.useState([]),[I,B]=C.useState([]),[M,z]=C.useState(i),[q,Y]=C.useState(o),[te,X]=C.useState(d),[re,N]=C.useState(m),[R,D]=C.useState(u),[P,U]=C.useState({}),[L,A]=C.useState(!0),[xe,ye]=C.useState(!1),[Q,ee]=C.useState("");Fn(p!=null&&p.name?`: ${p.name}`:""),C.useEffect(()=>{let le=!1;return(async()=>{A(!0),ee("");try{const Ee=await ms(ct(be,"events",s));if(!Ee.exists()){le||ee("");return}const[ve,Ae,st]=await Promise.all([Ye(Be(be,"events",s,"seasons")),Ye(Be(be,"events",s,"categories")),Ye(Be(be,"events",s,"participants"))]);if(le)return;g({id:Ee.id,...Ee.data()}),S(ve.docs.map(Ne=>({id:Ne.id,...Ne.data()})).sort((Ne,Rt)=>Ne.name.localeCompare(Rt.name,"ja"))),k(Ae.docs.map(Ne=>({id:Ne.id,...Ne.data()})).sort((Ne,Rt)=>Ne.name.localeCompare(Rt.name,"ja"))),B(st.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}catch(Ee){console.error(":",Ee),le||ee("")}finally{le||A(!1)}})(),()=>{le=!0}},[s]),C.useEffect(()=>{let le=!1;return(async()=>{if(L||!p||E.length===0)return;ee("");const Ee=q==="all"?E:E.filter(Ae=>Ae.id===q);if(Ee.length===0){U({});return}const ve=M==="all"?_.map(Ae=>Ae.id):[M].filter(Boolean);if(ve.length===0){U(kx(Mx(Ee,I)));return}ye(!0);try{const Ae=Mx(Ee,I),st=new Map(I.map(Ge=>[Ge.id,Ge])),Ne=new Map(await Promise.all(ve.map(async Ge=>[Ge,await pd(s,Ge)]))),Rt=ve.flatMap(Ge=>Ee.map(async _t=>{const[ht,Vt]=await Promise.all([gd(s,Ge,_t.id),Ye(Be(be,"events",s,"seasons",Ge,"categories",_t.id,"participants"))]);return{categoryId:_t.id,assignedTasks:md(Ne.get(Ge)||[],ht),scoreSnap:Vt}})),Pt=await Promise.all(Rt);for(const{categoryId:Ge,assignedTasks:_t,scoreSnap:ht}of Pt){const Vt=xg(_t);for(const Ct of ht.docs){const Gt=Ct.data(),vs=Gt.scores||{},Dt=Ct.id;if(!Ae[Ge].has(Dt)){const ke=st.get(Dt);Ae[Ge].set(Dt,{participantId:Dt,name:(ke==null?void 0:ke.name)||Gt.participantName||`ID:${Dt}`,memberNo:(ke==null?void 0:ke.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const rn=Ae[Ge].get(Dt),Ue=new Set;for(const[ke,je]of Object.entries(vs)){if(!je)continue;const We=Vt.get(ke),gt=(We==null?void 0:We.id)||ke;Ue.has(gt)||(Ue.add(gt),rn.totalPoints+=Number(We==null?void 0:We.points)||1,rn.clearCount+=1)}rn.latestUpdatedAt=Math.max(rn.latestUpdatedAt,SO(Gt.updatedAt))}}le||U(kx(Ae))}catch(Ae){console.error(":",Ae),le||ee("")}finally{le||ye(!1)}})(),()=>{le=!0}},[L,p,E,I,_,M,q,s]);const ie=C.useMemo(()=>q==="all"?E:E.filter(le=>le.id===q),[E,q]),pe=C.useMemo(()=>[...q==="all"?I:I.filter(ae=>ae.categoryId===q)].sort((ae,Ee)=>(ae.name||"").localeCompare(Ee.name||"","ja")),[I,q]);C.useEffect(()=>{if(!te||pe.length===0)return;pe.some(ae=>ae.id===te)||X("")},[pe,te]),C.useEffect(()=>{re&&!te&&N(!1)},[re,te]),C.useEffect(()=>{_.length!==0&&M!=="all"&&!_.some(le=>le.id===M)&&z("all")},[_,M]),C.useEffect(()=>{E.length!==0&&q!=="all"&&!E.some(le=>le.id===q)&&Y("all")},[E,q]),C.useEffect(()=>{const le=new URLSearchParams;M!=="all"&&le.set("season",M),q!=="all"&&le.set("category",q);const ae=R.trim();ae&&le.set("q",ae),te&&le.set("pid",te),re&&te&&le.set("self","1"),le.toString()!==e.toString()&&n(le,{replace:!0})},[M,q,R,te,re,e,n]);const j=R.trim().toLowerCase(),se=j.length>0,fe=I.find(le=>le.id===te)||null,O=C.useMemo(()=>{if(!te)return[];const le=[];for(const ae of ie){const Ee=(P[ae.id]||[]).find(ve=>ve.participantId===te);Ee&&le.push({...Ee,categoryName:ae.name})}return le},[te,ie,P]),J=le=>{const ae=new URLSearchParams;M!=="all"&&ae.set("season",M),q!=="all"&&ae.set("category",q),R.trim()&&ae.set("q",R.trim()),te&&ae.set("pid",te),re&&te&&ae.set("self","1");const Ee=ae.toString();return`/score-summary/${s}/participants/${le}${Ee?`?${Ee}`:""}`},ge=()=>{Y("all"),X(""),N(!1),D("")},me=ie.reduce((le,ae)=>{const Ee=P[ae.id]||[];return le+Ee.filter(ve=>{const Ae=(ve.name||"").toLowerCase(),st=(ve.memberNo||"").toLowerCase();return Ae.includes(j)||st.includes(j)}).length},0);return L?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):Q?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:Q}),y.jsx("div",{className:"mt-8",children:y.jsx(Fe,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[p==null?void 0:p.name," - "]}),y.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:M,onChange:le=>z(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),_.map(le=>y.jsx("option",{value:le.id,children:le.name},le.id))]})]})}),y.jsxs("div",{className:"mt-3",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:["/:",y.jsx("input",{type:"text",value:R,onChange:le=>D(le.target.value),placeholder:":  / M-1001",className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),se&&y.jsxs("span",{className:"ml-3 text-sm text-slate-600",children:[" ",me," "]})]}),y.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("p",{className:"text-sm font-medium text-slate-700",children:""}),y.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:q,onChange:le=>Y(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),E.map(le=>y.jsx("option",{value:le.id,children:le.name},le.id))]})]}),y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:te,onChange:le=>X(le.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"",children:"--  --"}),pe.map(le=>y.jsxs("option",{value:le.id,children:[le.name," (",le.memberNo||"-",")"]},le.id))]})]}),y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:re,onChange:le=>N(le.target.checked),disabled:!te,className:"size-4 rounded border-slate-300"}),""]}),y.jsx("button",{type:"button",onClick:ge,className:"rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:""}),te&&y.jsx(Fe,{to:J(te),className:"inline-flex items-center rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",children:""})]})]}),fe&&y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[": ",fe.name," (",fe.memberNo||"-",")"]}),O.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-700",children:O.map(le=>y.jsxs("li",{children:[le.categoryName,": ",le.rank," /  ",le.totalPoints," /  ",le.clearCount]},`${le.categoryName}-${le.participantId}`))})]}),xe&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),ie.length===0?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):re&&!te?y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:""}):ie.map(le=>{const Ee=(P[le.id]||[]).filter(ve=>{if(re&&te&&ve.participantId!==te)return!1;if(!se)return!0;const Ae=(ve.name||"").toLowerCase(),st=(ve.memberNo||"").toLowerCase();return Ae.includes(j)||st.includes(j)});return y.jsxs("section",{className:"mt-6",children:[y.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[": ",le.name]}),Ee.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:se?"":""}):y.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:y.jsxs("table",{className:"min-w-[650px] w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""})]})}),y.jsx("tbody",{children:Ee.map(ve=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:ve.rank}),y.jsxs("td",{className:"py-2",children:[ve.name,te===ve.participantId&&y.jsx("strong",{className:"ml-2 text-xs text-slate-500",children:"()"})]}),y.jsx("td",{className:"py-2",children:ve.memberNo}),y.jsx("td",{className:"py-2 text-right",children:ve.totalPoints}),y.jsx("td",{className:"py-2 text-right",children:ve.clearCount}),y.jsx("td",{className:"py-2",children:y.jsx(Fe,{to:J(ve.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-xs font-medium text-slate-700 transition hover:bg-slate-100",children:""})})]},ve.participantId))})]})})]},le.id)}),y.jsx("div",{className:"mt-8",children:y.jsx(Fe,{to:"/score-summary",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},AO=s=>s?typeof s.toDate=="function"?s.toDate().toLocaleString():typeof s.seconds=="number"?new Date(s.seconds*1e3).toLocaleString():"-":"-",jx=s=>{const e=[...s].sort((u,d)=>d.totalPoints!==u.totalPoints?d.totalPoints-u.totalPoints:d.clearCount!==u.clearCount?d.clearCount-u.clearCount:u.name.localeCompare(d.name,"ja"));let n=null,i=null,o=0;return e.map((u,d)=>((u.totalPoints!==n||u.clearCount!==i)&&(o=d+1),n=u.totalPoints,i=u.clearCount,{...u,rank:o}))},RO=()=>{var Q;const{eventId:s,participantId:e}=xi(),[n]=qh(),i=n.get("category")||"",o=n.get("q")||"",[u,d]=C.useState(null),[m,p]=C.useState(null),[g,_]=C.useState([]),[S,E]=C.useState([]),[k,I]=C.useState([]),[B,M]=C.useState(n.get("season")||"all"),[z,q]=C.useState([]),[Y,te]=C.useState(null),[X,re]=C.useState({prev:null,next:null}),[N,R]=C.useState(!0),[D,P]=C.useState(!1),[U,L]=C.useState("");Fn(m!=null&&m.name?`: ${m.name}`:"");const A=ee=>{const ie=new URLSearchParams;B!=="all"&&ie.set("season",B),i&&ie.set("category",i),o&&ie.set("q",o);const pe=ie.toString();return`/score-summary/${s}/participants/${ee}${pe?`?${pe}`:""}`},xe=C.useMemo(()=>{const ee=new URLSearchParams;B!=="all"&&ee.set("season",B),i&&ee.set("category",i),o&&ee.set("q",o);const ie=ee.toString();return`/score-summary/${s}${ie?`?${ie}`:""}`},[s,B,i,o]);C.useEffect(()=>{let ee=!1;return(async()=>{R(!0),L("");try{const[pe,j,se,fe,O]=await Promise.all([ms(ct(be,"events",s)),ms(ct(be,"events",s,"participants",e)),Ye(Be(be,"events",s,"participants")),Ye(Be(be,"events",s,"seasons")),Ye(Be(be,"events",s,"categories"))]);if(!pe.exists()){ee||L("");return}if(!j.exists()){ee||L("");return}const J=fe.docs.map(ae=>({id:ae.id,...ae.data()})).sort((ae,Ee)=>ae.name.localeCompare(Ee.name,"ja")),ge=O.docs.map(ae=>({id:ae.id,...ae.data()})).sort((ae,Ee)=>ae.name.localeCompare(Ee.name,"ja"));if(ee)return;const me=n.get("season"),le=me&&(me==="all"||J.some(ae=>ae.id===me))?me:"all";d({id:pe.id,...pe.data()}),p({id:j.id,...j.data()}),_(se.docs.map(ae=>({id:ae.id,...ae.data()}))),E(J),I(ge),M(le)}catch(pe){console.error(":",pe),ee||L("")}finally{ee||R(!1)}})(),()=>{ee=!0}},[s,e,n]),C.useEffect(()=>{let ee=!1;return(async()=>{if(!(N||!m||S.length===0||k.length===0)){P(!0);try{const pe=B==="all"?S:S.filter(me=>me.id===B),j=m.categoryId?[m.categoryId]:k.map(me=>me.id),se=new Map(k.map(me=>[me.id,me.name])),fe=new Map(g.map(me=>[me.id,me.name||""])),O=new Map(g.map(me=>[me.id,me.memberNo||"-"])),J=[],ge={};for(const me of pe){const le=await pd(s,me.id),ae=[],Ee=j.map(async Ae=>{const[st,Ne]=await Promise.all([gd(s,me.id,Ae),Ye(Be(be,"events",s,"seasons",me.id,"categories",Ae,"participants"))]),Rt=md(le,st),Pt=xg(Rt),Ge=new Map,_t=g.filter(Ue=>Ue.categoryId===Ae);for(const Ue of _t)Ge.set(Ue.id,{participantId:Ue.id,name:Ue.name||"",memberNo:Ue.memberNo||"-",totalPoints:0,clearCount:0});let ht=null;for(const Ue of Ne.docs){const ke=Ue.data(),je=ke.scores||{},We=Ue.id;We===m.id&&(ht=ke);const gt=Ge.get(We)||{participantId:We,name:fe.get(We)||`ID:${We}`,memberNo:O.get(We)||"-",totalPoints:0,clearCount:0},Ai=new Set;for(const[fa,qs]of Object.entries(je)){if(!qs)continue;const Cn=Pt.get(fa),_s=(Cn==null?void 0:Cn.id)||fa;Ai.has(_s)||(Ai.add(_s),gt.totalPoints+=Number(Cn==null?void 0:Cn.points)||1,gt.clearCount+=1)}Ge.set(We,gt)}const Vt=jx(Array.from(Ge.values())),Ct=Vt.find(Ue=>Ue.participantId===m.id);ge[Ae]||(ge[Ae]=new Map(Vt.map(Ue=>[Ue.participantId,{participantId:Ue.participantId,name:Ue.name,memberNo:Ue.memberNo,totalPoints:0,clearCount:0}])));for(const Ue of Vt){const ke=ge[Ae].get(Ue.participantId)||{participantId:Ue.participantId,name:Ue.name,memberNo:Ue.memberNo,totalPoints:0,clearCount:0};ke.totalPoints+=Ue.totalPoints,ke.clearCount+=Ue.clearCount,ge[Ae].set(Ue.participantId,ke)}const Gt=(ht==null?void 0:ht.scores)||{},vs=new Set,Dt=[];for(const[Ue,ke]of Object.entries(Gt)){if(!ke)continue;const je=Pt.get(Ue),We=(je==null?void 0:je.id)||Ue;vs.has(We)||(vs.add(We),Dt.push({routeName:(je==null?void 0:je.name)||Ue,points:Number(je==null?void 0:je.points)||1,grade:(je==null?void 0:je.grade)||"-"}))}Dt.sort((Ue,ke)=>Ue.routeName.localeCompare(ke.routeName,"ja"));const rn=Dt.reduce((Ue,ke)=>Ue+ke.points,0);return{categoryId:Ae,categoryName:se.get(Ae)||Ae,clearCount:Dt.length,totalPoints:rn,rank:(Ct==null?void 0:Ct.rank)||Vt.length,totalParticipants:Vt.length,updatedAtText:AO(ht==null?void 0:ht.updatedAt),clearedRoutes:Dt}}),ve=(await Promise.all(Ee)).filter(Boolean);for(const Ae of ve)ae.push(Ae);J.push({seasonId:me.id,seasonName:me.name,categorySummaries:ae,totalPoints:ae.reduce((Ae,st)=>Ae+st.totalPoints,0),totalClears:ae.reduce((Ae,st)=>Ae+st.clearCount,0)})}if(!ee){const me=m.categoryId||j[0],le=me?Array.from((ge[me]||new Map).values()):[],ae=jx(le),Ee=ae.find(ve=>ve.participantId===m.id);if(te(Ee?{categoryName:se.get(me)||"",rank:Ee.rank,totalParticipants:ae.length,totalPoints:Ee.totalPoints,totalClears:Ee.clearCount}:null),Ee){const ve=ae.findIndex(Ne=>Ne.participantId===m.id),Ae=ve>0?ae[ve-1]:null,st=ve>=0&&ve<ae.length-1?ae[ve+1]:null;re({prev:Ae,next:st})}else re({prev:null,next:null});q(J)}}catch(pe){console.error(":",pe),ee||L("")}finally{ee||P(!1)}}})(),()=>{ee=!0}},[N,m,g,S,k,B,s]);const ye=C.useMemo(()=>({totalPoints:z.reduce((ee,ie)=>ee+ie.totalPoints,0),totalClears:z.reduce((ee,ie)=>ee+ie.totalClears,0)}),[z]);return N?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):U?y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:U}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:xe,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]}):y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[u==null?void 0:u.name," - "]}),y.jsxs("p",{className:"mt-3 text-sm text-slate-700",children:[": ",y.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-700",children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",((Q=k.find(ee=>ee.id===(m==null?void 0:m.categoryId)))==null?void 0:Q.name)||""]}),y.jsx("div",{className:"mt-4",children:y.jsxs("label",{className:"text-sm text-slate-700",children:[":",y.jsxs("select",{value:B,onChange:ee=>M(ee.target.value),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1 outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[y.jsx("option",{value:"all",children:""}),S.map(ee=>y.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})}),y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-slate-700",children:[y.jsxs("p",{children:[": ",y.jsx("strong",{children:ye.totalPoints})]}),y.jsxs("p",{children:[": ",y.jsx("strong",{children:ye.totalClears})]})]}),Y&&y.jsxs("p",{className:"mt-2 text-sm text-slate-700",children:["",Y.categoryName,":"," ",y.jsx("strong",{children:Y.rank})," / ",Y.totalParticipants," "," ",Y.totalPoints," /  ",Y.totalClears,""]})]}),(X.prev||X.next)&&y.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:[X.prev?y.jsxs(Fe,{to:A(X.prev.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",X.prev.rank," ",X.prev.name]}):y.jsx("span",{className:"text-slate-600",children:""}),X.next?y.jsxs(Fe,{to:A(X.next.participantId),className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-2.5 py-1 text-slate-700 transition hover:bg-slate-100",children:[" ",X.next.rank," ",X.next.name]}):y.jsx("span",{className:"text-slate-600",children:""})]})]}),D&&y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"..."}),y.jsx("div",{className:"mt-5",children:z.length===0?y.jsx("p",{className:"text-sm text-slate-600",children:""}):z.map(ee=>y.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[y.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[ee.seasonName," /  ",ee.totalPoints," /  ",ee.totalClears]}),ee.categorySummaries.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):ee.categorySummaries.map(ie=>y.jsxs("div",{className:"mt-4",children:[y.jsxs("h4",{className:"text-sm font-semibold text-slate-800",children:[": ",ie.categoryName," /  ",ie.rank,"/",ie.totalParticipants," / "," ",ie.totalPoints," /  ",ie.clearCount]}),y.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[": ",ie.updatedAtText]}),ie.clearedRoutes.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-2 overflow-x-auto",children:y.jsxs("table",{className:"min-w-[360px] w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-left",children:""}),y.jsx("th",{className:"border-b border-slate-200 py-2 text-right",children:""})]})}),y.jsx("tbody",{children:ie.clearedRoutes.map(pe=>y.jsxs("tr",{children:[y.jsx("td",{className:"py-2",children:pe.routeName}),y.jsx("td",{className:"py-2",children:pe.grade}),y.jsx("td",{className:"py-2 text-right",children:pe.points})]},pe.routeName))})]})})]},`${ee.seasonId}-${ie.categoryId}`))]},ee.seasonId))}),y.jsx("div",{className:"mt-6",children:y.jsx(Fe,{to:xe,className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})})]})})},Vm=s=>Array.isArray(s)?s.filter(e=>typeof e=="string"&&e.trim().length>0):[],Px={id:"",name:"",city:"",prefecture:""},Vx={id:"",email:"",name:"",role:"owner",gymIds:[]},CO=s=>(s||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),NO=()=>{Fn("");const{authUser:s,role:e,loading:n,error:i}=wi(),[o,u]=C.useState(!0),[d,m]=C.useState(""),[p,g]=C.useState(""),[_,S]=C.useState([]),[E,k]=C.useState([]),[I,B]=C.useState([]),[M,z]=C.useState(Px),[q,Y]=C.useState({}),[te,X]=C.useState(Vx),[re,N]=C.useState(""),R=C.useMemo(()=>{const O=new Map;for(const J of E){const ge=J.gymId||"";ge&&O.set(ge,(O.get(ge)||0)+1)}return O},[E]),D=async()=>{u(!0),m("");try{const[O,J,ge]=await Promise.all([Ye(Be(be,"gyms")),Ye(Be(be,"events")),Ye(Be(be,"users"))]),me=O.docs.map(ve=>({id:ve.id,...ve.data()})).sort((ve,Ae)=>(ve.name||"").localeCompare(Ae.name||"","ja")),le=J.docs.map(ve=>({id:ve.id,...ve.data()})),ae=ge.docs.map(ve=>({id:ve.id,...ve.data()})).sort((ve,Ae)=>{const st=ve.role||"",Ne=Ae.role||"";return st!==Ne?st.localeCompare(Ne,"ja"):(ve.email||ve.id||"").localeCompare(Ae.email||Ae.id||"","ja")});S(me),k(le),B(ae);const Ee={};for(const ve of me)Ee[ve.id]={name:ve.name||"",city:ve.city||"",prefecture:ve.prefecture||""};Y(Ee)}catch(O){console.error(":",O),m("")}finally{u(!1)}};C.useEffect(()=>{if(!n){if(i){m(i),u(!1);return}if(e!=="admin"){u(!1);return}D()}},[n,i,e]);const P=()=>{X(Vx),N("")},U=async O=>{O.preventDefault();const J=M.id.trim();if(!J||!M.name.trim()){g(" ID");return}if(_.some(ge=>ge.id===J)){g(" ID");return}try{await hi(ct(be,"gyms",J),{name:M.name.trim(),city:M.city.trim(),prefecture:M.prefecture.trim(),createdAt:wn(),updatedAt:wn()}),z(Px),g(" "),await D()}catch(ge){console.error(":",ge),g(" ")}},L=async O=>{const J=q[O];if(!J||!J.name.trim()){g(" ");return}try{await hi(ct(be,"gyms",O),{name:J.name.trim(),city:J.city.trim(),prefecture:J.prefecture.trim(),updatedAt:wn()},{merge:!0}),g(` (${O})`),await D()}catch(ge){console.error(":",ge),g(" ")}},A=async O=>{const J=R.get(O)||0;if(J>0){g(`  ${J} `);return}if(window.confirm(`(${O})`))try{await vr(ct(be,"gyms",O)),g(` (${O})`),await D()}catch(ge){console.error(":",ge),g(" ")}},xe=O=>{N(O.id),X({id:O.id,email:O.email||"",name:O.name||"",role:O.role==="admin"?"admin":"owner",gymIds:Vm(O.gymIds)})},ye=O=>{X(J=>{const ge=J.gymIds.includes(O);return{...J,gymIds:ge?J.gymIds.filter(me=>me!==O):[...J.gymIds,O]}})},Q=async O=>{O.preventDefault();const J=te.email.trim().toLowerCase();if(!J){g(" ");return}const ge=te.id.trim()||CO(J);if(!ge){g(" ID");return}const me=te.role==="admin"?"admin":"owner",le=me==="admin"?["*"]:Vm(te.gymIds);if(me==="owner"&&le.length===0){g(" owner 1");return}const ae=I.find(ve=>ve.id===ge),Ee={email:J,name:te.name.trim(),role:me,gymIds:le,updatedAt:wn()};ae!=null&&ae.uid&&(Ee.uid=ae.uid),ae||(Ee.createdAt=wn());try{await hi(ct(be,"users",ge),Ee,{merge:!0}),g(` (${ge})`),N(ge),X(ve=>({...ve,id:ge})),await D()}catch(ve){console.error(":",ve),g(" ")}},ee=async O=>{if(O.id===(s==null?void 0:s.uid)){g(" ");return}if(window.confirm(`(${O.id})`))try{await vr(ct(be,"users",O.id)),re===O.id&&P(),g(` (${O.id})`),await D()}catch(J){console.error(":",J),g(" ")}};if(n||o)return y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})});if(d||i)return y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:d||i}),y.jsx(Fe,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});if(e!=="admin")return y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:""}),y.jsx(Fe,{to:"/dashboard",className:"mt-4 inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})]});const ie="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",pe="w-full max-w-[560px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100",j="rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",se="rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-sm font-semibold text-sky-800 transition hover:bg-sky-100",fe="rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm font-medium text-rose-700 transition hover:bg-rose-100";return y.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#dbeafe_0%,_#f8fafc_45%,_#ecfeff_100%)]",children:y.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:""}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}),y.jsx("p",{className:"mt-2",children:y.jsx(Fe,{to:"/dashboard",className:"inline-flex items-center rounded-lg border border-slate-300 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",children:" "})}),p&&y.jsx("p",{className:"mt-4 text-sm text-slate-700",children:p}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("form",{onSubmit:U,className:"mt-3 grid gap-2",children:[y.jsx("input",{type:"text",placeholder:"ID (: gym-shibuya)",value:M.id,onChange:O=>z(J=>({...J,id:O.target.value})),required:!0,className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.name,onChange:O=>z(J=>({...J,name:O.target.value})),required:!0,className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.city,onChange:O=>z(J=>({...J,city:O.target.value})),className:pe}),y.jsx("input",{type:"text",placeholder:"",value:M.prefecture,onChange:O=>z(J=>({...J,prefecture:O.target.value})),className:pe}),y.jsx("div",{children:y.jsx("button",{type:"submit",className:se,children:""})})]})]}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),_.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-3",children:_.map(O=>{var J,ge,me;return y.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[y.jsx("p",{className:"font-semibold text-slate-800",children:O.id}),y.jsxs("div",{className:"mt-2 grid gap-2",children:[y.jsx("input",{type:"text",value:((J=q[O.id])==null?void 0:J.name)||"",onChange:le=>Y(ae=>({...ae,[O.id]:{...ae[O.id],name:le.target.value}})),placeholder:"",className:pe}),y.jsx("input",{type:"text",value:((ge=q[O.id])==null?void 0:ge.city)||"",onChange:le=>Y(ae=>({...ae,[O.id]:{...ae[O.id],city:le.target.value}})),placeholder:"",className:pe}),y.jsx("input",{type:"text",value:((me=q[O.id])==null?void 0:me.prefecture)||"",onChange:le=>Y(ae=>({...ae,[O.id]:{...ae[O.id],prefecture:le.target.value}})),placeholder:"",className:pe})]}),y.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:[": ",R.get(O.id)||0]}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>L(O.id),className:j,children:""}),y.jsx("button",{type:"button",onClick:()=>A(O.id),className:fe,children:""})]})]},O.id)})})]}),y.jsxs("section",{className:`${ie} mt-4`,children:[y.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:""}),y.jsxs("form",{onSubmit:Q,className:"mt-3 grid gap-2",children:[y.jsx("input",{type:"text",placeholder:"ID",value:te.id,onChange:O=>X(J=>({...J,id:O.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"email",placeholder:"",value:te.email,onChange:O=>X(J=>({...J,email:O.target.value})),required:!0,className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsx("input",{type:"text",placeholder:"",value:te.name,onChange:O=>X(J=>({...J,name:O.target.value})),className:"w-full max-w-[700px] rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none transition focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),y.jsxs("div",{className:"flex flex-wrap gap-4",children:[y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="owner",onChange:()=>X(O=>({...O,role:"owner"}))}),"owner"]}),y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"radio",name:"owner-role",checked:te.role==="admin",onChange:()=>X(O=>({...O,role:"admin",gymIds:["*"]}))}),"admin"]})]}),te.role==="owner"&&y.jsxs("div",{children:[y.jsx("p",{className:"mb-2 text-sm text-slate-700",children:""}),y.jsx("div",{className:"flex flex-wrap gap-3",children:_.map(O=>y.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[y.jsx("input",{type:"checkbox",checked:te.gymIds.includes(O.id),onChange:()=>ye(O.id)}),O.name||O.id]},O.id))})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{type:"submit",className:se,children:re?` (${re})`:""}),y.jsx("button",{type:"button",onClick:P,className:j,children:""})]})]}),y.jsx("h4",{className:"mt-5 text-base font-semibold text-slate-900",children:""}),I.length===0?y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:""}):y.jsx("div",{className:"mt-3 grid gap-3",children:I.map(O=>y.jsxs("div",{className:`rounded-xl border p-4 ${re===O.id?"border-sky-200 bg-sky-50":"border-slate-200 bg-white"}`,children:[y.jsxs("p",{className:"text-sm text-slate-800",children:[y.jsx("strong",{children:O.email||"(no email)"})," / role: ",O.role||"-"]}),y.jsxs("p",{className:"mt-1 text-sm text-slate-600",children:["profileId: ",O.id," / gymIds: ",JSON.stringify(Vm(O.gymIds))]}),y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"button",onClick:()=>xe(O),className:j,children:""}),y.jsx("button",{type:"button",onClick:()=>ee(O),className:fe,children:""})]})]},O.id))})]})]})})},Lx=({children:s})=>{const[e,n]=C.useState(!0),[i,o]=C.useState(!1),u=Hn();return C.useEffect(()=>{const d=Kh(vi,m=>{o(!!m),n(!1)});return()=>d()},[]),e?y.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:y.jsx("p",{className:"text-sm text-slate-600",children:"..."})}):i?s:y.jsx(sA,{to:"/login",replace:!0,state:{from:u}})},Ux=({className:s=""})=>y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:s,"aria-hidden":"true",children:[y.jsx("path",{d:"M3 19h18"}),y.jsx("path",{d:"m6 19 5.5-9.5L14 14l4-7 3 12"}),y.jsx("path",{d:"m10.8 10.7 1.2-2 1.5 2.6"})]}),Lm="inline-flex items-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 transition hover:bg-slate-50",IO=()=>{const[s,e]=C.useState(null),n=_i();C.useEffect(()=>{const o=Kh(vi,u=>e(u));return()=>o()},[]);const i=async()=>{await jp(vi),n("/login",{replace:!0})};return y.jsxs("div",{className:"text-slate-900",children:[y.jsx("header",{className:"sticky top-0 z-50 border-b border-slate-100 bg-white/90 px-4 py-3 backdrop-blur sm:px-6 lg:px-10",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-700 text-white",children:y.jsx(Ux,{className:"h-6 w-6"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-emerald-700",children:"Climbing Competition"}),y.jsx("p",{className:"text-xs text-slate-500",children:"Gym Management"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Fe,{to:"/",className:Lm,children:"TOP"}),y.jsx(Fe,{to:"/dashboard",className:Lm,children:""}),y.jsx(Fe,{to:"/create-event",className:Lm,children:""}),s&&y.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 transition hover:bg-slate-50",children:""})]})]})}),y.jsx(rA,{}),y.jsx("footer",{className:"border-t border-slate-100 bg-white py-8",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[y.jsx(Ux,{className:"h-5 w-5 text-emerald-700"}),y.jsx("span",{className:"text-sm font-semibold",children:"Climbing Competition"})]}),y.jsx("p",{className:"text-xs text-slate-500",children:" 2026 Climbing Competition Systems. All rights reserved."})]})})]})};function DO(){return y.jsx(DA,{basename:"/FlashComp",children:y.jsxs(aA,{children:[y.jsx(Sn,{path:"/",element:y.jsx(YD,{})}),y.jsx(Sn,{path:"/login",element:y.jsx(XD,{})}),y.jsxs(Sn,{element:y.jsx(Lx,{children:y.jsx(IO,{})}),children:[y.jsx(Sn,{path:"/dashboard",element:y.jsx(WD,{})}),y.jsx(Sn,{path:"/create-event",element:y.jsx(JD,{})}),y.jsx(Sn,{path:"/events/:eventId/edit",element:y.jsx(rO,{})}),y.jsx(Sn,{path:"/events/:eventId/climbers",element:y.jsx(oO,{})}),y.jsx(Sn,{path:"/events/:eventId/scores",element:y.jsx(uO,{})}),y.jsx(Sn,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:y.jsx(dO,{})}),y.jsx(Sn,{path:"/events/:eventId/data-io",element:y.jsx(xO,{})})]}),y.jsx(Sn,{path:"/system-admin",element:y.jsx(Lx,{children:y.jsx(NO,{})})}),y.jsx(Sn,{path:"/score-summary",element:y.jsx(TO,{})}),y.jsx(Sn,{path:"/score-summary/:eventId",element:y.jsx(wO,{})}),y.jsx(Sn,{path:"/score-summary/:eventId/participants/:participantId",element:y.jsx(RO,{})})]})})}hw.createRoot(document.getElementById("root")).render(y.jsx(C.StrictMode,{children:y.jsx(DO,{})}));
