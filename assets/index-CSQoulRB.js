(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var lm={exports:{}},kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function Vb(){if(g_)return kl;g_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return kl.Fragment=e,kl.jsx=n,kl.jsxs=n,kl}var y_;function Pb(){return y_||(y_=1,lm.exports=Vb()),lm.exports}var v=Pb(),um={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function kb(){if(v_)return Ve;v_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,U={};function O(N,W,ue){this.props=N,this.context=W,this.refs=U,this.updater=ue||P}O.prototype.isReactComponent={},O.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},O.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=O.prototype;function L(N,W,ue){this.props=N,this.context=W,this.refs=U,this.updater=ue||P}var G=L.prototype=new q;G.constructor=L,x(G,O.prototype),G.isPureReactComponent=!0;var Q=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function I(N,W,ue,se,ye,ge){return ue=ge.ref,{$$typeof:r,type:N,key:W,ref:ue!==void 0?ue:null,props:ge}}function R(N,W){return I(N.type,W,void 0,void 0,void 0,N.props)}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function k(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ue){return W[ue]})}var j=/\/+/g;function z(N,W){return typeof N=="object"&&N!==null&&N.key!=null?k(""+N.key):W.toString(36)}function M(){}function et(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(M,M):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Ge(N,W,ue,se,ye){var ge=typeof N;(ge==="undefined"||ge==="boolean")&&(N=null);var de=!1;if(N===null)de=!0;else switch(ge){case"bigint":case"string":case"number":de=!0;break;case"object":switch(N.$$typeof){case r:case e:de=!0;break;case E:return de=N._init,Ge(de(N._payload),W,ue,se,ye)}}if(de)return ye=ye(N),de=se===""?"."+z(N,0):se,Q(ye)?(ue="",de!=null&&(ue=de.replace(j,"$&/")+"/"),Ge(ye,W,ue,"",function(Ne){return Ne})):ye!=null&&(D(ye)&&(ye=R(ye,ue+(ye.key==null||N&&N.key===ye.key?"":(""+ye.key).replace(j,"$&/")+"/")+de)),W.push(ye)),1;de=0;var he=se===""?".":se+":";if(Q(N))for(var pe=0;pe<N.length;pe++)se=N[pe],ge=he+z(se,pe),de+=Ge(se,W,ue,ge,ye);else if(pe=S(N),typeof pe=="function")for(N=pe.call(N),pe=0;!(se=N.next()).done;)se=se.value,ge=he+z(se,pe++),de+=Ge(se,W,ue,ge,ye);else if(ge==="object"){if(typeof N.then=="function")return Ge(et(N),W,ue,se,ye);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return de}function ne(N,W,ue){if(N==null)return N;var se=[],ye=0;return Ge(N,se,"","",function(ge){return W.call(ue,ge,ye++)}),se}function ie(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ue){(N._status===0||N._status===-1)&&(N._status=1,N._result=ue)},function(ue){(N._status===0||N._status===-1)&&(N._status=2,N._result=ue)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var H=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function fe(){}return Ve.Children={map:ne,forEach:function(N,W,ue){ne(N,function(){W.apply(this,arguments)},ue)},count:function(N){var W=0;return ne(N,function(){W++}),W},toArray:function(N){return ne(N,function(W){return W})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ve.Component=O,Ve.Fragment=n,Ve.Profiler=o,Ve.PureComponent=L,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(N){return K.H.useMemoCache(N)}},Ve.cache=function(N){return function(){return N.apply(null,arguments)}},Ve.cloneElement=function(N,W,ue){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=x({},N.props),ye=N.key,ge=void 0;if(W!=null)for(de in W.ref!==void 0&&(ge=void 0),W.key!==void 0&&(ye=""+W.key),W)!te.call(W,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&W.ref===void 0||(se[de]=W[de]);var de=arguments.length-2;if(de===1)se.children=ue;else if(1<de){for(var he=Array(de),pe=0;pe<de;pe++)he[pe]=arguments[pe+2];se.children=he}return I(N.type,ye,void 0,void 0,ge,se)},Ve.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ve.createElement=function(N,W,ue){var se,ye={},ge=null;if(W!=null)for(se in W.key!==void 0&&(ge=""+W.key),W)te.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ye[se]=W[se]);var de=arguments.length-2;if(de===1)ye.children=ue;else if(1<de){for(var he=Array(de),pe=0;pe<de;pe++)he[pe]=arguments[pe+2];ye.children=he}if(N&&N.defaultProps)for(se in de=N.defaultProps,de)ye[se]===void 0&&(ye[se]=de[se]);return I(N,ge,void 0,void 0,null,ye)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(N){return{$$typeof:m,render:N}},Ve.isValidElement=D,Ve.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:ie}},Ve.memo=function(N,W){return{$$typeof:g,type:N,compare:W===void 0?null:W}},Ve.startTransition=function(N){var W=K.T,ue={};K.T=ue;try{var se=N(),ye=K.S;ye!==null&&ye(ue,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(fe,H)}catch(ge){H(ge)}finally{K.T=W}},Ve.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ve.use=function(N){return K.H.use(N)},Ve.useActionState=function(N,W,ue){return K.H.useActionState(N,W,ue)},Ve.useCallback=function(N,W){return K.H.useCallback(N,W)},Ve.useContext=function(N){return K.H.useContext(N)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(N,W){return K.H.useDeferredValue(N,W)},Ve.useEffect=function(N,W,ue){var se=K.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(N,W)},Ve.useId=function(){return K.H.useId()},Ve.useImperativeHandle=function(N,W,ue){return K.H.useImperativeHandle(N,W,ue)},Ve.useInsertionEffect=function(N,W){return K.H.useInsertionEffect(N,W)},Ve.useLayoutEffect=function(N,W){return K.H.useLayoutEffect(N,W)},Ve.useMemo=function(N,W){return K.H.useMemo(N,W)},Ve.useOptimistic=function(N,W){return K.H.useOptimistic(N,W)},Ve.useReducer=function(N,W,ue){return K.H.useReducer(N,W,ue)},Ve.useRef=function(N){return K.H.useRef(N)},Ve.useState=function(N){return K.H.useState(N)},Ve.useSyncExternalStore=function(N,W,ue){return K.H.useSyncExternalStore(N,W,ue)},Ve.useTransition=function(){return K.H.useTransition()},Ve.version="19.1.0",Ve}var __;function rp(){return __||(__=1,um.exports=kb()),um.exports}var C=rp(),cm={exports:{}},jl={},hm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function jb(){return E_||(E_=1,function(r){function e(ne,ie){var H=ne.length;ne.push(ie);e:for(;0<H;){var fe=H-1>>>1,N=ne[fe];if(0<o(N,ie))ne[fe]=ie,ne[H]=N,H=fe;else break e}}function n(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ie=ne[0],H=ne.pop();if(H!==ie){ne[0]=H;e:for(var fe=0,N=ne.length,W=N>>>1;fe<W;){var ue=2*(fe+1)-1,se=ne[ue],ye=ue+1,ge=ne[ye];if(0>o(se,H))ye<N&&0>o(ge,se)?(ne[fe]=ge,ne[ye]=H,fe=ye):(ne[fe]=se,ne[ue]=H,fe=ue);else if(ye<N&&0>o(ge,H))ne[fe]=ge,ne[ye]=H,fe=ye;else break e}}return ie}function o(ne,ie){var H=ne.sortIndex-ie.sortIndex;return H!==0?H:ne.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,b=null,S=3,P=!1,x=!1,U=!1,O=!1,q=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Q(ne){for(var ie=n(g);ie!==null;){if(ie.callback===null)s(g);else if(ie.startTime<=ne)s(g),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=n(g)}}function K(ne){if(U=!1,Q(ne),!x)if(n(p)!==null)x=!0,te||(te=!0,z());else{var ie=n(g);ie!==null&&Ge(K,ie.startTime-ne)}}var te=!1,I=-1,R=5,D=-1;function k(){return O?!0:!(r.unstable_now()-D<R)}function j(){if(O=!1,te){var ne=r.unstable_now();D=ne;var ie=!0;try{e:{x=!1,U&&(U=!1,L(I),I=-1),P=!0;var H=S;try{t:{for(Q(ne),b=n(p);b!==null&&!(b.expirationTime>ne&&k());){var fe=b.callback;if(typeof fe=="function"){b.callback=null,S=b.priorityLevel;var N=fe(b.expirationTime<=ne);if(ne=r.unstable_now(),typeof N=="function"){b.callback=N,Q(ne),ie=!0;break t}b===n(p)&&s(p),Q(ne)}else s(p);b=n(p)}if(b!==null)ie=!0;else{var W=n(g);W!==null&&Ge(K,W.startTime-ne),ie=!1}}break e}finally{b=null,S=H,P=!1}ie=void 0}}finally{ie?z():te=!1}}}var z;if(typeof G=="function")z=function(){G(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,et=M.port2;M.port1.onmessage=j,z=function(){et.postMessage(null)}}else z=function(){q(j,0)};function Ge(ne,ie){I=q(function(){ne(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(ne){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var H=S;S=ie;try{return ne()}finally{S=H}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(ne,ie){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var H=S;S=ne;try{return ie()}finally{S=H}},r.unstable_scheduleCallback=function(ne,ie,H){var fe=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?fe+H:fe):H=fe,ne){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=H+N,ne={id:E++,callback:ie,priorityLevel:ne,startTime:H,expirationTime:N,sortIndex:-1},H>fe?(ne.sortIndex=H,e(g,ne),n(p)===null&&ne===n(g)&&(U?(L(I),I=-1):U=!0,Ge(K,H-fe))):(ne.sortIndex=N,e(p,ne),x||P||(x=!0,te||(te=!0,z()))),ne},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(ne){var ie=S;return function(){var H=S;S=ie;try{return ne.apply(this,arguments)}finally{S=H}}}}(fm)),fm}var T_;function Lb(){return T_||(T_=1,hm.exports=jb()),hm.exports}var dm={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function Ub(){if(S_)return un;S_=1;var r=rp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},un.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:P}):E==="script"&&s.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.1.0",un}var A_;function Bb(){if(A_)return dm.exports;A_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=Ub(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function zb(){if(b_)return jl;b_=1;var r=Lb(),e=rp(),n=Bb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var T=!1,A=h.child;A;){if(A===a){T=!0,a=h,l=d;break}if(A===l){T=!0,l=h,a=d;break}A=A.sibling}if(!T){for(A=d.child;A;){if(A===a){T=!0,a=d,l=h;break}if(A===l){T=!0,l=d,a=h;break}A=A.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case O:return"Profiler";case U:return"StrictMode";case K:return"Suspense";case te:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case G:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case Q:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:et(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return et(t(i))}catch{}}return null}var Ge=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},fe=[],N=-1;function W(t){return{current:t}}function ue(t){0>N||(t.current=fe[N],fe[N]=null,N--)}function se(t,i){N++,fe[N]=t.current,t.current=i}var ye=W(null),ge=W(null),de=W(null),he=W(null);function pe(t,i){switch(se(de,i),se(ge,t),se(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Fv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Fv(i),t=Gv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ye),se(ye,t)}function Ne(){ue(ye),ue(ge),ue(de)}function Te(t){t.memoizedState!==null&&se(he,t);var i=ye.current,a=Gv(i,t.type);i!==a&&(se(ge,t),se(ye,a))}function mt(t){ge.current===t&&(ue(ye),ue(ge)),he.current===t&&(ue(he),Nl._currentValue=H)}var jt=Object.prototype.hasOwnProperty,ut=r.unstable_scheduleCallback,ht=r.unstable_cancelCallback,Rn=r.unstable_shouldYield,an=r.unstable_requestPaint,Tt=r.unstable_now,jn=r.unstable_getCurrentPriorityLevel,En=r.unstable_ImmediatePriority,Ln=r.unstable_UserBlockingPriority,on=r.unstable_NormalPriority,Oe=r.unstable_LowPriority,ze=r.unstable_IdlePriority,Li=r.log,Un=r.unstable_setDisableYieldValue,ft=null,Ze=null;function mn(t){if(typeof Li=="function"&&Un(t),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ft,t)}catch{}}var Dt=Math.clz32?Math.clz32:ys,wu=Math.log,cf=Math.LN2;function ys(t){return t>>>=0,t===0?32:31-(wu(t)/cf|0)|0}var vs=256,_s=4194304;function ti(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function la(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~d,l!==0?h=ti(l):(T&=A,T!==0?h=ti(T):a||(a=A&~t,a!==0&&(h=ti(a))))):(A=l&~d,A!==0?h=ti(A):T!==0?h=ti(T):a||(a=l&~t,a!==0&&(h=ti(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Es(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function No(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var t=vs;return vs<<=1,(vs&4194048)===0&&(vs=256),t}function Mo(){var t=_s;return _s<<=1,(_s&62914560)===0&&(_s=4194304),t}function Ui(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Bi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vo(t,i,a,l,h,d){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,V=t.expirationTimes,X=t.hiddenUpdates;for(a=T&~a;0<a;){var re=31-Dt(a),oe=1<<re;A[re]=0,V[re]=-1;var Z=X[re];if(Z!==null)for(X[re]=null,re=0;re<Z.length;re++){var J=Z[re];J!==null&&(J.lane&=-536870913)}a&=~oe}l!==0&&pi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(T&~i))}function pi(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Dt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Po(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Dt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Er(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ua(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Tr(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:c_(t.type))}function Ru(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var vt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+vt,Nt="__reactProps$"+vt,Bn="__reactContainer$"+vt,ko="__reactEvents$"+vt,hf="__reactListeners$"+vt,Sr="__reactHandles$"+vt,Iu="__reactResources$"+vt,Ts="__reactMarker$"+vt;function Ar(t){delete t[Lt],delete t[Nt],delete t[ko],delete t[hf],delete t[Sr]}function zi(t){var i=t[Lt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Bn]||a[Lt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=$v(t);t!==null;){if(a=t[Lt])return a;t=$v(t)}return i}t=a,a=t.parentNode}return null}function gi(t){if(t=t[Lt]||t[Bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function yi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function pn(t){var i=t[Iu];return i||(i=t[Iu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(t){t[Ts]=!0}var jo=new Set,ca={};function ni(t,i){qi(t,i),qi(t+"Capture",i)}function qi(t,i){for(ca[t]=i,t=0;t<i.length;t++)jo.add(i[t])}var Cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},Ss={};function Du(t){return jt.call(Ss,t)?!0:jt.call(xu,t)?!1:Cu.test(t)?Ss[t]=!0:(xu[t]=!0,!1)}function br(t,i,a){if(Du(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function vi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Wt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var As,Nu;function Hi(t){if(As===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);As=i&&i[1]||"",Nu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+t+Nu}var ha=!1;function fa(t,i){if(!t||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var Z=J}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(J){Z=J}t.call(oe.prototype)}}else{try{throw Error()}catch(J){Z=J}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),T=d[0],A=d[1];if(T&&A){var V=T.split(`
`),X=A.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===X.length)for(l=V.length-1,h=X.length-1;1<=l&&0<=h&&V[l]!==X[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==X[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==X[h]){var re=`
`+V[l].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=l&&0<=h);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Hi(a):""}function Lo(t){switch(t.tag){case 26:case 27:case 5:return Hi(t.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return fa(t.type,!1);case 11:return fa(t.type.render,!1);case 1:return fa(t.type,!0);case 31:return Hi("Activity");default:return""}}function da(t){try{var i="";do i+=Lo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ff(t){var i=Uo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(T){l=""+T,d.call(this,T)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ma(t){t._valueTracker||(t._valueTracker=ff(t))}function Bo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function bs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var df=/[\n"\\]/g;function Ot(t){return t.replace(df,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function In(t,i,a,l,h,d,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+gn(i)):t.value!==""+gn(i)&&(t.value=""+gn(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?wr(t,T,gn(i)):a!=null?wr(t,T,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+gn(A):t.removeAttribute("name")}function ws(t,i,a,l,h,d,T,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+gn(a):"",i=i!=null?""+gn(i):a,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function wr(t,i,a){i==="number"&&bs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Fi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function st(t,i,a){if(i!=null&&(i=""+gn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+gn(a):""}function Rs(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ge(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=gn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Is.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function zo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ou(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Ou(t,d,i[d])}function qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(t){return pf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Gi=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ki=null,Qi=null;function Ho(t){var i=gi(t);if(i&&(t=i.stateNode)){var a=t[Nt]||null;e:switch(t=i.stateNode,i.type){case"input":if(In(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ot(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Nt]||null;if(!h)throw Error(s(90));In(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Bo(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Fi(t,!!a.multiple,i,!1)}}}var _i=!1;function Mu(t,i,a){if(_i)return t(i,a);_i=!0;try{var l=t(i);return l}finally{if(_i=!1,(Ki!==null||Qi!==null)&&(Rc(),Ki&&(i=Ki,t=Qi,Qi=Ki=null,Ho(i),t)))for(i=0;i<t.length;i++)Ho(t[i])}}function Cs(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Nt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(ii)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{Hn=!1}var Ei=null,Rr=null,Yi=null;function Fo(){if(Yi)return Yi;var t,i=Rr,a=i.length,l,h="value"in Ei?Ei.value:Ei.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&i[a-l]===h[d-l];l++);return Yi=h.slice(t,1<l?1-l:void 0)}function Ti(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Si(){return!0}function Go(){return!1}function Ft(t){function i(a,l,h,d,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Si:Go,this.isPropagationStopped=Go,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),i}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=Ft(tt),Ds=E({},tt,{view:0,detail:0}),Vu=Ft(Ds),ya,va,Ai,Ns=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(ya=t.screenX-Ai.screenX,va=t.screenY-Ai.screenY):va=ya=0,Ai=t),ya)},movementY:function(t){return"movementY"in t?t.movementY:va}}),Fn=Ft(Ns),Pu=E({},Ns,{dataTransfer:0}),gf=Ft(Pu),Os=E({},Ds,{relatedTarget:0}),_a=Ft(Os),Ko=E({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ea=Ft(Ko),ku=E({},tt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ta=Ft(ku),yf=E({},tt,{data:0}),Qo=Ft(yf),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Lu[t])?!!i[t]:!1}function Vs(){return Yo}var Uu=E({},Ds,{key:function(t){if(t.key){var i=Ms[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?Ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sa=Ft(Uu),Bu=E({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=Ft(Bu),$i=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),zu=Ft($i),qu=E({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hu=Ft(qu),Fu=E({},Ns,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Aa=Ft(Fu),yn=E({},tt,{newState:0,oldState:0}),Gu=Ft(yn),Ku=[9,13,27,32],bi=ii&&"CompositionEvent"in window,c=null;ii&&"documentMode"in document&&(c=document.documentMode);var y=ii&&"TextEvent"in window&&!c,_=ii&&(!bi||c&&8<c&&11>=c),w=" ",Y=!1;function ee(t,i){switch(t){case"keyup":return Ku.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ke=!1;function Ut(t,i){switch(t){case"compositionend":return me(i);case"keypress":return i.which!==32?null:(Y=!0,w);case"textInput":return t=i.data,t===w&&Y?null:t;default:return null}}function Qe(t,i){if(Ke)return t==="compositionend"||!bi&&ee(t,i)?(t=Fo(),Yi=Rr=Ei=null,Ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Gt[t.type]:i==="textarea"}function Xi(t,i,a,l){Ki?Qi?Qi.push(l):Qi=[l]:Ki=l,i=Oc(i,"onChange"),0<i.length&&(a=new ga("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Zt=null,wi=null;function Xo(t){Uv(t,0)}function Qu(t){var i=yi(t);if(Bo(i))return t}function ag(t,i){if(t==="change")return i}var og=!1;if(ii){var vf;if(ii){var _f="oninput"in document;if(!_f){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),_f=typeof lg.oninput=="function"}vf=_f}else vf=!1;og=vf&&(!document.documentMode||9<document.documentMode)}function ug(){Zt&&(Zt.detachEvent("onpropertychange",cg),wi=Zt=null)}function cg(t){if(t.propertyName==="value"&&Qu(wi)){var i=[];Xi(i,wi,t,qn(t)),Mu(Xo,i)}}function cA(t,i,a){t==="focusin"?(ug(),Zt=i,wi=a,Zt.attachEvent("onpropertychange",cg)):t==="focusout"&&ug()}function hA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qu(wi)}function fA(t,i){if(t==="click")return Qu(i)}function dA(t,i){if(t==="input"||t==="change")return Qu(i)}function mA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Cn=typeof Object.is=="function"?Object.is:mA;function Wo(t,i){if(Cn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!jt.call(i,h)||!Cn(t[h],i[h]))return!1}return!0}function hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fg(t,i){var a=hg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hg(a)}}function dg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?dg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bs(t.document)}return i}function Ef(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var pA=ii&&"documentMode"in document&&11>=document.documentMode,ba=null,Tf=null,Zo=null,Sf=!1;function pg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sf||ba==null||ba!==bs(l)||(l=ba,"selectionStart"in l&&Ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Zo&&Wo(Zo,l)||(Zo=l,l=Oc(Tf,"onSelect"),0<l.length&&(i=new ga("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ba)))}function Ps(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var wa={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Af={},gg={};ii&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function ks(t){if(Af[t])return Af[t];if(!wa[t])return t;var i=wa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in gg)return Af[t]=i[a];return t}var yg=ks("animationend"),vg=ks("animationiteration"),_g=ks("animationstart"),gA=ks("transitionrun"),yA=ks("transitionstart"),vA=ks("transitioncancel"),Eg=ks("transitionend"),Tg=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function ri(t,i){Tg.set(t,i),ni(i,[t])}var Sg=new WeakMap;function Gn(t,i){if(typeof t=="object"&&t!==null){var a=Sg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:da(i)},Sg.set(t,i),i)}return{value:t,source:i,stack:da(i)}}var Kn=[],Ra=0,wf=0;function Yu(){for(var t=Ra,i=wf=Ra=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}d!==0&&Ag(a,h,d)}}function $u(t,i,a,l){Kn[Ra++]=t,Kn[Ra++]=i,Kn[Ra++]=a,Kn[Ra++]=l,wf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rf(t,i,a,l){return $u(t,i,a,l),Xu(t)}function Ia(t,i){return $u(t,null,null,i),Xu(t)}function Ag(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Dt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Xu(t){if(50<Al)throw Al=0,Od=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ca={};function _A(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,i,a,l){return new _A(t,i,a,l)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wi(t,i){var a=t.alternate;return a===null?(a=xn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function bg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Wu(t,i,a,l,h,d){var T=0;if(l=t,typeof t=="function")If(t)&&(T=1);else if(typeof t=="string")T=Tb(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=xn(31,a,i,h),t.elementType=D,t.lanes=d,t;case x:return js(a.children,h,d,i);case U:T=8,h|=24;break;case O:return t=xn(12,a,i,h|2),t.elementType=O,t.lanes=d,t;case K:return t=xn(13,a,i,h),t.elementType=K,t.lanes=d,t;case te:return t=xn(19,a,i,h),t.elementType=te,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:case G:T=10;break e;case L:T=9;break e;case Q:T=11;break e;case I:T=14;break e;case R:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=xn(T,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function js(t,i,a,l){return t=xn(7,t,l,i),t.lanes=a,t}function Cf(t,i,a){return t=xn(6,t,null,i),t.lanes=a,t}function xf(t,i,a){return i=xn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var xa=[],Da=0,Zu=null,Ju=0,Qn=[],Yn=0,Ls=null,Zi=1,Ji="";function Us(t,i){xa[Da++]=Ju,xa[Da++]=Zu,Zu=t,Ju=i}function wg(t,i,a){Qn[Yn++]=Zi,Qn[Yn++]=Ji,Qn[Yn++]=Ls,Ls=t;var l=Zi;t=Ji;var h=32-Dt(l)-1;l&=~(1<<h),a+=1;var d=32-Dt(i)+h;if(30<d){var T=h-h%5;d=(l&(1<<T)-1).toString(32),l>>=T,h-=T,Zi=1<<32-Dt(i)+h|a<<h|l,Ji=d+t}else Zi=1<<d|a<<h|l,Ji=t}function Df(t){t.return!==null&&(Us(t,1),wg(t,1,0))}function Nf(t){for(;t===Zu;)Zu=xa[--Da],xa[Da]=null,Ju=xa[--Da],xa[Da]=null;for(;t===Ls;)Ls=Qn[--Yn],Qn[Yn]=null,Ji=Qn[--Yn],Qn[Yn]=null,Zi=Qn[--Yn],Qn[Yn]=null}var vn=null,bt=null,Je=!1,Bs=null,Ri=!1,Of=Error(s(519));function zs(t){var i=Error(s(418,""));throw tl(Gn(i,t)),Of}function Rg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Lt]=t,i[Nt]=l,a){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(a=0;a<wl.length;a++)Ue(wl[a],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),ws(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ma(i);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),Rs(i,l.value,l.defaultValue,l.children),ma(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Hv(i.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),l.onScroll!=null&&Ue("scroll",i),l.onScrollEnd!=null&&Ue("scrollend",i),l.onClick!=null&&(i.onclick=Mc),i=!0):i=!1,i||zs(t)}function Ig(t){for(vn=t.return;vn;)switch(vn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:vn=vn.return}}function Jo(t){if(t!==vn)return!1;if(!Je)return Ig(t),Je=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Yd(t.type,t.memoizedProps)),a=!a),a&&bt&&zs(t),Ig(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){bt=ai(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}bt=null}}else i===27?(i=bt,qr(t.type)?(t=Zd,Zd=null,bt=t):bt=i):bt=vn?ai(t.stateNode.nextSibling):null;return!0}function el(){bt=vn=null,Je=!1}function Cg(){var t=Bs;return t!==null&&(An===null?An=t:An.push.apply(An,t),Bs=null),t}function tl(t){Bs===null?Bs=[t]:Bs.push(t)}var Mf=W(null),qs=null,er=null;function Ir(t,i,a){se(Mf,i._currentValue),i._currentValue=a}function tr(t){t._currentValue=Mf.current,ue(Mf)}function Vf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Pf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var T=h.child;d=d.firstContext;e:for(;d!==null;){var A=d;d=h;for(var V=0;V<i.length;V++)if(A.context===i[V]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),Vf(d.return,a,t),l||(T=null);break e}d=A.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,d=T.alternate,d!==null&&(d.lanes|=a),Vf(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function nl(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=h.type;Cn(h.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(h===he.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}h=h.return}t!==null&&Pf(i,t,a,l),i.flags|=262144}function ec(t){for(t=t.firstContext;t!==null;){if(!Cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hs(t){qs=t,er=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return xg(qs,t)}function tc(t,i){return qs===null&&Hs(t),xg(t,i)}function xg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},er===null){if(t===null)throw Error(s(308));er=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else er=er.next=i;return a}var EA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},TA=r.unstable_scheduleCallback,SA=r.unstable_NormalPriority,zt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kf(){return{controller:new EA,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&TA(SA,function(){t.controller.abort()})}var rl=null,jf=0,Na=0,Oa=null;function AA(t,i){if(rl===null){var a=rl=[];jf=0,Na=Ud(),Oa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jf++,i.then(Dg,Dg),i}function Dg(){if(--jf===0&&rl!==null){Oa!==null&&(Oa.status="fulfilled");var t=rl;rl=null,Na=0,Oa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function bA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ng=ne.S;ne.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&AA(t,i),Ng!==null&&Ng(t,i)};var Fs=W(null);function Lf(){var t=Fs.current;return t!==null?t:dt.pooledCache}function nc(t,i){i===null?se(Fs,Fs.current):se(Fs,i.pool)}function Og(){var t=Lf();return t===null?null:{parent:zt._currentValue,pool:t}}var sl=Error(s(460)),Mg=Error(s(474)),ic=Error(s(542)),Uf={then:function(){}};function Vg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function rc(){}function Pg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(rc,rc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,jg(t),t;default:if(typeof i.status=="string")i.then(rc,rc);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,jg(t),t}throw al=i,sl}}var al=null;function kg(){if(al===null)throw Error(s(459));var t=al;return al=null,t}function jg(t){if(t===sl||t===ic)throw Error(s(483))}var Cr=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Xu(t),Ag(t,null,a),i}return $u(t,l,i,a),Xu(t)}function ol(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Po(t,a)}}function qf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=T:d=d.next=T,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Hf=!1;function ll(){if(Hf){var t=Oa;if(t!==null)throw t}}function ul(t,i,a,l){Hf=!1;var h=t.updateQueue;Cr=!1;var d=h.firstBaseUpdate,T=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var V=A,X=V.next;V.next=null,T===null?d=X:T.next=X,T=V;var re=t.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==T&&(A===null?re.firstBaseUpdate=X:A.next=X,re.lastBaseUpdate=V))}if(d!==null){var oe=h.baseState;T=0,re=X=V=null,A=d;do{var Z=A.lane&-536870913,J=Z!==A.lane;if(J?(Ye&Z)===Z:(l&Z)===Z){Z!==0&&Z===Na&&(Hf=!0),re!==null&&(re=re.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var xe=t,we=A;Z=i;var lt=a;switch(we.tag){case 1:if(xe=we.payload,typeof xe=="function"){oe=xe.call(lt,oe,Z);break e}oe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=we.payload,Z=typeof xe=="function"?xe.call(lt,oe,Z):xe,Z==null)break e;oe=E({},oe,Z);break e;case 2:Cr=!0}}Z=A.callback,Z!==null&&(t.flags|=64,J&&(t.flags|=8192),J=h.callbacks,J===null?h.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(X=re=J,V=oe):re=re.next=J,T|=Z;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;J=A,A=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);re===null&&(V=oe),h.baseState=V,h.firstBaseUpdate=X,h.lastBaseUpdate=re,d===null&&(h.shared.lanes=0),Lr|=T,t.lanes=T,t.memoizedState=oe}}function Lg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Ug(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],i)}var Ma=W(null),sc=W(0);function Bg(t,i){t=lr,se(sc,t),se(Ma,i),lr=t|i.baseLanes}function Ff(){se(sc,lr),se(Ma,Ma.current)}function Gf(){lr=sc.current,ue(Ma),ue(sc)}var Nr=0,Pe=null,at=null,Mt=null,ac=!1,Va=!1,Gs=!1,oc=0,cl=0,Pa=null,wA=0;function It(){throw Error(s(321))}function Kf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Cn(t[a],i[a]))return!1;return!0}function Qf(t,i,a,l,h,d){return Nr=d,Pe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ne.H=t===null||t.memoizedState===null?Ay:by,Gs=!1,d=a(l,h),Gs=!1,Va&&(d=qg(i,a,l,h)),zg(t),d}function zg(t){ne.H=dc;var i=at!==null&&at.next!==null;if(Nr=0,Mt=at=Pe=null,ac=!1,cl=0,Pa=null,i)throw Error(s(300));t===null||Kt||(t=t.dependencies,t!==null&&ec(t)&&(Kt=!0))}function qg(t,i,a,l){Pe=t;var h=0;do{if(Va&&(Pa=null),cl=0,Va=!1,25<=h)throw Error(s(301));if(h+=1,Mt=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ne.H=OA,d=i(a,l)}while(Va);return d}function RA(){var t=ne.H,i=t.useState()[0];return i=typeof i.then=="function"?hl(i):i,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Pe.flags|=1024),i}function Yf(){var t=oc!==0;return oc=0,t}function $f(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Xf(t){if(ac){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ac=!1}Nr=0,Mt=at=Pe=null,Va=!1,cl=oc=0,Pa=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Pe.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Vt(){if(at===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var i=Mt===null?Pe.memoizedState:Mt.next;if(i!==null)Mt=i,at=t;else{if(t===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Mt===null?Pe.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hl(t){var i=cl;return cl+=1,Pa===null&&(Pa=[]),t=Pg(Pa,t,i),i=Pe,(Mt===null?i.memoizedState:Mt.next)===null&&(i=i.alternate,ne.H=i===null||i.memoizedState===null?Ay:by),t}function lc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hl(t);if(t.$$typeof===G)return ln(t)}throw Error(s(438,String(t)))}function Zf(t){var i=null,a=Pe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wf(),Pe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=k;return i.index++,a}function nr(t,i){return typeof i=="function"?i(t):i}function uc(t){var i=Vt();return Jf(i,at,t)}function Jf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var T=h.next;h.next=d.next,d.next=T}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var A=T=null,V=null,X=i,re=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(Ye&oe)===oe:(Nr&oe)===oe){var Z=X.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===Na&&(re=!0);else if((Nr&Z)===Z){X=X.next,Z===Na&&(re=!0);continue}else oe={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(A=V=oe,T=d):V=V.next=oe,Pe.lanes|=Z,Lr|=Z;oe=X.action,Gs&&a(d,oe),d=X.hasEagerState?X.eagerState:a(d,oe)}else Z={lane:oe,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(A=V=Z,T=d):V=V.next=Z,Pe.lanes|=oe,Lr|=oe;X=X.next}while(X!==null&&X!==i);if(V===null?T=d:V.next=A,!Cn(d,t.memoizedState)&&(Kt=!0,re&&(a=Oa,a!==null)))throw a;t.memoizedState=d,t.baseState=T,t.baseQueue=V,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ed(t){var i=Vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do d=t(d,T.action),T=T.next;while(T!==h);Cn(d,i.memoizedState)||(Kt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Hg(t,i,a){var l=Pe,h=Vt(),d=Je;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var T=!Cn((at||h).memoizedState,a);T&&(h.memoizedState=a,Kt=!0),h=h.queue;var A=Kg.bind(null,l,h,t);if(fl(2048,8,A,[t]),h.getSnapshot!==i||T||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,ka(9,cc(),Gg.bind(null,l,h,a,i),null),dt===null)throw Error(s(349));d||(Nr&124)!==0||Fg(l,i,a)}return a}function Fg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Pe.updateQueue,i===null?(i=Wf(),Pe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Gg(t,i,a,l){i.value=a,i.getSnapshot=l,Qg(i)&&Yg(t)}function Kg(t,i,a){return a(function(){Qg(i)&&Yg(t)})}function Qg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Cn(t,a)}catch{return!0}}function Yg(t){var i=Ia(t,2);i!==null&&Vn(i,t,2)}function td(t){var i=Tn();if(typeof t=="function"){var a=t;if(t=a(),Gs){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:t},i}function $g(t,i,a,l){return t.baseState=a,Jf(t,at,typeof l=="function"?l:nr)}function IA(t,i,a,l,h){if(fc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){d.listeners.push(T)}};ne.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Xg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Xg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=ne.T,T={};ne.T=T;try{var A=a(h,l),V=ne.S;V!==null&&V(T,A),Wg(t,i,A)}catch(X){nd(t,i,X)}finally{ne.T=d}}else try{d=a(h,l),Wg(t,i,d)}catch(X){nd(t,i,X)}}function Wg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zg(t,i,l)},function(l){return nd(t,i,l)}):Zg(t,i,a)}function Zg(t,i,a){i.status="fulfilled",i.value=a,Jg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Xg(t,a)))}function nd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Jg(i),i=i.next;while(i!==l)}t.action=null}function Jg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ey(t,i){return i}function ty(t,i){if(Je){var a=dt.formState;if(a!==null){e:{var l=Pe;if(Je){if(bt){t:{for(var h=bt,d=Ri;h.nodeType!==8;){if(!d){h=null;break t}if(h=ai(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){bt=ai(h.nextSibling),l=h.data==="F!";break e}}zs(l)}l=!1}l&&(i=a[0])}}return a=Tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:i},a.queue=l,a=Ey.bind(null,Pe,l),l.dispatch=a,l=td(!1),d=od.bind(null,Pe,!1,l.queue),l=Tn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=IA.bind(null,Pe,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ny(t){var i=Vt();return iy(i,at,t)}function iy(t,i,a){if(i=Jf(t,i,ey)[0],t=uc(nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=hl(i)}catch(T){throw T===sl?ic:T}else l=i;i=Vt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Pe.flags|=2048,ka(9,cc(),CA.bind(null,h,a),null)),[l,d,t]}function CA(t,i){t.action=i}function ry(t){var i=Vt(),a=at;if(a!==null)return iy(i,a,t);Vt(),i=i.memoizedState,a=Vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ka(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Pe.updateQueue,i===null&&(i=Wf(),Pe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function cc(){return{destroy:void 0,resource:void 0}}function sy(){return Vt().memoizedState}function hc(t,i,a,l){var h=Tn();l=l===void 0?null:l,Pe.flags|=t,h.memoizedState=ka(1|i,cc(),a,l)}function fl(t,i,a,l){var h=Vt();l=l===void 0?null:l;var d=h.memoizedState.inst;at!==null&&l!==null&&Kf(l,at.memoizedState.deps)?h.memoizedState=ka(i,d,a,l):(Pe.flags|=t,h.memoizedState=ka(1|i,d,a,l))}function ay(t,i){hc(8390656,8,t,i)}function oy(t,i){fl(2048,8,t,i)}function ly(t,i){return fl(4,2,t,i)}function uy(t,i){return fl(4,4,t,i)}function cy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function hy(t,i,a){a=a!=null?a.concat([t]):null,fl(4,4,cy.bind(null,i,t),a)}function id(){}function fy(t,i){var a=Vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Kf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function dy(t,i){var a=Vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Kf(i,l[1]))return l[0];if(l=t(),Gs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function rd(t,i,a){return a===void 0||(Nr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=gv(),Pe.lanes|=t,Lr|=t,a)}function my(t,i,a,l){return Cn(a,i)?a:Ma.current!==null?(t=rd(t,a,l),Cn(t,i)||(Kt=!0),t):(Nr&42)===0?(Kt=!0,t.memoizedState=a):(t=gv(),Pe.lanes|=t,Lr|=t,i)}function py(t,i,a,l,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var T=ne.T,A={};ne.T=A,od(t,!1,i,a);try{var V=h(),X=ne.S;if(X!==null&&X(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var re=bA(V,l);dl(t,i,re,Mn(t))}else dl(t,i,l,Mn(t))}catch(oe){dl(t,i,{then:function(){},status:"rejected",reason:oe},Mn())}finally{ie.p=d,ne.T=T}}function xA(){}function sd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=gy(t).queue;py(t,h,i,H,a===null?xA:function(){return yy(t),a(l)})}function gy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:H},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function yy(t){var i=gy(t).next.queue;dl(t,i,{},Mn())}function ad(){return ln(Nl)}function vy(){return Vt().memoizedState}function _y(){return Vt().memoizedState}function DA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();t=xr(a);var l=Dr(i,t,a);l!==null&&(Vn(l,i,a),ol(l,i,a)),i={cache:kf()},t.payload=i;return}i=i.return}}function NA(t,i,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},fc(t)?Ty(i,a):(a=Rf(t,i,a,l),a!==null&&(Vn(a,t,l),Sy(a,i,l)))}function Ey(t,i,a){var l=Mn();dl(t,i,a,l)}function dl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(fc(t))Ty(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var T=i.lastRenderedState,A=d(T,a);if(h.hasEagerState=!0,h.eagerState=A,Cn(A,T))return $u(t,i,h,0),dt===null&&Yu(),!1}catch{}finally{}if(a=Rf(t,i,h,l),a!==null)return Vn(a,t,l),Sy(a,i,l),!0}return!1}function od(t,i,a,l){if(l={lane:2,revertLane:Ud(),action:l,hasEagerState:!1,eagerState:null,next:null},fc(t)){if(i)throw Error(s(479))}else i=Rf(t,a,l,2),i!==null&&Vn(i,t,2)}function fc(t){var i=t.alternate;return t===Pe||i!==null&&i===Pe}function Ty(t,i){Va=ac=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Sy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Po(t,a)}}var dc={readContext:ln,use:lc,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},Ay={readContext:ln,use:lc,useCallback:function(t,i){return Tn().memoizedState=[t,i===void 0?null:i],t},useContext:ln,useEffect:ay,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,hc(4194308,4,cy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return hc(4194308,4,t,i)},useInsertionEffect:function(t,i){hc(4,2,t,i)},useMemo:function(t,i){var a=Tn();i=i===void 0?null:i;var l=t();if(Gs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Tn();if(a!==void 0){var h=a(i);if(Gs){mn(!0);try{a(i)}finally{mn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=NA.bind(null,Pe,t),[l.memoizedState,t]},useRef:function(t){var i=Tn();return t={current:t},i.memoizedState=t},useState:function(t){t=td(t);var i=t.queue,a=Ey.bind(null,Pe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:id,useDeferredValue:function(t,i){var a=Tn();return rd(a,t,i)},useTransition:function(){var t=td(!1);return t=py.bind(null,Pe,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Pe,h=Tn();if(Je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),dt===null)throw Error(s(349));(Ye&124)!==0||Fg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ay(Kg.bind(null,l,d,t),[t]),l.flags|=2048,ka(9,cc(),Gg.bind(null,l,d,a,i),null),a},useId:function(){var t=Tn(),i=dt.identifierPrefix;if(Je){var a=Ji,l=Zi;a=(l&~(1<<32-Dt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=oc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=wA++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:ad,useFormState:ty,useActionState:ty,useOptimistic:function(t){var i=Tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=od.bind(null,Pe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Zf,useCacheRefresh:function(){return Tn().memoizedState=DA.bind(null,Pe)}},by={readContext:ln,use:lc,useCallback:fy,useContext:ln,useEffect:oy,useImperativeHandle:hy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:dy,useReducer:uc,useRef:sy,useState:function(){return uc(nr)},useDebugValue:id,useDeferredValue:function(t,i){var a=Vt();return my(a,at.memoizedState,t,i)},useTransition:function(){var t=uc(nr)[0],i=Vt().memoizedState;return[typeof t=="boolean"?t:hl(t),i]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:ad,useFormState:ny,useActionState:ny,useOptimistic:function(t,i){var a=Vt();return $g(a,at,t,i)},useMemoCache:Zf,useCacheRefresh:_y},OA={readContext:ln,use:lc,useCallback:fy,useContext:ln,useEffect:oy,useImperativeHandle:hy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:dy,useReducer:ed,useRef:sy,useState:function(){return ed(nr)},useDebugValue:id,useDeferredValue:function(t,i){var a=Vt();return at===null?rd(a,t,i):my(a,at.memoizedState,t,i)},useTransition:function(){var t=ed(nr)[0],i=Vt().memoizedState;return[typeof t=="boolean"?t:hl(t),i]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:ad,useFormState:ry,useActionState:ry,useOptimistic:function(t,i){var a=Vt();return at!==null?$g(a,at,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:_y},ja=null,ml=0;function mc(t){var i=ml;return ml+=1,ja===null&&(ja=[]),Pg(ja,t,i)}function pl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function pc(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function wy(t){var i=t._init;return i(t._payload)}function Ry(t){function i(F,B){if(t){var $=F.deletions;$===null?(F.deletions=[B],F.flags|=16):$.push(B)}}function a(F,B){if(!t)return null;for(;B!==null;)i(F,B),B=B.sibling;return null}function l(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function h(F,B){return F=Wi(F,B),F.index=0,F.sibling=null,F}function d(F,B,$){return F.index=$,t?($=F.alternate,$!==null?($=$.index,$<B?(F.flags|=67108866,B):$):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function T(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function A(F,B,$,ae){return B===null||B.tag!==6?(B=Cf($,F.mode,ae),B.return=F,B):(B=h(B,$),B.return=F,B)}function V(F,B,$,ae){var Ee=$.type;return Ee===x?re(F,B,$.props.children,ae,$.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&wy(Ee)===B.type)?(B=h(B,$.props),pl(B,$),B.return=F,B):(B=Wu($.type,$.key,$.props,null,F.mode,ae),pl(B,$),B.return=F,B)}function X(F,B,$,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=xf($,F.mode,ae),B.return=F,B):(B=h(B,$.children||[]),B.return=F,B)}function re(F,B,$,ae,Ee){return B===null||B.tag!==7?(B=js($,F.mode,ae,Ee),B.return=F,B):(B=h(B,$),B.return=F,B)}function oe(F,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Cf(""+B,F.mode,$),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return $=Wu(B.type,B.key,B.props,null,F.mode,$),pl($,B),$.return=F,$;case P:return B=xf(B,F.mode,$),B.return=F,B;case R:var ae=B._init;return B=ae(B._payload),oe(F,B,$)}if(Ge(B)||z(B))return B=js(B,F.mode,$,null),B.return=F,B;if(typeof B.then=="function")return oe(F,mc(B),$);if(B.$$typeof===G)return oe(F,tc(F,B),$);pc(F,B)}return null}function Z(F,B,$,ae){var Ee=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ee!==null?null:A(F,B,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===Ee?V(F,B,$,ae):null;case P:return $.key===Ee?X(F,B,$,ae):null;case R:return Ee=$._init,$=Ee($._payload),Z(F,B,$,ae)}if(Ge($)||z($))return Ee!==null?null:re(F,B,$,ae,null);if(typeof $.then=="function")return Z(F,B,mc($),ae);if($.$$typeof===G)return Z(F,B,tc(F,$),ae);pc(F,$)}return null}function J(F,B,$,ae,Ee){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return F=F.get($)||null,A(B,F,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return F=F.get(ae.key===null?$:ae.key)||null,V(B,F,ae,Ee);case P:return F=F.get(ae.key===null?$:ae.key)||null,X(B,F,ae,Ee);case R:var je=ae._init;return ae=je(ae._payload),J(F,B,$,ae,Ee)}if(Ge(ae)||z(ae))return F=F.get($)||null,re(B,F,ae,Ee,null);if(typeof ae.then=="function")return J(F,B,$,mc(ae),Ee);if(ae.$$typeof===G)return J(F,B,$,tc(B,ae),Ee);pc(B,ae)}return null}function xe(F,B,$,ae){for(var Ee=null,je=null,Ae=B,Re=B=0,Yt=null;Ae!==null&&Re<$.length;Re++){Ae.index>Re?(Yt=Ae,Ae=null):Yt=Ae.sibling;var Xe=Z(F,Ae,$[Re],ae);if(Xe===null){Ae===null&&(Ae=Yt);break}t&&Ae&&Xe.alternate===null&&i(F,Ae),B=d(Xe,B,Re),je===null?Ee=Xe:je.sibling=Xe,je=Xe,Ae=Yt}if(Re===$.length)return a(F,Ae),Je&&Us(F,Re),Ee;if(Ae===null){for(;Re<$.length;Re++)Ae=oe(F,$[Re],ae),Ae!==null&&(B=d(Ae,B,Re),je===null?Ee=Ae:je.sibling=Ae,je=Ae);return Je&&Us(F,Re),Ee}for(Ae=l(Ae);Re<$.length;Re++)Yt=J(Ae,F,Re,$[Re],ae),Yt!==null&&(t&&Yt.alternate!==null&&Ae.delete(Yt.key===null?Re:Yt.key),B=d(Yt,B,Re),je===null?Ee=Yt:je.sibling=Yt,je=Yt);return t&&Ae.forEach(function(Qr){return i(F,Qr)}),Je&&Us(F,Re),Ee}function we(F,B,$,ae){if($==null)throw Error(s(151));for(var Ee=null,je=null,Ae=B,Re=B=0,Yt=null,Xe=$.next();Ae!==null&&!Xe.done;Re++,Xe=$.next()){Ae.index>Re?(Yt=Ae,Ae=null):Yt=Ae.sibling;var Qr=Z(F,Ae,Xe.value,ae);if(Qr===null){Ae===null&&(Ae=Yt);break}t&&Ae&&Qr.alternate===null&&i(F,Ae),B=d(Qr,B,Re),je===null?Ee=Qr:je.sibling=Qr,je=Qr,Ae=Yt}if(Xe.done)return a(F,Ae),Je&&Us(F,Re),Ee;if(Ae===null){for(;!Xe.done;Re++,Xe=$.next())Xe=oe(F,Xe.value,ae),Xe!==null&&(B=d(Xe,B,Re),je===null?Ee=Xe:je.sibling=Xe,je=Xe);return Je&&Us(F,Re),Ee}for(Ae=l(Ae);!Xe.done;Re++,Xe=$.next())Xe=J(Ae,F,Re,Xe.value,ae),Xe!==null&&(t&&Xe.alternate!==null&&Ae.delete(Xe.key===null?Re:Xe.key),B=d(Xe,B,Re),je===null?Ee=Xe:je.sibling=Xe,je=Xe);return t&&Ae.forEach(function(Mb){return i(F,Mb)}),Je&&Us(F,Re),Ee}function lt(F,B,$,ae){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var Ee=$.key;B!==null;){if(B.key===Ee){if(Ee=$.type,Ee===x){if(B.tag===7){a(F,B.sibling),ae=h(B,$.props.children),ae.return=F,F=ae;break e}}else if(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&wy(Ee)===B.type){a(F,B.sibling),ae=h(B,$.props),pl(ae,$),ae.return=F,F=ae;break e}a(F,B);break}else i(F,B);B=B.sibling}$.type===x?(ae=js($.props.children,F.mode,ae,$.key),ae.return=F,F=ae):(ae=Wu($.type,$.key,$.props,null,F.mode,ae),pl(ae,$),ae.return=F,F=ae)}return T(F);case P:e:{for(Ee=$.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){a(F,B.sibling),ae=h(B,$.children||[]),ae.return=F,F=ae;break e}else{a(F,B);break}else i(F,B);B=B.sibling}ae=xf($,F.mode,ae),ae.return=F,F=ae}return T(F);case R:return Ee=$._init,$=Ee($._payload),lt(F,B,$,ae)}if(Ge($))return xe(F,B,$,ae);if(z($)){if(Ee=z($),typeof Ee!="function")throw Error(s(150));return $=Ee.call($),we(F,B,$,ae)}if(typeof $.then=="function")return lt(F,B,mc($),ae);if($.$$typeof===G)return lt(F,B,tc(F,$),ae);pc(F,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(a(F,B.sibling),ae=h(B,$),ae.return=F,F=ae):(a(F,B),ae=Cf($,F.mode,ae),ae.return=F,F=ae),T(F)):a(F,B)}return function(F,B,$,ae){try{ml=0;var Ee=lt(F,B,$,ae);return ja=null,Ee}catch(Ae){if(Ae===sl||Ae===ic)throw Ae;var je=xn(29,Ae,null,F.mode);return je.lanes=ae,je.return=F,je}finally{}}}var La=Ry(!0),Iy=Ry(!1),$n=W(null),Ii=null;function Or(t){var i=t.alternate;se(qt,qt.current&1),se($n,t),Ii===null&&(i===null||Ma.current!==null||i.memoizedState!==null)&&(Ii=t)}function Cy(t){if(t.tag===22){if(se(qt,qt.current),se($n,t),Ii===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Ii=t)}}else Mr()}function Mr(){se(qt,qt.current),se($n,$n.current)}function ir(t){ue($n),Ii===t&&(Ii=null),ue(qt)}var qt=W(0);function gc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Wd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function ld(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ud={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=xr(l);h.payload=i,a!=null&&(h.callback=a),i=Dr(t,h,l),i!==null&&(Vn(i,t,l),ol(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=xr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Dr(t,h,l),i!==null&&(Vn(i,t,l),ol(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Mn(),l=xr(a);l.tag=2,i!=null&&(l.callback=i),i=Dr(t,l,a),i!==null&&(Vn(i,t,a),ol(i,t,a))}};function xy(t,i,a,l,h,d,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,T):i.prototype&&i.prototype.isPureReactComponent?!Wo(a,l)||!Wo(h,d):!0}function Dy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&ud.enqueueReplaceState(i,i.state,null)}function Ks(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var yc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ny(t){yc(t)}function Oy(t){console.error(t)}function My(t){yc(t)}function vc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Vy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function cd(t,i,a){return a=xr(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(t,i)},a}function Py(t){return t=xr(t),t.tag=3,t}function ky(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Vy(i,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Vy(i,a,l),typeof h!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function MA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&nl(i,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return Ii===null?Vd():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Uf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),kd(t,l,h)),!1;case 22:return a.flags|=65536,l===Uf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),kd(t,l,h)),!1}throw Error(s(435,a.tag))}return kd(t,l,h),Vd(),!1}if(Je)return i=$n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Of&&(t=Error(s(422),{cause:l}),tl(Gn(t,a)))):(l!==Of&&(i=Error(s(423),{cause:l}),tl(Gn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Gn(l,a),h=cd(t.stateNode,l,h),qf(t,h),wt!==4&&(wt=2)),!1;var d=Error(s(520),{cause:l});if(d=Gn(d,a),Sl===null?Sl=[d]:Sl.push(d),wt!==4&&(wt=2),i===null)return!0;l=Gn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=cd(a.stateNode,l,t),qf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Py(h),ky(h,t,a,l),qf(a,h),!1}a=a.return}while(a!==null);return!1}var jy=Error(s(461)),Kt=!1;function Jt(t,i,a,l){i.child=t===null?Iy(i,null,a,l):La(i,t.child,a,l)}function Ly(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return Hs(i),l=Qf(t,i,a,T,d,h),A=Yf(),t!==null&&!Kt?($f(t,i,h),rr(t,i,h)):(Je&&A&&Df(i),i.flags|=1,Jt(t,i,l,h),i.child)}function Uy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!If(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,By(t,i,d,l,h)):(t=Wu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!vd(t,h)){var T=d.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(T,l)&&t.ref===i.ref)return rr(t,i,h)}return i.flags|=1,t=Wi(d,l),t.ref=i.ref,t.return=i,i.child=t}function By(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Wo(d,l)&&t.ref===i.ref)if(Kt=!1,i.pendingProps=l=d,vd(t,h))(t.flags&131072)!==0&&(Kt=!0);else return i.lanes=t.lanes,rr(t,i,h)}return hd(t,i,a,l,h)}function zy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return qy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(i,d!==null?d.cachePool:null),d!==null?Bg(i,d):Ff(),Cy(i);else return i.lanes=i.childLanes=536870912,qy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(nc(i,d.cachePool),Bg(i,d),Mr(),i.memoizedState=null):(t!==null&&nc(i,null),Ff(),Mr());return Jt(t,i,h,a),i.child}function qy(t,i,a,l){var h=Lf();return h=h===null?null:{parent:zt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&nc(i,null),Ff(),Cy(i),t!==null&&nl(t,i,l,!0),null}function _c(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function hd(t,i,a,l,h){return Hs(i),a=Qf(t,i,a,l,void 0,h),l=Yf(),t!==null&&!Kt?($f(t,i,h),rr(t,i,h)):(Je&&l&&Df(i),i.flags|=1,Jt(t,i,a,h),i.child)}function Hy(t,i,a,l,h,d){return Hs(i),i.updateQueue=null,a=qg(i,l,a,h),zg(t),l=Yf(),t!==null&&!Kt?($f(t,i,d),rr(t,i,d)):(Je&&l&&Df(i),i.flags|=1,Jt(t,i,a,d),i.child)}function Fy(t,i,a,l,h){if(Hs(i),i.stateNode===null){var d=Ca,T=a.contextType;typeof T=="object"&&T!==null&&(d=ln(T)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ud,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bf(i),T=a.contextType,d.context=typeof T=="object"&&T!==null?ln(T):Ca,d.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(ld(i,a,T,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(T=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),T!==d.state&&ud.enqueueReplaceState(d,d.state,null),ul(i,l,d,h),ll(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var A=i.memoizedProps,V=Ks(a,A);d.props=V;var X=d.context,re=a.contextType;T=Ca,typeof re=="object"&&re!==null&&(T=ln(re));var oe=a.getDerivedStateFromProps;re=typeof oe=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||X!==T)&&Dy(i,d,l,T),Cr=!1;var Z=i.memoizedState;d.state=Z,ul(i,l,d,h),ll(),X=i.memoizedState,A||Z!==X||Cr?(typeof oe=="function"&&(ld(i,a,oe,l),X=i.memoizedState),(V=Cr||xy(i,a,V,l,Z,X,T))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=T,l=V):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,zf(t,i),T=i.memoizedProps,re=Ks(a,T),d.props=re,oe=i.pendingProps,Z=d.context,X=a.contextType,V=Ca,typeof X=="object"&&X!==null&&(V=ln(X)),A=a.getDerivedStateFromProps,(X=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T!==oe||Z!==V)&&Dy(i,d,l,V),Cr=!1,Z=i.memoizedState,d.state=Z,ul(i,l,d,h),ll();var J=i.memoizedState;T!==oe||Z!==J||Cr||t!==null&&t.dependencies!==null&&ec(t.dependencies)?(typeof A=="function"&&(ld(i,a,A,l),J=i.memoizedState),(re=Cr||xy(i,a,re,l,Z,J,V)||t!==null&&t.dependencies!==null&&ec(t.dependencies))?(X||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,J,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,J,V)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=J),d.props=l,d.state=J,d.context=V,l=re):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&Z===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,_c(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=La(i,t.child,null,h),i.child=La(i,null,a,h)):Jt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=rr(t,i,h),t}function Gy(t,i,a,l){return el(),i.flags|=256,Jt(t,i,a,l),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(t){return{baseLanes:t,cachePool:Og()}}function md(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Xn),t}function Ky(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,T;if((T=d)||(T=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),T&&(h=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Je){if(h?Or(i):Mr(),Je){var A=bt,V;if(V=A){e:{for(V=A,A=Ri;V.nodeType!==8;){if(!A){A=null;break e}if(V=ai(V.nextSibling),V===null){A=null;break e}}A=V}A!==null?(i.memoizedState={dehydrated:A,treeContext:Ls!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},V=xn(18,null,null,0),V.stateNode=A,V.return=i,i.child=V,vn=i,bt=null,V=!0):V=!1}V||zs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Wd(A)?i.lanes=32:i.lanes=536870912,null;ir(i)}return A=l.children,l=l.fallback,h?(Mr(),h=i.mode,A=Ec({mode:"hidden",children:A},h),l=js(l,h,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,h=i.child,h.memoizedState=dd(a),h.childLanes=md(t,T,a),i.memoizedState=fd,l):(Or(i),pd(i,A))}if(V=t.memoizedState,V!==null&&(A=V.dehydrated,A!==null)){if(d)i.flags&256?(Or(i),i.flags&=-257,i=gd(t,i,a)):i.memoizedState!==null?(Mr(),i.child=t.child,i.flags|=128,i=null):(Mr(),h=l.fallback,A=i.mode,l=Ec({mode:"visible",children:l.children},A),h=js(h,A,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,La(i,t.child,null,a),l=i.child,l.memoizedState=dd(a),l.childLanes=md(t,T,a),i.memoizedState=fd,i=h);else if(Or(i),Wd(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var X=T.dgst;T=X,l=Error(s(419)),l.stack="",l.digest=T,tl({value:l,source:null,stack:null}),i=gd(t,i,a)}else if(Kt||nl(t,i,a,!1),T=(a&t.childLanes)!==0,Kt||T){if(T=dt,T!==null&&(l=a&-a,l=(l&42)!==0?1:Er(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Ia(t,l),Vn(T,t,l),jy;A.data==="$?"||Vd(),i=gd(t,i,a)}else A.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=V.treeContext,bt=ai(A.nextSibling),vn=i,Je=!0,Bs=null,Ri=!1,t!==null&&(Qn[Yn++]=Zi,Qn[Yn++]=Ji,Qn[Yn++]=Ls,Zi=t.id,Ji=t.overflow,Ls=i),i=pd(i,l.children),i.flags|=4096);return i}return h?(Mr(),h=l.fallback,A=i.mode,V=t.child,X=V.sibling,l=Wi(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,X!==null?h=Wi(X,h):(h=js(h,A,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,A=t.child.memoizedState,A===null?A=dd(a):(V=A.cachePool,V!==null?(X=zt._currentValue,V=V.parent!==X?{parent:X,pool:X}:V):V=Og(),A={baseLanes:A.baseLanes|a,cachePool:V}),h.memoizedState=A,h.childLanes=md(t,T,a),i.memoizedState=fd,l):(Or(i),a=t.child,t=a.sibling,a=Wi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=a,i.memoizedState=null,a)}function pd(t,i){return i=Ec({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ec(t,i){return t=xn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function gd(t,i,a){return La(i,t.child,null,a),t=pd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Qy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Vf(t.return,i,a)}function yd(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Yy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Jt(t,i,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qy(t,a,i);else if(t.tag===19)Qy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(qt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&gc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),yd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&gc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}yd(i,!0,a,null,d);break;case"together":yd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function rr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Lr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(nl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Wi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Wi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function vd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ec(t)))}function VA(t,i,a){switch(i.tag){case 3:pe(i,i.stateNode.containerInfo),Ir(i,zt,t.memoizedState.cache),el();break;case 27:case 5:Te(i);break;case 4:pe(i,i.stateNode.containerInfo);break;case 10:Ir(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Or(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ky(t,i,a):(Or(i),t=rr(t,i,a),t!==null?t.sibling:null);Or(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(nl(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Yy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(qt,qt.current),l)break;return null;case 22:case 23:return i.lanes=0,zy(t,i,a);case 24:Ir(i,zt,t.memoizedState.cache)}return rr(t,i,a)}function $y(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Kt=!0;else{if(!vd(t,a)&&(i.flags&128)===0)return Kt=!1,VA(t,i,a);Kt=(t.flags&131072)!==0}else Kt=!1,Je&&(i.flags&1048576)!==0&&wg(i,Ju,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")If(l)?(t=Ks(l,t),i.tag=1,i=Fy(null,i,l,t,a)):(i.tag=0,i=hd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Q){i.tag=11,i=Ly(null,i,l,t,a);break e}else if(h===I){i.tag=14,i=Uy(null,i,l,t,a);break e}}throw i=et(l)||l,Error(s(306,i,""))}}return i;case 0:return hd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Ks(l,i.pendingProps),Fy(t,i,l,h,a);case 3:e:{if(pe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,zf(t,i),ul(i,l,null,a);var T=i.memoizedState;if(l=T.cache,Ir(i,zt,l),l!==d.cache&&Pf(i,[zt],a,!0),ll(),l=T.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Gy(t,i,l,a);break e}else if(l!==h){h=Gn(Error(s(424)),i),tl(h),i=Gy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=ai(t.firstChild),vn=i,Je=!0,Bs=null,Ri=!0,a=Iy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(el(),l===h){i=rr(t,i,a);break e}Jt(t,i,l,a)}i=i.child}return i;case 26:return _c(t,i),t===null?(a=Jv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Je||(a=i.type,t=i.pendingProps,l=Vc(de.current).createElement(a),l[Lt]=i,l[Nt]=t,tn(l,a,t),Rt(l),i.stateNode=l):i.memoizedState=Jv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Te(i),t===null&&Je&&(l=i.stateNode=Xv(i.type,i.pendingProps,de.current),vn=i,Ri=!0,h=bt,qr(i.type)?(Zd=h,bt=ai(l.firstChild)):bt=h),Jt(t,i,i.pendingProps.children,a),_c(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Je&&((h=l=bt)&&(l=lb(l,i.type,i.pendingProps,Ri),l!==null?(i.stateNode=l,vn=i,bt=ai(l.firstChild),Ri=!1,h=!0):h=!1),h||zs(i)),Te(i),h=i.type,d=i.pendingProps,T=t!==null?t.memoizedProps:null,l=d.children,Yd(h,d)?l=null:T!==null&&Yd(h,T)&&(i.flags|=32),i.memoizedState!==null&&(h=Qf(t,i,RA,null,null,a),Nl._currentValue=h),_c(t,i),Jt(t,i,l,a),i.child;case 6:return t===null&&Je&&((t=a=bt)&&(a=ub(a,i.pendingProps,Ri),a!==null?(i.stateNode=a,vn=i,bt=null,t=!0):t=!1),t||zs(i)),null;case 13:return Ky(t,i,a);case 4:return pe(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=La(i,null,l,a):Jt(t,i,l,a),i.child;case 11:return Ly(t,i,i.type,i.pendingProps,a);case 7:return Jt(t,i,i.pendingProps,a),i.child;case 8:return Jt(t,i,i.pendingProps.children,a),i.child;case 12:return Jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ir(i,i.type,l.value),Jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Hs(i),h=ln(h),l=l(h),i.flags|=1,Jt(t,i,l,a),i.child;case 14:return Uy(t,i,i.type,i.pendingProps,a);case 15:return By(t,i,i.type,i.pendingProps,a);case 19:return Yy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Ec(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Wi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return zy(t,i,a);case 24:return Hs(i),l=ln(zt),t===null?(h=Lf(),h===null&&(h=dt,d=kf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Bf(i),Ir(i,zt,h)):((t.lanes&a)!==0&&(zf(t,i),ul(i,null,null,a),ll()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ir(i,zt,l)):(l=d.cache,Ir(i,zt,l),l!==h.cache&&Pf(i,[zt],a,!0))),Jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function sr(t){t.flags|=4}function Xy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r_(i)){if(i=$n.current,i!==null&&((Ye&4194048)===Ye?Ii!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||i!==Ii))throw al=Uf,Mg;t.flags|=8192}}function Tc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Mo():536870912,t.lanes|=i,qa|=i)}function gl(t,i){if(!Je)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function St(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function PA(t,i,a){var l=i.pendingProps;switch(Nf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),tr(zt),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Jo(i)?sr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cg())),St(i),null;case 26:return a=i.memoizedState,t===null?(sr(i),a!==null?(St(i),Xy(i,a)):(St(i),i.flags&=-16777217)):a?a!==t.memoizedState?(sr(i),St(i),Xy(i,a)):(St(i),i.flags&=-16777217):(t.memoizedProps!==l&&sr(i),St(i),i.flags&=-16777217),null;case 27:mt(i),a=de.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&sr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return St(i),null}t=ye.current,Jo(i)?Rg(i):(t=Xv(h,l,a),i.stateNode=t,sr(i))}return St(i),null;case 5:if(mt(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&sr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return St(i),null}if(t=ye.current,Jo(i))Rg(i);else{switch(h=Vc(de.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Lt]=i,t[Nt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(tn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&sr(i)}}return St(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&sr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=de.current,Jo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=vn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Lt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hv(t.nodeValue,a)),t||zs(i)}else t=Vc(t).createTextNode(l),t[Lt]=i,i.stateNode=t}return St(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Jo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Lt]=i}else el(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),h=!1}else h=Cg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ir(i),i):(ir(i),null)}if(ir(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Tc(i,i.updateQueue),St(i),null;case 4:return Ne(),t===null&&Hd(i.stateNode.containerInfo),St(i),null;case 10:return tr(i.type),St(i),null;case 19:if(ue(qt),h=i.memoizedState,h===null)return St(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)gl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=gc(t),d!==null){for(i.flags|=128,gl(h,!1),t=d.updateQueue,i.updateQueue=t,Tc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)bg(a,t),a=a.sibling;return se(qt,qt.current&1|2),i.child}t=t.sibling}h.tail!==null&&Tt()>bc&&(i.flags|=128,l=!0,gl(h,!1),i.lanes=4194304)}else{if(!l)if(t=gc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Tc(i,t),gl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Je)return St(i),null}else 2*Tt()-h.renderingStartTime>bc&&a!==536870912&&(i.flags|=128,l=!0,gl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Tt(),i.sibling=null,t=qt.current,se(qt,l?t&1|2:t&1),i):(St(i),null);case 22:case 23:return ir(i),Gf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),a=i.updateQueue,a!==null&&Tc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ue(Fs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),tr(zt),St(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function kA(t,i){switch(Nf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return tr(zt),Ne(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return mt(i),null;case 13:if(ir(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));el()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(qt),null;case 4:return Ne(),null;case 10:return tr(i.type),null;case 22:case 23:return ir(i),Gf(),t!==null&&ue(Fs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return tr(zt),null;case 25:return null;default:return null}}function Wy(t,i){switch(Nf(i),i.tag){case 3:tr(zt),Ne();break;case 26:case 27:case 5:mt(i);break;case 4:Ne();break;case 13:ir(i);break;case 19:ue(qt);break;case 10:tr(i.type);break;case 22:case 23:ir(i),Gf(),t!==null&&ue(Fs);break;case 24:tr(zt)}}function yl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,T=a.inst;l=d(),T.destroy=l}a=a.next}while(a!==h)}}catch(A){ct(i,i.return,A)}}function Vr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,h=i;var V=a,X=A;try{X()}catch(re){ct(h,V,re)}}}l=l.next}while(l!==d)}}catch(re){ct(i,i.return,re)}}function Zy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Ug(i,a)}catch(l){ct(t,t.return,l)}}}function Jy(t,i,a){a.props=Ks(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ct(t,i,l)}}function vl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ct(t,i,h)}}function Ci(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ct(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ct(t,i,h)}else a.current=null}function ev(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ct(t,t.return,h)}}function _d(t,i,a){try{var l=t.stateNode;ib(l,t.type,a,i),l[Nt]=i}catch(h){ct(t,t.return,h)}}function tv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qr(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Mc));else if(l!==4&&(l===27&&qr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Td(t,i,a),t=t.sibling;t!==null;)Td(t,i,a),t=t.sibling}function Sc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&qr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Sc(t,i,a),t=t.sibling;t!==null;)Sc(t,i,a),t=t.sibling}function nv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);tn(i,l,a),i[Lt]=t,i[Nt]=a}catch(d){ct(t,t.return,d)}}var ar=!1,Ct=!1,Sd=!1,iv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function jA(t,i){if(t=t.containerInfo,Kd=Bc,t=mg(t),Ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var T=0,A=-1,V=-1,X=0,re=0,oe=t,Z=null;t:for(;;){for(var J;oe!==a||h!==0&&oe.nodeType!==3||(A=T+h),oe!==d||l!==0&&oe.nodeType!==3||(V=T+l),oe.nodeType===3&&(T+=oe.nodeValue.length),(J=oe.firstChild)!==null;)Z=oe,oe=J;for(;;){if(oe===t)break t;if(Z===a&&++X===h&&(A=T),Z===d&&++re===l&&(V=T),(J=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=J}a=A===-1||V===-1?null:{start:A,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:t,selectionRange:a},Bc=!1,Qt=i;Qt!==null;)if(i=Qt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Qt=t;else for(;Qt!==null;){switch(i=Qt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xe=Ks(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){ct(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Xd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Qt=t;break}Qt=i.return}}function rv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Pr(t,a),l&4&&yl(5,a);break;case 1:if(Pr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(T){ct(a,a.return,T)}else{var h=Ks(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){ct(a,a.return,T)}}l&64&&Zy(a),l&512&&vl(a,a.return);break;case 3:if(Pr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ug(t,i)}catch(T){ct(a,a.return,T)}}break;case 27:i===null&&l&4&&nv(a);case 26:case 5:Pr(t,a),i===null&&l&4&&ev(a),l&512&&vl(a,a.return);break;case 12:Pr(t,a);break;case 13:Pr(t,a),l&4&&ov(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=KA.bind(null,a),cb(t,a))));break;case 22:if(l=a.memoizedState!==null||ar,!l){i=i!==null&&i.memoizedState!==null||Ct,h=ar;var d=Ct;ar=l,(Ct=i)&&!d?kr(t,a,(a.subtreeFlags&8772)!==0):Pr(t,a),ar=h,Ct=d}break;case 30:break;default:Pr(t,a)}}function sv(t){var i=t.alternate;i!==null&&(t.alternate=null,sv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ar(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,Sn=!1;function or(t,i,a){for(a=a.child;a!==null;)av(t,i,a),a=a.sibling}function av(t,i,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:Ct||Ci(a,i),or(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Ci(a,i);var l=_t,h=Sn;qr(a.type)&&(_t=a.stateNode,Sn=!1),or(t,i,a),Il(a.stateNode),_t=l,Sn=h;break;case 5:Ct||Ci(a,i);case 6:if(l=_t,h=Sn,_t=null,or(t,i,a),_t=l,Sn=h,_t!==null)if(Sn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(d){ct(a,i,d)}else try{_t.removeChild(a.stateNode)}catch(d){ct(a,i,d)}break;case 18:_t!==null&&(Sn?(t=_t,Yv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Pl(t)):Yv(_t,a.stateNode));break;case 4:l=_t,h=Sn,_t=a.stateNode.containerInfo,Sn=!0,or(t,i,a),_t=l,Sn=h;break;case 0:case 11:case 14:case 15:Ct||Vr(2,a,i),Ct||Vr(4,a,i),or(t,i,a);break;case 1:Ct||(Ci(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Jy(a,i,l)),or(t,i,a);break;case 21:or(t,i,a);break;case 22:Ct=(l=Ct)||a.memoizedState!==null,or(t,i,a),Ct=l;break;default:or(t,i,a)}}function ov(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Pl(t)}catch(a){ct(i,i.return,a)}}function LA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new iv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new iv),i;default:throw Error(s(435,t.tag))}}function Ad(t,i){var a=LA(t);i.forEach(function(l){var h=QA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Dn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(qr(A.type)){_t=A.stateNode,Sn=!1;break e}break;case 5:_t=A.stateNode,Sn=!1;break e;case 3:case 4:_t=A.stateNode.containerInfo,Sn=!0;break e}A=A.return}if(_t===null)throw Error(s(160));av(d,T,h),_t=null,Sn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)lv(i,t),i=i.sibling}var si=null;function lv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(i,t),Nn(t),l&4&&(Vr(3,t,t.return),yl(3,t),Vr(5,t,t.return));break;case 1:Dn(i,t),Nn(t),l&512&&(Ct||a===null||Ci(a,a.return)),l&64&&ar&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=si;if(Dn(i,t),Nn(t),l&512&&(Ct||a===null||Ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ts]||d[Lt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[Lt]=t,Rt(d),l=d;break e;case"link":var T=n_("link","href",h).get(l+(a.href||""));if(T){for(var A=0;A<T.length;A++)if(d=T[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(A,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(T=n_("meta","content",h).get(l+(a.content||""))){for(A=0;A<T.length;A++)if(d=T[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(A,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Lt]=t,Rt(d),l=d}t.stateNode=l}else i_(h,t.type,t.stateNode);else t.stateNode=t_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?i_(h,t.type,t.stateNode):t_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&_d(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,t),Nn(t),l&512&&(Ct||a===null||Ci(a,a.return)),a!==null&&l&4&&_d(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,t),Nn(t),l&512&&(Ct||a===null||Ci(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(J){ct(t,t.return,J)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,_d(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Sd=!0);break;case 6:if(Dn(i,t),Nn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(J){ct(t,t.return,J)}}break;case 3:if(jc=null,h=si,si=Pc(i.containerInfo),Dn(i,t),si=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Pl(i.containerInfo)}catch(J){ct(t,t.return,J)}Sd&&(Sd=!1,uv(t));break;case 4:l=si,si=Pc(t.stateNode.containerInfo),Dn(i,t),Nn(t),si=l;break;case 12:Dn(i,t),Nn(t);break;case 13:Dn(i,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xd=Tt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ad(t,l)));break;case 22:h=t.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,X=ar,re=Ct;if(ar=X||h,Ct=re||V,Dn(i,t),Ct=re,ar=X,Nn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||V||ar||Ct||Qs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){V=a=i;try{if(d=V.stateNode,h)T=d.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=V.stateNode;var oe=V.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){ct(V,V.return,J)}}}else if(i.tag===6){if(a===null){V=i;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(J){ct(V,V.return,J)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ad(t,a))));break;case 19:Dn(i,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ad(t,l)));break;case 30:break;case 21:break;default:Dn(i,t),Nn(t)}}function Nn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(tv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Ed(t);Sc(t,d,h);break;case 5:var T=a.stateNode;a.flags&32&&(zn(T,""),a.flags&=-33);var A=Ed(t);Sc(t,A,T);break;case 3:case 4:var V=a.stateNode.containerInfo,X=Ed(t);Td(t,X,V);break;default:throw Error(s(161))}}catch(re){ct(t,t.return,re)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function uv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;uv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Pr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)rv(t,i.alternate,i),i=i.sibling}function Qs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Vr(4,i,i.return),Qs(i);break;case 1:Ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Jy(i,i.return,a),Qs(i);break;case 27:Il(i.stateNode);case 26:case 5:Ci(i,i.return),Qs(i);break;case 22:i.memoizedState===null&&Qs(i);break;case 30:Qs(i);break;default:Qs(i)}t=t.sibling}}function kr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,T=d.flags;switch(d.tag){case 0:case 11:case 15:kr(h,d,a),yl(4,d);break;case 1:if(kr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){ct(l,l.return,X)}if(l=d,h=l.updateQueue,h!==null){var A=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Lg(V[h],A)}catch(X){ct(l,l.return,X)}}a&&T&64&&Zy(d),vl(d,d.return);break;case 27:nv(d);case 26:case 5:kr(h,d,a),a&&l===null&&T&4&&ev(d),vl(d,d.return);break;case 12:kr(h,d,a);break;case 13:kr(h,d,a),a&&T&4&&ov(h,d);break;case 22:d.memoizedState===null&&kr(h,d,a),vl(d,d.return);break;case 30:break;default:kr(h,d,a)}i=i.sibling}}function bd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function wd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&il(t))}function xi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cv(t,i,a,l),i=i.sibling}function cv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xi(t,i,a,l),h&2048&&yl(9,i);break;case 1:xi(t,i,a,l);break;case 3:xi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&il(t)));break;case 12:if(h&2048){xi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,T=d.id,A=d.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){ct(i,i.return,V)}}else xi(t,i,a,l);break;case 13:xi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,T=i.alternate,i.memoizedState!==null?d._visibility&2?xi(t,i,a,l):_l(t,i):d._visibility&2?xi(t,i,a,l):(d._visibility|=2,Ua(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&bd(T,i);break;case 24:xi(t,i,a,l),h&2048&&wd(i.alternate,i);break;default:xi(t,i,a,l)}}function Ua(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,T=i,A=a,V=l,X=T.flags;switch(T.tag){case 0:case 11:case 15:Ua(d,T,A,V,h),yl(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Ua(d,T,A,V,h):_l(d,T):(re._visibility|=2,Ua(d,T,A,V,h)),h&&X&2048&&bd(T.alternate,T);break;case 24:Ua(d,T,A,V,h),h&&X&2048&&wd(T.alternate,T);break;default:Ua(d,T,A,V,h)}i=i.sibling}}function _l(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:_l(a,l),h&2048&&bd(l.alternate,l);break;case 24:_l(a,l),h&2048&&wd(l.alternate,l);break;default:_l(a,l)}i=i.sibling}}var El=8192;function Ba(t){if(t.subtreeFlags&El)for(t=t.child;t!==null;)hv(t),t=t.sibling}function hv(t){switch(t.tag){case 26:Ba(t),t.flags&El&&t.memoizedState!==null&&Ab(si,t.memoizedState,t.memoizedProps);break;case 5:Ba(t);break;case 3:case 4:var i=si;si=Pc(t.stateNode.containerInfo),Ba(t),si=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=El,El=16777216,Ba(t),El=i):Ba(t));break;default:Ba(t)}}function fv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Tl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,mv(l,t)}fv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dv(t),t=t.sibling}function dv(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&Vr(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ac(t)):Tl(t);break;default:Tl(t)}}function Ac(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,mv(l,t)}fv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Vr(8,i,i.return),Ac(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(i));break;default:Ac(i)}t=t.sibling}}function mv(t,i){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,d=l.return;if(sv(l),l===a){Qt=null;break e}if(h!==null){h.return=d,Qt=h;break e}Qt=d}}}var UA={getCacheForType:function(t){var i=ln(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},BA=typeof WeakMap=="function"?WeakMap:Map,it=0,dt=null,Le=null,Ye=0,rt=0,On=null,jr=!1,za=!1,Rd=!1,lr=0,wt=0,Lr=0,Ys=0,Id=0,Xn=0,qa=0,Sl=null,An=null,Cd=!1,xd=0,bc=1/0,wc=null,Ur=null,en=0,Br=null,Ha=null,Fa=0,Dd=0,Nd=null,pv=null,Al=0,Od=null;function Mn(){if((it&2)!==0&&Ye!==0)return Ye&-Ye;if(ne.T!==null){var t=Na;return t!==0?t:Ud()}return Tr()}function gv(){Xn===0&&(Xn=(Ye&536870912)===0||Je?Oo():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Xn}function Vn(t,i,a){(t===dt&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(Ga(t,0),zr(t,Ye,Xn,!1)),Bi(t,a),((it&2)===0||t!==dt)&&(t===dt&&((it&2)===0&&(Ys|=a),wt===4&&zr(t,Ye,Xn,!1)),Di(t))}function yv(t,i,a){if((it&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Es(t,i),h=l?HA(t,i):Pd(t,i,!0),d=l;do{if(h===0){za&&!l&&zr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!zA(a)){h=Pd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=t;h=Sl;var V=A.current.memoizedState.isDehydrated;if(V&&(Ga(A,T).flags|=256),T=Pd(A,T,!1),T!==2){if(Rd&&!V){A.errorRecoveryDisabledLanes|=d,Ys|=d,h=4;break e}d=An,An=h,d!==null&&(An===null?An=d:An.push.apply(An,d))}h=T}if(d=!1,h!==2)continue}}if(h===1){Ga(t,0),zr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:zr(l,i,Xn,!jr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=xd+300-Tt(),10<h)){if(zr(l,i,Xn,!jr),la(l,0,!0)!==0)break e;l.timeoutHandle=Kv(vv.bind(null,l,a,An,wc,Cd,i,Xn,Ys,qa,jr,d,2,-0,0),h);break e}vv(l,a,An,wc,Cd,i,Xn,Ys,qa,jr,d,0,-0,0)}}break}while(!0);Di(t)}function vv(t,i,a,l,h,d,T,A,V,X,re,oe,Z,J){if(t.timeoutHandle=-1,oe=i.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:Sb},hv(i),oe=bb(),oe!==null)){t.cancelPendingCommit=oe(wv.bind(null,t,i,d,a,l,h,T,A,V,re,1,Z,J)),zr(t,d,T,!X);return}wv(t,i,d,a,l,h,T,A,V)}function zA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zr(t,i,a,l){i&=~Id,i&=~Ys,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Dt(h),T=1<<d;l[d]=-1,h&=~T}a!==0&&pi(t,a,i)}function Rc(){return(it&6)===0?(bl(0),!1):!0}function Md(){if(Le!==null){if(rt===0)var t=Le.return;else t=Le,er=qs=null,Xf(t),ja=null,ml=0,t=Le;for(;t!==null;)Wy(t.alternate,t),t=t.return;Le=null}}function Ga(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,sb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Md(),dt=t,Le=a=Wi(t.current,null),Ye=i,rt=0,On=null,jr=!1,za=Es(t,i),Rd=!1,qa=Xn=Id=Ys=Lr=wt=0,An=Sl=null,Cd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Dt(l),d=1<<h;i|=t[h],l&=~d}return lr=i,Yu(),a}function _v(t,i){Pe=null,ne.H=dc,i===sl||i===ic?(i=kg(),rt=3):i===Mg?(i=kg(),rt=4):rt=i===jy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,Le===null&&(wt=1,vc(t,Gn(i,t.current)))}function Ev(){var t=ne.H;return ne.H=dc,t===null?dc:t}function Tv(){var t=ne.A;return ne.A=UA,t}function Vd(){wt=4,jr||(Ye&4194048)!==Ye&&$n.current!==null||(za=!0),(Lr&134217727)===0&&(Ys&134217727)===0||dt===null||zr(dt,Ye,Xn,!1)}function Pd(t,i,a){var l=it;it|=2;var h=Ev(),d=Tv();(dt!==t||Ye!==i)&&(wc=null,Ga(t,i)),i=!1;var T=wt;e:do try{if(rt!==0&&Le!==null){var A=Le,V=On;switch(rt){case 8:Md(),T=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(i=!0);var X=rt;if(rt=0,On=null,Ka(t,A,V,X),a&&za){T=0;break e}break;default:X=rt,rt=0,On=null,Ka(t,A,V,X)}}qA(),T=wt;break}catch(re){_v(t,re)}while(!0);return i&&t.shellSuspendCounter++,er=qs=null,it=l,ne.H=h,ne.A=d,Le===null&&(dt=null,Ye=0,Yu()),T}function qA(){for(;Le!==null;)Sv(Le)}function HA(t,i){var a=it;it|=2;var l=Ev(),h=Tv();dt!==t||Ye!==i?(wc=null,bc=Tt()+500,Ga(t,i)):za=Es(t,i);e:do try{if(rt!==0&&Le!==null){i=Le;var d=On;t:switch(rt){case 1:rt=0,On=null,Ka(t,i,d,1);break;case 2:case 9:if(Vg(d)){rt=0,On=null,Av(i);break}i=function(){rt!==2&&rt!==9||dt!==t||(rt=7),Di(t)},d.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Vg(d)?(rt=0,On=null,Av(i)):(rt=0,On=null,Ka(t,i,d,7));break;case 5:var T=null;switch(Le.tag){case 26:T=Le.memoizedState;case 5:case 27:var A=Le;if(!T||r_(T)){rt=0,On=null;var V=A.sibling;if(V!==null)Le=V;else{var X=A.return;X!==null?(Le=X,Ic(X)):Le=null}break t}}rt=0,On=null,Ka(t,i,d,5);break;case 6:rt=0,On=null,Ka(t,i,d,6);break;case 8:Md(),wt=6;break e;default:throw Error(s(462))}}FA();break}catch(re){_v(t,re)}while(!0);return er=qs=null,ne.H=l,ne.A=h,it=a,Le!==null?0:(dt=null,Ye=0,Yu(),wt)}function FA(){for(;Le!==null&&!Rn();)Sv(Le)}function Sv(t){var i=$y(t.alternate,t,lr);t.memoizedProps=t.pendingProps,i===null?Ic(t):Le=i}function Av(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Hy(a,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=Hy(a,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:Xf(i);default:Wy(a,i),i=Le=bg(i,lr),i=$y(a,i,lr)}t.memoizedProps=t.pendingProps,i===null?Ic(t):Le=i}function Ka(t,i,a,l){er=qs=null,Xf(i),ja=null,ml=0;var h=i.return;try{if(MA(t,h,i,a,Ye)){wt=1,vc(t,Gn(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;wt=1,vc(t,Gn(a,t.current)),Le=null;return}i.flags&32768?(Je||l===1?t=!0:za||(Ye&536870912)!==0?t=!1:(jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),bv(i,t)):Ic(i)}function Ic(t){var i=t;do{if((i.flags&32768)!==0){bv(i,jr);return}t=i.return;var a=PA(i.alternate,i,lr);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);wt===0&&(wt=5)}function bv(t,i){do{var a=kA(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);wt=6,Le=null}function wv(t,i,a,l,h,d,T,A,V){t.cancelPendingCommit=null;do Cc();while(en!==0);if((it&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=wf,Vo(t,a,d,T,A,V),t===dt&&(Le=dt=null,Ye=0),Ha=i,Br=t,Fa=a,Dd=d,Nd=h,pv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,YA(on,function(){return Dv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null,h=ie.p,ie.p=2,T=it,it|=4;try{jA(t,i,a)}finally{it=T,ie.p=h,ne.T=l}}en=1,Rv(),Iv(),Cv()}}function Rv(){if(en===1){en=0;var t=Br,i=Ha,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=ne.T,ne.T=null;var l=ie.p;ie.p=2;var h=it;it|=4;try{lv(i,t);var d=Qd,T=mg(t.containerInfo),A=d.focusedElem,V=d.selectionRange;if(T!==A&&A&&A.ownerDocument&&dg(A.ownerDocument.documentElement,A)){if(V!==null&&Ef(A)){var X=V.start,re=V.end;if(re===void 0&&(re=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(re,A.value.length);else{var oe=A.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),xe=A.textContent.length,we=Math.min(V.start,xe),lt=V.end===void 0?we:Math.min(V.end,xe);!J.extend&&we>lt&&(T=lt,lt=we,we=T);var F=fg(A,we),B=fg(A,lt);if(F&&B&&(J.rangeCount!==1||J.anchorNode!==F.node||J.anchorOffset!==F.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var $=oe.createRange();$.setStart(F.node,F.offset),J.removeAllRanges(),we>lt?(J.addRange($),J.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),J.addRange($))}}}}for(oe=[],J=A;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ae=oe[A];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Bc=!!Kd,Qd=Kd=null}finally{it=h,ie.p=l,ne.T=a}}t.current=i,en=2}}function Iv(){if(en===2){en=0;var t=Br,i=Ha,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=ne.T,ne.T=null;var l=ie.p;ie.p=2;var h=it;it|=4;try{rv(t,i.alternate,i)}finally{it=h,ie.p=l,ne.T=a}}en=3}}function Cv(){if(en===4||en===3){en=0,an();var t=Br,i=Ha,a=Fa,l=pv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?en=5:(en=0,Ha=Br=null,xv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ur=null),ua(a),i=i.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ft,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=ne.T,h=ie.p,ie.p=2,ne.T=null;try{for(var d=t.onRecoverableError,T=0;T<l.length;T++){var A=l[T];d(A.value,{componentStack:A.stack})}}finally{ne.T=i,ie.p=h}}(Fa&3)!==0&&Cc(),Di(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Od?Al++:(Al=0,Od=t):Al=0,bl(0)}}function xv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,il(i)))}function Cc(t){return Rv(),Iv(),Cv(),Dv()}function Dv(){if(en!==5)return!1;var t=Br,i=Dd;Dd=0;var a=ua(Fa),l=ne.T,h=ie.p;try{ie.p=32>a?32:a,ne.T=null,a=Nd,Nd=null;var d=Br,T=Fa;if(en=0,Ha=Br=null,Fa=0,(it&6)!==0)throw Error(s(331));var A=it;if(it|=4,dv(d.current),cv(d,d.current,T,a),it=A,bl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{ie.p=h,ne.T=l,xv(t,i)}}function Nv(t,i,a){i=Gn(a,i),i=cd(t.stateNode,i,2),t=Dr(t,i,2),t!==null&&(Bi(t,2),Di(t))}function ct(t,i,a){if(t.tag===3)Nv(t,t,a);else for(;i!==null;){if(i.tag===3){Nv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ur===null||!Ur.has(l))){t=Gn(a,t),a=Py(2),l=Dr(i,a,2),l!==null&&(ky(a,l,i,t),Bi(l,2),Di(l));break}}i=i.return}}function kd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new BA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Rd=!0,h.add(a),t=GA.bind(null,t,i,a),i.then(t,t))}function GA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Ye&a)===a&&(wt===4||wt===3&&(Ye&62914560)===Ye&&300>Tt()-xd?(it&2)===0&&Ga(t,0):Id|=a,qa===Ye&&(qa=0)),Di(t)}function Ov(t,i){i===0&&(i=Mo()),t=Ia(t,i),t!==null&&(Bi(t,i),Di(t))}function KA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Ov(t,a)}function QA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Ov(t,a)}function YA(t,i){return ut(t,i)}var xc=null,Qa=null,jd=!1,Dc=!1,Ld=!1,$s=0;function Di(t){t!==Qa&&t.next===null&&(Qa===null?xc=Qa=t:Qa=Qa.next=t),Dc=!0,jd||(jd=!0,XA())}function bl(t,i){if(!Ld&&Dc){Ld=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var T=l.suspendedLanes,A=l.pingedLanes;d=(1<<31-Dt(42|t)+1)-1,d&=h&~(T&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,kv(l,d))}else d=Ye,d=la(l,l===dt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Es(l,d)||(a=!0,kv(l,d));l=l.next}while(a);Ld=!1}}function $A(){Mv()}function Mv(){Dc=jd=!1;var t=0;$s!==0&&(rb()&&(t=$s),$s=0);for(var i=Tt(),a=null,l=xc;l!==null;){var h=l.next,d=Vv(l,i);d===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(Qa=a)):(a=l,(t!==0||(d&3)!==0)&&(Dc=!0)),l=h}bl(t)}function Vv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var T=31-Dt(d),A=1<<T,V=h[T];V===-1?((A&a)===0||(A&l)!==0)&&(h[T]=No(A,i)):V<=i&&(t.expiredLanes|=A),d&=~A}if(i=dt,a=Ye,a=la(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ht(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Es(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ht(l),ua(a)){case 2:case 8:a=Ln;break;case 32:a=on;break;case 268435456:a=ze;break;default:a=on}return l=Pv.bind(null,t),a=ut(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ht(l),t.callbackPriority=2,t.callbackNode=null,2}function Pv(t,i){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Cc()&&t.callbackNode!==a)return null;var l=Ye;return l=la(t,t===dt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(yv(t,l,i),Vv(t,Tt()),t.callbackNode!=null&&t.callbackNode===a?Pv.bind(null,t):null)}function kv(t,i){if(Cc())return null;yv(t,i,!0)}function XA(){ab(function(){(it&6)!==0?ut(En,$A):Mv()})}function Ud(){return $s===0&&($s=Oo()),$s}function jv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pa(""+t)}function Lv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function WA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=jv((h[Nt]||null).action),T=l.submitter;T&&(i=(i=T[Nt]||null)?jv(i.formAction):T.getAttribute("formAction"),i!==null&&(d=i,T=null));var A=new ga("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($s!==0){var V=T?Lv(h,T):new FormData(h);sd(a,{pending:!0,data:V,method:h.method,action:d},null,V)}}else typeof d=="function"&&(A.preventDefault(),V=T?Lv(h,T):new FormData(h),sd(a,{pending:!0,data:V,method:h.method,action:d},d,V))},currentTarget:h}]})}}for(var Bd=0;Bd<bf.length;Bd++){var zd=bf[Bd],ZA=zd.toLowerCase(),JA=zd[0].toUpperCase()+zd.slice(1);ri(ZA,"on"+JA)}ri(yg,"onAnimationEnd"),ri(vg,"onAnimationIteration"),ri(_g,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(gA,"onTransitionRun"),ri(yA,"onTransitionStart"),ri(vA,"onTransitionCancel"),ri(Eg,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function Uv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var T=l.length-1;0<=T;T--){var A=l[T],V=A.instance,X=A.currentTarget;if(A=A.listener,V!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=X;try{d(h)}catch(re){yc(re)}h.currentTarget=null,d=V}else for(T=0;T<l.length;T++){if(A=l[T],V=A.instance,X=A.currentTarget,A=A.listener,V!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=X;try{d(h)}catch(re){yc(re)}h.currentTarget=null,d=V}}}}function Ue(t,i){var a=i[ko];a===void 0&&(a=i[ko]=new Set);var l=t+"__bubble";a.has(l)||(Bv(i,t,2,!1),a.add(l))}function qd(t,i,a){var l=0;i&&(l|=4),Bv(a,t,l,i)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Hd(t){if(!t[Nc]){t[Nc]=!0,jo.forEach(function(a){a!=="selectionchange"&&(eb.has(a)||qd(a,!1,t),qd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Nc]||(i[Nc]=!0,qd("selectionchange",!1,i))}}function Bv(t,i,a,l){switch(c_(i)){case 2:var h=Ib;break;case 8:h=Cb;break;default:h=im}a=h.bind(null,i,a,t),h=void 0,!Hn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Fd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===h)break;if(T===4)for(T=l.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;A!==null;){if(T=zi(A),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){l=d=T;continue e}A=A.parentNode}}l=l.return}Mu(function(){var X=d,re=qn(a),oe=[];e:{var Z=Tg.get(t);if(Z!==void 0){var J=ga,xe=t;switch(t){case"keypress":if(Ti(a)===0)break e;case"keydown":case"keyup":J=Sa;break;case"focusin":xe="focus",J=_a;break;case"focusout":xe="blur",J=_a;break;case"beforeblur":case"afterblur":J=_a;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=zu;break;case yg:case vg:case _g:J=Ea;break;case Eg:J=Hu;break;case"scroll":case"scrollend":J=Vu;break;case"wheel":J=Aa;break;case"copy":case"cut":case"paste":J=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=$o;break;case"toggle":case"beforetoggle":J=Gu}var we=(i&4)!==0,lt=!we&&(t==="scroll"||t==="scrollend"),F=we?Z!==null?Z+"Capture":null:Z;we=[];for(var B=X,$;B!==null;){var ae=B;if($=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||$===null||F===null||(ae=Cs(B,F),ae!=null&&we.push(Rl(B,ae,$))),lt)break;B=B.return}0<we.length&&(Z=new J(Z,xe,null,a,re),oe.push({event:Z,listeners:we}))}}if((i&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",Z&&a!==Gi&&(xe=a.relatedTarget||a.fromElement)&&(zi(xe)||xe[Bn]))break e;if((J||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(xe=a.relatedTarget||a.toElement,J=X,xe=xe?zi(xe):null,xe!==null&&(lt=u(xe),we=xe.tag,xe!==lt||we!==5&&we!==27&&we!==6)&&(xe=null)):(J=null,xe=X),J!==xe)){if(we=Fn,ae="onMouseLeave",F="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(we=$o,ae="onPointerLeave",F="onPointerEnter",B="pointer"),lt=J==null?Z:yi(J),$=xe==null?Z:yi(xe),Z=new we(ae,B+"leave",J,a,re),Z.target=lt,Z.relatedTarget=$,ae=null,zi(re)===X&&(we=new we(F,B+"enter",xe,a,re),we.target=$,we.relatedTarget=lt,ae=we),lt=ae,J&&xe)t:{for(we=J,F=xe,B=0,$=we;$;$=Ya($))B++;for($=0,ae=F;ae;ae=Ya(ae))$++;for(;0<B-$;)we=Ya(we),B--;for(;0<$-B;)F=Ya(F),$--;for(;B--;){if(we===F||F!==null&&we===F.alternate)break t;we=Ya(we),F=Ya(F)}we=null}else we=null;J!==null&&zv(oe,Z,J,we,!1),xe!==null&&lt!==null&&zv(oe,lt,xe,we,!0)}}e:{if(Z=X?yi(X):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var Ee=ag;else if(Bt(Z))if(og)Ee=dA;else{Ee=hA;var je=cA}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&qo(X.elementType)&&(Ee=ag):Ee=fA;if(Ee&&(Ee=Ee(t,X))){Xi(oe,Ee,a,re);break e}je&&je(t,Z,X),t==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&wr(Z,"number",Z.value)}switch(je=X?yi(X):window,t){case"focusin":(Bt(je)||je.contentEditable==="true")&&(ba=je,Tf=X,Zo=null);break;case"focusout":Zo=Tf=ba=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,pg(oe,a,re);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":pg(oe,a,re)}var Ae;if(bi)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ke?ee(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(_&&a.locale!=="ko"&&(Ke||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ke&&(Ae=Fo()):(Ei=re,Rr="value"in Ei?Ei.value:Ei.textContent,Ke=!0)),je=Oc(X,Re),0<je.length&&(Re=new Qo(Re,t,null,a,re),oe.push({event:Re,listeners:je}),Ae?Re.data=Ae:(Ae=me(a),Ae!==null&&(Re.data=Ae)))),(Ae=y?Ut(t,a):Qe(t,a))&&(Re=Oc(X,"onBeforeInput"),0<Re.length&&(je=new Qo("onBeforeInput","beforeinput",null,a,re),oe.push({event:je,listeners:Re}),je.data=Ae)),WA(oe,t,X,a,re)}Uv(oe,i)})}function Rl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Oc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Cs(t,a),h!=null&&l.unshift(Rl(t,h,d)),h=Cs(t,i),h!=null&&l.push(Rl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zv(t,i,a,l,h){for(var d=i._reactName,T=[];a!==null&&a!==l;){var A=a,V=A.alternate,X=A.stateNode;if(A=A.tag,V!==null&&V===l)break;A!==5&&A!==26&&A!==27||X===null||(V=X,h?(X=Cs(a,d),X!=null&&T.unshift(Rl(a,X,V))):h||(X=Cs(a,d),X!=null&&T.push(Rl(a,X,V)))),a=a.return}T.length!==0&&t.push({event:i,listeners:T})}var tb=/\r\n?/g,nb=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(tb,`
`).replace(nb,"")}function Hv(t,i){return i=qv(i),qv(t)===i}function Mc(){}function ot(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&zn(t,""+l);break;case"className":vi(t,"class",l);break;case"tabIndex":vi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(t,a,l);break;case"style":zo(t,l,d);break;case"data":if(i!=="object"){vi(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ot(t,i,"name",h.name,h,null),ot(t,i,"formEncType",h.formEncType,h,null),ot(t,i,"formMethod",h.formMethod,h,null),ot(t,i,"formTarget",h.formTarget,h,null)):(ot(t,i,"encType",h.encType,h,null),ot(t,i,"method",h.method,h,null),ot(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Mc);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),br(t,"popover",l);break;case"xlinkActuate":Wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Wt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Wt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Wt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Wt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":br(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mf.get(a)||a,br(t,a,l))}}function Gd(t,i,a,l,h,d){switch(a){case"style":zo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Nt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):br(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var T=a[d];if(T!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,d,T,a,null)}}h&&ot(t,i,"srcSet",a.srcSet,a,null),l&&ot(t,i,"src",a.src,a,null);return;case"input":Ue("invalid",t);var A=d=T=h=null,V=null,X=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":h=re;break;case"type":T=re;break;case"checked":V=re;break;case"defaultChecked":X=re;break;case"value":d=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,i));break;default:ot(t,i,l,re,a,null)}}ws(t,d,A,V,X,T,h,!1),ma(t);return;case"select":Ue("invalid",t),l=T=d=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:ot(t,i,h,A,a,null)}i=d,a=T,t.multiple=!!l,i!=null?Fi(t,!!l,i,!1):a!=null&&Fi(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),d=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(A=a[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:ot(t,i,T,A,a,null)}Rs(t,l,h,d),ma(t);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(t,i,V,l,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<wl.length;l++)Ue(wl[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(l=a[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,X,l,a,null)}return;default:if(qo(i)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&Gd(t,i,re,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&ot(t,i,A,l,a,null))}function ib(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,T=null,A=null,V=null,X=null,re=null;for(J in a){var oe=a[J];if(a.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":V=oe;default:l.hasOwnProperty(J)||ot(t,i,J,null,l,oe)}}for(var Z in l){var J=l[Z];if(oe=a[Z],l.hasOwnProperty(Z)&&(J!=null||oe!=null))switch(Z){case"type":d=J;break;case"name":h=J;break;case"checked":X=J;break;case"defaultChecked":re=J;break;case"value":T=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:J!==oe&&ot(t,i,Z,J,l,oe)}}In(t,T,A,V,X,re,d,h);return;case"select":J=T=A=Z=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":J=V;default:l.hasOwnProperty(d)||ot(t,i,d,null,l,V)}for(h in l)if(d=l[h],V=a[h],l.hasOwnProperty(h)&&(d!=null||V!=null))switch(h){case"value":Z=d;break;case"defaultValue":A=d;break;case"multiple":T=d;default:d!==V&&ot(t,i,h,d,l,V)}i=A,a=T,l=J,Z!=null?Fi(t,!!a,Z,!1):!!l!=!!a&&(i!=null?Fi(t,!!a,i,!0):Fi(t,!!a,a?[]:"",!1));return;case"textarea":J=Z=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ot(t,i,A,null,l,h)}for(T in l)if(h=l[T],d=a[T],l.hasOwnProperty(T)&&(h!=null||d!=null))switch(T){case"value":Z=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ot(t,i,T,h,l,d)}st(t,Z,J);return;case"option":for(var xe in a)if(Z=a[xe],a.hasOwnProperty(xe)&&Z!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:ot(t,i,xe,null,l,Z)}for(V in l)if(Z=l[V],J=a[V],l.hasOwnProperty(V)&&Z!==J&&(Z!=null||J!=null))switch(V){case"selected":t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ot(t,i,V,Z,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)Z=a[we],a.hasOwnProperty(we)&&Z!=null&&!l.hasOwnProperty(we)&&ot(t,i,we,null,l,Z);for(X in l)if(Z=l[X],J=a[X],l.hasOwnProperty(X)&&Z!==J&&(Z!=null||J!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:ot(t,i,X,Z,l,J)}return;default:if(qo(i)){for(var lt in a)Z=a[lt],a.hasOwnProperty(lt)&&Z!==void 0&&!l.hasOwnProperty(lt)&&Gd(t,i,lt,void 0,l,Z);for(re in l)Z=l[re],J=a[re],!l.hasOwnProperty(re)||Z===J||Z===void 0&&J===void 0||Gd(t,i,re,Z,l,J);return}}for(var F in a)Z=a[F],a.hasOwnProperty(F)&&Z!=null&&!l.hasOwnProperty(F)&&ot(t,i,F,null,l,Z);for(oe in l)Z=l[oe],J=a[oe],!l.hasOwnProperty(oe)||Z===J||Z==null&&J==null||ot(t,i,oe,Z,l,J)}var Kd=null,Qd=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function Fv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Yd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $d=null;function rb(){var t=window.event;return t&&t.type==="popstate"?t===$d?!1:($d=t,!0):($d=null,!1)}var Kv=typeof setTimeout=="function"?setTimeout:void 0,sb=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,ab=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(t){return Qv.resolve(null).then(t).catch(ob)}:Kv;function ob(t){setTimeout(function(){throw t})}function qr(t){return t==="head"}function Yv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var T=t.ownerDocument;if(a&1&&Il(T.documentElement),a&2&&Il(T.body),a&4)for(a=T.head,Il(a),T=a.firstChild;T;){var A=T.nextSibling,V=T.nodeName;T[Ts]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=A}}if(h===0){t.removeChild(d),Pl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Pl(i)}function Xd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xd(a),Ar(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function lb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ts])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ai(t.nextSibling),t===null)break}return null}function ub(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ai(t.nextSibling),t===null))return null;return t}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function cb(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ai(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Zd=null;function $v(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Xv(t,i,a){switch(i=Vc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Il(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ar(t)}var Wn=new Map,Wv=new Set;function Pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ur=ie.d;ie.d={f:hb,r:fb,D:db,C:mb,L:pb,m:gb,X:vb,S:yb,M:_b};function hb(){var t=ur.f(),i=Rc();return t||i}function fb(t){var i=gi(t);i!==null&&i.tag===5&&i.type==="form"?yy(i):ur.r(t)}var $a=typeof document>"u"?null:document;function Zv(t,i,a){var l=$a;if(l&&typeof i=="string"&&i){var h=Ot(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Wv.has(h)||(Wv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),tn(i,"link",t),Rt(i),l.head.appendChild(i)))}}function db(t){ur.D(t),Zv("dns-prefetch",t,null)}function mb(t,i){ur.C(t,i),Zv("preconnect",t,i)}function pb(t,i,a){ur.L(t,i,a);var l=$a;if(l&&t&&i){var h='link[rel="preload"][as="'+Ot(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ot(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ot(a.imageSizes)+'"]')):h+='[href="'+Ot(t)+'"]';var d=h;switch(i){case"style":d=Xa(t);break;case"script":d=Wa(t)}Wn.has(d)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Wn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Cl(d))||i==="script"&&l.querySelector(xl(d))||(i=l.createElement("link"),tn(i,"link",t),Rt(i),l.head.appendChild(i)))}}function gb(t,i){ur.m(t,i);var a=$a;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Ot(l)+'"][href="'+Ot(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(t)}if(!Wn.has(d)&&(t=E({rel:"modulepreload",href:t},i),Wn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xl(d)))return}l=a.createElement("link"),tn(l,"link",t),Rt(l),a.head.appendChild(l)}}}function yb(t,i,a){ur.S(t,i,a);var l=$a;if(l&&t){var h=pn(l).hoistableStyles,d=Xa(t);i=i||"default";var T=h.get(d);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(Cl(d)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Wn.get(d))&&Jd(t,a);var V=T=l.createElement("link");Rt(V),tn(V,"link",t),V._p=new Promise(function(X,re){V.onload=X,V.onerror=re}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,kc(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:A},h.set(d,T)}}}function vb(t,i){ur.X(t,i);var a=$a;if(a&&t){var l=pn(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(xl(h)),d||(t=E({src:t,async:!0},i),(i=Wn.get(h))&&em(t,i),d=a.createElement("script"),Rt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function _b(t,i){ur.M(t,i);var a=$a;if(a&&t){var l=pn(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(xl(h)),d||(t=E({src:t,async:!0,type:"module"},i),(i=Wn.get(h))&&em(t,i),d=a.createElement("script"),Rt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Jv(t,i,a,l){var h=(h=de.current)?Pc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Xa(a.href),a=pn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xa(a.href);var d=pn(h).hoistableStyles,T=d.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,T),(d=h.querySelector(Cl(t)))&&!d._p&&(T.instance=d,T.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),d||Eb(h,t,a,T.state))),i&&l===null)throw Error(s(528,""));return T}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Wa(a),a=pn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Xa(t){return'href="'+Ot(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function e_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Eb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),Rt(i),t.head.appendChild(i))}function Wa(t){return'[src="'+Ot(t)+'"]'}function xl(t){return"script[async]"+t}function t_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Ot(a.href)+'"]');if(l)return i.instance=l,Rt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Rt(l),tn(l,"style",h),kc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Xa(a.href);var d=t.querySelector(Cl(h));if(d)return i.state.loading|=4,i.instance=d,Rt(d),d;l=e_(a),(h=Wn.get(h))&&Jd(l,h),d=(t.ownerDocument||t).createElement("link"),Rt(d);var T=d;return T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),tn(d,"link",l),i.state.loading|=4,kc(d,a.precedence,t),i.instance=d;case"script":return d=Wa(a.src),(h=t.querySelector(xl(d)))?(i.instance=h,Rt(h),h):(l=a,(h=Wn.get(d))&&(l=E({},a),em(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Rt(h),tn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,kc(l,a.precedence,t));return i.instance}function kc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function em(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var jc=null;function n_(t,i,a){if(jc===null){var l=new Map,h=jc=new Map;h.set(a,l)}else h=jc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ts]||d[Lt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var T=d.getAttribute(i)||"";T=t+T;var A=l.get(T);A?A.push(d):l.set(T,[d])}}return l}function i_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Tb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function r_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Dl=null;function Sb(){}function Ab(t,i,a){if(Dl===null)throw Error(s(475));var l=Dl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Xa(a.href),d=t.querySelector(Cl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Lc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,Rt(d);return}d=t.ownerDocument||t,a=e_(a),(h=Wn.get(h))&&Jd(a,h),d=d.createElement("link"),Rt(d);var T=d;T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),tn(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Lc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function bb(){if(Dl===null)throw Error(s(475));var t=Dl;return t.stylesheets&&t.count===0&&tm(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&tm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uc=null;function tm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uc=new Map,i.forEach(wb,t),Uc=null,Lc.call(t))}function wb(t,i){if(!(i.state.loading&4)){var a=Uc.get(t);if(a)var l=a.get(null);else{a=new Map,Uc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var T=h[d];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=i.instance,T=h.getAttribute("data-precedence"),d=a.get(T)||l,d===l&&a.set(null,h),a.set(T,h),this.count++,l=Lc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Nl={$$typeof:G,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Rb(t,i,a,l,h,d,T,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function s_(t,i,a,l,h,d,T,A,V,X,re,oe){return t=new Rb(t,i,a,T,A,V,X,oe),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),t.current=d,d.stateNode=t,i=kf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bf(d),t}function a_(t){return t?(t=Ca,t):Ca}function o_(t,i,a,l,h,d){h=a_(h),l.context===null?l.context=h:l.pendingContext=h,l=xr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Dr(t,l,i),a!==null&&(Vn(a,t,i),ol(a,t,i))}function l_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function nm(t,i){l_(t,i),(t=t.alternate)&&l_(t,i)}function u_(t){if(t.tag===13){var i=Ia(t,67108864);i!==null&&Vn(i,t,67108864),nm(t,67108864)}}var Bc=!0;function Ib(t,i,a,l){var h=ne.T;ne.T=null;var d=ie.p;try{ie.p=2,im(t,i,a,l)}finally{ie.p=d,ne.T=h}}function Cb(t,i,a,l){var h=ne.T;ne.T=null;var d=ie.p;try{ie.p=8,im(t,i,a,l)}finally{ie.p=d,ne.T=h}}function im(t,i,a,l){if(Bc){var h=rm(l);if(h===null)Fd(t,i,l,zc,a),h_(t,l);else if(Db(h,t,i,a,l))l.stopPropagation();else if(h_(t,l),i&4&&-1<xb.indexOf(t)){for(;h!==null;){var d=gi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var T=ti(d.pendingLanes);if(T!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var V=1<<31-Dt(T);A.entanglements[1]|=V,T&=~V}Di(d),(it&6)===0&&(bc=Tt()+500,bl(0))}}break;case 13:A=Ia(d,2),A!==null&&Vn(A,d,2),Rc(),nm(d,2)}if(d=rm(l),d===null&&Fd(t,i,l,zc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Fd(t,i,l,null,a)}}function rm(t){return t=qn(t),sm(t)}var zc=null;function sm(t){if(zc=null,t=zi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return zc=t,null}function c_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case En:return 2;case Ln:return 8;case on:case Oe:return 32;case ze:return 268435456;default:return 32}default:return 32}}var am=!1,Hr=null,Fr=null,Gr=null,Ol=new Map,Ml=new Map,Kr=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(t,i){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Ol.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(i.pointerId)}}function Vl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=gi(i),i!==null&&u_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Db(t,i,a,l,h){switch(i){case"focusin":return Hr=Vl(Hr,t,i,a,l,h),!0;case"dragenter":return Fr=Vl(Fr,t,i,a,l,h),!0;case"mouseover":return Gr=Vl(Gr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ol.set(d,Vl(Ol.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ml.set(d,Vl(Ml.get(d)||null,t,i,a,l,h)),!0}return!1}function f_(t){var i=zi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Ru(t.priority,function(){if(a.tag===13){var l=Mn();l=Er(l);var h=Ia(a,l);h!==null&&Vn(h,a,l),nm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=rm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Gi=l,a.target.dispatchEvent(l),Gi=null}else return i=gi(a),i!==null&&u_(i),t.blockedOn=a,!1;i.shift()}return!0}function d_(t,i,a){qc(t)&&a.delete(i)}function Nb(){am=!1,Hr!==null&&qc(Hr)&&(Hr=null),Fr!==null&&qc(Fr)&&(Fr=null),Gr!==null&&qc(Gr)&&(Gr=null),Ol.forEach(d_),Ml.forEach(d_)}function Hc(t,i){t.blockedOn===i&&(t.blockedOn=null,am||(am=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nb)))}var Fc=null;function m_(t){Fc!==t&&(Fc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fc===t&&(Fc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var d=gi(a);d!==null&&(t.splice(i,3),i-=3,sd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Pl(t){function i(V){return Hc(V,t)}Hr!==null&&Hc(Hr,t),Fr!==null&&Hc(Fr,t),Gr!==null&&Hc(Gr,t),Ol.forEach(i),Ml.forEach(i);for(var a=0;a<Kr.length;a++){var l=Kr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)f_(a),a.blockedOn===null&&Kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],T=h[Nt]||null;if(typeof d=="function")T||m_(a);else if(T){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,T=d[Nt]||null)A=T.formAction;else if(sm(h)!==null)continue}else A=T.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),m_(a)}}}function om(t){this._internalRoot=t}Gc.prototype.render=om.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Mn();o_(a,l,t,i,null,null)},Gc.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;o_(t.current,2,null,t,null,null),Rc(),i[Bn]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Tr();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Kr.length&&i!==0&&i<Kr[a].priority;a++);Kr.splice(a,0,t),a===0&&f_(t)}};var p_=e.version;if(p_!=="19.1.0")throw Error(s(527,p_,"19.1.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Ob={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ft=Kc.inject(Ob),Ze=Kc}catch{}}return jl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ny,d=Oy,T=My,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=s_(t,1,!1,null,null,a,l,h,d,T,A,null),t[Bn]=i.current,Hd(t),new om(i)},jl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ny,T=Oy,A=My,V=null,X=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks),a.formState!==void 0&&(X=a.formState)),i=s_(t,1,!0,i,a??null,l,h,d,T,A,V,X),i.context=a_(null),a=i.current,l=Mn(),l=Er(l),h=xr(l),h.callback=null,Dr(a,h,l),a=l,i.current.lanes=a,Bi(i,a),Di(i),t[Bn]=i.current,Hd(t),new Gc(i)},jl.version="19.1.0",jl}var w_;function qb(){if(w_)return cm.exports;w_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cm.exports=zb(),cm.exports}var Hb=qb(),Ll={},R_;function Fb(){if(R_)return Ll;R_=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.parse=f,Ll.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function f(S,P){const x=new u,U=S.length;if(U<2)return x;const O=(P==null?void 0:P.decode)||E;let q=0;do{const L=S.indexOf("=",q);if(L===-1)break;const G=S.indexOf(";",q),Q=G===-1?U:G;if(L>Q){q=S.lastIndexOf(";",L-1)+1;continue}const K=m(S,q,L),te=p(S,L,K),I=S.slice(K,te);if(x[I]===void 0){let R=m(S,L+1,Q),D=p(S,Q,R);const k=O(S.slice(R,D));x[I]=k}q=Q+1}while(q<U);return x}function m(S,P,x){do{const U=S.charCodeAt(P);if(U!==32&&U!==9)return P}while(++P<x);return x}function p(S,P,x){for(;P>x;){const U=S.charCodeAt(--P);if(U!==32&&U!==9)return P+1}return x}function g(S,P,x){const U=(x==null?void 0:x.encode)||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const O=U(P);if(!e.test(O))throw new TypeError(`argument val is invalid: ${P}`);let q=S+"="+O;if(!x)return q;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);q+="; Max-Age="+x.maxAge}if(x.domain){if(!n.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);q+="; Domain="+x.domain}if(x.path){if(!s.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);q+="; Path="+x.path}if(x.expires){if(!b(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);q+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(q+="; HttpOnly"),x.secure&&(q+="; Secure"),x.partitioned&&(q+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return q}function E(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function b(S){return o.call(S)==="[object Date]"}return Ll}Fb();var I_="popstate";function Gb(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Cm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Jl(o)}return Qb(e,n,null,r)}function Et(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ei(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kb(){return Math.random().toString(36).substring(2,10)}function C_(r,e){return{usr:r.state,key:r.key,idx:e}}function Cm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?vo(e):e,state:n,key:e&&e.key||s||Kb()}}function Jl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function vo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Qb(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function b(){m="POP";let O=E(),q=O==null?null:O-g;g=O,p&&p({action:m,location:U.location,delta:q})}function S(O,q){m="PUSH";let L=Cm(U.location,O,q);g=E()+1;let G=C_(L,g),Q=U.createHref(L);try{f.pushState(G,"",Q)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(Q)}u&&p&&p({action:m,location:U.location,delta:1})}function P(O,q){m="REPLACE";let L=Cm(U.location,O,q);g=E();let G=C_(L,g),Q=U.createHref(L);f.replaceState(G,"",Q),u&&p&&p({action:m,location:U.location,delta:0})}function x(O){return Yb(O)}let U={get action(){return m},get location(){return r(o,f)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(I_,b),p=O,()=>{o.removeEventListener(I_,b),p=null}},createHref(O){return e(o,O)},createURL:x,encodeLocation(O){let q=x(O);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:P,go(O){return f.go(O)}};return U}function Yb(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Jl(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function E0(r,e,n="/"){return $b(r,e,n,!1)}function $b(r,e,n,s){let o=typeof e=="string"?vo(e):e,u=mr(o.pathname||"/",n);if(u==null)return null;let f=T0(r);Xb(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=ow(u);m=sw(f[p],g,s)}return m}function T0(r,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(Et(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=fr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(Et(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),T0(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:iw(g,u.index),routesMeta:E})};return r.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of S0(u.path))o(u,f,p)}),e}function S0(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=S0(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function Xb(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:rw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Wb=/^:[\w-]+$/,Zb=3,Jb=2,ew=1,tw=10,nw=-2,x_=r=>r==="*";function iw(r,e){let n=r.split("/"),s=n.length;return n.some(x_)&&(s+=nw),e&&(s+=Jb),n.filter(o=>!x_(o)).reduce((o,u)=>o+(Wb.test(u)?Zb:u===""?ew:tw),s)}function rw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function sw(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",b=dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),S=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:fr([u,b.pathname]),pathnameBase:hw(fr([u,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(u=fr([u,b.pathnameBase]))}return f}function dh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=aw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:b},S)=>{if(E==="*"){let x=m[S]||"";f=u.slice(0,u.length-x.length).replace(/(.)\/+$/,"$1")}const P=m[S];return b&&!P?g[E]=void 0:g[E]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function aw(r,e=!1,n=!0){ei(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function ow(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ei(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function mr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function lw(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?vo(r):r;return{pathname:n?n.startsWith("/")?n:uw(n,e):e,search:fw(s),hash:dw(o)}}function uw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function mm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sp(r){let e=cw(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function ap(r,e,n,s=!1){let o;typeof r=="string"?o=vo(r):(o={...r},Et(!o.pathname||!o.pathname.includes("?"),mm("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),mm("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),mm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let b=e.length-1;if(!s&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),b-=1;o.pathname=S.join("/")}m=b>=0?e[b]:"/"}let p=lw(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var fr=r=>r.join("/").replace(/\/\/+/g,"/"),hw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,dw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function mw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var A0=["POST","PUT","PATCH","DELETE"];new Set(A0);var pw=["GET",...A0];new Set(pw);var _o=C.createContext(null);_o.displayName="DataRouter";var Vh=C.createContext(null);Vh.displayName="DataRouterState";var b0=C.createContext({isTransitioning:!1});b0.displayName="ViewTransition";var gw=C.createContext(new Map);gw.displayName="Fetchers";var yw=C.createContext(null);yw.displayName="Await";var di=C.createContext(null);di.displayName="Navigation";var cu=C.createContext(null);cu.displayName="Location";var mi=C.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var op=C.createContext(null);op.displayName="RouteError";function vw(r,{relative:e}={}){Et(Eo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=C.useContext(di),{hash:o,pathname:u,search:f}=fu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:fr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Eo(){return C.useContext(cu)!=null}function kn(){return Et(Eo(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(cu).location}var w0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R0(r){C.useContext(di).static||C.useLayoutEffect(r)}function To(){let{isDataRoute:r}=C.useContext(mi);return r?Nw():_w()}function _w(){Et(Eo(),"useNavigate() may be used only in the context of a <Router> component.");let r=C.useContext(_o),{basename:e,navigator:n}=C.useContext(di),{matches:s}=C.useContext(mi),{pathname:o}=kn(),u=JSON.stringify(sp(s)),f=C.useRef(!1);return R0(()=>{f.current=!0}),C.useCallback((p,g={})=>{if(ei(f.current,w0),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=ap(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:fr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}C.createContext(null);function hu(){let{matches:r}=C.useContext(mi),e=r[r.length-1];return e?e.params:{}}function fu(r,{relative:e}={}){let{matches:n}=C.useContext(mi),{pathname:s}=kn(),o=JSON.stringify(sp(n));return C.useMemo(()=>ap(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function Ew(r,e){return I0(r,e)}function I0(r,e,n,s){var q;Et(Eo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(di),{matches:u}=C.useContext(mi),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",E=f&&f.route;{let L=E&&E.path||"";C0(p,!E||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let b=kn(),S;if(e){let L=typeof e=="string"?vo(e):e;Et(g==="/"||((q=L.pathname)==null?void 0:q.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),S=L}else S=b;let P=S.pathname||"/",x=P;if(g!=="/"){let L=g.replace(/^\//,"").split("/");x="/"+P.replace(/^\//,"").split("/").slice(L.length).join("/")}let U=E0(r,{pathname:x});ei(E||U!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ei(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=ww(U&&U.map(L=>Object.assign({},L,{params:Object.assign({},m,L.params),pathname:fr([g,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:fr([g,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),u,n,s);return e&&O?C.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},O):O}function Tw(){let r=Dw(),e=mw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:u},"ErrorBoundary")," or"," ",C.createElement("code",{style:u},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,f)}var Sw=C.createElement(Tw,null),Aw=class extends C.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?C.createElement(mi.Provider,{value:this.props.routeContext},C.createElement(op.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bw({routeContext:r,match:e,children:n}){let s=C.useContext(_o);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(mi.Provider,{value:r},n)}function ww(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);Et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:b}=n,S=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let b,S=!1,P=null,x=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,P=g.route.errorElement||Sw,f&&(m<0&&E===0?(C0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,x=null):m===E&&(S=!0,x=g.route.hydrateFallbackElement||null)));let U=e.concat(o.slice(0,E+1)),O=()=>{let q;return b?q=P:S?q=x:g.route.Component?q=C.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=p,C.createElement(bw,{match:g,routeContext:{outlet:p,matches:U,isDataRoute:n!=null},children:q})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?C.createElement(Aw,{location:n.location,revalidation:n.revalidation,component:P,error:b,children:O(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):O()},null)}function lp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rw(r){let e=C.useContext(_o);return Et(e,lp(r)),e}function Iw(r){let e=C.useContext(Vh);return Et(e,lp(r)),e}function Cw(r){let e=C.useContext(mi);return Et(e,lp(r)),e}function up(r){let e=Cw(r),n=e.matches[e.matches.length-1];return Et(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function xw(){return up("useRouteId")}function Dw(){var s;let r=C.useContext(op),e=Iw("useRouteError"),n=up("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function Nw(){let{router:r}=Rw("useNavigate"),e=up("useNavigate"),n=C.useRef(!1);return R0(()=>{n.current=!0}),C.useCallback(async(o,u={})=>{ei(n.current,w0),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var D_={};function C0(r,e,n){!e&&!D_[r]&&(D_[r]=!0,ei(!1,n))}C.memo(Ow);function Ow({routes:r,future:e,state:n}){return I0(r,void 0,n,e)}function Mw({to:r,replace:e,state:n,relative:s}){Et(Eo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(di);ei(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=C.useContext(mi),{pathname:f}=kn(),m=To(),p=ap(r,sp(u),f,s==="path"),g=JSON.stringify(p);return C.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function oi(r){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){Et(!Eo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=vo(n));let{pathname:p="/",search:g="",hash:E="",state:b=null,key:S="default"}=n,P=C.useMemo(()=>{let x=mr(p,f);return x==null?null:{location:{pathname:x,search:g,hash:E,state:b,key:S},navigationType:s}},[f,p,g,E,b,S,s]);return ei(P!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:C.createElement(di.Provider,{value:m},C.createElement(cu.Provider,{children:e,value:P}))}function Pw({children:r,location:e}){return Ew(xm(r),e)}function xm(r,e=[]){let n=[];return C.Children.forEach(r,(s,o)=>{if(!C.isValidElement(s))return;let u=[...e,o];if(s.type===C.Fragment){n.push.apply(n,xm(s.props.children,u));return}Et(s.type===oi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=xm(s.props.children,u)),n.push(f)}),n}var th="get",nh="application/x-www-form-urlencoded";function Ph(r){return r!=null&&typeof r.tagName=="string"}function kw(r){return Ph(r)&&r.tagName.toLowerCase()==="button"}function jw(r){return Ph(r)&&r.tagName.toLowerCase()==="form"}function Lw(r){return Ph(r)&&r.tagName.toLowerCase()==="input"}function Uw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Bw(r,e){return r.button===0&&(!e||e==="_self")&&!Uw(r)}function Dm(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function zw(r,e){let n=Dm(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Qc=null;function qw(){if(Qc===null)try{new FormData(document.createElement("form"),0),Qc=!1}catch{Qc=!0}return Qc}var Hw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(r){return r!=null&&!Hw.has(r)?(ei(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nh}"`),null):r}function Fw(r,e){let n,s,o,u,f;if(jw(r)){let m=r.getAttribute("action");s=m?mr(m,e):null,n=r.getAttribute("method")||th,o=pm(r.getAttribute("enctype"))||nh,u=new FormData(r)}else if(kw(r)||Lw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?mr(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||th,o=pm(r.getAttribute("formenctype"))||pm(m.getAttribute("enctype"))||nh,u=new FormData(m,r),!qw()){let{name:g,type:E,value:b}=r;if(E==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,b)}}else{if(Ph(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=th,s=null,o=nh,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function cp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function Gw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Qw(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await Gw(u,n);return f.links?f.links():[]}return[]}));return Ww(s.flat(1).filter(Kw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function N_(r,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var b;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Yw(r,e,{includeHydrateFallback:n}={}){return $w(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function $w(r){return[...new Set(r)]}function Xw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function Ww(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(Xw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zw=new Set([100,101,204,205]);function Jw(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&mr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function x0(){let r=C.useContext(_o);return cp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function e1(){let r=C.useContext(Vh);return cp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var hp=C.createContext(void 0);hp.displayName="FrameworkContext";function D0(){let r=C.useContext(hp);return cp(r,"You must render this element inside a <HydratedRouter> element"),r}function t1(r,e){let n=C.useContext(hp),[s,o]=C.useState(!1),[u,f]=C.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:b}=e,S=C.useRef(null);C.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let U=q=>{q.forEach(L=>{f(L.isIntersecting)})},O=new IntersectionObserver(U,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[r]),C.useEffect(()=>{if(s){let U=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(U)}}},[s]);let P=()=>{o(!0)},x=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,S,{}]:[u,S,{onFocus:Ul(m,P),onBlur:Ul(p,x),onMouseEnter:Ul(g,P),onMouseLeave:Ul(E,x),onTouchStart:Ul(b,P)}]:[!1,S,{}]}function Ul(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function n1({page:r,...e}){let{router:n}=x0(),s=C.useMemo(()=>E0(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?C.createElement(r1,{page:r,matches:s,...e}):null}function i1(r){let{manifest:e,routeModules:n}=D0(),[s,o]=C.useState([]);return C.useEffect(()=>{let u=!1;return Qw(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function r1({page:r,matches:e,...n}){let s=kn(),{manifest:o,routeModules:u}=D0(),{basename:f}=x0(),{loaderData:m,matches:p}=e1(),g=C.useMemo(()=>N_(r,e,p,o,s,"data"),[r,e,p,o,s]),E=C.useMemo(()=>N_(r,e,p,o,s,"assets"),[r,e,p,o,s]),b=C.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let x=new Set,U=!1;if(e.forEach(q=>{var G;let L=o.routes[q.route.id];!L||!L.hasLoader||(!g.some(Q=>Q.route.id===q.route.id)&&q.route.id in m&&((G=u[q.route.id])!=null&&G.shouldRevalidate)||L.hasClientLoader?U=!0:x.add(q.route.id))}),x.size===0)return[];let O=Jw(r,f);return U&&x.size>0&&O.searchParams.set("_routes",e.filter(q=>x.has(q.route.id)).map(q=>q.route.id).join(",")),[O.pathname+O.search]},[f,m,s,o,g,e,r,u]),S=C.useMemo(()=>Yw(E,o),[E,o]),P=i1(E);return C.createElement(C.Fragment,null,b.map(x=>C.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),S.map(x=>C.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),P.map(({key:x,link:U})=>C.createElement("link",{key:x,...U})))}function s1(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var N0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{N0&&(window.__reactRouterVersion="7.6.2")}catch{}function a1({basename:r,children:e,window:n}){let s=C.useRef();s.current==null&&(s.current=Gb({window:n,v5Compat:!0}));let o=s.current,[u,f]=C.useState({action:o.action,location:o.location}),m=C.useCallback(p=>{C.startTransition(()=>f(p))},[f]);return C.useLayoutEffect(()=>o.listen(m),[o,m]),C.createElement(Vw,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var O0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Be=C.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:b,...S},P){let{basename:x}=C.useContext(di),U=typeof g=="string"&&O0.test(g),O,q=!1;if(typeof g=="string"&&U&&(O=g,N0))try{let D=new URL(window.location.href),k=g.startsWith("//")?new URL(D.protocol+g):new URL(g),j=mr(k.pathname,x);k.origin===D.origin&&j!=null?g=j+k.search+k.hash:q=!0}catch{ei(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=vw(g,{relative:o}),[G,Q,K]=t1(s,S),te=c1(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:b});function I(D){e&&e(D),D.defaultPrevented||te(D)}let R=C.createElement("a",{...S,...K,href:O||L,onClick:q||u?e:I,ref:s1(P,Q),target:p,"data-discover":!U&&n==="render"?"true":void 0});return G&&!U?C.createElement(C.Fragment,null,R,C.createElement(n1,{page:L})):R});Be.displayName="Link";var o1=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let b=fu(f,{relative:g.relative}),S=kn(),P=C.useContext(Vh),{navigator:x,basename:U}=C.useContext(di),O=P!=null&&p1(b)&&m===!0,q=x.encodeLocation?x.encodeLocation(b).pathname:b.pathname,L=S.pathname,G=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(L=L.toLowerCase(),G=G?G.toLowerCase():null,q=q.toLowerCase()),G&&U&&(G=mr(G,U)||G);const Q=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let K=L===q||!o&&L.startsWith(q)&&L.charAt(Q)==="/",te=G!=null&&(G===q||!o&&G.startsWith(q)&&G.charAt(q.length)==="/"),I={isActive:K,isPending:te,isTransitioning:O},R=K?e:void 0,D;typeof s=="function"?D=s(I):D=[s,K?"active":null,te?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(I):u;return C.createElement(Be,{...g,"aria-current":R,className:D,ref:E,style:k,to:f,viewTransition:m},typeof p=="function"?p(I):p)});o1.displayName="NavLink";var l1=C.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=th,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:b,...S},P)=>{let x=d1(),U=m1(m,{relative:g}),O=f.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&O0.test(m),L=G=>{if(p&&p(G),G.defaultPrevented)return;G.preventDefault();let Q=G.nativeEvent.submitter,K=(Q==null?void 0:Q.getAttribute("formmethod"))||f;x(Q||G.currentTarget,{fetcherKey:e,method:K,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:b})};return C.createElement("form",{ref:P,method:O,action:U,onSubmit:s?p:L,...S,"data-discover":!q&&r==="render"?"true":void 0})});l1.displayName="Form";function u1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M0(r){let e=C.useContext(_o);return Et(e,u1(r)),e}function c1(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=To(),p=kn(),g=fu(r,{relative:u});return C.useCallback(E=>{if(Bw(E,e)){E.preventDefault();let b=n!==void 0?n:Jl(p)===Jl(g);m(r,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,r,o,u,f])}function kh(r){ei(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(Dm(r)),n=C.useRef(!1),s=kn(),o=C.useMemo(()=>zw(s.search,n.current?null:e.current),[s.search]),u=To(),f=C.useCallback((m,p)=>{const g=Dm(typeof m=="function"?m(o):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,f]}var h1=0,f1=()=>`__${String(++h1)}__`;function d1(){let{router:r}=M0("useSubmit"),{basename:e}=C.useContext(di),n=xw();return C.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=Fw(s,e);if(o.navigate===!1){let E=o.fetcherKey||f1();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function m1(r,{relative:e}={}){let{basename:n}=C.useContext(di),s=C.useContext(mi);Et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(r||".",{relative:e})},f=kn();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:fr([n,u.pathname])),Jl(u)}function p1(r,e={}){let n=C.useContext(b0);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=M0("useViewTransitionState"),o=fu(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=mr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=mr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return dh(o.pathname,f)!=null||dh(o.pathname,u)!=null}[...Zw];const O_="FLASH FLASH ";function ji(r){C.useEffect(()=>{const e=r?`${r} | ${O_}`:O_;document.title=e},[r])}const g1=()=>(ji("Home"),v.jsxs("div",{style:{padding:"2em",maxWidth:"960px",margin:"0 auto"},children:[v.jsx("h1",{children:" FLASH FLASH "}),v.jsx("p",{children:""}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.2em",marginTop:"1.4em"},children:[v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h2",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),v.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:" /  / "}),v.jsx("li",{children:""})]}),v.jsx("p",{style:{marginBottom:0},children:v.jsx(Be,{to:"/login",children:""})}),v.jsx("p",{style:{marginTop:"0.4em",marginBottom:0},children:v.jsx(Be,{to:"/dashboard",children:""})})]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h2",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),v.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:""})]}),v.jsx("p",{style:{marginBottom:0},children:v.jsx(Be,{to:"/score-summary",children:""})})]})]}),v.jsxs("section",{style:{border:"1px dashed #bbb",borderRadius:"10px",padding:"1em",marginTop:"1.2em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:"admin"}),v.jsx("p",{style:{marginBottom:0},children:v.jsx(Be,{to:"/system-admin",children:""})})]})]})),y1=()=>{};var M_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},v1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},P0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let S=(m&15)<<2|g>>6,P=g&63;p||(P=64,f||(S=64)),s.push(n[E],n[b],n[S],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(V0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):v1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new _1;const S=u<<2|m>>4;if(s.push(S),g!==64){const P=m<<4&240|g>>2;if(s.push(P),b!==64){const x=g<<6&192|b;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E1=function(r){const e=V0(r);return P0.encodeByteArray(e,!0)},mh=function(r){return E1(r).replace(/\./g,"")},k0=function(r){try{return P0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=()=>T1().__FIREBASE_DEFAULTS__,A1=()=>{if(typeof process>"u"||typeof M_>"u")return;const r=M_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},b1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&k0(r[1]);return e&&JSON.parse(e)},jh=()=>{try{return y1()||S1()||A1()||b1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},j0=r=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},w1=r=>{const e=j0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},L0=()=>{var r;return(r=jh())===null||r===void 0?void 0:r.config},U0=r=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(r){return r.endsWith(".cloudworkstations.dev")}async function B0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[mh(JSON.stringify(n)),mh(JSON.stringify(f)),""].join(".")}const Ql={};function C1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?r.emulator.push(e):r.prod.push(e);return r}function x1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let V_=!1;function z0(r,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||Ql[r]===e||Ql[r]||V_)return;Ql[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=C1().prod.length>0;function f(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{V_=!0,f()},S}function E(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=x1(s),P=n("text"),x=document.getElementById(P)||document.createElement("span"),U=n("learnmore"),O=document.getElementById(U)||document.createElement("a"),q=n("preprendIcon"),L=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const G=S.element;m(G),E(O,U);const Q=g();p(L,q),G.append(L,x,O,Q),document.body.appendChild(G)}u?(x.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function N1(){var r;const e=(r=jh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function V1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P1(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function k1(){return!N1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j1(){try{return typeof indexedDB=="object"}catch{return!1}}function L1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="FirebaseError";class _r extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=U1,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?B1(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new _r(o,m,s)}}function B1(r,e){return r.replace(z1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const z1=/\{\$([^}]+)}/g;function q1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(P_(u)&&P_(f)){if(!Zs(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function P_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function zl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ql(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function H1(r,e){const n=new F1(r,e);return n.subscribe.bind(n)}class F1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");G1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=gm),o.error===void 0&&(o.error=gm),o.complete===void 0&&(o.complete=gm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r){return r&&r._delegate?r._delegate:r}class Js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new R1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y1(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Q1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q1(r){return r===Xs?void 0:r}function Y1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new K1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const X1={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},W1=qe.INFO,Z1={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},J1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Z1[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=W1,this._logHandler=J1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const eR=(r,e)=>e.some(n=>r instanceof n);let k_,j_;function tR(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q0=new WeakMap,Nm=new WeakMap,H0=new WeakMap,ym=new WeakMap,dp=new WeakMap;function iR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(es(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&q0.set(n,r)}).catch(()=>{}),dp.set(e,r),e}function rR(r){if(Nm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Nm.set(r,e)}let Om={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Nm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||H0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return es(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sR(r){Om=r(Om)}function aR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(vm(this),e,...n);return H0.set(s,e.sort?e.sort():[e]),es(s)}:nR().includes(r)?function(...e){return r.apply(vm(this),e),es(q0.get(this))}:function(...e){return es(r.apply(vm(this),e))}}function oR(r){return typeof r=="function"?aR(r):(r instanceof IDBTransaction&&rR(r),eR(r,tR())?new Proxy(r,Om):r)}function es(r){if(r instanceof IDBRequest)return iR(r);if(ym.has(r))return ym.get(r);const e=oR(r);return e!==r&&(ym.set(r,e),dp.set(e,r)),e}const vm=r=>dp.get(r);function lR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=es(f);return s&&f.addEventListener("upgradeneeded",p=>{s(es(f.result),p.oldVersion,p.newVersion,es(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const uR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],_m=new Map;function L_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(_m.get(e))return _m.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=cR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||uR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return _m.set(e,u),u}sR(r=>({...r,get:(e,n,s)=>L_(e,n)||r.get(e,n,s),has:(e,n)=>!!L_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",U_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new fp("@firebase/app"),dR="@firebase/app-compat",mR="@firebase/analytics-compat",pR="@firebase/analytics",gR="@firebase/app-check-compat",yR="@firebase/app-check",vR="@firebase/auth",_R="@firebase/auth-compat",ER="@firebase/database",TR="@firebase/data-connect",SR="@firebase/database-compat",AR="@firebase/functions",bR="@firebase/functions-compat",wR="@firebase/installations",RR="@firebase/installations-compat",IR="@firebase/messaging",CR="@firebase/messaging-compat",xR="@firebase/performance",DR="@firebase/performance-compat",NR="@firebase/remote-config",OR="@firebase/remote-config-compat",MR="@firebase/storage",VR="@firebase/storage-compat",PR="@firebase/firestore",kR="@firebase/ai",jR="@firebase/firestore-compat",LR="firebase",UR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",BR={[Mm]:"fire-core",[dR]:"fire-core-compat",[pR]:"fire-analytics",[mR]:"fire-analytics-compat",[yR]:"fire-app-check",[gR]:"fire-app-check-compat",[vR]:"fire-auth",[_R]:"fire-auth-compat",[ER]:"fire-rtdb",[TR]:"fire-data-connect",[SR]:"fire-rtdb-compat",[AR]:"fire-fn",[bR]:"fire-fn-compat",[wR]:"fire-iid",[RR]:"fire-iid-compat",[IR]:"fire-fcm",[CR]:"fire-fcm-compat",[xR]:"fire-perf",[DR]:"fire-perf-compat",[NR]:"fire-rc",[OR]:"fire-rc-compat",[MR]:"fire-gcs",[VR]:"fire-gcs-compat",[PR]:"fire-fst",[jR]:"fire-fst-compat",[kR]:"fire-vertex","fire-js":"fire-js",[LR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Map,zR=new Map,Pm=new Map;function B_(r,e){try{r.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function lo(r){const e=r.name;if(Pm.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,r);for(const n of ph.values())B_(n,r);for(const n of zR.values())B_(n,r);return!0}function mp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function li(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new du("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=UR;function F0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Vm,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ts.create("bad-app-name",{appName:String(o)});if(n||(n=L0()),!n)throw ts.create("no-options");const u=ph.get(o);if(u){if(Zs(n,u.options)&&Zs(s,u.config))return u;throw ts.create("duplicate-app",{appName:o})}const f=new $1(o);for(const p of Pm.values())f.addComponent(p);const m=new HR(n,s,f);return ph.set(o,m),m}function G0(r=Vm){const e=ph.get(r);if(!e&&r===Vm&&L0())return F0();if(!e)throw ts.create("no-app",{appName:r});return e}function ns(r,e,n){var s;let o=(s=BR[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(m.join(" "));return}lo(new Js(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="firebase-heartbeat-database",GR=1,eu="firebase-heartbeat-store";let Em=null;function K0(){return Em||(Em=lR(FR,GR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ts.create("idb-open",{originalErrorMessage:r.message})})),Em}async function KR(r){try{const n=(await K0()).transaction(eu),s=await n.objectStore(eu).get(Q0(r));return await n.done,s}catch(e){if(e instanceof _r)pr.warn(e.message);else{const n=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function z_(r,e){try{const s=(await K0()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,Q0(r)),await s.done}catch(n){if(n instanceof _r)pr.warn(n.message);else{const s=ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function Q0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,YR=30;class $R{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=q_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>YR){const f=ZR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=q_(),{heartbeatsToSend:s,unsentEntries:o}=XR(this._heartbeatsCache.heartbeats),u=mh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return pr.warn(n),""}}}function q_(){return new Date().toISOString().substring(0,10)}function XR(r,e=QR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),H_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),H_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class WR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j1()?L1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return z_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return z_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function H_(r){return mh(JSON.stringify({version:2,heartbeats:r})).length}function ZR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(r){lo(new Js("platform-logger",e=>new hR(e),"PRIVATE")),lo(new Js("heartbeat",e=>new $R(e),"PRIVATE")),ns(Mm,U_,r),ns(Mm,U_,"esm2017"),ns("fire-js","")}JR("");function pp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function Y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eI=Y0,$0=new du("auth","Firebase",Y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new fp("@firebase/auth");function tI(r,...e){gh.logLevel<=qe.WARN&&gh.warn(`Auth (${Ao}): ${r}`,...e)}function ih(r,...e){gh.logLevel<=qe.ERROR&&gh.error(`Auth (${Ao}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...e){throw gp(r,...e)}function Oi(r,...e){return gp(r,...e)}function X0(r,e,n){const s=Object.assign(Object.assign({},eI()),{[e]:n});return new du("auth","Firebase",s).create(e,{appName:r.name})}function is(r){return X0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return $0.create(r,...e)}function Ie(r,e,...n){if(!r)throw gp(e,...n)}function cr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ih(e),new Error(e)}function gr(r,e){r||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function nI(){return F_()==="http:"||F_()==="https:"}function F_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nI()||M1()||"connection"in navigator)?navigator.onLine:!0}function rI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=D1()||V1()}get(){return iI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(r,e){gr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oI=new pu(3e4,6e4);function ra(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ms(r,e,n,s,o={}){return Z0(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return O1()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&So(r.emulatorConfig.host)&&(g.credentials="include"),W0.fetch()(await J0(r,r.config.apiHost,n,m),g)})}async function Z0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},sI),e);try{const o=new uI(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Yc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Yc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Yc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw X0(r,E,g);ci(r,E)}}catch(o){if(o instanceof _r)throw o;ci(r,"network-request-failed",{message:String(o)})}}async function Lh(r,e,n,s,o={}){const u=await ms(r,e,n,s,o);return"mfaPendingCredential"in u&&ci(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function J0(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?yp(r.config,o):`${r.config.apiScheme}://${o}`;return aI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function lI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Oi(this.auth,"network-request-failed")),oI.get())})}}function Yc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Oi(r,e,s);return o.customData._tokenResponse=n,o}function G_(r){return r!==void 0&&r.enterprise!==void 0}class cI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hI(r,e){return ms(r,"GET","/v2/recaptchaConfig",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r,e){return ms(r,"POST","/v1/accounts:delete",e)}async function yh(r,e){return ms(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dI(r,e=!1){const n=Xt(r),s=await n.getIdToken(e),o=vp(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Yl(Tm(o.auth_time)),issuedAtTime:Yl(Tm(o.iat)),expirationTime:Yl(Tm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Tm(r){return Number(r)*1e3}function vp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const o=k0(n);return o?JSON.parse(o):(ih("Failed to decode base64 JWT payload"),null)}catch(o){return ih("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function K_(r){const e=vp(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof _r&&mI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function mI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await tu(r,yh(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?eT(u.providerUserInfo):[],m=yI(r.providerData,f),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new jm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,b)}async function gI(r){const e=Xt(r);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function eT(r){return r.map(e=>{var{providerId:n}=e,s=pp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(r,e){const n=await Z0(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await J0(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&So(r.emulatorConfig.host)&&(p.credentials="include"),W0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _I(r,e){return ms(r,"POST","/v2/accounts:revokeToken",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=K_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await vI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new ro;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new jm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dI(this,e)}reload(){return gI(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await tu(this,fI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,x=(f=n.photoURL)!==null&&f!==void 0?f:void 0,U=(m=n.tenantId)!==null&&m!==void 0?m:void 0,O=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,q=(g=n.createdAt)!==null&&g!==void 0?g:void 0,L=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:G,emailVerified:Q,isAnonymous:K,providerData:te,stsTokenManager:I}=n;Ie(G&&I,e,"internal-error");const R=ro.fromJSON(this.name,I);Ie(typeof G=="string",e,"internal-error"),Yr(b,e.name),Yr(S,e.name),Ie(typeof Q=="boolean",e,"internal-error"),Ie(typeof K=="boolean",e,"internal-error"),Yr(P,e.name),Yr(x,e.name),Yr(U,e.name),Yr(O,e.name),Yr(q,e.name),Yr(L,e.name);const D=new ui({uid:G,auth:e,email:S,emailVerified:Q,displayName:b,isAnonymous:K,photoURL:x,phoneNumber:P,tenantId:U,stsTokenManager:R,createdAt:q,lastLoginAt:L});return te&&Array.isArray(te)&&(D.providerData=te.map(k=>Object.assign({},k))),O&&(D._redirectEventId=O),D}static async _fromIdTokenResponse(e,n,s=!1){const o=new ro;o.updateFromServerResponse(n);const u=new ui({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await vh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?eT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ro;m.updateFromIdToken(s);const p=new ui({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;function hr(r){gr(r instanceof Function,"Expected a class definition");let e=Q_.get(r);return e?(gr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Q_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tT.type="NONE";const Y_=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(r,e,n){return`firebase:${r}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=rh(this.userKey,o.apiKey,u),this.fullPersistenceKey=rh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yh(this.auth,{idToken:e}).catch(()=>{});return n?ui._fromGetAccountInfoResponse(this.auth,n,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(hr(Y_),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||hr(Y_);const f=rh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let b;if(typeof E=="string"){const S=await yh(e,{idToken:E}).catch(()=>{});if(!S)break;b=await ui._fromGetAccountInfoResponse(e,S,E)}else b=ui._fromJSON(e,E);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new so(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new so(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oT(e))return"Blackberry";if(lT(e))return"Webos";if(iT(e))return"Safari";if((e.includes("chrome/")||rT(e))&&!e.includes("edge/"))return"Chrome";if(aT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function nT(r=dn()){return/firefox\//i.test(r)}function iT(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rT(r=dn()){return/crios\//i.test(r)}function sT(r=dn()){return/iemobile/i.test(r)}function aT(r=dn()){return/android/i.test(r)}function oT(r=dn()){return/blackberry/i.test(r)}function lT(r=dn()){return/webos/i.test(r)}function _p(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function EI(r=dn()){var e;return _p(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TI(){return P1()&&document.documentMode===10}function uT(r=dn()){return _p(r)||aT(r)||lT(r)||oT(r)||/windows phone/i.test(r)||sT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,e=[]){let n;switch(r){case"Browser":n=$_(dn());break;case"Worker":n=`${$_(dn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(r,e={}){return ms(r,"GET","/v2/passwordPolicy",ra(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=6;class wI{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:bI,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X_(this),this.idTokenSubscription=new X_(this),this.beforeStateQueue=new SI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yh(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(is(this));const n=e?Xt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AI(this),n=new wI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await _I(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bo(r){return Xt(r)}class X_{constructor(e){this.auth=e,this.observer=null,this.addObserver=H1(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function II(r){Uh=r}function hT(r){return Uh.loadJS(r)}function CI(){return Uh.recaptchaEnterpriseScript}function xI(){return Uh.gapiScript}function DI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class NI{constructor(){this.enterprise=new OI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MI="recaptcha-enterprise",fT="NO_RECAPTCHA";class VI{constructor(e){this.type=MI,this.auth=bo(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{hI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new cI(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;G_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(fT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&G_(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=CI();p.length!==0&&(p+=m),hT(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function W_(r,e,n,s=!1,o=!1){const u=new VI(r);let f;if(o)f=fT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Z_(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await W_(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await W_(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(r,e){const n=mp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Zs(u,e??{}))return o;ci(o,"already-initialized")}return n.initialize({options:e})}function kI(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function jI(r,e,n){const s=bo(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=dT(e),{host:f,port:m}=LI(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(Zs(g,s.config.emulator)&&Zs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,So(f)?(B0(`${u}//${f}${p}`),z0("Auth",!0)):UI()}function dT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function LI(r){const e=dT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:J_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:J_(f)}}}function J_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function UI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function BI(r,e){return ms(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e){return Lh(r,"POST","/v1/accounts:signInWithPassword",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(r,e){return Lh(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,e))}async function HI(r,e){return Lh(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Ep{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new nu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z_(e,n,"signInWithPassword",zI);case"emailLink":return qI(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z_(e,s,"signUpPassword",BI);case"emailLink":return HI(e,{idToken:n,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(r,e){return Lh(r,"POST","/v1/accounts:signInWithIdp",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="http://localhost";class ea extends Ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=pp(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ea(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:FI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KI(r){const e=zl(ql(r)).link,n=e?zl(ql(e)).deep_link_id:null,s=zl(ql(r)).deep_link_id;return(s?zl(ql(s)).link:null)||s||n||e||r}class Tp{constructor(e){var n,s,o,u,f,m;const p=zl(ql(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,b=GI((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&E&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=KI(e);try{return new Tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Tp.parseLink(n);return Ie(s,"argument-error"),nu._fromEmailAndCode(e,s.code,s.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends mT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends gu{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xr.credential(n,s)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends gu{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends gu{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ui._fromIdTokenResponse(e,s,o),f=eE(s);return new uo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=eE(s);return new uo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function eE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends _r{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,_h.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new _h(e,n,s,o)}}function pT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?_h._fromErrorAndOperation(r,u,e,s):u})}async function QI(r,e,n=!1){const s=await tu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return uo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(r,e,n=!1){const{auth:s}=r;if(li(s.app))return Promise.reject(is(s));const o="reauthenticate";try{const u=await tu(r,pT(s,o,e,r),n);Ie(u.idToken,s,"internal-error");const f=vp(u.idToken);Ie(f,s,"internal-error");const{sub:m}=f;return Ie(r.uid===m,s,"user-mismatch"),uo._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ci(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(r,e,n=!1){if(li(r.app))return Promise.reject(is(r));const s="signIn",o=await pT(r,s,e),u=await uo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function $I(r,e){return gT(bo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(r){const e=bo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function WI(r,e,n){return li(r.app)?Promise.reject(is(r)):$I(Xt(r),wo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&XI(r),s})}function ZI(r,e,n,s){return Xt(r).onIdTokenChanged(e,n,s)}function JI(r,e,n){return Xt(r).beforeAuthStateChanged(e,n)}function yT(r,e,n,s){return Xt(r).onAuthStateChanged(e,n,s)}function eC(r){return Xt(r).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1e3,nC=10;class _T extends vT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);TI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_T.type="LOCAL";const iC=_T;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET extends vT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ET.type="SESSION";const TT=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Bh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await rC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Sp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function aC(r){Mi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function oC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function uC(){return ST()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebaseLocalStorageDb",cC=1,Th="firebaseLocalStorage",bT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(r,e){return r.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function hC(){const r=indexedDB.deleteDatabase(AT);return new yu(r).toPromise()}function Lm(){const r=indexedDB.open(AT,cC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Th,{keyPath:bT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Th)?e(s):(s.close(),await hC(),e(await Lm()))})})}async function tE(r,e,n){const s=zh(r,!0).put({[bT]:e,value:n});return new yu(s).toPromise()}async function fC(r,e){const n=zh(r,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function nE(r,e){const n=zh(r,!0).delete(e);return new yu(n).toPromise()}const dC=800,mC=3;class wT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>mC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ST()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(uC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oC(),!this.activeServiceWorker)return;this.sender=new sC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await tE(e,Eh,"1"),await nE(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>tE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>fC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=zh(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wT.type="LOCAL";const pC=wT;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(r,e){return e?hr(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends Ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yC(r){return gT(r.auth,new Ap(r),r.bypassAuthState)}function vC(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),YI(n,new Ap(r),r.bypassAuthState)}async function _C(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),QI(n,new Ap(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return _C;case"reauthViaPopup":case"reauthViaRedirect":return vC;default:ci(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new pu(2e3,1e4);class no extends RT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EC.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="pendingRedirect",sh=new Map;class SC extends RT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const s=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(r,e){const n=RC(e),s=wC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function bC(r,e){sh.set(r._key(),e)}function wC(r){return hr(r._redirectPersistence)}function RC(r){return rh(TC,r.config.apiKey,r.name)}async function IC(r,e,n=!1){if(li(r.app))return Promise.reject(is(r));const s=bo(r),o=gC(s,e),f=await new SC(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*60*1e3;class xC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!IT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(iE(e))}saveEventToCache(e){this.cachedEventUids.add(iE(e)),this.lastProcessedEventTime=Date.now()}}function iE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function IT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(r,e={}){return ms(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MC=/^https?/;async function VC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NC(r);for(const n of e)try{if(PC(n))return}catch{}ci(r,"unauthorized-domain")}function PC(r){const e=km(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!MC.test(n))return!1;if(OC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new pu(3e4,6e4);function rE(){const r=Mi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function jC(r){return new Promise((e,n)=>{var s,o,u;function f(){rE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rE(),n(Oi(r,"network-request-failed"))},timeout:kC.get()})}if(!((o=(s=Mi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Mi().gapi)===null||u===void 0)&&u.load)f();else{const m=DI("iframefcb");return Mi()[m]=()=>{gapi.load?f():n(Oi(r,"network-request-failed"))},hT(`${xI()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw ah=null,e})}let ah=null;function LC(r){return ah=ah||jC(r),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new pu(5e3,15e3),BC="__/auth/iframe",zC="emulator/auth/iframe",qC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?yp(e,zC):`https://${r.config.authDomain}/${BC}`,s={apiKey:e.apiKey,appName:r.name,v:Ao},o=HC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function GC(r){const e=await LC(r),n=Mi().gapi;return Ie(n,r,"internal-error"),e.open({where:document.body,url:FC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Oi(r,"network-request-failed"),m=Mi().setTimeout(()=>{u(f)},UC.get());function p(){Mi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,YC=600,$C="_blank",XC="http://localhost";class sE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WC(r,e,n,s=QC,o=YC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},KC),{width:s.toString(),height:o.toString(),top:u,left:f}),g=dn().toLowerCase();n&&(m=rT(g)?$C:n),nT(g)&&(e=e||XC,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[P,x])=>`${S}${P}=${x},`,"");if(EI(g)&&m!=="_self")return ZC(e||"",m),new sE(null);const b=window.open(e||"",m,E);Ie(b,r,"popup-blocked");try{b.focus()}catch{}return new sE(b)}function ZC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",ex="emulator/auth/handler",tx=encodeURIComponent("fac");async function aE(r,e,n,s,o,u){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ao,eventId:o};if(e instanceof mT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",q1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))f[E]=b}if(e instanceof gu){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${tx}=${encodeURIComponent(p)}`:"";return`${nx(r)}?${mu(m).slice(1)}${g}`}function nx({config:r}){return r.emulator?yp(r,ex):`https://${r.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class ix{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TT,this._completeRedirectFn=IC,this._overrideRedirectResult=bC}async _openPopup(e,n,s,o){var u;gr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await aE(e,n,s,km(),o);return WC(e,f,Sp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await aE(e,n,s,km(),o);return aC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(gr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await GC(e),s=new xC(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sm,{type:Sm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Sm];f!==void 0&&n(!!f),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uT()||iT()||_p()}}const rx=ix;var oE="@firebase/auth",lE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ox(r){lo(new Js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cT(r)},g=new RI(s,o,u,p);return kI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),lo(new Js("auth-internal",e=>{const n=bo(e.getProvider("auth").getImmediate());return(s=>new sx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(oE,lE,ax(r)),ns(oE,lE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=5*60,ux=U0("authIdTokenMaxAge")||lx;let uE=null;const cx=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ux)return;const o=n==null?void 0:n.token;uE!==o&&(uE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hx(r=G0()){const e=mp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=PI(r,{popupRedirectResolver:rx,persistence:[pC,iC,TT]}),s=U0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=cx(u.toString());JI(n,f,()=>f(n.currentUser)),ZI(n,m=>f(m))}}const o=j0("auth");return o&&jI(n,`http://${o}`),n}function fx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}II({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Oi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",fx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ox("Browser");var dx="firebase",mx="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(dx,mx,"app");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,CT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function D(){}D.prototype=R.prototype,I.D=R.prototype,I.prototype=new D,I.prototype.constructor=I,I.C=function(k,j,z){for(var M=Array(arguments.length-2),et=2;et<arguments.length;et++)M[et-2]=arguments[et];return R.prototype[j].apply(k,M)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,D){D||(D=0);var k=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)k[j]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(j=0;16>j;++j)k[j]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=I.g[0],D=I.g[1],j=I.g[2];var z=I.g[3],M=R+(z^D&(j^z))+k[0]+3614090360&4294967295;R=D+(M<<7&4294967295|M>>>25),M=z+(j^R&(D^j))+k[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=j+(D^z&(R^D))+k[2]+606105819&4294967295,j=z+(M<<17&4294967295|M>>>15),M=D+(R^j&(z^R))+k[3]+3250441966&4294967295,D=j+(M<<22&4294967295|M>>>10),M=R+(z^D&(j^z))+k[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+(j^R&(D^j))+k[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=j+(D^z&(R^D))+k[6]+2821735955&4294967295,j=z+(M<<17&4294967295|M>>>15),M=D+(R^j&(z^R))+k[7]+4249261313&4294967295,D=j+(M<<22&4294967295|M>>>10),M=R+(z^D&(j^z))+k[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+(j^R&(D^j))+k[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=j+(D^z&(R^D))+k[10]+4294925233&4294967295,j=z+(M<<17&4294967295|M>>>15),M=D+(R^j&(z^R))+k[11]+2304563134&4294967295,D=j+(M<<22&4294967295|M>>>10),M=R+(z^D&(j^z))+k[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+(j^R&(D^j))+k[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=j+(D^z&(R^D))+k[14]+2792965006&4294967295,j=z+(M<<17&4294967295|M>>>15),M=D+(R^j&(z^R))+k[15]+1236535329&4294967295,D=j+(M<<22&4294967295|M>>>10),M=R+(j^z&(D^j))+k[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^j&(R^D))+k[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=j+(R^D&(z^R))+k[11]+643717713&4294967295,j=z+(M<<14&4294967295|M>>>18),M=D+(z^R&(j^z))+k[0]+3921069994&4294967295,D=j+(M<<20&4294967295|M>>>12),M=R+(j^z&(D^j))+k[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^j&(R^D))+k[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=j+(R^D&(z^R))+k[15]+3634488961&4294967295,j=z+(M<<14&4294967295|M>>>18),M=D+(z^R&(j^z))+k[4]+3889429448&4294967295,D=j+(M<<20&4294967295|M>>>12),M=R+(j^z&(D^j))+k[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^j&(R^D))+k[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=j+(R^D&(z^R))+k[3]+4107603335&4294967295,j=z+(M<<14&4294967295|M>>>18),M=D+(z^R&(j^z))+k[8]+1163531501&4294967295,D=j+(M<<20&4294967295|M>>>12),M=R+(j^z&(D^j))+k[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^j&(R^D))+k[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=j+(R^D&(z^R))+k[7]+1735328473&4294967295,j=z+(M<<14&4294967295|M>>>18),M=D+(z^R&(j^z))+k[12]+2368359562&4294967295,D=j+(M<<20&4294967295|M>>>12),M=R+(D^j^z)+k[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^j)+k[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=j+(z^R^D)+k[11]+1839030562&4294967295,j=z+(M<<16&4294967295|M>>>16),M=D+(j^z^R)+k[14]+4259657740&4294967295,D=j+(M<<23&4294967295|M>>>9),M=R+(D^j^z)+k[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^j)+k[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=j+(z^R^D)+k[7]+4139469664&4294967295,j=z+(M<<16&4294967295|M>>>16),M=D+(j^z^R)+k[10]+3200236656&4294967295,D=j+(M<<23&4294967295|M>>>9),M=R+(D^j^z)+k[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^j)+k[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=j+(z^R^D)+k[3]+3572445317&4294967295,j=z+(M<<16&4294967295|M>>>16),M=D+(j^z^R)+k[6]+76029189&4294967295,D=j+(M<<23&4294967295|M>>>9),M=R+(D^j^z)+k[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^j)+k[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=j+(z^R^D)+k[15]+530742520&4294967295,j=z+(M<<16&4294967295|M>>>16),M=D+(j^z^R)+k[2]+3299628645&4294967295,D=j+(M<<23&4294967295|M>>>9),M=R+(j^(D|~z))+k[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~j))+k[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=j+(R^(z|~D))+k[14]+2878612391&4294967295,j=z+(M<<15&4294967295|M>>>17),M=D+(z^(j|~R))+k[5]+4237533241&4294967295,D=j+(M<<21&4294967295|M>>>11),M=R+(j^(D|~z))+k[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~j))+k[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=j+(R^(z|~D))+k[10]+4293915773&4294967295,j=z+(M<<15&4294967295|M>>>17),M=D+(z^(j|~R))+k[1]+2240044497&4294967295,D=j+(M<<21&4294967295|M>>>11),M=R+(j^(D|~z))+k[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~j))+k[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=j+(R^(z|~D))+k[6]+2734768916&4294967295,j=z+(M<<15&4294967295|M>>>17),M=D+(z^(j|~R))+k[13]+1309151649&4294967295,D=j+(M<<21&4294967295|M>>>11),M=R+(j^(D|~z))+k[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~j))+k[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=j+(R^(z|~D))+k[2]+718787259&4294967295,j=z+(M<<15&4294967295|M>>>17),M=D+(z^(j|~R))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+z&4294967295}s.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var D=R-this.blockSize,k=this.B,j=this.h,z=0;z<R;){if(j==0)for(;z<=D;)o(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<R;)if(k[j++]=I.charCodeAt(z++),j==this.blockSize){o(this,k),j=0;break}}else for(;z<R;)if(k[j++]=I[z++],j==this.blockSize){o(this,k),j=0;break}}this.h=j,this.o+=R},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var D=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=D&255,D/=256;for(this.u(I),I=Array(16),R=D=0;4>R;++R)for(var k=0;32>k;k+=8)I[D++]=this.g[R]>>>k&255;return I};function u(I,R){var D=m;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=R(I)}function f(I,R){this.h=R;for(var D=[],k=!0,j=I.length-1;0<=j;j--){var z=I[j]|0;k&&z==R||(D[j]=z,k=!1)}this.g=D}var m={};function p(I){return-128<=I&&128>I?u(I,function(R){return new f([R|0],0>R?-1:0)}):new f([I|0],0>I?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return b;if(0>I)return O(g(-I));for(var R=[],D=1,k=0;I>=D;k++)R[k]=I/D|0,D*=4294967296;return new f(R,0)}function E(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return O(E(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(R,8)),k=b,j=0;j<I.length;j+=8){var z=Math.min(8,I.length-j),M=parseInt(I.substring(j,j+z),R);8>z?(z=g(Math.pow(R,z)),k=k.j(z).add(g(M))):(k=k.j(D),k=k.add(g(M)))}return k}var b=p(0),S=p(1),P=p(16777216);r=f.prototype,r.m=function(){if(U(this))return-O(this).m();for(var I=0,R=1,D=0;D<this.g.length;D++){var k=this.i(D);I+=(0<=k?k:4294967296+k)*R,R*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(U(this))return"-"+O(this).toString(I);for(var R=g(Math.pow(I,6)),D=this,k="";;){var j=Q(D,R).g;D=q(D,j.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(I);if(D=j,x(D))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function U(I){return I.h==-1}r.l=function(I){return I=q(this,I),U(I)?-1:x(I)?0:1};function O(I){for(var R=I.g.length,D=[],k=0;k<R;k++)D[k]=~I.g[k];return new f(D,~I.h).add(S)}r.abs=function(){return U(this)?O(this):this},r.add=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],k=0,j=0;j<=R;j++){var z=k+(this.i(j)&65535)+(I.i(j)&65535),M=(z>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);k=M>>>16,z&=65535,M&=65535,D[j]=M<<16|z}return new f(D,D[D.length-1]&-2147483648?-1:0)};function q(I,R){return I.add(O(R))}r.j=function(I){if(x(this)||x(I))return b;if(U(this))return U(I)?O(this).j(O(I)):O(O(this).j(I));if(U(I))return O(this.j(O(I)));if(0>this.l(P)&&0>I.l(P))return g(this.m()*I.m());for(var R=this.g.length+I.g.length,D=[],k=0;k<2*R;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<I.g.length;j++){var z=this.i(k)>>>16,M=this.i(k)&65535,et=I.i(j)>>>16,Ge=I.i(j)&65535;D[2*k+2*j]+=M*Ge,L(D,2*k+2*j),D[2*k+2*j+1]+=z*Ge,L(D,2*k+2*j+1),D[2*k+2*j+1]+=M*et,L(D,2*k+2*j+1),D[2*k+2*j+2]+=z*et,L(D,2*k+2*j+2)}for(k=0;k<R;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=R;k<2*R;k++)D[k]=0;return new f(D,0)};function L(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function G(I,R){this.g=I,this.h=R}function Q(I,R){if(x(R))throw Error("division by zero");if(x(I))return new G(b,b);if(U(I))return R=Q(O(I),R),new G(O(R.g),O(R.h));if(U(R))return R=Q(I,O(R)),new G(O(R.g),R.h);if(30<I.g.length){if(U(I)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var D=S,k=R;0>=k.l(I);)D=K(D),k=K(k);var j=te(D,1),z=te(k,1);for(k=te(k,2),D=te(D,2);!x(k);){var M=z.add(k);0>=M.l(I)&&(j=j.add(D),z=M),k=te(k,1),D=te(D,1)}return R=q(I,j.j(R)),new G(j,R)}for(j=b;0<=I.l(R);){for(D=Math.max(1,Math.floor(I.m()/R.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=g(D),M=z.j(R);U(M)||0<M.l(I);)D-=k,z=g(D),M=z.j(R);x(z)&&(z=S),j=j.add(z),I=q(I,M)}return new G(j,I)}r.A=function(I){return Q(this,I).h},r.and=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)&I.i(k);return new f(D,this.h&I.h)},r.or=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)|I.i(k);return new f(D,this.h|I.h)},r.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)^I.i(k);return new f(D,this.h^I.h)};function K(I){for(var R=I.g.length+1,D=[],k=0;k<R;k++)D[k]=I.i(k)<<1|I.i(k-1)>>>31;return new f(D,I.h)}function te(I,R){var D=R>>5;R%=32;for(var k=I.g.length-D,j=[],z=0;z<k;z++)j[z]=0<R?I.i(z+D)>>>R|I.i(z+D+1)<<32-R:I.i(z+D);return new f(j,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,CT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,rs=f}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xT,Hl,DT,oh,Um,NT,OT,MT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var Y=c[w];if(!(Y in _))break e;_=_[Y]}c=c[c.length-1],w=_[c],y=y(w),y!=w&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,w=!1,Y={next:function(){if(!w&&_<c.length){var ee=_++;return{value:y(ee,c[ee]),done:!1}}return w=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,_){return c.call.apply(c.bind,arguments)}function b(c,y,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,w),c.apply(y,Y)}}return function(){return c.apply(y,arguments)}}function S(c,y,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:b,S.apply(null,arguments)}function P(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function x(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,Y,ee){for(var me=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)me[Ke-2]=arguments[Ke];return y.prototype[Y].apply(w,me)}}function U(c){const y=c.length;if(0<y){const _=Array(y);for(let w=0;w<y;w++)_[w]=c[w];return _}return[]}function O(c,y){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const Y=c.length||0,ee=w.length||0;c.length=Y+ee;for(let me=0;me<ee;me++)c[Y+me]=w[me]}else c.push(w)}}class q{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var K=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function te(c,y,_){for(const w in c)y.call(_,c[w],w,c)}function I(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,y){let _,w;for(let Y=1;Y<arguments.length;Y++){w=arguments[Y];for(_ in w)c[_]=w[_];for(let ee=0;ee<D.length;ee++)_=D[ee],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function j(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function z(c){m.setTimeout(()=>{throw c},0)}function M(){var c=fe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class et{constructor(){this.h=this.g=null}add(y,_){const w=Ge.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Ge=new q(()=>new ne,c=>c.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,H=!1,fe=new et,N=()=>{const c=m.Promise.resolve(void 0);ie=()=>{c.then(W)}};var W=()=>{for(var c;c=M();){try{c.h.call(c.g)}catch(_){z(_)}var y=Ge;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}H=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return c}();function ge(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(K){e:{try{Q(y.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:de[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ge.aa.h.call(this)}}x(ge,se);var de={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Ne(c,y,_,w,Y){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=Y,this.key=++pe,this.da=this.fa=!1}function Te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function mt(c){this.src=c,this.g={},this.h=0}mt.prototype.add=function(c,y,_,w,Y){var ee=c.toString();c=this.g[ee],c||(c=this.g[ee]=[],this.h++);var me=ut(c,y,w,Y);return-1<me?(y=c[me],_||(y.fa=!1)):(y=new Ne(y,this.src,ee,!!w,Y),y.fa=_,c.push(y)),y};function jt(c,y){var _=y.type;if(_ in c.g){var w=c.g[_],Y=Array.prototype.indexOf.call(w,y,void 0),ee;(ee=0<=Y)&&Array.prototype.splice.call(w,Y,1),ee&&(Te(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ut(c,y,_,w){for(var Y=0;Y<c.length;++Y){var ee=c[Y];if(!ee.da&&ee.listener==y&&ee.capture==!!_&&ee.ha==w)return Y}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),Rn={};function an(c,y,_,w,Y){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)an(c,y[ee],_,w,Y);return null}return _=Un(_),c&&c[he]?c.K(y,_,g(w)?!!w.capture:!1,Y):Tt(c,y,_,!1,w,Y)}function Tt(c,y,_,w,Y,ee){if(!y)throw Error("Invalid event type");var me=g(Y)?!!Y.capture:!!Y,Ke=ze(c);if(Ke||(c[ht]=Ke=new mt(c)),_=Ke.add(y,_,w,me,ee),_.proxy)return _;if(w=jn(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)ye||(Y=me),Y===void 0&&(Y=!1),c.addEventListener(y.toString(),w,Y);else if(c.attachEvent)c.attachEvent(on(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function jn(){function c(_){return y.call(c.src,c.listener,_)}const y=Oe;return c}function En(c,y,_,w,Y){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)En(c,y[ee],_,w,Y);else w=g(w)?!!w.capture:!!w,_=Un(_),c&&c[he]?(c=c.i,y=String(y).toString(),y in c.g&&(ee=c.g[y],_=ut(ee,_,w,Y),-1<_&&(Te(ee[_]),Array.prototype.splice.call(ee,_,1),ee.length==0&&(delete c.g[y],c.h--)))):c&&(c=ze(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ut(y,_,w,Y)),(_=-1<c?y[c]:null)&&Ln(_))}function Ln(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[he])jt(y.i,c);else{var _=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(_,w,c.capture):y.detachEvent?y.detachEvent(on(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=ze(y))?(jt(_,c),_.h==0&&(_.src=null,y[ht]=null)):Te(c)}}}function on(c){return c in Rn?Rn[c]:Rn[c]="on"+c}function Oe(c,y){if(c.da)c=!0;else{y=new ge(y,this);var _=c.listener,w=c.ha||c.src;c.fa&&Ln(c),c=_.call(w,y)}return c}function ze(c){return c=c[ht],c instanceof mt?c:null}var Li="__closure_events_fn_"+(1e9*Math.random()>>>0);function Un(c){return typeof c=="function"?c:(c[Li]||(c[Li]=function(y){return c.handleEvent(y)}),c[Li])}function ft(){ue.call(this),this.i=new mt(this),this.M=this,this.F=null}x(ft,ue),ft.prototype[he]=!0,ft.prototype.removeEventListener=function(c,y,_,w){En(this,c,y,_,w)};function Ze(c,y){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var Y=y;y=new se(w,c),k(y,Y)}if(Y=!0,_)for(var ee=_.length-1;0<=ee;ee--){var me=y.g=_[ee];Y=mn(me,w,!0,y)&&Y}if(me=y.g=c,Y=mn(me,w,!0,y)&&Y,Y=mn(me,w,!1,y)&&Y,_)for(ee=0;ee<_.length;ee++)me=y.g=_[ee],Y=mn(me,w,!1,y)&&Y}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],w=0;w<_.length;w++)Te(_[w]);delete c.g[y],c.h--}}this.F=null},ft.prototype.K=function(c,y,_,w){return this.i.add(String(c),y,!1,_,w)},ft.prototype.L=function(c,y,_,w){return this.i.add(String(c),y,!0,_,w)};function mn(c,y,_,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var Y=!0,ee=0;ee<y.length;++ee){var me=y[ee];if(me&&!me.da&&me.capture==_){var Ke=me.listener,Ut=me.ha||me.src;me.fa&&jt(c.i,me),Y=Ke.call(Ut,w)!==!1&&Y}}return Y&&!w.defaultPrevented}function Dt(c,y,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function wu(c){c.g=Dt(()=>{c.g=null,c.i&&(c.i=!1,wu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class cf extends ue{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){ue.call(this),this.h=c,this.g={}}x(ys,ue);var vs=[];function _s(c){te(c.g,function(y,_){this.g.hasOwnProperty(_)&&Ln(y)},c),c.g={}}ys.prototype.N=function(){ys.aa.N.call(this),_s(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=m.JSON.stringify,la=m.JSON.parse,Es=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function No(){}No.prototype.h=null;function Oo(c){return c.h||(c.h=c.i())}function Mo(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){se.call(this,"d")}x(Bi,se);function Vo(){se.call(this,"c")}x(Vo,se);var pi={},Po=null;function Er(){return Po=Po||new ft}pi.La="serverreachability";function ua(c){se.call(this,pi.La,c)}x(ua,se);function Tr(c){const y=Er();Ze(y,new ua(y))}pi.STAT_EVENT="statevent";function Ru(c,y){se.call(this,pi.STAT_EVENT,c),this.stat=y}x(Ru,se);function vt(c){const y=Er();Ze(y,new Ru(y,c))}pi.Ma="timingevent";function Lt(c,y){se.call(this,pi.Ma,c),this.size=y}x(Lt,se);function Nt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function ko(c,y,_,w,Y,ee){c.info(function(){if(c.g)if(ee)for(var me="",Ke=ee.split("&"),Ut=0;Ut<Ke.length;Ut++){var Qe=Ke[Ut].split("=");if(1<Qe.length){var Gt=Qe[0];Qe=Qe[1];var Bt=Gt.split("_");me=2<=Bt.length&&Bt[1]=="type"?me+(Gt+"="+Qe+"&"):me+(Gt+"=redacted&")}}else me=null;else me=ee;return"XMLHTTP REQ ("+w+") [attempt "+Y+"]: "+y+`
`+_+`
`+me})}function hf(c,y,_,w,Y,ee,me){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+Y+"]: "+y+`
`+_+`
`+ee+" "+me})}function Sr(c,y,_,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ts(c,_)+(w?" "+w:"")})}function Iu(c,y){c.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function Ts(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var Y=w[1];if(Array.isArray(Y)&&!(1>Y.length)){var ee=Y[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var me=1;me<Y.length;me++)Y[me]=""}}}}return ti(_)}catch{return y}}var Ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function yi(){}x(yi,No),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},gi=new yi;function pn(c,y,_,w){this.j=c,this.i=y,this.l=_,this.R=w||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}var jo={},ca={};function ni(c,y,_){c.L=1,c.v=Rs(In(y)),c.m=_,c.P=!0,qi(c,null)}function qi(c,y){c.F=Date.now(),Ss(c),c.A=In(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Ho(_.i,"t",w),c.C=0,_=c.j.J,c.h=new Rt,c.g=Hu(c.j,_?y:null,!c.m),0<c.O&&(c.M=new cf(S(c.Y,c,c.g),c.O)),y=c.U,_=c.g,w=c.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(vs[0]=Y.toString()),Y=vs);for(var ee=0;ee<Y.length;ee++){var me=an(_,Y[ee],w||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Tr(),ko(c.i,c.u,c.A,c.l,c.R,c.m)}pn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Fn(c)==3?y.j():this.Y(c)},pn.prototype.Y=function(c){try{if(c==this.g)e:{const Bt=Fn(this.g);var y=this.g.Ba();const Xi=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||Pu(this.g)))){this.J||Bt!=4||y==7||(y==8||0>=Xi?Tr(3):Tr(2)),br(this);var _=this.g.Z();this.X=_;t:if(Cu(this)){var w=Pu(this.g);c="";var Y=w.length,ee=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),vi(this);var me="";break t}this.h.i=new m.TextDecoder}for(y=0;y<Y;y++)this.h.h=!0,c+=this.h.i.decode(w[y],{stream:!(ee&&y==Y-1)});w.length=0,this.h.g+=c,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=_==200,hf(this.i,this.u,this.A,this.l,this.R,Bt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Ut=this.g;if((Ke=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Ke)){var Qe=Ke;break t}}Qe=null}if(_=Qe)Sr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,As(this,_);else{this.o=!1,this.s=3,vt(12),Wt(this),vi(this);break e}}if(this.P){_=!0;let Zt;for(;!this.J&&this.C<me.length;)if(Zt=xu(this,me),Zt==ca){Bt==4&&(this.s=4,vt(14),_=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==jo){this.s=4,vt(15),Sr(this.i,this.l,me,"[Invalid Chunk]"),_=!1;break}else Sr(this.i,this.l,Zt,null),As(this,Zt);if(Cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||me.length!=0||this.h.h||(this.s=1,vt(16),_=!1),this.o=this.o&&_,!_)Sr(this.i,this.l,me,"[Invalid Chunked Response]"),Wt(this),vi(this);else if(0<me.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Vs(Gt),Gt.M=!0,vt(11))}}else Sr(this.i,this.l,me,null),As(this,me);Bt==4&&Wt(this),this.o&&!this.J&&(Bt==4?Bu(this.j,this):(this.o=!1,Ss(this)))}else gf(this.g),_==400&&0<me.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Wt(this),vi(this)}}}catch{}finally{}};function Cu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xu(c,y){var _=c.C,w=y.indexOf(`
`,_);return w==-1?ca:(_=Number(y.substring(_,w)),isNaN(_)?jo:(w+=1,w+_>y.length?ca:(y=y.slice(w,w+_),c.C=w+_,y)))}pn.prototype.cancel=function(){this.J=!0,Wt(this)};function Ss(c){c.S=Date.now()+c.I,Du(c,c.I)}function Du(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Nt(S(c.ba,c),y)}function br(c){c.B&&(m.clearTimeout(c.B),c.B=null)}pn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Iu(this.i,this.A),this.L!=2&&(Tr(),vt(17)),Wt(this),this.s=2,vi(this)):Du(this,this.S-c)};function vi(c){c.j.G==0||c.J||Bu(c.j,c)}function Wt(c){br(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,_s(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function As(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||Lo(_.h,c))){if(!c.K&&Lo(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var Y=w;if(Y[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Sa(_),Ea(_);else break e;Yo(_),vt(18)}}else _.za=Y[1],0<_.za-_.T&&37500>Y[2]&&_.F&&_.v==0&&!_.C&&(_.C=Nt(S(_.Za,_),6e3));if(1>=fa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else $i(_,11)}else if((c.K||_.g==c)&&Sa(_),!L(y))for(Y=_.Da.g.parse(y),y=0;y<Y.length;y++){let Qe=Y[y];if(_.T=Qe[0],Qe=Qe[1],_.G==2)if(Qe[0]=="c"){_.K=Qe[1],_.ia=Qe[2];const Gt=Qe[3];Gt!=null&&(_.la=Gt,_.j.info("VER="+_.la));const Bt=Qe[4];Bt!=null&&(_.Aa=Bt,_.j.info("SVER="+_.Aa));const Xi=Qe[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(w=1.5*Xi,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Zt=c.g;if(Zt){const wi=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var ee=w.h;ee.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(da(ee,ee.h),ee.h=null))}if(w.D){const Xo=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(w.ya=Xo,st(w.I,w.D,Xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var me=c;if(w.qa=qu(w,w.J?w.ia:null,w.W),me.K){gn(w.h,me);var Ke=me,Ut=w.L;Ut&&(Ke.I=Ut),Ke.B&&(br(Ke),Ss(Ke)),w.g=me}else Lu(w);0<_.i.length&&Ta(_)}else Qe[0]!="stop"&&Qe[0]!="close"||$i(_,7);else _.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?$i(_,7):Ko(_):Qe[0]!="noop"&&_.l&&_.l.ta(Qe),_.v=0)}}Tr(4)}catch{}}var Nu=class{constructor(c,y){this.g=c,this.map=y}};function Hi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fa(c){return c.h?1:c.g?c.g.size:0}function Lo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function da(c,y){c.g?c.g.add(y):c.h=y}function gn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Hi.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return U(c.i)}function ff(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,w=0;w<_;w++)y.push(c[w]);return y}y=[],_=0;for(w in c)y[_++]=c[w];return y}function ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const w in c)y[_++]=w;return y}}}function Bo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=ma(c),w=ff(c),Y=w.length,ee=0;ee<Y;ee++)y.call(void 0,w[ee],_&&_[ee],c)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function df(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),Y=null;if(0<=w){var ee=c[_].substring(0,w);Y=c[_].substring(w+1)}else ee=c[_];y(ee,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Ot(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ot){this.h=c.h,ws(this,c.j),this.o=c.o,this.g=c.g,wr(this,c.s),this.l=c.l;var y=c.i,_=new Gi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Fi(this,_),this.m=c.m}else c&&(y=String(c).match(bs))?(this.h=!1,ws(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),wr(this,y[4]),this.l=zn(y[5]||"",!0),Fi(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}Ot.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Is(y,zo,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Is(y,zo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Is(_,_.charAt(0)=="/"?mf:qo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Is(_,pa)),c.join("")};function In(c){return new Ot(c)}function ws(c,y,_){c.j=_?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function wr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Fi(c,y,_){y instanceof Gi?(c.i=y,Mu(c.i,c.h)):(_||(y=Is(y,pf)),c.i=new Gi(y,c.h))}function st(c,y,_){c.i.set(y,_)}function Rs(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Is(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Ou),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ou(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zo=/[#\/\?@]/g,qo=/[#\?:]/g,mf=/[#\?]/g,pf=/[#\?@]/g,pa=/#/g;function Gi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function qn(c){c.g||(c.g=new Map,c.h=0,c.i&&df(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Gi.prototype,r.add=function(c,y){qn(this),this.i=null,c=_i(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Ki(c,y){qn(c),y=_i(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Qi(c,y){return qn(c),y=_i(c,y),c.g.has(y)}r.forEach=function(c,y){qn(this),this.g.forEach(function(_,w){_.forEach(function(Y){c.call(y,Y,w,this)},this)},this)},r.na=function(){qn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let w=0;w<y.length;w++){const Y=c[w];for(let ee=0;ee<Y.length;ee++)_.push(y[w])}return _},r.V=function(c){qn(this);let y=[];if(typeof c=="string")Qi(this,c)&&(y=y.concat(this.g.get(_i(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},r.set=function(c,y){return qn(this),this.i=null,c=_i(this,c),Qi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Ho(c,y,_){Ki(c,y),0<_.length&&(c.i=null,c.g.set(_i(c,y),U(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var w=y[_];const ee=encodeURIComponent(String(w)),me=this.V(w);for(w=0;w<me.length;w++){var Y=ee;me[w]!==""&&(Y+="="+encodeURIComponent(String(me[w]))),c.push(Y)}}return this.i=c.join("&")};function _i(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Mu(c,y){y&&!c.j&&(qn(c),c.i=null,c.g.forEach(function(_,w){var Y=w.toLowerCase();w!=Y&&(Ki(this,w),Ho(this,Y,_))},c)),c.j=y}function Cs(c,y){const _=new Bn;if(m.Image){const w=new Image;w.onload=P(Hn,_,"TestLoadImage: loaded",!0,y,w),w.onerror=P(Hn,_,"TestLoadImage: error",!1,y,w),w.onabort=P(Hn,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=P(Hn,_,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function ii(c,y){const _=new Bn,w=new AbortController,Y=setTimeout(()=>{w.abort(),Hn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(ee=>{clearTimeout(Y),ee.ok?Hn(_,"TestPingServer: ok",!0,y):Hn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Y),Hn(_,"TestPingServer: error",!1,y)})}function Hn(c,y,_,w,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),w(_)}catch{}}function xs(){this.g=new Es}function Ei(c,y,_){const w=_||"";try{Bo(c,function(Y,ee){let me=Y;g(Y)&&(me=ti(Y)),y.push(w+ee+"="+encodeURIComponent(me))})}catch(Y){throw y.push(w+"type="+encodeURIComponent("_badmap")),Y}}function Rr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Rr,No),Rr.prototype.g=function(){return new Yi(this.l,this.j)},Rr.prototype.i=function(c){return function(){return c}}({});function Yi(c,y){ft.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Yi,ft),r=Yi.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Si(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ti(this):Si(this),this.readyState==3&&Fo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ti(this))},r.Qa=function(c){this.g&&(this.response=c,Ti(this))},r.ga=function(){this.g&&Ti(this)};function Ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Si(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function Si(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Go(c){let y="";return te(c,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function Ft(c,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Go(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):st(c,y,_))}function tt(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(tt,ft);var ga=/^https?$/i,Ds=["POST","PUT"];r=tt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?Oo(this.o):Oo(gi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(ee){Vu(this,ee);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var Y in w)_.set(Y,w[Y]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const ee of w.keys())_.set(ee,w.get(ee));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),Y=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ds,y,void 0))||w||Y||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,me]of _)this.g.setRequestHeader(ee,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(c),this.u=!1}catch(ee){Vu(this,ee)}};function Vu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ya(c),Ai(c)}function ya(c){c.A||(c.A=!0,Ze(c,"complete"),Ze(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ze(this,"complete"),Ze(this,"abort"),Ai(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},r.bb=function(){va(this)};function va(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)Dt(c.Ea,0,c);else if(Ze(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const me=c.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=me===0){var Y=String(c.D).match(bs)[1]||null;!Y&&m.self&&m.self.location&&(Y=m.self.location.protocol.slice(0,-1)),w=!ga.test(Y?Y.toLowerCase():"")}_=w}if(_)Ze(c,"complete"),Ze(c,"success");else{c.m=6;try{var ee=2<Fn(c)?c.g.statusText:""}catch{ee=""}c.l=ee+" ["+c.Z()+"]",ya(c)}}finally{Ai(c)}}}}function Ai(c,y){if(c.g){Ns(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ze(c,"ready");try{_.onreadystatechange=w}catch{}}}function Ns(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),la(y)}};function Pu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(c){const y={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(L(c[w]))continue;var _=j(c[w]);const Y=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=y[Y]||[];y[Y]=ee,ee.push(_)}I(y,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function _a(c){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,c),this.cb=Os("retryDelaySeedMs",1e4,c),this.Wa=Os("forwardChannelMaxRetries",2,c),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(c&&c.concurrentRequestLimit),this.Da=new xs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=_a.prototype,r.la=8,r.G=1,r.connect=function(c,y,_,w){vt(0),this.W=c,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=qu(this,null,this.W),Ta(this)};function Ko(c){if(ku(c),c.G==3){var y=c.U++,_=In(c.I);if(st(_,"SID",c.K),st(_,"RID",y),st(_,"TYPE","terminate"),Ms(c,_),y=new pn(c,c.j,y),y.L=2,y.v=Rs(In(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=Hu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ss(y)}zu(c)}function Ea(c){c.g&&(Vs(c),c.g.cancel(),c.g=null)}function ku(c){Ea(c),c.u&&(m.clearTimeout(c.u),c.u=null),Sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ta(c){if(!ha(c.h)&&!c.s){c.s=!0;var y=c.Ga;ie||N(),H||(ie(),H=!0),fe.add(y,c),c.B=0}}function yf(c,y){return fa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Nt(S(c.Ga,c,y),$o(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const Y=new pn(this,this.j,c);let ee=this.o;if(this.S&&(ee?(ee=R(ee),k(ee,this.S)):ee=this.S),this.m!==null||this.O||(Y.H=ee,ee=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=ju(this,Y,y),_=In(this.I),st(_,"RID",c),st(_,"CVER",22),this.D&&st(_,"X-HTTP-Session-Id",this.D),Ms(this,_),ee&&(this.O?y="headers="+encodeURIComponent(String(Go(ee)))+"&"+y:this.m&&Ft(_,this.m,ee)),da(this.h,Y),this.Ua&&st(_,"TYPE","init"),this.P?(st(_,"$req",y),st(_,"SID","null"),Y.T=!0,ni(Y,_,null)):ni(Y,_,y),this.G=2}}else this.G==3&&(c?Qo(this,c):this.i.length==0||ha(this.h)||Qo(this))};function Qo(c,y){var _;y?_=y.l:_=c.U++;const w=In(c.I);st(w,"SID",c.K),st(w,"RID",_),st(w,"AID",c.T),Ms(c,w),c.m&&c.o&&Ft(w,c.m,c.o),_=new pn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=ju(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),da(c.h,_),ni(_,w,y)}function Ms(c,y){c.H&&te(c.H,function(_,w){st(y,w,_)}),c.l&&Bo({},function(_,w){st(y,w,_)})}function ju(c,y,_){_=Math.min(c.i.length,_);var w=c.l?S(c.l.Na,c.l,c):null;e:{var Y=c.i;let ee=-1;for(;;){const me=["count="+_];ee==-1?0<_?(ee=Y[0].g,me.push("ofs="+ee)):ee=0:me.push("ofs="+ee);let Ke=!0;for(let Ut=0;Ut<_;Ut++){let Qe=Y[Ut].g;const Gt=Y[Ut].map;if(Qe-=ee,0>Qe)ee=Math.max(0,Y[Ut].g-100),Ke=!1;else try{Ei(Gt,me,"req"+Qe+"_")}catch{w&&w(Gt)}}if(Ke){w=me.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,w}function Lu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ie||N(),H||(ie(),H=!0),fe.add(y,c),c.v=0}}function Yo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Nt(S(c.Fa,c),$o(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Uu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Nt(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Ea(this),Uu(this))};function Vs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Uu(c){c.g=new pn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=In(c.qa);st(y,"RID","rpc"),st(y,"SID",c.K),st(y,"AID",c.T),st(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(y,"TO",c.ja),st(y,"TYPE","xmlhttp"),Ms(c,y),c.m&&c.o&&Ft(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Rs(In(y)),_.m=null,_.P=!0,qi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Ea(this),Yo(this),vt(19))};function Sa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Bu(c,y){var _=null;if(c.g==y){Sa(c),Vs(c),c.g=null;var w=2}else if(Lo(c.h,y))_=y.D,gn(c.h,y),w=1;else return;if(c.G!=0){if(y.o)if(w==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var Y=c.B;w=Er(),Ze(w,new Lt(w,_)),Ta(c)}else Lu(c);else if(Y=y.s,Y==3||Y==0&&0<y.X||!(w==1&&yf(c,y)||w==2&&Yo(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),Y){case 1:$i(c,5);break;case 4:$i(c,10);break;case 3:$i(c,6);break;default:$i(c,2)}}}function $o(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function $i(c,y){if(c.j.info("Error code "+y),y==2){var _=S(c.fb,c),w=c.Xa;const Y=!w;w=new Ot(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ws(w,"https"),Rs(w),Y?Cs(w.toString(),_):ii(w.toString(),_)}else vt(2);c.G=0,c.l&&c.l.sa(y),zu(c),ku(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function zu(c){if(c.G=0,c.ka=[],c.l){const y=Uo(c.h);(y.length!=0||c.i.length!=0)&&(O(c.ka,y),O(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function qu(c,y,_){var w=_ instanceof Ot?In(_):new Ot(_);if(w.g!="")y&&(w.g=y+"."+w.g),wr(w,w.s);else{var Y=m.location;w=Y.protocol,y=y?y+"."+Y.hostname:Y.hostname,Y=+Y.port;var ee=new Ot(null);w&&ws(ee,w),y&&(ee.g=y),Y&&wr(ee,Y),_&&(ee.l=_),w=ee}return _=c.D,y=c.ya,_&&y&&st(w,_,y),st(w,"VER",c.la),Ms(c,w),w}function Hu(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new tt(new Rr({eb:_})):new tt(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}r=Fu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Aa(){}Aa.prototype.g=function(c,y){return new yn(c,y)};function yn(c,y){ft.call(this),this.g=new _a(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!L(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!L(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new bi(this)}x(yn,ft),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Ko(this.g)},yn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ti(c),c=_);y.i.push(new Nu(y.Ya++,c)),y.G==3&&Ta(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,yn.aa.N.call(this)};function Gu(c){Bi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}x(Gu,Bi);function Ku(){Vo.call(this),this.status=1}x(Ku,Vo);function bi(c){this.g=c}x(bi,Fu),bi.prototype.ua=function(){Ze(this.g,"a")},bi.prototype.ta=function(c){Ze(this.g,new Gu(c))},bi.prototype.sa=function(c){Ze(this.g,new Ku)},bi.prototype.ra=function(){Ze(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,MT=function(){return new Aa},OT=function(){return Er()},NT=pi,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,oh=Ar,zi.COMPLETE="complete",DT=zi,Mo.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Hl=Mo,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,xT=tt}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const hE="@firebase/firestore",fE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new fp("@firebase/firestore");function Za(){return ta.logLevel}function ve(r,...e){if(ta.logLevel<=qe.DEBUG){const n=e.map(bp);ta.debug(`Firestore (${Ro}): ${r}`,...n)}}function yr(r,...e){if(ta.logLevel<=qe.ERROR){const n=e.map(bp);ta.error(`Firestore (${Ro}): ${r}`,...n)}}function co(r,...e){if(ta.logLevel<=qe.WARN){const n=e.map(bp);ta.warn(`Firestore (${Ro}): ${r}`,...n)}}function bp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,VT(r,s,n)}function VT(r,e,n){let s=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw yr(s),new Error(s)}function nt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||VT(e,o,s)}function Me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class px{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class gx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yx{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new dr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new dr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new PT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class vx{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _x{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new vx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ex{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const s=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Tx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function Bm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return ke(s,o);{const u=kT(),f=Sx(u.encode(mE(r,n)),u.encode(mE(e,n)));return f!==0?f:ke(s,o)}}n+=s>65535?2:1}return ke(r.length,e.length)}function mE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Sx(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return ke(r[n],e[n]);return ke(r.length,e.length)}function ho(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=-62135596800,gE=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*gE);return new yt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pE)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gE}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new yt(0,0))}static max(){return new De(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__name__";class Ni{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ce(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Ni.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=Ni.isNumericId(e),o=Ni.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Ni.extractNumericId(e).compare(Ni.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class pt extends Ni{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Ni{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new rn([yE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new _e(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new _e(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(pt.fromString(e))}static fromName(e){return new be(pt.fromString(e).popFirst(5))}static empty(){return new be(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function bx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new yt(n+1,0):new yt(n,s));return new ls(o,be.empty(),e)}function wx(r){return new ls(r.readTime,r.key,iu)}class ls{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ls(De.min(),be.empty(),iu)}static max(){return new ls(De.max(),be.empty(),iu)}}function Rx(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r){if(r.code!==ce.FAILED_PRECONDITION||r.message!==Ix)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):le.reject(n)}static resolve(e){return new le((n,s)=>{n(e)})}static reject(e){return new le((n,s)=>{s(e)})}static waitFor(e){return new le((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next(o=>o?le.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new le((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new le((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function xx(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}qh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=-1;function Hh(r){return r==null}function Sh(r){return r===0&&1/r==-1/0}function Dx(r){return typeof r=="number"&&Number.isInteger(r)&&!Sh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="";function Nx(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=vE(e)),e=Ox(r.get(n),e);return vE(e)}function Ox(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case LT:n+="";break;default:n+=u}}return n}function vE(r){return r+LT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ps(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function UT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new EE(this.data.getIterator())}getIteratorFrom(e){return new EE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class EE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new Ht(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new BT("Invalid base64 string: "+u):u}}(e);return new sn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const Mx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const n=Mx.exec(r);if(nt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(r.seconds),nanos:xt(r.nanos)}}function xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="server_timestamp",qT="__type__",HT="__previous_value__",FT="__local_write_time__";function Rp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[qT])===null||n===void 0?void 0:n.stringValue)===zT}function Fh(r){const e=r.mapValue.fields[HT];return Rp(e)?Fh(e):e}function ru(r){const e=us(r.mapValue.fields[FT].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Ah="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Ah}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__type__",Px="__max__",Wc={mapValue:{}},KT="__vector__",bh="value";function hs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rp(r)?4:jx(r)?9007199254740991:kx(r)?10:11:Ce(28295,{value:r})}function ki(r,e){if(r===e)return!0;const n=hs(r);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ru(r).isEqual(ru(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=us(o.timestampValue),m=us(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return cs(o.bytesValue).isEqual(cs(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return xt(o.geoPointValue.latitude)===xt(u.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return xt(o.integerValue)===xt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=xt(o.doubleValue),m=xt(u.doubleValue);return f===m?Sh(f)===Sh(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return ho(r.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(_E(f)!==_E(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!ki(f[p],m[p])))return!1;return!0}(r,e);default:return Ce(52216,{left:r})}}function au(r,e){return(r.values||[]).find(n=>ki(n,e))!==void 0}function fo(r,e){if(r===e)return 0;const n=hs(r),s=hs(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return function(u,f){const m=xt(u.integerValue||u.doubleValue),p=xt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return TE(r.timestampValue,e.timestampValue);case 4:return TE(ru(r),ru(e));case 5:return Bm(r.stringValue,e.stringValue);case 6:return function(u,f){const m=cs(u),p=cs(f);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ke(m[g],p[g]);if(E!==0)return E}return ke(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const m=ke(xt(u.latitude),xt(f.latitude));return m!==0?m:ke(xt(u.longitude),xt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return SE(r.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const b=u.fields||{},S=f.fields||{},P=(m=b[bh])===null||m===void 0?void 0:m.arrayValue,x=(p=S[bh])===null||p===void 0?void 0:p.arrayValue,U=ke(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((E=x==null?void 0:x.values)===null||E===void 0?void 0:E.length)||0);return U!==0?U:SE(P,x)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===Wc.mapValue&&f===Wc.mapValue)return 0;if(u===Wc.mapValue)return 1;if(f===Wc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const S=Bm(p[b],E[b]);if(S!==0)return S;const P=fo(m[p[b]],g[E[b]]);if(P!==0)return P}return ke(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ce(23264,{Pe:n})}}function TE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=us(r),s=us(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function SE(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=fo(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function mo(r){return zm(r)}function zm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=us(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return cs(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return be.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=zm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${zm(n.fields[f])}`;return o+"}"}(r.mapValue):Ce(61005,{value:r})}function lh(r){switch(hs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fh(r);return e?16+lh(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+lh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ps(s.fields,(u,f)=>{o+=u.length+lh(f)}),o}(r.mapValue);default:throw Ce(13486,{value:r})}}function AE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function qm(r){return!!r&&"integerValue"in r}function Ip(r){return!!r&&"arrayValue"in r}function bE(r){return!!r&&"nullValue"in r}function wE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uh(r){return!!r&&"mapValue"in r}function kx(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[GT])===null||n===void 0?void 0:n.stringValue)===KT}function $l(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ps(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=$l(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(r.arrayValue.values[n]);return e}return Object.assign({},r)}function jx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Px}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=$l(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];uh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ps(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new wn($l(this.value))}}function QT(r){const e=[];return ps(r.fields,(n,s)=>{const o=new rn([n]);if(uh(s)){const u=QT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,De.min(),De.min(),De.min(),wn.empty(),0)}static newFoundDocument(e,n,s,o){return new fn(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new fn(e,2,n,De.min(),De.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,De.min(),De.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.position=e,this.inclusive=n}}function RE(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(f.referenceValue),n.key):s=fo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function IE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ki(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Lx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{}class kt extends YT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Bx(e,n,s):n==="array-contains"?new Hx(e,s):n==="in"?new Fx(e,s):n==="not-in"?new Gx(e,s):n==="array-contains-any"?new Kx(e,s):new kt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new zx(e,s):new qx(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fo(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends YT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new hi(e,n)}matches(e){return $T(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function $T(r){return r.op==="and"}function XT(r){return Ux(r)&&$T(r)}function Ux(r){for(const e of r.filters)if(e instanceof hi)return!1;return!0}function Hm(r){if(r instanceof kt)return r.field.canonicalString()+r.op.toString()+mo(r.value);if(XT(r))return r.filters.map(e=>Hm(e)).join(",");{const e=r.filters.map(n=>Hm(n)).join(",");return`${r.op}(${e})`}}function WT(r,e){return r instanceof kt?function(s,o){return o instanceof kt&&s.op===o.op&&s.field.isEqual(o.field)&&ki(s.value,o.value)}(r,e):r instanceof hi?function(s,o){return o instanceof hi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&WT(f,o.filters[m]),!0):!1}(r,e):void Ce(19439)}function ZT(r){return r instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(r):r instanceof hi?function(n){return n.op.toString()+" {"+n.getFilters().map(ZT).join(" ,")+"}"}(r):"Filter"}class Bx extends kt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class zx extends kt{constructor(e,n){super(e,"in",n),this.keys=JT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qx extends kt{constructor(e,n){super(e,"not-in",n),this.keys=JT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class Hx extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ip(n)&&au(n.arrayValue,this.value)}}class Fx extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class Gx extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class Kx extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>au(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function CE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new Qx(r,e,n,s,o,u,f)}function Cp(r){const e=Me(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Hm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>mo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>mo(s)).join(",")),e.Ie=n}return e.Ie}function xp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Lx(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!WT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!IE(r.startAt,e.startAt)&&IE(r.endAt,e.endAt)}function Fm(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Yx(r,e,n,s,o,u,f,m){return new vu(r,e,n,s,o,u,f,m)}function Dp(r){return new vu(r)}function xE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eS(r){return r.collectionGroup!==null}function Xl(r){const e=Me(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(rn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Rh(u,s))}),n.has(rn.keyField().canonicalString())||e.Ee.push(new Rh(rn.keyField(),s))}return e.Ee}function Vi(r){const e=Me(r);return e.de||(e.de=$x(e,Xl(r))),e.de}function $x(r,e){if(r.limitType==="F")return CE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Rh(o.field,u)});const n=r.endAt?new wh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new wh(r.startAt.position,r.startAt.inclusive):null;return CE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Gm(r,e){const n=r.filters.concat([e]);return new vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Km(r,e,n){return new vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Gh(r,e){return xp(Vi(r),Vi(e))&&r.limitType===e.limitType}function tS(r){return`${Cp(Vi(r))}|lt:${r.limitType}`}function Ja(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>ZT(o)).join(", ")}]`),Hh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>mo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>mo(o)).join(",")),`Target(${s})`}(Vi(r))}; limitType=${r.limitType})`}function Kh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=RE(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,Xl(s),o)||s.endAt&&!function(f,m,p){const g=RE(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,Xl(s),o))}(r,e)}function Xx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function nS(r){return(e,n)=>{let s=!1;for(const o of Xl(r)){const u=Wx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Wx(r,e,n){const s=r.field.isKeyField()?be.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?fo(p,g):Ce(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new At(be.comparator);function vr(){return Zx}const iS=new At(be.comparator);function Fl(...r){let e=iS;for(const n of r)e=e.insert(n.key,n);return e}function rS(r){let e=iS;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ws(){return Wl()}function sS(){return Wl()}function Wl(){return new sa(r=>r.toString(),(r,e)=>r.isEqual(e))}const Jx=new At(be.comparator),eD=new Ht(be.comparator);function He(...r){let e=eD;for(const n of r)e=e.add(n);return e}const tD=new Ht(ke);function nD(){return tD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function aS(r){return{integerValue:""+r}}function iD(r,e){return Dx(e)?aS(e):Np(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function rD(r,e,n){return r instanceof ou?function(o,u){const f={fields:{[qT]:{stringValue:zT},[FT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Rp(u)&&(u=Fh(u)),u&&(f.fields[HT]=u),{mapValue:f}}(n,e):r instanceof lu?lS(r,e):r instanceof uu?uS(r,e):function(o,u){const f=oS(o,u),m=DE(f)+DE(o.Re);return qm(f)&&qm(o.Re)?aS(m):Np(o.serializer,m)}(r,e)}function sD(r,e,n){return r instanceof lu?lS(r,e):r instanceof uu?uS(r,e):n}function oS(r,e){return r instanceof Ih?function(s){return qm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class ou extends Qh{}class lu extends Qh{constructor(e){super(),this.elements=e}}function lS(r,e){const n=cS(e);for(const s of r.elements)n.some(o=>ki(o,s))||n.push(s);return{arrayValue:{values:n}}}class uu extends Qh{constructor(e){super(),this.elements=e}}function uS(r,e){let n=cS(e);for(const s of r.elements)n=n.filter(o=>!ki(o,s));return{arrayValue:{values:n}}}class Ih extends Qh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function DE(r){return xt(r.integerValue||r.doubleValue)}function cS(r){return Ip(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.field=e,this.transform=n}}function oD(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof lu&&o instanceof lu||s instanceof uu&&o instanceof uu?ho(s.elements,o.elements,ki):s instanceof Ih&&o instanceof Ih?ki(s.Re,o.Re):s instanceof ou&&o instanceof ou}(r.transform,e.transform)}class lD{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Yh{}function hS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Op(r.key,Jn.none()):new _u(r.key,r.data,Jn.none());{const n=r.data,s=wn.empty();let o=new Ht(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new gs(r.key,s,new Pn(o.toArray()),Jn.none())}}function uD(r,e,n){r instanceof _u?function(o,u,f){const m=o.value.clone(),p=OE(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,n):r instanceof gs?function(o,u,f){if(!ch(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=OE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(fS(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Zl(r,e,n,s){return r instanceof _u?function(u,f,m,p){if(!ch(u.precondition,f))return m;const g=u.value.clone(),E=ME(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof gs?function(u,f,m,p){if(!ch(u.precondition,f))return m;const g=ME(u.fieldTransforms,p,f),E=f.data;return E.setAll(fS(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(r,e,n,s):function(u,f,m){return ch(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,n)}function cD(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=oS(s.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(s.field,u))}return n||null}function NE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ho(s,o,(u,f)=>oD(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class _u extends Yh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gs extends Yh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function fS(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function OE(r,e,n){const s=new Map;nt(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,sD(f,m,n[o]))}return s}function ME(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,rD(u,f,e))}return s}class Op extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uD(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Zl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Zl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=sS();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=hS(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,s)=>NE(n,s))&&ho(this.baseMutations,e.baseMutations,(n,s)=>NE(n,s))}}class Mp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return Jx}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Mp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,$e;function pD(r){switch(r){case ce.OK:return Ce(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function dS(r){if(r===void 0)return yr("GRPC error has no .code"),ce.UNKNOWN;switch(r){case Pt.OK:return ce.OK;case Pt.CANCELLED:return ce.CANCELLED;case Pt.UNKNOWN:return ce.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ce.INTERNAL;case Pt.UNAVAILABLE:return ce.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ce.NOT_FOUND;case Pt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Pt.ABORTED:return ce.ABORTED;case Pt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Pt.DATA_LOSS:return ce.DATA_LOSS;default:return Ce(39323,{code:r})}}($e=Pt||(Pt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new rs([4294967295,4294967295],0);function VE(r){const e=kT().encode(r),n=new CT;return n.update(e),new Uint8Array(n.digest())}function PE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new rs([n,s],0),new rs([o,u],0)]}class Vp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=rs.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(rs.fromNumber(s)));return o.compare(gD)===1&&(o=new rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=VE(e),[s,o]=PE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);if(!this.be(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Vp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.pe===0)return;const n=VE(e),[s,o]=PE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new $h(De.min(),o,new At(ke),vr(),He())}}class Eu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Eu(s,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class mS{constructor(e,n){this.targetId=e,this.Ce=n}}class pS{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class kE{constructor(){this.Fe=0,this.Me=jE(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=He(),n=He(),s=He();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}}),new Eu(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=jE()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,nt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class yD{constructor(e){this.ze=e,this.je=new Map,this.He=vr(),this.Je=Zc(),this.Ye=Zc(),this.Ze=new At(ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(Fm(u))if(s===0){const f=new be(u.path);this.tt(n,f,fn.newNoDocument(f,De.min()))}else nt(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const m=this.ct(e),p=m?this.lt(m,e,f):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=cs(s).toUint8Array()}catch(p){if(p instanceof BT)return co("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Vp(f,o,u)}catch(p){return co(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&Fm(m.target)){const p=new be(m.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,fn.newNoDocument(p,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let s=He();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new $h(e,n,this.Ze,this.He,s);return this.He=vr(),this.Je=Zc(),this.Ye=Zc(),this.Ze=new At(ke),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new kE,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ht(ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ht(ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new kE),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Zc(){return new At(be.comparator)}function jE(){return new At(be.comparator)}const vD={asc:"ASCENDING",desc:"DESCENDING"},_D={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ED={and:"AND",or:"OR"};class TD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qm(r,e){return r.useProto3Json||Hh(e)?e:{value:e}}function Ch(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function SD(r,e){return Ch(r,e.toTimestamp())}function Pi(r){return nt(!!r,49232),De.fromTimestamp(function(n){const s=us(n);return new yt(s.seconds,s.nanos)}(r))}function Pp(r,e){return Ym(r,e).canonicalString()}function Ym(r,e){const n=function(o){return new pt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function yS(r){const e=pt.fromString(r);return nt(SS(e),10190,{key:e.toString()}),e}function $m(r,e){return Pp(r.databaseId,e.path)}function Am(r,e){const n=yS(e);if(n.get(1)!==r.databaseId.projectId)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new be(_S(n))}function vS(r,e){return Pp(r.databaseId,e)}function AD(r){const e=yS(r);return e.length===4?pt.emptyPath():_S(e)}function Xm(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _S(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function LE(r,e,n){return{name:$m(r,e),fields:n.value.mapValue.fields}}function bD(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(nt(E===void 0||typeof E=="string",58123),sn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),sn.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?ce.UNKNOWN:dS(g.code);return new _e(E,g.message||"")}(f);n=new pS(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Am(r,s.document.name),u=Pi(s.document.updateTime),f=s.document.createTime?Pi(s.document.createTime):De.min(),m=new wn({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new hh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Am(r,s.document),u=s.readTime?Pi(s.readTime):De.min(),f=fn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new hh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Am(r,s.document),u=s.removedTargetIds||[];n=new hh([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new mD(o,u),m=s.targetId;n=new mS(m,f)}}return n}function wD(r,e){let n;if(e instanceof _u)n={update:LE(r,e.key,e.value)};else if(e instanceof Op)n={delete:$m(r,e.key)};else if(e instanceof gs)n={update:LE(r,e.key,e.data),updateMask:VD(e.fieldMask)};else{if(!(e instanceof hD))return Ce(16599,{ft:e.type});n={verify:$m(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof ou)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ih)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Ce(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:SD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)}(r,e.precondition)),n}function RD(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Pi(o.updateTime):Pi(u);return f.isEqual(De.min())&&(f=Pi(u)),new lD(f,o.transformResults||[])}(n,e))):[]}function ID(r,e){return{documents:[vS(r,e.path)]}}function CD(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=vS(r,o);const u=function(g){if(g.length!==0)return TS(hi.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(S){return{field:eo(S.field),direction:ND(S.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Qm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function xD(r){let e=AD(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(b){const S=ES(b);return S instanceof hi&&XT(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(S=>function(x){return new Rh(to(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(b){let S;return S=typeof b=="object"?b.value:b,Hh(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(b){const S=!!b.before,P=b.values||[];return new wh(P,S)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const S=!b.before,P=b.values||[];return new wh(P,S)}(n.endAt)),Yx(e,o,f,u,m,"F",p,g)}function DD(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ES(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(n.unaryFilter.field);return kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(r):r.fieldFilter!==void 0?function(n){return kt.create(to(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return hi.create(n.compositeFilter.filters.map(s=>ES(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(r):Ce(30097,{filter:r})}function ND(r){return vD[r]}function OD(r){return _D[r]}function MD(r){return ED[r]}function eo(r){return{fieldPath:r.canonicalString()}}function to(r){return rn.fromServerFormat(r.fieldPath)}function TS(r){return r instanceof kt?function(n){if(n.op==="=="){if(wE(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(bE(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wE(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(bE(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:OD(n.op),value:n.value}}}(r):r instanceof hi?function(n){const s=n.getFilters().map(o=>TS(o));return s.length===1?s[0]:{compositeFilter:{op:MD(n.op),filters:s}}}(r):Ce(54877,{filter:r})}function VD(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,o,u=De.min(),f=De.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.wt=e}}function kD(r){const e=xD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.Cn=new LD}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(ls.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class LD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ht(pt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AS=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(AS,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new po(0)}static lr(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="LruGarbageCollector",UD=1048576;function zE([r,e],[n,s]){const o=ke(r,n);return o===0?ke(e,s):o}class BD{constructor(e){this.Er=e,this.buffer=new Ht(zE),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();zE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ve(BE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Co(n)?ve(BE,"Ignoring IndexedDB error during garbage collection: ",n):await Io(n)}await this.mr(3e5)})}}class qD{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return le.resolve(qh.le);const s=new BD(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(UE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UE):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,n))).next(b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),Za()<=qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function HD(r,e){return new qD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.changes=new sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Zl(s.mutation,o,Pn.empty(),yt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,He()).next(()=>s))}getLocalViewOfDocuments(e,n,s=He()){const o=Ws();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Fl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,He()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=vr();const f=Wl(),m=function(){return Wl()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof gs)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),Zl(E.mutation,g,E.mutation.getFieldMask(),yt.now())):f.set(g.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var b;return m.set(g,new GD(E,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Wl();let o=new At((f,m)=>f-m),u=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Pn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const b=(o.get(m.batchId)||He()).add(p);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,b=sS();E.forEach(S=>{if(!u.has(S)){const P=hS(n.get(S),s.get(S));P!==null&&b.set(S,P),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,b))}return le.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):le.resolve(Ws());let m=iu,p=u;return f.next(g=>le.forEach(g,(E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?le.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{p=p.insert(E,S)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,He())).next(E=>({batchId:m,changes:rS(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Fl();return this.indexManager.getCollectionParents(e,u).next(m=>le.forEach(m,p=>{const g=function(b,S){return new vu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((b,S)=>{f=f.insert(b,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,fn.newInvalidDocument(E)))});let m=Fl();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&Zl(E.mutation,g,Pn.empty(),yt.now()),Kh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return le.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}}(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:kD(o.bundledQuery),readTime:Pi(o.readTime)}}(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.overlays=new At(be.comparator),this.Qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ws();return le.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),le.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const o=Ws(),u=n.length+1,f=new be(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new At((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=Ws(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=Ws(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return le.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new dD(n,s));let u=this.Qr.get(n);u===void 0&&(u=He(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.$r=new Ht($t.Ur),this.Kr=new Ht($t.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new $t(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new $t(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new be(new pt([])),s=new $t(n,e),o=new $t(n,e+1),u=[];return this.Kr.forEachInRange([s,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new be(new pt([])),s=new $t(n,e),o=new $t(n,e+1);let u=He();return this.Kr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new $t(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return be.comparator(e.key,n.key)||ke(e.Zr,n.Zr)}static Wr(e,n){return ke(e.Zr,n.Zr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ht($t.Ur)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new fD(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new $t(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(f)}lookupMutationBatch(e,n){return le.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?wp:this.nr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],f=>{const m=this.ei(f.Zr);u.push(m)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(ke);return n.forEach(o=>{const u=new $t(o,0),f=new $t(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{s=s.add(m.Zr)})}),le.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const f=new $t(new be(u),0);let m=new Ht(ke);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},f),le.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){nt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return le.forEach(n.mutations,o=>{const u=new $t(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new $t(n,0),o=this.Xr.firstAfterOrEqual(s);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.ii=e,this.docs=function(){return new At(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let s=vr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=vr();const f=n.path,m=new be(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||Rx(wx(E),s)<=0||(o.has(E.key)||Kh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce(9500)}si(e,n){return le.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new ZD(this)}getSize(e){return le.resolve(this.size)}}class ZD extends FD{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),le.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.persistence=e,this.oi=new sa(n=>Cp(n),xp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this._i=0,this.ai=new kp,this.targetCount=0,this.ui=po.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),le.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new po(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Tr(n),le.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.ci={},this.overlays={},this.li=new qh(0),this.hi=!1,this.hi=!0,this.Pi=new $D,this.referenceDelegate=e(this),this.Ti=new JD(this),this.indexManager=new jD,this.remoteDocumentCache=function(o){return new WD(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new PD(n),this.Ei=new QD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new XD(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ve("MemoryPersistence","Starting transaction:",e);const o=new e2(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return le.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class e2 extends Cx{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Vi=new kp,this.mi=null}static fi(e){return new jp(e)}get gi(){if(this.mi)return this.mi;throw Ce(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.gi,s=>{const o=be.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return le.or([()=>le.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.yi=new sa(s=>Nx(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=HD(this,n)}static fi(e,n){return new xh(e,n)}di(){}Ai(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return le.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?le.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(m=>{m||(s++,u.removeEntry(f,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),le.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lh(e.data.value)),n}Dr(e,n,s){return le.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=He(),o=He();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Lp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return k1()?8:xx(dn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new t2;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,f,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Za()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),le.resolve()):(Za()<=qe.DEBUG&&ve("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Za()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):le.resolve())}ws(e,n){if(xE(n))return le.resolve(null);let s=Vi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Km(n,null,"F"),s=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=He(...u);return this.ys.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.vs(n,m);return this.Cs(n,g,f,p.readTime)?this.ws(e,Km(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,s,o){return xE(n)||o.isEqual(De.min())?le.resolve(null):this.ys.getDocuments(e,s).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,s,o)?le.resolve(null):(Za()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(n)),this.Fs(e,f,n,bx(o,iu)).next(m=>m))})}vs(e,n){let s=new Ht(nS(e));return n.forEach((o,u)=>{Kh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Za()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ys.getDocumentsMatchingQuery(e,n,ls.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",i2=3e8;class r2{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new At(ke),this.Os=new sa(u=>Cp(u),xp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function s2(r,e,n,s){return new r2(r,e,n,s)}async function wS(r,e){const n=Me(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=He();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function a2(r,e){const n=Me(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const b=g.batch,S=b.keys();let P=le.resolve();return S.forEach(x=>{P=P.next(()=>E.getEntry(p,x)).next(U=>{const O=g.docVersions.get(x);nt(O!==null,48541),U.version.compareTo(O)<0&&(b.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),E.addEntry(U)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=He();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function RS(r){const e=Me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function o2(r,e){const n=Me(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,b)=>{const S=o.get(b);if(!S)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,b).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,b)));let P=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(sn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(b,P),function(U,O,q){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=i2?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(S,P,E)&&m.push(n.Ti.updateTargetData(u,P))});let p=vr(),g=He();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(l2(u,f,e.documentUpdates).next(E=>{p=E.qs,g=E.Qs})),!s.isEqual(De.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(b=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return le.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.xs=o,u))}function l2(r,e,n){let s=He(),o=He();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=vr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ve(Up,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:f,Qs:o}})}function u2(r,e){const n=Me(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=wp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function c2(r,e){const n=Me(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,le.resolve(o)):n.Ti.allocateTargetId(s).next(f=>(o=new Jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Wm(r,e,n){const s=Me(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Co(f))throw f;ve(Up,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function qE(r,e,n){const s=Me(r);let o=De.min(),u=He();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const b=Me(p),S=b.Os.get(E);return S!==void 0?le.resolve(b.xs.get(S)):b.Ti.getTargetData(g,E)}(s,f,Vi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?o:De.min(),n?u:He())).next(m=>(h2(s,Xx(e),m),{documents:m,$s:u})))}function h2(r,e,n){let s=r.Ns.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class HE{constructor(){this.activeTargetIds=nD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f2{constructor(){this.xo=new HE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new HE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="ConnectivityMonitor";class GE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ve(FE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ve(FE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Zm(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="RestConnection",m2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class p2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Ah?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const f=Zm(),m=this.jo(e,n.toUriEncodedString());ve(bm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),E=So(g);return this.Jo(e,m,p,s,E).then(b=>(ve(bm,`Received RPC '${e}' ${f}: `,b),b),b=>{throw co(bm,`RPC '${e}' ${f} failed with error: `,b,"url: ",m,"request:",s),b})}Yo(e,n,s,o,u,f){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=m2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class y2 extends p2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Zm();return new Promise((m,p)=>{const g=new xT;g.setWithCredentials(!0),g.listenOnce(DT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case oh.NO_ERROR:const b=g.getResponseJson();ve(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(b)),m(b);break;case oh.TIMEOUT:ve(cn,`RPC '${e}' ${f} timed out`),p(new _e(ce.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const S=g.getStatus();if(ve(cn,`RPC '${e}' ${f} failed with status:`,S,"response text:",g.getResponseText()),S>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const x=P==null?void 0:P.error;if(x&&x.status&&x.message){const U=function(q){const L=q.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(L)>=0?L:ce.UNKNOWN}(x.status);p(new _e(U,x.message))}else p(new _e(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new _e(ce.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{h_:e,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{ve(cn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);ve(cn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)})}I_(e,n,s){const o=Zm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=MT(),m=OT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ve(cn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const b=f.createWebChannel(E,p);this.E_(b);let S=!1,P=!1;const x=new g2({Zo:O=>{P?ve(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(S||(ve(cn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),ve(cn,`RPC '${e}' stream ${o} sending:`,O),b.send(O))},Xo:()=>b.close()}),U=(O,q,L)=>{O.listen(q,G=>{try{L(G)}catch(Q){setTimeout(()=>{throw Q},0)}})};return U(b,Hl.EventType.OPEN,()=>{P||(ve(cn,`RPC '${e}' stream ${o} transport opened.`),x.__())}),U(b,Hl.EventType.CLOSE,()=>{P||(P=!0,ve(cn,`RPC '${e}' stream ${o} transport closed`),x.u_(),this.d_(b))}),U(b,Hl.EventType.ERROR,O=>{P||(P=!0,co(cn,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),x.u_(new _e(ce.UNAVAILABLE,"The operation could not be completed")))}),U(b,Hl.EventType.MESSAGE,O=>{var q;if(!P){const L=O.data[0];nt(!!L,16349);const G=L,Q=(G==null?void 0:G.error)||((q=G[0])===null||q===void 0?void 0:q.error);if(Q){ve(cn,`RPC '${e}' stream ${o} received error:`,Q);const K=Q.status;let te=function(D){const k=Pt[D];if(k!==void 0)return dS(k)}(K),I=Q.message;te===void 0&&(te=ce.INTERNAL,I="Unknown error status: "+K+" with message "+Q.message),P=!0,x.u_(new _e(te,I)),b.close()}else ve(cn,`RPC '${e}' stream ${o} received:`,L),x.c_(L)}}),U(m,NT.STAT_EVENT,O=>{O.stat===Um.PROXY?ve(cn,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===Um.NOPROXY&&ve(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(r){return new TD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="PersistentStream";class CS{constructor(e,n,s,o,u,f,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new IS(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new _e(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ve(KE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ve(KE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v2 extends CS{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=bD(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?De.min():f.readTime?Pi(f.readTime):De.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=Xm(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Fm(p)?{documents:ID(u,p)}:{query:CD(u,p).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=gS(u,f.resumeToken);const g=Qm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(De.min())>0){m.readTime=Ch(u,f.snapshotVersion.toTimestamp());const g=Qm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=DD(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.Q_(n)}}class _2 extends CS{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=RD(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=Xm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>wD(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{}class T2 extends E2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,Ym(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(ce.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(e,Ym(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new _e(ce.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class S2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(yr(n),this.ua=!1):ve("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class A2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{s.enqueueAndForget(async()=>{aa(this)&&(ve(na,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.da.add(4),await Tu(g),g.Va.set("Unknown"),g.da.delete(4),await Wh(g)}(this))})}),this.Va=new S2(s,o)}}async function Wh(r){if(aa(r))for(const e of r.Aa)await e(!0)}async function Tu(r){for(const e of r.Aa)await e(!1)}function xS(r,e){const n=Me(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Hp(n)?qp(n):xo(n).N_()&&zp(n,e))}function Bp(r,e){const n=Me(r),s=xo(n);n.Ea.delete(e),s.N_()&&DS(n,e),n.Ea.size===0&&(s.N_()?s.k_():aa(n)&&n.Va.set("Unknown"))}function zp(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(r).Z_(e)}function DS(r,e){r.ma.Ke(e),xo(r).X_(e)}function qp(r){r.ma=new yD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),xo(r).start(),r.Va.ca()}function Hp(r){return aa(r)&&!xo(r).O_()&&r.Ea.size>0}function aa(r){return Me(r).da.size===0}function NS(r){r.ma=void 0}async function b2(r){r.Va.set("Online")}async function w2(r){r.Ea.forEach((e,n)=>{zp(r,e)})}async function R2(r,e){NS(r),Hp(r)?(r.Va.Pa(e),qp(r)):r.Va.set("Unknown")}async function I2(r,e,n){if(r.Va.set("Online"),e instanceof pS&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){ve(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dh(r,s)}else if(e instanceof hh?r.ma.Xe(e):e instanceof mS?r.ma.ot(e):r.ma.nt(e),!n.isEqual(De.min()))try{const s=await RS(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ea.get(g);E&&u.Ea.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.Ea.get(p);if(!E)return;u.Ea.set(p,E.withResumeToken(sn.EMPTY_BYTE_STRING,E.snapshotVersion)),DS(u,p);const b=new Jr(E.target,p,g,E.sequenceNumber);zp(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ve(na,"Failed to raise snapshot:",s),await Dh(r,s)}}async function Dh(r,e,n){if(!Co(e))throw e;r.da.add(1),await Tu(r),r.Va.set("Offline"),n||(n=()=>RS(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ve(na,"Retrying IndexedDB access"),await n(),r.da.delete(1),await Wh(r)})}function OS(r,e){return e().catch(n=>Dh(r,n,e))}async function Zh(r){const e=Me(r),n=fs(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:wp;for(;C2(e);)try{const o=await u2(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,x2(e,o)}catch(o){await Dh(e,o)}MS(e)&&VS(e)}function C2(r){return aa(r)&&r.Ia.length<10}function x2(r,e){r.Ia.push(e);const n=fs(r);n.N_()&&n.ea&&n.ta(e.mutations)}function MS(r){return aa(r)&&!fs(r).O_()&&r.Ia.length>0}function VS(r){fs(r).start()}async function D2(r){fs(r).ia()}async function N2(r){const e=fs(r);for(const n of r.Ia)e.ta(n.mutations)}async function O2(r,e,n){const s=r.Ia.shift(),o=Mp.from(s,e,n);await OS(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Zh(r)}async function M2(r,e){e&&fs(r).ea&&await async function(s,o){if(function(f){return pD(f)&&f!==ce.ABORTED}(o.code)){const u=s.Ia.shift();fs(s).L_(),await OS(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Zh(s)}}(r,e),MS(r)&&VS(r)}async function QE(r,e){const n=Me(r);n.asyncQueue.verifyOperationInProgress(),ve(na,"RemoteStore received new credentials");const s=aa(n);n.da.add(3),await Tu(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Wh(n)}async function V2(r,e){const n=Me(r);e?(n.da.delete(2),await Wh(n)):e||(n.da.add(2),await Tu(n),n.Va.set("Unknown"))}function xo(r){return r.fa||(r.fa=function(n,s,o){const u=Me(n);return u.oa(),new v2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:b2.bind(null,r),n_:w2.bind(null,r),i_:R2.bind(null,r),Y_:I2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Hp(r)?qp(r):r.Va.set("Unknown")):(await r.fa.stop(),NS(r))})),r.fa}function fs(r){return r.ga||(r.ga=function(n,s,o){const u=Me(n);return u.oa(),new _2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:D2.bind(null,r),i_:M2.bind(null,r),na:N2.bind(null,r),ra:O2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Zh(r)):(await r.ga.stop(),r.Ia.length>0&&(ve(na,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Fp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(r,e){if(yr("AsyncQueue",`${e}: ${r}`),Co(r))return new _e(ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.pa=new At(be.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ce(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class go{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new go(e,n,oo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class k2{constructor(){this.queries=$E(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=$E(),u.forEach((f,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new _e(ce.ABORTED,"Firestore shutting down"))}}function $E(){return new sa(r=>tS(r),Gh)}async function PS(r,e){const n=Me(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new P2,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Gp(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Kp(n)}async function kS(r,e){const n=Me(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function j2(r,e){const n=Me(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(s=!0);f.ba=o}}s&&Kp(n)}function L2(r,e,n){const s=Me(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Kp(r){r.Ca.forEach(e=>{e.next()})}var Jm,XE;(XE=Jm||(Jm={})).xa="default",XE.Cache="cache";class jS{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.key=e}}class US{constructor(e){this.key=e}}class U2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.Za=nS(e),this.Xa=new oo(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new YE,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,b)=>{const S=o.get(E),P=Kh(this.query,b)?b:null,x=!!S&&this.mutatedKeys.has(S.key),U=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let O=!1;S&&P?S.data.isEqual(P.data)?x!==U&&(s.track({type:3,doc:P}),O=!0):this.ru(S,P)||(s.track({type:2,doc:P}),O=!0,(p&&this.Za(P,p)>0||g&&this.Za(P,g)<0)&&(m=!0)):!S&&P?(s.track({type:0,doc:P}),O=!0):S&&!P&&(s.track({type:1,doc:S}),O=!0,(p||g)&&(m=!0)),O&&(P?(f=f.add(P),u=U?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:f,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((E,b)=>function(P,x){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:O})}};return U(P)-U(x)}(E.type,b.type)||this.Za(E.doc,b.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,f.length!==0||g?{snapshot:new go(this.query,e.Xa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new YE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new US(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new LS(s))}),n}au(e){this.Ha=e.$s,this.Ya=He();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return go.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Qp="SyncEngine";class B2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class z2{constructor(e){this.key=e,this.cu=!1}}class q2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new sa(m=>tS(m),Gh),this.Pu=new Map,this.Tu=new Set,this.Iu=new At(be.comparator),this.Eu=new Map,this.du=new kp,this.Au={},this.Ru=new Map,this.Vu=po.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function H2(r,e,n=!0){const s=GS(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await BS(s,e,n,!0),o}async function F2(r,e){const n=GS(r);await BS(n,e,!0,!1)}async function BS(r,e,n,s){const o=await c2(r.localStore,Vi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await G2(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&xS(r.remoteStore,o),m}async function G2(r,e,n,s,o){r.fu=(b,S,P)=>async function(U,O,q,L){let G=O.view.tu(q);G.Cs&&(G=await qE(U.localStore,O.query,!1).then(({documents:I})=>O.view.tu(I,G)));const Q=L&&L.targetChanges.get(O.targetId),K=L&&L.targetMismatches.get(O.targetId)!=null,te=O.view.applyChanges(G,U.isPrimaryClient,Q,K);return ZE(U,O.targetId,te.ou),te.snapshot}(r,b,S,P);const u=await qE(r.localStore,e,!0),f=new U2(e,u.$s),m=f.tu(u.documents),p=Eu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,p);ZE(r,n,g.ou);const E=new B2(e,n,f);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),g.snapshot}async function K2(r,e,n){const s=Me(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(f=>!Gh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Wm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Bp(s.remoteStore,o.targetId),ep(s,o.targetId)}).catch(Io)):(ep(s,o.targetId),await Wm(s.localStore,o.targetId,!0))}async function Q2(r,e){const n=Me(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Bp(n.remoteStore,s.targetId))}async function Y2(r,e,n){const s=tN(r);try{const o=await function(f,m){const p=Me(f),g=yt.now(),E=m.reduce((P,x)=>P.add(x.key),He());let b,S;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let x=vr(),U=He();return p.Bs.getEntries(P,E).next(O=>{x=O,x.forEach((q,L)=>{L.isValidDocument()||(U=U.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,x)).next(O=>{b=O;const q=[];for(const L of m){const G=cD(L,b.get(L.key).overlayedDocument);G!=null&&q.push(new gs(L.key,G,QT(G.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,q,m)}).next(O=>{S=O;const q=O.applyToLocalDocumentSet(b,U);return p.documentOverlayCache.saveOverlays(P,O.batchId,q)})}).then(()=>({batchId:S.batchId,changes:rS(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Au[f.currentUser.toKey()];g||(g=new At(ke)),g=g.insert(m,p),f.Au[f.currentUser.toKey()]=g}(s,o.batchId,n),await Su(s,o.changes),await Zh(s.remoteStore)}catch(o){const u=Gp(o,"Failed to persist write");n.reject(u)}}async function zS(r,e){const n=Me(r);try{const s=await o2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?nt(f.cu,14607):o.removedDocuments.size>0&&(nt(f.cu,42227),f.cu=!1))}),await Su(n,s,e)}catch(s){await Io(s)}}function WE(r,e,n){const s=Me(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,f)=>{const m=f.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Me(f);p.onlineState=m;let g=!1;p.queries.forEach((E,b)=>{for(const S of b.Sa)S.Fa(m)&&(g=!0)}),g&&Kp(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $2(r,e,n){const s=Me(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let f=new At(be.comparator);f=f.insert(u,fn.newNoDocument(u,De.min()));const m=He().add(u),p=new $h(De.min(),new Map,new At(ke),f,m);await zS(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Yp(s)}else await Wm(s.localStore,e,!1).then(()=>ep(s,e,n)).catch(Io)}async function X2(r,e){const n=Me(r),s=e.batch.batchId;try{const o=await a2(n.localStore,e);HS(n,s,null),qS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Su(n,o)}catch(o){await Io(o)}}async function W2(r,e,n){const s=Me(r);try{const o=await function(f,m){const p=Me(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(b=>(nt(b!==null,37113),E=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);HS(s,e,n),qS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Su(s,o)}catch(o){await Io(o)}}function qS(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function HS(r,e,n){const s=Me(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function ep(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||FS(r,s)})}function FS(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Bp(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Yp(r))}function ZE(r,e,n){for(const s of n)s instanceof LS?(r.du.addReference(s.key,e),Z2(r,s)):s instanceof US?(ve(Qp,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||FS(r,s.key)):Ce(19791,{pu:s})}function Z2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(ve(Qp,"New document in limbo: "+n),r.Tu.add(s),Yp(r))}function Yp(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new be(pt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new z2(n)),r.Iu=r.Iu.insert(n,s),xS(r.remoteStore,new Jr(Vi(Dp(n.path)),s,"TargetPurposeLimboResolution",qh.le))}}async function Su(r,e,n){const s=Me(r),o=[],u=[],f=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{f.push(s.fu(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Lp.Rs(p.targetId,g);u.push(b)}}))}),await Promise.all(f),s.lu.Y_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>le.forEach(g,S=>le.forEach(S.ds,P=>E.persistence.referenceDelegate.addReference(b,S.targetId,P)).next(()=>le.forEach(S.As,P=>E.persistence.referenceDelegate.removeReference(b,S.targetId,P)))))}catch(b){if(!Co(b))throw b;ve(Up,"Failed to update sequence numbers: "+b)}for(const b of g){const S=b.targetId;if(!b.fromCache){const P=E.xs.get(S),x=P.snapshotVersion,U=P.withLastLimboFreeSnapshotVersion(x);E.xs=E.xs.insert(S,U)}}}(s.localStore,u))}async function J2(r,e){const n=Me(r);if(!n.currentUser.isEqual(e)){ve(Qp,"User change. New user:",e.toKey());const s=await wS(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new _e(ce.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Su(n,s.ks)}}function eN(r,e){const n=Me(r),s=n.Eu.get(e);if(s&&s.cu)return He().add(s.key);{let o=He();const u=n.Pu.get(e);if(!u)return o;for(const f of u){const m=n.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function GS(r){const e=Me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$2.bind(null,e),e.lu.Y_=j2.bind(null,e.eventManager),e.lu.gu=L2.bind(null,e.eventManager),e}function tN(r){const e=Me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W2.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return s2(this.persistence,new n2,e.initialUser,this.serializer)}Su(e){return new bS(jp.fi,this.serializer)}bu(e){return new f2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class nN extends Nh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){nt(this.persistence.referenceDelegate instanceof xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zD(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new bS(s=>xh.fi(s,n),this.serializer)}}class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>WE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=J2.bind(null,this.syncEngine),await V2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new k2}()}createDatastore(e){const n=Xh(e.databaseInfo.databaseId),s=function(u){return new y2(u)}(e.databaseInfo);return function(u,f,m,p){return new T2(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new A2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>WE(this.syncEngine,n,0),function(){return GE.C()?new GE:new d2}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const b=new q2(o,u,f,m,p,g);return E&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);ve(na,"RemoteStore shutting down."),u.da.add(5),await Tu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class iN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=jT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ve(ds,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ve(ds,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Gp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Rm(r,e){r.asyncQueue.verifyOperationInProgress(),ve(ds,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await wS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function JE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await rN(r);ve(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>QE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>QE(e.remoteStore,o)),r._onlineComponents=e}async function rN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ds,"Using user provided OfflineComponentProvider");try{await Rm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await Rm(r,new Nh)}}else ve(ds,"Using default OfflineComponentProvider"),await Rm(r,new nN(void 0));return r._offlineComponents}async function QS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ds,"Using user provided OnlineComponentProvider"),await JE(r,r._uninitializedComponentsProvider._online)):(ve(ds,"Using default OnlineComponentProvider"),await JE(r,new tp))),r._onlineComponents}function sN(r){return QS(r).then(e=>e.syncEngine)}async function YS(r){const e=await QS(r),n=e.eventManager;return n.onListen=H2.bind(null,e.syncEngine),n.onUnlisten=K2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q2.bind(null,e.syncEngine),n}function aN(r,e,n={}){const s=new dr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new KS({next:S=>{E.xu(),f.enqueueAndForget(()=>kS(u,b));const P=S.docs.has(m);!P&&S.fromCache?g.reject(new _e(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&p.source==="server"?g.reject(new _e(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new jS(Dp(m.path),E,{includeMetadataChanges:!0,Qa:!0});return PS(u,b)}(await YS(r),r.asyncQueue,e,n,s)),s.promise}function oN(r,e,n={}){const s=new dr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new KS({next:S=>{E.xu(),f.enqueueAndForget(()=>kS(u,b)),S.fromCache&&p.source==="server"?g.reject(new _e(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new jS(m,E,{includeMetadataChanges:!0,Qa:!0});return PS(u,b)}(await YS(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(r,e,n){if(!n)throw new _e(ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lN(r,e,n,s){if(e===!0&&s===!0)throw new _e(ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function t0(r){if(!be.isDocumentKey(r))throw new _e(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function n0(r){if(be.isDocumentKey(r))throw new _e(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Jh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jh(r);throw new _e(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firestore.googleapis.com",i0=!0;class r0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WS,this.ssl=i0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:i0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UD)throw new _e(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$S((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new px;switch(s.type){case"firstParty":return new _x(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=e0.get(n);s&&(ve("ComponentProvider","Removing Datastore"),e0.delete(n),s.terminate())}(this),Promise.resolve()}}function uN(r,e,n,s={}){var o;r=fi(r,ef);const u=So(e),f=r._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(B0(`https://${p}`),z0("Firestore",!0)),f.host!==WS&&f.host!==p&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:s});if(!Zs(g,m)&&(r._setSettings(g),s.mockUserToken)){let E,b;if(typeof s.mockUserToken=="string")E=s.mockUserToken,b=hn.MOCK_USER;else{E=I1(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new _e(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new hn(S)}r._authCredentials=new gx(new PT(E,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class _n{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class ss extends Do{constructor(e,n,s){super(e,n,Dp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new be(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Fe(r,e,...n){if(r=Xt(r),XS("collection","path",e),r instanceof ef){const s=pt.fromString(e,...n);return n0(s),new ss(r,null,s)}{if(!(r instanceof _n||r instanceof ss))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...n));return n0(s),new ss(r.firestore,null,s)}}function gt(r,e,...n){if(r=Xt(r),arguments.length===1&&(e=jT.newId()),XS("doc","path",e),r instanceof ef){const s=pt.fromString(e,...n);return t0(s),new _n(r,null,new be(s))}{if(!(r instanceof _n||r instanceof ss))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...n));return t0(s),new _n(r.firestore,r instanceof ss?r.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="AsyncQueue";class a0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new IS(this,"async_queue_retry"),this.rc=()=>{const s=wm();s&&ve(s0,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new dr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Co(e))throw e;ve(s0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,yr("INTERNAL UNHANDLED ERROR: ",o0(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=Fp.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ce(47125,{cc:o0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function o0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class oa extends ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new a0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,await e}}}function cN(r,e){const n=typeof r=="object"?r:G0(),s=typeof r=="string"?r:Ah,o=mp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=w1("firestore");u&&uN(o,...u)}return o}function $p(r){if(r._terminated)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hN(r),r._firestoreClient}function hN(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,g,E){return new Vx(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,$S(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new iN(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(sn.fromBase64String(e))}catch(n){throw new _e(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yo(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^__.*__$/;class dN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class ZS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ic:r})}}class Zp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Zp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Oh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(JS(this.Ic)&&fN.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class mN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Xh(e)}bc(e,n,s,o=!1){return new Zp({Ic:e,methodName:n,wc:s,path:rn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rf(r){const e=r._freezeSettings(),n=Xh(r._databaseId);return new mN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function eA(r,e,n,s,o,u={}){const f=r.bc(u.merge||u.mergeFields?2:0,e,n,o);eg("Data must be an object, but it was:",f,s);const m=tA(s,f);let p,g;if(u.merge)p=new Pn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const S=np(e,b,n);if(!f.contains(S))throw new _e(ce.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);iA(E,S)||E.push(S)}p=new Pn(E),g=f.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=f.fieldTransforms;return new dN(new wn(m),p,g)}class sf extends nf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}class Jp extends nf{_toFieldTransform(e){return new aD(e.path,new ou)}isEqual(e){return e instanceof Jp}}function pN(r,e,n,s){const o=r.bc(1,e,n);eg("Data must be an object, but it was:",o,s);const u=[],f=wn.empty();ps(s,(p,g)=>{const E=tg(e,p,n);g=Xt(g);const b=o.mc(E);if(g instanceof sf)u.push(E);else{const S=Au(g,b);S!=null&&(u.push(E),f.set(E,S))}});const m=new Pn(u);return new ZS(f,m,o.fieldTransforms)}function gN(r,e,n,s,o,u){const f=r.bc(1,e,n),m=[np(e,s,n)],p=[o];if(u.length%2!=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(np(e,u[S])),p.push(u[S+1]);const g=[],E=wn.empty();for(let S=m.length-1;S>=0;--S)if(!iA(g,m[S])){const P=m[S];let x=p[S];x=Xt(x);const U=f.mc(P);if(x instanceof sf)g.push(P);else{const O=Au(x,U);O!=null&&(g.push(P),E.set(P,O))}}const b=new Pn(g);return new ZS(E,b,f.fieldTransforms)}function yN(r,e,n,s=!1){return Au(n,r.bc(s?4:3,e))}function Au(r,e){if(nA(r=Xt(r)))return eg("Unsupported field value:",e,r),tA(r,e);if(r instanceof nf)return function(s,o){if(!JS(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Au(m,o.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=yt.fromDate(s);return{timestampValue:Ch(o.serializer,u)}}if(s instanceof yt){const u=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ch(o.serializer,u)}}if(s instanceof Xp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yo)return{bytesValue:gS(o.serializer,s._byteString)};if(s instanceof _n){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Wp)return function(f,m){return{mapValue:{fields:{[GT]:{stringValue:KT},[bh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Np(m.serializer,g)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${Jh(s)}`)}(r,e)}function tA(r,e){const n={};return UT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(r,(s,o)=>{const u=Au(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function nA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof Xp||r instanceof yo||r instanceof _n||r instanceof nf||r instanceof Wp)}function eg(r,e,n){if(!nA(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Jh(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function np(r,e,n){if((e=Xt(e))instanceof tf)return e._internalPath;if(typeof e=="string")return tg(r,e);throw Oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const vN=new RegExp("[~\\*/\\[\\]]");function tg(r,e,n){if(e.search(vN)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new tf(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Oh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new _e(ce.INVALID_ARGUMENT,m+r+p)}function iA(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _N(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _N extends rA{data(){return super.data()}}function ng(r,e){return typeof e=="string"?tg(r,e):e instanceof tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class TN extends ig{}function SN(r,e,...n){let s=[];e instanceof ig&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof rg).length,m=u.filter(p=>p instanceof af).length;if(f>1||f>0&&m>0)throw new _e(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class af extends TN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new af(e,n,s)}_apply(e){const n=this._parse(e);return sA(e._query,n),new Do(e.firestore,e.converter,Gm(e._query,n))}_parse(e){const n=rf(e.firestore);return function(u,f,m,p,g,E,b){let S;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){u0(b,E);const x=[];for(const U of b)x.push(l0(p,u,U));S={arrayValue:{values:x}}}else S=l0(p,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||u0(b,E),S=yN(m,f,b,E==="in"||E==="not-in");return kt.create(g,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AN(r,e,n){const s=e,o=ng("where",r);return af._create(o,s,n)}class rg extends ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)sA(f,p),f=Gm(f,p)}(e._query,n),new Do(e.firestore,e.converter,Gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function l0(r,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new _e(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eS(e)&&n.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!be.isDocumentKey(s))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return AE(r,new be(s))}if(n instanceof _n)return AE(r,n._key);throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jh(n)}.`)}function u0(r,e){if(!Array.isArray(r)||r.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sA(r,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bN{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ps(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[bh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>xt(f.doubleValue));return new Wp(u)}convertGeoPoint(e){return new Xp(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Fh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=us(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);nt(SS(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||yr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oA extends rA{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class fh extends oA{data(e={}){return super.data(e)}}class wN{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Kl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new fh(this._firestore,this._userDataWriter,s.key,s,new Kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:RN(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(r){r=fi(r,_n);const e=fi(r.firestore,oa);return aN($p(e),r._key).then(n=>IN(e,r,n))}class lA extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function We(r){r=fi(r,Do);const e=fi(r.firestore,oa),n=$p(e),s=new lA(e);return EN(r._query),oN(n,r._query).then(o=>new wN(e,s,r,o))}function os(r,e,n){r=fi(r,_n);const s=fi(r.firestore,oa),o=aA(r.converter,e,n);return lf(s,[eA(rf(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Jn.none())])}function sg(r,e,n,...s){r=fi(r,_n);const o=fi(r.firestore,oa),u=rf(o);let f;return f=typeof(e=Xt(e))=="string"||e instanceof tf?gN(u,"updateDoc",r._key,e,n,s):pN(u,"updateDoc",r._key,e),lf(o,[f.toMutation(r._key,Jn.exists(!0))])}function ia(r){return lf(fi(r.firestore,oa),[new Op(r._key,Jn.none())])}function of(r,e){const n=fi(r.firestore,oa),s=gt(r),o=aA(r.converter,e);return lf(n,[eA(rf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}function lf(r,e){return function(s,o){const u=new dr;return s.asyncQueue.enqueueAndForget(async()=>Y2(await sN(s),o,u)),u.promise}($p(r),e)}function IN(r,e,n){const s=n.docs.get(e._key),o=new lA(r);return new oA(r,o,e._key,s,new Kl(n.hasPendingWrites,n.fromCache),e.converter)}function Zn(){return new Jp("serverTimestamp")}(function(e,n=!0){(function(o){Ro=o})(Ao),lo(new Js("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new oa(new yx(s.getProvider("auth-internal")),new Ex(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _e(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ns(hE,fE,e),ns(hE,fE,"esm2017")})();const CN={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},uA=F0(CN),uf=hx(uA),Se=cN(uA),xN=()=>{ji("");const[r,e]=C.useState(""),[n,s]=C.useState(""),[o,u]=C.useState(""),f=To(),m=kn(),p=async()=>{var E,b;const g=((b=(E=m.state)==null?void 0:E.from)==null?void 0:b.pathname)||"/dashboard";try{await WI(uf,r,n),u(" ..."),setTimeout(()=>f(g,{replace:!0}),600)}catch(S){u(" : "+S.message)}};return v.jsxs("div",{style:{padding:"2em",maxWidth:"400px",margin:"auto"},children:[v.jsx("h2",{children:""}),v.jsx("input",{type:"email",placeholder:"",value:r,onChange:g=>e(g.target.value)}),v.jsx("input",{type:"password",placeholder:"",value:n,onChange:g=>s(g.target.value)}),v.jsx("button",{onClick:p,children:""}),v.jsx("div",{style:{marginTop:"1em",color:"red"},children:o})]})},c0=r=>Array.isArray(r)?r.filter(e=>typeof e=="string"&&e.trim().length>0):[],DN=new Set(["owner.multi@example.com","vestige_sync@me.com"]),bu=()=>{const[r,e]=C.useState(null),[n,s]=C.useState(null),[o,u]=C.useState(!0),[f,m]=C.useState("");C.useEffect(()=>{let S=!1;const P=yT(uf,async x=>{if(!x){S||(e(null),s(null),m(""),u(!1));return}S||(e(x),u(!0),m(""));try{const U=gt(Se,"users",x.uid),O=await as(U);if(O.exists()){S||(s({id:O.id,...O.data()}),u(!1));return}const q=x.email?await We(SN(Fe(Se,"users"),AN("email","==",x.email))):null;if(!S){if(q&&!q.empty){const L=q.docs[0],G={...L.data(),uid:x.uid,email:x.email||L.data().email||"",gymIds:c0(L.data().gymIds),migratedFromProfileId:L.id,updatedAt:Zn()};try{await os(U,G,{merge:!0})}catch(Q){console.error("users/{uid} :",Q)}s({id:x.uid,...G,updatedAt:L.data().updatedAt})}else{const L=(x.email||"").toLowerCase();if(DN.has(L)){const Q={uid:x.uid,email:x.email||"",role:"admin",gymIds:["*"],createdAt:Zn(),updatedAt:Zn()};try{await os(U,Q,{merge:!0})}catch(K){console.error("users/{uid} :",K)}s({id:x.uid,uid:x.uid,email:x.email||"",role:"admin",gymIds:["*"]})}else s({id:x.uid,uid:x.uid,email:x.email||"",role:"owner",gymIds:[]})}u(!1)}}catch(U){console.error(":",U),S||(m(""),s(null),u(!1))}});return()=>{S=!0,P()}},[]);const p=C.useMemo(()=>c0(n==null?void 0:n.gymIds),[n]),g=typeof(n==null?void 0:n.role)=="string"?n.role:"",E=C.useMemo(()=>g==="admin"||p.includes("*"),[g,p]);return{authUser:r,profile:n,gymIds:p,role:g,hasAllGymAccess:E,canAccessGym:S=>E||p.includes(S),loading:o,error:f}},NN=()=>{ji("");const r=To(),[e,n]=C.useState([]),[s,o]=C.useState([]),[u,f]=C.useState(!0),[m,p]=C.useState(""),{gymIds:g,role:E,hasAllGymAccess:b,loading:S,error:P}=bu(),x=L=>L?L.seconds?new Date(L.seconds*1e3).toLocaleDateString():String(L):"-",U=()=>{eC(uf).then(()=>r("/login")).catch(L=>console.error(":",L))};C.useEffect(()=>{if(S)return;if(P){p(P),f(!1);return}(async()=>{f(!0),p("");try{const[G,Q]=await Promise.all([We(Fe(Se,"events")),We(Fe(Se,"gyms"))]),K=G.docs.map(I=>({id:I.id,...I.data()})).filter(I=>b||g.includes(I.gymId)),te=Q.docs.map(I=>({id:I.id,...I.data()})).filter(I=>b||g.includes(I.id)).sort((I,R)=>(I.name||"").localeCompare(R.name||"","ja"));n(K),o(te)}catch(G){console.error(":",G),p("")}finally{f(!1)}})()},[S,P,g,b]);const O=async L=>{if(!window.confirm(""))return;const G=e.find(Q=>Q.id===L);if(!G||!b&&!g.includes(G.gymId)){window.alert("");return}try{await ia(gt(Se,"events",L)),n(e.filter(Q=>Q.id!==L))}catch(Q){console.error(":",Q)}},q=new Map(s.map(L=>[L.id,L.name||L.id]));return u||S?v.jsx("p",{style:{padding:"2em"},children:"..."}):m||P?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:m||P}),v.jsx("div",{style:{marginTop:"1em"},children:v.jsx(Be,{to:"/",children:" Home"})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsx("h2",{children:""}),v.jsx("p",{children:""}),v.jsxs("p",{children:[":"," ",b?"":s.length>0?s.map(L=>L.name||L.id).join(" / "):""]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),b||g.length>0?v.jsx(Be,{to:"/create-event",children:" "}):v.jsx("p",{style:{marginBottom:0},children:""})]}),E==="admin"&&v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em",marginTop:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),v.jsx(Be,{to:"/system-admin",children:""})]}),v.jsx("h3",{style:{marginTop:"1.6em"},children:" "}),!b&&g.length===0?v.jsx("p",{children:""}):e.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"1em"},children:e.map(L=>v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h4",{style:{marginTop:0,marginBottom:"0.4em"},children:L.name}),v.jsxs("p",{style:{marginTop:0},children:[": ",x(L.startDate),"  ",x(L.endDate)]}),v.jsxs("p",{style:{marginTop:0},children:[": ",q.get(L.gymId)||""]}),v.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[v.jsx(Be,{to:`/events/${L.id}/edit`,state:{tab:"seasons"},children:" /  / "}),v.jsx(Be,{to:`/events/${L.id}/edit`,state:{tab:"participants"},children:""}),v.jsx(Be,{to:`/events/${L.id}/edit`,state:{tab:"scores"},children:""}),v.jsx(Be,{to:`/score-summary/${L.id}`,children:""}),v.jsx("button",{type:"button",onClick:()=>O(L.id),children:" "})]})]},L.id))}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx("button",{type:"button",onClick:U,children:""})}),v.jsx("div",{style:{marginTop:"1em"},children:v.jsx(Be,{to:"/",children:" Home"})})]})};function ON(){ji("");const[r,e]=C.useState(""),[n,s]=C.useState(""),[o,u]=C.useState([]),[f,m]=C.useState(""),[p,g]=C.useState(""),[E,b]=C.useState(""),[S,P]=C.useState(!0),[x,U]=C.useState(""),O=To(),{authUser:q,gymIds:L,hasAllGymAccess:G,loading:Q,error:K}=bu();C.useEffect(()=>{if(Q)return;if(K){U(K),P(!1);return}(async()=>{P(!0),U("");try{const D=(await We(Fe(Se,"gyms"))).docs.map(k=>({id:k.id,...k.data()})).filter(k=>G||L.includes(k.id)).sort((k,j)=>(k.name||"").localeCompare(j.name||"","ja"));u(D),D.length>0?s(k=>k||D[0].id):s("")}catch(R){console.error(":",R),U("")}finally{P(!1)}})()},[Q,K,L,G]);const te=async I=>{if(I.preventDefault(),!n){b(" ");return}if(new Date(f)>new Date(p)){b(" ");return}try{await of(Fe(Se,"events"),{name:r,gymId:n,ownerUid:(q==null?void 0:q.uid)||"",startDate:yt.fromDate(new Date(f)),endDate:yt.fromDate(new Date(p)),createdAt:Zn()}),b(" "),e(""),O("/dashboard")}catch(R){console.error(R),b(" ")}};return S||Q?v.jsx("p",{style:{padding:"2em"},children:"..."}):x||K?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:x||K}),v.jsx(Be,{to:"/dashboard",children:" "})]}):v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("h2",{children:" "}),v.jsx(Be,{to:"/dashboard",children:" "}),o.length===0?v.jsx("p",{style:{marginTop:"1em"},children:""}):v.jsxs("form",{onSubmit:te,children:[v.jsx("input",{type:"text",placeholder:"",value:r,onChange:I=>e(I.target.value),required:!0}),v.jsx("select",{value:n,onChange:I=>s(I.target.value),required:!0,children:o.map(I=>v.jsx("option",{value:I.id,children:I.name||I.id},I.id))}),v.jsx("input",{type:"date",value:f,onChange:I=>m(I.target.value),required:!0}),v.jsx("input",{type:"date",value:p,onChange:I=>g(I.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("p",{children:E})]})}const h0=r=>{if(!r)return"";const e=typeof r.toDate=="function"?r.toDate():new Date(r);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${o}`},MN=({eventId:r})=>{const[e,n]=C.useState(""),[s,o]=C.useState(""),[u,f]=C.useState(""),[m,p]=C.useState(""),[g,E]=C.useState([]),[b,S]=C.useState(""),[P,x]=C.useState({name:"",startDate:"",endDate:""}),U=C.useCallback(async()=>{try{const te=(await We(Fe(Se,"events",r,"seasons"))).docs.map(I=>({id:I.id,...I.data()}));E(te)}catch(K){console.error(":",K)}},[r]);C.useEffect(()=>{U()},[U]);const O=async K=>{K.preventDefault();try{await of(Fe(Se,"events",r,"seasons"),{name:e,startDate:yt.fromDate(new Date(s)),endDate:yt.fromDate(new Date(u))}),p(" "),n(""),o(""),f(""),U()}catch(te){console.error(te),p(" ")}},q=async K=>{if(window.confirm(""))try{await ia(gt(Se,"events",r,"seasons",K)),E(I=>I.filter(R=>R.id!==K))}catch(I){console.error(":",I)}},L=K=>{S(K.id),x({name:K.name||"",startDate:h0(K.startDate),endDate:h0(K.endDate)})},G=()=>{S(""),x({name:"",startDate:"",endDate:""})},Q=async K=>{if(!P.name.trim()||!P.startDate||!P.endDate){alert("");return}try{const te={name:P.name.trim(),startDate:yt.fromDate(new Date(P.startDate)),endDate:yt.fromDate(new Date(P.endDate))};await sg(gt(Se,"events",r,"seasons",K),te),E(I=>I.map(R=>R.id===K?{...R,...te}:R)),G()}catch(te){console.error(":",te),alert("")}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:O,children:[v.jsx("input",{type:"text",placeholder:"",value:e,onChange:K=>n(K.target.value),required:!0}),v.jsx("input",{type:"date",value:s,onChange:K=>o(K.target.value),required:!0}),v.jsx("input",{type:"date",value:u,onChange:K=>f(K.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("p",{children:m}),v.jsx("ul",{children:g.map(K=>v.jsx("li",{children:b===K.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:P.name,onChange:te=>x(I=>({...I,name:te.target.value}))}),v.jsx("input",{type:"date",value:P.startDate,onChange:te=>x(I=>({...I,startDate:te.target.value}))}),v.jsx("input",{type:"date",value:P.endDate,onChange:te=>x(I=>({...I,endDate:te.target.value}))}),v.jsx("button",{type:"button",onClick:()=>Q(K.id),children:""}),v.jsx("button",{type:"button",onClick:G,children:""})]}):v.jsxs(v.Fragment,{children:[K.name,"",K.startDate.toDate().toLocaleDateString(),"",K.endDate.toDate().toLocaleDateString(),"",v.jsx("button",{type:"button",onClick:()=>L(K),children:""}),v.jsx("button",{type:"button",onClick:()=>q(K.id),children:""})]})},K.id))})]})},VN=({eventId:r,categories:e,setCategories:n})=>{const[s,o]=C.useState(""),[u,f]=C.useState(""),[m,p]=C.useState(""),g=C.useCallback(async()=>{try{const O=(await We(Fe(Se,"events",r,"categories"))).docs.map(q=>({id:q.id,...q.data()}));n(O)}catch(U){console.error(":",U)}},[r,n]);C.useEffect(()=>{g()},[g]);const E=async U=>{if(U.preventDefault(),!!s)try{await of(Fe(Se,"events",r,"categories"),{name:s}),o(""),g()}catch(O){console.error(":",O)}},b=async U=>{if(window.confirm(""))try{await ia(gt(Se,"events",r,"categories",U)),n(q=>q.filter(L=>L.id!==U))}catch(q){console.error(":",q)}},S=U=>{f(U.id),p(U.name||"")},P=()=>{f(""),p("")},x=async U=>{const O=m.trim();if(!O){alert("");return}try{await sg(gt(Se,"events",r,"categories",U),{name:O}),n(q=>q.map(L=>L.id===U?{...L,name:O}:L)),P()}catch(q){console.error(":",q),alert("")}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:E,children:[v.jsx("input",{type:"text",placeholder:"",value:s,onChange:U=>o(U.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("ul",{children:e.map(U=>v.jsx("li",{children:u===U.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:m,onChange:O=>p(O.target.value)}),v.jsx("button",{type:"button",onClick:()=>x(U.id),children:""}),v.jsx("button",{type:"button",onClick:P,children:""})]}):v.jsxs(v.Fragment,{children:[U.name,v.jsx("button",{type:"button",onClick:()=>S(U),children:""}),v.jsx("button",{type:"button",onClick:()=>b(U.id),children:""})]})},U.id))})]})},eh={name:"",memberNo:"",age:"",gender:"",categoryId:""},PN=r=>r==="male"?"":r==="female"?"":r==="other"?"":"",kN=({eventId:r,categories:e})=>{const[n,s]=C.useState([]),[o,u]=C.useState(eh),[f,m]=C.useState(""),[p,g]=C.useState(eh),E=C.useCallback(async()=>{try{const q=(await We(Fe(Se,"events",r,"participants"))).docs.map(L=>({id:L.id,...L.data()}));s(q)}catch(O){console.error(":",O)}},[r]);C.useEffect(()=>{E()},[E]);const b=async O=>{O.preventDefault();try{await of(Fe(Se,"events",r,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:Zn()}),u(eh),E()}catch(q){console.error(":",q)}},S=O=>{m(O.id),g({name:O.name||"",memberNo:O.memberNo||"",age:O.age?String(O.age):"",gender:O.gender||"",categoryId:O.categoryId||""})},P=()=>{m(""),g(eh)},x=async O=>{if(!p.name.trim()||!p.memberNo.trim()||!p.age||!p.gender||!p.categoryId){alert("");return}try{const q={name:p.name.trim(),memberNo:p.memberNo.trim(),age:Number(p.age),gender:p.gender,categoryId:p.categoryId,updatedAt:Zn()};await sg(gt(Se,"events",r,"participants",O),q),s(L=>L.map(G=>G.id===O?{...G,...q,updatedAt:new Date}:G)),P()}catch(q){console.error(":",q),alert("")}},U=async O=>{if(window.confirm(""))try{await ia(gt(Se,"events",r,"participants",O)),s(L=>L.filter(G=>G.id!==O))}catch(L){console.error(":",L)}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:b,children:[v.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:O=>u(q=>({...q,name:O.target.value})),required:!0}),v.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:O=>u(q=>({...q,memberNo:O.target.value})),required:!0}),v.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:O=>u(q=>({...q,age:O.target.value})),required:!0}),v.jsxs("select",{value:o.gender,onChange:O=>u(q=>({...q,gender:O.target.value})),required:!0,children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"male",children:""}),v.jsx("option",{value:"female",children:""}),v.jsx("option",{value:"other",children:""})]}),v.jsxs("select",{value:o.categoryId,onChange:O=>u(q=>({...q,categoryId:O.target.value})),required:!0,children:[v.jsx("option",{value:"",children:"--  --"}),e.map(O=>v.jsx("option",{value:O.id,children:O.name},O.id))]}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("ul",{children:n.map(O=>{var G;const q=((G=e.find(Q=>Q.id===O.categoryId))==null?void 0:G.name)||"",L=f===O.id;return v.jsx("li",{children:L?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:p.name,onChange:Q=>g(K=>({...K,name:Q.target.value}))}),v.jsx("input",{type:"text",value:p.memberNo,onChange:Q=>g(K=>({...K,memberNo:Q.target.value}))}),v.jsx("input",{type:"number",min:"1",max:"120",value:p.age,onChange:Q=>g(K=>({...K,age:Q.target.value}))}),v.jsxs("select",{value:p.gender,onChange:Q=>g(K=>({...K,gender:Q.target.value})),children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"male",children:""}),v.jsx("option",{value:"female",children:""}),v.jsx("option",{value:"other",children:""})]}),v.jsxs("select",{value:p.categoryId,onChange:Q=>g(K=>({...K,categoryId:Q.target.value})),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(Q=>v.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),v.jsx("button",{type:"button",onClick:()=>x(O.id),children:""}),v.jsx("button",{type:"button",onClick:P,children:""})]}):v.jsxs(v.Fragment,{children:[O.name," / ",": ",O.memberNo||"-"," / ",": ",O.age||"-"," / ",": ",PN(O.gender)," / ",": ",q,v.jsx("button",{type:"button",onClick:()=>S(O),children:""}),v.jsx("button",{type:"button",onClick:()=>U(O.id),children:""})]})},O.id)})})]})},jN=()=>{const{eventId:r}=hu(),[e,n]=C.useState([]),[s,o]=C.useState(""),[u,f]=C.useState([]),[m,p]=C.useState(""),[g,E]=C.useState([]),[b,S]=C.useState("");C.useEffect(()=>{(async()=>{const Q=await We(Fe(Se,"events",r,"seasons"));n(Q.docs.map(K=>({id:K.id,...K.data()})))})()},[r]),C.useEffect(()=>{if(!s)return;(async()=>{const Q=await We(Fe(Se,"events",r,"categories"));f(Q.docs.map(K=>({id:K.id,...K.data()})))})(),p(""),E([])},[s]),C.useEffect(()=>{if(!s||!m)return;(async()=>{const K=(await We(Fe(Se,"events",r,"seasons",s,"categories",m,"routes"))).docs.map(te=>({id:te.id,...te.data(),isEditing:!1}));K.sort((te,I)=>te.name.localeCompare(I.name,"ja")),E(K)})()},[m]);const P=()=>{const G=`No.${String(g.length+1).padStart(2,"0")}`;E([...g,{name:G,grade:"",isBonus:!1,isEditing:!0}])},x=(G,Q,K)=>{E(te=>{const I=[...te];return I[G][Q]=Q==="isBonus"?K.target.checked:K,I})},U=G=>{E(Q=>Q.map((K,te)=>({...K,isEditing:te===G?!K.isEditing:!1})))},O=async G=>{const Q=g[G];if(!Q.grade){alert("");return}const K=gt(Se,"events",r,"seasons",s,"categories",m,"routes",Q.name);await os(K,{name:Q.name,grade:Q.grade,isBonus:Q.isBonus}),E(te=>{const I=[...te];return I[G].isEditing=!1,I}),S(` ${Q.name} `),setTimeout(()=>S(""),2e3)},q=async G=>{const Q=g[G],K=`No.${String(g.length+1).padStart(2,"0")}`,te=gt(Se,"events",r,"seasons",s,"categories",m,"routes",K);await os(te,{name:K,grade:Q.grade,isBonus:Q.isBonus});const I={...Q,name:K,isEditing:!1},R=[...g];R.splice(G+1,0,I),E(R),S(" "),setTimeout(()=>S(""),2e3)},L=async G=>{const Q=g[G].name,K=gt(Se,"events",r,"seasons",s,"categories",m,"routes",Q);await ia(K);const te=[...g];te.splice(G,1),E(te),S(" "),setTimeout(()=>S(""),2e3)};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),b&&v.jsx("p",{children:b}),v.jsxs("label",{children:["",v.jsxs("select",{value:s,onChange:G=>o(G.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(G=>v.jsx("option",{value:G.id,children:G.name},G.id))]})]}),s&&v.jsxs(v.Fragment,{children:[v.jsxs("label",{children:["",v.jsxs("select",{value:m,onChange:G=>p(G.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),u.map(G=>v.jsx("option",{value:G.id,children:G.name},G.id))]})]}),m&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{marginTop:"1em"},children:v.jsx("button",{onClick:P,children:" "})}),v.jsxs("table",{style:{marginTop:"1em",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:""}),v.jsx("th",{children:""}),v.jsx("th",{children:""}),v.jsx("th",{children:""})]})}),v.jsx("tbody",{children:g.map((G,Q)=>v.jsxs("tr",{children:[v.jsx("td",{children:G.name}),v.jsx("td",{children:G.isEditing?v.jsxs("select",{value:G.grade,onChange:K=>x(Q,"grade",K.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"9",children:"9"}),v.jsx("option",{value:"8",children:"8"}),v.jsx("option",{value:"7",children:"7"}),v.jsx("option",{value:"6",children:"6"}),v.jsx("option",{value:"5",children:"5"}),v.jsx("option",{value:"4",children:"4"}),v.jsx("option",{value:"3",children:"3"}),v.jsx("option",{value:"2",children:"2"}),v.jsx("option",{value:"1",children:"1"}),v.jsx("option",{value:"",children:""}),v.jsx("option",{value:"2",children:"2"})]}):G.grade}),v.jsx("td",{children:G.isEditing?v.jsx("input",{type:"checkbox",checked:G.isBonus,onChange:K=>x(Q,"isBonus",K)}):G.isBonus?"":"-"}),v.jsx("td",{children:G.isEditing?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>O(Q),children:""}),v.jsx("button",{onClick:()=>U(Q),children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>U(Q),children:""}),v.jsx("button",{onClick:()=>q(Q),children:""}),v.jsx("button",{onClick:()=>L(Q),children:""})]})})]},Q))})]})]})]})]})},LN=({eventId:r})=>{var S,P;const[e,n]=C.useState([]),[s,o]=C.useState([]),[u,f]=C.useState([]),m=kn(),[p,g]=C.useState(((S=m.state)==null?void 0:S.seasonId)||""),[E,b]=C.useState(((P=m.state)==null?void 0:P.categoryId)||"");return C.useEffect(()=>{const x=async()=>{try{const q=(await We(Fe(Se,"events",r,"seasons"))).docs.map(L=>({id:L.id,...L.data()}));n(q)}catch(O){console.error(":",O)}},U=async()=>{try{const q=(await We(Fe(Se,"events",r,"categories"))).docs.map(L=>({id:L.id,...L.data()}));o(q)}catch(O){console.error(":",O)}};x(),U()},[r]),C.useEffect(()=>{(async()=>{if(E)try{const q=(await We(Fe(Se,"events",r,"participants"))).docs.map(L=>({id:L.id,...L.data()})).filter(L=>L.categoryId===E);f(q)}catch(U){console.error(":",U)}})()},[r,E]),C.useEffect(()=>{var x,U;(x=m.state)!=null&&x.seasonId&&g(m.state.seasonId),(U=m.state)!=null&&U.categoryId&&b(m.state.categoryId)},[m.state]),v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("h2",{children:" "}),v.jsx("div",{style:{marginBottom:"1em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:p,onChange:x=>g(x.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(x=>v.jsx("option",{value:x.id,children:x.name},x.id))]})]})}),v.jsx("div",{style:{marginBottom:"1em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:E,onChange:x=>b(x.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),s.map(x=>v.jsx("option",{value:x.id,children:x.name},x.id))]})]})}),p&&E&&v.jsx("ul",{children:u.map(x=>v.jsxs("li",{children:[x.name,v.jsx(Be,{to:`/events/${r}/scoreinput/${p}/${E}/${x.id}`,style:{marginLeft:"1em"},children:" "})]},x.id))})]})},ip=[{id:"seasons",label:" ",hint:""},{id:"categories",label:" ",hint:""},{id:"routes",label:" ",hint:""},{id:"participants",label:" ",hint:""},{id:"scores",label:" ",hint:""}],f0=r=>r&&ip.some(e=>e.id===r)?r:"seasons",UN=()=>{var k;const{eventId:r}=hu(),[e,n]=C.useState(""),s=kn(),[o,u]=kh(),[f,m]=C.useState(f0(o.get("tab")||((k=s.state)==null?void 0:k.tab)||"seasons")),[p,g]=C.useState([]),[E,b]=C.useState(0),[S,P]=C.useState(0),[x,U]=C.useState(!0),[O,q]=C.useState(""),[L,G]=C.useState(!1),{gymIds:Q,hasAllGymAccess:K,loading:te,error:I}=bu();if(ji(e?`: ${e}`:""),C.useEffect(()=>{if(te)return;if(I){q(I),U(!1);return}(async()=>{U(!0),q(""),G(!1);try{const z=gt(Se,"events",r),M=await as(z);if(!M.exists()){q("");return}const et=M.data();if(n(et.name||""),!K&&!Q.includes(et.gymId)){G(!0);return}const[Ge,ne,ie]=await Promise.all([We(Fe(Se,"events",r,"categories")),We(Fe(Se,"events",r,"seasons")),We(Fe(Se,"events",r,"participants"))]),H=Ge.docs.map(fe=>({id:fe.id,...fe.data()}));g(H),b(ne.size),P(ie.size)}catch(z){console.error(":",z),q("")}finally{U(!1)}})()},[r,Q,K,te,I]),C.useEffect(()=>{const j=f0(o.get("tab"));j!==f&&m(j)},[o]),C.useEffect(()=>{const j=new URLSearchParams(o);j.get("tab")!==f&&(j.set("tab",f),u(j,{replace:!0}))},[f,o,u]),x||te)return v.jsx("p",{style:{padding:"2em"},children:"..."});if(O||I)return v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:O||I}),v.jsx(Be,{to:"/dashboard",children:" "})]});if(L)return v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:""}),v.jsx(Be,{to:"/dashboard",children:" "})]});const R=ip.find(j=>j.id===f),D=[{label:"",value:E},{label:"",value:p.length},{label:"",value:S}];return v.jsxs("div",{style:{padding:"1.2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsxs("h2",{children:[" ",e]}),v.jsx("div",{children:v.jsx(Be,{to:"/dashboard",children:" "})}),v.jsxs("section",{style:{marginTop:"1em",border:"1px solid #ddd",borderRadius:"10px",padding:"0.8em"},children:[v.jsx("p",{style:{marginTop:0,marginBottom:"0.6em"},children:""}),v.jsx("div",{style:{display:"flex",gap:"0.6em",flexWrap:"wrap"},children:D.map(j=>v.jsxs("span",{style:{border:"1px solid #ccc",borderRadius:"999px",padding:"0.2em 0.7em"},children:[j.label,": ",j.value]},j.label))})]}),v.jsx("div",{style:{marginTop:"1em",display:"flex",gap:"0.5em",flexWrap:"wrap"},children:ip.map(j=>v.jsx("button",{type:"button",onClick:()=>m(j.id),style:{border:"1px solid #bbb",borderRadius:"8px",padding:"0.45em 0.7em",background:f===j.id?"#f0f0f0":"#fff",fontWeight:f===j.id?"bold":"normal"},children:j.label},j.id))}),v.jsx("p",{style:{marginTop:"0.7em",marginBottom:"0.4em",color:"#444"},children:R==null?void 0:R.hint}),f==="seasons"&&v.jsx(MN,{eventId:r}),f==="categories"&&v.jsx(VN,{eventId:r,categories:p,setCategories:g}),f==="routes"&&(p.length===0?v.jsx("p",{children:""}):v.jsx(jN,{eventId:r,categories:p})),f==="participants"&&v.jsx(kN,{eventId:r,categories:p}),f==="scores"&&(p.length===0?v.jsx("p",{children:""}):v.jsx(LN,{eventId:r}))]})},BN=()=>{const{eventId:r,seasonId:e,categoryId:n,participantId:s}=hu(),[o,u]=C.useState([]),[f,m]=C.useState(""),[p,g]=C.useState({}),[E,b]=C.useState("simple"),[S,P]=C.useState(!0),[x,U]=C.useState(""),[O,q]=C.useState(""),[L,G]=C.useState(null),[Q,K]=C.useState(!0),[te,I]=C.useState(""),[R,D]=C.useState(!1),{gymIds:k,hasAllGymAccess:j,loading:z,error:M}=bu();ji(f?`: ${f}`:""),C.useEffect(()=>{if(z)return;if(M){I(M),K(!1);return}(async()=>{K(!0),I(""),D(!1);try{const ue=await as(gt(Se,"events",r));if(!ue.exists()){I("");return}if(!j&&!k.includes(ue.data().gymId)){D(!0);return}const se=await as(gt(Se,"events",r,"participants",s));se.exists()&&m(se.data().name||"");const ge=(await We(Fe(Se,"events",r,"seasons",e,"categories",n,"routes"))).docs.map(he=>he.data()).sort((he,pe)=>he.name.localeCompare(pe.name,"ja"));u(ge);const de=await as(gt(Se,"events",r,"seasons",e,"categories",n,"participants",s));if(de.exists()){const he=de.data();he.scores&&g(he.scores),he.updatedAt&&G(he.updatedAt.toDate())}}catch(ue){console.error(":",ue),I("")}finally{K(!1)}})()},[r,e,n,s,k,j,z,M]);const et=W=>{g(ue=>({...ue,[W]:!ue[W]}))},Ge=x.trim().toLowerCase(),ne=o.filter(W=>!!p[W.name]).length,ie=o.length-ne,H=o.filter(W=>Ge.length===0||W.name.toLowerCase().includes(Ge)?S?!p[W.name]:!0:!1),fe=W=>{g(ue=>{const se={...ue};for(const ye of H)se[ye.name]=W;return se})},N=async()=>{if(!R)try{await os(gt(Se,"events",r,"seasons",e,"categories",n,"participants",s),{scores:p,updatedAt:Zn()},{merge:!0}),q(" "),setTimeout(()=>q(""),2e3)}catch(W){console.error(":",W),q(" ")}};return Q||z?v.jsx("p",{style:{padding:"2em"},children:"..."}):te||M?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:te||M}),v.jsx(Be,{to:`/events/${r}/edit`,state:{tab:"scores",seasonId:e,categoryId:n},children:" "})]}):R?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:""}),v.jsx(Be,{to:"/dashboard",children:" "})]}):v.jsxs("div",{style:{padding:"1.2em",maxWidth:"920px",margin:"0 auto"},children:[v.jsx("h2",{children:" "}),v.jsx("p",{children:v.jsx(Be,{to:`/events/${r}/edit`,state:{tab:"scores",seasonId:e,categoryId:n},children:" "})}),v.jsxs("p",{style:{marginBottom:"0.3em"},children:[": ",f]}),v.jsxs("p",{style:{marginTop:0,marginBottom:"0.6em"},children:[" ",ne," / ",o.length," ",ie,""]}),L&&v.jsxs("p",{style:{fontStyle:"italic",fontSize:"0.9em",marginTop:0},children:[": ",L.toLocaleString()]}),v.jsxs("section",{style:{marginTop:"0.8em",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.6em",alignItems:"center"},children:[v.jsx("button",{type:"button",onClick:()=>b("simple"),style:{border:"1px solid #bbb",background:E==="simple"?"#f0f0f0":"#fff",borderRadius:"999px",padding:"0.35em 0.8em",fontWeight:E==="simple"?"bold":"normal"},children:""}),v.jsx("button",{type:"button",onClick:()=>b("detail"),style:{border:"1px solid #bbb",background:E==="detail"?"#f0f0f0":"#fff",borderRadius:"999px",padding:"0.35em 0.8em",fontWeight:E==="detail"?"bold":"normal"},children:""}),v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:S,onChange:W=>P(W.target.checked),style:{marginRight:"0.3em"}}),""]}),v.jsxs("label",{children:[":",v.jsx("input",{type:"text",value:x,onChange:W=>U(W.target.value),placeholder:"No.01",style:{marginLeft:"0.4em"}})]})]}),v.jsxs("div",{style:{marginTop:"0.7em",display:"flex",gap:"0.6em",flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>fe(!0),children:""}),v.jsx("button",{type:"button",onClick:()=>fe(!1),children:""})]})]}),v.jsx("div",{style:{marginTop:"0.9em"},children:H.length===0?v.jsx("p",{children:""}):E==="simple"?v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"0.6em"},children:H.map(W=>{const ue=!!p[W.name];return v.jsxs("button",{type:"button",onClick:()=>et(W.name),style:{textAlign:"left",border:`1px solid ${ue?"#7bbf8e":"#ccc"}`,background:ue?"#eaf8ee":"#fff",borderRadius:"10px",padding:"0.7em",minHeight:"88px"},children:[v.jsx("div",{style:{fontWeight:"bold"},children:W.name}),v.jsxs("div",{style:{fontSize:"0.9em",marginTop:"0.25em"},children:[": ",W.grade||"-"," / : ",W.points??"-"]}),v.jsx("div",{style:{marginTop:"0.35em",fontWeight:"bold"},children:ue?"":""})]},W.name)})}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"520px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"center",borderBottom:"1px solid #ddd"},children:""})]})}),v.jsx("tbody",{children:H.map(W=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.4em 0"},children:W.name}),v.jsx("td",{children:W.grade||"-"}),v.jsx("td",{style:{textAlign:"right"},children:W.points??"-"}),v.jsx("td",{style:{textAlign:"center"},children:v.jsx("input",{type:"checkbox",checked:!!p[W.name],onChange:()=>et(W.name)})})]},W.name))})]})})}),v.jsxs("div",{style:{marginTop:"1em"},children:[v.jsx("button",{type:"button",onClick:N,children:" "}),v.jsx("span",{style:{marginLeft:"1em"},children:O})]})]})},d0=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleDateString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleDateString():String(r):"-",io=r=>r?typeof r.toDate=="function"?r.toDate().getTime():typeof r.seconds=="number"?r.seconds*1e3:0:0,Mh=(r,e)=>{const n=io(r.startDate),s=io(r.endDate);return n&&s&&n<=e&&e<=s?"ongoing":n&&e<n?"upcoming":"ended"},zN={ongoing:"",upcoming:"",ended:""},m0={ongoing:0,upcoming:1,ended:2},qN=(r,e,n)=>{const s=Mh(r,n),o=Mh(e,n),u=m0[s]??99,f=m0[o]??99;if(u!==f)return u-f;const m=io(r.startDate),p=io(e.startDate),g=io(r.endDate),E=io(e.endDate);return s==="ongoing"?g!==E?g-E:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja"):s==="upcoming"?m!==p?m-p:g!==E?g-E:(r.name||"").localeCompare(e.name||"","ja"):g!==E?E-g:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja")},HN=()=>{ji("");const[r,e]=kh(),n=r.get("q")||"",s=r.get("status")||"all",o=r.get("gym")||"all",[u,f]=C.useState([]),[m,p]=C.useState([]),[g,E]=C.useState(n),[b,S]=C.useState(s),[P,x]=C.useState(o),[U,O]=C.useState(!0),[q,L]=C.useState("");C.useEffect(()=>{(async()=>{try{L("");const[I,R]=await Promise.all([We(Fe(Se,"events")),We(Fe(Se,"gyms"))]),D=I.docs.map(j=>({id:j.id,...j.data()})),k=R.docs.map(j=>({id:j.id,...j.data()})).sort((j,z)=>(j.name||"").localeCompare(z.name||"","ja"));f(D),p(k)}catch(I){console.error(":",I),L("")}finally{O(!1)}})()},[]),C.useEffect(()=>{const te=new URLSearchParams,I=g.trim();I&&te.set("q",I),b!=="all"&&te.set("status",b),P!=="all"&&te.set("gym",P),te.toString()!==r.toString()&&e(te,{replace:!0})},[g,b,P,r,e]),C.useEffect(()=>{if(P==="all"||m.length===0)return;m.some(I=>I.id===P)||x("all")},[P,m]);const G=C.useMemo(()=>{const te=Date.now(),I=g.trim().toLowerCase();return[...u].sort((R,D)=>qN(R,D,te)).filter(R=>{const D=(R.name||"").toLowerCase(),k=Mh(R,te),j=I?D.includes(I):!0,z=b==="all"?!0:k===b,M=P==="all"?!0:R.gymId===P;return j&&z&&M})},[u,g,b,P]),Q=C.useMemo(()=>new Map(m.map(te=>[te.id,te.name||te.id])),[m]),K=()=>{E(""),S("all"),x("all")};return U?v.jsx("p",{children:"..."}):q?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:q}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Be,{to:"/",children:" Home"})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsx("h2",{children:" "}),v.jsx("p",{style:{marginBottom:"0.4em"},children:""}),v.jsxs("ol",{style:{marginTop:0,paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:""})]}),v.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"0.8em",marginBottom:"1em",display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("label",{children:[":",v.jsx("input",{type:"text",value:g,onChange:te=>E(te.target.value),placeholder:": Spring",style:{marginLeft:"0.5em"}})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:b,onChange:te=>S(te.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),v.jsx("option",{value:"ongoing",children:""}),v.jsx("option",{value:"upcoming",children:""}),v.jsx("option",{value:"ended",children:""})]})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:P,onChange:te=>x(te.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),m.map(te=>v.jsx("option",{value:te.id,children:te.name},te.id))]})]}),v.jsx("button",{type:"button",onClick:K,children:""}),v.jsxs("span",{style:{marginLeft:"auto"},children:[" ",G.length," / ",u.length," "]})]}),u.length===0?v.jsx("p",{children:""}):G.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"1em"},children:G.map(te=>{const I=Mh(te,Date.now());return v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[te.name,v.jsx("span",{style:{marginLeft:"0.6em",fontSize:"0.8em",border:"1px solid #ccc",borderRadius:"999px",padding:"0.1em 0.5em"},children:zN[I]})]}),v.jsxs("p",{style:{marginTop:0},children:[": ",d0(te.startDate),"  ",d0(te.endDate)]}),v.jsxs("p",{style:{marginTop:0},children:[": ",Q.get(te.gymId)||""]}),v.jsx(Be,{to:`/score-summary/${te.id}`,children:""})]},te.id)})}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Be,{to:"/",children:" Home"})})]})},FN=r=>r?typeof r.toMillis=="function"?r.toMillis():typeof r.seconds=="number"?r.seconds*1e3:0:0,p0=(r,e)=>{const n={};for(const s of r){const o=new Map;for(const u of e.filter(f=>f.categoryId===s.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[s.id]=o}return n},g0=r=>{const e={};for(const[n,s]of Object.entries(r)){const o=Array.from(s.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,f=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==f)&&(m=g+1),u=p.totalPoints,f=p.clearCount,{...p,rank:m}))}return e},GN=()=>{const{eventId:r}=hu(),[e,n]=kh(),s=e.get("season")||"all",o=e.get("category")||"all",u=e.get("q")||"",f=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[p,g]=C.useState(null),[E,b]=C.useState([]),[S,P]=C.useState([]),[x,U]=C.useState([]),[O,q]=C.useState(s),[L,G]=C.useState(o),[Q,K]=C.useState(f),[te,I]=C.useState(m),[R,D]=C.useState(u),[k,j]=C.useState({}),[z,M]=C.useState(!0),[et,Ge]=C.useState(!1),[ne,ie]=C.useState("");ji(p!=null&&p.name?`: ${p.name}`:""),C.useEffect(()=>{let he=!1;return(async()=>{M(!0),ie("");try{const Ne=await as(gt(Se,"events",r));if(!Ne.exists()){he||ie("");return}const[Te,mt,jt]=await Promise.all([We(Fe(Se,"events",r,"seasons")),We(Fe(Se,"events",r,"categories")),We(Fe(Se,"events",r,"participants"))]);if(he)return;g({id:Ne.id,...Ne.data()}),b(Te.docs.map(ut=>({id:ut.id,...ut.data()})).sort((ut,ht)=>ut.name.localeCompare(ht.name,"ja"))),P(mt.docs.map(ut=>({id:ut.id,...ut.data()})).sort((ut,ht)=>ut.name.localeCompare(ht.name,"ja"))),U(jt.docs.map(ut=>({id:ut.id,...ut.data()})))}catch(Ne){console.error(":",Ne),he||ie("")}finally{he||M(!1)}})(),()=>{he=!0}},[r]),C.useEffect(()=>{let he=!1;return(async()=>{if(z||!p||S.length===0)return;ie("");const Ne=O==="all"?E.map(Te=>Te.id):[O].filter(Boolean);if(Ne.length===0){j(g0(p0(S,x)));return}Ge(!0);try{const Te=p0(S,x),mt=new Map(x.map(ht=>[ht.id,ht])),jt=Ne.flatMap(ht=>S.map(async Rn=>{const[an,Tt]=await Promise.all([We(Fe(Se,"events",r,"seasons",ht,"categories",Rn.id,"routes")),We(Fe(Se,"events",r,"seasons",ht,"categories",Rn.id,"participants"))]);return{categoryId:Rn.id,routeSnap:an,scoreSnap:Tt}})),ut=await Promise.all(jt);for(const{categoryId:ht,routeSnap:Rn,scoreSnap:an}of ut){const Tt={};for(const jn of Rn.docs){const En=jn.data();Tt[En.name]=Number(En.points)||1}for(const jn of an.docs){const En=jn.data(),Ln=En.scores||{},on=jn.id;if(!Te[ht].has(on)){const ze=mt.get(on);Te[ht].set(on,{participantId:on,name:(ze==null?void 0:ze.name)||En.participantName||`ID:${on}`,memberNo:(ze==null?void 0:ze.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Oe=Te[ht].get(on);for(const[ze,Li]of Object.entries(Ln))Li&&(Oe.totalPoints+=Tt[ze]??1,Oe.clearCount+=1);Oe.latestUpdatedAt=Math.max(Oe.latestUpdatedAt,FN(En.updatedAt))}}he||j(g0(Te))}catch(Te){console.error(":",Te),he||ie("")}finally{he||Ge(!1)}})(),()=>{he=!0}},[z,p,S,x,E,O,r]);const H=C.useMemo(()=>L==="all"?S:S.filter(he=>he.id===L),[S,L]),fe=C.useMemo(()=>[...L==="all"?x:x.filter(pe=>pe.categoryId===L)].sort((pe,Ne)=>(pe.name||"").localeCompare(Ne.name||"","ja")),[x,L]);C.useEffect(()=>{if(!Q||fe.length===0)return;fe.some(pe=>pe.id===Q)||K("")},[fe,Q]),C.useEffect(()=>{te&&!Q&&I(!1)},[te,Q]),C.useEffect(()=>{E.length!==0&&O!=="all"&&!E.some(he=>he.id===O)&&q("all")},[E,O]),C.useEffect(()=>{S.length!==0&&L!=="all"&&!S.some(he=>he.id===L)&&G("all")},[S,L]),C.useEffect(()=>{const he=new URLSearchParams;O!=="all"&&he.set("season",O),L!=="all"&&he.set("category",L);const pe=R.trim();pe&&he.set("q",pe),Q&&he.set("pid",Q),te&&Q&&he.set("self","1"),he.toString()!==e.toString()&&n(he,{replace:!0})},[O,L,R,Q,te,e,n]);const N=R.trim().toLowerCase(),W=N.length>0,ue=x.find(he=>he.id===Q)||null,se=C.useMemo(()=>{if(!Q)return[];const he=[];for(const pe of H){const Ne=(k[pe.id]||[]).find(Te=>Te.participantId===Q);Ne&&he.push({...Ne,categoryName:pe.name})}return he},[Q,H,k]),ye=he=>{const pe=new URLSearchParams;O!=="all"&&pe.set("season",O),L!=="all"&&pe.set("category",L),R.trim()&&pe.set("q",R.trim()),Q&&pe.set("pid",Q),te&&Q&&pe.set("self","1");const Ne=pe.toString();return`/score-summary/${r}/participants/${he}${Ne?`?${Ne}`:""}`},ge=()=>{G("all"),K(""),I(!1),D("")},de=H.reduce((he,pe)=>{const Ne=k[pe.id]||[];return he+Ne.filter(Te=>{const mt=(Te.name||"").toLowerCase(),jt=(Te.memberNo||"").toLowerCase();return mt.includes(N)||jt.includes(N)}).length},0);return z?v.jsx("p",{children:"..."}):ne?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:ne}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Be,{to:"/score-summary",children:" "})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"1100px",margin:"0 auto"},children:[v.jsxs("h2",{children:[p==null?void 0:p.name," - "]}),v.jsx("div",{style:{margin:"1em 0",display:"flex",flexWrap:"wrap",gap:"0.8em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:O,onChange:he=>q(he.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),E.map(he=>v.jsx("option",{value:he.id,children:he.name},he.id))]})]})}),v.jsxs("div",{style:{margin:"1em 0"},children:[v.jsxs("label",{children:["/:",v.jsx("input",{type:"text",value:R,onChange:he=>D(he.target.value),placeholder:":  / M-1001",style:{marginLeft:"0.5em"}})]}),W&&v.jsxs("span",{style:{marginLeft:"0.8em"},children:[" ",de," "]})]}),v.jsxs("div",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsx("p",{style:{marginTop:0,marginBottom:"0.5em"},children:""}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("label",{children:[":",v.jsxs("select",{value:L,onChange:he=>G(he.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[v.jsx("option",{value:"all",children:""}),S.map(he=>v.jsx("option",{value:he.id,children:he.name},he.id))]})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:Q,onChange:he=>K(he.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[v.jsx("option",{value:"",children:"--  --"}),fe.map(he=>v.jsxs("option",{value:he.id,children:[he.name," (",he.memberNo||"-",")"]},he.id))]})]}),v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:te,onChange:he=>I(he.target.checked),disabled:!Q,style:{marginLeft:"0.5em",marginRight:"0.3em"}}),""]}),v.jsx("button",{type:"button",onClick:ge,children:""}),Q&&v.jsx(Be,{to:ye(Q),children:""})]})]}),ue&&v.jsxs("section",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[": ",ue.name," (",ue.memberNo||"-",")"]}),se.length===0?v.jsx("p",{style:{marginBottom:0},children:""}):v.jsx("ul",{style:{marginBottom:0,paddingLeft:"1.2em"},children:se.map(he=>v.jsxs("li",{children:[he.categoryName,": ",he.rank," /  ",he.totalPoints," /  ",he.clearCount]},`${he.categoryName}-${he.participantId}`))})]}),et&&v.jsx("p",{children:"..."}),H.length===0?v.jsx("p",{children:""}):te&&!Q?v.jsx("p",{children:""}):H.map(he=>{const Ne=(k[he.id]||[]).filter(Te=>{if(te&&Q&&Te.participantId!==Q)return!1;if(!W)return!0;const mt=(Te.name||"").toLowerCase(),jt=(Te.memberNo||"").toLowerCase();return mt.includes(N)||jt.includes(N)});return v.jsxs("section",{style:{marginBottom:"2em"},children:[v.jsxs("h3",{children:[": ",he.name]}),Ne.length===0?v.jsx("p",{children:W?"":""}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"650px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""})]})}),v.jsx("tbody",{children:Ne.map(Te=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.4em 0"},children:Te.rank}),v.jsxs("td",{children:[Te.name,Q===Te.participantId&&v.jsx("strong",{style:{marginLeft:"0.4em"},children:"()"})]}),v.jsx("td",{children:Te.memberNo}),v.jsx("td",{style:{textAlign:"right"},children:Te.totalPoints}),v.jsx("td",{style:{textAlign:"right"},children:Te.clearCount}),v.jsx("td",{children:v.jsx(Be,{to:ye(Te.participantId),children:""})})]},Te.participantId))})]})})]},he.id)}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Be,{to:"/score-summary",children:" "})})]})},KN=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleString():"-":"-",y0=r=>{const e=[...r].sort((u,f)=>f.totalPoints!==u.totalPoints?f.totalPoints-u.totalPoints:f.clearCount!==u.clearCount?f.clearCount-u.clearCount:u.name.localeCompare(f.name,"ja"));let n=null,s=null,o=0;return e.map((u,f)=>((u.totalPoints!==n||u.clearCount!==s)&&(o=f+1),n=u.totalPoints,s=u.clearCount,{...u,rank:o}))},QN=()=>{var ne;const{eventId:r,participantId:e}=hu(),[n]=kh(),s=n.get("category")||"",o=n.get("q")||"",[u,f]=C.useState(null),[m,p]=C.useState(null),[g,E]=C.useState([]),[b,S]=C.useState([]),[P,x]=C.useState([]),[U,O]=C.useState(n.get("season")||"all"),[q,L]=C.useState([]),[G,Q]=C.useState(null),[K,te]=C.useState({prev:null,next:null}),[I,R]=C.useState(!0),[D,k]=C.useState(!1),[j,z]=C.useState("");ji(m!=null&&m.name?`: ${m.name}`:"");const M=ie=>{const H=new URLSearchParams;U!=="all"&&H.set("season",U),s&&H.set("category",s),o&&H.set("q",o);const fe=H.toString();return`/score-summary/${r}/participants/${ie}${fe?`?${fe}`:""}`},et=C.useMemo(()=>{const ie=new URLSearchParams;U!=="all"&&ie.set("season",U),s&&ie.set("category",s),o&&ie.set("q",o);const H=ie.toString();return`/score-summary/${r}${H?`?${H}`:""}`},[r,U,s,o]);C.useEffect(()=>{let ie=!1;return(async()=>{R(!0),z("");try{const[fe,N,W,ue,se]=await Promise.all([as(gt(Se,"events",r)),as(gt(Se,"events",r,"participants",e)),We(Fe(Se,"events",r,"participants")),We(Fe(Se,"events",r,"seasons")),We(Fe(Se,"events",r,"categories"))]);if(!fe.exists()){ie||z("");return}if(!N.exists()){ie||z("");return}const ye=ue.docs.map(pe=>({id:pe.id,...pe.data()})).sort((pe,Ne)=>pe.name.localeCompare(Ne.name,"ja")),ge=se.docs.map(pe=>({id:pe.id,...pe.data()})).sort((pe,Ne)=>pe.name.localeCompare(Ne.name,"ja"));if(ie)return;const de=n.get("season"),he=de&&(de==="all"||ye.some(pe=>pe.id===de))?de:"all";f({id:fe.id,...fe.data()}),p({id:N.id,...N.data()}),E(W.docs.map(pe=>({id:pe.id,...pe.data()}))),S(ye),x(ge),O(he)}catch(fe){console.error(":",fe),ie||z("")}finally{ie||R(!1)}})(),()=>{ie=!0}},[r,e,n]),C.useEffect(()=>{let ie=!1;return(async()=>{if(!(I||!m||b.length===0||P.length===0)){k(!0);try{const fe=U==="all"?b:b.filter(de=>de.id===U),N=m.categoryId?[m.categoryId]:P.map(de=>de.id),W=new Map(P.map(de=>[de.id,de.name])),ue=new Map(g.map(de=>[de.id,de.name||""])),se=new Map(g.map(de=>[de.id,de.memberNo||"-"])),ye=[],ge={};for(const de of fe){const he=[],pe=N.map(async Te=>{const[mt,jt]=await Promise.all([We(Fe(Se,"events",r,"seasons",de.id,"categories",Te,"routes")),We(Fe(Se,"events",r,"seasons",de.id,"categories",Te,"participants"))]),ut=new Map(mt.docs.map(Oe=>{const ze=Oe.data();return[ze.name,ze]})),ht=new Map,Rn=g.filter(Oe=>Oe.categoryId===Te);for(const Oe of Rn)ht.set(Oe.id,{participantId:Oe.id,name:Oe.name||"",memberNo:Oe.memberNo||"-",totalPoints:0,clearCount:0});let an=null;for(const Oe of jt.docs){const ze=Oe.data(),Li=ze.scores||{},Un=Oe.id;Un===m.id&&(an=ze);const ft=ht.get(Un)||{participantId:Un,name:ue.get(Un)||`ID:${Un}`,memberNo:se.get(Un)||"-",totalPoints:0,clearCount:0};for(const[Ze,mn]of Object.entries(Li)){if(!mn)continue;const Dt=ut.get(Ze);ft.totalPoints+=Number(Dt==null?void 0:Dt.points)||1,ft.clearCount+=1}ht.set(Un,ft)}const Tt=y0(Array.from(ht.values())),jn=Tt.find(Oe=>Oe.participantId===m.id);ge[Te]||(ge[Te]=new Map(Tt.map(Oe=>[Oe.participantId,{participantId:Oe.participantId,name:Oe.name,memberNo:Oe.memberNo,totalPoints:0,clearCount:0}])));for(const Oe of Tt){const ze=ge[Te].get(Oe.participantId)||{participantId:Oe.participantId,name:Oe.name,memberNo:Oe.memberNo,totalPoints:0,clearCount:0};ze.totalPoints+=Oe.totalPoints,ze.clearCount+=Oe.clearCount,ge[Te].set(Oe.participantId,ze)}const En=(an==null?void 0:an.scores)||{},Ln=Object.entries(En).filter(([,Oe])=>!!Oe).map(([Oe])=>{const ze=ut.get(Oe);return{routeName:Oe,points:Number(ze==null?void 0:ze.points)||1,grade:(ze==null?void 0:ze.grade)||"-"}}).sort((Oe,ze)=>Oe.routeName.localeCompare(ze.routeName,"ja")),on=Ln.reduce((Oe,ze)=>Oe+ze.points,0);return{categoryId:Te,categoryName:W.get(Te)||Te,clearCount:Ln.length,totalPoints:on,rank:(jn==null?void 0:jn.rank)||Tt.length,totalParticipants:Tt.length,updatedAtText:KN(an==null?void 0:an.updatedAt),clearedRoutes:Ln}}),Ne=(await Promise.all(pe)).filter(Boolean);for(const Te of Ne)he.push(Te);ye.push({seasonId:de.id,seasonName:de.name,categorySummaries:he,totalPoints:he.reduce((Te,mt)=>Te+mt.totalPoints,0),totalClears:he.reduce((Te,mt)=>Te+mt.clearCount,0)})}if(!ie){const de=m.categoryId||N[0],he=de?Array.from((ge[de]||new Map).values()):[],pe=y0(he),Ne=pe.find(Te=>Te.participantId===m.id);if(Q(Ne?{categoryName:W.get(de)||"",rank:Ne.rank,totalParticipants:pe.length,totalPoints:Ne.totalPoints,totalClears:Ne.clearCount}:null),Ne){const Te=pe.findIndex(ut=>ut.participantId===m.id),mt=Te>0?pe[Te-1]:null,jt=Te>=0&&Te<pe.length-1?pe[Te+1]:null;te({prev:mt,next:jt})}else te({prev:null,next:null});L(ye)}}catch(fe){console.error(":",fe),ie||z("")}finally{ie||k(!1)}}})(),()=>{ie=!0}},[I,m,g,b,P,U,r]);const Ge=C.useMemo(()=>({totalPoints:q.reduce((ie,H)=>ie+H.totalPoints,0),totalClears:q.reduce((ie,H)=>ie+H.totalClears,0)}),[q]);return I?v.jsx("p",{children:"..."}):j?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:j}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Be,{to:et,children:" "})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsxs("h2",{children:[u==null?void 0:u.name," - "]}),v.jsxs("p",{style:{marginBottom:"0.4em"},children:[": ",v.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),v.jsxs("p",{style:{marginTop:0},children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",((ne=P.find(ie=>ie.id===(m==null?void 0:m.categoryId)))==null?void 0:ne.name)||""]}),v.jsx("div",{style:{margin:"1em 0"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:U,onChange:ie=>O(ie.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),b.map(ie=>v.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]})}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("p",{style:{margin:0},children:[": ",v.jsx("strong",{children:Ge.totalPoints})]}),v.jsxs("p",{style:{margin:0},children:[": ",v.jsx("strong",{children:Ge.totalClears})]})]}),G&&v.jsxs("p",{style:{marginBottom:0,marginTop:"0.6em"},children:["",G.categoryName,":"," ",v.jsx("strong",{children:G.rank})," / ",G.totalParticipants," "," ",G.totalPoints," /  ",G.totalClears,""]})]}),(K.prev||K.next)&&v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginTop:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[K.prev?v.jsxs(Be,{to:M(K.prev.participantId),children:[" ",K.prev.rank," ",K.prev.name]}):v.jsx("span",{children:""}),K.next?v.jsxs(Be,{to:M(K.next.participantId),children:[" ",K.next.rank," ",K.next.name]}):v.jsx("span",{children:""})]})]}),D&&v.jsx("p",{style:{marginTop:"1em"},children:"..."}),v.jsx("div",{style:{marginTop:"1.2em"},children:q.length===0?v.jsx("p",{children:""}):q.map(ie=>v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginBottom:"1em"},children:[v.jsxs("h3",{style:{marginTop:0},children:[ie.seasonName," /  ",ie.totalPoints," /  ",ie.totalClears]}),ie.categorySummaries.length===0?v.jsx("p",{children:""}):ie.categorySummaries.map(H=>v.jsxs("div",{style:{marginTop:"1em"},children:[v.jsxs("h4",{style:{marginBottom:"0.4em"},children:[": ",H.categoryName," /  ",H.rank,"/",H.totalParticipants," / "," ",H.totalPoints," /  ",H.clearCount]}),v.jsxs("p",{style:{marginTop:0,fontSize:"0.9em"},children:[": ",H.updatedAtText]}),H.clearedRoutes.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"360px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""})]})}),v.jsx("tbody",{children:H.clearedRoutes.map(fe=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.35em 0"},children:fe.routeName}),v.jsx("td",{children:fe.grade}),v.jsx("td",{style:{textAlign:"right"},children:fe.points})]},fe.routeName))})]})})]},`${ie.seasonId}-${H.categoryId}`))]},ie.seasonId))}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Be,{to:et,children:" "})})]})},Im=r=>Array.isArray(r)?r.filter(e=>typeof e=="string"&&e.trim().length>0):[],v0={id:"",name:"",city:"",prefecture:""},_0={id:"",email:"",name:"",role:"owner",gymIds:[]},YN=r=>(r||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),$N=()=>{ji("");const{authUser:r,role:e,loading:n,error:s}=bu(),[o,u]=C.useState(!0),[f,m]=C.useState(""),[p,g]=C.useState(""),[E,b]=C.useState([]),[S,P]=C.useState([]),[x,U]=C.useState([]),[O,q]=C.useState(v0),[L,G]=C.useState({}),[Q,K]=C.useState(_0),[te,I]=C.useState(""),R=C.useMemo(()=>{const H=new Map;for(const fe of S){const N=fe.gymId||"";N&&H.set(N,(H.get(N)||0)+1)}return H},[S]),D=async()=>{u(!0),m("");try{const[H,fe,N]=await Promise.all([We(Fe(Se,"gyms")),We(Fe(Se,"events")),We(Fe(Se,"users"))]),W=H.docs.map(ge=>({id:ge.id,...ge.data()})).sort((ge,de)=>(ge.name||"").localeCompare(de.name||"","ja")),ue=fe.docs.map(ge=>({id:ge.id,...ge.data()})),se=N.docs.map(ge=>({id:ge.id,...ge.data()})).sort((ge,de)=>{const he=ge.role||"",pe=de.role||"";return he!==pe?he.localeCompare(pe,"ja"):(ge.email||ge.id||"").localeCompare(de.email||de.id||"","ja")});b(W),P(ue),U(se);const ye={};for(const ge of W)ye[ge.id]={name:ge.name||"",city:ge.city||"",prefecture:ge.prefecture||""};G(ye)}catch(H){console.error(":",H),m("")}finally{u(!1)}};C.useEffect(()=>{if(!n){if(s){m(s),u(!1);return}if(e!=="admin"){u(!1);return}D()}},[n,s,e]);const k=()=>{K(_0),I("")},j=async H=>{H.preventDefault();const fe=O.id.trim();if(!fe||!O.name.trim()){g(" ID");return}if(E.some(N=>N.id===fe)){g(" ID");return}try{await os(gt(Se,"gyms",fe),{name:O.name.trim(),city:O.city.trim(),prefecture:O.prefecture.trim(),createdAt:Zn(),updatedAt:Zn()}),q(v0),g(" "),await D()}catch(N){console.error(":",N),g(" ")}},z=async H=>{const fe=L[H];if(!fe||!fe.name.trim()){g(" ");return}try{await os(gt(Se,"gyms",H),{name:fe.name.trim(),city:fe.city.trim(),prefecture:fe.prefecture.trim(),updatedAt:Zn()},{merge:!0}),g(` (${H})`),await D()}catch(N){console.error(":",N),g(" ")}},M=async H=>{const fe=R.get(H)||0;if(fe>0){g(`  ${fe} `);return}if(window.confirm(`(${H})`))try{await ia(gt(Se,"gyms",H)),g(` (${H})`),await D()}catch(N){console.error(":",N),g(" ")}},et=H=>{I(H.id),K({id:H.id,email:H.email||"",name:H.name||"",role:H.role==="admin"?"admin":"owner",gymIds:Im(H.gymIds)})},Ge=H=>{K(fe=>{const N=fe.gymIds.includes(H);return{...fe,gymIds:N?fe.gymIds.filter(W=>W!==H):[...fe.gymIds,H]}})},ne=async H=>{H.preventDefault();const fe=Q.email.trim().toLowerCase();if(!fe){g(" ");return}const N=Q.id.trim()||YN(fe);if(!N){g(" ID");return}const W=Q.role==="admin"?"admin":"owner",ue=W==="admin"?["*"]:Im(Q.gymIds);if(W==="owner"&&ue.length===0){g(" owner 1");return}const se=x.find(ge=>ge.id===N),ye={email:fe,name:Q.name.trim(),role:W,gymIds:ue,updatedAt:Zn()};se!=null&&se.uid&&(ye.uid=se.uid),se||(ye.createdAt=Zn());try{await os(gt(Se,"users",N),ye,{merge:!0}),g(` (${N})`),I(N),K(ge=>({...ge,id:N})),await D()}catch(ge){console.error(":",ge),g(" ")}},ie=async H=>{if(H.id===(r==null?void 0:r.uid)){g(" ");return}if(window.confirm(`(${H.id})`))try{await ia(gt(Se,"users",H.id)),te===H.id&&k(),g(` (${H.id})`),await D()}catch(fe){console.error(":",fe),g(" ")}};return n||o?v.jsx("p",{style:{padding:"2em"},children:"..."}):f||s?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:f||s}),v.jsx(Be,{to:"/dashboard",children:" "})]}):e!=="admin"?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:""}),v.jsx(Be,{to:"/dashboard",children:" "})]}):v.jsxs("div",{style:{padding:"1.5em",maxWidth:"1100px",margin:"0 auto"},children:[v.jsx("h2",{children:""}),v.jsx("p",{children:""}),v.jsx("p",{style:{marginTop:0},children:v.jsx(Be,{to:"/dashboard",children:" "})}),v.jsx("p",{style:{marginTop:"1em"},children:p}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("form",{onSubmit:j,style:{display:"grid",gap:"0.6em",maxWidth:"560px"},children:[v.jsx("input",{type:"text",placeholder:"ID (: gym-shibuya)",value:O.id,onChange:H=>q(fe=>({...fe,id:H.target.value})),required:!0}),v.jsx("input",{type:"text",placeholder:"",value:O.name,onChange:H=>q(fe=>({...fe,name:H.target.value})),required:!0}),v.jsx("input",{type:"text",placeholder:"",value:O.city,onChange:H=>q(fe=>({...fe,city:H.target.value}))}),v.jsx("input",{type:"text",placeholder:"",value:O.prefecture,onChange:H=>q(fe=>({...fe,prefecture:H.target.value}))}),v.jsx("button",{type:"submit",children:""})]})]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em",marginTop:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),E.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"0.8em"},children:E.map(H=>{var fe,N,W;return v.jsxs("div",{style:{border:"1px solid #eee",borderRadius:"8px",padding:"0.8em"},children:[v.jsx("p",{style:{marginTop:0,marginBottom:"0.5em",fontWeight:"bold"},children:H.id}),v.jsxs("div",{style:{display:"grid",gap:"0.5em",maxWidth:"560px"},children:[v.jsx("input",{type:"text",value:((fe=L[H.id])==null?void 0:fe.name)||"",onChange:ue=>G(se=>({...se,[H.id]:{...se[H.id],name:ue.target.value}})),placeholder:""}),v.jsx("input",{type:"text",value:((N=L[H.id])==null?void 0:N.city)||"",onChange:ue=>G(se=>({...se,[H.id]:{...se[H.id],city:ue.target.value}})),placeholder:""}),v.jsx("input",{type:"text",value:((W=L[H.id])==null?void 0:W.prefecture)||"",onChange:ue=>G(se=>({...se,[H.id]:{...se[H.id],prefecture:ue.target.value}})),placeholder:""})]}),v.jsxs("p",{style:{marginBottom:"0.6em"},children:[": ",R.get(H.id)||0]}),v.jsxs("div",{style:{display:"flex",gap:"0.6em",flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>z(H.id),children:""}),v.jsx("button",{type:"button",onClick:()=>M(H.id),children:""})]})]},H.id)})})]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em",marginTop:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("form",{onSubmit:ne,style:{display:"grid",gap:"0.6em",maxWidth:"700px"},children:[v.jsx("input",{type:"text",placeholder:"ID",value:Q.id,onChange:H=>K(fe=>({...fe,id:H.target.value}))}),v.jsx("input",{type:"email",placeholder:"",value:Q.email,onChange:H=>K(fe=>({...fe,email:H.target.value})),required:!0}),v.jsx("input",{type:"text",placeholder:"",value:Q.name,onChange:H=>K(fe=>({...fe,name:H.target.value}))}),v.jsxs("div",{style:{display:"flex",gap:"1em",flexWrap:"wrap"},children:[v.jsxs("label",{children:[v.jsx("input",{type:"radio",name:"owner-role",checked:Q.role==="owner",onChange:()=>K(H=>({...H,role:"owner"}))}),"owner"]}),v.jsxs("label",{children:[v.jsx("input",{type:"radio",name:"owner-role",checked:Q.role==="admin",onChange:()=>K(H=>({...H,role:"admin",gymIds:["*"]}))}),"admin"]})]}),Q.role==="owner"&&v.jsxs("div",{children:[v.jsx("p",{style:{marginBottom:"0.4em"},children:""}),v.jsx("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:E.map(H=>v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:Q.gymIds.includes(H.id),onChange:()=>Ge(H.id)}),H.name||H.id]},H.id))})]}),v.jsxs("div",{style:{display:"flex",gap:"0.6em",flexWrap:"wrap"},children:[v.jsx("button",{type:"submit",children:te?` (${te})`:""}),v.jsx("button",{type:"button",onClick:k,children:""})]})]}),v.jsx("h4",{style:{marginTop:"1.2em"},children:""}),x.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"0.7em"},children:x.map(H=>v.jsxs("div",{style:{border:"1px solid #eee",borderRadius:"8px",padding:"0.8em",background:te===H.id?"#f8f8f8":"#fff"},children:[v.jsxs("p",{style:{marginTop:0,marginBottom:"0.3em"},children:[v.jsx("strong",{children:H.email||"(no email)"})," / role: ",H.role||"-"]}),v.jsxs("p",{style:{marginTop:0,marginBottom:"0.5em"},children:["profileId: ",H.id," / gymIds: ",JSON.stringify(Im(H.gymIds))]}),v.jsxs("div",{style:{display:"flex",gap:"0.6em",flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>et(H),children:""}),v.jsx("button",{type:"button",onClick:()=>ie(H),children:""})]})]},H.id))})]})]})},Bl=({children:r})=>{const[e,n]=C.useState(!0),[s,o]=C.useState(!1),u=kn();return C.useEffect(()=>{const f=yT(uf,m=>{o(!!m),n(!1)});return()=>f()},[]),e?v.jsx("p",{style:{padding:"2em"},children:"..."}):s?r:v.jsx(Mw,{to:"/login",replace:!0,state:{from:u}})};function XN(){return v.jsx(a1,{basename:"/FlashComp",children:v.jsxs(Pw,{children:[v.jsx(oi,{path:"/",element:v.jsx(g1,{})}),v.jsx(oi,{path:"/login",element:v.jsx(xN,{})}),v.jsx(oi,{path:"/dashboard",element:v.jsx(Bl,{children:v.jsx(NN,{})})}),v.jsx(oi,{path:"/create-event",element:v.jsx(Bl,{children:v.jsx(ON,{})})}),v.jsx(oi,{path:"/events/:eventId/edit",element:v.jsx(Bl,{children:v.jsx(UN,{})})}),v.jsx(oi,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:v.jsx(Bl,{children:v.jsx(BN,{})})}),v.jsx(oi,{path:"/system-admin",element:v.jsx(Bl,{children:v.jsx($N,{})})}),v.jsx(oi,{path:"/score-summary",element:v.jsx(HN,{})}),v.jsx(oi,{path:"/score-summary/:eventId",element:v.jsx(GN,{})}),v.jsx(oi,{path:"/score-summary/:eventId/participants/:participantId",element:v.jsx(QN,{})})]})})}Hb.createRoot(document.getElementById("root")).render(v.jsx(C.StrictMode,{children:v.jsx(XN,{})}));
