(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var lm={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function Nb(){if(p_)return Pl;p_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var g_;function Ob(){return g_||(g_=1,lm.exports=Nb()),lm.exports}var v=Ob(),um={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Mb(){if(y_)return Pe;y_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,U={};function O(L,Z,ce){this.props=L,this.context=Z,this.refs=U,this.updater=ce||P}O.prototype.isReactComponent={},O.prototype.setState=function(L,Z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Z,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function j(){}j.prototype=O.prototype;function q(L,Z,ce){this.props=L,this.context=Z,this.refs=U,this.updater=ce||P}var F=q.prototype=new j;F.constructor=q,C(F,O.prototype),F.isPureReactComponent=!0;var X=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function I(L,Z,ce,ue,ye,we){return ce=we.ref,{$$typeof:r,type:L,key:Z,ref:ce!==void 0?ce:null,props:we}}function R(L,Z){return I(L.type,Z,void 0,void 0,void 0,L.props)}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function V(L){var Z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return Z[ce]})}var k=/\/+/g;function z(L,Z){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):Z.toString(36)}function N(){}function rt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(N,N):(L.status="pending",L.then(function(Z){L.status==="pending"&&(L.status="fulfilled",L.value=Z)},function(Z){L.status==="pending"&&(L.status="rejected",L.reason=Z)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Qe(L,Z,ce,ue,ye){var we=typeof L;(we==="undefined"||we==="boolean")&&(L=null);var de=!1;if(L===null)de=!0;else switch(we){case"bigint":case"string":case"number":de=!0;break;case"object":switch(L.$$typeof){case r:case e:de=!0;break;case E:return de=L._init,Qe(de(L._payload),Z,ce,ue,ye)}}if(de)return ye=ye(L),de=ue===""?"."+z(L,0):ue,X(ye)?(ce="",de!=null&&(ce=de.replace(k,"$&/")+"/"),Qe(ye,Z,ce,"",function(Ne){return Ne})):ye!=null&&(x(ye)&&(ye=R(ye,ce+(ye.key==null||L&&L.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+de)),Z.push(ye)),1;de=0;var le=ue===""?".":ue+":";if(X(L))for(var me=0;me<L.length;me++)ue=L[me],we=le+z(ue,me),de+=Qe(ue,Z,ce,we,ye);else if(me=S(L),typeof me=="function")for(L=me.call(L),me=0;!(ue=L.next()).done;)ue=ue.value,we=le+z(ue,me++),de+=Qe(ue,Z,ce,we,ye);else if(we==="object"){if(typeof L.then=="function")return Qe(rt(L),Z,ce,ue,ye);throw Z=String(L),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return de}function te(L,Z,ce){if(L==null)return L;var ue=[],ye=0;return Qe(L,ue,"","",function(we){return Z.call(ce,we,ye++)}),ue}function ne(L){if(L._status===-1){var Z=L._result;Z=Z(),Z.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=Z)}if(L._status===1)return L._result.default;throw L._result}var he=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ee(){}return Pe.Children={map:te,forEach:function(L,Z,ce){te(L,function(){Z.apply(this,arguments)},ce)},count:function(L){var Z=0;return te(L,function(){Z++}),Z},toArray:function(L){return te(L,function(Z){return Z})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Pe.Component=O,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=q,Pe.StrictMode=s,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return Q.H.useMemoCache(L)}},Pe.cache=function(L){return function(){return L.apply(null,arguments)}},Pe.cloneElement=function(L,Z,ce){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ue=C({},L.props),ye=L.key,we=void 0;if(Z!=null)for(de in Z.ref!==void 0&&(we=void 0),Z.key!==void 0&&(ye=""+Z.key),Z)!J.call(Z,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Z.ref===void 0||(ue[de]=Z[de]);var de=arguments.length-2;if(de===1)ue.children=ce;else if(1<de){for(var le=Array(de),me=0;me<de;me++)le[me]=arguments[me+2];ue.children=le}return I(L.type,ye,void 0,void 0,we,ue)},Pe.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Pe.createElement=function(L,Z,ce){var ue,ye={},we=null;if(Z!=null)for(ue in Z.key!==void 0&&(we=""+Z.key),Z)J.call(Z,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=Z[ue]);var de=arguments.length-2;if(de===1)ye.children=ce;else if(1<de){for(var le=Array(de),me=0;me<de;me++)le[me]=arguments[me+2];ye.children=le}if(L&&L.defaultProps)for(ue in de=L.defaultProps,de)ye[ue]===void 0&&(ye[ue]=de[ue]);return I(L,we,void 0,void 0,null,ye)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(L){return{$$typeof:m,render:L}},Pe.isValidElement=x,Pe.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:ne}},Pe.memo=function(L,Z){return{$$typeof:g,type:L,compare:Z===void 0?null:Z}},Pe.startTransition=function(L){var Z=Q.T,ce={};Q.T=ce;try{var ue=L(),ye=Q.S;ye!==null&&ye(ce,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ee,he)}catch(we){he(we)}finally{Q.T=Z}},Pe.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Pe.use=function(L){return Q.H.use(L)},Pe.useActionState=function(L,Z,ce){return Q.H.useActionState(L,Z,ce)},Pe.useCallback=function(L,Z){return Q.H.useCallback(L,Z)},Pe.useContext=function(L){return Q.H.useContext(L)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(L,Z){return Q.H.useDeferredValue(L,Z)},Pe.useEffect=function(L,Z,ce){var ue=Q.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(L,Z)},Pe.useId=function(){return Q.H.useId()},Pe.useImperativeHandle=function(L,Z,ce){return Q.H.useImperativeHandle(L,Z,ce)},Pe.useInsertionEffect=function(L,Z){return Q.H.useInsertionEffect(L,Z)},Pe.useLayoutEffect=function(L,Z){return Q.H.useLayoutEffect(L,Z)},Pe.useMemo=function(L,Z){return Q.H.useMemo(L,Z)},Pe.useOptimistic=function(L,Z){return Q.H.useOptimistic(L,Z)},Pe.useReducer=function(L,Z,ce){return Q.H.useReducer(L,Z,ce)},Pe.useRef=function(L){return Q.H.useRef(L)},Pe.useState=function(L){return Q.H.useState(L)},Pe.useSyncExternalStore=function(L,Z,ce){return Q.H.useSyncExternalStore(L,Z,ce)},Pe.useTransition=function(){return Q.H.useTransition()},Pe.version="19.1.0",Pe}var v_;function ip(){return v_||(v_=1,um.exports=Mb()),um.exports}var D=ip(),cm={exports:{}},Vl={},hm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function Pb(){return __||(__=1,function(r){function e(te,ne){var he=te.length;te.push(ne);e:for(;0<he;){var Ee=he-1>>>1,L=te[Ee];if(0<o(L,ne))te[Ee]=ne,te[he]=L,he=Ee;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ne=te[0],he=te.pop();if(he!==ne){te[0]=he;e:for(var Ee=0,L=te.length,Z=L>>>1;Ee<Z;){var ce=2*(Ee+1)-1,ue=te[ce],ye=ce+1,we=te[ye];if(0>o(ue,he))ye<L&&0>o(we,ue)?(te[Ee]=we,te[ye]=he,Ee=ye):(te[Ee]=ue,te[ce]=he,Ee=ce);else if(ye<L&&0>o(we,he))te[Ee]=we,te[ye]=he,Ee=ye;else break e}}return ne}function o(te,ne){var he=te.sortIndex-ne.sortIndex;return he!==0?he:te.id-ne.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,b=null,S=3,P=!1,C=!1,U=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function X(te){for(var ne=n(g);ne!==null;){if(ne.callback===null)s(g);else if(ne.startTime<=te)s(g),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(g)}}function Q(te){if(U=!1,X(te),!C)if(n(p)!==null)C=!0,J||(J=!0,z());else{var ne=n(g);ne!==null&&Qe(Q,ne.startTime-te)}}var J=!1,I=-1,R=5,x=-1;function V(){return O?!0:!(r.unstable_now()-x<R)}function k(){if(O=!1,J){var te=r.unstable_now();x=te;var ne=!0;try{e:{C=!1,U&&(U=!1,q(I),I=-1),P=!0;var he=S;try{t:{for(X(te),b=n(p);b!==null&&!(b.expirationTime>te&&V());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,S=b.priorityLevel;var L=Ee(b.expirationTime<=te);if(te=r.unstable_now(),typeof L=="function"){b.callback=L,X(te),ne=!0;break t}b===n(p)&&s(p),X(te)}else s(p);b=n(p)}if(b!==null)ne=!0;else{var Z=n(g);Z!==null&&Qe(Q,Z.startTime-te),ne=!1}}break e}finally{b=null,S=he,P=!1}ne=void 0}}finally{ne?z():J=!1}}}var z;if(typeof F=="function")z=function(){F(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,rt=N.port2;N.port1.onmessage=k,z=function(){rt.postMessage(null)}}else z=function(){j(k,0)};function Qe(te,ne){I=j(function(){te(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(te){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var he=S;S=ne;try{return te()}finally{S=he}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(te,ne){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var he=S;S=te;try{return ne()}finally{S=he}},r.unstable_scheduleCallback=function(te,ne,he){var Ee=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ee+he:Ee):he=Ee,te){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=he+L,te={id:E++,callback:ne,priorityLevel:te,startTime:he,expirationTime:L,sortIndex:-1},he>Ee?(te.sortIndex=he,e(g,te),n(p)===null&&te===n(g)&&(U?(q(I),I=-1):U=!0,Qe(Q,he-Ee))):(te.sortIndex=L,e(p,te),C||P||(C=!0,J||(J=!0,z()))),te},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(te){var ne=S;return function(){var he=S;S=ne;try{return te.apply(this,arguments)}finally{S=he}}}}(fm)),fm}var E_;function Vb(){return E_||(E_=1,hm.exports=Pb()),hm.exports}var dm={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function kb(){if(T_)return un;T_=1;var r=ip();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},un.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:P}):E==="script"&&s.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},un.useFormStatus=function(){return f.H.useHostTransitionStatus()},un.version="19.1.0",un}var S_;function Lb(){if(S_)return dm.exports;S_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=kb(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function jb(){if(A_)return Vl;A_=1;var r=Vb(),e=ip(),n=Lb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var T=!1,A=h.child;A;){if(A===a){T=!0,a=h,l=d;break}if(A===l){T=!0,l=h,a=d;break}A=A.sibling}if(!T){for(A=d.child;A;){if(A===a){T=!0,a=d,l=h;break}if(A===l){T=!0,l=d,a=h;break}A=A.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case O:return"Profiler";case U:return"StrictMode";case Q:return"Suspense";case J:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case F:return(t.displayName||"Context")+".Provider";case q:return(t._context.displayName||"Context")+".Consumer";case X:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:rt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return rt(t(i))}catch{}}return null}var Qe=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ee=[],L=-1;function Z(t){return{current:t}}function ce(t){0>L||(t.current=Ee[L],Ee[L]=null,L--)}function ue(t,i){L++,Ee[L]=t.current,t.current=i}var ye=Z(null),we=Z(null),de=Z(null),le=Z(null);function me(t,i){switch(ue(de,i),ue(we,t),ue(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Hv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Hv(i),t=Fv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(ye),ue(ye,t)}function Ne(){ce(ye),ce(we),ce(de)}function _e(t){t.memoizedState!==null&&ue(le,t);var i=ye.current,a=Fv(i,t.type);i!==a&&(ue(we,t),ue(ye,a))}function mt(t){we.current===t&&(ce(ye),ce(we)),le.current===t&&(ce(le),xl._currentValue=he)}var Lt=Object.prototype.hasOwnProperty,ut=r.unstable_scheduleCallback,ht=r.unstable_cancelCallback,Rn=r.unstable_shouldYield,an=r.unstable_requestPaint,Et=r.unstable_now,Ln=r.unstable_getCurrentPriorityLevel,En=r.unstable_ImmediatePriority,jn=r.unstable_UserBlockingPriority,on=r.unstable_NormalPriority,Oe=r.unstable_LowPriority,Be=r.unstable_IdlePriority,ki=r.log,Un=r.unstable_setDisableYieldValue,ft=null,We=null;function mn(t){if(typeof ki=="function"&&Un(t),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ft,t)}catch{}}var xt=Math.clz32?Math.clz32:ps,Au=Math.log,cf=Math.LN2;function ps(t){return t>>>=0,t===0?32:31-(Au(t)/cf|0)|0}var gs=256,ys=4194304;function ei(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function aa(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~d,l!==0?h=ei(l):(T&=A,T!==0?h=ei(T):a||(a=A&~t,a!==0&&(h=ei(a))))):(A=l&~d,A!==0?h=ei(A):T!==0?h=ei(T):a||(a=l&~t,a!==0&&(h=ei(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function vs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function xo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Do(){var t=gs;return gs<<=1,(gs&4194048)===0&&(gs=256),t}function No(){var t=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),t}function Li(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ji(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oo(t,i,a,l,h,d){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,Y=t.hiddenUpdates;for(a=T&~a;0<a;){var ie=31-xt(a),se=1<<ie;A[ie]=0,M[ie]=-1;var $=Y[ie];if($!==null)for(Y[ie]=null,ie=0;ie<$.length;ie++){var W=$[ie];W!==null&&(W.lane&=-536870913)}a&=~se}l!==0&&di(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(T&~i))}function di(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-xt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Mo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-xt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function _r(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function oa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Er(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:u_(t.type))}function bu(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var yt=Math.random().toString(36).slice(2),jt="__reactFiber$"+yt,Dt="__reactProps$"+yt,Bn="__reactContainer$"+yt,Po="__reactEvents$"+yt,hf="__reactListeners$"+yt,Tr="__reactHandles$"+yt,wu="__reactResources$"+yt,_s="__reactMarker$"+yt;function Sr(t){delete t[jt],delete t[Dt],delete t[Po],delete t[hf],delete t[Tr]}function Ui(t){var i=t[jt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Bn]||a[jt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Yv(t);t!==null;){if(a=t[jt])return a;t=Yv(t)}return i}t=a,a=t.parentNode}return null}function mi(t){if(t=t[jt]||t[Bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function pi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function pn(t){var i=t[wu];return i||(i=t[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(t){t[_s]=!0}var Vo=new Set,la={};function ti(t,i){Bi(t,i),Bi(t+"Capture",i)}function Bi(t,i){for(la[t]=i,t=0;t<i.length;t++)Vo.add(i[t])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Iu={},Es={};function Cu(t){return Lt.call(Es,t)?!0:Lt.call(Iu,t)?!1:Ru.test(t)?Es[t]=!0:(Iu[t]=!0,!1)}function Ar(t,i,a){if(Cu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function gi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Wt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Ts,xu;function zi(t){if(Ts===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ts=i&&i[1]||"",xu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+t+xu}var ua=!1;function ca(t,i){if(!t||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var $=W}Reflect.construct(t,[],se)}else{try{se.call()}catch(W){$=W}t.call(se.prototype)}}else{try{throw Error()}catch(W){$=W}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),T=d[0],A=d[1];if(T&&A){var M=T.split(`
`),Y=A.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===Y.length)for(l=M.length-1,h=Y.length-1;1<=l&&0<=h&&M[l]!==Y[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==Y[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==Y[h]){var ie=`
`+M[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?zi(a):""}function ko(t){switch(t.tag){case 26:case 27:case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return ca(t.type,!1);case 11:return ca(t.type.render,!1);case 1:return ca(t.type,!0);case 31:return zi("Activity");default:return""}}function ha(t){try{var i="";do i+=ko(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ff(t){var i=Lo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(T){l=""+T,d.call(this,T)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function fa(t){t._valueTracker||(t._valueTracker=ff(t))}function jo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Lo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var df=/[\n"\\]/g;function Nt(t){return t.replace(df,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function In(t,i,a,l,h,d,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+gn(i)):t.value!==""+gn(i)&&(t.value=""+gn(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?br(t,T,gn(i)):a!=null?br(t,T,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+gn(A):t.removeAttribute("name")}function As(t,i,a,l,h,d,T,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+gn(a):"",i=i!=null?""+gn(i):a,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function br(t,i,a){i==="number"&&Ss(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function st(t,i,a){if(i!=null&&(i=""+gn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+gn(a):""}function bs(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Qe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=gn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ws=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Du(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ws.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Uo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Du(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Du(t,d,i[d])}function Bo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return pf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Hi=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,Gi=null;function zo(t){var i=mi(t);if(i&&(t=i.stateNode)){var a=t[Dt]||null;e:switch(t=i.stateNode,i.type){case"input":if(In(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Dt]||null;if(!h)throw Error(s(90));In(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&jo(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&qi(t,!!a.multiple,i,!1)}}}var yi=!1;function Nu(t,i,a){if(yi)return t(i,a);yi=!0;try{var l=t(i);return l}finally{if(yi=!1,(Fi!==null||Gi!==null)&&(bc(),Fi&&(i=Fi,t=Gi,Gi=Fi=null,zo(i),t)))for(i=0;i<t.length;i++)zo(t[i])}}function Rs(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Dt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(ni)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Hn=!1}var vi=null,wr=null,Ki=null;function qo(){if(Ki)return Ki;var t,i=wr,a=i.length,l,h="value"in vi?vi.value:vi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var T=a-t;for(l=1;l<=T&&i[a-l]===h[d-l];l++);return Ki=h.slice(t,1<l?1-l:void 0)}function _i(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ei(){return!0}function Ho(){return!1}function Ft(t){function i(a,l,h,d,T){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ei:Ho,this.isPropagationStopped=Ho,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),i}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Ft(Je),Cs=E({},Je,{view:0,detail:0}),Ou=Ft(Cs),pa,ga,Ti,xs=E({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(pa=t.screenX-Ti.screenX,ga=t.screenY-Ti.screenY):ga=pa=0,Ti=t),pa)},movementY:function(t){return"movementY"in t?t.movementY:ga}}),Fn=Ft(xs),Mu=E({},xs,{dataTransfer:0}),gf=Ft(Mu),Ds=E({},Cs,{relatedTarget:0}),ya=Ft(Ds),Fo=E({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),va=Ft(Fo),Pu=E({},Je,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_a=Ft(Pu),yf=E({},Je,{data:0}),Go=Ft(yf),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ko(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ku[t])?!!i[t]:!1}function Os(){return Ko}var Lu=E({},Cs,{key:function(t){if(t.key){var i=Ns[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=_i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(t){return t.type==="keypress"?_i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ea=Ft(Lu),ju=E({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=Ft(ju),Qi=E({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),Uu=Ft(Qi),Bu=E({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=Ft(Bu),qu=E({},xs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=Ft(qu),yn=E({},Je,{newState:0,oldState:0}),Hu=Ft(yn),Fu=[9,13,27,32],Si=ni&&"CompositionEvent"in window,c=null;ni&&"documentMode"in document&&(c=document.documentMode);var y=ni&&"TextEvent"in window&&!c,_=ni&&(!Si||c&&8<c&&11>=c),w=" ",G=!1;function ee(t,i){switch(t){case"keyup":return Fu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var He=!1;function Ut(t,i){switch(t){case"compositionend":return fe(i);case"keypress":return i.which!==32?null:(G=!0,w);case"textInput":return t=i.data,t===w&&G?null:t;default:return null}}function Fe(t,i){if(He)return t==="compositionend"||!Si&&ee(t,i)?(t=qo(),Ki=wr=vi=null,He=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Gt[t.type]:i==="textarea"}function Yi(t,i,a,l){Fi?Gi?Gi.push(l):Gi=[l]:Fi=l,i=Dc(i,"onChange"),0<i.length&&(a=new ma("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Zt=null,Ai=null;function Yo(t){jv(t,0)}function Gu(t){var i=pi(t);if(jo(i))return t}function sg(t,i){if(t==="change")return i}var ag=!1;if(ni){var vf;if(ni){var _f="oninput"in document;if(!_f){var og=document.createElement("div");og.setAttribute("oninput","return;"),_f=typeof og.oninput=="function"}vf=_f}else vf=!1;ag=vf&&(!document.documentMode||9<document.documentMode)}function lg(){Zt&&(Zt.detachEvent("onpropertychange",ug),Ai=Zt=null)}function ug(t){if(t.propertyName==="value"&&Gu(Ai)){var i=[];Yi(i,Ai,t,qn(t)),Nu(Yo,i)}}function oA(t,i,a){t==="focusin"?(lg(),Zt=i,Ai=a,Zt.attachEvent("onpropertychange",ug)):t==="focusout"&&lg()}function lA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(Ai)}function uA(t,i){if(t==="click")return Gu(i)}function cA(t,i){if(t==="input"||t==="change")return Gu(i)}function hA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Cn=typeof Object.is=="function"?Object.is:hA;function $o(t,i){if(Cn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Lt.call(i,h)||!Cn(t[h],i[h]))return!1}return!0}function cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,i){var a=cg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cg(a)}}function fg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?fg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function dg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ss(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ss(t.document)}return i}function Ef(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var fA=ni&&"documentMode"in document&&11>=document.documentMode,Sa=null,Tf=null,Xo=null,Sf=!1;function mg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sf||Sa==null||Sa!==Ss(l)||(l=Sa,"selectionStart"in l&&Ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xo&&$o(Xo,l)||(Xo=l,l=Dc(Tf,"onSelect"),0<l.length&&(i=new ma("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Sa)))}function Ms(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Aa={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Af={},pg={};ni&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Ps(t){if(Af[t])return Af[t];if(!Aa[t])return t;var i=Aa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in pg)return Af[t]=i[a];return t}var gg=Ps("animationend"),yg=Ps("animationiteration"),vg=Ps("animationstart"),dA=Ps("transitionrun"),mA=Ps("transitionstart"),pA=Ps("transitioncancel"),_g=Ps("transitionend"),Eg=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function ii(t,i){Eg.set(t,i),ti(i,[t])}var Tg=new WeakMap;function Gn(t,i){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ha(i)},Tg.set(t,i),i)}return{value:t,source:i,stack:ha(i)}}var Kn=[],ba=0,wf=0;function Ku(){for(var t=ba,i=wf=ba=0;i<t;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var h=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}d!==0&&Sg(a,h,d)}}function Qu(t,i,a,l){Kn[ba++]=t,Kn[ba++]=i,Kn[ba++]=a,Kn[ba++]=l,wf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rf(t,i,a,l){return Qu(t,i,a,l),Yu(t)}function wa(t,i){return Qu(t,null,null,i),Yu(t)}function Sg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-xt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Yu(t){if(50<Tl)throw Tl=0,Od=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ra={};function gA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,i,a,l){return new gA(t,i,a,l)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,i){var a=t.alternate;return a===null?(a=xn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ag(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function $u(t,i,a,l,h,d){var T=0;if(l=t,typeof t=="function")If(t)&&(T=1);else if(typeof t=="string")T=vb(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=xn(31,a,i,h),t.elementType=x,t.lanes=d,t;case C:return Vs(a.children,h,d,i);case U:T=8,h|=24;break;case O:return t=xn(12,a,i,h|2),t.elementType=O,t.lanes=d,t;case Q:return t=xn(13,a,i,h),t.elementType=Q,t.lanes=d,t;case J:return t=xn(19,a,i,h),t.elementType=J,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:case F:T=10;break e;case q:T=9;break e;case X:T=11;break e;case I:T=14;break e;case R:T=16,l=null;break e}T=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=xn(T,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Vs(t,i,a,l){return t=xn(7,t,l,i),t.lanes=a,t}function Cf(t,i,a){return t=xn(6,t,null,i),t.lanes=a,t}function xf(t,i,a){return i=xn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ia=[],Ca=0,Xu=null,Wu=0,Qn=[],Yn=0,ks=null,Xi=1,Wi="";function Ls(t,i){Ia[Ca++]=Wu,Ia[Ca++]=Xu,Xu=t,Wu=i}function bg(t,i,a){Qn[Yn++]=Xi,Qn[Yn++]=Wi,Qn[Yn++]=ks,ks=t;var l=Xi;t=Wi;var h=32-xt(l)-1;l&=~(1<<h),a+=1;var d=32-xt(i)+h;if(30<d){var T=h-h%5;d=(l&(1<<T)-1).toString(32),l>>=T,h-=T,Xi=1<<32-xt(i)+h|a<<h|l,Wi=d+t}else Xi=1<<d|a<<h|l,Wi=t}function Df(t){t.return!==null&&(Ls(t,1),bg(t,1,0))}function Nf(t){for(;t===Xu;)Xu=Ia[--Ca],Ia[Ca]=null,Wu=Ia[--Ca],Ia[Ca]=null;for(;t===ks;)ks=Qn[--Yn],Qn[Yn]=null,Wi=Qn[--Yn],Qn[Yn]=null,Xi=Qn[--Yn],Qn[Yn]=null}var vn=null,At=null,Ze=!1,js=null,bi=!1,Of=Error(s(519));function Us(t){var i=Error(s(418,""));throw Jo(Gn(i,t)),Of}function wg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[jt]=t,i[Dt]=l,a){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(a=0;a<Al.length;a++)Ue(Al[a],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),As(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),fa(i);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),bs(i,l.value,l.defaultValue,l.children),fa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||qv(i.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),l.onScroll!=null&&Ue("scroll",i),l.onScrollEnd!=null&&Ue("scrollend",i),l.onClick!=null&&(i.onclick=Nc),i=!0):i=!1,i||Us(t)}function Rg(t){for(vn=t.return;vn;)switch(vn.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:vn=vn.return}}function Wo(t){if(t!==vn)return!1;if(!Ze)return Rg(t),Ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Yd(t.type,t.memoizedProps)),a=!a),a&&At&&Us(t),Rg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){At=si(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}At=null}}else i===27?(i=At,zr(t.type)?(t=Zd,Zd=null,At=t):At=i):At=vn?si(t.stateNode.nextSibling):null;return!0}function Zo(){At=vn=null,Ze=!1}function Ig(){var t=js;return t!==null&&(An===null?An=t:An.push.apply(An,t),js=null),t}function Jo(t){js===null?js=[t]:js.push(t)}var Mf=Z(null),Bs=null,Zi=null;function Rr(t,i,a){ue(Mf,i._currentValue),i._currentValue=a}function Ji(t){t._currentValue=Mf.current,ce(Mf)}function Pf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Vf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var T=h.child;d=d.firstContext;e:for(;d!==null;){var A=d;d=h;for(var M=0;M<i.length;M++)if(A.context===i[M]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),Pf(d.return,a,t),l||(T=null);break e}d=A.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(s(341));T.lanes|=a,d=T.alternate,d!==null&&(d.lanes|=a),Pf(T,a,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function el(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=h.type;Cn(h.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(h===le.current){if(T=h.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(xl):t=[xl])}h=h.return}t!==null&&Vf(i,t,a,l),i.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!Cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zs(t){Bs=t,Zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return Cg(Bs,t)}function Ju(t,i){return Bs===null&&zs(t),Cg(t,i)}function Cg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Zi===null){if(t===null)throw Error(s(308));Zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Zi=Zi.next=i;return a}var yA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},vA=r.unstable_scheduleCallback,_A=r.unstable_NormalPriority,zt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kf(){return{controller:new yA,data:new Map,refCount:0}}function tl(t){t.refCount--,t.refCount===0&&vA(_A,function(){t.controller.abort()})}var nl=null,Lf=0,xa=0,Da=null;function EA(t,i){if(nl===null){var a=nl=[];Lf=0,xa=Ud(),Da={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Lf++,i.then(xg,xg),i}function xg(){if(--Lf===0&&nl!==null){Da!==null&&(Da.status="fulfilled");var t=nl;nl=null,xa=0,Da=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function TA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Dg=te.S;te.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&EA(t,i),Dg!==null&&Dg(t,i)};var qs=Z(null);function jf(){var t=qs.current;return t!==null?t:dt.pooledCache}function ec(t,i){i===null?ue(qs,qs.current):ue(qs,i.pool)}function Ng(){var t=jf();return t===null?null:{parent:zt._currentValue,pool:t}}var il=Error(s(460)),Og=Error(s(474)),tc=Error(s(542)),Uf={then:function(){}};function Mg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nc(){}function Pg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(nc,nc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kg(t),t;default:if(typeof i.status=="string")i.then(nc,nc);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kg(t),t}throw rl=i,il}}var rl=null;function Vg(){if(rl===null)throw Error(s(459));var t=rl;return rl=null,t}function kg(t){if(t===il||t===tc)throw Error(s(483))}var Ir=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Cr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Yu(t),Sg(t,null,a),i}return Qu(t,l,i,a),Yu(t)}function sl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Mo(t,a)}}function qf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=T:d=d.next=T,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Hf=!1;function al(){if(Hf){var t=Da;if(t!==null)throw t}}function ol(t,i,a,l){Hf=!1;var h=t.updateQueue;Ir=!1;var d=h.firstBaseUpdate,T=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var M=A,Y=M.next;M.next=null,T===null?d=Y:T.next=Y,T=M;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==T&&(A===null?ie.firstBaseUpdate=Y:A.next=Y,ie.lastBaseUpdate=M))}if(d!==null){var se=h.baseState;T=0,ie=Y=M=null,A=d;do{var $=A.lane&-536870913,W=$!==A.lane;if(W?(Ge&$)===$:(l&$)===$){$!==0&&$===xa&&(Hf=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var xe=t,be=A;$=i;var lt=a;switch(be.tag){case 1:if(xe=be.payload,typeof xe=="function"){se=xe.call(lt,se,$);break e}se=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=be.payload,$=typeof xe=="function"?xe.call(lt,se,$):xe,$==null)break e;se=E({},se,$);break e;case 2:Ir=!0}}$=A.callback,$!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[$]:W.push($))}else W={lane:$,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(Y=ie=W,M=se):ie=ie.next=W,T|=$;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;W=A,A=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);ie===null&&(M=se),h.baseState=M,h.firstBaseUpdate=Y,h.lastBaseUpdate=ie,d===null&&(h.shared.lanes=0),Lr|=T,t.lanes=T,t.memoizedState=se}}function Lg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function jg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lg(a[t],i)}var Na=Z(null),ic=Z(0);function Ug(t,i){t=ar,ue(ic,t),ue(Na,i),ar=t|i.baseLanes}function Ff(){ue(ic,ar),ue(Na,Na.current)}function Gf(){ar=ic.current,ce(Na),ce(ic)}var Dr=0,Ve=null,at=null,Ot=null,rc=!1,Oa=!1,Hs=!1,sc=0,ll=0,Ma=null,SA=0;function Rt(){throw Error(s(321))}function Kf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Cn(t[a],i[a]))return!1;return!0}function Qf(t,i,a,l,h,d){return Dr=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=t===null||t.memoizedState===null?Sy:Ay,Hs=!1,d=a(l,h),Hs=!1,Oa&&(d=zg(i,a,l,h)),Bg(t),d}function Bg(t){te.H=hc;var i=at!==null&&at.next!==null;if(Dr=0,Ot=at=Ve=null,rc=!1,ll=0,Ma=null,i)throw Error(s(300));t===null||Kt||(t=t.dependencies,t!==null&&Zu(t)&&(Kt=!0))}function zg(t,i,a,l){Ve=t;var h=0;do{if(Oa&&(Ma=null),ll=0,Oa=!1,25<=h)throw Error(s(301));if(h+=1,Ot=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}te.H=xA,d=i(a,l)}while(Oa);return d}function AA(){var t=te.H,i=t.useState()[0];return i=typeof i.then=="function"?ul(i):i,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Ve.flags|=1024),i}function Yf(){var t=sc!==0;return sc=0,t}function $f(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Xf(t){if(rc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}rc=!1}Dr=0,Ot=at=Ve=null,Oa=!1,ll=sc=0,Ma=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Mt(){if(at===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var i=Ot===null?Ve.memoizedState:Ot.next;if(i!==null)Ot=i,at=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ot===null?Ve.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(t){var i=ll;return ll+=1,Ma===null&&(Ma=[]),t=Pg(Ma,t,i),i=Ve,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?Sy:Ay),t}function ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ul(t);if(t.$$typeof===F)return ln(t)}throw Error(s(438,String(t)))}function Zf(t){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wf(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=V;return i.index++,a}function er(t,i){return typeof i=="function"?i(t):i}function oc(t){var i=Mt();return Jf(i,at,t)}function Jf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var T=h.next;h.next=d.next,d.next=T}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var A=T=null,M=null,Y=i,ie=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(Ge&se)===se:(Dr&se)===se){var $=Y.revertLane;if($===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===xa&&(ie=!0);else if((Dr&$)===$){Y=Y.next,$===xa&&(ie=!0);continue}else se={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(A=M=se,T=d):M=M.next=se,Ve.lanes|=$,Lr|=$;se=Y.action,Hs&&a(d,se),d=Y.hasEagerState?Y.eagerState:a(d,se)}else $={lane:se,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(A=M=$,T=d):M=M.next=$,Ve.lanes|=se,Lr|=se;Y=Y.next}while(Y!==null&&Y!==i);if(M===null?T=d:M.next=A,!Cn(d,t.memoizedState)&&(Kt=!0,ie&&(a=Da,a!==null)))throw a;t.memoizedState=d,t.baseState=T,t.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ed(t){var i=Mt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var T=h=h.next;do d=t(d,T.action),T=T.next;while(T!==h);Cn(d,i.memoizedState)||(Kt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function qg(t,i,a){var l=Ve,h=Mt(),d=Ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var T=!Cn((at||h).memoizedState,a);T&&(h.memoizedState=a,Kt=!0),h=h.queue;var A=Gg.bind(null,l,h,t);if(cl(2048,8,A,[t]),h.getSnapshot!==i||T||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,Pa(9,lc(),Fg.bind(null,l,h,a,i),null),dt===null)throw Error(s(349));d||(Dr&124)!==0||Hg(l,i,a)}return a}function Hg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=Wf(),Ve.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Fg(t,i,a,l){i.value=a,i.getSnapshot=l,Kg(i)&&Qg(t)}function Gg(t,i,a){return a(function(){Kg(i)&&Qg(t)})}function Kg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Cn(t,a)}catch{return!0}}function Qg(t){var i=wa(t,2);i!==null&&Pn(i,t,2)}function td(t){var i=Tn();if(typeof t=="function"){var a=t;if(t=a(),Hs){mn(!0);try{a()}finally{mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},i}function Yg(t,i,a,l){return t.baseState=a,Jf(t,at,typeof l=="function"?l:er)}function bA(t,i,a,l,h){if(cc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){d.listeners.push(T)}};te.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,$g(i,d)):(d.next=a.next,i.pending=a.next=d)}}function $g(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=te.T,T={};te.T=T;try{var A=a(h,l),M=te.S;M!==null&&M(T,A),Xg(t,i,A)}catch(Y){nd(t,i,Y)}finally{te.T=d}}else try{d=a(h,l),Xg(t,i,d)}catch(Y){nd(t,i,Y)}}function Xg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Wg(t,i,l)},function(l){return nd(t,i,l)}):Wg(t,i,a)}function Wg(t,i,a){i.status="fulfilled",i.value=a,Zg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,$g(t,a)))}function nd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Zg(i),i=i.next;while(i!==l)}t.action=null}function Zg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Jg(t,i){return i}function ey(t,i){if(Ze){var a=dt.formState;if(a!==null){e:{var l=Ve;if(Ze){if(At){t:{for(var h=At,d=bi;h.nodeType!==8;){if(!d){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){At=si(h.nextSibling),l=h.data==="F!";break e}}Us(l)}l=!1}l&&(i=a[0])}}return a=Tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:i},a.queue=l,a=_y.bind(null,Ve,l),l.dispatch=a,l=td(!1),d=od.bind(null,Ve,!1,l.queue),l=Tn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=bA.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ty(t){var i=Mt();return ny(i,at,t)}function ny(t,i,a){if(i=Jf(t,i,Jg)[0],t=oc(er)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ul(i)}catch(T){throw T===il?tc:T}else l=i;i=Mt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,Pa(9,lc(),wA.bind(null,h,a),null)),[l,d,t]}function wA(t,i){t.action=i}function iy(t){var i=Mt(),a=at;if(a!==null)return ny(i,a,t);Mt(),i=i.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Pa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=Wf(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function lc(){return{destroy:void 0,resource:void 0}}function ry(){return Mt().memoizedState}function uc(t,i,a,l){var h=Tn();l=l===void 0?null:l,Ve.flags|=t,h.memoizedState=Pa(1|i,lc(),a,l)}function cl(t,i,a,l){var h=Mt();l=l===void 0?null:l;var d=h.memoizedState.inst;at!==null&&l!==null&&Kf(l,at.memoizedState.deps)?h.memoizedState=Pa(i,d,a,l):(Ve.flags|=t,h.memoizedState=Pa(1|i,d,a,l))}function sy(t,i){uc(8390656,8,t,i)}function ay(t,i){cl(2048,8,t,i)}function oy(t,i){return cl(4,2,t,i)}function ly(t,i){return cl(4,4,t,i)}function uy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function cy(t,i,a){a=a!=null?a.concat([t]):null,cl(4,4,uy.bind(null,i,t),a)}function id(){}function hy(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Kf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function fy(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Kf(i,l[1]))return l[0];if(l=t(),Hs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l}function rd(t,i,a){return a===void 0||(Dr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=pv(),Ve.lanes|=t,Lr|=t,a)}function dy(t,i,a,l){return Cn(a,i)?a:Na.current!==null?(t=rd(t,a,l),Cn(t,i)||(Kt=!0),t):(Dr&42)===0?(Kt=!0,t.memoizedState=a):(t=pv(),Ve.lanes|=t,Lr|=t,i)}function my(t,i,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var T=te.T,A={};te.T=A,od(t,!1,i,a);try{var M=h(),Y=te.S;if(Y!==null&&Y(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ie=TA(M,l);hl(t,i,ie,Mn(t))}else hl(t,i,l,Mn(t))}catch(se){hl(t,i,{then:function(){},status:"rejected",reason:se},Mn())}finally{ne.p=d,te.T=T}}function RA(){}function sd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=py(t).queue;my(t,h,i,he,a===null?RA:function(){return gy(t),a(l)})}function py(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function gy(t){var i=py(t).next.queue;hl(t,i,{},Mn())}function ad(){return ln(xl)}function yy(){return Mt().memoizedState}function vy(){return Mt().memoizedState}function IA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();t=Cr(a);var l=xr(i,t,a);l!==null&&(Pn(l,i,a),sl(l,i,a)),i={cache:kf()},t.payload=i;return}i=i.return}}function CA(t,i,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},cc(t)?Ey(i,a):(a=Rf(t,i,a,l),a!==null&&(Pn(a,t,l),Ty(a,i,l)))}function _y(t,i,a){var l=Mn();hl(t,i,a,l)}function hl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(cc(t))Ey(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var T=i.lastRenderedState,A=d(T,a);if(h.hasEagerState=!0,h.eagerState=A,Cn(A,T))return Qu(t,i,h,0),dt===null&&Ku(),!1}catch{}finally{}if(a=Rf(t,i,h,l),a!==null)return Pn(a,t,l),Ty(a,i,l),!0}return!1}function od(t,i,a,l){if(l={lane:2,revertLane:Ud(),action:l,hasEagerState:!1,eagerState:null,next:null},cc(t)){if(i)throw Error(s(479))}else i=Rf(t,a,l,2),i!==null&&Pn(i,t,2)}function cc(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function Ey(t,i){Oa=rc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Ty(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Mo(t,a)}}var hc={readContext:ln,use:ac,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},Sy={readContext:ln,use:ac,useCallback:function(t,i){return Tn().memoizedState=[t,i===void 0?null:i],t},useContext:ln,useEffect:sy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,uc(4194308,4,uy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return uc(4194308,4,t,i)},useInsertionEffect:function(t,i){uc(4,2,t,i)},useMemo:function(t,i){var a=Tn();i=i===void 0?null:i;var l=t();if(Hs){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Tn();if(a!==void 0){var h=a(i);if(Hs){mn(!0);try{a(i)}finally{mn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=CA.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var i=Tn();return t={current:t},i.memoizedState=t},useState:function(t){t=td(t);var i=t.queue,a=_y.bind(null,Ve,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:id,useDeferredValue:function(t,i){var a=Tn();return rd(a,t,i)},useTransition:function(){var t=td(!1);return t=my.bind(null,Ve,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ve,h=Tn();if(Ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),dt===null)throw Error(s(349));(Ge&124)!==0||Hg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,sy(Gg.bind(null,l,d,t),[t]),l.flags|=2048,Pa(9,lc(),Fg.bind(null,l,d,a,i),null),a},useId:function(){var t=Tn(),i=dt.identifierPrefix;if(Ze){var a=Wi,l=Xi;a=(l&~(1<<32-xt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=sc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=SA++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:ad,useFormState:ey,useActionState:ey,useOptimistic:function(t){var i=Tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=od.bind(null,Ve,!0,a),a.dispatch=i,[t,i]},useMemoCache:Zf,useCacheRefresh:function(){return Tn().memoizedState=IA.bind(null,Ve)}},Ay={readContext:ln,use:ac,useCallback:hy,useContext:ln,useEffect:ay,useImperativeHandle:cy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:fy,useReducer:oc,useRef:ry,useState:function(){return oc(er)},useDebugValue:id,useDeferredValue:function(t,i){var a=Mt();return dy(a,at.memoizedState,t,i)},useTransition:function(){var t=oc(er)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:qg,useId:yy,useHostTransitionStatus:ad,useFormState:ty,useActionState:ty,useOptimistic:function(t,i){var a=Mt();return Yg(a,at,t,i)},useMemoCache:Zf,useCacheRefresh:vy},xA={readContext:ln,use:ac,useCallback:hy,useContext:ln,useEffect:ay,useImperativeHandle:cy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:fy,useReducer:ed,useRef:ry,useState:function(){return ed(er)},useDebugValue:id,useDeferredValue:function(t,i){var a=Mt();return at===null?rd(a,t,i):dy(a,at.memoizedState,t,i)},useTransition:function(){var t=ed(er)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:qg,useId:yy,useHostTransitionStatus:ad,useFormState:iy,useActionState:iy,useOptimistic:function(t,i){var a=Mt();return at!==null?Yg(a,at,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:vy},Va=null,fl=0;function fc(t){var i=fl;return fl+=1,Va===null&&(Va=[]),Pg(Va,t,i)}function dl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function dc(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function by(t){var i=t._init;return i(t._payload)}function wy(t){function i(H,B){if(t){var K=H.deletions;K===null?(H.deletions=[B],H.flags|=16):K.push(B)}}function a(H,B){if(!t)return null;for(;B!==null;)i(H,B),B=B.sibling;return null}function l(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function h(H,B){return H=$i(H,B),H.index=0,H.sibling=null,H}function d(H,B,K){return H.index=K,t?(K=H.alternate,K!==null?(K=K.index,K<B?(H.flags|=67108866,B):K):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function T(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function A(H,B,K,re){return B===null||B.tag!==6?(B=Cf(K,H.mode,re),B.return=H,B):(B=h(B,K),B.return=H,B)}function M(H,B,K,re){var ve=K.type;return ve===C?ie(H,B,K.props.children,re,K.key):B!==null&&(B.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&by(ve)===B.type)?(B=h(B,K.props),dl(B,K),B.return=H,B):(B=$u(K.type,K.key,K.props,null,H.mode,re),dl(B,K),B.return=H,B)}function Y(H,B,K,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=xf(K,H.mode,re),B.return=H,B):(B=h(B,K.children||[]),B.return=H,B)}function ie(H,B,K,re,ve){return B===null||B.tag!==7?(B=Vs(K,H.mode,re,ve),B.return=H,B):(B=h(B,K),B.return=H,B)}function se(H,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Cf(""+B,H.mode,K),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return K=$u(B.type,B.key,B.props,null,H.mode,K),dl(K,B),K.return=H,K;case P:return B=xf(B,H.mode,K),B.return=H,B;case R:var re=B._init;return B=re(B._payload),se(H,B,K)}if(Qe(B)||z(B))return B=Vs(B,H.mode,K,null),B.return=H,B;if(typeof B.then=="function")return se(H,fc(B),K);if(B.$$typeof===F)return se(H,Ju(H,B),K);dc(H,B)}return null}function $(H,B,K,re){var ve=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ve!==null?null:A(H,B,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===ve?M(H,B,K,re):null;case P:return K.key===ve?Y(H,B,K,re):null;case R:return ve=K._init,K=ve(K._payload),$(H,B,K,re)}if(Qe(K)||z(K))return ve!==null?null:ie(H,B,K,re,null);if(typeof K.then=="function")return $(H,B,fc(K),re);if(K.$$typeof===F)return $(H,B,Ju(H,K),re);dc(H,K)}return null}function W(H,B,K,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(K)||null,A(B,H,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return H=H.get(re.key===null?K:re.key)||null,M(B,H,re,ve);case P:return H=H.get(re.key===null?K:re.key)||null,Y(B,H,re,ve);case R:var Le=re._init;return re=Le(re._payload),W(H,B,K,re,ve)}if(Qe(re)||z(re))return H=H.get(K)||null,ie(B,H,re,ve,null);if(typeof re.then=="function")return W(H,B,K,fc(re),ve);if(re.$$typeof===F)return W(H,B,K,Ju(B,re),ve);dc(B,re)}return null}function xe(H,B,K,re){for(var ve=null,Le=null,Te=B,Re=B=0,Yt=null;Te!==null&&Re<K.length;Re++){Te.index>Re?(Yt=Te,Te=null):Yt=Te.sibling;var $e=$(H,Te,K[Re],re);if($e===null){Te===null&&(Te=Yt);break}t&&Te&&$e.alternate===null&&i(H,Te),B=d($e,B,Re),Le===null?ve=$e:Le.sibling=$e,Le=$e,Te=Yt}if(Re===K.length)return a(H,Te),Ze&&Ls(H,Re),ve;if(Te===null){for(;Re<K.length;Re++)Te=se(H,K[Re],re),Te!==null&&(B=d(Te,B,Re),Le===null?ve=Te:Le.sibling=Te,Le=Te);return Ze&&Ls(H,Re),ve}for(Te=l(Te);Re<K.length;Re++)Yt=W(Te,H,Re,K[Re],re),Yt!==null&&(t&&Yt.alternate!==null&&Te.delete(Yt.key===null?Re:Yt.key),B=d(Yt,B,Re),Le===null?ve=Yt:Le.sibling=Yt,Le=Yt);return t&&Te.forEach(function(Kr){return i(H,Kr)}),Ze&&Ls(H,Re),ve}function be(H,B,K,re){if(K==null)throw Error(s(151));for(var ve=null,Le=null,Te=B,Re=B=0,Yt=null,$e=K.next();Te!==null&&!$e.done;Re++,$e=K.next()){Te.index>Re?(Yt=Te,Te=null):Yt=Te.sibling;var Kr=$(H,Te,$e.value,re);if(Kr===null){Te===null&&(Te=Yt);break}t&&Te&&Kr.alternate===null&&i(H,Te),B=d(Kr,B,Re),Le===null?ve=Kr:Le.sibling=Kr,Le=Kr,Te=Yt}if($e.done)return a(H,Te),Ze&&Ls(H,Re),ve;if(Te===null){for(;!$e.done;Re++,$e=K.next())$e=se(H,$e.value,re),$e!==null&&(B=d($e,B,Re),Le===null?ve=$e:Le.sibling=$e,Le=$e);return Ze&&Ls(H,Re),ve}for(Te=l(Te);!$e.done;Re++,$e=K.next())$e=W(Te,H,Re,$e.value,re),$e!==null&&(t&&$e.alternate!==null&&Te.delete($e.key===null?Re:$e.key),B=d($e,B,Re),Le===null?ve=$e:Le.sibling=$e,Le=$e);return t&&Te.forEach(function(Db){return i(H,Db)}),Ze&&Ls(H,Re),ve}function lt(H,B,K,re){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var ve=K.key;B!==null;){if(B.key===ve){if(ve=K.type,ve===C){if(B.tag===7){a(H,B.sibling),re=h(B,K.props.children),re.return=H,H=re;break e}}else if(B.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&by(ve)===B.type){a(H,B.sibling),re=h(B,K.props),dl(re,K),re.return=H,H=re;break e}a(H,B);break}else i(H,B);B=B.sibling}K.type===C?(re=Vs(K.props.children,H.mode,re,K.key),re.return=H,H=re):(re=$u(K.type,K.key,K.props,null,H.mode,re),dl(re,K),re.return=H,H=re)}return T(H);case P:e:{for(ve=K.key;B!==null;){if(B.key===ve)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){a(H,B.sibling),re=h(B,K.children||[]),re.return=H,H=re;break e}else{a(H,B);break}else i(H,B);B=B.sibling}re=xf(K,H.mode,re),re.return=H,H=re}return T(H);case R:return ve=K._init,K=ve(K._payload),lt(H,B,K,re)}if(Qe(K))return xe(H,B,K,re);if(z(K)){if(ve=z(K),typeof ve!="function")throw Error(s(150));return K=ve.call(K),be(H,B,K,re)}if(typeof K.then=="function")return lt(H,B,fc(K),re);if(K.$$typeof===F)return lt(H,B,Ju(H,K),re);dc(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(a(H,B.sibling),re=h(B,K),re.return=H,H=re):(a(H,B),re=Cf(K,H.mode,re),re.return=H,H=re),T(H)):a(H,B)}return function(H,B,K,re){try{fl=0;var ve=lt(H,B,K,re);return Va=null,ve}catch(Te){if(Te===il||Te===tc)throw Te;var Le=xn(29,Te,null,H.mode);return Le.lanes=re,Le.return=H,Le}finally{}}}var ka=wy(!0),Ry=wy(!1),$n=Z(null),wi=null;function Nr(t){var i=t.alternate;ue(qt,qt.current&1),ue($n,t),wi===null&&(i===null||Na.current!==null||i.memoizedState!==null)&&(wi=t)}function Iy(t){if(t.tag===22){if(ue(qt,qt.current),ue($n,t),wi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(wi=t)}}else Or()}function Or(){ue(qt,qt.current),ue($n,$n.current)}function tr(t){ce($n),wi===t&&(wi=null),ce(qt)}var qt=Z(0);function mc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Wd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function ld(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ud={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Cr(l);h.payload=i,a!=null&&(h.callback=a),i=xr(t,h,l),i!==null&&(Pn(i,t,l),sl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Cr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=xr(t,h,l),i!==null&&(Pn(i,t,l),sl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Mn(),l=Cr(a);l.tag=2,i!=null&&(l.callback=i),i=xr(t,l,a),i!==null&&(Pn(i,t,a),sl(i,t,a))}};function Cy(t,i,a,l,h,d,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,T):i.prototype&&i.prototype.isPureReactComponent?!$o(a,l)||!$o(h,d):!0}function xy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&ud.enqueueReplaceState(i,i.state,null)}function Fs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Dy(t){pc(t)}function Ny(t){console.error(t)}function Oy(t){pc(t)}function gc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function My(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function cd(t,i,a){return a=Cr(a),a.tag=3,a.payload={element:null},a.callback=function(){gc(t,i)},a}function Py(t){return t=Cr(t),t.tag=3,t}function Vy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){My(i,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){My(i,a,l),typeof h!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function DA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&el(i,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return wi===null?Pd():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Uf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),kd(t,l,h)),!1;case 22:return a.flags|=65536,l===Uf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),kd(t,l,h)),!1}throw Error(s(435,a.tag))}return kd(t,l,h),Pd(),!1}if(Ze)return i=$n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Of&&(t=Error(s(422),{cause:l}),Jo(Gn(t,a)))):(l!==Of&&(i=Error(s(423),{cause:l}),Jo(Gn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Gn(l,a),h=cd(t.stateNode,l,h),qf(t,h),bt!==4&&(bt=2)),!1;var d=Error(s(520),{cause:l});if(d=Gn(d,a),El===null?El=[d]:El.push(d),bt!==4&&(bt=2),i===null)return!0;l=Gn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=cd(a.stateNode,l,t),qf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jr===null||!jr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Py(h),Vy(h,t,a,l),qf(a,h),!1}a=a.return}while(a!==null);return!1}var ky=Error(s(461)),Kt=!1;function Jt(t,i,a,l){i.child=t===null?Ry(i,null,a,l):ka(i,t.child,a,l)}function Ly(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return zs(i),l=Qf(t,i,a,T,d,h),A=Yf(),t!==null&&!Kt?($f(t,i,h),nr(t,i,h)):(Ze&&A&&Df(i),i.flags|=1,Jt(t,i,l,h),i.child)}function jy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!If(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Uy(t,i,d,l,h)):(t=$u(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!vd(t,h)){var T=d.memoizedProps;if(a=a.compare,a=a!==null?a:$o,a(T,l)&&t.ref===i.ref)return nr(t,i,h)}return i.flags|=1,t=$i(d,l),t.ref=i.ref,t.return=i,i.child=t}function Uy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if($o(d,l)&&t.ref===i.ref)if(Kt=!1,i.pendingProps=l=d,vd(t,h))(t.flags&131072)!==0&&(Kt=!0);else return i.lanes=t.lanes,nr(t,i,h)}return hd(t,i,a,l,h)}function By(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return zy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ec(i,d!==null?d.cachePool:null),d!==null?Ug(i,d):Ff(),Iy(i);else return i.lanes=i.childLanes=536870912,zy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(ec(i,d.cachePool),Ug(i,d),Or(),i.memoizedState=null):(t!==null&&ec(i,null),Ff(),Or());return Jt(t,i,h,a),i.child}function zy(t,i,a,l){var h=jf();return h=h===null?null:{parent:zt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&ec(i,null),Ff(),Iy(i),t!==null&&el(t,i,l,!0),null}function yc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function hd(t,i,a,l,h){return zs(i),a=Qf(t,i,a,l,void 0,h),l=Yf(),t!==null&&!Kt?($f(t,i,h),nr(t,i,h)):(Ze&&l&&Df(i),i.flags|=1,Jt(t,i,a,h),i.child)}function qy(t,i,a,l,h,d){return zs(i),i.updateQueue=null,a=zg(i,l,a,h),Bg(t),l=Yf(),t!==null&&!Kt?($f(t,i,d),nr(t,i,d)):(Ze&&l&&Df(i),i.flags|=1,Jt(t,i,a,d),i.child)}function Hy(t,i,a,l,h){if(zs(i),i.stateNode===null){var d=Ra,T=a.contextType;typeof T=="object"&&T!==null&&(d=ln(T)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ud,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bf(i),T=a.contextType,d.context=typeof T=="object"&&T!==null?ln(T):Ra,d.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(ld(i,a,T,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(T=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),T!==d.state&&ud.enqueueReplaceState(d,d.state,null),ol(i,l,d,h),al(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var A=i.memoizedProps,M=Fs(a,A);d.props=M;var Y=d.context,ie=a.contextType;T=Ra,typeof ie=="object"&&ie!==null&&(T=ln(ie));var se=a.getDerivedStateFromProps;ie=typeof se=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ie||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||Y!==T)&&xy(i,d,l,T),Ir=!1;var $=i.memoizedState;d.state=$,ol(i,l,d,h),al(),Y=i.memoizedState,A||$!==Y||Ir?(typeof se=="function"&&(ld(i,a,se,l),Y=i.memoizedState),(M=Ir||Cy(i,a,M,l,$,Y,T))?(ie||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=T,l=M):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,zf(t,i),T=i.memoizedProps,ie=Fs(a,T),d.props=ie,se=i.pendingProps,$=d.context,Y=a.contextType,M=Ra,typeof Y=="object"&&Y!==null&&(M=ln(Y)),A=a.getDerivedStateFromProps,(Y=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T!==se||$!==M)&&xy(i,d,l,M),Ir=!1,$=i.memoizedState,d.state=$,ol(i,l,d,h),al();var W=i.memoizedState;T!==se||$!==W||Ir||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof A=="function"&&(ld(i,a,A,l),W=i.memoizedState),(ie=Ir||Cy(i,a,ie,l,$,W,M)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,W,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,W,M)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),d.props=l,d.state=W,d.context=M,l=ie):(typeof d.componentDidUpdate!="function"||T===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,yc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=ka(i,t.child,null,h),i.child=ka(i,null,a,h)):Jt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=nr(t,i,h),t}function Fy(t,i,a,l){return Zo(),i.flags|=256,Jt(t,i,a,l),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(t){return{baseLanes:t,cachePool:Ng()}}function md(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Xn),t}function Gy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,T;if((T=d)||(T=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),T&&(h=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ze){if(h?Nr(i):Or(),Ze){var A=At,M;if(M=A){e:{for(M=A,A=bi;M.nodeType!==8;){if(!A){A=null;break e}if(M=si(M.nextSibling),M===null){A=null;break e}}A=M}A!==null?(i.memoizedState={dehydrated:A,treeContext:ks!==null?{id:Xi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},M=xn(18,null,null,0),M.stateNode=A,M.return=i,i.child=M,vn=i,At=null,M=!0):M=!1}M||Us(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Wd(A)?i.lanes=32:i.lanes=536870912,null;tr(i)}return A=l.children,l=l.fallback,h?(Or(),h=i.mode,A=vc({mode:"hidden",children:A},h),l=Vs(l,h,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,h=i.child,h.memoizedState=dd(a),h.childLanes=md(t,T,a),i.memoizedState=fd,l):(Nr(i),pd(i,A))}if(M=t.memoizedState,M!==null&&(A=M.dehydrated,A!==null)){if(d)i.flags&256?(Nr(i),i.flags&=-257,i=gd(t,i,a)):i.memoizedState!==null?(Or(),i.child=t.child,i.flags|=128,i=null):(Or(),h=l.fallback,A=i.mode,l=vc({mode:"visible",children:l.children},A),h=Vs(h,A,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,ka(i,t.child,null,a),l=i.child,l.memoizedState=dd(a),l.childLanes=md(t,T,a),i.memoizedState=fd,i=h);else if(Nr(i),Wd(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var Y=T.dgst;T=Y,l=Error(s(419)),l.stack="",l.digest=T,Jo({value:l,source:null,stack:null}),i=gd(t,i,a)}else if(Kt||el(t,i,a,!1),T=(a&t.childLanes)!==0,Kt||T){if(T=dt,T!==null&&(l=a&-a,l=(l&42)!==0?1:_r(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,wa(t,l),Pn(T,t,l),ky;A.data==="$?"||Pd(),i=gd(t,i,a)}else A.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=M.treeContext,At=si(A.nextSibling),vn=i,Ze=!0,js=null,bi=!1,t!==null&&(Qn[Yn++]=Xi,Qn[Yn++]=Wi,Qn[Yn++]=ks,Xi=t.id,Wi=t.overflow,ks=i),i=pd(i,l.children),i.flags|=4096);return i}return h?(Or(),h=l.fallback,A=i.mode,M=t.child,Y=M.sibling,l=$i(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Y!==null?h=$i(Y,h):(h=Vs(h,A,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,A=t.child.memoizedState,A===null?A=dd(a):(M=A.cachePool,M!==null?(Y=zt._currentValue,M=M.parent!==Y?{parent:Y,pool:Y}:M):M=Ng(),A={baseLanes:A.baseLanes|a,cachePool:M}),h.memoizedState=A,h.childLanes=md(t,T,a),i.memoizedState=fd,l):(Nr(i),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=a,i.memoizedState=null,a)}function pd(t,i){return i=vc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vc(t,i){return t=xn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function gd(t,i,a){return ka(i,t.child,null,a),t=pd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ky(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Pf(t.return,i,a)}function yd(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Qy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Jt(t,i,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ky(t,a,i);else if(t.tag===19)Ky(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ue(qt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&mc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),yd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&mc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}yd(i,!0,a,null,d);break;case"together":yd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Lr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(el(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=$i(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function vd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function NA(t,i,a){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),Rr(i,zt,t.memoizedState.cache),Zo();break;case 27:case 5:_e(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:Rr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Nr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Gy(t,i,a):(Nr(i),t=nr(t,i,a),t!==null?t.sibling:null);Nr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(el(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Qy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(qt,qt.current),l)break;return null;case 22:case 23:return i.lanes=0,By(t,i,a);case 24:Rr(i,zt,t.memoizedState.cache)}return nr(t,i,a)}function Yy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Kt=!0;else{if(!vd(t,a)&&(i.flags&128)===0)return Kt=!1,NA(t,i,a);Kt=(t.flags&131072)!==0}else Kt=!1,Ze&&(i.flags&1048576)!==0&&bg(i,Wu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")If(l)?(t=Fs(l,t),i.tag=1,i=Hy(null,i,l,t,a)):(i.tag=0,i=hd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===X){i.tag=11,i=Ly(null,i,l,t,a);break e}else if(h===I){i.tag=14,i=jy(null,i,l,t,a);break e}}throw i=rt(l)||l,Error(s(306,i,""))}}return i;case 0:return hd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Fs(l,i.pendingProps),Hy(t,i,l,h,a);case 3:e:{if(me(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,zf(t,i),ol(i,l,null,a);var T=i.memoizedState;if(l=T.cache,Rr(i,zt,l),l!==d.cache&&Vf(i,[zt],a,!0),al(),l=T.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Fy(t,i,l,a);break e}else if(l!==h){h=Gn(Error(s(424)),i),Jo(h),i=Fy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(At=si(t.firstChild),vn=i,Ze=!0,js=null,bi=!0,a=Ry(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zo(),l===h){i=nr(t,i,a);break e}Jt(t,i,l,a)}i=i.child}return i;case 26:return yc(t,i),t===null?(a=Zv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ze||(a=i.type,t=i.pendingProps,l=Oc(de.current).createElement(a),l[jt]=i,l[Dt]=t,tn(l,a,t),wt(l),i.stateNode=l):i.memoizedState=Zv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return _e(i),t===null&&Ze&&(l=i.stateNode=$v(i.type,i.pendingProps,de.current),vn=i,bi=!0,h=At,zr(i.type)?(Zd=h,At=si(l.firstChild)):At=h),Jt(t,i,i.pendingProps.children,a),yc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ze&&((h=l=At)&&(l=sb(l,i.type,i.pendingProps,bi),l!==null?(i.stateNode=l,vn=i,At=si(l.firstChild),bi=!1,h=!0):h=!1),h||Us(i)),_e(i),h=i.type,d=i.pendingProps,T=t!==null?t.memoizedProps:null,l=d.children,Yd(h,d)?l=null:T!==null&&Yd(h,T)&&(i.flags|=32),i.memoizedState!==null&&(h=Qf(t,i,AA,null,null,a),xl._currentValue=h),yc(t,i),Jt(t,i,l,a),i.child;case 6:return t===null&&Ze&&((t=a=At)&&(a=ab(a,i.pendingProps,bi),a!==null?(i.stateNode=a,vn=i,At=null,t=!0):t=!1),t||Us(i)),null;case 13:return Gy(t,i,a);case 4:return me(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ka(i,null,l,a):Jt(t,i,l,a),i.child;case 11:return Ly(t,i,i.type,i.pendingProps,a);case 7:return Jt(t,i,i.pendingProps,a),i.child;case 8:return Jt(t,i,i.pendingProps.children,a),i.child;case 12:return Jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Rr(i,i.type,l.value),Jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,zs(i),h=ln(h),l=l(h),i.flags|=1,Jt(t,i,l,a),i.child;case 14:return jy(t,i,i.type,i.pendingProps,a);case 15:return Uy(t,i,i.type,i.pendingProps,a);case 19:return Qy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=vc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=$i(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return By(t,i,a);case 24:return zs(i),l=ln(zt),t===null?(h=jf(),h===null&&(h=dt,d=kf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Bf(i),Rr(i,zt,h)):((t.lanes&a)!==0&&(zf(t,i),ol(i,null,null,a),al()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Rr(i,zt,l)):(l=d.cache,Rr(i,zt,l),l!==h.cache&&Vf(i,[zt],a,!0))),Jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ir(t){t.flags|=4}function $y(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!i_(i)){if(i=$n.current,i!==null&&((Ge&4194048)===Ge?wi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||i!==wi))throw rl=Uf,Og;t.flags|=8192}}function _c(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?No():536870912,t.lanes|=i,Ba|=i)}function ml(t,i){if(!Ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Tt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function OA(t,i,a){var l=i.pendingProps;switch(Nf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(i),null;case 1:return Tt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(zt),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wo(i)?ir(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ig())),Tt(i),null;case 26:return a=i.memoizedState,t===null?(ir(i),a!==null?(Tt(i),$y(i,a)):(Tt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ir(i),Tt(i),$y(i,a)):(Tt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ir(i),Tt(i),i.flags&=-16777217),null;case 27:mt(i),a=de.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Tt(i),null}t=ye.current,Wo(i)?wg(i):(t=$v(h,l,a),i.stateNode=t,ir(i))}return Tt(i),null;case 5:if(mt(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Tt(i),null}if(t=ye.current,Wo(i))wg(i);else{switch(h=Oc(de.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[jt]=i,t[Dt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(tn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ir(i)}}return Tt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ir(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=de.current,Wo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=vn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[jt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||qv(t.nodeValue,a)),t||Us(i)}else t=Oc(t).createTextNode(l),t[jt]=i,i.stateNode=t}return Tt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Wo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[jt]=i}else Zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),h=!1}else h=Ig(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(tr(i),i):(tr(i),null)}if(tr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),Tt(i),null;case 4:return Ne(),t===null&&Hd(i.stateNode.containerInfo),Tt(i),null;case 10:return Ji(i.type),Tt(i),null;case 19:if(ce(qt),h=i.memoizedState,h===null)return Tt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)ml(h,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=mc(t),d!==null){for(i.flags|=128,ml(h,!1),t=d.updateQueue,i.updateQueue=t,_c(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Ag(a,t),a=a.sibling;return ue(qt,qt.current&1|2),i.child}t=t.sibling}h.tail!==null&&Et()>Sc&&(i.flags|=128,l=!0,ml(h,!1),i.lanes=4194304)}else{if(!l)if(t=mc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,_c(i,t),ml(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ze)return Tt(i),null}else 2*Et()-h.renderingStartTime>Sc&&a!==536870912&&(i.flags|=128,l=!0,ml(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Et(),i.sibling=null,t=qt.current,ue(qt,l?t&1|2:t&1),i):(Tt(i),null);case 22:case 23:return tr(i),Gf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Tt(i),i.subtreeFlags&6&&(i.flags|=8192)):Tt(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ce(qs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(zt),Tt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function MA(t,i){switch(Nf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ji(zt),Ne(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return mt(i),null;case 13:if(tr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Zo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ce(qt),null;case 4:return Ne(),null;case 10:return Ji(i.type),null;case 22:case 23:return tr(i),Gf(),t!==null&&ce(qs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ji(zt),null;case 25:return null;default:return null}}function Xy(t,i){switch(Nf(i),i.tag){case 3:Ji(zt),Ne();break;case 26:case 27:case 5:mt(i);break;case 4:Ne();break;case 13:tr(i);break;case 19:ce(qt);break;case 10:Ji(i.type);break;case 22:case 23:tr(i),Gf(),t!==null&&ce(qs);break;case 24:Ji(zt)}}function pl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,T=a.inst;l=d(),T.destroy=l}a=a.next}while(a!==h)}}catch(A){ct(i,i.return,A)}}function Mr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,h=i;var M=a,Y=A;try{Y()}catch(ie){ct(h,M,ie)}}}l=l.next}while(l!==d)}}catch(ie){ct(i,i.return,ie)}}function Wy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{jg(i,a)}catch(l){ct(t,t.return,l)}}}function Zy(t,i,a){a.props=Fs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ct(t,i,l)}}function gl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ct(t,i,h)}}function Ri(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ct(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ct(t,i,h)}else a.current=null}function Jy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ct(t,t.return,h)}}function _d(t,i,a){try{var l=t.stateNode;eb(l,t.type,a,i),l[Dt]=i}catch(h){ct(t,t.return,h)}}function ev(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zr(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ev(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Nc));else if(l!==4&&(l===27&&zr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Td(t,i,a),t=t.sibling;t!==null;)Td(t,i,a),t=t.sibling}function Ec(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&zr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ec(t,i,a),t=t.sibling;t!==null;)Ec(t,i,a),t=t.sibling}function tv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);tn(i,l,a),i[jt]=t,i[Dt]=a}catch(d){ct(t,t.return,d)}}var rr=!1,It=!1,Sd=!1,nv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function PA(t,i){if(t=t.containerInfo,Kd=jc,t=dg(t),Ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var T=0,A=-1,M=-1,Y=0,ie=0,se=t,$=null;t:for(;;){for(var W;se!==a||h!==0&&se.nodeType!==3||(A=T+h),se!==d||l!==0&&se.nodeType!==3||(M=T+l),se.nodeType===3&&(T+=se.nodeValue.length),(W=se.firstChild)!==null;)$=se,se=W;for(;;){if(se===t)break t;if($===a&&++Y===h&&(A=T),$===d&&++ie===l&&(M=T),(W=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=W}a=A===-1||M===-1?null:{start:A,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:t,selectionRange:a},jc=!1,Qt=i;Qt!==null;)if(i=Qt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Qt=t;else for(;Qt!==null;){switch(i=Qt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xe=Fs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){ct(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Xd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Qt=t;break}Qt=i.return}}function iv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Pr(t,a),l&4&&pl(5,a);break;case 1:if(Pr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(T){ct(a,a.return,T)}else{var h=Fs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){ct(a,a.return,T)}}l&64&&Wy(a),l&512&&gl(a,a.return);break;case 3:if(Pr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{jg(t,i)}catch(T){ct(a,a.return,T)}}break;case 27:i===null&&l&4&&tv(a);case 26:case 5:Pr(t,a),i===null&&l&4&&Jy(a),l&512&&gl(a,a.return);break;case 12:Pr(t,a);break;case 13:Pr(t,a),l&4&&av(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=HA.bind(null,a),ob(t,a))));break;case 22:if(l=a.memoizedState!==null||rr,!l){i=i!==null&&i.memoizedState!==null||It,h=rr;var d=It;rr=l,(It=i)&&!d?Vr(t,a,(a.subtreeFlags&8772)!==0):Pr(t,a),rr=h,It=d}break;case 30:break;default:Pr(t,a)}}function rv(t){var i=t.alternate;i!==null&&(t.alternate=null,rv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Sr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,Sn=!1;function sr(t,i,a){for(a=a.child;a!==null;)sv(t,i,a),a=a.sibling}function sv(t,i,a){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:It||Ri(a,i),sr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Ri(a,i);var l=vt,h=Sn;zr(a.type)&&(vt=a.stateNode,Sn=!1),sr(t,i,a),wl(a.stateNode),vt=l,Sn=h;break;case 5:It||Ri(a,i);case 6:if(l=vt,h=Sn,vt=null,sr(t,i,a),vt=l,Sn=h,vt!==null)if(Sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(d){ct(a,i,d)}else try{vt.removeChild(a.stateNode)}catch(d){ct(a,i,d)}break;case 18:vt!==null&&(Sn?(t=vt,Qv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ml(t)):Qv(vt,a.stateNode));break;case 4:l=vt,h=Sn,vt=a.stateNode.containerInfo,Sn=!0,sr(t,i,a),vt=l,Sn=h;break;case 0:case 11:case 14:case 15:It||Mr(2,a,i),It||Mr(4,a,i),sr(t,i,a);break;case 1:It||(Ri(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Zy(a,i,l)),sr(t,i,a);break;case 21:sr(t,i,a);break;case 22:It=(l=It)||a.memoizedState!==null,sr(t,i,a),It=l;break;default:sr(t,i,a)}}function av(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(a){ct(i,i.return,a)}}function VA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new nv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new nv),i;default:throw Error(s(435,t.tag))}}function Ad(t,i){var a=VA(t);i.forEach(function(l){var h=FA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Dn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(zr(A.type)){vt=A.stateNode,Sn=!1;break e}break;case 5:vt=A.stateNode,Sn=!1;break e;case 3:case 4:vt=A.stateNode.containerInfo,Sn=!0;break e}A=A.return}if(vt===null)throw Error(s(160));sv(d,T,h),vt=null,Sn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ov(i,t),i=i.sibling}var ri=null;function ov(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(i,t),Nn(t),l&4&&(Mr(3,t,t.return),pl(3,t),Mr(5,t,t.return));break;case 1:Dn(i,t),Nn(t),l&512&&(It||a===null||Ri(a,a.return)),l&64&&rr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ri;if(Dn(i,t),Nn(t),l&512&&(It||a===null||Ri(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[_s]||d[jt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[jt]=t,wt(d),l=d;break e;case"link":var T=t_("link","href",h).get(l+(a.href||""));if(T){for(var A=0;A<T.length;A++)if(d=T[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(A,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(T=t_("meta","content",h).get(l+(a.content||""))){for(A=0;A<T.length;A++)if(d=T[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(A,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[jt]=t,wt(d),l=d}t.stateNode=l}else n_(h,t.type,t.stateNode);else t.stateNode=e_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?n_(h,t.type,t.stateNode):e_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&_d(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,t),Nn(t),l&512&&(It||a===null||Ri(a,a.return)),a!==null&&l&4&&_d(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,t),Nn(t),l&512&&(It||a===null||Ri(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(W){ct(t,t.return,W)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,_d(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Sd=!0);break;case 6:if(Dn(i,t),Nn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(W){ct(t,t.return,W)}}break;case 3:if(Vc=null,h=ri,ri=Mc(i.containerInfo),Dn(i,t),ri=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(i.containerInfo)}catch(W){ct(t,t.return,W)}Sd&&(Sd=!1,lv(t));break;case 4:l=ri,ri=Mc(t.stateNode.containerInfo),Dn(i,t),Nn(t),ri=l;break;case 12:Dn(i,t),Nn(t);break;case 13:Dn(i,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xd=Et()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ad(t,l)));break;case 22:h=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Y=rr,ie=It;if(rr=Y||h,It=ie||M,Dn(i,t),It=ie,rr=Y,Nn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||M||rr||It||Gs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){M=a=i;try{if(d=M.stateNode,h)T=d.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=M.stateNode;var se=M.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;A.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(W){ct(M,M.return,W)}}}else if(i.tag===6){if(a===null){M=i;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(W){ct(M,M.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ad(t,a))));break;case 19:Dn(i,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ad(t,l)));break;case 30:break;case 21:break;default:Dn(i,t),Nn(t)}}function Nn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(ev(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Ed(t);Ec(t,d,h);break;case 5:var T=a.stateNode;a.flags&32&&(zn(T,""),a.flags&=-33);var A=Ed(t);Ec(t,A,T);break;case 3:case 4:var M=a.stateNode.containerInfo,Y=Ed(t);Td(t,Y,M);break;default:throw Error(s(161))}}catch(ie){ct(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function lv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;lv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Pr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)iv(t,i.alternate,i),i=i.sibling}function Gs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Mr(4,i,i.return),Gs(i);break;case 1:Ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Zy(i,i.return,a),Gs(i);break;case 27:wl(i.stateNode);case 26:case 5:Ri(i,i.return),Gs(i);break;case 22:i.memoizedState===null&&Gs(i);break;case 30:Gs(i);break;default:Gs(i)}t=t.sibling}}function Vr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,T=d.flags;switch(d.tag){case 0:case 11:case 15:Vr(h,d,a),pl(4,d);break;case 1:if(Vr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Y){ct(l,l.return,Y)}if(l=d,h=l.updateQueue,h!==null){var A=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Lg(M[h],A)}catch(Y){ct(l,l.return,Y)}}a&&T&64&&Wy(d),gl(d,d.return);break;case 27:tv(d);case 26:case 5:Vr(h,d,a),a&&l===null&&T&4&&Jy(d),gl(d,d.return);break;case 12:Vr(h,d,a);break;case 13:Vr(h,d,a),a&&T&4&&av(h,d);break;case 22:d.memoizedState===null&&Vr(h,d,a),gl(d,d.return);break;case 30:break;default:Vr(h,d,a)}i=i.sibling}}function bd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&tl(a))}function wd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t))}function Ii(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)uv(t,i,a,l),i=i.sibling}function uv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ii(t,i,a,l),h&2048&&pl(9,i);break;case 1:Ii(t,i,a,l);break;case 3:Ii(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t)));break;case 12:if(h&2048){Ii(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,T=d.id,A=d.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){ct(i,i.return,M)}}else Ii(t,i,a,l);break;case 13:Ii(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,T=i.alternate,i.memoizedState!==null?d._visibility&2?Ii(t,i,a,l):yl(t,i):d._visibility&2?Ii(t,i,a,l):(d._visibility|=2,La(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&bd(T,i);break;case 24:Ii(t,i,a,l),h&2048&&wd(i.alternate,i);break;default:Ii(t,i,a,l)}}function La(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,T=i,A=a,M=l,Y=T.flags;switch(T.tag){case 0:case 11:case 15:La(d,T,A,M,h),pl(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&2?La(d,T,A,M,h):yl(d,T):(ie._visibility|=2,La(d,T,A,M,h)),h&&Y&2048&&bd(T.alternate,T);break;case 24:La(d,T,A,M,h),h&&Y&2048&&wd(T.alternate,T);break;default:La(d,T,A,M,h)}i=i.sibling}}function yl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:yl(a,l),h&2048&&bd(l.alternate,l);break;case 24:yl(a,l),h&2048&&wd(l.alternate,l);break;default:yl(a,l)}i=i.sibling}}var vl=8192;function ja(t){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)cv(t),t=t.sibling}function cv(t){switch(t.tag){case 26:ja(t),t.flags&vl&&t.memoizedState!==null&&Eb(ri,t.memoizedState,t.memoizedProps);break;case 5:ja(t);break;case 3:case 4:var i=ri;ri=Mc(t.stateNode.containerInfo),ja(t),ri=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=vl,vl=16777216,ja(t),vl=i):ja(t));break;default:ja(t)}}function hv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function _l(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,dv(l,t)}hv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fv(t),t=t.sibling}function fv(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&Mr(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Tc(t)):_l(t);break;default:_l(t)}}function Tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,dv(l,t)}hv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Mr(8,i,i.return),Tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(i));break;default:Tc(i)}t=t.sibling}}function dv(t,i){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,d=l.return;if(rv(l),l===a){Qt=null;break e}if(h!==null){h.return=d,Qt=h;break e}Qt=d}}}var kA={getCacheForType:function(t){var i=ln(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},LA=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,je=null,Ge=0,nt=0,On=null,kr=!1,Ua=!1,Rd=!1,ar=0,bt=0,Lr=0,Ks=0,Id=0,Xn=0,Ba=0,El=null,An=null,Cd=!1,xd=0,Sc=1/0,Ac=null,jr=null,en=0,Ur=null,za=null,qa=0,Dd=0,Nd=null,mv=null,Tl=0,Od=null;function Mn(){if((tt&2)!==0&&Ge!==0)return Ge&-Ge;if(te.T!==null){var t=xa;return t!==0?t:Ud()}return Er()}function pv(){Xn===0&&(Xn=(Ge&536870912)===0||Ze?Do():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Xn}function Pn(t,i,a){(t===dt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(Ha(t,0),Br(t,Ge,Xn,!1)),ji(t,a),((tt&2)===0||t!==dt)&&(t===dt&&((tt&2)===0&&(Ks|=a),bt===4&&Br(t,Ge,Xn,!1)),Ci(t))}function gv(t,i,a){if((tt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||vs(t,i),h=l?BA(t,i):Vd(t,i,!0),d=l;do{if(h===0){Ua&&!l&&Br(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!jA(a)){h=Vd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=t;h=El;var M=A.current.memoizedState.isDehydrated;if(M&&(Ha(A,T).flags|=256),T=Vd(A,T,!1),T!==2){if(Rd&&!M){A.errorRecoveryDisabledLanes|=d,Ks|=d,h=4;break e}d=An,An=h,d!==null&&(An===null?An=d:An.push.apply(An,d))}h=T}if(d=!1,h!==2)continue}}if(h===1){Ha(t,0),Br(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Br(l,i,Xn,!kr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=xd+300-Et(),10<h)){if(Br(l,i,Xn,!kr),aa(l,0,!0)!==0)break e;l.timeoutHandle=Gv(yv.bind(null,l,a,An,Ac,Cd,i,Xn,Ks,Ba,kr,d,2,-0,0),h);break e}yv(l,a,An,Ac,Cd,i,Xn,Ks,Ba,kr,d,0,-0,0)}}break}while(!0);Ci(t)}function yv(t,i,a,l,h,d,T,A,M,Y,ie,se,$,W){if(t.timeoutHandle=-1,se=i.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Cl={stylesheets:null,count:0,unsuspend:_b},cv(i),se=Tb(),se!==null)){t.cancelPendingCommit=se(bv.bind(null,t,i,d,a,l,h,T,A,M,ie,1,$,W)),Br(t,d,T,!Y);return}bv(t,i,d,a,l,h,T,A,M)}function jA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Br(t,i,a,l){i&=~Id,i&=~Ks,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-xt(h),T=1<<d;l[d]=-1,h&=~T}a!==0&&di(t,a,i)}function bc(){return(tt&6)===0?(Sl(0),!1):!0}function Md(){if(je!==null){if(nt===0)var t=je.return;else t=je,Zi=Bs=null,Xf(t),Va=null,fl=0,t=je;for(;t!==null;)Xy(t.alternate,t),t=t.return;je=null}}function Ha(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,nb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Md(),dt=t,je=a=$i(t.current,null),Ge=i,nt=0,On=null,kr=!1,Ua=vs(t,i),Rd=!1,Ba=Xn=Id=Ks=Lr=bt=0,An=El=null,Cd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-xt(l),d=1<<h;i|=t[h],l&=~d}return ar=i,Ku(),a}function vv(t,i){Ve=null,te.H=hc,i===il||i===tc?(i=Vg(),nt=3):i===Og?(i=Vg(),nt=4):nt=i===ky?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,je===null&&(bt=1,gc(t,Gn(i,t.current)))}function _v(){var t=te.H;return te.H=hc,t===null?hc:t}function Ev(){var t=te.A;return te.A=kA,t}function Pd(){bt=4,kr||(Ge&4194048)!==Ge&&$n.current!==null||(Ua=!0),(Lr&134217727)===0&&(Ks&134217727)===0||dt===null||Br(dt,Ge,Xn,!1)}function Vd(t,i,a){var l=tt;tt|=2;var h=_v(),d=Ev();(dt!==t||Ge!==i)&&(Ac=null,Ha(t,i)),i=!1;var T=bt;e:do try{if(nt!==0&&je!==null){var A=je,M=On;switch(nt){case 8:Md(),T=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(i=!0);var Y=nt;if(nt=0,On=null,Fa(t,A,M,Y),a&&Ua){T=0;break e}break;default:Y=nt,nt=0,On=null,Fa(t,A,M,Y)}}UA(),T=bt;break}catch(ie){vv(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Zi=Bs=null,tt=l,te.H=h,te.A=d,je===null&&(dt=null,Ge=0,Ku()),T}function UA(){for(;je!==null;)Tv(je)}function BA(t,i){var a=tt;tt|=2;var l=_v(),h=Ev();dt!==t||Ge!==i?(Ac=null,Sc=Et()+500,Ha(t,i)):Ua=vs(t,i);e:do try{if(nt!==0&&je!==null){i=je;var d=On;t:switch(nt){case 1:nt=0,On=null,Fa(t,i,d,1);break;case 2:case 9:if(Mg(d)){nt=0,On=null,Sv(i);break}i=function(){nt!==2&&nt!==9||dt!==t||(nt=7),Ci(t)},d.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Mg(d)?(nt=0,On=null,Sv(i)):(nt=0,On=null,Fa(t,i,d,7));break;case 5:var T=null;switch(je.tag){case 26:T=je.memoizedState;case 5:case 27:var A=je;if(!T||i_(T)){nt=0,On=null;var M=A.sibling;if(M!==null)je=M;else{var Y=A.return;Y!==null?(je=Y,wc(Y)):je=null}break t}}nt=0,On=null,Fa(t,i,d,5);break;case 6:nt=0,On=null,Fa(t,i,d,6);break;case 8:Md(),bt=6;break e;default:throw Error(s(462))}}zA();break}catch(ie){vv(t,ie)}while(!0);return Zi=Bs=null,te.H=l,te.A=h,tt=a,je!==null?0:(dt=null,Ge=0,Ku(),bt)}function zA(){for(;je!==null&&!Rn();)Tv(je)}function Tv(t){var i=Yy(t.alternate,t,ar);t.memoizedProps=t.pendingProps,i===null?wc(t):je=i}function Sv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=qy(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=qy(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Xf(i);default:Xy(a,i),i=je=Ag(i,ar),i=Yy(a,i,ar)}t.memoizedProps=t.pendingProps,i===null?wc(t):je=i}function Fa(t,i,a,l){Zi=Bs=null,Xf(i),Va=null,fl=0;var h=i.return;try{if(DA(t,h,i,a,Ge)){bt=1,gc(t,Gn(a,t.current)),je=null;return}}catch(d){if(h!==null)throw je=h,d;bt=1,gc(t,Gn(a,t.current)),je=null;return}i.flags&32768?(Ze||l===1?t=!0:Ua||(Ge&536870912)!==0?t=!1:(kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),Av(i,t)):wc(i)}function wc(t){var i=t;do{if((i.flags&32768)!==0){Av(i,kr);return}t=i.return;var a=OA(i.alternate,i,ar);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=t}while(i!==null);bt===0&&(bt=5)}function Av(t,i){do{var a=MA(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);bt=6,je=null}function bv(t,i,a,l,h,d,T,A,M){t.cancelPendingCommit=null;do Rc();while(en!==0);if((tt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=wf,Oo(t,a,d,T,A,M),t===dt&&(je=dt=null,Ge=0),za=i,Ur=t,qa=a,Dd=d,Nd=h,mv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,GA(on,function(){return xv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,h=ne.p,ne.p=2,T=tt,tt|=4;try{PA(t,i,a)}finally{tt=T,ne.p=h,te.T=l}}en=1,wv(),Rv(),Iv()}}function wv(){if(en===1){en=0;var t=Ur,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var l=ne.p;ne.p=2;var h=tt;tt|=4;try{ov(i,t);var d=Qd,T=dg(t.containerInfo),A=d.focusedElem,M=d.selectionRange;if(T!==A&&A&&A.ownerDocument&&fg(A.ownerDocument.documentElement,A)){if(M!==null&&Ef(A)){var Y=M.start,ie=M.end;if(ie===void 0&&(ie=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(ie,A.value.length);else{var se=A.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var W=$.getSelection(),xe=A.textContent.length,be=Math.min(M.start,xe),lt=M.end===void 0?be:Math.min(M.end,xe);!W.extend&&be>lt&&(T=lt,lt=be,be=T);var H=hg(A,be),B=hg(A,lt);if(H&&B&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var K=se.createRange();K.setStart(H.node,H.offset),W.removeAllRanges(),be>lt?(W.addRange(K),W.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),W.addRange(K))}}}}for(se=[],W=A;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<se.length;A++){var re=se[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}jc=!!Kd,Qd=Kd=null}finally{tt=h,ne.p=l,te.T=a}}t.current=i,en=2}}function Rv(){if(en===2){en=0;var t=Ur,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var l=ne.p;ne.p=2;var h=tt;tt|=4;try{iv(t,i.alternate,i)}finally{tt=h,ne.p=l,te.T=a}}en=3}}function Iv(){if(en===4||en===3){en=0,an();var t=Ur,i=za,a=qa,l=mv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?en=5:(en=0,za=Ur=null,Cv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(jr=null),oa(a),i=i.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ft,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=te.T,h=ne.p,ne.p=2,te.T=null;try{for(var d=t.onRecoverableError,T=0;T<l.length;T++){var A=l[T];d(A.value,{componentStack:A.stack})}}finally{te.T=i,ne.p=h}}(qa&3)!==0&&Rc(),Ci(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Od?Tl++:(Tl=0,Od=t):Tl=0,Sl(0)}}function Cv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,tl(i)))}function Rc(t){return wv(),Rv(),Iv(),xv()}function xv(){if(en!==5)return!1;var t=Ur,i=Dd;Dd=0;var a=oa(qa),l=te.T,h=ne.p;try{ne.p=32>a?32:a,te.T=null,a=Nd,Nd=null;var d=Ur,T=qa;if(en=0,za=Ur=null,qa=0,(tt&6)!==0)throw Error(s(331));var A=tt;if(tt|=4,fv(d.current),uv(d,d.current,T,a),tt=A,Sl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{ne.p=h,te.T=l,Cv(t,i)}}function Dv(t,i,a){i=Gn(a,i),i=cd(t.stateNode,i,2),t=xr(t,i,2),t!==null&&(ji(t,2),Ci(t))}function ct(t,i,a){if(t.tag===3)Dv(t,t,a);else for(;i!==null;){if(i.tag===3){Dv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(jr===null||!jr.has(l))){t=Gn(a,t),a=Py(2),l=xr(i,a,2),l!==null&&(Vy(a,l,i,t),ji(l,2),Ci(l));break}}i=i.return}}function kd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new LA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Rd=!0,h.add(a),t=qA.bind(null,t,i,a),i.then(t,t))}function qA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Ge&a)===a&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>Et()-xd?(tt&2)===0&&Ha(t,0):Id|=a,Ba===Ge&&(Ba=0)),Ci(t)}function Nv(t,i){i===0&&(i=No()),t=wa(t,i),t!==null&&(ji(t,i),Ci(t))}function HA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Nv(t,a)}function FA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Nv(t,a)}function GA(t,i){return ut(t,i)}var Ic=null,Ga=null,Ld=!1,Cc=!1,jd=!1,Qs=0;function Ci(t){t!==Ga&&t.next===null&&(Ga===null?Ic=Ga=t:Ga=Ga.next=t),Cc=!0,Ld||(Ld=!0,QA())}function Sl(t,i){if(!jd&&Cc){jd=!0;do for(var a=!1,l=Ic;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var T=l.suspendedLanes,A=l.pingedLanes;d=(1<<31-xt(42|t)+1)-1,d&=h&~(T&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Vv(l,d))}else d=Ge,d=aa(l,l===dt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||vs(l,d)||(a=!0,Vv(l,d));l=l.next}while(a);jd=!1}}function KA(){Ov()}function Ov(){Cc=Ld=!1;var t=0;Qs!==0&&(tb()&&(t=Qs),Qs=0);for(var i=Et(),a=null,l=Ic;l!==null;){var h=l.next,d=Mv(l,i);d===0?(l.next=null,a===null?Ic=h:a.next=h,h===null&&(Ga=a)):(a=l,(t!==0||(d&3)!==0)&&(Cc=!0)),l=h}Sl(t)}function Mv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var T=31-xt(d),A=1<<T,M=h[T];M===-1?((A&a)===0||(A&l)!==0)&&(h[T]=xo(A,i)):M<=i&&(t.expiredLanes|=A),d&=~A}if(i=dt,a=Ge,a=aa(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ht(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||vs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ht(l),oa(a)){case 2:case 8:a=jn;break;case 32:a=on;break;case 268435456:a=Be;break;default:a=on}return l=Pv.bind(null,t),a=ut(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ht(l),t.callbackPriority=2,t.callbackNode=null,2}function Pv(t,i){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Rc()&&t.callbackNode!==a)return null;var l=Ge;return l=aa(t,t===dt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gv(t,l,i),Mv(t,Et()),t.callbackNode!=null&&t.callbackNode===a?Pv.bind(null,t):null)}function Vv(t,i){if(Rc())return null;gv(t,i,!0)}function QA(){ib(function(){(tt&6)!==0?ut(En,KA):Ov()})}function Ud(){return Qs===0&&(Qs=Do()),Qs}function kv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function Lv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function YA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=kv((h[Dt]||null).action),T=l.submitter;T&&(i=(i=T[Dt]||null)?kv(i.formAction):T.getAttribute("formAction"),i!==null&&(d=i,T=null));var A=new ma("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qs!==0){var M=T?Lv(h,T):new FormData(h);sd(a,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(A.preventDefault(),M=T?Lv(h,T):new FormData(h),sd(a,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var Bd=0;Bd<bf.length;Bd++){var zd=bf[Bd],$A=zd.toLowerCase(),XA=zd[0].toUpperCase()+zd.slice(1);ii($A,"on"+XA)}ii(gg,"onAnimationEnd"),ii(yg,"onAnimationIteration"),ii(vg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(dA,"onTransitionRun"),ii(mA,"onTransitionStart"),ii(pA,"onTransitionCancel"),ii(_g,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function jv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var T=l.length-1;0<=T;T--){var A=l[T],M=A.instance,Y=A.currentTarget;if(A=A.listener,M!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=Y;try{d(h)}catch(ie){pc(ie)}h.currentTarget=null,d=M}else for(T=0;T<l.length;T++){if(A=l[T],M=A.instance,Y=A.currentTarget,A=A.listener,M!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=Y;try{d(h)}catch(ie){pc(ie)}h.currentTarget=null,d=M}}}}function Ue(t,i){var a=i[Po];a===void 0&&(a=i[Po]=new Set);var l=t+"__bubble";a.has(l)||(Uv(i,t,2,!1),a.add(l))}function qd(t,i,a){var l=0;i&&(l|=4),Uv(a,t,l,i)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Hd(t){if(!t[xc]){t[xc]=!0,Vo.forEach(function(a){a!=="selectionchange"&&(WA.has(a)||qd(a,!1,t),qd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[xc]||(i[xc]=!0,qd("selectionchange",!1,i))}}function Uv(t,i,a,l){switch(u_(i)){case 2:var h=bb;break;case 8:h=wb;break;default:h=im}a=h.bind(null,i,a,t),h=void 0,!Hn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Fd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===h)break;if(T===4)for(T=l.return;T!==null;){var M=T.tag;if((M===3||M===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;A!==null;){if(T=Ui(A),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){l=d=T;continue e}A=A.parentNode}}l=l.return}Nu(function(){var Y=d,ie=qn(a),se=[];e:{var $=Eg.get(t);if($!==void 0){var W=ma,xe=t;switch(t){case"keypress":if(_i(a)===0)break e;case"keydown":case"keyup":W=Ea;break;case"focusin":xe="focus",W=ya;break;case"focusout":xe="blur",W=ya;break;case"beforeblur":case"afterblur":W=ya;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Uu;break;case gg:case yg:case vg:W=va;break;case _g:W=zu;break;case"scroll":case"scrollend":W=Ou;break;case"wheel":W=Ta;break;case"copy":case"cut":case"paste":W=_a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Qo;break;case"toggle":case"beforetoggle":W=Hu}var be=(i&4)!==0,lt=!be&&(t==="scroll"||t==="scrollend"),H=be?$!==null?$+"Capture":null:$;be=[];for(var B=Y,K;B!==null;){var re=B;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||H===null||(re=Rs(B,H),re!=null&&be.push(bl(B,re,K))),lt)break;B=B.return}0<be.length&&($=new W($,xe,null,a,ie),se.push({event:$,listeners:be}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",$&&a!==Hi&&(xe=a.relatedTarget||a.fromElement)&&(Ui(xe)||xe[Bn]))break e;if((W||$)&&($=ie.window===ie?ie:($=ie.ownerDocument)?$.defaultView||$.parentWindow:window,W?(xe=a.relatedTarget||a.toElement,W=Y,xe=xe?Ui(xe):null,xe!==null&&(lt=u(xe),be=xe.tag,xe!==lt||be!==5&&be!==27&&be!==6)&&(xe=null)):(W=null,xe=Y),W!==xe)){if(be=Fn,re="onMouseLeave",H="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(be=Qo,re="onPointerLeave",H="onPointerEnter",B="pointer"),lt=W==null?$:pi(W),K=xe==null?$:pi(xe),$=new be(re,B+"leave",W,a,ie),$.target=lt,$.relatedTarget=K,re=null,Ui(ie)===Y&&(be=new be(H,B+"enter",xe,a,ie),be.target=K,be.relatedTarget=lt,re=be),lt=re,W&&xe)t:{for(be=W,H=xe,B=0,K=be;K;K=Ka(K))B++;for(K=0,re=H;re;re=Ka(re))K++;for(;0<B-K;)be=Ka(be),B--;for(;0<K-B;)H=Ka(H),K--;for(;B--;){if(be===H||H!==null&&be===H.alternate)break t;be=Ka(be),H=Ka(H)}be=null}else be=null;W!==null&&Bv(se,$,W,be,!1),xe!==null&&lt!==null&&Bv(se,lt,xe,be,!0)}}e:{if($=Y?pi(Y):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var ve=sg;else if(Bt($))if(ag)ve=cA;else{ve=lA;var Le=oA}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Bo(Y.elementType)&&(ve=sg):ve=uA;if(ve&&(ve=ve(t,Y))){Yi(se,ve,a,ie);break e}Le&&Le(t,$,Y),t==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&br($,"number",$.value)}switch(Le=Y?pi(Y):window,t){case"focusin":(Bt(Le)||Le.contentEditable==="true")&&(Sa=Le,Tf=Y,Xo=null);break;case"focusout":Xo=Tf=Sa=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,mg(se,a,ie);break;case"selectionchange":if(fA)break;case"keydown":case"keyup":mg(se,a,ie)}var Te;if(Si)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else He?ee(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(_&&a.locale!=="ko"&&(He||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&He&&(Te=qo()):(vi=ie,wr="value"in vi?vi.value:vi.textContent,He=!0)),Le=Dc(Y,Re),0<Le.length&&(Re=new Go(Re,t,null,a,ie),se.push({event:Re,listeners:Le}),Te?Re.data=Te:(Te=fe(a),Te!==null&&(Re.data=Te)))),(Te=y?Ut(t,a):Fe(t,a))&&(Re=Dc(Y,"onBeforeInput"),0<Re.length&&(Le=new Go("onBeforeInput","beforeinput",null,a,ie),se.push({event:Le,listeners:Re}),Le.data=Te)),YA(se,t,Y,a,ie)}jv(se,i)})}function bl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Dc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Rs(t,a),h!=null&&l.unshift(bl(t,h,d)),h=Rs(t,i),h!=null&&l.push(bl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,i,a,l,h){for(var d=i._reactName,T=[];a!==null&&a!==l;){var A=a,M=A.alternate,Y=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||Y===null||(M=Y,h?(Y=Rs(a,d),Y!=null&&T.unshift(bl(a,Y,M))):h||(Y=Rs(a,d),Y!=null&&T.push(bl(a,Y,M)))),a=a.return}T.length!==0&&t.push({event:i,listeners:T})}var ZA=/\r\n?/g,JA=/\u0000|\uFFFD/g;function zv(t){return(typeof t=="string"?t:""+t).replace(ZA,`
`).replace(JA,"")}function qv(t,i){return i=zv(i),zv(t)===i}function Nc(){}function ot(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&zn(t,""+l);break;case"className":gi(t,"class",l);break;case"tabIndex":gi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":gi(t,a,l);break;case"style":Uo(t,l,d);break;case"data":if(i!=="object"){gi(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ot(t,i,"name",h.name,h,null),ot(t,i,"formEncType",h.formEncType,h,null),ot(t,i,"formMethod",h.formMethod,h,null),ot(t,i,"formTarget",h.formTarget,h,null)):(ot(t,i,"encType",h.encType,h,null),ot(t,i,"method",h.method,h,null),ot(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Ar(t,"popover",l);break;case"xlinkActuate":Wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Wt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Wt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Wt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Wt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ar(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mf.get(a)||a,Ar(t,a,l))}}function Gd(t,i,a,l,h,d){switch(a){case"style":Uo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!la.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Dt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ar(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var T=a[d];if(T!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,d,T,a,null)}}h&&ot(t,i,"srcSet",a.srcSet,a,null),l&&ot(t,i,"src",a.src,a,null);return;case"input":Ue("invalid",t);var A=d=T=h=null,M=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var ie=a[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":T=ie;break;case"checked":M=ie;break;case"defaultChecked":Y=ie;break;case"value":d=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:ot(t,i,l,ie,a,null)}}As(t,d,A,M,Y,T,h,!1),fa(t);return;case"select":Ue("invalid",t),l=T=d=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:ot(t,i,h,A,a,null)}i=d,a=T,t.multiple=!!l,i!=null?qi(t,!!l,i,!1):a!=null&&qi(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),d=h=l=null;for(T in a)if(a.hasOwnProperty(T)&&(A=a[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:ot(t,i,T,A,a,null)}bs(t,l,h,d),fa(t);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(t,i,M,l,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)Ue(Al[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,Y,l,a,null)}return;default:if(Bo(i)){for(ie in a)a.hasOwnProperty(ie)&&(l=a[ie],l!==void 0&&Gd(t,i,ie,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&ot(t,i,A,l,a,null))}function eb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,T=null,A=null,M=null,Y=null,ie=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=se;default:l.hasOwnProperty(W)||ot(t,i,W,null,l,se)}}for(var $ in l){var W=l[$];if(se=a[$],l.hasOwnProperty($)&&(W!=null||se!=null))switch($){case"type":d=W;break;case"name":h=W;break;case"checked":Y=W;break;case"defaultChecked":ie=W;break;case"value":T=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==se&&ot(t,i,$,W,l,se)}}In(t,T,A,M,Y,ie,d,h);return;case"select":W=T=A=$=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":W=M;default:l.hasOwnProperty(d)||ot(t,i,d,null,l,M)}for(h in l)if(d=l[h],M=a[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":$=d;break;case"defaultValue":A=d;break;case"multiple":T=d;default:d!==M&&ot(t,i,h,d,l,M)}i=A,a=T,l=W,$!=null?qi(t,!!a,$,!1):!!l!=!!a&&(i!=null?qi(t,!!a,i,!0):qi(t,!!a,a?[]:"",!1));return;case"textarea":W=$=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ot(t,i,A,null,l,h)}for(T in l)if(h=l[T],d=a[T],l.hasOwnProperty(T)&&(h!=null||d!=null))switch(T){case"value":$=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ot(t,i,T,h,l,d)}st(t,$,W);return;case"option":for(var xe in a)if($=a[xe],a.hasOwnProperty(xe)&&$!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:ot(t,i,xe,null,l,$)}for(M in l)if($=l[M],W=a[M],l.hasOwnProperty(M)&&$!==W&&($!=null||W!=null))switch(M){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(t,i,M,$,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)$=a[be],a.hasOwnProperty(be)&&$!=null&&!l.hasOwnProperty(be)&&ot(t,i,be,null,l,$);for(Y in l)if($=l[Y],W=a[Y],l.hasOwnProperty(Y)&&$!==W&&($!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:ot(t,i,Y,$,l,W)}return;default:if(Bo(i)){for(var lt in a)$=a[lt],a.hasOwnProperty(lt)&&$!==void 0&&!l.hasOwnProperty(lt)&&Gd(t,i,lt,void 0,l,$);for(ie in l)$=l[ie],W=a[ie],!l.hasOwnProperty(ie)||$===W||$===void 0&&W===void 0||Gd(t,i,ie,$,l,W);return}}for(var H in a)$=a[H],a.hasOwnProperty(H)&&$!=null&&!l.hasOwnProperty(H)&&ot(t,i,H,null,l,$);for(se in l)$=l[se],W=a[se],!l.hasOwnProperty(se)||$===W||$==null&&W==null||ot(t,i,se,$,l,W)}var Kd=null,Qd=null;function Oc(t){return t.nodeType===9?t:t.ownerDocument}function Hv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Yd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $d=null;function tb(){var t=window.event;return t&&t.type==="popstate"?t===$d?!1:($d=t,!0):($d=null,!1)}var Gv=typeof setTimeout=="function"?setTimeout:void 0,nb=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,ib=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(t){return Kv.resolve(null).then(t).catch(rb)}:Gv;function rb(t){setTimeout(function(){throw t})}function zr(t){return t==="head"}function Qv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var T=t.ownerDocument;if(a&1&&wl(T.documentElement),a&2&&wl(T.body),a&4)for(a=T.head,wl(a),T=a.firstChild;T;){var A=T.nextSibling,M=T.nodeName;T[_s]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=A}}if(h===0){t.removeChild(d),Ml(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ml(i)}function Xd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xd(a),Sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function sb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_s])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function ab(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function ob(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Zd=null;function Yv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function $v(t,i,a){switch(i=Oc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function wl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Sr(t)}var Wn=new Map,Xv=new Set;function Mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var or=ne.d;ne.d={f:lb,r:ub,D:cb,C:hb,L:fb,m:db,X:pb,S:mb,M:gb};function lb(){var t=or.f(),i=bc();return t||i}function ub(t){var i=mi(t);i!==null&&i.tag===5&&i.type==="form"?gy(i):or.r(t)}var Qa=typeof document>"u"?null:document;function Wv(t,i,a){var l=Qa;if(l&&typeof i=="string"&&i){var h=Nt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Xv.has(h)||(Xv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),tn(i,"link",t),wt(i),l.head.appendChild(i)))}}function cb(t){or.D(t),Wv("dns-prefetch",t,null)}function hb(t,i){or.C(t,i),Wv("preconnect",t,i)}function fb(t,i,a){or.L(t,i,a);var l=Qa;if(l&&t&&i){var h='link[rel="preload"][as="'+Nt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nt(a.imageSizes)+'"]')):h+='[href="'+Nt(t)+'"]';var d=h;switch(i){case"style":d=Ya(t);break;case"script":d=$a(t)}Wn.has(d)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Wn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Rl(d))||i==="script"&&l.querySelector(Il(d))||(i=l.createElement("link"),tn(i,"link",t),wt(i),l.head.appendChild(i)))}}function db(t,i){or.m(t,i);var a=Qa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Nt(l)+'"][href="'+Nt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=$a(t)}if(!Wn.has(d)&&(t=E({rel:"modulepreload",href:t},i),Wn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(d)))return}l=a.createElement("link"),tn(l,"link",t),wt(l),a.head.appendChild(l)}}}function mb(t,i,a){or.S(t,i,a);var l=Qa;if(l&&t){var h=pn(l).hoistableStyles,d=Ya(t);i=i||"default";var T=h.get(d);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(Rl(d)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Wn.get(d))&&Jd(t,a);var M=T=l.createElement("link");wt(M),tn(M,"link",t),M._p=new Promise(function(Y,ie){M.onload=Y,M.onerror=ie}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Pc(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:A},h.set(d,T)}}}function pb(t,i){or.X(t,i);var a=Qa;if(a&&t){var l=pn(a).hoistableScripts,h=$a(t),d=l.get(h);d||(d=a.querySelector(Il(h)),d||(t=E({src:t,async:!0},i),(i=Wn.get(h))&&em(t,i),d=a.createElement("script"),wt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function gb(t,i){or.M(t,i);var a=Qa;if(a&&t){var l=pn(a).hoistableScripts,h=$a(t),d=l.get(h);d||(d=a.querySelector(Il(h)),d||(t=E({src:t,async:!0,type:"module"},i),(i=Wn.get(h))&&em(t,i),d=a.createElement("script"),wt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Zv(t,i,a,l){var h=(h=de.current)?Mc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ya(a.href),a=pn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ya(a.href);var d=pn(h).hoistableStyles,T=d.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,T),(d=h.querySelector(Rl(t)))&&!d._p&&(T.instance=d,T.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),d||yb(h,t,a,T.state))),i&&l===null)throw Error(s(528,""));return T}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$a(a),a=pn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ya(t){return'href="'+Nt(t)+'"'}function Rl(t){return'link[rel="stylesheet"]['+t+"]"}function Jv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function yb(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),wt(i),t.head.appendChild(i))}function $a(t){return'[src="'+Nt(t)+'"]'}function Il(t){return"script[async]"+t}function e_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(l)return i.instance=l,wt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),wt(l),tn(l,"style",h),Pc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ya(a.href);var d=t.querySelector(Rl(h));if(d)return i.state.loading|=4,i.instance=d,wt(d),d;l=Jv(a),(h=Wn.get(h))&&Jd(l,h),d=(t.ownerDocument||t).createElement("link"),wt(d);var T=d;return T._p=new Promise(function(A,M){T.onload=A,T.onerror=M}),tn(d,"link",l),i.state.loading|=4,Pc(d,a.precedence,t),i.instance=d;case"script":return d=$a(a.src),(h=t.querySelector(Il(d)))?(i.instance=h,wt(h),h):(l=a,(h=Wn.get(d))&&(l=E({},a),em(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),wt(h),tn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Pc(l,a.precedence,t));return i.instance}function Pc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function em(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Vc=null;function t_(t,i,a){if(Vc===null){var l=new Map,h=Vc=new Map;h.set(a,l)}else h=Vc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[_s]||d[jt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var T=d.getAttribute(i)||"";T=t+T;var A=l.get(T);A?A.push(d):l.set(T,[d])}}return l}function n_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function vb(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function i_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Cl=null;function _b(){}function Eb(t,i,a){if(Cl===null)throw Error(s(475));var l=Cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ya(a.href),d=t.querySelector(Rl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=kc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,wt(d);return}d=t.ownerDocument||t,a=Jv(a),(h=Wn.get(h))&&Jd(a,h),d=d.createElement("link"),wt(d);var T=d;T._p=new Promise(function(A,M){T.onload=A,T.onerror=M}),tn(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=kc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function Tb(){if(Cl===null)throw Error(s(475));var t=Cl;return t.stylesheets&&t.count===0&&tm(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&tm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function kc(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lc=null;function tm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lc=new Map,i.forEach(Sb,t),Lc=null,kc.call(t))}function Sb(t,i){if(!(i.state.loading&4)){var a=Lc.get(t);if(a)var l=a.get(null);else{a=new Map,Lc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var T=h[d];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}h=i.instance,T=h.getAttribute("data-precedence"),d=a.get(T)||l,d===l&&a.set(null,h),a.set(T,h),this.count++,l=kc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var xl={$$typeof:F,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Ab(t,i,a,l,h,d,T,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function r_(t,i,a,l,h,d,T,A,M,Y,ie,se){return t=new Ab(t,i,a,T,A,M,Y,se),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),t.current=d,d.stateNode=t,i=kf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bf(d),t}function s_(t){return t?(t=Ra,t):Ra}function a_(t,i,a,l,h,d){h=s_(h),l.context===null?l.context=h:l.pendingContext=h,l=Cr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=xr(t,l,i),a!==null&&(Pn(a,t,i),sl(a,t,i))}function o_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function nm(t,i){o_(t,i),(t=t.alternate)&&o_(t,i)}function l_(t){if(t.tag===13){var i=wa(t,67108864);i!==null&&Pn(i,t,67108864),nm(t,67108864)}}var jc=!0;function bb(t,i,a,l){var h=te.T;te.T=null;var d=ne.p;try{ne.p=2,im(t,i,a,l)}finally{ne.p=d,te.T=h}}function wb(t,i,a,l){var h=te.T;te.T=null;var d=ne.p;try{ne.p=8,im(t,i,a,l)}finally{ne.p=d,te.T=h}}function im(t,i,a,l){if(jc){var h=rm(l);if(h===null)Fd(t,i,l,Uc,a),c_(t,l);else if(Ib(h,t,i,a,l))l.stopPropagation();else if(c_(t,l),i&4&&-1<Rb.indexOf(t)){for(;h!==null;){var d=mi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var T=ei(d.pendingLanes);if(T!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var M=1<<31-xt(T);A.entanglements[1]|=M,T&=~M}Ci(d),(tt&6)===0&&(Sc=Et()+500,Sl(0))}}break;case 13:A=wa(d,2),A!==null&&Pn(A,d,2),bc(),nm(d,2)}if(d=rm(l),d===null&&Fd(t,i,l,Uc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Fd(t,i,l,null,a)}}function rm(t){return t=qn(t),sm(t)}var Uc=null;function sm(t){if(Uc=null,t=Ui(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Uc=t,null}function u_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ln()){case En:return 2;case jn:return 8;case on:case Oe:return 32;case Be:return 268435456;default:return 32}default:return 32}}var am=!1,qr=null,Hr=null,Fr=null,Dl=new Map,Nl=new Map,Gr=[],Rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c_(t,i){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(i.pointerId)}}function Ol(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=mi(i),i!==null&&l_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Ib(t,i,a,l,h){switch(i){case"focusin":return qr=Ol(qr,t,i,a,l,h),!0;case"dragenter":return Hr=Ol(Hr,t,i,a,l,h),!0;case"mouseover":return Fr=Ol(Fr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Dl.set(d,Ol(Dl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Nl.set(d,Ol(Nl.get(d)||null,t,i,a,l,h)),!0}return!1}function h_(t){var i=Ui(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,bu(t.priority,function(){if(a.tag===13){var l=Mn();l=_r(l);var h=wa(a,l);h!==null&&Pn(h,a,l),nm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=rm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Hi=l,a.target.dispatchEvent(l),Hi=null}else return i=mi(a),i!==null&&l_(i),t.blockedOn=a,!1;i.shift()}return!0}function f_(t,i,a){Bc(t)&&a.delete(i)}function Cb(){am=!1,qr!==null&&Bc(qr)&&(qr=null),Hr!==null&&Bc(Hr)&&(Hr=null),Fr!==null&&Bc(Fr)&&(Fr=null),Dl.forEach(f_),Nl.forEach(f_)}function zc(t,i){t.blockedOn===i&&(t.blockedOn=null,am||(am=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Cb)))}var qc=null;function d_(t){qc!==t&&(qc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qc===t&&(qc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var d=mi(a);d!==null&&(t.splice(i,3),i-=3,sd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(t){function i(M){return zc(M,t)}qr!==null&&zc(qr,t),Hr!==null&&zc(Hr,t),Fr!==null&&zc(Fr,t),Dl.forEach(i),Nl.forEach(i);for(var a=0;a<Gr.length;a++){var l=Gr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Gr.length&&(a=Gr[0],a.blockedOn===null);)h_(a),a.blockedOn===null&&Gr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],T=h[Dt]||null;if(typeof d=="function")T||d_(a);else if(T){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,T=d[Dt]||null)A=T.formAction;else if(sm(h)!==null)continue}else A=T.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),d_(a)}}}function om(t){this._internalRoot=t}Hc.prototype.render=om.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Mn();a_(a,l,t,i,null,null)},Hc.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;a_(t.current,2,null,t,null,null),bc(),i[Bn]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Er();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Gr.length&&i!==0&&i<Gr[a].priority;a++);Gr.splice(a,0,t),a===0&&h_(t)}};var m_=e.version;if(m_!=="19.1.0")throw Error(s(527,m_,"19.1.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var xb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{ft=Fc.inject(xb),We=Fc}catch{}}return Vl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Dy,d=Ny,T=Oy,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=r_(t,1,!1,null,null,a,l,h,d,T,A,null),t[Bn]=i.current,Hd(t),new om(i)},Vl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Dy,T=Ny,A=Oy,M=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),i=r_(t,1,!0,i,a??null,l,h,d,T,A,M,Y),i.context=s_(null),a=i.current,l=Mn(),l=_r(l),h=Cr(l),h.callback=null,xr(a,h,l),a=l,i.current.lanes=a,ji(i,a),Ci(i),t[Bn]=i.current,Hd(t),new Hc(i)},Vl.version="19.1.0",Vl}var b_;function Ub(){if(b_)return cm.exports;b_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cm.exports=jb(),cm.exports}var Bb=Ub(),kl={},w_;function zb(){if(w_)return kl;w_=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.parse=f,kl.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function f(S,P){const C=new u,U=S.length;if(U<2)return C;const O=(P==null?void 0:P.decode)||E;let j=0;do{const q=S.indexOf("=",j);if(q===-1)break;const F=S.indexOf(";",j),X=F===-1?U:F;if(q>X){j=S.lastIndexOf(";",q-1)+1;continue}const Q=m(S,j,q),J=p(S,q,Q),I=S.slice(Q,J);if(C[I]===void 0){let R=m(S,q+1,X),x=p(S,X,R);const V=O(S.slice(R,x));C[I]=V}j=X+1}while(j<U);return C}function m(S,P,C){do{const U=S.charCodeAt(P);if(U!==32&&U!==9)return P}while(++P<C);return C}function p(S,P,C){for(;P>C;){const U=S.charCodeAt(--P);if(U!==32&&U!==9)return P+1}return C}function g(S,P,C){const U=(C==null?void 0:C.encode)||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const O=U(P);if(!e.test(O))throw new TypeError(`argument val is invalid: ${P}`);let j=S+"="+O;if(!C)return j;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);j+="; Max-Age="+C.maxAge}if(C.domain){if(!n.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);j+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);j+="; Path="+C.path}if(C.expires){if(!b(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);j+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(j+="; HttpOnly"),C.secure&&(j+="; Secure"),C.partitioned&&(j+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return j}function E(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function b(S){return o.call(S)==="[object Date]"}return kl}zb();var R_="popstate";function qb(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Im("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Xl(o)}return Fb(e,n,null,r)}function _t(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Jn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hb(){return Math.random().toString(36).substring(2,10)}function I_(r,e){return{usr:r.state,key:r.key,idx:e}}function Im(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?go(e):e,state:n,key:e&&e.key||s||Hb()}}function Xl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function go(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Fb(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function b(){m="POP";let O=E(),j=O==null?null:O-g;g=O,p&&p({action:m,location:U.location,delta:j})}function S(O,j){m="PUSH";let q=Im(U.location,O,j);g=E()+1;let F=I_(q,g),X=U.createHref(q);try{f.pushState(F,"",X)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(X)}u&&p&&p({action:m,location:U.location,delta:1})}function P(O,j){m="REPLACE";let q=Im(U.location,O,j);g=E();let F=I_(q,g),X=U.createHref(q);f.replaceState(F,"",X),u&&p&&p({action:m,location:U.location,delta:0})}function C(O){return Gb(O)}let U={get action(){return m},get location(){return r(o,f)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(R_,b),p=O,()=>{o.removeEventListener(R_,b),p=null}},createHref(O){return e(o,O)},createURL:C,encodeLocation(O){let j=C(O);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:S,replace:P,go(O){return f.go(O)}};return U}function Gb(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Xl(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function y0(r,e,n="/"){return Kb(r,e,n,!1)}function Kb(r,e,n,s){let o=typeof e=="string"?go(e):e,u=fr(o.pathname||"/",n);if(u==null)return null;let f=v0(r);Qb(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=rw(u);m=nw(f[p],g,s)}return m}function v0(r,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(_t(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=cr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(_t(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),v0(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:ew(g,u.index),routesMeta:E})};return r.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of _0(u.path))o(u,f,p)}),e}function _0(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=_0(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function Qb(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:tw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Yb=/^:[\w-]+$/,$b=3,Xb=2,Wb=1,Zb=10,Jb=-2,C_=r=>r==="*";function ew(r,e){let n=r.split("/"),s=n.length;return n.some(C_)&&(s+=Jb),e&&(s+=Xb),n.filter(o=>!C_(o)).reduce((o,u)=>o+(Yb.test(u)?$b:u===""?Wb:Zb),s)}function tw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function nw(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",b=fh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),S=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=fh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:cr([u,b.pathname]),pathnameBase:lw(cr([u,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(u=cr([u,b.pathnameBase]))}return f}function fh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=iw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:b},S)=>{if(E==="*"){let C=m[S]||"";f=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const P=m[S];return b&&!P?g[E]=void 0:g[E]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function iw(r,e=!1,n=!0){Jn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function rw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function fr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function sw(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?go(r):r;return{pathname:n?n.startsWith("/")?n:aw(n,e):e,search:uw(s),hash:cw(o)}}function aw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function mm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ow(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rp(r){let e=ow(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function sp(r,e,n,s=!1){let o;typeof r=="string"?o=go(r):(o={...r},_t(!o.pathname||!o.pathname.includes("?"),mm("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),mm("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),mm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let b=e.length-1;if(!s&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),b-=1;o.pathname=S.join("/")}m=b>=0?e[b]:"/"}let p=sw(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var cr=r=>r.join("/").replace(/\/\/+/g,"/"),lw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),uw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,cw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function hw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var E0=["POST","PUT","PATCH","DELETE"];new Set(E0);var fw=["GET",...E0];new Set(fw);var yo=D.createContext(null);yo.displayName="DataRouter";var Mh=D.createContext(null);Mh.displayName="DataRouterState";var T0=D.createContext({isTransitioning:!1});T0.displayName="ViewTransition";var dw=D.createContext(new Map);dw.displayName="Fetchers";var mw=D.createContext(null);mw.displayName="Await";var hi=D.createContext(null);hi.displayName="Navigation";var lu=D.createContext(null);lu.displayName="Location";var fi=D.createContext({outlet:null,matches:[],isDataRoute:!1});fi.displayName="Route";var ap=D.createContext(null);ap.displayName="RouteError";function pw(r,{relative:e}={}){_t(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=D.useContext(hi),{hash:o,pathname:u,search:f}=cu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:cr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function vo(){return D.useContext(lu)!=null}function kn(){return _t(vo(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(lu).location}var S0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A0(r){D.useContext(hi).static||D.useLayoutEffect(r)}function _o(){let{isDataRoute:r}=D.useContext(fi);return r?Cw():gw()}function gw(){_t(vo(),"useNavigate() may be used only in the context of a <Router> component.");let r=D.useContext(yo),{basename:e,navigator:n}=D.useContext(hi),{matches:s}=D.useContext(fi),{pathname:o}=kn(),u=JSON.stringify(rp(s)),f=D.useRef(!1);return A0(()=>{f.current=!0}),D.useCallback((p,g={})=>{if(Jn(f.current,S0),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=sp(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:cr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}D.createContext(null);function uu(){let{matches:r}=D.useContext(fi),e=r[r.length-1];return e?e.params:{}}function cu(r,{relative:e}={}){let{matches:n}=D.useContext(fi),{pathname:s}=kn(),o=JSON.stringify(rp(n));return D.useMemo(()=>sp(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function yw(r,e){return b0(r,e)}function b0(r,e,n,s){var j;_t(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(hi),{matches:u}=D.useContext(fi),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",E=f&&f.route;{let q=E&&E.path||"";w0(p,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let b=kn(),S;if(e){let q=typeof e=="string"?go(e):e;_t(g==="/"||((j=q.pathname)==null?void 0:j.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),S=q}else S=b;let P=S.pathname||"/",C=P;if(g!=="/"){let q=g.replace(/^\//,"").split("/");C="/"+P.replace(/^\//,"").split("/").slice(q.length).join("/")}let U=y0(r,{pathname:C});Jn(E||U!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Jn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Sw(U&&U.map(q=>Object.assign({},q,{params:Object.assign({},m,q.params),pathname:cr([g,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:cr([g,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,s);return e&&O?D.createElement(lu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},O):O}function vw(){let r=Iw(),e=hw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:u},"ErrorBoundary")," or"," ",D.createElement("code",{style:u},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,f)}var _w=D.createElement(vw,null),Ew=class extends D.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?D.createElement(fi.Provider,{value:this.props.routeContext},D.createElement(ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tw({routeContext:r,match:e,children:n}){let s=D.useContext(yo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(fi.Provider,{value:r},n)}function Sw(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);_t(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:b}=n,S=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let b,S=!1,P=null,C=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,P=g.route.errorElement||_w,f&&(m<0&&E===0?(w0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):m===E&&(S=!0,C=g.route.hydrateFallbackElement||null)));let U=e.concat(o.slice(0,E+1)),O=()=>{let j;return b?j=P:S?j=C:g.route.Component?j=D.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,D.createElement(Tw,{match:g,routeContext:{outlet:p,matches:U,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?D.createElement(Ew,{location:n.location,revalidation:n.revalidation,component:P,error:b,children:O(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):O()},null)}function op(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Aw(r){let e=D.useContext(yo);return _t(e,op(r)),e}function bw(r){let e=D.useContext(Mh);return _t(e,op(r)),e}function ww(r){let e=D.useContext(fi);return _t(e,op(r)),e}function lp(r){let e=ww(r),n=e.matches[e.matches.length-1];return _t(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function Rw(){return lp("useRouteId")}function Iw(){var s;let r=D.useContext(ap),e=bw("useRouteError"),n=lp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function Cw(){let{router:r}=Aw("useNavigate"),e=lp("useNavigate"),n=D.useRef(!1);return A0(()=>{n.current=!0}),D.useCallback(async(o,u={})=>{Jn(n.current,S0),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var x_={};function w0(r,e,n){!e&&!x_[r]&&(x_[r]=!0,Jn(!1,n))}D.memo(xw);function xw({routes:r,future:e,state:n}){return b0(r,void 0,n,e)}function Dw({to:r,replace:e,state:n,relative:s}){_t(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=D.useContext(hi);Jn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=D.useContext(fi),{pathname:f}=kn(),m=_o(),p=sp(r,rp(u),f,s==="path"),g=JSON.stringify(p);return D.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function xi(r){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Nw({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){_t(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=go(n));let{pathname:p="/",search:g="",hash:E="",state:b=null,key:S="default"}=n,P=D.useMemo(()=>{let C=fr(p,f);return C==null?null:{location:{pathname:C,search:g,hash:E,state:b,key:S},navigationType:s}},[f,p,g,E,b,S,s]);return Jn(P!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:D.createElement(hi.Provider,{value:m},D.createElement(lu.Provider,{children:e,value:P}))}function Ow({children:r,location:e}){return yw(Cm(r),e)}function Cm(r,e=[]){let n=[];return D.Children.forEach(r,(s,o)=>{if(!D.isValidElement(s))return;let u=[...e,o];if(s.type===D.Fragment){n.push.apply(n,Cm(s.props.children,u));return}_t(s.type===xi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Cm(s.props.children,u)),n.push(f)}),n}var eh="get",th="application/x-www-form-urlencoded";function Ph(r){return r!=null&&typeof r.tagName=="string"}function Mw(r){return Ph(r)&&r.tagName.toLowerCase()==="button"}function Pw(r){return Ph(r)&&r.tagName.toLowerCase()==="form"}function Vw(r){return Ph(r)&&r.tagName.toLowerCase()==="input"}function kw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Lw(r,e){return r.button===0&&(!e||e==="_self")&&!kw(r)}function xm(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function jw(r,e){let n=xm(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Gc=null;function Uw(){if(Gc===null)try{new FormData(document.createElement("form"),0),Gc=!1}catch{Gc=!0}return Gc}var Bw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(r){return r!=null&&!Bw.has(r)?(Jn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${th}"`),null):r}function zw(r,e){let n,s,o,u,f;if(Pw(r)){let m=r.getAttribute("action");s=m?fr(m,e):null,n=r.getAttribute("method")||eh,o=pm(r.getAttribute("enctype"))||th,u=new FormData(r)}else if(Mw(r)||Vw(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?fr(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||eh,o=pm(r.getAttribute("formenctype"))||pm(m.getAttribute("enctype"))||th,u=new FormData(m,r),!Uw()){let{name:g,type:E,value:b}=r;if(E==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,b)}}else{if(Ph(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=eh,s=null,o=th,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function up(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function qw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Fw(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await qw(u,n);return f.links?f.links():[]}return[]}));return Yw(s.flat(1).filter(Hw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function D_(r,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var b;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Gw(r,e,{includeHydrateFallback:n}={}){return Kw(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Kw(r){return[...new Set(r)]}function Qw(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function Yw(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(Qw(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $w=new Set([100,101,204,205]);function Xw(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&fr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function R0(){let r=D.useContext(yo);return up(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ww(){let r=D.useContext(Mh);return up(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cp=D.createContext(void 0);cp.displayName="FrameworkContext";function I0(){let r=D.useContext(cp);return up(r,"You must render this element inside a <HydratedRouter> element"),r}function Zw(r,e){let n=D.useContext(cp),[s,o]=D.useState(!1),[u,f]=D.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:b}=e,S=D.useRef(null);D.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let U=j=>{j.forEach(q=>{f(q.isIntersecting)})},O=new IntersectionObserver(U,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[r]),D.useEffect(()=>{if(s){let U=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(U)}}},[s]);let P=()=>{o(!0)},C=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,S,{}]:[u,S,{onFocus:Ll(m,P),onBlur:Ll(p,C),onMouseEnter:Ll(g,P),onMouseLeave:Ll(E,C),onTouchStart:Ll(b,P)}]:[!1,S,{}]}function Ll(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Jw({page:r,...e}){let{router:n}=R0(),s=D.useMemo(()=>y0(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?D.createElement(t1,{page:r,matches:s,...e}):null}function e1(r){let{manifest:e,routeModules:n}=I0(),[s,o]=D.useState([]);return D.useEffect(()=>{let u=!1;return Fw(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function t1({page:r,matches:e,...n}){let s=kn(),{manifest:o,routeModules:u}=I0(),{basename:f}=R0(),{loaderData:m,matches:p}=Ww(),g=D.useMemo(()=>D_(r,e,p,o,s,"data"),[r,e,p,o,s]),E=D.useMemo(()=>D_(r,e,p,o,s,"assets"),[r,e,p,o,s]),b=D.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,U=!1;if(e.forEach(j=>{var F;let q=o.routes[j.route.id];!q||!q.hasLoader||(!g.some(X=>X.route.id===j.route.id)&&j.route.id in m&&((F=u[j.route.id])!=null&&F.shouldRevalidate)||q.hasClientLoader?U=!0:C.add(j.route.id))}),C.size===0)return[];let O=Xw(r,f);return U&&C.size>0&&O.searchParams.set("_routes",e.filter(j=>C.has(j.route.id)).map(j=>j.route.id).join(",")),[O.pathname+O.search]},[f,m,s,o,g,e,r,u]),S=D.useMemo(()=>Gw(E,o),[E,o]),P=e1(E);return D.createElement(D.Fragment,null,b.map(C=>D.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),S.map(C=>D.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),P.map(({key:C,link:U})=>D.createElement("link",{key:C,...U})))}function n1(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var C0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{C0&&(window.__reactRouterVersion="7.6.2")}catch{}function i1({basename:r,children:e,window:n}){let s=D.useRef();s.current==null&&(s.current=qb({window:n,v5Compat:!0}));let o=s.current,[u,f]=D.useState({action:o.action,location:o.location}),m=D.useCallback(p=>{D.startTransition(()=>f(p))},[f]);return D.useLayoutEffect(()=>o.listen(m),[o,m]),D.createElement(Nw,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var x0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xe=D.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:b,...S},P){let{basename:C}=D.useContext(hi),U=typeof g=="string"&&x0.test(g),O,j=!1;if(typeof g=="string"&&U&&(O=g,C0))try{let x=new URL(window.location.href),V=g.startsWith("//")?new URL(x.protocol+g):new URL(g),k=fr(V.pathname,C);V.origin===x.origin&&k!=null?g=k+V.search+V.hash:j=!0}catch{Jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=pw(g,{relative:o}),[F,X,Q]=Zw(s,S),J=o1(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:b});function I(x){e&&e(x),x.defaultPrevented||J(x)}let R=D.createElement("a",{...S,...Q,href:O||q,onClick:j||u?e:I,ref:n1(P,X),target:p,"data-discover":!U&&n==="render"?"true":void 0});return F&&!U?D.createElement(D.Fragment,null,R,D.createElement(Jw,{page:q})):R});Xe.displayName="Link";var r1=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let b=cu(f,{relative:g.relative}),S=kn(),P=D.useContext(Mh),{navigator:C,basename:U}=D.useContext(hi),O=P!=null&&f1(b)&&m===!0,j=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,q=S.pathname,F=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(q=q.toLowerCase(),F=F?F.toLowerCase():null,j=j.toLowerCase()),F&&U&&(F=fr(F,U)||F);const X=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let Q=q===j||!o&&q.startsWith(j)&&q.charAt(X)==="/",J=F!=null&&(F===j||!o&&F.startsWith(j)&&F.charAt(j.length)==="/"),I={isActive:Q,isPending:J,isTransitioning:O},R=Q?e:void 0,x;typeof s=="function"?x=s(I):x=[s,Q?"active":null,J?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(I):u;return D.createElement(Xe,{...g,"aria-current":R,className:x,ref:E,style:V,to:f,viewTransition:m},typeof p=="function"?p(I):p)});r1.displayName="NavLink";var s1=D.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=eh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:b,...S},P)=>{let C=c1(),U=h1(m,{relative:g}),O=f.toLowerCase()==="get"?"get":"post",j=typeof m=="string"&&x0.test(m),q=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let X=F.nativeEvent.submitter,Q=(X==null?void 0:X.getAttribute("formmethod"))||f;C(X||F.currentTarget,{fetcherKey:e,method:Q,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:b})};return D.createElement("form",{ref:P,method:O,action:U,onSubmit:s?p:q,...S,"data-discover":!j&&r==="render"?"true":void 0})});s1.displayName="Form";function a1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D0(r){let e=D.useContext(yo);return _t(e,a1(r)),e}function o1(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=_o(),p=kn(),g=cu(r,{relative:u});return D.useCallback(E=>{if(Lw(E,e)){E.preventDefault();let b=n!==void 0?n:Xl(p)===Xl(g);m(r,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,r,o,u,f])}function Vh(r){Jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=D.useRef(xm(r)),n=D.useRef(!1),s=kn(),o=D.useMemo(()=>jw(s.search,n.current?null:e.current),[s.search]),u=_o(),f=D.useCallback((m,p)=>{const g=xm(typeof m=="function"?m(o):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,f]}var l1=0,u1=()=>`__${String(++l1)}__`;function c1(){let{router:r}=D0("useSubmit"),{basename:e}=D.useContext(hi),n=Rw();return D.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=zw(s,e);if(o.navigate===!1){let E=o.fetcherKey||u1();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function h1(r,{relative:e}={}){let{basename:n}=D.useContext(hi),s=D.useContext(fi);_t(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...cu(r||".",{relative:e})},f=kn();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:cr([n,u.pathname])),Xl(u)}function f1(r,e={}){let n=D.useContext(T0);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=D0("useViewTransitionState"),o=cu(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=fr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=fr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return fh(o.pathname,f)!=null||fh(o.pathname,u)!=null}[...$w];const N_="FLASH FLASH ";function yr(r){D.useEffect(()=>{const e=r?`${r} | ${N_}`:N_;document.title=e},[r])}const d1=()=>(yr("Home"),v.jsxs("div",{style:{padding:"2em",maxWidth:"960px",margin:"0 auto"},children:[v.jsx("h1",{children:" FLASH FLASH "}),v.jsx("p",{children:""}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.2em",marginTop:"1.4em"},children:[v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h2",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),v.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:" /  / "}),v.jsx("li",{children:""})]}),v.jsx("p",{style:{marginBottom:0},children:v.jsx(Xe,{to:"/login",children:""})}),v.jsx("p",{style:{marginTop:"0.4em",marginBottom:0},children:v.jsx(Xe,{to:"/dashboard",children:""})})]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h2",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),v.jsxs("ol",{style:{paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:""})]}),v.jsx("p",{style:{marginBottom:0},children:v.jsx(Xe,{to:"/score-summary",children:""})})]})]}),v.jsxs("section",{style:{border:"1px dashed #bbb",borderRadius:"10px",padding:"1em",marginTop:"1.2em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginBottom:0},children:""})]})]})),m1=()=>{};var O_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},p1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let S=(m&15)<<2|g>>6,P=g&63;p||(P=64,f||(S=64)),s.push(n[E],n[b],n[S],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):p1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new g1;const S=u<<2|m>>4;if(s.push(S),g!==64){const P=m<<4&240|g>>2;if(s.push(P),b!==64){const C=g<<6&192|b;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class g1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y1=function(r){const e=N0(r);return O0.encodeByteArray(e,!0)},dh=function(r){return y1(r).replace(/\./g,"")},M0=function(r){try{return O0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=()=>v1().__FIREBASE_DEFAULTS__,E1=()=>{if(typeof process>"u"||typeof O_>"u")return;const r=O_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},T1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&M0(r[1]);return e&&JSON.parse(e)},kh=()=>{try{return m1()||_1()||E1()||T1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},P0=r=>{var e,n;return(n=(e=kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},S1=r=>{const e=P0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},V0=()=>{var r;return(r=kh())===null||r===void 0?void 0:r.config},k0=r=>{var e;return(e=kh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(r){return r.endsWith(".cloudworkstations.dev")}async function L0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[dh(JSON.stringify(n)),dh(JSON.stringify(f)),""].join(".")}const Fl={};function w1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fl))Fl[e]?r.emulator.push(e):r.prod.push(e);return r}function R1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let M_=!1;function j0(r,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Fl[r]===e||Fl[r]||M_)return;Fl[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=w1().prod.length>0;function f(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{M_=!0,f()},S}function E(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=R1(s),P=n("text"),C=document.getElementById(P)||document.createElement("span"),U=n("learnmore"),O=document.getElementById(U)||document.createElement("a"),j=n("preprendIcon"),q=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const F=S.element;m(F),E(O,U);const X=g();p(q,j),F.append(q,C,O,X),document.body.appendChild(F)}u?(C.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function C1(){var r;const e=(r=kh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function N1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O1(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function M1(){return!C1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P1(){try{return typeof indexedDB=="object"}catch{return!1}}function V1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="FirebaseError";class vr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=k1,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?L1(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new vr(o,m,s)}}function L1(r,e){return r.replace(j1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const j1=/\{\$([^}]+)}/g;function U1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ws(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(P_(u)&&P_(f)){if(!Ws(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function P_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function jl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ul(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function B1(r,e){const n=new z1(r,e);return n.subscribe.bind(n)}class z1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");q1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=gm),o.error===void 0&&(o.error=gm),o.complete===void 0&&(o.complete=gm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r){return r&&r._delegate?r._delegate:r}class Zs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new A1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G1(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:F1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F1(r){return r===Ys?void 0:r}function G1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new H1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const Q1={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Y1=ze.INFO,$1={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},X1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=$1[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=Y1,this._logHandler=X1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const W1=(r,e)=>e.some(n=>r instanceof n);let V_,k_;function Z1(){return V_||(V_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J1(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U0=new WeakMap,Dm=new WeakMap,B0=new WeakMap,ym=new WeakMap,fp=new WeakMap;function eR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Jr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&U0.set(n,r)}).catch(()=>{}),fp.set(e,r),e}function tR(r){if(Dm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Dm.set(r,e)}let Nm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Dm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||B0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function nR(r){Nm=r(Nm)}function iR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(vm(this),e,...n);return B0.set(s,e.sort?e.sort():[e]),Jr(s)}:J1().includes(r)?function(...e){return r.apply(vm(this),e),Jr(U0.get(this))}:function(...e){return Jr(r.apply(vm(this),e))}}function rR(r){return typeof r=="function"?iR(r):(r instanceof IDBTransaction&&tR(r),W1(r,Z1())?new Proxy(r,Nm):r)}function Jr(r){if(r instanceof IDBRequest)return eR(r);if(ym.has(r))return ym.get(r);const e=rR(r);return e!==r&&(ym.set(r,e),fp.set(e,r)),e}const vm=r=>fp.get(r);function sR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=Jr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Jr(f.result),p.oldVersion,p.newVersion,Jr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const aR=["get","getKey","getAll","getAllKeys","count"],oR=["put","add","delete","clear"],_m=new Map;function L_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(_m.get(e))return _m.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=oR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||aR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return _m.set(e,u),u}nR(r=>({...r,get:(e,n,s)=>L_(e,n)||r.get(e,n,s),has:(e,n)=>!!L_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function uR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Om="@firebase/app",j_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new hp("@firebase/app"),cR="@firebase/app-compat",hR="@firebase/analytics-compat",fR="@firebase/analytics",dR="@firebase/app-check-compat",mR="@firebase/app-check",pR="@firebase/auth",gR="@firebase/auth-compat",yR="@firebase/database",vR="@firebase/data-connect",_R="@firebase/database-compat",ER="@firebase/functions",TR="@firebase/functions-compat",SR="@firebase/installations",AR="@firebase/installations-compat",bR="@firebase/messaging",wR="@firebase/messaging-compat",RR="@firebase/performance",IR="@firebase/performance-compat",CR="@firebase/remote-config",xR="@firebase/remote-config-compat",DR="@firebase/storage",NR="@firebase/storage-compat",OR="@firebase/firestore",MR="@firebase/ai",PR="@firebase/firestore-compat",VR="firebase",kR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",LR={[Om]:"fire-core",[cR]:"fire-core-compat",[fR]:"fire-analytics",[hR]:"fire-analytics-compat",[mR]:"fire-app-check",[dR]:"fire-app-check-compat",[pR]:"fire-auth",[gR]:"fire-auth-compat",[yR]:"fire-rtdb",[vR]:"fire-data-connect",[_R]:"fire-rtdb-compat",[ER]:"fire-fn",[TR]:"fire-fn-compat",[SR]:"fire-iid",[AR]:"fire-iid-compat",[bR]:"fire-fcm",[wR]:"fire-fcm-compat",[RR]:"fire-perf",[IR]:"fire-perf-compat",[CR]:"fire-rc",[xR]:"fire-rc-compat",[DR]:"fire-gcs",[NR]:"fire-gcs-compat",[OR]:"fire-fst",[PR]:"fire-fst-compat",[MR]:"fire-vertex","fire-js":"fire-js",[VR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,jR=new Map,Pm=new Map;function U_(r,e){try{r.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ao(r){const e=r.name;if(Pm.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,r);for(const n of mh.values())U_(n,r);for(const n of jR.values())U_(n,r);return!0}function dp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ai(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new hu("app","Firebase",UR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=kR;function z0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Mm,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw es.create("bad-app-name",{appName:String(o)});if(n||(n=V0()),!n)throw es.create("no-options");const u=mh.get(o);if(u){if(Ws(n,u.options)&&Ws(s,u.config))return u;throw es.create("duplicate-app",{appName:o})}const f=new K1(o);for(const p of Pm.values())f.addComponent(p);const m=new BR(n,s,f);return mh.set(o,m),m}function q0(r=Mm){const e=mh.get(r);if(!e&&r===Mm&&V0())return z0();if(!e)throw es.create("no-app",{appName:r});return e}function ts(r,e,n){var s;let o=(s=LR[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(m.join(" "));return}ao(new Zs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebase-heartbeat-database",qR=1,Wl="firebase-heartbeat-store";let Em=null;function H0(){return Em||(Em=sR(zR,qR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(r=>{throw es.create("idb-open",{originalErrorMessage:r.message})})),Em}async function HR(r){try{const n=(await H0()).transaction(Wl),s=await n.objectStore(Wl).get(F0(r));return await n.done,s}catch(e){if(e instanceof vr)dr.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function B_(r,e){try{const s=(await H0()).transaction(Wl,"readwrite");await s.objectStore(Wl).put(e,F0(r)),await s.done}catch(n){if(n instanceof vr)dr.warn(n.message);else{const s=es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(s.message)}}}function F0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,GR=30;class KR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=z_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>GR){const f=$R(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=z_(),{heartbeatsToSend:s,unsentEntries:o}=QR(this._heartbeatsCache.heartbeats),u=dh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return dr.warn(n),""}}}function z_(){return new Date().toISOString().substring(0,10)}function QR(r,e=FR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),q_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),q_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class YR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P1()?V1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return B_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return B_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function q_(r){return dh(JSON.stringify({version:2,heartbeats:r})).length}function $R(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(r){ao(new Zs("platform-logger",e=>new lR(e),"PRIVATE")),ao(new Zs("heartbeat",e=>new KR(e),"PRIVATE")),ts(Om,j_,r),ts(Om,j_,"esm2017"),ts("fire-js","")}XR("");function mp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function G0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WR=G0,K0=new hu("auth","Firebase",G0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new hp("@firebase/auth");function ZR(r,...e){ph.logLevel<=ze.WARN&&ph.warn(`Auth (${To}): ${r}`,...e)}function nh(r,...e){ph.logLevel<=ze.ERROR&&ph.error(`Auth (${To}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,...e){throw pp(r,...e)}function Ni(r,...e){return pp(r,...e)}function Q0(r,e,n){const s=Object.assign(Object.assign({},WR()),{[e]:n});return new hu("auth","Firebase",s).create(e,{appName:r.name})}function ns(r){return Q0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return K0.create(r,...e)}function Ie(r,e,...n){if(!r)throw pp(e,...n)}function lr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw nh(e),new Error(e)}function mr(r,e){r||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function JR(){return H_()==="http:"||H_()==="https:"}function H_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JR()||D1()||"connection"in navigator)?navigator.onLine:!0}function tI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=I1()||N1()}get(){return eI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,e){mr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rI=new du(3e4,6e4);function na(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function fs(r,e,n,s,o={}){return $0(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=fu(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return x1()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Eo(r.emulatorConfig.host)&&(g.credentials="include"),Y0.fetch()(await X0(r,r.config.apiHost,n,m),g)})}async function $0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},nI),e);try{const o=new aI(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Kc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Kc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Kc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Q0(r,E,g);li(r,E)}}catch(o){if(o instanceof vr)throw o;li(r,"network-request-failed",{message:String(o)})}}async function Lh(r,e,n,s,o={}){const u=await fs(r,e,n,s,o);return"mfaPendingCredential"in u&&li(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function X0(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?gp(r.config,o):`${r.config.apiScheme}://${o}`;return iI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function sI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ni(this.auth,"network-request-failed")),rI.get())})}}function Kc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ni(r,e,s);return o.customData._tokenResponse=n,o}function F_(r){return r!==void 0&&r.enterprise!==void 0}class oI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lI(r,e){return fs(r,"GET","/v2/recaptchaConfig",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(r,e){return fs(r,"POST","/v1/accounts:delete",e)}async function gh(r,e){return fs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cI(r,e=!1){const n=Xt(r),s=await n.getIdToken(e),o=yp(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Gl(Tm(o.auth_time)),issuedAtTime:Gl(Tm(o.iat)),expirationTime:Gl(Tm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Tm(r){return Number(r)*1e3}function yp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=M0(n);return o?JSON.parse(o):(nh("Failed to decode base64 JWT payload"),null)}catch(o){return nh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function G_(r){const e=yp(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof vr&&hI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function hI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Zl(r,gh(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?W0(u.providerUserInfo):[],m=mI(r.providerData,f),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new km(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,b)}async function dI(r){const e=Xt(r);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function W0(r){return r.map(e=>{var{providerId:n}=e,s=mp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(r,e){const n=await $0(r,{},async()=>{const s=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await X0(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Eo(r.emulatorConfig.host)&&(p.credentials="include"),Y0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gI(r,e){return fs(r,"POST","/v2/accounts:revokeToken",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=G_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await pI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new no;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=mp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new km(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cI(this,e)}reload(){return dI(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await yh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Zl(this,uI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,C=(f=n.photoURL)!==null&&f!==void 0?f:void 0,U=(m=n.tenantId)!==null&&m!==void 0?m:void 0,O=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,j=(g=n.createdAt)!==null&&g!==void 0?g:void 0,q=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:F,emailVerified:X,isAnonymous:Q,providerData:J,stsTokenManager:I}=n;Ie(F&&I,e,"internal-error");const R=no.fromJSON(this.name,I);Ie(typeof F=="string",e,"internal-error"),Qr(b,e.name),Qr(S,e.name),Ie(typeof X=="boolean",e,"internal-error"),Ie(typeof Q=="boolean",e,"internal-error"),Qr(P,e.name),Qr(C,e.name),Qr(U,e.name),Qr(O,e.name),Qr(j,e.name),Qr(q,e.name);const x=new oi({uid:F,auth:e,email:S,emailVerified:X,displayName:b,isAnonymous:Q,photoURL:C,phoneNumber:P,tenantId:U,stsTokenManager:R,createdAt:j,lastLoginAt:q});return J&&Array.isArray(J)&&(x.providerData=J.map(V=>Object.assign({},V))),O&&(x._redirectEventId=O),x}static async _fromIdTokenResponse(e,n,s=!1){const o=new no;o.updateFromServerResponse(n);const u=new oi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await yh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?W0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new no;m.updateFromIdToken(s);const p=new oi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;function ur(r){mr(r instanceof Function,"Expected a class definition");let e=K_.get(r);return e?(mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,K_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Z0.type="NONE";const Q_=Z0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(r,e,n){return`firebase:${r}:${e}:${n}`}class io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=ih(this.userKey,o.apiKey,u),this.fullPersistenceKey=ih("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gh(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new io(ur(Q_),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ur(Q_);const f=ih(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let b;if(typeof E=="string"){const S=await gh(e,{idToken:E}).catch(()=>{});if(!S)break;b=await oi._fromGetAccountInfoResponse(e,S,E)}else b=oi._fromJSON(e,E);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new io(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new io(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rT(e))return"Blackberry";if(sT(e))return"Webos";if(eT(e))return"Safari";if((e.includes("chrome/")||tT(e))&&!e.includes("edge/"))return"Chrome";if(iT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function J0(r=dn()){return/firefox\//i.test(r)}function eT(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tT(r=dn()){return/crios\//i.test(r)}function nT(r=dn()){return/iemobile/i.test(r)}function iT(r=dn()){return/android/i.test(r)}function rT(r=dn()){return/blackberry/i.test(r)}function sT(r=dn()){return/webos/i.test(r)}function vp(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yI(r=dn()){var e;return vp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vI(){return O1()&&document.documentMode===10}function aT(r=dn()){return vp(r)||iT(r)||sT(r)||rT(r)||/windows phone/i.test(r)||nT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,e=[]){let n;switch(r){case"Browser":n=Y_(dn());break;case"Worker":n=`${Y_(dn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e={}){return fs(r,"GET","/v2/passwordPolicy",na(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=6;class SI{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:TI,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $_(this),this.idTokenSubscription=new $_(this),this.beforeStateQueue=new _I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gh(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(ns(this));const n=e?Xt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EI(this),n=new SI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await gI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function So(r){return Xt(r)}class $_{constructor(e){this.auth=e,this.observer=null,this.addObserver=B1(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bI(r){jh=r}function lT(r){return jh.loadJS(r)}function wI(){return jh.recaptchaEnterpriseScript}function RI(){return jh.gapiScript}function II(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class CI{constructor(){this.enterprise=new xI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DI="recaptcha-enterprise",uT="NO_RECAPTCHA";class NI{constructor(e){this.type=DI,this.auth=So(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{lI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new oI(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;F_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(uT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&F_(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=wI();p.length!==0&&(p+=m),lT(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function X_(r,e,n,s=!1,o=!1){const u=new NI(r);let f;if(o)f=uT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function W_(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await X_(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await X_(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(r,e){const n=dp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ws(u,e??{}))return o;li(o,"already-initialized")}return n.initialize({options:e})}function MI(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function PI(r,e,n){const s=So(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=cT(e),{host:f,port:m}=VI(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(Ws(g,s.config.emulator)&&Ws(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Eo(f)?(L0(`${u}//${f}${p}`),j0("Auth",!0)):kI()}function cT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function VI(r){const e=cT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Z_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Z_(f)}}}function Z_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function kI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function LI(r,e){return fs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(r,e){return Lh(r,"POST","/v1/accounts:signInWithPassword",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(r,e){return Lh(r,"POST","/v1/accounts:signInWithEmailLink",na(r,e))}async function BI(r,e){return Lh(r,"POST","/v1/accounts:signInWithEmailLink",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends _p{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Jl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(e,n,"signInWithPassword",jI);case"emailLink":return UI(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W_(e,s,"signUpPassword",LI);case"emailLink":return BI(e,{idToken:n,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r,e){return Lh(r,"POST","/v1/accounts:signInWithIdp",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="http://localhost";class Js extends _p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=mp(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new Js(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ro(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:zI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HI(r){const e=jl(Ul(r)).link,n=e?jl(Ul(e)).deep_link_id:null,s=jl(Ul(r)).deep_link_id;return(s?jl(Ul(s)).link:null)||s||n||e||r}class Ep{constructor(e){var n,s,o,u,f,m;const p=jl(Ul(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,b=qI((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&E&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=HI(e);try{return new Ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ep.parseLink(n);return Ie(s,"argument-error"),Jl._fromEmailAndCode(e,s.code,s.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends hT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends mu{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return $r.credential(n,s)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends mu{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends mu{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Wr.credential(n,s)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await oi._fromIdTokenResponse(e,s,o),f=J_(s);return new oo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=J_(s);return new oo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function J_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends vr{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new vh(e,n,s,o)}}function fT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(r,u,e,s):u})}async function FI(r,e,n=!1){const s=await Zl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return oo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(r,e,n=!1){const{auth:s}=r;if(ai(s.app))return Promise.reject(ns(s));const o="reauthenticate";try{const u=await Zl(r,fT(s,o,e,r),n);Ie(u.idToken,s,"internal-error");const f=yp(u.idToken);Ie(f,s,"internal-error");const{sub:m}=f;return Ie(r.uid===m,s,"user-mismatch"),oo._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&li(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(r,e,n=!1){if(ai(r.app))return Promise.reject(ns(r));const s="signIn",o=await fT(r,s,e),u=await oo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function KI(r,e){return dT(So(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(r){const e=So(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function YI(r,e,n){return ai(r.app)?Promise.reject(ns(r)):KI(Xt(r),Ao.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&QI(r),s})}function $I(r,e,n,s){return Xt(r).onIdTokenChanged(e,n,s)}function XI(r,e,n){return Xt(r).beforeAuthStateChanged(e,n)}function mT(r,e,n,s){return Xt(r).onAuthStateChanged(e,n,s)}function WI(r){return Xt(r).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1e3,JI=10;class gT extends pT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);vI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,JI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gT.type="LOCAL";const eC=gT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends pT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yT.type="SESSION";const vT=yT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Uh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await tC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Tp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function iC(r){Oi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function rC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function aC(){return _T()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebaseLocalStorageDb",oC=1,Eh="firebaseLocalStorage",TT="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(r,e){return r.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function lC(){const r=indexedDB.deleteDatabase(ET);return new pu(r).toPromise()}function Lm(){const r=indexedDB.open(ET,oC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Eh,{keyPath:TT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Eh)?e(s):(s.close(),await lC(),e(await Lm()))})})}async function eE(r,e,n){const s=Bh(r,!0).put({[TT]:e,value:n});return new pu(s).toPromise()}async function uC(r,e){const n=Bh(r,!1).get(e),s=await new pu(n).toPromise();return s===void 0?null:s.value}function tE(r,e){const n=Bh(r,!0).delete(e);return new pu(n).toPromise()}const cC=800,hC=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rC(),!this.activeServiceWorker)return;this.sender=new nC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await eE(e,_h,"1"),await tE(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>eE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Bh(o,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const fC=ST;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(r,e){return e?ur(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends _p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mC(r){return dT(r.auth,new Sp(r),r.bypassAuthState)}function pC(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),GI(n,new Sp(r),r.bypassAuthState)}async function gC(r){const{auth:e,user:n}=r;return Ie(n,e,"internal-error"),FI(n,new Sp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:li(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new du(2e3,1e4);class eo extends AT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",rh=new Map;class _C extends AT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const s=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(r,e){const n=AC(e),s=SC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function TC(r,e){rh.set(r._key(),e)}function SC(r){return ur(r._redirectPersistence)}function AC(r){return ih(vC,r.config.apiKey,r.name)}async function bC(r,e,n=!1){if(ai(r.app))return Promise.reject(ns(r));const s=So(r),o=dC(s,e),f=await new _C(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=10*60*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!bT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wC&&this.cachedEventUids.clear(),this.cachedEventUids.has(nE(e))}saveEventToCache(e){this.cachedEventUids.add(nE(e)),this.lastProcessedEventTime=Date.now()}}function nE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function bT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(r,e={}){return fs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DC=/^https?/;async function NC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await CC(r);for(const n of e)try{if(OC(n))return}catch{}li(r,"unauthorized-domain")}function OC(r){const e=Vm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!DC.test(n))return!1;if(xC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new du(3e4,6e4);function iE(){const r=Oi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function PC(r){return new Promise((e,n)=>{var s,o,u;function f(){iE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iE(),n(Ni(r,"network-request-failed"))},timeout:MC.get()})}if(!((o=(s=Oi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Oi().gapi)===null||u===void 0)&&u.load)f();else{const m=II("iframefcb");return Oi()[m]=()=>{gapi.load?f():n(Ni(r,"network-request-failed"))},lT(`${RI()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw sh=null,e})}let sh=null;function VC(r){return sh=sh||PC(r),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new du(5e3,15e3),LC="__/auth/iframe",jC="emulator/auth/iframe",UC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?gp(e,jC):`https://${r.config.authDomain}/${LC}`,s={apiKey:e.apiKey,appName:r.name,v:To},o=BC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${fu(s).slice(1)}`}async function qC(r){const e=await VC(r),n=Oi().gapi;return Ie(n,r,"internal-error"),e.open({where:document.body,url:zC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ni(r,"network-request-failed"),m=Oi().setTimeout(()=>{u(f)},kC.get());function p(){Oi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FC=500,GC=600,KC="_blank",QC="http://localhost";class rE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YC(r,e,n,s=FC,o=GC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},HC),{width:s.toString(),height:o.toString(),top:u,left:f}),g=dn().toLowerCase();n&&(m=tT(g)?KC:n),J0(g)&&(e=e||QC,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[P,C])=>`${S}${P}=${C},`,"");if(yI(g)&&m!=="_self")return $C(e||"",m),new rE(null);const b=window.open(e||"",m,E);Ie(b,r,"popup-blocked");try{b.focus()}catch{}return new rE(b)}function $C(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="__/auth/handler",WC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function sE(r,e,n,s,o,u){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:To,eventId:o};if(e instanceof hT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",U1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))f[E]=b}if(e instanceof mu){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${ZC}=${encodeURIComponent(p)}`:"";return`${JC(r)}?${fu(m).slice(1)}${g}`}function JC({config:r}){return r.emulator?gp(r,WC):`https://${r.authDomain}/${XC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vT,this._completeRedirectFn=bC,this._overrideRedirectResult=TC}async _openPopup(e,n,s,o){var u;mr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await sE(e,n,s,Vm(),o);return YC(e,f,Tp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await sE(e,n,s,Vm(),o);return iC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qC(e),s=new RC(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sm,{type:Sm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Sm];f!==void 0&&n(!!f),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aT()||eT()||vp()}}const tx=ex;var aE="@firebase/auth",oE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rx(r){ao(new Zs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oT(r)},g=new AI(s,o,u,p);return MI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new Zs("auth-internal",e=>{const n=So(e.getProvider("auth").getImmediate());return(s=>new nx(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(aE,oE,ix(r)),ts(aE,oE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=5*60,ax=k0("authIdTokenMaxAge")||sx;let lE=null;const ox=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ax)return;const o=n==null?void 0:n.token;lE!==o&&(lE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lx(r=q0()){const e=dp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=OI(r,{popupRedirectResolver:tx,persistence:[fC,eC,vT]}),s=k0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=ox(u.toString());XI(n,f,()=>f(n.currentUser)),$I(n,m=>f(m))}}const o=P0("auth");return o&&PI(n,`http://${o}`),n}function ux(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}bI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Ni("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",ux().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rx("Browser");var cx="firebase",hx="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(cx,hx,"app");var uE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,wT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.D=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(V,k,z){for(var N=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)N[rt-2]=arguments[rt];return R.prototype[k].apply(V,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,x){x||(x=0);var V=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)V[k]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(k=0;16>k;++k)V[k]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],k=I.g[2];var z=I.g[3],N=R+(z^x&(k^z))+V[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=z+(k^R&(x^k))+V[1]+3905402710&4294967295,z=R+(N<<12&4294967295|N>>>20),N=k+(x^z&(R^x))+V[2]+606105819&4294967295,k=z+(N<<17&4294967295|N>>>15),N=x+(R^k&(z^R))+V[3]+3250441966&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(z^x&(k^z))+V[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=z+(k^R&(x^k))+V[5]+1200080426&4294967295,z=R+(N<<12&4294967295|N>>>20),N=k+(x^z&(R^x))+V[6]+2821735955&4294967295,k=z+(N<<17&4294967295|N>>>15),N=x+(R^k&(z^R))+V[7]+4249261313&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(z^x&(k^z))+V[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=z+(k^R&(x^k))+V[9]+2336552879&4294967295,z=R+(N<<12&4294967295|N>>>20),N=k+(x^z&(R^x))+V[10]+4294925233&4294967295,k=z+(N<<17&4294967295|N>>>15),N=x+(R^k&(z^R))+V[11]+2304563134&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(z^x&(k^z))+V[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=z+(k^R&(x^k))+V[13]+4254626195&4294967295,z=R+(N<<12&4294967295|N>>>20),N=k+(x^z&(R^x))+V[14]+2792965006&4294967295,k=z+(N<<17&4294967295|N>>>15),N=x+(R^k&(z^R))+V[15]+1236535329&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(k^z&(x^k))+V[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=z+(x^k&(R^x))+V[6]+3225465664&4294967295,z=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(z^R))+V[11]+643717713&4294967295,k=z+(N<<14&4294967295|N>>>18),N=x+(z^R&(k^z))+V[0]+3921069994&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^z&(x^k))+V[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=z+(x^k&(R^x))+V[10]+38016083&4294967295,z=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(z^R))+V[15]+3634488961&4294967295,k=z+(N<<14&4294967295|N>>>18),N=x+(z^R&(k^z))+V[4]+3889429448&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^z&(x^k))+V[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=z+(x^k&(R^x))+V[14]+3275163606&4294967295,z=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(z^R))+V[3]+4107603335&4294967295,k=z+(N<<14&4294967295|N>>>18),N=x+(z^R&(k^z))+V[8]+1163531501&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^z&(x^k))+V[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=z+(x^k&(R^x))+V[2]+4243563512&4294967295,z=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(z^R))+V[7]+1735328473&4294967295,k=z+(N<<14&4294967295|N>>>18),N=x+(z^R&(k^z))+V[12]+2368359562&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(x^k^z)+V[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=z+(R^x^k)+V[8]+2272392833&4294967295,z=R+(N<<11&4294967295|N>>>21),N=k+(z^R^x)+V[11]+1839030562&4294967295,k=z+(N<<16&4294967295|N>>>16),N=x+(k^z^R)+V[14]+4259657740&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^z)+V[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=z+(R^x^k)+V[4]+1272893353&4294967295,z=R+(N<<11&4294967295|N>>>21),N=k+(z^R^x)+V[7]+4139469664&4294967295,k=z+(N<<16&4294967295|N>>>16),N=x+(k^z^R)+V[10]+3200236656&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^z)+V[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=z+(R^x^k)+V[0]+3936430074&4294967295,z=R+(N<<11&4294967295|N>>>21),N=k+(z^R^x)+V[3]+3572445317&4294967295,k=z+(N<<16&4294967295|N>>>16),N=x+(k^z^R)+V[6]+76029189&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^z)+V[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=z+(R^x^k)+V[12]+3873151461&4294967295,z=R+(N<<11&4294967295|N>>>21),N=k+(z^R^x)+V[15]+530742520&4294967295,k=z+(N<<16&4294967295|N>>>16),N=x+(k^z^R)+V[2]+3299628645&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(k^(x|~z))+V[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=z+(x^(R|~k))+V[7]+1126891415&4294967295,z=R+(N<<10&4294967295|N>>>22),N=k+(R^(z|~x))+V[14]+2878612391&4294967295,k=z+(N<<15&4294967295|N>>>17),N=x+(z^(k|~R))+V[5]+4237533241&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~z))+V[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=z+(x^(R|~k))+V[3]+2399980690&4294967295,z=R+(N<<10&4294967295|N>>>22),N=k+(R^(z|~x))+V[10]+4293915773&4294967295,k=z+(N<<15&4294967295|N>>>17),N=x+(z^(k|~R))+V[1]+2240044497&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~z))+V[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=z+(x^(R|~k))+V[15]+4264355552&4294967295,z=R+(N<<10&4294967295|N>>>22),N=k+(R^(z|~x))+V[6]+2734768916&4294967295,k=z+(N<<15&4294967295|N>>>17),N=x+(z^(k|~R))+V[13]+1309151649&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~z))+V[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=z+(x^(R|~k))+V[11]+3174756917&4294967295,z=R+(N<<10&4294967295|N>>>22),N=k+(R^(z|~x))+V[2]+718787259&4294967295,k=z+(N<<15&4294967295|N>>>17),N=x+(z^(k|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+z&4294967295}s.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var x=R-this.blockSize,V=this.B,k=this.h,z=0;z<R;){if(k==0)for(;z<=x;)o(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<R;)if(V[k++]=I.charCodeAt(z++),k==this.blockSize){o(this,V),k=0;break}}else for(;z<R;)if(V[k++]=I[z++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=R},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var x=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.u(I),I=Array(16),R=x=0;4>R;++R)for(var V=0;32>V;V+=8)I[x++]=this.g[R]>>>V&255;return I};function u(I,R){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function f(I,R){this.h=R;for(var x=[],V=!0,k=I.length-1;0<=k;k--){var z=I[k]|0;V&&z==R||(x[k]=z,V=!1)}this.g=x}var m={};function p(I){return-128<=I&&128>I?u(I,function(R){return new f([R|0],0>R?-1:0)}):new f([I|0],0>I?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return b;if(0>I)return O(g(-I));for(var R=[],x=1,V=0;I>=x;V++)R[V]=I/x|0,x*=4294967296;return new f(R,0)}function E(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return O(E(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(R,8)),V=b,k=0;k<I.length;k+=8){var z=Math.min(8,I.length-k),N=parseInt(I.substring(k,k+z),R);8>z?(z=g(Math.pow(R,z)),V=V.j(z).add(g(N))):(V=V.j(x),V=V.add(g(N)))}return V}var b=p(0),S=p(1),P=p(16777216);r=f.prototype,r.m=function(){if(U(this))return-O(this).m();for(var I=0,R=1,x=0;x<this.g.length;x++){var V=this.i(x);I+=(0<=V?V:4294967296+V)*R,R*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(U(this))return"-"+O(this).toString(I);for(var R=g(Math.pow(I,6)),x=this,V="";;){var k=X(x,R).g;x=j(x,k.j(R));var z=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=k,C(x))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function U(I){return I.h==-1}r.l=function(I){return I=j(this,I),U(I)?-1:C(I)?0:1};function O(I){for(var R=I.g.length,x=[],V=0;V<R;V++)x[V]=~I.g[V];return new f(x,~I.h).add(S)}r.abs=function(){return U(this)?O(this):this},r.add=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],V=0,k=0;k<=R;k++){var z=V+(this.i(k)&65535)+(I.i(k)&65535),N=(z>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);V=N>>>16,z&=65535,N&=65535,x[k]=N<<16|z}return new f(x,x[x.length-1]&-2147483648?-1:0)};function j(I,R){return I.add(O(R))}r.j=function(I){if(C(this)||C(I))return b;if(U(this))return U(I)?O(this).j(O(I)):O(O(this).j(I));if(U(I))return O(this.j(O(I)));if(0>this.l(P)&&0>I.l(P))return g(this.m()*I.m());for(var R=this.g.length+I.g.length,x=[],V=0;V<2*R;V++)x[V]=0;for(V=0;V<this.g.length;V++)for(var k=0;k<I.g.length;k++){var z=this.i(V)>>>16,N=this.i(V)&65535,rt=I.i(k)>>>16,Qe=I.i(k)&65535;x[2*V+2*k]+=N*Qe,q(x,2*V+2*k),x[2*V+2*k+1]+=z*Qe,q(x,2*V+2*k+1),x[2*V+2*k+1]+=N*rt,q(x,2*V+2*k+1),x[2*V+2*k+2]+=z*rt,q(x,2*V+2*k+2)}for(V=0;V<R;V++)x[V]=x[2*V+1]<<16|x[2*V];for(V=R;V<2*R;V++)x[V]=0;return new f(x,0)};function q(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function F(I,R){this.g=I,this.h=R}function X(I,R){if(C(R))throw Error("division by zero");if(C(I))return new F(b,b);if(U(I))return R=X(O(I),R),new F(O(R.g),O(R.h));if(U(R))return R=X(I,O(R)),new F(O(R.g),R.h);if(30<I.g.length){if(U(I)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var x=S,V=R;0>=V.l(I);)x=Q(x),V=Q(V);var k=J(x,1),z=J(V,1);for(V=J(V,2),x=J(x,2);!C(V);){var N=z.add(V);0>=N.l(I)&&(k=k.add(x),z=N),V=J(V,1),x=J(x,1)}return R=j(I,k.j(R)),new F(k,R)}for(k=b;0<=I.l(R);){for(x=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(x)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=g(x),N=z.j(R);U(N)||0<N.l(I);)x-=V,z=g(x),N=z.j(R);C(z)&&(z=S),k=k.add(z),I=j(I,N)}return new F(k,I)}r.A=function(I){return X(this,I).h},r.and=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],V=0;V<R;V++)x[V]=this.i(V)&I.i(V);return new f(x,this.h&I.h)},r.or=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],V=0;V<R;V++)x[V]=this.i(V)|I.i(V);return new f(x,this.h|I.h)},r.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],V=0;V<R;V++)x[V]=this.i(V)^I.i(V);return new f(x,this.h^I.h)};function Q(I){for(var R=I.g.length+1,x=[],V=0;V<R;V++)x[V]=I.i(V)<<1|I.i(V-1)>>>31;return new f(x,I.h)}function J(I,R){var x=R>>5;R%=32;for(var V=I.g.length-x,k=[],z=0;z<V;z++)k[z]=0<R?I.i(z+x)>>>R|I.i(z+x+1)<<32-R:I.i(z+x);return new f(k,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,wT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,is=f}).apply(typeof uE<"u"?uE:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RT,Bl,IT,ah,jm,CT,xT,DT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var G=c[w];if(!(G in _))break e;_=_[G]}c=c[c.length-1],w=_[c],y=y(w),y!=w&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,w=!1,G={next:function(){if(!w&&_<c.length){var ee=_++;return{value:y(ee,c[ee]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,_){return c.call.apply(c.bind,arguments)}function b(c,y,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),c.apply(y,G)}}return function(){return c.apply(y,arguments)}}function S(c,y,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:b,S.apply(null,arguments)}function P(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function C(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,G,ee){for(var fe=Array(arguments.length-2),He=2;He<arguments.length;He++)fe[He-2]=arguments[He];return y.prototype[G].apply(w,fe)}}function U(c){const y=c.length;if(0<y){const _=Array(y);for(let w=0;w<y;w++)_[w]=c[w];return _}return[]}function O(c,y){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const G=c.length||0,ee=w.length||0;c.length=G+ee;for(let fe=0;fe<ee;fe++)c[G+fe]=w[fe]}else c.push(w)}}class j{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var Q=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function J(c,y,_){for(const w in c)y.call(_,c[w],w,c)}function I(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,y){let _,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(_ in w)c[_]=w[_];for(let ee=0;ee<x.length;ee++)_=x[ee],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function k(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function z(c){m.setTimeout(()=>{throw c},0)}function N(){var c=Ee;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class rt{constructor(){this.h=this.g=null}add(y,_){const w=Qe.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Qe=new j(()=>new te,c=>c.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,he=!1,Ee=new rt,L=()=>{const c=m.Promise.resolve(void 0);ne=()=>{c.then(Z)}};var Z=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){z(_)}var y=Qe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}he=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return c}();function we(c,y){if(ue.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(Q){e:{try{X(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:de[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}C(we,ue);var de={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),me=0;function Ne(c,y,_,w,G){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=G,this.key=++me,this.da=this.fa=!1}function _e(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function mt(c){this.src=c,this.g={},this.h=0}mt.prototype.add=function(c,y,_,w,G){var ee=c.toString();c=this.g[ee],c||(c=this.g[ee]=[],this.h++);var fe=ut(c,y,w,G);return-1<fe?(y=c[fe],_||(y.fa=!1)):(y=new Ne(y,this.src,ee,!!w,G),y.fa=_,c.push(y)),y};function Lt(c,y){var _=y.type;if(_ in c.g){var w=c.g[_],G=Array.prototype.indexOf.call(w,y,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(w,G,1),ee&&(_e(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ut(c,y,_,w){for(var G=0;G<c.length;++G){var ee=c[G];if(!ee.da&&ee.listener==y&&ee.capture==!!_&&ee.ha==w)return G}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),Rn={};function an(c,y,_,w,G){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)an(c,y[ee],_,w,G);return null}return _=Un(_),c&&c[le]?c.K(y,_,g(w)?!!w.capture:!1,G):Et(c,y,_,!1,w,G)}function Et(c,y,_,w,G,ee){if(!y)throw Error("Invalid event type");var fe=g(G)?!!G.capture:!!G,He=Be(c);if(He||(c[ht]=He=new mt(c)),_=He.add(y,_,w,fe,ee),_.proxy)return _;if(w=Ln(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)ye||(G=fe),G===void 0&&(G=!1),c.addEventListener(y.toString(),w,G);else if(c.attachEvent)c.attachEvent(on(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ln(){function c(_){return y.call(c.src,c.listener,_)}const y=Oe;return c}function En(c,y,_,w,G){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)En(c,y[ee],_,w,G);else w=g(w)?!!w.capture:!!w,_=Un(_),c&&c[le]?(c=c.i,y=String(y).toString(),y in c.g&&(ee=c.g[y],_=ut(ee,_,w,G),-1<_&&(_e(ee[_]),Array.prototype.splice.call(ee,_,1),ee.length==0&&(delete c.g[y],c.h--)))):c&&(c=Be(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ut(y,_,w,G)),(_=-1<c?y[c]:null)&&jn(_))}function jn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[le])Lt(y.i,c);else{var _=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(_,w,c.capture):y.detachEvent?y.detachEvent(on(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=Be(y))?(Lt(_,c),_.h==0&&(_.src=null,y[ht]=null)):_e(c)}}}function on(c){return c in Rn?Rn[c]:Rn[c]="on"+c}function Oe(c,y){if(c.da)c=!0;else{y=new we(y,this);var _=c.listener,w=c.ha||c.src;c.fa&&jn(c),c=_.call(w,y)}return c}function Be(c){return c=c[ht],c instanceof mt?c:null}var ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function Un(c){return typeof c=="function"?c:(c[ki]||(c[ki]=function(y){return c.handleEvent(y)}),c[ki])}function ft(){ce.call(this),this.i=new mt(this),this.M=this,this.F=null}C(ft,ce),ft.prototype[le]=!0,ft.prototype.removeEventListener=function(c,y,_,w){En(this,c,y,_,w)};function We(c,y){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new ue(y,c);else if(y instanceof ue)y.target=y.target||c;else{var G=y;y=new ue(w,c),V(y,G)}if(G=!0,_)for(var ee=_.length-1;0<=ee;ee--){var fe=y.g=_[ee];G=mn(fe,w,!0,y)&&G}if(fe=y.g=c,G=mn(fe,w,!0,y)&&G,G=mn(fe,w,!1,y)&&G,_)for(ee=0;ee<_.length;ee++)fe=y.g=_[ee],G=mn(fe,w,!1,y)&&G}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],w=0;w<_.length;w++)_e(_[w]);delete c.g[y],c.h--}}this.F=null},ft.prototype.K=function(c,y,_,w){return this.i.add(String(c),y,!1,_,w)},ft.prototype.L=function(c,y,_,w){return this.i.add(String(c),y,!0,_,w)};function mn(c,y,_,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,ee=0;ee<y.length;++ee){var fe=y[ee];if(fe&&!fe.da&&fe.capture==_){var He=fe.listener,Ut=fe.ha||fe.src;fe.fa&&Lt(c.i,fe),G=He.call(Ut,w)!==!1&&G}}return G&&!w.defaultPrevented}function xt(c,y,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Au(c){c.g=xt(()=>{c.g=null,c.i&&(c.i=!1,Au(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class cf extends ce{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(c){ce.call(this),this.h=c,this.g={}}C(ps,ce);var gs=[];function ys(c){J(c.g,function(y,_){this.g.hasOwnProperty(_)&&jn(y)},c),c.g={}}ps.prototype.N=function(){ps.aa.N.call(this),ys(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=m.JSON.stringify,aa=m.JSON.parse,vs=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function xo(){}xo.prototype.h=null;function Do(c){return c.h||(c.h=c.i())}function No(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){ue.call(this,"d")}C(ji,ue);function Oo(){ue.call(this,"c")}C(Oo,ue);var di={},Mo=null;function _r(){return Mo=Mo||new ft}di.La="serverreachability";function oa(c){ue.call(this,di.La,c)}C(oa,ue);function Er(c){const y=_r();We(y,new oa(y))}di.STAT_EVENT="statevent";function bu(c,y){ue.call(this,di.STAT_EVENT,c),this.stat=y}C(bu,ue);function yt(c){const y=_r();We(y,new bu(y,c))}di.Ma="timingevent";function jt(c,y){ue.call(this,di.Ma,c),this.size=y}C(jt,ue);function Dt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Po(c,y,_,w,G,ee){c.info(function(){if(c.g)if(ee)for(var fe="",He=ee.split("&"),Ut=0;Ut<He.length;Ut++){var Fe=He[Ut].split("=");if(1<Fe.length){var Gt=Fe[0];Fe=Fe[1];var Bt=Gt.split("_");fe=2<=Bt.length&&Bt[1]=="type"?fe+(Gt+"="+Fe+"&"):fe+(Gt+"=redacted&")}}else fe=null;else fe=ee;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+y+`
`+_+`
`+fe})}function hf(c,y,_,w,G,ee,fe){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+y+`
`+_+`
`+ee+" "+fe})}function Tr(c,y,_,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+_s(c,_)+(w?" "+w:"")})}function wu(c,y){c.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function _s(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var fe=1;fe<G.length;fe++)G[fe]=""}}}}return ei(_)}catch{return y}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mi;function pi(){}C(pi,xo),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},mi=new pi;function pn(c,y,_,w){this.j=c,this.i=y,this.l=_,this.R=w||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var Vo={},la={};function ti(c,y,_){c.L=1,c.v=bs(In(y)),c.m=_,c.P=!0,Bi(c,null)}function Bi(c,y){c.F=Date.now(),Es(c),c.A=In(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),zo(_.i,"t",w),c.C=0,_=c.j.J,c.h=new wt,c.g=zu(c.j,_?y:null,!c.m),0<c.O&&(c.M=new cf(S(c.Y,c,c.g),c.O)),y=c.U,_=c.g,w=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(gs[0]=G.toString()),G=gs);for(var ee=0;ee<G.length;ee++){var fe=an(_,G[ee],w||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Er(),Po(c.i,c.u,c.A,c.l,c.R,c.m)}pn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Fn(c)==3?y.j():this.Y(c)},pn.prototype.Y=function(c){try{if(c==this.g)e:{const Bt=Fn(this.g);var y=this.g.Ba();const Yi=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||Mu(this.g)))){this.J||Bt!=4||y==7||(y==8||0>=Yi?Er(3):Er(2)),Ar(this);var _=this.g.Z();this.X=_;t:if(Ru(this)){var w=Mu(this.g);c="";var G=w.length,ee=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),gi(this);var fe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,c+=this.h.i.decode(w[y],{stream:!(ee&&y==G-1)});w.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=_==200,hf(this.i,this.u,this.A,this.l,this.R,Bt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ut=this.g;if((He=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(He)){var Fe=He;break t}}Fe=null}if(_=Fe)Tr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ts(this,_);else{this.o=!1,this.s=3,yt(12),Wt(this),gi(this);break e}}if(this.P){_=!0;let Zt;for(;!this.J&&this.C<fe.length;)if(Zt=Iu(this,fe),Zt==la){Bt==4&&(this.s=4,yt(14),_=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Vo){this.s=4,yt(15),Tr(this.i,this.l,fe,"[Invalid Chunk]"),_=!1;break}else Tr(this.i,this.l,Zt,null),Ts(this,Zt);if(Ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||fe.length!=0||this.h.h||(this.s=1,yt(16),_=!1),this.o=this.o&&_,!_)Tr(this.i,this.l,fe,"[Invalid Chunked Response]"),Wt(this),gi(this);else if(0<fe.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Os(Gt),Gt.M=!0,yt(11))}}else Tr(this.i,this.l,fe,null),Ts(this,fe);Bt==4&&Wt(this),this.o&&!this.J&&(Bt==4?ju(this.j,this):(this.o=!1,Es(this)))}else gf(this.g),_==400&&0<fe.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Wt(this),gi(this)}}}catch{}finally{}};function Ru(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Iu(c,y){var _=c.C,w=y.indexOf(`
`,_);return w==-1?la:(_=Number(y.substring(_,w)),isNaN(_)?Vo:(w+=1,w+_>y.length?la:(y=y.slice(w,w+_),c.C=w+_,y)))}pn.prototype.cancel=function(){this.J=!0,Wt(this)};function Es(c){c.S=Date.now()+c.I,Cu(c,c.I)}function Cu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dt(S(c.ba,c),y)}function Ar(c){c.B&&(m.clearTimeout(c.B),c.B=null)}pn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(wu(this.i,this.A),this.L!=2&&(Er(),yt(17)),Wt(this),this.s=2,gi(this)):Cu(this,this.S-c)};function gi(c){c.j.G==0||c.J||ju(c.j,c)}function Wt(c){Ar(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,ys(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ts(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||ko(_.h,c))){if(!c.K&&ko(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ea(_),va(_);else break e;Ko(_),yt(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=Dt(S(_.Za,_),6e3));if(1>=ca(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Qi(_,11)}else if((c.K||_.g==c)&&Ea(_),!q(y))for(G=_.Da.g.parse(y),y=0;y<G.length;y++){let Fe=G[y];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const Gt=Fe[3];Gt!=null&&(_.la=Gt,_.j.info("VER="+_.la));const Bt=Fe[4];Bt!=null&&(_.Aa=Bt,_.j.info("SVER="+_.Aa));const Yi=Fe[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(w=1.5*Yi,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Zt=c.g;if(Zt){const Ai=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ai){var ee=w.h;ee.g||Ai.indexOf("spdy")==-1&&Ai.indexOf("quic")==-1&&Ai.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(ha(ee,ee.h),ee.h=null))}if(w.D){const Yo=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(w.ya=Yo,st(w.I,w.D,Yo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var fe=c;if(w.qa=Bu(w,w.J?w.ia:null,w.W),fe.K){gn(w.h,fe);var He=fe,Ut=w.L;Ut&&(He.I=Ut),He.B&&(Ar(He),Es(He)),w.g=fe}else ku(w);0<_.i.length&&_a(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Qi(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Qi(_,7):Fo(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}Er(4)}catch{}}var xu=class{constructor(c,y){this.g=c,this.map=y}};function zi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ca(c){return c.h?1:c.g?c.g.size:0}function ko(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function ha(c,y){c.g?c.g.add(y):c.h=y}function gn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}zi.prototype.cancel=function(){if(this.i=Lo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Lo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return U(c.i)}function ff(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,w=0;w<_;w++)y.push(c[w]);return y}y=[],_=0;for(w in c)y[_++]=c[w];return y}function fa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const w in c)y[_++]=w;return y}}}function jo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=fa(c),w=ff(c),G=w.length,ee=0;ee<G;ee++)y.call(void 0,w[ee],_&&_[ee],c)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function df(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),G=null;if(0<=w){var ee=c[_].substring(0,w);G=c[_].substring(w+1)}else ee=c[_];y(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Nt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nt){this.h=c.h,As(this,c.j),this.o=c.o,this.g=c.g,br(this,c.s),this.l=c.l;var y=c.i,_=new Hi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),qi(this,_),this.m=c.m}else c&&(y=String(c).match(Ss))?(this.h=!1,As(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),br(this,y[4]),this.l=zn(y[5]||"",!0),qi(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}Nt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(ws(y,Uo,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ws(y,Uo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ws(_,_.charAt(0)=="/"?mf:Bo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ws(_,da)),c.join("")};function In(c){return new Nt(c)}function As(c,y,_){c.j=_?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function br(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function qi(c,y,_){y instanceof Hi?(c.i=y,Nu(c.i,c.h)):(_||(y=ws(y,pf)),c.i=new Hi(y,c.h))}function st(c,y,_){c.i.set(y,_)}function bs(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ws(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Du),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uo=/[#\/\?@]/g,Bo=/[#\?:]/g,mf=/[#\?]/g,pf=/[#\?@]/g,da=/#/g;function Hi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function qn(c){c.g||(c.g=new Map,c.h=0,c.i&&df(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Hi.prototype,r.add=function(c,y){qn(this),this.i=null,c=yi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Fi(c,y){qn(c),y=yi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Gi(c,y){return qn(c),y=yi(c,y),c.g.has(y)}r.forEach=function(c,y){qn(this),this.g.forEach(function(_,w){_.forEach(function(G){c.call(y,G,w,this)},this)},this)},r.na=function(){qn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let w=0;w<y.length;w++){const G=c[w];for(let ee=0;ee<G.length;ee++)_.push(y[w])}return _},r.V=function(c){qn(this);let y=[];if(typeof c=="string")Gi(this,c)&&(y=y.concat(this.g.get(yi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},r.set=function(c,y){return qn(this),this.i=null,c=yi(this,c),Gi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function zo(c,y,_){Fi(c,y),0<_.length&&(c.i=null,c.g.set(yi(c,y),U(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var w=y[_];const ee=encodeURIComponent(String(w)),fe=this.V(w);for(w=0;w<fe.length;w++){var G=ee;fe[w]!==""&&(G+="="+encodeURIComponent(String(fe[w]))),c.push(G)}}return this.i=c.join("&")};function yi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Nu(c,y){y&&!c.j&&(qn(c),c.i=null,c.g.forEach(function(_,w){var G=w.toLowerCase();w!=G&&(Fi(this,w),zo(this,G,_))},c)),c.j=y}function Rs(c,y){const _=new Bn;if(m.Image){const w=new Image;w.onload=P(Hn,_,"TestLoadImage: loaded",!0,y,w),w.onerror=P(Hn,_,"TestLoadImage: error",!1,y,w),w.onabort=P(Hn,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=P(Hn,_,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function ni(c,y){const _=new Bn,w=new AbortController,G=setTimeout(()=>{w.abort(),Hn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(ee=>{clearTimeout(G),ee.ok?Hn(_,"TestPingServer: ok",!0,y):Hn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Hn(_,"TestPingServer: error",!1,y)})}function Hn(c,y,_,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(_)}catch{}}function Is(){this.g=new vs}function vi(c,y,_){const w=_||"";try{jo(c,function(G,ee){let fe=G;g(G)&&(fe=ei(G)),y.push(w+ee+"="+encodeURIComponent(fe))})}catch(G){throw y.push(w+"type="+encodeURIComponent("_badmap")),G}}function wr(c){this.l=c.Ub||null,this.j=c.eb||!1}C(wr,xo),wr.prototype.g=function(){return new Ki(this.l,this.j)},wr.prototype.i=function(c){return function(){return c}}({});function Ki(c,y){ft.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ki,ft),r=Ki.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ei(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?_i(this):Ei(this),this.readyState==3&&qo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,_i(this))},r.Qa=function(c){this.g&&(this.response=c,_i(this))},r.ga=function(){this.g&&_i(this)};function _i(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ei(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function Ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ho(c){let y="";return J(c,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function Ft(c,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Ho(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):st(c,y,_))}function Je(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Je,ft);var ma=/^https?$/i,Cs=["POST","PUT"];r=Je.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mi.g(),this.v=this.o?Do(this.o):Do(mi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(ee){Ou(this,ee);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)_.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const ee of w.keys())_.set(ee,w.get(ee));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Cs,y,void 0))||w||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,fe]of _)this.g.setRequestHeader(ee,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xs(this),this.u=!0,this.g.send(c),this.u=!1}catch(ee){Ou(this,ee)}};function Ou(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,pa(c),Ti(c)}function pa(c){c.A||(c.A=!0,We(c,"complete"),We(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,We(this,"complete"),We(this,"abort"),Ti(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ti(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ga(this):this.bb())},r.bb=function(){ga(this)};function ga(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)xt(c.Ea,0,c);else if(We(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=fe===0){var G=String(c.D).match(Ss)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),w=!ma.test(G?G.toLowerCase():"")}_=w}if(_)We(c,"complete"),We(c,"success");else{c.m=6;try{var ee=2<Fn(c)?c.g.statusText:""}catch{ee=""}c.l=ee+" ["+c.Z()+"]",pa(c)}}finally{Ti(c)}}}}function Ti(c,y){if(c.g){xs(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||We(c,"ready");try{_.onreadystatechange=w}catch{}}}function xs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),aa(y)}};function Mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(c){const y={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(q(c[w]))continue;var _=k(c[w]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=y[G]||[];y[G]=ee,ee.push(_)}I(y,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function ya(c){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,c),this.cb=Ds("retryDelaySeedMs",1e4,c),this.Wa=Ds("forwardChannelMaxRetries",2,c),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(c&&c.concurrentRequestLimit),this.Da=new Is,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(c,y,_,w){yt(0),this.W=c,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Bu(this,null,this.W),_a(this)};function Fo(c){if(Pu(c),c.G==3){var y=c.U++,_=In(c.I);if(st(_,"SID",c.K),st(_,"RID",y),st(_,"TYPE","terminate"),Ns(c,_),y=new pn(c,c.j,y),y.L=2,y.v=bs(In(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=zu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Es(y)}Uu(c)}function va(c){c.g&&(Os(c),c.g.cancel(),c.g=null)}function Pu(c){va(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function _a(c){if(!ua(c.h)&&!c.s){c.s=!0;var y=c.Ga;ne||L(),he||(ne(),he=!0),Ee.add(y,c),c.B=0}}function yf(c,y){return ca(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dt(S(c.Ga,c,y),Qo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new pn(this,this.j,c);let ee=this.o;if(this.S&&(ee?(ee=R(ee),V(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Vu(this,G,y),_=In(this.I),st(_,"RID",c),st(_,"CVER",22),this.D&&st(_,"X-HTTP-Session-Id",this.D),Ns(this,_),ee&&(this.O?y="headers="+encodeURIComponent(String(Ho(ee)))+"&"+y:this.m&&Ft(_,this.m,ee)),ha(this.h,G),this.Ua&&st(_,"TYPE","init"),this.P?(st(_,"$req",y),st(_,"SID","null"),G.T=!0,ti(G,_,null)):ti(G,_,y),this.G=2}}else this.G==3&&(c?Go(this,c):this.i.length==0||ua(this.h)||Go(this))};function Go(c,y){var _;y?_=y.l:_=c.U++;const w=In(c.I);st(w,"SID",c.K),st(w,"RID",_),st(w,"AID",c.T),Ns(c,w),c.m&&c.o&&Ft(w,c.m,c.o),_=new pn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Vu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ha(c.h,_),ti(_,w,y)}function Ns(c,y){c.H&&J(c.H,function(_,w){st(y,w,_)}),c.l&&jo({},function(_,w){st(y,w,_)})}function Vu(c,y,_){_=Math.min(c.i.length,_);var w=c.l?S(c.l.Na,c.l,c):null;e:{var G=c.i;let ee=-1;for(;;){const fe=["count="+_];ee==-1?0<_?(ee=G[0].g,fe.push("ofs="+ee)):ee=0:fe.push("ofs="+ee);let He=!0;for(let Ut=0;Ut<_;Ut++){let Fe=G[Ut].g;const Gt=G[Ut].map;if(Fe-=ee,0>Fe)ee=Math.max(0,G[Ut].g-100),He=!1;else try{vi(Gt,fe,"req"+Fe+"_")}catch{w&&w(Gt)}}if(He){w=fe.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,w}function ku(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ne||L(),he||(ne(),he=!0),Ee.add(y,c),c.v=0}}function Ko(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dt(S(c.Fa,c),Qo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dt(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),va(this),Lu(this))};function Os(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new pn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=In(c.qa);st(y,"RID","rpc"),st(y,"SID",c.K),st(y,"AID",c.T),st(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(y,"TO",c.ja),st(y,"TYPE","xmlhttp"),Ns(c,y),c.m&&c.o&&Ft(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=bs(In(y)),_.m=null,_.P=!0,Bi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,va(this),Ko(this),yt(19))};function Ea(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ju(c,y){var _=null;if(c.g==y){Ea(c),Os(c),c.g=null;var w=2}else if(ko(c.h,y))_=y.D,gn(c.h,y),w=1;else return;if(c.G!=0){if(y.o)if(w==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var G=c.B;w=_r(),We(w,new jt(w,_)),_a(c)}else ku(c);else if(G=y.s,G==3||G==0&&0<y.X||!(w==1&&yf(c,y)||w==2&&Ko(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),G){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function Qo(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function Qi(c,y){if(c.j.info("Error code "+y),y==2){var _=S(c.fb,c),w=c.Xa;const G=!w;w=new Nt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||As(w,"https"),bs(w),G?Rs(w.toString(),_):ni(w.toString(),_)}else yt(2);c.G=0,c.l&&c.l.sa(y),Uu(c),Pu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Uu(c){if(c.G=0,c.ka=[],c.l){const y=Lo(c.h);(y.length!=0||c.i.length!=0)&&(O(c.ka,y),O(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function Bu(c,y,_){var w=_ instanceof Nt?In(_):new Nt(_);if(w.g!="")y&&(w.g=y+"."+w.g),br(w,w.s);else{var G=m.location;w=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ee=new Nt(null);w&&As(ee,w),y&&(ee.g=y),G&&br(ee,G),_&&(ee.l=_),w=ee}return _=c.D,y=c.ya,_&&y&&st(w,_,y),st(w,"VER",c.la),Ns(c,w),w}function zu(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Je(new wr({eb:_})):new Je(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}r=qu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ta(){}Ta.prototype.g=function(c,y){return new yn(c,y)};function yn(c,y){ft.call(this),this.g=new ya(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!q(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!q(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Si(this)}C(yn,ft),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Fo(this.g)},yn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ei(c),c=_);y.i.push(new xu(y.Ya++,c)),y.G==3&&_a(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,Fo(this.g),delete this.g,yn.aa.N.call(this)};function Hu(c){ji.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}C(Hu,ji);function Fu(){Oo.call(this),this.status=1}C(Fu,Oo);function Si(c){this.g=c}C(Si,qu),Si.prototype.ua=function(){We(this.g,"a")},Si.prototype.ta=function(c){We(this.g,new Hu(c))},Si.prototype.sa=function(c){We(this.g,new Fu)},Si.prototype.ra=function(){We(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,DT=function(){return new Ta},xT=function(){return _r()},CT=di,jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,ah=Sr,Ui.COMPLETE="complete",IT=Ui,No.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Bl=No,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,RT=Je}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const cE="@firebase/firestore",hE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new hp("@firebase/firestore");function Xa(){return ea.logLevel}function pe(r,...e){if(ea.logLevel<=ze.DEBUG){const n=e.map(Ap);ea.debug(`Firestore (${bo}): ${r}`,...n)}}function pr(r,...e){if(ea.logLevel<=ze.ERROR){const n=e.map(Ap);ea.error(`Firestore (${bo}): ${r}`,...n)}}function lo(r,...e){if(ea.logLevel<=ze.WARN){const n=e.map(Ap);ea.warn(`Firestore (${bo}): ${r}`,...n)}}function Ap(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,NT(r,s,n)}function NT(r,e,n){let s=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pr(s),new Error(s)}function et(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||NT(e,o,s)}function Me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mx{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new OT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class px{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gx{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new px(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const s=u=>{u.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=vx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function Um(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return ke(s,o);{const u=MT(),f=_x(u.encode(dE(r,n)),u.encode(dE(e,n)));return f!==0?f:ke(s,o)}}n+=s>65535?2:1}return ke(r.length,e.length)}function dE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function _x(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return ke(r[n],e[n]);return ke(r.length,e.length)}function uo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=-62135596800,pE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*pE);return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mE)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pE}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-mE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new gt(0,0))}static max(){return new De(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__name__";class Di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ce(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Di.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=Di.isNumericId(e),o=Di.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Di.extractNumericId(e).compare(Di.extractNumericId(n)):Um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class pt extends Di{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const Ex=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Di{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return Ex.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gE}static keyField(){return new rn([gE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function Tx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new as(o,Se.empty(),e)}function Sx(r){return new as(r.readTime,r.key,eu)}class as{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new as(De.min(),Se.empty(),eu)}static max(){return new as(De.max(),Se.empty(),eu)}}function Ax(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(r){if(r.code!==oe.FAILED_PRECONDITION||r.message!==bx)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,s)=>{n(e)})}static reject(e){return new ae((n,s)=>{s(e)})}static waitFor(e){return new ae((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=ae.resolve(!1);for(const s of e)n=n.next(o=>o?ae.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ae((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new ae((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function Rx(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ro(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=-1;function qh(r){return r==null}function Th(r){return r===0&&1/r==-1/0}function Ix(r){return typeof r=="number"&&Number.isInteger(r)&&!Th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="";function Cx(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=yE(e)),e=xx(r.get(n),e);return yE(e)}function xx(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case VT:n+="";break;default:n+=u}}return n}function yE(r){return r+VT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ds(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function kT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _E(this.data.getIterator())}getIteratorFrom(e){return new _E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class _E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Ht(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new LT("Invalid base64 string: "+u):u}}(e);return new sn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const Dx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(r){if(et(!!r,39018),typeof r=="string"){let e=0;const n=Dx.exec(r);if(et(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ls(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="server_timestamp",UT="__type__",BT="__previous_value__",zT="__local_write_time__";function wp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[UT])===null||n===void 0?void 0:n.stringValue)===jT}function Hh(r){const e=r.mapValue.fields[BT];return wp(e)?Hh(e):e}function tu(r){const e=os(r.mapValue.fields[zT].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,s,o,u,f,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Sh="(default)";class nu{constructor(e,n){this.projectId=e,this.database=n||Sh}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="__type__",Ox="__max__",$c={mapValue:{}},HT="__vector__",Ah="value";function us(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wp(r)?4:Px(r)?9007199254740991:Mx(r)?10:11:Ce(28295,{value:r})}function Vi(r,e){if(r===e)return!0;const n=us(r);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tu(r).isEqual(tu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=os(o.timestampValue),m=os(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return ls(o.bytesValue).isEqual(ls(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Ct(o.doubleValue),m=Ct(u.doubleValue);return f===m?Th(f)===Th(m):isNaN(f)&&isNaN(m)}return!1}(r,e);case 9:return uo(r.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(vE(f)!==vE(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Vi(f[p],m[p])))return!1;return!0}(r,e);default:return Ce(52216,{left:r})}}function iu(r,e){return(r.values||[]).find(n=>Vi(n,e))!==void 0}function co(r,e){if(r===e)return 0;const n=us(r),s=us(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return function(u,f){const m=Ct(u.integerValue||u.doubleValue),p=Ct(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return EE(r.timestampValue,e.timestampValue);case 4:return EE(tu(r),tu(e));case 5:return Um(r.stringValue,e.stringValue);case 6:return function(u,f){const m=ls(u),p=ls(f);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ke(m[g],p[g]);if(E!==0)return E}return ke(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const m=ke(Ct(u.latitude),Ct(f.latitude));return m!==0?m:ke(Ct(u.longitude),Ct(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return TE(r.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const b=u.fields||{},S=f.fields||{},P=(m=b[Ah])===null||m===void 0?void 0:m.arrayValue,C=(p=S[Ah])===null||p===void 0?void 0:p.arrayValue,U=ke(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((E=C==null?void 0:C.values)===null||E===void 0?void 0:E.length)||0);return U!==0?U:TE(P,C)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===$c.mapValue&&f===$c.mapValue)return 0;if(u===$c.mapValue)return 1;if(f===$c.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const S=Um(p[b],E[b]);if(S!==0)return S;const P=co(m[p[b]],g[E[b]]);if(P!==0)return P}return ke(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ce(23264,{Pe:n})}}function EE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=os(r),s=os(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function TE(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=co(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function ho(r){return Bm(r)}function Bm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=os(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return ls(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Se.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Bm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Bm(n.fields[f])}`;return o+"}"}(r.mapValue):Ce(61005,{value:r})}function oh(r){switch(us(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(r);return e?16+oh(e):16;case 5:return 2*r.stringValue.length;case 6:return ls(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+oh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ds(s.fields,(u,f)=>{o+=u.length+oh(f)}),o}(r.mapValue);default:throw Ce(13486,{value:r})}}function SE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zm(r){return!!r&&"integerValue"in r}function Rp(r){return!!r&&"arrayValue"in r}function AE(r){return!!r&&"nullValue"in r}function bE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function lh(r){return!!r&&"mapValue"in r}function Mx(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[qT])===null||n===void 0?void 0:n.stringValue)===HT}function Kl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ds(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Kl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function Px(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ox}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Kl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ds(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new wn(Kl(this.value))}}function FT(r){const e=[];return ds(r.fields,(n,s)=>{const o=new rn([n]);if(lh(s)){const u=FT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,De.min(),De.min(),De.min(),wn.empty(),0)}static newFoundDocument(e,n,s,o){return new fn(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new fn(e,2,n,De.min(),De.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,De.min(),De.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.position=e,this.inclusive=n}}function wE(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Se.comparator(Se.fromName(f.referenceValue),n.key):s=co(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function RE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Vi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class Vt extends GT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Lx(e,n,s):n==="array-contains"?new Bx(e,s):n==="in"?new zx(e,s):n==="not-in"?new qx(e,s):n==="array-contains-any"?new Hx(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new jx(e,s):new Ux(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends GT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ui(e,n)}matches(e){return KT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function KT(r){return r.op==="and"}function QT(r){return kx(r)&&KT(r)}function kx(r){for(const e of r.filters)if(e instanceof ui)return!1;return!0}function qm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+ho(r.value);if(QT(r))return r.filters.map(e=>qm(e)).join(",");{const e=r.filters.map(n=>qm(n)).join(",");return`${r.op}(${e})`}}function YT(r,e){return r instanceof Vt?function(s,o){return o instanceof Vt&&s.op===o.op&&s.field.isEqual(o.field)&&Vi(s.value,o.value)}(r,e):r instanceof ui?function(s,o){return o instanceof ui&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&YT(f,o.filters[m]),!0):!1}(r,e):void Ce(19439)}function $T(r){return r instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(r):r instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map($T).join(" ,")+"}"}(r):"Filter"}class Lx extends Vt{constructor(e,n,s){super(e,n,s),this.key=Se.fromName(s.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class jx extends Vt{constructor(e,n){super(e,"in",n),this.keys=XT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ux extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=XT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Se.fromName(s.referenceValue))}class Bx extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&iu(n.arrayValue,this.value)}}class zx extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&iu(this.value.arrayValue,n)}}class qx extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!iu(this.value.arrayValue,n)}}class Hx extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>iu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function IE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new Fx(r,e,n,s,o,u,f)}function Ip(r){const e=Me(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>qm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ho(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ho(s)).join(",")),e.Ie=n}return e.Ie}function Cp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Vx(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!YT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!RE(r.startAt,e.startAt)&&RE(r.endAt,e.endAt)}function Hm(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Gx(r,e,n,s,o,u,f,m){return new gu(r,e,n,s,o,u,f,m)}function xp(r){return new gu(r)}function CE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function WT(r){return r.collectionGroup!==null}function Ql(r){const e=Me(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ht(rn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new wh(u,s))}),n.has(rn.keyField().canonicalString())||e.Ee.push(new wh(rn.keyField(),s))}return e.Ee}function Mi(r){const e=Me(r);return e.de||(e.de=Kx(e,Ql(r))),e.de}function Kx(r,e){if(r.limitType==="F")return IE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new wh(o.field,u)});const n=r.endAt?new bh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new bh(r.startAt.position,r.startAt.inclusive):null;return IE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Fm(r,e){const n=r.filters.concat([e]);return new gu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Gm(r,e,n){return new gu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Fh(r,e){return Cp(Mi(r),Mi(e))&&r.limitType===e.limitType}function ZT(r){return`${Ip(Mi(r))}|lt:${r.limitType}`}function Wa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>$T(o)).join(", ")}]`),qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ho(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ho(o)).join(",")),`Target(${s})`}(Mi(r))}; limitType=${r.limitType})`}function Gh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Se.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=wE(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,Ql(s),o)||s.endAt&&!function(f,m,p){const g=wE(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,Ql(s),o))}(r,e)}function Qx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function JT(r){return(e,n)=>{let s=!1;for(const o of Ql(r)){const u=Yx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Yx(r,e,n){const s=r.field.isKeyField()?Se.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?co(p,g):Ce(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new St(Se.comparator);function gr(){return $x}const eS=new St(Se.comparator);function zl(...r){let e=eS;for(const n of r)e=e.insert(n.key,n);return e}function tS(r){let e=eS;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $s(){return Yl()}function nS(){return Yl()}function Yl(){return new ia(r=>r.toString(),(r,e)=>r.isEqual(e))}const Xx=new St(Se.comparator),Wx=new Ht(Se.comparator);function qe(...r){let e=Wx;for(const n of r)e=e.add(n);return e}const Zx=new Ht(ke);function Jx(){return Zx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function iS(r){return{integerValue:""+r}}function eD(r,e){return Ix(e)?iS(e):Dp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function tD(r,e,n){return r instanceof ru?function(o,u){const f={fields:{[UT]:{stringValue:jT},[zT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wp(u)&&(u=Hh(u)),u&&(f.fields[BT]=u),{mapValue:f}}(n,e):r instanceof su?sS(r,e):r instanceof au?aS(r,e):function(o,u){const f=rS(o,u),m=xE(f)+xE(o.Re);return zm(f)&&zm(o.Re)?iS(m):Dp(o.serializer,m)}(r,e)}function nD(r,e,n){return r instanceof su?sS(r,e):r instanceof au?aS(r,e):n}function rS(r,e){return r instanceof Rh?function(s){return zm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class ru extends Kh{}class su extends Kh{constructor(e){super(),this.elements=e}}function sS(r,e){const n=oS(e);for(const s of r.elements)n.some(o=>Vi(o,s))||n.push(s);return{arrayValue:{values:n}}}class au extends Kh{constructor(e){super(),this.elements=e}}function aS(r,e){let n=oS(e);for(const s of r.elements)n=n.filter(o=>!Vi(o,s));return{arrayValue:{values:n}}}class Rh extends Kh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function xE(r){return Ct(r.integerValue||r.doubleValue)}function oS(r){return Rp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.field=e,this.transform=n}}function rD(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof su&&o instanceof su||s instanceof au&&o instanceof au?uo(s.elements,o.elements,Vi):s instanceof Rh&&o instanceof Rh?Vi(s.Re,o.Re):s instanceof ru&&o instanceof ru}(r.transform,e.transform)}class sD{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qh{}function lS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Np(r.key,Zn.none()):new yu(r.key,r.data,Zn.none());{const n=r.data,s=wn.empty();let o=new Ht(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ms(r.key,s,new Vn(o.toArray()),Zn.none())}}function aD(r,e,n){r instanceof yu?function(o,u,f){const m=o.value.clone(),p=NE(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,e,n):r instanceof ms?function(o,u,f){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=NE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(uS(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function $l(r,e,n,s){return r instanceof yu?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=u.value.clone(),E=OE(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof ms?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=OE(u.fieldTransforms,p,f),E=f.data;return E.setAll(uS(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(r,e,n,s):function(u,f,m){return uh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,e,n)}function oD(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=rS(s.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(s.field,u))}return n||null}function DE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&uo(s,o,(u,f)=>rD(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yu extends Qh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ms extends Qh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uS(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function NE(r,e,n){const s=new Map;et(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,nD(f,m,n[o]))}return s}function OE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,tD(u,f,e))}return s}class Np extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lD extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&aD(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=nS();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=lS(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,s)=>DE(n,s))&&uo(this.baseMutations,e.baseMutations,(n,s)=>DE(n,s))}}class Op{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){et(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return Xx}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Op(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ke;function fD(r){switch(r){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function cS(r){if(r===void 0)return pr("GRPC error has no .code"),oe.UNKNOWN;switch(r){case Pt.OK:return oe.OK;case Pt.CANCELLED:return oe.CANCELLED;case Pt.UNKNOWN:return oe.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return oe.INTERNAL;case Pt.UNAVAILABLE:return oe.UNAVAILABLE;case Pt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Pt.NOT_FOUND:return oe.NOT_FOUND;case Pt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Pt.ABORTED:return oe.ABORTED;case Pt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Pt.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:r})}}(Ke=Pt||(Pt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new is([4294967295,4294967295],0);function ME(r){const e=MT().encode(r),n=new wT;return n.update(e),new Uint8Array(n.digest())}function PE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new is([n,s],0),new is([o,u],0)]}class Mp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(s<0)throw new ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=is.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(is.fromNumber(s)));return o.compare(dD)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=ME(e),[s,o]=PE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);if(!this.be(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Mp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.pe===0)return;const n=ME(e),[s,o]=PE(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Yh(De.min(),o,new St(ke),gr(),qe())}}class vu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vu(s,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class hS{constructor(e,n){this.targetId=e,this.Ce=n}}class fS{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class VE{constructor(){this.Fe=0,this.Me=kE(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),n=qe(),s=qe();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}}),new vu(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=kE()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class mD{constructor(e){this.ze=e,this.je=new Map,this.He=gr(),this.Je=Xc(),this.Ye=Xc(),this.Ze=new St(ke)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(Hm(u))if(s===0){const f=new Se(u.path);this.tt(n,f,fn.newNoDocument(f,De.min()))}else et(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const m=this.ct(e),p=m?this.lt(m,e,f):1;if(p!==0){this.st(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ls(s).toUint8Array()}catch(p){if(p instanceof LT)return lo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Mp(f,o,u)}catch(p){return lo(p instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&Hm(m.target)){const p=new Se(m.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,fn.newNoDocument(p,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let s=qe();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new Yh(e,n,this.Ze,this.He,s);return this.He=gr(),this.Je=Xc(),this.Ye=Xc(),this.Ze=new St(ke),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new VE,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ht(ke),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ht(ke),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new VE),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Xc(){return new St(Se.comparator)}function kE(){return new St(Se.comparator)}const pD={asc:"ASCENDING",desc:"DESCENDING"},gD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yD={and:"AND",or:"OR"};class vD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Km(r,e){return r.useProto3Json||qh(e)?e:{value:e}}function Ih(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function _D(r,e){return Ih(r,e.toTimestamp())}function Pi(r){return et(!!r,49232),De.fromTimestamp(function(n){const s=os(n);return new gt(s.seconds,s.nanos)}(r))}function Pp(r,e){return Qm(r,e).canonicalString()}function Qm(r,e){const n=function(o){return new pt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function mS(r){const e=pt.fromString(r);return et(_S(e),10190,{key:e.toString()}),e}function Ym(r,e){return Pp(r.databaseId,e.path)}function Am(r,e){const n=mS(e);if(n.get(1)!==r.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Se(gS(n))}function pS(r,e){return Pp(r.databaseId,e)}function ED(r){const e=mS(r);return e.length===4?pt.emptyPath():gS(e)}function $m(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gS(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function LE(r,e,n){return{name:Ym(r,e),fields:n.value.mapValue.fields}}function TD(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(et(E===void 0||typeof E=="string",58123),sn.fromBase64String(E||"")):(et(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),sn.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?oe.UNKNOWN:cS(g.code);return new ge(E,g.message||"")}(f);n=new fS(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Am(r,s.document.name),u=Pi(s.document.updateTime),f=s.document.createTime?Pi(s.document.createTime):De.min(),m=new wn({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new ch(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Am(r,s.document),u=s.readTime?Pi(s.readTime):De.min(),f=fn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ch([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Am(r,s.document),u=s.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new hD(o,u),m=s.targetId;n=new hS(m,f)}}return n}function SD(r,e){let n;if(e instanceof yu)n={update:LE(r,e.key,e.value)};else if(e instanceof Np)n={delete:Ym(r,e.key)};else if(e instanceof ms)n={update:LE(r,e.key,e.data),updateMask:ND(e.fieldMask)};else{if(!(e instanceof lD))return Ce(16599,{ft:e.type});n={verify:Ym(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof ru)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof su)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof au)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rh)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Ce(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:_D(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)}(r,e.precondition)),n}function AD(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Pi(o.updateTime):Pi(u);return f.isEqual(De.min())&&(f=Pi(u)),new sD(f,o.transformResults||[])}(n,e))):[]}function bD(r,e){return{documents:[pS(r,e.path)]}}function wD(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=pS(r,o);const u=function(g){if(g.length!==0)return vS(ui.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(S){return{field:Za(S.field),direction:CD(S.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Km(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:n,parent:o}}function RD(r){let e=ED(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){et(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(b){const S=yS(b);return S instanceof ui&&QT(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(S=>function(C){return new wh(Ja(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(b){let S;return S=typeof b=="object"?b.value:b,qh(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(b){const S=!!b.before,P=b.values||[];return new bh(P,S)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const S=!b.before,P=b.values||[];return new bh(P,S)}(n.endAt)),Gx(e,o,f,u,m,"F",p,g)}function ID(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yS(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ja(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(n.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(n.unaryFilter.field);return Vt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(n.unaryFilter.field);return Vt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(r):r.fieldFilter!==void 0?function(n){return Vt.create(Ja(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(s=>yS(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(r):Ce(30097,{filter:r})}function CD(r){return pD[r]}function xD(r){return gD[r]}function DD(r){return yD[r]}function Za(r){return{fieldPath:r.canonicalString()}}function Ja(r){return rn.fromServerFormat(r.fieldPath)}function vS(r){return r instanceof Vt?function(n){if(n.op==="=="){if(bE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NAN"}};if(AE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NAN"}};if(AE(n.value))return{unaryFilter:{field:Za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(n.field),op:xD(n.op),value:n.value}}}(r):r instanceof ui?function(n){const s=n.getFilters().map(o=>vS(o));return s.length===1?s[0]:{compositeFilter:{op:DD(n.op),filters:s}}}(r):Ce(54877,{filter:r})}function ND(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _S(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,s,o,u=De.min(),f=De.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.wt=e}}function MD(r){const e=RD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Cn=new VD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(as.min())}updateCollectionGroup(e,n,s){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class VD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ht(pt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ES=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(ES,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new fo(0)}static lr(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="LruGarbageCollector",kD=1048576;function BE([r,e],[n,s]){const o=ke(r,n);return o===0?ke(e,s):o}class LD{constructor(e){this.Er=e,this.buffer=new Ht(BE),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();BE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){pe(UE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ro(n)?pe(UE,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.mr(3e5)})}}class UD{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(zh.le);const s=new LD(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(jE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jE):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,n))).next(b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),Xa()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function BD(r,e){return new UD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ae.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&$l(s.mutation,o,Vn.empty(),gt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=qe()){const o=$s();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=zl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,qe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=gr();const f=Yl(),m=function(){return Yl()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof ms)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),$l(E.mutation,g,E.mutation.getFieldMask(),gt.now())):f.set(g.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var b;return m.set(g,new qD(E,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Yl();let o=new St((f,m)=>f-m),u=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Vn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const b=(o.get(m.batchId)||qe()).add(p);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,b=nS();E.forEach(S=>{if(!u.has(S)){const P=lS(n.get(S),s.get(S));P!==null&&b.set(S,P),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ae.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ae.resolve($s());let m=eu,p=u;return f.next(g=>ae.forEach(g,(E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?ae.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{p=p.insert(E,S)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,qe())).next(E=>({batchId:m,changes:tS(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=zl();return this.indexManager.getCollectionParents(e,u).next(m=>ae.forEach(m,p=>{const g=function(b,S){return new gu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((b,S)=>{f=f.insert(b,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,fn.newInvalidDocument(E)))});let m=zl();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&$l(E.mutation,g,Vn.empty(),gt.now()),Gh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ae.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:MD(o.bundledQuery),readTime:Pi(o.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.overlays=new St(Se.comparator),this.Qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return ae.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),ae.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),ae.resolve()}getOverlaysForCollection(e,n,s){const o=$s(),u=n.length+1,f=new Se(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new St((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=$s(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=$s(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return ae.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new cD(n,s));let u=this.Qr.get(n);u===void 0&&(u=qe(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.$r=new Ht($t.Ur),this.Kr=new Ht($t.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new $t(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new $t(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Se(new pt([])),s=new $t(n,e),o=new $t(n,e+1),u=[];return this.Kr.forEachInRange([s,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Se(new pt([])),s=new $t(n,e),o=new $t(n,e+1);let u=qe();return this.Kr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new $t(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Se.comparator(e.key,n.key)||ke(e.Zr,n.Zr)}static Wr(e,n){return ke(e.Zr,n.Zr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ht($t.Ur)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new uD(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new $t(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(f)}lookupMutationBatch(e,n){return ae.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?bp:this.nr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],f=>{const m=this.ei(f.Zr);u.push(m)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(ke);return n.forEach(o=>{const u=new $t(o,0),f=new $t(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{s=s.add(m.Zr)})}),ae.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Se.isDocumentKey(u)||(u=u.child(""));const f=new $t(new Se(u),0);let m=new Ht(ke);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},f),ae.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){et(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ae.forEach(n.mutations,o=>{const u=new $t(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new $t(n,0),o=this.Xr.firstAfterOrEqual(s);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.ii=e,this.docs=function(){return new St(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ae.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),ae.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=gr();const f=n.path,m=new Se(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||Ax(Sx(E),s)<=0||(o.has(E.key)||Gh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce(9500)}si(e,n){return ae.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new $D(this)}getSize(e){return ae.resolve(this.size)}}class $D extends zD{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),ae.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.persistence=e,this.oi=new ia(n=>Ip(n),Cp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this._i=0,this.ai=new Vp,this.targetCount=0,this.ui=fo.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),ae.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new fo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Tr(n),ae.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ae.waitFor(u).next(()=>o)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return ae.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),ae.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return ae.resolve(s)}containsKey(e,n){return ae.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.ci={},this.overlays={},this.li=new zh(0),this.hi=!1,this.hi=!0,this.Pi=new KD,this.referenceDelegate=e(this),this.Ti=new XD(this),this.indexManager=new PD,this.remoteDocumentCache=function(o){return new YD(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new OD(n),this.Ei=new FD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new QD(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){pe("MemoryPersistence","Starting transaction:",e);const o=new WD(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ae.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class WD extends wx{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Vi=new Vp,this.mi=null}static fi(e){return new kp(e)}get gi(){if(this.mi)return this.mi;throw Ce(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),ae.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.gi,s=>{const o=Se.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ae.or([()=>ae.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.yi=new ia(s=>Cx(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=BD(this,n)}static fi(e,n){return new Ch(e,n)}di(){}Ai(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return ae.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?ae.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(m=>{m||(s++,u.removeEntry(f,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}Dr(e,n,s){return ae.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ae.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=qe(),o=qe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Lp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return M1()?8:Rx(dn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new ZD;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,f,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Xa()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ae.resolve()):(Xa()<=ze.DEBUG&&pe("QueryEngine","Query:",Wa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Xa()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):ae.resolve())}ws(e,n){if(CE(n))return ae.resolve(null);let s=Mi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Gm(n,null,"F"),s=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=qe(...u);return this.ys.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.vs(n,m);return this.Cs(n,g,f,p.readTime)?this.ws(e,Gm(n,null,"F")):this.Fs(e,g,n,p)}))})))}bs(e,n,s,o){return CE(n)||o.isEqual(De.min())?ae.resolve(null):this.ys.getDocuments(e,s).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,s,o)?ae.resolve(null):(Xa()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(n)),this.Fs(e,f,n,Tx(o,eu)).next(m=>m))})}vs(e,n){let s=new Ht(JT(e));return n.forEach((o,u)=>{Gh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Xa()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.ys.getDocumentsMatchingQuery(e,n,as.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",e2=3e8;class t2{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new St(ke),this.Os=new ia(u=>Ip(u),Cp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function n2(r,e,n,s){return new t2(r,e,n,s)}async function SS(r,e){const n=Me(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=qe();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function i2(r,e){const n=Me(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const b=g.batch,S=b.keys();let P=ae.resolve();return S.forEach(C=>{P=P.next(()=>E.getEntry(p,C)).next(U=>{const O=g.docVersions.get(C);et(O!==null,48541),U.version.compareTo(O)<0&&(b.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),E.addEntry(U)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=qe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function AS(r){const e=Me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function r2(r,e){const n=Me(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,b)=>{const S=o.get(b);if(!S)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,b).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,b)));let P=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(sn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(b,P),function(U,O,j){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=e2?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(S,P,E)&&m.push(n.Ti.updateTargetData(u,P))});let p=gr(),g=qe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(s2(u,f,e.documentUpdates).next(E=>{p=E.qs,g=E.Qs})),!s.isEqual(De.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(b=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ae.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.xs=o,u))}function s2(r,e,n){let s=qe(),o=qe();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=gr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):pe(jp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:f,Qs:o}})}function a2(r,e){const n=Me(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=bp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function o2(r,e){const n=Me(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,ae.resolve(o)):n.Ti.allocateTargetId(s).next(f=>(o=new Zr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Xm(r,e,n){const s=Me(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Ro(f))throw f;pe(jp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function zE(r,e,n){const s=Me(r);let o=De.min(),u=qe();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const b=Me(p),S=b.Os.get(E);return S!==void 0?ae.resolve(b.xs.get(S)):b.Ti.getTargetData(g,E)}(s,f,Mi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?o:De.min(),n?u:qe())).next(m=>(l2(s,Qx(e),m),{documents:m,$s:u})))}function l2(r,e,n){let s=r.Ns.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class qE{constructor(){this.activeTargetIds=Jx()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u2{constructor(){this.xo=new qE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new qE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="ConnectivityMonitor";class FE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pe(HE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){pe(HE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc=null;function Wm(){return Wc===null?Wc=function(){return 268435456+Math.round(2147483648*Math.random())}():Wc++,"0x"+Wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="RestConnection",h2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Sh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const f=Wm(),m=this.jo(e,n.toUriEncodedString());pe(bm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),E=Eo(g);return this.Jo(e,m,p,s,E).then(b=>(pe(bm,`Received RPC '${e}' ${f}: `,b),b),b=>{throw lo(bm,`RPC '${e}' ${f} failed with error: `,b,"url: ",m,"request:",s),b})}Yo(e,n,s,o,u,f){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=h2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class m2 extends f2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Wm();return new Promise((m,p)=>{const g=new RT;g.setWithCredentials(!0),g.listenOnce(IT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case ah.NO_ERROR:const b=g.getResponseJson();pe(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(b)),m(b);break;case ah.TIMEOUT:pe(cn,`RPC '${e}' ${f} timed out`),p(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const S=g.getStatus();if(pe(cn,`RPC '${e}' ${f} failed with status:`,S,"response text:",g.getResponseText()),S>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const C=P==null?void 0:P.error;if(C&&C.status&&C.message){const U=function(j){const q=j.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(q)>=0?q:oe.UNKNOWN}(C.status);p(new ge(U,C.message))}else p(new ge(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{h_:e,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{pe(cn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);pe(cn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",E,s,15)})}I_(e,n,s){const o=Wm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=DT(),m=xT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");pe(cn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const b=f.createWebChannel(E,p);this.E_(b);let S=!1,P=!1;const C=new d2({Zo:O=>{P?pe(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(S||(pe(cn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),pe(cn,`RPC '${e}' stream ${o} sending:`,O),b.send(O))},Xo:()=>b.close()}),U=(O,j,q)=>{O.listen(j,F=>{try{q(F)}catch(X){setTimeout(()=>{throw X},0)}})};return U(b,Bl.EventType.OPEN,()=>{P||(pe(cn,`RPC '${e}' stream ${o} transport opened.`),C.__())}),U(b,Bl.EventType.CLOSE,()=>{P||(P=!0,pe(cn,`RPC '${e}' stream ${o} transport closed`),C.u_(),this.d_(b))}),U(b,Bl.EventType.ERROR,O=>{P||(P=!0,lo(cn,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),C.u_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))}),U(b,Bl.EventType.MESSAGE,O=>{var j;if(!P){const q=O.data[0];et(!!q,16349);const F=q,X=(F==null?void 0:F.error)||((j=F[0])===null||j===void 0?void 0:j.error);if(X){pe(cn,`RPC '${e}' stream ${o} received error:`,X);const Q=X.status;let J=function(x){const V=Pt[x];if(V!==void 0)return cS(V)}(Q),I=X.message;J===void 0&&(J=oe.INTERNAL,I="Unknown error status: "+Q+" with message "+X.message),P=!0,C.u_(new ge(J,I)),b.close()}else pe(cn,`RPC '${e}' stream ${o} received:`,q),C.c_(q)}}),U(m,CT.STAT_EVENT,O=>{O.stat===jm.PROXY?pe(cn,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===jm.NOPROXY&&pe(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(r){return new vD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="PersistentStream";class wS{constructor(e,n,s,o,u,f,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new bS(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new ge(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return pe(GE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(pe(GE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p2 extends wS{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=TD(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?De.min():f.readTime?Pi(f.readTime):De.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=$m(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Hm(p)?{documents:bD(u,p)}:{query:wD(u,p).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=dS(u,f.resumeToken);const g=Km(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(De.min())>0){m.readTime=Ih(u,f.snapshotVersion.toTimestamp());const g=Km(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=ID(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=$m(this.serializer),n.removeTarget=e,this.Q_(n)}}class g2 extends wS{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=AD(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=$m(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>SD(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{}class v2 extends y2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,Qm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(oe.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(e,Qm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ge(oe.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class _2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(pr(n),this.ua=!1):pe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class E2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{s.enqueueAndForget(async()=>{ra(this)&&(pe(ta,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.da.add(4),await _u(g),g.Va.set("Unknown"),g.da.delete(4),await Xh(g)}(this))})}),this.Va=new _2(s,o)}}async function Xh(r){if(ra(r))for(const e of r.Aa)await e(!0)}async function _u(r){for(const e of r.Aa)await e(!1)}function RS(r,e){const n=Me(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),qp(n)?zp(n):Io(n).N_()&&Bp(n,e))}function Up(r,e){const n=Me(r),s=Io(n);n.Ea.delete(e),s.N_()&&IS(n,e),n.Ea.size===0&&(s.N_()?s.k_():ra(n)&&n.Va.set("Unknown"))}function Bp(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(r).Z_(e)}function IS(r,e){r.ma.Ke(e),Io(r).X_(e)}function zp(r){r.ma=new mD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Io(r).start(),r.Va.ca()}function qp(r){return ra(r)&&!Io(r).O_()&&r.Ea.size>0}function ra(r){return Me(r).da.size===0}function CS(r){r.ma=void 0}async function T2(r){r.Va.set("Online")}async function S2(r){r.Ea.forEach((e,n)=>{Bp(r,e)})}async function A2(r,e){CS(r),qp(r)?(r.Va.Pa(e),zp(r)):r.Va.set("Unknown")}async function b2(r,e,n){if(r.Va.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){pe(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xh(r,s)}else if(e instanceof ch?r.ma.Xe(e):e instanceof hS?r.ma.ot(e):r.ma.nt(e),!n.isEqual(De.min()))try{const s=await AS(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ea.get(g);E&&u.Ea.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.Ea.get(p);if(!E)return;u.Ea.set(p,E.withResumeToken(sn.EMPTY_BYTE_STRING,E.snapshotVersion)),IS(u,p);const b=new Zr(E.target,p,g,E.sequenceNumber);Bp(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){pe(ta,"Failed to raise snapshot:",s),await xh(r,s)}}async function xh(r,e,n){if(!Ro(e))throw e;r.da.add(1),await _u(r),r.Va.set("Offline"),n||(n=()=>AS(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{pe(ta,"Retrying IndexedDB access"),await n(),r.da.delete(1),await Xh(r)})}function xS(r,e){return e().catch(n=>xh(r,n,e))}async function Wh(r){const e=Me(r),n=cs(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:bp;for(;w2(e);)try{const o=await a2(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,R2(e,o)}catch(o){await xh(e,o)}DS(e)&&NS(e)}function w2(r){return ra(r)&&r.Ia.length<10}function R2(r,e){r.Ia.push(e);const n=cs(r);n.N_()&&n.ea&&n.ta(e.mutations)}function DS(r){return ra(r)&&!cs(r).O_()&&r.Ia.length>0}function NS(r){cs(r).start()}async function I2(r){cs(r).ia()}async function C2(r){const e=cs(r);for(const n of r.Ia)e.ta(n.mutations)}async function x2(r,e,n){const s=r.Ia.shift(),o=Op.from(s,e,n);await xS(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Wh(r)}async function D2(r,e){e&&cs(r).ea&&await async function(s,o){if(function(f){return fD(f)&&f!==oe.ABORTED}(o.code)){const u=s.Ia.shift();cs(s).L_(),await xS(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wh(s)}}(r,e),DS(r)&&NS(r)}async function KE(r,e){const n=Me(r);n.asyncQueue.verifyOperationInProgress(),pe(ta,"RemoteStore received new credentials");const s=ra(n);n.da.add(3),await _u(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Xh(n)}async function N2(r,e){const n=Me(r);e?(n.da.delete(2),await Xh(n)):e||(n.da.add(2),await _u(n),n.Va.set("Unknown"))}function Io(r){return r.fa||(r.fa=function(n,s,o){const u=Me(n);return u.oa(),new p2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:T2.bind(null,r),n_:S2.bind(null,r),i_:A2.bind(null,r),Y_:b2.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),qp(r)?zp(r):r.Va.set("Unknown")):(await r.fa.stop(),CS(r))})),r.fa}function cs(r){return r.ga||(r.ga=function(n,s,o){const u=Me(n);return u.oa(),new g2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:I2.bind(null,r),i_:D2.bind(null,r),na:C2.bind(null,r),ra:x2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Wh(r)):(await r.ga.stop(),r.Ia.length>0&&(pe(ta,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Hp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(r,e){if(pr("AsyncQueue",`${e}: ${r}`),Ro(r))return new ge(oe.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Se.comparator(n.key,s.key):(n,s)=>Se.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new so;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.pa=new St(Se.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ce(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class mo{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new mo(e,n,so.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class M2{constructor(){this.queries=YE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=YE(),u.forEach((f,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function YE(){return new ia(r=>ZT(r),Fh)}async function OS(r,e){const n=Me(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new O2,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Fp(f,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Gp(n)}async function MS(r,e){const n=Me(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function P2(r,e){const n=Me(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(s=!0);f.ba=o}}s&&Gp(n)}function V2(r,e,n){const s=Me(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Gp(r){r.Ca.forEach(e=>{e.next()})}var Zm,$E;($E=Zm||(Zm={})).xa="default",$E.Cache="cache";class PS{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.key=e}}class kS{constructor(e){this.key=e}}class k2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.Za=JT(e),this.Xa=new so(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new QE,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,b)=>{const S=o.get(E),P=Gh(this.query,b)?b:null,C=!!S&&this.mutatedKeys.has(S.key),U=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let O=!1;S&&P?S.data.isEqual(P.data)?C!==U&&(s.track({type:3,doc:P}),O=!0):this.ru(S,P)||(s.track({type:2,doc:P}),O=!0,(p&&this.Za(P,p)>0||g&&this.Za(P,g)<0)&&(m=!0)):!S&&P?(s.track({type:0,doc:P}),O=!0):S&&!P&&(s.track({type:1,doc:S}),O=!0,(p||g)&&(m=!0)),O&&(P?(f=f.add(P),u=U?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:f,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((E,b)=>function(P,C){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:O})}};return U(P)-U(C)}(E.type,b.type)||this.Za(E.doc,b.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,f.length!==0||g?{snapshot:new mo(this.query,e.Xa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new QE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new kS(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new VS(s))}),n}au(e){this.Ha=e.$s,this.Ya=qe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return mo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Kp="SyncEngine";class L2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class j2{constructor(e){this.key=e,this.cu=!1}}class U2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new ia(m=>ZT(m),Fh),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Se.comparator),this.Eu=new Map,this.du=new Vp,this.Au={},this.Ru=new Map,this.Vu=fo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function B2(r,e,n=!0){const s=qS(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await LS(s,e,n,!0),o}async function z2(r,e){const n=qS(r);await LS(n,e,!0,!1)}async function LS(r,e,n,s){const o=await o2(r.localStore,Mi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await q2(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&RS(r.remoteStore,o),m}async function q2(r,e,n,s,o){r.fu=(b,S,P)=>async function(U,O,j,q){let F=O.view.tu(j);F.Cs&&(F=await zE(U.localStore,O.query,!1).then(({documents:I})=>O.view.tu(I,F)));const X=q&&q.targetChanges.get(O.targetId),Q=q&&q.targetMismatches.get(O.targetId)!=null,J=O.view.applyChanges(F,U.isPrimaryClient,X,Q);return WE(U,O.targetId,J.ou),J.snapshot}(r,b,S,P);const u=await zE(r.localStore,e,!0),f=new k2(e,u.$s),m=f.tu(u.documents),p=vu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=f.applyChanges(m,r.isPrimaryClient,p);WE(r,n,g.ou);const E=new L2(e,n,f);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),g.snapshot}async function H2(r,e,n){const s=Me(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(f=>!Fh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Xm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Up(s.remoteStore,o.targetId),Jm(s,o.targetId)}).catch(wo)):(Jm(s,o.targetId),await Xm(s.localStore,o.targetId,!0))}async function F2(r,e){const n=Me(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Up(n.remoteStore,s.targetId))}async function G2(r,e,n){const s=Z2(r);try{const o=await function(f,m){const p=Me(f),g=gt.now(),E=m.reduce((P,C)=>P.add(C.key),qe());let b,S;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let C=gr(),U=qe();return p.Bs.getEntries(P,E).next(O=>{C=O,C.forEach((j,q)=>{q.isValidDocument()||(U=U.add(j))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,C)).next(O=>{b=O;const j=[];for(const q of m){const F=oD(q,b.get(q.key).overlayedDocument);F!=null&&j.push(new ms(q.key,F,FT(F.value.mapValue),Zn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,j,m)}).next(O=>{S=O;const j=O.applyToLocalDocumentSet(b,U);return p.documentOverlayCache.saveOverlays(P,O.batchId,j)})}).then(()=>({batchId:S.batchId,changes:tS(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Au[f.currentUser.toKey()];g||(g=new St(ke)),g=g.insert(m,p),f.Au[f.currentUser.toKey()]=g}(s,o.batchId,n),await Eu(s,o.changes),await Wh(s.remoteStore)}catch(o){const u=Fp(o,"Failed to persist write");n.reject(u)}}async function jS(r,e){const n=Me(r);try{const s=await r2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?et(f.cu,14607):o.removedDocuments.size>0&&(et(f.cu,42227),f.cu=!1))}),await Eu(n,s,e)}catch(s){await wo(s)}}function XE(r,e,n){const s=Me(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,f)=>{const m=f.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Me(f);p.onlineState=m;let g=!1;p.queries.forEach((E,b)=>{for(const S of b.Sa)S.Fa(m)&&(g=!0)}),g&&Gp(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function K2(r,e,n){const s=Me(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let f=new St(Se.comparator);f=f.insert(u,fn.newNoDocument(u,De.min()));const m=qe().add(u),p=new Yh(De.min(),new Map,new St(ke),f,m);await jS(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Qp(s)}else await Xm(s.localStore,e,!1).then(()=>Jm(s,e,n)).catch(wo)}async function Q2(r,e){const n=Me(r),s=e.batch.batchId;try{const o=await i2(n.localStore,e);BS(n,s,null),US(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eu(n,o)}catch(o){await wo(o)}}async function Y2(r,e,n){const s=Me(r);try{const o=await function(f,m){const p=Me(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(b=>(et(b!==null,37113),E=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);BS(s,e,n),US(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eu(s,o)}catch(o){await wo(o)}}function US(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function BS(r,e,n){const s=Me(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function Jm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||zS(r,s)})}function zS(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Up(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Qp(r))}function WE(r,e,n){for(const s of n)s instanceof VS?(r.du.addReference(s.key,e),$2(r,s)):s instanceof kS?(pe(Kp,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||zS(r,s.key)):Ce(19791,{pu:s})}function $2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(pe(Kp,"New document in limbo: "+n),r.Tu.add(s),Qp(r))}function Qp(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new Se(pt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new j2(n)),r.Iu=r.Iu.insert(n,s),RS(r.remoteStore,new Zr(Mi(xp(n.path)),s,"TargetPurposeLimboResolution",zh.le))}}async function Eu(r,e,n){const s=Me(r),o=[],u=[],f=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{f.push(s.fu(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Lp.Rs(p.targetId,g);u.push(b)}}))}),await Promise.all(f),s.lu.Y_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ae.forEach(g,S=>ae.forEach(S.ds,P=>E.persistence.referenceDelegate.addReference(b,S.targetId,P)).next(()=>ae.forEach(S.As,P=>E.persistence.referenceDelegate.removeReference(b,S.targetId,P)))))}catch(b){if(!Ro(b))throw b;pe(jp,"Failed to update sequence numbers: "+b)}for(const b of g){const S=b.targetId;if(!b.fromCache){const P=E.xs.get(S),C=P.snapshotVersion,U=P.withLastLimboFreeSnapshotVersion(C);E.xs=E.xs.insert(S,U)}}}(s.localStore,u))}async function X2(r,e){const n=Me(r);if(!n.currentUser.isEqual(e)){pe(Kp,"User change. New user:",e.toKey());const s=await SS(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new ge(oe.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eu(n,s.ks)}}function W2(r,e){const n=Me(r),s=n.Eu.get(e);if(s&&s.cu)return qe().add(s.key);{let o=qe();const u=n.Pu.get(e);if(!u)return o;for(const f of u){const m=n.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function qS(r){const e=Me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K2.bind(null,e),e.lu.Y_=P2.bind(null,e.eventManager),e.lu.gu=V2.bind(null,e.eventManager),e}function Z2(r){const e=Me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y2.bind(null,e),e}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return n2(this.persistence,new JD,e.initialUser,this.serializer)}Su(e){return new TS(kp.fi,this.serializer)}bu(e){return new u2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class J2 extends Dh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){et(this.persistence.referenceDelegate instanceof Ch,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jD(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new TS(s=>Ch.fi(s,n),this.serializer)}}class ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>XE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=X2.bind(null,this.syncEngine),await N2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M2}()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),s=function(u){return new m2(u)}(e.databaseInfo);return function(u,f,m,p){return new v2(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new E2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>XE(this.syncEngine,n,0),function(){return FE.C()?new FE:new c2}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const b=new U2(o,u,f,m,p,g);return E&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);pe(ta,"RemoteStore shutting down."),u.da.add(5),await _u(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class eN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=PT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{pe(hs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(pe(hs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Rm(r,e){r.asyncQueue.verifyOperationInProgress(),pe(hs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await SS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function ZE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await tN(r);pe(hs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>KE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>KE(e.remoteStore,o)),r._onlineComponents=e}async function tN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(hs,"Using user provided OfflineComponentProvider");try{await Rm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await Rm(r,new Dh)}}else pe(hs,"Using default OfflineComponentProvider"),await Rm(r,new J2(void 0));return r._offlineComponents}async function FS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(hs,"Using user provided OnlineComponentProvider"),await ZE(r,r._uninitializedComponentsProvider._online)):(pe(hs,"Using default OnlineComponentProvider"),await ZE(r,new ep))),r._onlineComponents}function nN(r){return FS(r).then(e=>e.syncEngine)}async function GS(r){const e=await FS(r),n=e.eventManager;return n.onListen=B2.bind(null,e.syncEngine),n.onUnlisten=H2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=F2.bind(null,e.syncEngine),n}function iN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new HS({next:S=>{E.xu(),f.enqueueAndForget(()=>MS(u,b));const P=S.docs.has(m);!P&&S.fromCache?g.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&p.source==="server"?g.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new PS(xp(m.path),E,{includeMetadataChanges:!0,Qa:!0});return OS(u,b)}(await GS(r),r.asyncQueue,e,n,s)),s.promise}function rN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new HS({next:S=>{E.xu(),f.enqueueAndForget(()=>MS(u,b)),S.fromCache&&p.source==="server"?g.reject(new ge(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new PS(m,E,{includeMetadataChanges:!0,Qa:!0});return OS(u,b)}(await GS(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(r,e,n){if(!n)throw new ge(oe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function sN(r,e,n,s){if(e===!0&&s===!0)throw new ge(oe.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function e0(r){if(!Se.isDocumentKey(r))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function t0(r){if(Se.isDocumentKey(r))throw new ge(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function ci(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(r);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firestore.googleapis.com",n0=!0;class i0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YS,this.ssl=n0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:n0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ES;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kD)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new fx;switch(s.type){case"firstParty":return new gx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=JE.get(n);s&&(pe("ComponentProvider","Removing Datastore"),JE.delete(n),s.terminate())}(this),Promise.resolve()}}function aN(r,e,n,s={}){var o;r=ci(r,Jh);const u=Eo(e),f=r._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(L0(`https://${p}`),j0("Firestore",!0)),f.host!==YS&&f.host!==p&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:s});if(!Ws(g,m)&&(r._setSettings(g),s.mockUserToken)){let E,b;if(typeof s.mockUserToken=="string")E=s.mockUserToken,b=hn.MOCK_USER;else{E=b1(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new hn(S)}r._authCredentials=new dx(new OT(E,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class _n{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class rs extends Co{constructor(e,n,s){super(e,n,xp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Se(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Ye(r,e,...n){if(r=Xt(r),QS("collection","path",e),r instanceof Jh){const s=pt.fromString(e,...n);return t0(s),new rs(r,null,s)}{if(!(r instanceof _n||r instanceof rs))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...n));return t0(s),new rs(r.firestore,null,s)}}function kt(r,e,...n){if(r=Xt(r),arguments.length===1&&(e=PT.newId()),QS("doc","path",e),r instanceof Jh){const s=pt.fromString(e,...n);return e0(s),new _n(r,null,new Se(s))}{if(!(r instanceof _n||r instanceof rs))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(pt.fromString(e,...n));return e0(s),new _n(r.firestore,r instanceof rs?r.converter:null,new Se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="AsyncQueue";class s0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new bS(this,"async_queue_retry"),this.rc=()=>{const s=wm();s&&pe(r0,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new hr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ro(e))throw e;pe(r0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,pr("INTERNAL UNHANDLED ERROR: ",a0(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=Hp.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ce(47125,{cc:a0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function a0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class sa extends Jh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new s0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function oN(r,e){const n=typeof r=="object"?r:q0(),s=typeof r=="string"?r:Sh,o=dp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=S1("firestore");u&&aN(o,...u)}return o}function Yp(r){if(r._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lN(r),r._firestoreClient}function lN(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,g,E){return new Nx(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,KS(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new eN(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(sn.fromBase64String(e))}catch(n){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/^__.*__$/;class cN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class $S{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ic:r})}}class Wp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Nh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(XS(this.Ic)&&uN.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class hN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||$h(e)}bc(e,n,s,o=!1){return new Wp({Ic:e,methodName:n,wc:s,path:rn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nf(r){const e=r._freezeSettings(),n=$h(r._databaseId);return new hN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function WS(r,e,n,s,o,u={}){const f=r.bc(u.merge||u.mergeFields?2:0,e,n,o);Jp("Data must be an object, but it was:",f,s);const m=ZS(s,f);let p,g;if(u.merge)p=new Vn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const S=tp(e,b,n);if(!f.contains(S))throw new ge(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);eA(E,S)||E.push(S)}p=new Vn(E),g=f.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=f.fieldTransforms;return new cN(new wn(m),p,g)}class rf extends tf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}class Zp extends tf{_toFieldTransform(e){return new iD(e.path,new ru)}isEqual(e){return e instanceof Zp}}function fN(r,e,n,s){const o=r.bc(1,e,n);Jp("Data must be an object, but it was:",o,s);const u=[],f=wn.empty();ds(s,(p,g)=>{const E=eg(e,p,n);g=Xt(g);const b=o.mc(E);if(g instanceof rf)u.push(E);else{const S=Tu(g,b);S!=null&&(u.push(E),f.set(E,S))}});const m=new Vn(u);return new $S(f,m,o.fieldTransforms)}function dN(r,e,n,s,o,u){const f=r.bc(1,e,n),m=[tp(e,s,n)],p=[o];if(u.length%2!=0)throw new ge(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(tp(e,u[S])),p.push(u[S+1]);const g=[],E=wn.empty();for(let S=m.length-1;S>=0;--S)if(!eA(g,m[S])){const P=m[S];let C=p[S];C=Xt(C);const U=f.mc(P);if(C instanceof rf)g.push(P);else{const O=Tu(C,U);O!=null&&(g.push(P),E.set(P,O))}}const b=new Vn(g);return new $S(E,b,f.fieldTransforms)}function mN(r,e,n,s=!1){return Tu(n,r.bc(s?4:3,e))}function Tu(r,e){if(JS(r=Xt(r)))return Jp("Unsupported field value:",e,r),ZS(r,e);if(r instanceof tf)return function(s,o){if(!XS(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Tu(m,o.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return eD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gt.fromDate(s);return{timestampValue:Ih(o.serializer,u)}}if(s instanceof gt){const u=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(o.serializer,u)}}if(s instanceof $p)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof po)return{bytesValue:dS(o.serializer,s._byteString)};if(s instanceof _n){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Xp)return function(f,m){return{mapValue:{fields:{[qT]:{stringValue:HT},[Ah]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Dp(m.serializer,g)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${Zh(s)}`)}(r,e)}function ZS(r,e){const n={};return kT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(r,(s,o)=>{const u=Tu(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function JS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof $p||r instanceof po||r instanceof _n||r instanceof tf||r instanceof Xp)}function Jp(r,e,n){if(!JS(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Zh(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function tp(r,e,n){if((e=Xt(e))instanceof ef)return e._internalPath;if(typeof e=="string")return eg(r,e);throw Nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const pN=new RegExp("[~\\*/\\[\\]]");function eg(r,e,n){if(e.search(pN)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new ef(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Nh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ge(oe.INVALID_ARGUMENT,m+r+p)}function eA(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gN extends tA{data(){return super.data()}}function tg(r,e){return typeof e=="string"?eg(r,e):e instanceof ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ng{}class vN extends ng{}function _N(r,e,...n){let s=[];e instanceof ng&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof ig).length,m=u.filter(p=>p instanceof sf).length;if(f>1||f>0&&m>0)throw new ge(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class sf extends vN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new sf(e,n,s)}_apply(e){const n=this._parse(e);return nA(e._query,n),new Co(e.firestore,e.converter,Fm(e._query,n))}_parse(e){const n=nf(e.firestore);return function(u,f,m,p,g,E,b){let S;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){l0(b,E);const C=[];for(const U of b)C.push(o0(p,u,U));S={arrayValue:{values:C}}}else S=o0(p,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||l0(b,E),S=mN(m,f,b,E==="in"||E==="not-in");return Vt.create(g,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function EN(r,e,n){const s=e,o=tg("where",r);return sf._create(o,s,n)}class ig extends ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ig(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)nA(f,p),f=Fm(f,p)}(e._query,n),new Co(e.firestore,e.converter,Fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o0(r,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new ge(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WT(e)&&n.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!Se.isDocumentKey(s))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return SE(r,new Se(s))}if(n instanceof _n)return SE(r,n._key);throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(n)}.`)}function l0(r,e){if(!Array.isArray(r)||r.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(r,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TN{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ds(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Ah].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>Ct(f.doubleValue));return new Xp(u)}convertGeoPoint(e){return new $p(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Hh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const n=os(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);et(_S(s),9688,{name:e});const o=new nu(s.get(1),s.get(3)),u=new Se(s.popFirst(5));return o.isEqual(n)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rA extends tA{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(tg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class hh extends rA{data(e={}){return super.data(e)}}class SN{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new hh(this._firestore,this._userDataWriter,s.key,s,new Hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:AN(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(r){r=ci(r,_n);const e=ci(r.firestore,sa);return iN(Yp(e),r._key).then(n=>bN(e,r,n))}class sA extends TN{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function it(r){r=ci(r,Co);const e=ci(r.firestore,sa),n=Yp(e),s=new sA(e);return yN(r._query),rN(n,r._query).then(o=>new SN(e,s,r,o))}function ou(r,e,n){r=ci(r,_n);const s=ci(r.firestore,sa),o=iA(r.converter,e,n);return of(s,[WS(nf(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Zn.none())])}function rg(r,e,n,...s){r=ci(r,_n);const o=ci(r.firestore,sa),u=nf(o);let f;return f=typeof(e=Xt(e))=="string"||e instanceof ef?dN(u,"updateDoc",r._key,e,n,s):fN(u,"updateDoc",r._key,e),of(o,[f.toMutation(r._key,Zn.exists(!0))])}function Su(r){return of(ci(r.firestore,sa),[new Np(r._key,Zn.none())])}function af(r,e){const n=ci(r.firestore,sa),s=kt(r),o=iA(r.converter,e);return of(n,[WS(nf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Zn.exists(!1))]).then(()=>s)}function of(r,e){return function(s,o){const u=new hr;return s.asyncQueue.enqueueAndForget(async()=>G2(await nN(s),o,u)),u.promise}(Yp(r),e)}function bN(r,e,n){const s=n.docs.get(e._key),o=new sA(r);return new rA(r,o,e._key,s,new Hl(n.hasPendingWrites,n.fromCache),e.converter)}function Xs(){return new Zp("serverTimestamp")}(function(e,n=!0){(function(o){bo=o})(To),ao(new Zs("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new sa(new mx(s.getProvider("auth-internal")),new yx(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ts(cE,hE,e),ts(cE,hE,"esm2017")})();const wN={apiKey:"AIzaSyBIfGyeHMc_0LPtX5qbeqQrabX6wXvs_kI",authDomain:"flashcompauth.firebaseapp.com",projectId:"flashcompauth",storageBucket:"flashcompauth.appspot.com",messagingSenderId:"466092936876",appId:"1:466092936876:web:0ab1780cc4fc96327a5909"},aA=z0(wN),lf=lx(aA),Ae=oN(aA),RN=()=>{yr("");const[r,e]=D.useState(""),[n,s]=D.useState(""),[o,u]=D.useState(""),f=_o(),m=kn(),p=async()=>{var E,b;const g=((b=(E=m.state)==null?void 0:E.from)==null?void 0:b.pathname)||"/dashboard";try{await YI(lf,r,n),u(" ..."),setTimeout(()=>f(g,{replace:!0}),600)}catch(S){u(" : "+S.message)}};return v.jsxs("div",{style:{padding:"2em",maxWidth:"400px",margin:"auto"},children:[v.jsx("h2",{children:""}),v.jsx("input",{type:"email",placeholder:"",value:r,onChange:g=>e(g.target.value)}),v.jsx("input",{type:"password",placeholder:"",value:n,onChange:g=>s(g.target.value)}),v.jsx("button",{onClick:p,children:""}),v.jsx("div",{style:{marginTop:"1em",color:"red"},children:o})]})},u0=r=>Array.isArray(r)?r.filter(e=>typeof e=="string"&&e.trim().length>0):[],IN=new Set(["owner.multi@example.com","vestige_sync@me.com"]),uf=()=>{const[r,e]=D.useState(null),[n,s]=D.useState(null),[o,u]=D.useState(!0),[f,m]=D.useState("");D.useEffect(()=>{let S=!1;const P=mT(lf,async C=>{if(!C){S||(e(null),s(null),m(""),u(!1));return}S||(e(C),u(!0),m(""));try{const U=kt(Ae,"users",C.uid),O=await ss(U);if(O.exists()){S||(s({id:O.id,...O.data()}),u(!1));return}const j=C.email?await it(_N(Ye(Ae,"users"),EN("email","==",C.email))):null;if(!S){if(j&&!j.empty){const q=j.docs[0],F={...q.data(),uid:C.uid,email:C.email||q.data().email||"",gymIds:u0(q.data().gymIds),migratedFromProfileId:q.id,updatedAt:Xs()};try{await ou(U,F,{merge:!0})}catch(X){console.error("users/{uid} :",X)}s({id:C.uid,...F,updatedAt:q.data().updatedAt})}else{const q=(C.email||"").toLowerCase();if(IN.has(q)){const X={uid:C.uid,email:C.email||"",role:"admin",gymIds:["*"],createdAt:Xs(),updatedAt:Xs()};try{await ou(U,X,{merge:!0})}catch(Q){console.error("users/{uid} :",Q)}s({id:C.uid,uid:C.uid,email:C.email||"",role:"admin",gymIds:["*"]})}else s({id:C.uid,uid:C.uid,email:C.email||"",role:"owner",gymIds:[]})}u(!1)}}catch(U){console.error(":",U),S||(m(""),s(null),u(!1))}});return()=>{S=!0,P()}},[]);const p=D.useMemo(()=>u0(n==null?void 0:n.gymIds),[n]),g=typeof(n==null?void 0:n.role)=="string"?n.role:"",E=D.useMemo(()=>g==="admin"||p.includes("*"),[g,p]);return{authUser:r,profile:n,gymIds:p,role:g,hasAllGymAccess:E,canAccessGym:S=>E||p.includes(S),loading:o,error:f}},CN=()=>{yr("");const r=_o(),[e,n]=D.useState([]),[s,o]=D.useState([]),[u,f]=D.useState(!0),[m,p]=D.useState(""),{gymIds:g,hasAllGymAccess:E,loading:b,error:S}=uf(),P=j=>j?j.seconds?new Date(j.seconds*1e3).toLocaleDateString():String(j):"-",C=()=>{WI(lf).then(()=>r("/login")).catch(j=>console.error(":",j))};D.useEffect(()=>{if(b)return;if(S){p(S),f(!1);return}(async()=>{f(!0),p("");try{const[q,F]=await Promise.all([it(Ye(Ae,"events")),it(Ye(Ae,"gyms"))]),X=q.docs.map(J=>({id:J.id,...J.data()})).filter(J=>E||g.includes(J.gymId)),Q=F.docs.map(J=>({id:J.id,...J.data()})).filter(J=>E||g.includes(J.id)).sort((J,I)=>(J.name||"").localeCompare(I.name||"","ja"));n(X),o(Q)}catch(q){console.error(":",q),p("")}finally{f(!1)}})()},[b,S,g,E]);const U=async j=>{if(!window.confirm(""))return;const q=e.find(F=>F.id===j);if(!q||!E&&!g.includes(q.gymId)){window.alert("");return}try{await Su(kt(Ae,"events",j)),n(e.filter(F=>F.id!==j))}catch(F){console.error(":",F)}},O=new Map(s.map(j=>[j.id,j.name||j.id]));return u||b?v.jsx("p",{style:{padding:"2em"},children:"..."}):m||S?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:m||S}),v.jsx("div",{style:{marginTop:"1em"},children:v.jsx(Xe,{to:"/",children:" Home"})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsx("h2",{children:""}),v.jsx("p",{children:""}),v.jsxs("p",{children:[":"," ",E?"":s.length>0?s.map(j=>j.name||j.id).join(" / "):""]}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsx("p",{style:{marginTop:0},children:""}),E||g.length>0?v.jsx(Xe,{to:"/create-event",children:" "}):v.jsx("p",{style:{marginBottom:0},children:""})]}),v.jsx("h3",{style:{marginTop:"1.6em"},children:" "}),!E&&g.length===0?v.jsx("p",{children:""}):e.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"1em"},children:e.map(j=>v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsx("h4",{style:{marginTop:0,marginBottom:"0.4em"},children:j.name}),v.jsxs("p",{style:{marginTop:0},children:[": ",P(j.startDate),"  ",P(j.endDate)]}),v.jsxs("p",{style:{marginTop:0},children:[": ",O.get(j.gymId)||""]}),v.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[v.jsx(Xe,{to:`/events/${j.id}/edit`,state:{tab:"seasons"},children:" /  / "}),v.jsx(Xe,{to:`/events/${j.id}/edit`,state:{tab:"participants"},children:""}),v.jsx(Xe,{to:`/events/${j.id}/edit`,state:{tab:"scores"},children:""}),v.jsx(Xe,{to:`/score-summary/${j.id}`,children:""}),v.jsx("button",{type:"button",onClick:()=>U(j.id),children:" "})]})]},j.id))}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx("button",{type:"button",onClick:C,children:""})}),v.jsx("div",{style:{marginTop:"1em"},children:v.jsx(Xe,{to:"/",children:" Home"})})]})};function xN(){yr("");const[r,e]=D.useState(""),[n,s]=D.useState(""),[o,u]=D.useState([]),[f,m]=D.useState(""),[p,g]=D.useState(""),[E,b]=D.useState(""),[S,P]=D.useState(!0),[C,U]=D.useState(""),O=_o(),{authUser:j,gymIds:q,hasAllGymAccess:F,loading:X,error:Q}=uf();D.useEffect(()=>{if(X)return;if(Q){U(Q),P(!1);return}(async()=>{P(!0),U("");try{const x=(await it(Ye(Ae,"gyms"))).docs.map(V=>({id:V.id,...V.data()})).filter(V=>F||q.includes(V.id)).sort((V,k)=>(V.name||"").localeCompare(k.name||"","ja"));u(x),x.length>0?s(V=>V||x[0].id):s("")}catch(R){console.error(":",R),U("")}finally{P(!1)}})()},[X,Q,q,F]);const J=async I=>{if(I.preventDefault(),!n){b(" ");return}if(new Date(f)>new Date(p)){b(" ");return}try{await af(Ye(Ae,"events"),{name:r,gymId:n,ownerUid:(j==null?void 0:j.uid)||"",startDate:gt.fromDate(new Date(f)),endDate:gt.fromDate(new Date(p)),createdAt:Xs()}),b(" "),e(""),O("/dashboard")}catch(R){console.error(R),b(" ")}};return S||X?v.jsx("p",{style:{padding:"2em"},children:"..."}):C||Q?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:C||Q}),v.jsx(Xe,{to:"/dashboard",children:" "})]}):v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("h2",{children:" "}),v.jsx(Xe,{to:"/dashboard",children:" "}),o.length===0?v.jsx("p",{style:{marginTop:"1em"},children:""}):v.jsxs("form",{onSubmit:J,children:[v.jsx("input",{type:"text",placeholder:"",value:r,onChange:I=>e(I.target.value),required:!0}),v.jsx("select",{value:n,onChange:I=>s(I.target.value),required:!0,children:o.map(I=>v.jsx("option",{value:I.id,children:I.name||I.id},I.id))}),v.jsx("input",{type:"date",value:f,onChange:I=>m(I.target.value),required:!0}),v.jsx("input",{type:"date",value:p,onChange:I=>g(I.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("p",{children:E})]})}const c0=r=>{if(!r)return"";const e=typeof r.toDate=="function"?r.toDate():new Date(r);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${o}`},DN=({eventId:r})=>{const[e,n]=D.useState(""),[s,o]=D.useState(""),[u,f]=D.useState(""),[m,p]=D.useState(""),[g,E]=D.useState([]),[b,S]=D.useState(""),[P,C]=D.useState({name:"",startDate:"",endDate:""}),U=D.useCallback(async()=>{try{const J=(await it(Ye(Ae,"events",r,"seasons"))).docs.map(I=>({id:I.id,...I.data()}));E(J)}catch(Q){console.error(":",Q)}},[r]);D.useEffect(()=>{U()},[U]);const O=async Q=>{Q.preventDefault();try{await af(Ye(Ae,"events",r,"seasons"),{name:e,startDate:gt.fromDate(new Date(s)),endDate:gt.fromDate(new Date(u))}),p(" "),n(""),o(""),f(""),U()}catch(J){console.error(J),p(" ")}},j=async Q=>{if(window.confirm(""))try{await Su(kt(Ae,"events",r,"seasons",Q)),E(I=>I.filter(R=>R.id!==Q))}catch(I){console.error(":",I)}},q=Q=>{S(Q.id),C({name:Q.name||"",startDate:c0(Q.startDate),endDate:c0(Q.endDate)})},F=()=>{S(""),C({name:"",startDate:"",endDate:""})},X=async Q=>{if(!P.name.trim()||!P.startDate||!P.endDate){alert("");return}try{const J={name:P.name.trim(),startDate:gt.fromDate(new Date(P.startDate)),endDate:gt.fromDate(new Date(P.endDate))};await rg(kt(Ae,"events",r,"seasons",Q),J),E(I=>I.map(R=>R.id===Q?{...R,...J}:R)),F()}catch(J){console.error(":",J),alert("")}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:O,children:[v.jsx("input",{type:"text",placeholder:"",value:e,onChange:Q=>n(Q.target.value),required:!0}),v.jsx("input",{type:"date",value:s,onChange:Q=>o(Q.target.value),required:!0}),v.jsx("input",{type:"date",value:u,onChange:Q=>f(Q.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("p",{children:m}),v.jsx("ul",{children:g.map(Q=>v.jsx("li",{children:b===Q.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:P.name,onChange:J=>C(I=>({...I,name:J.target.value}))}),v.jsx("input",{type:"date",value:P.startDate,onChange:J=>C(I=>({...I,startDate:J.target.value}))}),v.jsx("input",{type:"date",value:P.endDate,onChange:J=>C(I=>({...I,endDate:J.target.value}))}),v.jsx("button",{type:"button",onClick:()=>X(Q.id),children:""}),v.jsx("button",{type:"button",onClick:F,children:""})]}):v.jsxs(v.Fragment,{children:[Q.name,"",Q.startDate.toDate().toLocaleDateString(),"",Q.endDate.toDate().toLocaleDateString(),"",v.jsx("button",{type:"button",onClick:()=>q(Q),children:""}),v.jsx("button",{type:"button",onClick:()=>j(Q.id),children:""})]})},Q.id))})]})},NN=({eventId:r,categories:e,setCategories:n})=>{const[s,o]=D.useState(""),[u,f]=D.useState(""),[m,p]=D.useState(""),g=D.useCallback(async()=>{try{const O=(await it(Ye(Ae,"events",r,"categories"))).docs.map(j=>({id:j.id,...j.data()}));n(O)}catch(U){console.error(":",U)}},[r,n]);D.useEffect(()=>{g()},[g]);const E=async U=>{if(U.preventDefault(),!!s)try{await af(Ye(Ae,"events",r,"categories"),{name:s}),o(""),g()}catch(O){console.error(":",O)}},b=async U=>{if(window.confirm(""))try{await Su(kt(Ae,"events",r,"categories",U)),n(j=>j.filter(q=>q.id!==U))}catch(j){console.error(":",j)}},S=U=>{f(U.id),p(U.name||"")},P=()=>{f(""),p("")},C=async U=>{const O=m.trim();if(!O){alert("");return}try{await rg(kt(Ae,"events",r,"categories",U),{name:O}),n(j=>j.map(q=>q.id===U?{...q,name:O}:q)),P()}catch(j){console.error(":",j),alert("")}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:E,children:[v.jsx("input",{type:"text",placeholder:"",value:s,onChange:U=>o(U.target.value),required:!0}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("ul",{children:e.map(U=>v.jsx("li",{children:u===U.id?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:m,onChange:O=>p(O.target.value)}),v.jsx("button",{type:"button",onClick:()=>C(U.id),children:""}),v.jsx("button",{type:"button",onClick:P,children:""})]}):v.jsxs(v.Fragment,{children:[U.name,v.jsx("button",{type:"button",onClick:()=>S(U),children:""}),v.jsx("button",{type:"button",onClick:()=>b(U.id),children:""})]})},U.id))})]})},Zc={name:"",memberNo:"",age:"",gender:"",categoryId:""},ON=r=>r==="male"?"":r==="female"?"":r==="other"?"":"",MN=({eventId:r,categories:e})=>{const[n,s]=D.useState([]),[o,u]=D.useState(Zc),[f,m]=D.useState(""),[p,g]=D.useState(Zc),E=D.useCallback(async()=>{try{const j=(await it(Ye(Ae,"events",r,"participants"))).docs.map(q=>({id:q.id,...q.data()}));s(j)}catch(O){console.error(":",O)}},[r]);D.useEffect(()=>{E()},[E]);const b=async O=>{O.preventDefault();try{await af(Ye(Ae,"events",r,"participants"),{name:o.name.trim(),memberNo:o.memberNo.trim(),age:Number(o.age),gender:o.gender,categoryId:o.categoryId,createdAt:Xs()}),u(Zc),E()}catch(j){console.error(":",j)}},S=O=>{m(O.id),g({name:O.name||"",memberNo:O.memberNo||"",age:O.age?String(O.age):"",gender:O.gender||"",categoryId:O.categoryId||""})},P=()=>{m(""),g(Zc)},C=async O=>{if(!p.name.trim()||!p.memberNo.trim()||!p.age||!p.gender||!p.categoryId){alert("");return}try{const j={name:p.name.trim(),memberNo:p.memberNo.trim(),age:Number(p.age),gender:p.gender,categoryId:p.categoryId,updatedAt:Xs()};await rg(kt(Ae,"events",r,"participants",O),j),s(q=>q.map(F=>F.id===O?{...F,...j,updatedAt:new Date}:F)),P()}catch(j){console.error(":",j),alert("")}},U=async O=>{if(window.confirm(""))try{await Su(kt(Ae,"events",r,"participants",O)),s(q=>q.filter(F=>F.id!==O))}catch(q){console.error(":",q)}};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),v.jsxs("form",{onSubmit:b,children:[v.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:O=>u(j=>({...j,name:O.target.value})),required:!0}),v.jsx("input",{type:"text",placeholder:"",value:o.memberNo,onChange:O=>u(j=>({...j,memberNo:O.target.value})),required:!0}),v.jsx("input",{type:"number",min:"1",max:"120",placeholder:"",value:o.age,onChange:O=>u(j=>({...j,age:O.target.value})),required:!0}),v.jsxs("select",{value:o.gender,onChange:O=>u(j=>({...j,gender:O.target.value})),required:!0,children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"male",children:""}),v.jsx("option",{value:"female",children:""}),v.jsx("option",{value:"other",children:""})]}),v.jsxs("select",{value:o.categoryId,onChange:O=>u(j=>({...j,categoryId:O.target.value})),required:!0,children:[v.jsx("option",{value:"",children:"--  --"}),e.map(O=>v.jsx("option",{value:O.id,children:O.name},O.id))]}),v.jsx("button",{type:"submit",children:""})]}),v.jsx("ul",{children:n.map(O=>{var F;const j=((F=e.find(X=>X.id===O.categoryId))==null?void 0:F.name)||"",q=f===O.id;return v.jsx("li",{children:q?v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"text",value:p.name,onChange:X=>g(Q=>({...Q,name:X.target.value}))}),v.jsx("input",{type:"text",value:p.memberNo,onChange:X=>g(Q=>({...Q,memberNo:X.target.value}))}),v.jsx("input",{type:"number",min:"1",max:"120",value:p.age,onChange:X=>g(Q=>({...Q,age:X.target.value}))}),v.jsxs("select",{value:p.gender,onChange:X=>g(Q=>({...Q,gender:X.target.value})),children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"male",children:""}),v.jsx("option",{value:"female",children:""}),v.jsx("option",{value:"other",children:""})]}),v.jsxs("select",{value:p.categoryId,onChange:X=>g(Q=>({...Q,categoryId:X.target.value})),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(X=>v.jsx("option",{value:X.id,children:X.name},X.id))]}),v.jsx("button",{type:"button",onClick:()=>C(O.id),children:""}),v.jsx("button",{type:"button",onClick:P,children:""})]}):v.jsxs(v.Fragment,{children:[O.name," / ",": ",O.memberNo||"-"," / ",": ",O.age||"-"," / ",": ",ON(O.gender)," / ",": ",j,v.jsx("button",{type:"button",onClick:()=>S(O),children:""}),v.jsx("button",{type:"button",onClick:()=>U(O.id),children:""})]})},O.id)})})]})},PN=()=>{const{eventId:r}=uu(),[e,n]=D.useState([]),[s,o]=D.useState(""),[u,f]=D.useState([]),[m,p]=D.useState(""),[g,E]=D.useState([]),[b,S]=D.useState("");D.useEffect(()=>{(async()=>{const X=await it(Ye(Ae,"events",r,"seasons"));n(X.docs.map(Q=>({id:Q.id,...Q.data()})))})()},[r]),D.useEffect(()=>{if(!s)return;(async()=>{const X=await it(Ye(Ae,"events",r,"categories"));f(X.docs.map(Q=>({id:Q.id,...Q.data()})))})(),p(""),E([])},[s]),D.useEffect(()=>{if(!s||!m)return;(async()=>{const Q=(await it(Ye(Ae,"events",r,"seasons",s,"categories",m,"routes"))).docs.map(J=>({id:J.id,...J.data(),isEditing:!1}));Q.sort((J,I)=>J.name.localeCompare(I.name,"ja")),E(Q)})()},[m]);const P=()=>{const F=`No.${String(g.length+1).padStart(2,"0")}`;E([...g,{name:F,grade:"",isBonus:!1,isEditing:!0}])},C=(F,X,Q)=>{E(J=>{const I=[...J];return I[F][X]=X==="isBonus"?Q.target.checked:Q,I})},U=F=>{E(X=>X.map((Q,J)=>({...Q,isEditing:J===F?!Q.isEditing:!1})))},O=async F=>{const X=g[F];if(!X.grade){alert("");return}const Q=kt(Ae,"events",r,"seasons",s,"categories",m,"routes",X.name);await ou(Q,{name:X.name,grade:X.grade,isBonus:X.isBonus}),E(J=>{const I=[...J];return I[F].isEditing=!1,I}),S(` ${X.name} `),setTimeout(()=>S(""),2e3)},j=async F=>{const X=g[F],Q=`No.${String(g.length+1).padStart(2,"0")}`,J=kt(Ae,"events",r,"seasons",s,"categories",m,"routes",Q);await ou(J,{name:Q,grade:X.grade,isBonus:X.isBonus});const I={...X,name:Q,isEditing:!1},R=[...g];R.splice(F+1,0,I),E(R),S(" "),setTimeout(()=>S(""),2e3)},q=async F=>{const X=g[F].name,Q=kt(Ae,"events",r,"seasons",s,"categories",m,"routes",X);await Su(Q);const J=[...g];J.splice(F,1),E(J),S(" "),setTimeout(()=>S(""),2e3)};return v.jsxs("div",{children:[v.jsx("h3",{children:" "}),b&&v.jsx("p",{children:b}),v.jsxs("label",{children:["",v.jsxs("select",{value:s,onChange:F=>o(F.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(F=>v.jsx("option",{value:F.id,children:F.name},F.id))]})]}),s&&v.jsxs(v.Fragment,{children:[v.jsxs("label",{children:["",v.jsxs("select",{value:m,onChange:F=>p(F.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),u.map(F=>v.jsx("option",{value:F.id,children:F.name},F.id))]})]}),m&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{marginTop:"1em"},children:v.jsx("button",{onClick:P,children:" "})}),v.jsxs("table",{style:{marginTop:"1em",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:""}),v.jsx("th",{children:""}),v.jsx("th",{children:""}),v.jsx("th",{children:""})]})}),v.jsx("tbody",{children:g.map((F,X)=>v.jsxs("tr",{children:[v.jsx("td",{children:F.name}),v.jsx("td",{children:F.isEditing?v.jsxs("select",{value:F.grade,onChange:Q=>C(X,"grade",Q.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),v.jsx("option",{value:"9",children:"9"}),v.jsx("option",{value:"8",children:"8"}),v.jsx("option",{value:"7",children:"7"}),v.jsx("option",{value:"6",children:"6"}),v.jsx("option",{value:"5",children:"5"}),v.jsx("option",{value:"4",children:"4"}),v.jsx("option",{value:"3",children:"3"}),v.jsx("option",{value:"2",children:"2"}),v.jsx("option",{value:"1",children:"1"}),v.jsx("option",{value:"",children:""}),v.jsx("option",{value:"2",children:"2"})]}):F.grade}),v.jsx("td",{children:F.isEditing?v.jsx("input",{type:"checkbox",checked:F.isBonus,onChange:Q=>C(X,"isBonus",Q)}):F.isBonus?"":"-"}),v.jsx("td",{children:F.isEditing?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>O(X),children:""}),v.jsx("button",{onClick:()=>U(X),children:""})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>U(X),children:""}),v.jsx("button",{onClick:()=>j(X),children:""}),v.jsx("button",{onClick:()=>q(X),children:""})]})})]},X))})]})]})]})]})},VN=({eventId:r})=>{var S,P;const[e,n]=D.useState([]),[s,o]=D.useState([]),[u,f]=D.useState([]),m=kn(),[p,g]=D.useState(((S=m.state)==null?void 0:S.seasonId)||""),[E,b]=D.useState(((P=m.state)==null?void 0:P.categoryId)||"");return D.useEffect(()=>{const C=async()=>{try{const j=(await it(Ye(Ae,"events",r,"seasons"))).docs.map(q=>({id:q.id,...q.data()}));n(j)}catch(O){console.error(":",O)}},U=async()=>{try{const j=(await it(Ye(Ae,"events",r,"categories"))).docs.map(q=>({id:q.id,...q.data()}));o(j)}catch(O){console.error(":",O)}};C(),U()},[r]),D.useEffect(()=>{(async()=>{if(E)try{const j=(await it(Ye(Ae,"events",r,"participants"))).docs.map(q=>({id:q.id,...q.data()})).filter(q=>q.categoryId===E);f(j)}catch(U){console.error(":",U)}})()},[r,E]),D.useEffect(()=>{var C,U;(C=m.state)!=null&&C.seasonId&&g(m.state.seasonId),(U=m.state)!=null&&U.categoryId&&b(m.state.categoryId)},[m.state]),v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("h2",{children:" "}),v.jsx("div",{style:{marginBottom:"1em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:p,onChange:C=>g(C.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),e.map(C=>v.jsx("option",{value:C.id,children:C.name},C.id))]})]})}),v.jsx("div",{style:{marginBottom:"1em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:E,onChange:C=>b(C.target.value),children:[v.jsx("option",{value:"",children:"--  --"}),s.map(C=>v.jsx("option",{value:C.id,children:C.name},C.id))]})]})}),p&&E&&v.jsx("ul",{children:u.map(C=>v.jsxs("li",{children:[C.name,v.jsx(Xe,{to:`/events/${r}/scoreinput/${p}/${E}/${C.id}`,style:{marginLeft:"1em"},children:" "})]},C.id))})]})},np=[{id:"seasons",label:" ",hint:""},{id:"categories",label:" ",hint:""},{id:"routes",label:" ",hint:""},{id:"participants",label:" ",hint:""},{id:"scores",label:" ",hint:""}],h0=r=>r&&np.some(e=>e.id===r)?r:"seasons",kN=()=>{var V;const{eventId:r}=uu(),[e,n]=D.useState(""),s=kn(),[o,u]=Vh(),[f,m]=D.useState(h0(o.get("tab")||((V=s.state)==null?void 0:V.tab)||"seasons")),[p,g]=D.useState([]),[E,b]=D.useState(0),[S,P]=D.useState(0),[C,U]=D.useState(!0),[O,j]=D.useState(""),[q,F]=D.useState(!1),{gymIds:X,hasAllGymAccess:Q,loading:J,error:I}=uf();if(yr(e?`: ${e}`:""),D.useEffect(()=>{if(J)return;if(I){j(I),U(!1);return}(async()=>{U(!0),j(""),F(!1);try{const z=kt(Ae,"events",r),N=await ss(z);if(!N.exists()){j("");return}const rt=N.data();if(n(rt.name||""),!Q&&!X.includes(rt.gymId)){F(!0);return}const[Qe,te,ne]=await Promise.all([it(Ye(Ae,"events",r,"categories")),it(Ye(Ae,"events",r,"seasons")),it(Ye(Ae,"events",r,"participants"))]),he=Qe.docs.map(Ee=>({id:Ee.id,...Ee.data()}));g(he),b(te.size),P(ne.size)}catch(z){console.error(":",z),j("")}finally{U(!1)}})()},[r,X,Q,J,I]),D.useEffect(()=>{const k=h0(o.get("tab"));k!==f&&m(k)},[o]),D.useEffect(()=>{const k=new URLSearchParams(o);k.get("tab")!==f&&(k.set("tab",f),u(k,{replace:!0}))},[f,o,u]),C||J)return v.jsx("p",{style:{padding:"2em"},children:"..."});if(O||I)return v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:O||I}),v.jsx(Xe,{to:"/dashboard",children:" "})]});if(q)return v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:""}),v.jsx(Xe,{to:"/dashboard",children:" "})]});const R=np.find(k=>k.id===f),x=[{label:"",value:E},{label:"",value:p.length},{label:"",value:S}];return v.jsxs("div",{style:{padding:"1.2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsxs("h2",{children:[" ",e]}),v.jsx("div",{children:v.jsx(Xe,{to:"/dashboard",children:" "})}),v.jsxs("section",{style:{marginTop:"1em",border:"1px solid #ddd",borderRadius:"10px",padding:"0.8em"},children:[v.jsx("p",{style:{marginTop:0,marginBottom:"0.6em"},children:""}),v.jsx("div",{style:{display:"flex",gap:"0.6em",flexWrap:"wrap"},children:x.map(k=>v.jsxs("span",{style:{border:"1px solid #ccc",borderRadius:"999px",padding:"0.2em 0.7em"},children:[k.label,": ",k.value]},k.label))})]}),v.jsx("div",{style:{marginTop:"1em",display:"flex",gap:"0.5em",flexWrap:"wrap"},children:np.map(k=>v.jsx("button",{type:"button",onClick:()=>m(k.id),style:{border:"1px solid #bbb",borderRadius:"8px",padding:"0.45em 0.7em",background:f===k.id?"#f0f0f0":"#fff",fontWeight:f===k.id?"bold":"normal"},children:k.label},k.id))}),v.jsx("p",{style:{marginTop:"0.7em",marginBottom:"0.4em",color:"#444"},children:R==null?void 0:R.hint}),f==="seasons"&&v.jsx(DN,{eventId:r}),f==="categories"&&v.jsx(NN,{eventId:r,categories:p,setCategories:g}),f==="routes"&&(p.length===0?v.jsx("p",{children:""}):v.jsx(PN,{eventId:r,categories:p})),f==="participants"&&v.jsx(MN,{eventId:r,categories:p}),f==="scores"&&(p.length===0?v.jsx("p",{children:""}):v.jsx(VN,{eventId:r}))]})},LN=()=>{const{eventId:r,seasonId:e,categoryId:n,participantId:s}=uu(),[o,u]=D.useState([]),[f,m]=D.useState(""),[p,g]=D.useState({}),[E,b]=D.useState("simple"),[S,P]=D.useState(!0),[C,U]=D.useState(""),[O,j]=D.useState(""),[q,F]=D.useState(null),[X,Q]=D.useState(!0),[J,I]=D.useState(""),[R,x]=D.useState(!1),{gymIds:V,hasAllGymAccess:k,loading:z,error:N}=uf();yr(f?`: ${f}`:""),D.useEffect(()=>{if(z)return;if(N){I(N),Q(!1);return}(async()=>{Q(!0),I(""),x(!1);try{const ce=await ss(kt(Ae,"events",r));if(!ce.exists()){I("");return}if(!k&&!V.includes(ce.data().gymId)){x(!0);return}const ue=await ss(kt(Ae,"events",r,"participants",s));ue.exists()&&m(ue.data().name||"");const we=(await it(Ye(Ae,"events",r,"seasons",e,"categories",n,"routes"))).docs.map(le=>le.data()).sort((le,me)=>le.name.localeCompare(me.name,"ja"));u(we);const de=await ss(kt(Ae,"events",r,"seasons",e,"categories",n,"participants",s));if(de.exists()){const le=de.data();le.scores&&g(le.scores),le.updatedAt&&F(le.updatedAt.toDate())}}catch(ce){console.error(":",ce),I("")}finally{Q(!1)}})()},[r,e,n,s,V,k,z,N]);const rt=Z=>{g(ce=>({...ce,[Z]:!ce[Z]}))},Qe=C.trim().toLowerCase(),te=o.filter(Z=>!!p[Z.name]).length,ne=o.length-te,he=o.filter(Z=>Qe.length===0||Z.name.toLowerCase().includes(Qe)?S?!p[Z.name]:!0:!1),Ee=Z=>{g(ce=>{const ue={...ce};for(const ye of he)ue[ye.name]=Z;return ue})},L=async()=>{if(!R)try{await ou(kt(Ae,"events",r,"seasons",e,"categories",n,"participants",s),{scores:p,updatedAt:Xs()},{merge:!0}),j(" "),setTimeout(()=>j(""),2e3)}catch(Z){console.error(":",Z),j(" ")}};return X||z?v.jsx("p",{style:{padding:"2em"},children:"..."}):J||N?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:J||N}),v.jsx(Xe,{to:`/events/${r}/edit`,state:{tab:"scores",seasonId:e,categoryId:n},children:" "})]}):R?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:""}),v.jsx(Xe,{to:"/dashboard",children:" "})]}):v.jsxs("div",{style:{padding:"1.2em",maxWidth:"920px",margin:"0 auto"},children:[v.jsx("h2",{children:" "}),v.jsx("p",{children:v.jsx(Xe,{to:`/events/${r}/edit`,state:{tab:"scores",seasonId:e,categoryId:n},children:" "})}),v.jsxs("p",{style:{marginBottom:"0.3em"},children:[": ",f]}),v.jsxs("p",{style:{marginTop:0,marginBottom:"0.6em"},children:[" ",te," / ",o.length," ",ne,""]}),q&&v.jsxs("p",{style:{fontStyle:"italic",fontSize:"0.9em",marginTop:0},children:[": ",q.toLocaleString()]}),v.jsxs("section",{style:{marginTop:"0.8em",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.6em",alignItems:"center"},children:[v.jsx("button",{type:"button",onClick:()=>b("simple"),style:{border:"1px solid #bbb",background:E==="simple"?"#f0f0f0":"#fff",borderRadius:"999px",padding:"0.35em 0.8em",fontWeight:E==="simple"?"bold":"normal"},children:""}),v.jsx("button",{type:"button",onClick:()=>b("detail"),style:{border:"1px solid #bbb",background:E==="detail"?"#f0f0f0":"#fff",borderRadius:"999px",padding:"0.35em 0.8em",fontWeight:E==="detail"?"bold":"normal"},children:""}),v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:S,onChange:Z=>P(Z.target.checked),style:{marginRight:"0.3em"}}),""]}),v.jsxs("label",{children:[":",v.jsx("input",{type:"text",value:C,onChange:Z=>U(Z.target.value),placeholder:"No.01",style:{marginLeft:"0.4em"}})]})]}),v.jsxs("div",{style:{marginTop:"0.7em",display:"flex",gap:"0.6em",flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>Ee(!0),children:""}),v.jsx("button",{type:"button",onClick:()=>Ee(!1),children:""})]})]}),v.jsx("div",{style:{marginTop:"0.9em"},children:he.length===0?v.jsx("p",{children:""}):E==="simple"?v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"0.6em"},children:he.map(Z=>{const ce=!!p[Z.name];return v.jsxs("button",{type:"button",onClick:()=>rt(Z.name),style:{textAlign:"left",border:`1px solid ${ce?"#7bbf8e":"#ccc"}`,background:ce?"#eaf8ee":"#fff",borderRadius:"10px",padding:"0.7em",minHeight:"88px"},children:[v.jsx("div",{style:{fontWeight:"bold"},children:Z.name}),v.jsxs("div",{style:{fontSize:"0.9em",marginTop:"0.25em"},children:[": ",Z.grade||"-"," / : ",Z.points??"-"]}),v.jsx("div",{style:{marginTop:"0.35em",fontWeight:"bold"},children:ce?"":""})]},Z.name)})}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"520px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ddd"},children:""}),v.jsx("th",{style:{textAlign:"center",borderBottom:"1px solid #ddd"},children:""})]})}),v.jsx("tbody",{children:he.map(Z=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.4em 0"},children:Z.name}),v.jsx("td",{children:Z.grade||"-"}),v.jsx("td",{style:{textAlign:"right"},children:Z.points??"-"}),v.jsx("td",{style:{textAlign:"center"},children:v.jsx("input",{type:"checkbox",checked:!!p[Z.name],onChange:()=>rt(Z.name)})})]},Z.name))})]})})}),v.jsxs("div",{style:{marginTop:"1em"},children:[v.jsx("button",{type:"button",onClick:L,children:" "}),v.jsx("span",{style:{marginLeft:"1em"},children:O})]})]})},f0=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleDateString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleDateString():String(r):"-",to=r=>r?typeof r.toDate=="function"?r.toDate().getTime():typeof r.seconds=="number"?r.seconds*1e3:0:0,Oh=(r,e)=>{const n=to(r.startDate),s=to(r.endDate);return n&&s&&n<=e&&e<=s?"ongoing":n&&e<n?"upcoming":"ended"},jN={ongoing:"",upcoming:"",ended:""},d0={ongoing:0,upcoming:1,ended:2},UN=(r,e,n)=>{const s=Oh(r,n),o=Oh(e,n),u=d0[s]??99,f=d0[o]??99;if(u!==f)return u-f;const m=to(r.startDate),p=to(e.startDate),g=to(r.endDate),E=to(e.endDate);return s==="ongoing"?g!==E?g-E:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja"):s==="upcoming"?m!==p?m-p:g!==E?g-E:(r.name||"").localeCompare(e.name||"","ja"):g!==E?E-g:m!==p?p-m:(r.name||"").localeCompare(e.name||"","ja")},BN=()=>{yr("");const[r,e]=Vh(),n=r.get("q")||"",s=r.get("status")||"all",o=r.get("gym")||"all",[u,f]=D.useState([]),[m,p]=D.useState([]),[g,E]=D.useState(n),[b,S]=D.useState(s),[P,C]=D.useState(o),[U,O]=D.useState(!0),[j,q]=D.useState("");D.useEffect(()=>{(async()=>{try{q("");const[I,R]=await Promise.all([it(Ye(Ae,"events")),it(Ye(Ae,"gyms"))]),x=I.docs.map(k=>({id:k.id,...k.data()})),V=R.docs.map(k=>({id:k.id,...k.data()})).sort((k,z)=>(k.name||"").localeCompare(z.name||"","ja"));f(x),p(V)}catch(I){console.error(":",I),q("")}finally{O(!1)}})()},[]),D.useEffect(()=>{const J=new URLSearchParams,I=g.trim();I&&J.set("q",I),b!=="all"&&J.set("status",b),P!=="all"&&J.set("gym",P),J.toString()!==r.toString()&&e(J,{replace:!0})},[g,b,P,r,e]),D.useEffect(()=>{if(P==="all"||m.length===0)return;m.some(I=>I.id===P)||C("all")},[P,m]);const F=D.useMemo(()=>{const J=Date.now(),I=g.trim().toLowerCase();return[...u].sort((R,x)=>UN(R,x,J)).filter(R=>{const x=(R.name||"").toLowerCase(),V=Oh(R,J),k=I?x.includes(I):!0,z=b==="all"?!0:V===b,N=P==="all"?!0:R.gymId===P;return k&&z&&N})},[u,g,b,P]),X=D.useMemo(()=>new Map(m.map(J=>[J.id,J.name||J.id])),[m]),Q=()=>{E(""),S("all"),C("all")};return U?v.jsx("p",{children:"..."}):j?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:j}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Xe,{to:"/",children:" Home"})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsx("h2",{children:" "}),v.jsx("p",{style:{marginBottom:"0.4em"},children:""}),v.jsxs("ol",{style:{marginTop:0,paddingLeft:"1.2em"},children:[v.jsx("li",{children:""}),v.jsx("li",{children:""}),v.jsx("li",{children:""})]}),v.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"0.8em",marginBottom:"1em",display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("label",{children:[":",v.jsx("input",{type:"text",value:g,onChange:J=>E(J.target.value),placeholder:": Spring",style:{marginLeft:"0.5em"}})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:b,onChange:J=>S(J.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),v.jsx("option",{value:"ongoing",children:""}),v.jsx("option",{value:"upcoming",children:""}),v.jsx("option",{value:"ended",children:""})]})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:P,onChange:J=>C(J.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),m.map(J=>v.jsx("option",{value:J.id,children:J.name},J.id))]})]}),v.jsx("button",{type:"button",onClick:Q,children:""}),v.jsxs("span",{style:{marginLeft:"auto"},children:[" ",F.length," / ",u.length," "]})]}),u.length===0?v.jsx("p",{children:""}):F.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{display:"grid",gap:"1em"},children:F.map(J=>{const I=Oh(J,Date.now());return v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"10px",padding:"1em"},children:[v.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[J.name,v.jsx("span",{style:{marginLeft:"0.6em",fontSize:"0.8em",border:"1px solid #ccc",borderRadius:"999px",padding:"0.1em 0.5em"},children:jN[I]})]}),v.jsxs("p",{style:{marginTop:0},children:[": ",f0(J.startDate),"  ",f0(J.endDate)]}),v.jsxs("p",{style:{marginTop:0},children:[": ",X.get(J.gymId)||""]}),v.jsx(Xe,{to:`/score-summary/${J.id}`,children:""})]},J.id)})}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Xe,{to:"/",children:" Home"})})]})},zN=r=>r?typeof r.toMillis=="function"?r.toMillis():typeof r.seconds=="number"?r.seconds*1e3:0:0,m0=(r,e)=>{const n={};for(const s of r){const o=new Map;for(const u of e.filter(f=>f.categoryId===s.id))o.set(u.id,{participantId:u.id,name:u.name||"",memberNo:u.memberNo||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0});n[s.id]=o}return n},p0=r=>{const e={};for(const[n,s]of Object.entries(r)){const o=Array.from(s.values()).sort((p,g)=>g.totalPoints!==p.totalPoints?g.totalPoints-p.totalPoints:g.clearCount!==p.clearCount?g.clearCount-p.clearCount:p.name.localeCompare(g.name,"ja"));let u=null,f=null,m=0;e[n]=o.map((p,g)=>((p.totalPoints!==u||p.clearCount!==f)&&(m=g+1),u=p.totalPoints,f=p.clearCount,{...p,rank:m}))}return e},qN=()=>{const{eventId:r}=uu(),[e,n]=Vh(),s=e.get("season")||"all",o=e.get("category")||"all",u=e.get("q")||"",f=e.get("pid")||"",m=e.get("self")==="1"||e.get("view")==="self",[p,g]=D.useState(null),[E,b]=D.useState([]),[S,P]=D.useState([]),[C,U]=D.useState([]),[O,j]=D.useState(s),[q,F]=D.useState(o),[X,Q]=D.useState(f),[J,I]=D.useState(m),[R,x]=D.useState(u),[V,k]=D.useState({}),[z,N]=D.useState(!0),[rt,Qe]=D.useState(!1),[te,ne]=D.useState("");yr(p!=null&&p.name?`: ${p.name}`:""),D.useEffect(()=>{let le=!1;return(async()=>{N(!0),ne("");try{const Ne=await ss(kt(Ae,"events",r));if(!Ne.exists()){le||ne("");return}const[_e,mt,Lt]=await Promise.all([it(Ye(Ae,"events",r,"seasons")),it(Ye(Ae,"events",r,"categories")),it(Ye(Ae,"events",r,"participants"))]);if(le)return;g({id:Ne.id,...Ne.data()}),b(_e.docs.map(ut=>({id:ut.id,...ut.data()})).sort((ut,ht)=>ut.name.localeCompare(ht.name,"ja"))),P(mt.docs.map(ut=>({id:ut.id,...ut.data()})).sort((ut,ht)=>ut.name.localeCompare(ht.name,"ja"))),U(Lt.docs.map(ut=>({id:ut.id,...ut.data()})))}catch(Ne){console.error(":",Ne),le||ne("")}finally{le||N(!1)}})(),()=>{le=!0}},[r]),D.useEffect(()=>{let le=!1;return(async()=>{if(z||!p||S.length===0)return;ne("");const Ne=O==="all"?E.map(_e=>_e.id):[O].filter(Boolean);if(Ne.length===0){k(p0(m0(S,C)));return}Qe(!0);try{const _e=m0(S,C),mt=new Map(C.map(ht=>[ht.id,ht])),Lt=Ne.flatMap(ht=>S.map(async Rn=>{const[an,Et]=await Promise.all([it(Ye(Ae,"events",r,"seasons",ht,"categories",Rn.id,"routes")),it(Ye(Ae,"events",r,"seasons",ht,"categories",Rn.id,"participants"))]);return{categoryId:Rn.id,routeSnap:an,scoreSnap:Et}})),ut=await Promise.all(Lt);for(const{categoryId:ht,routeSnap:Rn,scoreSnap:an}of ut){const Et={};for(const Ln of Rn.docs){const En=Ln.data();Et[En.name]=Number(En.points)||1}for(const Ln of an.docs){const En=Ln.data(),jn=En.scores||{},on=Ln.id;if(!_e[ht].has(on)){const Be=mt.get(on);_e[ht].set(on,{participantId:on,name:(Be==null?void 0:Be.name)||En.participantName||`ID:${on}`,memberNo:(Be==null?void 0:Be.memberNo)||"-",totalPoints:0,clearCount:0,latestUpdatedAt:0})}const Oe=_e[ht].get(on);for(const[Be,ki]of Object.entries(jn))ki&&(Oe.totalPoints+=Et[Be]??1,Oe.clearCount+=1);Oe.latestUpdatedAt=Math.max(Oe.latestUpdatedAt,zN(En.updatedAt))}}le||k(p0(_e))}catch(_e){console.error(":",_e),le||ne("")}finally{le||Qe(!1)}})(),()=>{le=!0}},[z,p,S,C,E,O,r]);const he=D.useMemo(()=>q==="all"?S:S.filter(le=>le.id===q),[S,q]),Ee=D.useMemo(()=>[...q==="all"?C:C.filter(me=>me.categoryId===q)].sort((me,Ne)=>(me.name||"").localeCompare(Ne.name||"","ja")),[C,q]);D.useEffect(()=>{if(!X||Ee.length===0)return;Ee.some(me=>me.id===X)||Q("")},[Ee,X]),D.useEffect(()=>{J&&!X&&I(!1)},[J,X]),D.useEffect(()=>{E.length!==0&&O!=="all"&&!E.some(le=>le.id===O)&&j("all")},[E,O]),D.useEffect(()=>{S.length!==0&&q!=="all"&&!S.some(le=>le.id===q)&&F("all")},[S,q]),D.useEffect(()=>{const le=new URLSearchParams;O!=="all"&&le.set("season",O),q!=="all"&&le.set("category",q);const me=R.trim();me&&le.set("q",me),X&&le.set("pid",X),J&&X&&le.set("self","1"),le.toString()!==e.toString()&&n(le,{replace:!0})},[O,q,R,X,J,e,n]);const L=R.trim().toLowerCase(),Z=L.length>0,ce=C.find(le=>le.id===X)||null,ue=D.useMemo(()=>{if(!X)return[];const le=[];for(const me of he){const Ne=(V[me.id]||[]).find(_e=>_e.participantId===X);Ne&&le.push({...Ne,categoryName:me.name})}return le},[X,he,V]),ye=le=>{const me=new URLSearchParams;O!=="all"&&me.set("season",O),q!=="all"&&me.set("category",q),R.trim()&&me.set("q",R.trim()),X&&me.set("pid",X),J&&X&&me.set("self","1");const Ne=me.toString();return`/score-summary/${r}/participants/${le}${Ne?`?${Ne}`:""}`},we=()=>{F("all"),Q(""),I(!1),x("")},de=he.reduce((le,me)=>{const Ne=V[me.id]||[];return le+Ne.filter(_e=>{const mt=(_e.name||"").toLowerCase(),Lt=(_e.memberNo||"").toLowerCase();return mt.includes(L)||Lt.includes(L)}).length},0);return z?v.jsx("p",{children:"..."}):te?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:te}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Xe,{to:"/score-summary",children:" "})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"1100px",margin:"0 auto"},children:[v.jsxs("h2",{children:[p==null?void 0:p.name," - "]}),v.jsx("div",{style:{margin:"1em 0",display:"flex",flexWrap:"wrap",gap:"0.8em"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:O,onChange:le=>j(le.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),E.map(le=>v.jsx("option",{value:le.id,children:le.name},le.id))]})]})}),v.jsxs("div",{style:{margin:"1em 0"},children:[v.jsxs("label",{children:["/:",v.jsx("input",{type:"text",value:R,onChange:le=>x(le.target.value),placeholder:":  / M-1001",style:{marginLeft:"0.5em"}})]}),Z&&v.jsxs("span",{style:{marginLeft:"0.8em"},children:[" ",de," "]})]}),v.jsxs("div",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsx("p",{style:{marginTop:0,marginBottom:"0.5em"},children:""}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("label",{children:[":",v.jsxs("select",{value:q,onChange:le=>F(le.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[v.jsx("option",{value:"all",children:""}),S.map(le=>v.jsx("option",{value:le.id,children:le.name},le.id))]})]}),v.jsxs("label",{children:[":",v.jsxs("select",{value:X,onChange:le=>Q(le.target.value),style:{marginLeft:"0.5em",marginRight:"0.8em"},children:[v.jsx("option",{value:"",children:"--  --"}),Ee.map(le=>v.jsxs("option",{value:le.id,children:[le.name," (",le.memberNo||"-",")"]},le.id))]})]}),v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:J,onChange:le=>I(le.target.checked),disabled:!X,style:{marginLeft:"0.5em",marginRight:"0.3em"}}),""]}),v.jsx("button",{type:"button",onClick:we,children:""}),X&&v.jsx(Xe,{to:ye(X),children:""})]})]}),ce&&v.jsxs("section",{style:{margin:"1em 0",border:"1px solid #ddd",borderRadius:"8px",padding:"0.8em"},children:[v.jsxs("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:[": ",ce.name," (",ce.memberNo||"-",")"]}),ue.length===0?v.jsx("p",{style:{marginBottom:0},children:""}):v.jsx("ul",{style:{marginBottom:0,paddingLeft:"1.2em"},children:ue.map(le=>v.jsxs("li",{children:[le.categoryName,": ",le.rank," /  ",le.totalPoints," /  ",le.clearCount]},`${le.categoryName}-${le.participantId}`))})]}),rt&&v.jsx("p",{children:"..."}),he.length===0?v.jsx("p",{children:""}):J&&!X?v.jsx("p",{children:""}):he.map(le=>{const Ne=(V[le.id]||[]).filter(_e=>{if(J&&X&&_e.participantId!==X)return!1;if(!Z)return!0;const mt=(_e.name||"").toLowerCase(),Lt=(_e.memberNo||"").toLowerCase();return mt.includes(L)||Lt.includes(L)});return v.jsxs("section",{style:{marginBottom:"2em"},children:[v.jsxs("h3",{children:[": ",le.name]}),Ne.length===0?v.jsx("p",{children:Z?"":""}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"650px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""})]})}),v.jsx("tbody",{children:Ne.map(_e=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.4em 0"},children:_e.rank}),v.jsxs("td",{children:[_e.name,X===_e.participantId&&v.jsx("strong",{style:{marginLeft:"0.4em"},children:"()"})]}),v.jsx("td",{children:_e.memberNo}),v.jsx("td",{style:{textAlign:"right"},children:_e.totalPoints}),v.jsx("td",{style:{textAlign:"right"},children:_e.clearCount}),v.jsx("td",{children:v.jsx(Xe,{to:ye(_e.participantId),children:""})})]},_e.participantId))})]})})]},le.id)}),v.jsx("div",{style:{marginTop:"2em"},children:v.jsx(Xe,{to:"/score-summary",children:" "})})]})},HN=r=>r?typeof r.toDate=="function"?r.toDate().toLocaleString():typeof r.seconds=="number"?new Date(r.seconds*1e3).toLocaleString():"-":"-",g0=r=>{const e=[...r].sort((u,f)=>f.totalPoints!==u.totalPoints?f.totalPoints-u.totalPoints:f.clearCount!==u.clearCount?f.clearCount-u.clearCount:u.name.localeCompare(f.name,"ja"));let n=null,s=null,o=0;return e.map((u,f)=>((u.totalPoints!==n||u.clearCount!==s)&&(o=f+1),n=u.totalPoints,s=u.clearCount,{...u,rank:o}))},FN=()=>{var te;const{eventId:r,participantId:e}=uu(),[n]=Vh(),s=n.get("category")||"",o=n.get("q")||"",[u,f]=D.useState(null),[m,p]=D.useState(null),[g,E]=D.useState([]),[b,S]=D.useState([]),[P,C]=D.useState([]),[U,O]=D.useState(n.get("season")||"all"),[j,q]=D.useState([]),[F,X]=D.useState(null),[Q,J]=D.useState({prev:null,next:null}),[I,R]=D.useState(!0),[x,V]=D.useState(!1),[k,z]=D.useState("");yr(m!=null&&m.name?`: ${m.name}`:"");const N=ne=>{const he=new URLSearchParams;U!=="all"&&he.set("season",U),s&&he.set("category",s),o&&he.set("q",o);const Ee=he.toString();return`/score-summary/${r}/participants/${ne}${Ee?`?${Ee}`:""}`},rt=D.useMemo(()=>{const ne=new URLSearchParams;U!=="all"&&ne.set("season",U),s&&ne.set("category",s),o&&ne.set("q",o);const he=ne.toString();return`/score-summary/${r}${he?`?${he}`:""}`},[r,U,s,o]);D.useEffect(()=>{let ne=!1;return(async()=>{R(!0),z("");try{const[Ee,L,Z,ce,ue]=await Promise.all([ss(kt(Ae,"events",r)),ss(kt(Ae,"events",r,"participants",e)),it(Ye(Ae,"events",r,"participants")),it(Ye(Ae,"events",r,"seasons")),it(Ye(Ae,"events",r,"categories"))]);if(!Ee.exists()){ne||z("");return}if(!L.exists()){ne||z("");return}const ye=ce.docs.map(me=>({id:me.id,...me.data()})).sort((me,Ne)=>me.name.localeCompare(Ne.name,"ja")),we=ue.docs.map(me=>({id:me.id,...me.data()})).sort((me,Ne)=>me.name.localeCompare(Ne.name,"ja"));if(ne)return;const de=n.get("season"),le=de&&(de==="all"||ye.some(me=>me.id===de))?de:"all";f({id:Ee.id,...Ee.data()}),p({id:L.id,...L.data()}),E(Z.docs.map(me=>({id:me.id,...me.data()}))),S(ye),C(we),O(le)}catch(Ee){console.error(":",Ee),ne||z("")}finally{ne||R(!1)}})(),()=>{ne=!0}},[r,e,n]),D.useEffect(()=>{let ne=!1;return(async()=>{if(!(I||!m||b.length===0||P.length===0)){V(!0);try{const Ee=U==="all"?b:b.filter(de=>de.id===U),L=m.categoryId?[m.categoryId]:P.map(de=>de.id),Z=new Map(P.map(de=>[de.id,de.name])),ce=new Map(g.map(de=>[de.id,de.name||""])),ue=new Map(g.map(de=>[de.id,de.memberNo||"-"])),ye=[],we={};for(const de of Ee){const le=[],me=L.map(async _e=>{const[mt,Lt]=await Promise.all([it(Ye(Ae,"events",r,"seasons",de.id,"categories",_e,"routes")),it(Ye(Ae,"events",r,"seasons",de.id,"categories",_e,"participants"))]),ut=new Map(mt.docs.map(Oe=>{const Be=Oe.data();return[Be.name,Be]})),ht=new Map,Rn=g.filter(Oe=>Oe.categoryId===_e);for(const Oe of Rn)ht.set(Oe.id,{participantId:Oe.id,name:Oe.name||"",memberNo:Oe.memberNo||"-",totalPoints:0,clearCount:0});let an=null;for(const Oe of Lt.docs){const Be=Oe.data(),ki=Be.scores||{},Un=Oe.id;Un===m.id&&(an=Be);const ft=ht.get(Un)||{participantId:Un,name:ce.get(Un)||`ID:${Un}`,memberNo:ue.get(Un)||"-",totalPoints:0,clearCount:0};for(const[We,mn]of Object.entries(ki)){if(!mn)continue;const xt=ut.get(We);ft.totalPoints+=Number(xt==null?void 0:xt.points)||1,ft.clearCount+=1}ht.set(Un,ft)}const Et=g0(Array.from(ht.values())),Ln=Et.find(Oe=>Oe.participantId===m.id);we[_e]||(we[_e]=new Map(Et.map(Oe=>[Oe.participantId,{participantId:Oe.participantId,name:Oe.name,memberNo:Oe.memberNo,totalPoints:0,clearCount:0}])));for(const Oe of Et){const Be=we[_e].get(Oe.participantId)||{participantId:Oe.participantId,name:Oe.name,memberNo:Oe.memberNo,totalPoints:0,clearCount:0};Be.totalPoints+=Oe.totalPoints,Be.clearCount+=Oe.clearCount,we[_e].set(Oe.participantId,Be)}const En=(an==null?void 0:an.scores)||{},jn=Object.entries(En).filter(([,Oe])=>!!Oe).map(([Oe])=>{const Be=ut.get(Oe);return{routeName:Oe,points:Number(Be==null?void 0:Be.points)||1,grade:(Be==null?void 0:Be.grade)||"-"}}).sort((Oe,Be)=>Oe.routeName.localeCompare(Be.routeName,"ja")),on=jn.reduce((Oe,Be)=>Oe+Be.points,0);return{categoryId:_e,categoryName:Z.get(_e)||_e,clearCount:jn.length,totalPoints:on,rank:(Ln==null?void 0:Ln.rank)||Et.length,totalParticipants:Et.length,updatedAtText:HN(an==null?void 0:an.updatedAt),clearedRoutes:jn}}),Ne=(await Promise.all(me)).filter(Boolean);for(const _e of Ne)le.push(_e);ye.push({seasonId:de.id,seasonName:de.name,categorySummaries:le,totalPoints:le.reduce((_e,mt)=>_e+mt.totalPoints,0),totalClears:le.reduce((_e,mt)=>_e+mt.clearCount,0)})}if(!ne){const de=m.categoryId||L[0],le=de?Array.from((we[de]||new Map).values()):[],me=g0(le),Ne=me.find(_e=>_e.participantId===m.id);if(X(Ne?{categoryName:Z.get(de)||"",rank:Ne.rank,totalParticipants:me.length,totalPoints:Ne.totalPoints,totalClears:Ne.clearCount}:null),Ne){const _e=me.findIndex(ut=>ut.participantId===m.id),mt=_e>0?me[_e-1]:null,Lt=_e>=0&&_e<me.length-1?me[_e+1]:null;J({prev:mt,next:Lt})}else J({prev:null,next:null});q(ye)}}catch(Ee){console.error(":",Ee),ne||z("")}finally{ne||V(!1)}}})(),()=>{ne=!0}},[I,m,g,b,P,U,r]);const Qe=D.useMemo(()=>({totalPoints:j.reduce((ne,he)=>ne+he.totalPoints,0),totalClears:j.reduce((ne,he)=>ne+he.totalClears,0)}),[j]);return I?v.jsx("p",{children:"..."}):k?v.jsxs("div",{style:{padding:"2em"},children:[v.jsx("p",{children:k}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Xe,{to:rt,children:" "})})]}):v.jsxs("div",{style:{padding:"2em",maxWidth:"980px",margin:"0 auto"},children:[v.jsxs("h2",{children:[u==null?void 0:u.name," - "]}),v.jsxs("p",{style:{marginBottom:"0.4em"},children:[": ",v.jsx("strong",{children:(m==null?void 0:m.name)||"-"})]}),v.jsxs("p",{style:{marginTop:0},children:[": ",(m==null?void 0:m.memberNo)||"-"," / :"," ",((te=P.find(ne=>ne.id===(m==null?void 0:m.categoryId)))==null?void 0:te.name)||""]}),v.jsx("div",{style:{margin:"1em 0"},children:v.jsxs("label",{children:[":",v.jsxs("select",{value:U,onChange:ne=>O(ne.target.value),style:{marginLeft:"0.5em"},children:[v.jsx("option",{value:"all",children:""}),b.map(ne=>v.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})}),v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.8em",alignItems:"center"},children:[v.jsxs("p",{style:{margin:0},children:[": ",v.jsx("strong",{children:Qe.totalPoints})]}),v.jsxs("p",{style:{margin:0},children:[": ",v.jsx("strong",{children:Qe.totalClears})]})]}),F&&v.jsxs("p",{style:{marginBottom:0,marginTop:"0.6em"},children:["",F.categoryName,":"," ",v.jsx("strong",{children:F.rank})," / ",F.totalParticipants," "," ",F.totalPoints," /  ",F.totalClears,""]})]}),(Q.prev||Q.next)&&v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginTop:"1em"},children:[v.jsx("h3",{style:{marginTop:0},children:""}),v.jsxs("div",{style:{display:"flex",gap:"0.8em",flexWrap:"wrap"},children:[Q.prev?v.jsxs(Xe,{to:N(Q.prev.participantId),children:[" ",Q.prev.rank," ",Q.prev.name]}):v.jsx("span",{children:""}),Q.next?v.jsxs(Xe,{to:N(Q.next.participantId),children:[" ",Q.next.rank," ",Q.next.name]}):v.jsx("span",{children:""})]})]}),x&&v.jsx("p",{style:{marginTop:"1em"},children:"..."}),v.jsx("div",{style:{marginTop:"1.2em"},children:j.length===0?v.jsx("p",{children:""}):j.map(ne=>v.jsxs("section",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1em",marginBottom:"1em"},children:[v.jsxs("h3",{style:{marginTop:0},children:[ne.seasonName," /  ",ne.totalPoints," /  ",ne.totalClears]}),ne.categorySummaries.length===0?v.jsx("p",{children:""}):ne.categorySummaries.map(he=>v.jsxs("div",{style:{marginTop:"1em"},children:[v.jsxs("h4",{style:{marginBottom:"0.4em"},children:[": ",he.categoryName," /  ",he.rank,"/",he.totalParticipants," / "," ",he.totalPoints," /  ",he.clearCount]}),v.jsxs("p",{style:{marginTop:0,fontSize:"0.9em"},children:[": ",he.updatedAtText]}),he.clearedRoutes.length===0?v.jsx("p",{children:""}):v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",minWidth:"360px"},children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc"},children:""}),v.jsx("th",{style:{textAlign:"right",borderBottom:"1px solid #ccc"},children:""})]})}),v.jsx("tbody",{children:he.clearedRoutes.map(Ee=>v.jsxs("tr",{children:[v.jsx("td",{style:{padding:"0.35em 0"},children:Ee.routeName}),v.jsx("td",{children:Ee.grade}),v.jsx("td",{style:{textAlign:"right"},children:Ee.points})]},Ee.routeName))})]})})]},`${ne.seasonId}-${he.categoryId}`))]},ne.seasonId))}),v.jsx("div",{style:{marginTop:"1.5em"},children:v.jsx(Xe,{to:rt,children:" "})})]})},Jc=({children:r})=>{const[e,n]=D.useState(!0),[s,o]=D.useState(!1),u=kn();return D.useEffect(()=>{const f=mT(lf,m=>{o(!!m),n(!1)});return()=>f()},[]),e?v.jsx("p",{style:{padding:"2em"},children:"..."}):s?r:v.jsx(Dw,{to:"/login",replace:!0,state:{from:u}})};function GN(){return v.jsx(i1,{basename:"/FlashComp",children:v.jsxs(Ow,{children:[v.jsx(xi,{path:"/",element:v.jsx(d1,{})}),v.jsx(xi,{path:"/login",element:v.jsx(RN,{})}),v.jsx(xi,{path:"/dashboard",element:v.jsx(Jc,{children:v.jsx(CN,{})})}),v.jsx(xi,{path:"/create-event",element:v.jsx(Jc,{children:v.jsx(xN,{})})}),v.jsx(xi,{path:"/events/:eventId/edit",element:v.jsx(Jc,{children:v.jsx(kN,{})})}),v.jsx(xi,{path:"/events/:eventId/scoreinput/:seasonId/:categoryId/:participantId",element:v.jsx(Jc,{children:v.jsx(LN,{})})}),v.jsx(xi,{path:"/score-summary",element:v.jsx(BN,{})}),v.jsx(xi,{path:"/score-summary/:eventId",element:v.jsx(qN,{})}),v.jsx(xi,{path:"/score-summary/:eventId/participants/:participantId",element:v.jsx(FN,{})})]})})}Bb.createRoot(document.getElementById("root")).render(v.jsx(D.StrictMode,{children:v.jsx(GN,{})}));
